"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[770],{8723:function(h,w,q){q.r(w),q.d(w,{VERSION:function(){return mP},boot:function(){return NI},init:function(){return RI}});var tr,tn,ti,to,ts,tu,tl,tc,tp,td,tm,ty,tv,tb,tx,tT,tE,tA,tO,tw,tL,tS,tI,tP,tR,tN,tM,tk,tU,tC,tD,tF,tB,tj,tG,tV,tX,tH="u">typeof globalThis?globalThis:"u">typeof window?window:"u">typeof q.g?q.g:"u">typeof self?self:{};function wu(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var tz={};!function(h){var w=h.Promise,q=w&&"resolve"in w&&"reject"in w&&"all"in w&&"race"in w&&(new w(function(h){ts=h}),"function"==typeof ts);tz?(tz.Promise=q?w:G,tz.Polyfill=G):q||(h.Promise=G);var tr="pending",tn="sealed",ti="fulfilled",to="rejected",u=function(){};function l(h){return"[object Array]"===Object.prototype.toString.call(h)}var ts,tu,tl="u">typeof setImmediate?setImmediate:setTimeout,tc=[];function v(){for(var h=0;h<tc.length;h++)tc[h][0](tc[h][1]);tc=[],tu=!1}function g(h,w){tc.push([h,w]),tu||(tu=!0,tl(v,0))}function T(h){var w=h.owner,q=w.state_,tr=w.data_,tn=h[q],ts=h.then;if("function"==typeof tn){q=ti;try{tr=tn(tr)}catch(h){K(ts,h)}}O(ts,tr)||(q===ti&&V(ts,tr),q===to&&K(ts,tr))}function O(h,w){var q;try{if(h===w)throw TypeError("A promises callback cannot return that same promise.");if(w&&("function"==typeof w||"object"==typeof w)){var tr=w.then;if("function"==typeof tr)return tr.call(w,function(tr){q||(q=!0,w!==tr?V(h,tr):C(h,tr))},function(w){q||(q=!0,K(h,w))}),!0}}catch(w){return q||K(h,w),!0}return!1}function V(h,w){h!==w&&O(h,w)||C(h,w)}function C(h,w){h.state_===tr&&(h.state_=tn,h.data_=w,g(tt,h))}function K(h,w){h.state_===tr&&(h.state_=tn,h.data_=w,g(R,h))}function Y(h){var w=h.then_;h.then_=void 0;for(var q=0;q<w.length;q++)T(w[q])}function tt(h){h.state_=ti,Y(h)}function R(h){h.state_=to,Y(h)}function G(h){if("function"!=typeof h)throw TypeError("Promise constructor takes a function argument");if(!(this instanceof G))throw TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],function(h,w){function ft(h){K(w,h)}try{h(function(h){V(w,h)},ft)}catch(h){ft(h)}}(h,this)}G.prototype={constructor:G,state_:tr,then_:null,data_:void 0,then:function(h,w){var q={owner:this,then:new this.constructor(u),fulfilled:h,rejected:w};return this.state_===ti||this.state_===to?g(T,q):this.then_.push(q),q.then},catch:function(h){return this.then(null,h)}},G.all=function(h){if(!l(h))throw TypeError("You must pass an array to Promise.all().");return new this(function(w,q){for(var tr,tn=[],ti=0,to=0;to<h.length;to++)(tr=h[to])&&"function"==typeof tr.then?tr.then(function(h){return ti++,function(q){tn[h]=q,--ti||w(tn)}}(to),q):tn[to]=tr;ti||w(tn)})},G.race=function(h){if(!l(h))throw TypeError("You must pass an array to Promise.race().");return new this(function(w,q){for(var tr,tn=0;tn<h.length;tn++)(tr=h[tn])&&"function"==typeof tr.then?tr.then(w,q):w(tr)})},G.resolve=function(h){return h&&"object"==typeof h&&h.constructor===this?h:new this(function(w){w(h)})},G.reject=function(h){return new this(function(w,q){q(h)})}}("u">typeof window?window:"u">typeof tH?tH:"u">typeof self?self:tH);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var tK=Object.getOwnPropertySymbols,tY=Object.prototype.hasOwnProperty,tW=Object.prototype.propertyIsEnumerable,tq=!function(){try{if(!Object.assign)return!1;var h=new String("abc");if(h[5]="de","5"===Object.getOwnPropertyNames(h)[0])return!1;for(var w={},q=0;q<10;q++)w["_"+String.fromCharCode(q)]=q;var tr=Object.getOwnPropertyNames(w).map(function(h){return w[h]});if("0123456789"!==tr.join(""))return!1;var tn={};return"abcdefghijklmnopqrst".split("").forEach(function(h){tn[h]=h}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},tn)).join("")}catch{return!1}}()?function(h,w){for(var q,tr,tn=function(h){if(null==h)throw TypeError("Object.assign cannot be called with null or undefined");return Object(h)}(h),ti=1;ti<arguments.length;ti++){for(var to in q=Object(arguments[ti]))tY.call(q,to)&&(tn[to]=q[to]);if(tK){tr=tK(q);for(var ts=0;ts<tr.length;ts++)tW.call(q,tr[ts])&&(tn[tr[ts]]=q[tr[ts]])}}return tn}:Object.assign;let tZ=wu(tq);if(/*!
 * @pixi/polyfill - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */window.Promise||(window.Promise=tz.Polyfill),Object.assign||(Object.assign=tZ),Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()}),!(window.performance&&window.performance.now)){var tJ=Date.now();window.performance||(window.performance={}),window.performance.now=function(){return Date.now()-tJ}}for(var tQ=Date.now(),t$=["ms","moz","webkit","o"],t0=0;t0<t$.length&&!window.requestAnimationFrame;++t0){var t1=t$[t0];window.requestAnimationFrame=window[t1+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t1+"CancelAnimationFrame"]||window[t1+"CancelRequestAnimationFrame"]}window.requestAnimationFrame||(window.requestAnimationFrame=function(h){if("function"!=typeof h)throw TypeError(h+"is not a function");var w=Date.now(),q=16+tQ-w;return q<0&&(q=0),tQ=w,window.setTimeout(function(){tQ=Date.now(),h(performance.now())},q)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(h){return clearTimeout(h)}),Math.sign||(Math.sign=function(h){return 0===(h=Number(h))||isNaN(h)?h:h>0?1:-1}),Number.isInteger||(Number.isInteger=function(h){return"number"==typeof h&&isFinite(h)&&Math.floor(h)===h}),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array),window.Uint8Array||(window.Uint8Array=Array),window.Int32Array||(window.Int32Array=Array);var t2=/iPhone/i,t3=/iPod/i,t4=/iPad/i,t5=/\biOS-universal(?:.+)Mac\b/i,t6=/\bAndroid(?:.+)Mobile\b/i,t8=/Android/i,t7=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,t9=/Silk/i,er=/Windows Phone/i,en=/\bWindows(?:.+)ARM\b/i,ei=/BlackBerry/i,eo=/BB10/i,es=/Opera Mini/i,eu=/\b(CriOS|Chrome)(?:.+)Mobile/i,el=/Mobile(?:.+)Firefox\b/i,Wf=function(h){return"u">typeof h&&"MacIntel"===h.platform&&"number"==typeof h.maxTouchPoints&&h.maxTouchPoints>1&&typeof MSStream>"u"},ep=(eE=window.navigator,eO={userAgent:"",platform:"",maxTouchPoints:0},!eE&&"u">typeof navigator?eO={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:"string"==typeof eE?eO.userAgent=eE:eE&&eE.userAgent&&(eO={userAgent:eE.userAgent,platform:eE.platform,maxTouchPoints:eE.maxTouchPoints||0}),"u">typeof(eS=(eL=eO.userAgent).split("[FBAN"))[1]&&(eL=eS[0]),"u">typeof(eS=eL.split("Twitter"))[1]&&(eL=eS[0]),(eR={apple:{phone:(eI=eL,eP=function(h){return h.test(eI)})(t2)&&!eP(er),ipod:eP(t3),tablet:!eP(t2)&&(eP(t4)||Wf(eO))&&!eP(er),universal:eP(t5),device:(eP(t2)||eP(t3)||eP(t4)||eP(t5)||Wf(eO))&&!eP(er)},amazon:{phone:eP(t7),tablet:!eP(t7)&&eP(t9),device:eP(t7)||eP(t9)},android:{phone:!eP(er)&&eP(t7)||!eP(er)&&eP(t6),tablet:!eP(er)&&!eP(t7)&&!eP(t6)&&(eP(t9)||eP(t8)),device:!eP(er)&&(eP(t7)||eP(t9)||eP(t6)||eP(t8))||eP(/\bokhttp\b/i)},windows:{phone:eP(er),tablet:eP(en),device:eP(er)||eP(en)},other:{blackberry:eP(ei),blackberry10:eP(eo),opera:eP(es),firefox:eP(el),chrome:eP(eu),device:eP(ei)||eP(eo)||eP(es)||eP(el)||eP(eu)},any:!1,phone:!1,tablet:!1}).any=eR.apple.device||eR.android.device||eR.windows.device||eR.other.device,eR.phone=eR.apple.phone||eR.android.phone||eR.windows.phone,eR.tablet=eR.apple.tablet||eR.android.tablet||eR.windows.tablet,eR),ed={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:function(h){var w=!0;if(ep.tablet||ep.phone){if(ep.apple.device){var q=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(q){var tr=parseInt(q[1],10);tr<11&&(w=!1)}}if(ep.android.device){var q=navigator.userAgent.match(/Android\s([0-9.]*)/);if(q){var tr=parseInt(q[1],10);tr<7&&(w=!1)}}}return w?32:4}(0),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:ep.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:!ep.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},e_={exports:{}};!function(h){var w=Object.prototype.hasOwnProperty,q="~";function r(){}function i(h,w,q){this.fn=h,this.context=w,this.once=q||!1}function o(h,w,tr,tn,ti){if("function"!=typeof tr)throw TypeError("The listener must be a function");var to=new i(tr,tn||h,ti),ts=q?q+w:w;return h._events[ts]?h._events[ts].fn?h._events[ts]=[h._events[ts],to]:h._events[ts].push(to):(h._events[ts]=to,h._eventsCount++),h}function a(h,w){0==--h._eventsCount?h._events=new r:delete h._events[w]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(q=!1)),s.prototype.eventNames=function(){var h,tr,tn=[];if(0===this._eventsCount)return tn;for(tr in h=this._events)w.call(h,tr)&&tn.push(q?tr.slice(1):tr);return Object.getOwnPropertySymbols?tn.concat(Object.getOwnPropertySymbols(h)):tn},s.prototype.listeners=function(h){var w=q?q+h:h,tr=this._events[w];if(!tr)return[];if(tr.fn)return[tr.fn];for(var tn=0,ti=tr.length,to=Array(ti);tn<ti;tn++)to[tn]=tr[tn].fn;return to},s.prototype.listenerCount=function(h){var w=q?q+h:h,tr=this._events[w];return tr?tr.fn?1:tr.length:0},s.prototype.emit=function(h,w,tr,tn,ti,to){var ts=q?q+h:h;if(!this._events[ts])return!1;var tu,tl,tc=this._events[ts],tp=arguments.length;if(tc.fn){switch(tc.once&&this.removeListener(h,tc.fn,void 0,!0),tp){case 1:return tc.fn.call(tc.context),!0;case 2:return tc.fn.call(tc.context,w),!0;case 3:return tc.fn.call(tc.context,w,tr),!0;case 4:return tc.fn.call(tc.context,w,tr,tn),!0;case 5:return tc.fn.call(tc.context,w,tr,tn,ti),!0;case 6:return tc.fn.call(tc.context,w,tr,tn,ti,to),!0}for(tl=1,tu=Array(tp-1);tl<tp;tl++)tu[tl-1]=arguments[tl];tc.fn.apply(tc.context,tu)}else{var td,tm=tc.length;for(tl=0;tl<tm;tl++)switch(tc[tl].once&&this.removeListener(h,tc[tl].fn,void 0,!0),tp){case 1:tc[tl].fn.call(tc[tl].context);break;case 2:tc[tl].fn.call(tc[tl].context,w);break;case 3:tc[tl].fn.call(tc[tl].context,w,tr);break;case 4:tc[tl].fn.call(tc[tl].context,w,tr,tn);break;default:if(!tu)for(td=1,tu=Array(tp-1);td<tp;td++)tu[td-1]=arguments[td];tc[tl].fn.apply(tc[tl].context,tu)}}return!0},s.prototype.on=function(h,w,q){return o(this,h,w,q,!1)},s.prototype.once=function(h,w,q){return o(this,h,w,q,!0)},s.prototype.removeListener=function(h,w,tr,tn){var ti=q?q+h:h;if(!this._events[ti])return this;if(!w)return a(this,ti),this;var to=this._events[ti];if(to.fn)to.fn!==w||tn&&!to.once||tr&&to.context!==tr||a(this,ti);else{for(var ts=0,tu=[],tl=to.length;ts<tl;ts++)(to[ts].fn!==w||tn&&!to[ts].once||tr&&to[ts].context!==tr)&&tu.push(to[ts]);tu.length?this._events[ti]=1===tu.length?tu[0]:tu:a(this,ti)}return this},s.prototype.removeAllListeners=function(h){var w;return h?(w=q?q+h:h,this._events[w]&&a(this,w)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=q,s.EventEmitter=s,h.exports=s}(e_);var eg=e_.exports;let em=wu(eg);var ey={exports:{}};function Ou(h,w,q){q=q||2;var tr,tn,ti,to,ts,tu,tl,tc=w&&w.length,tp=tc?w[0]*q:h.length,td=lv(h,0,tp,q,!0),tm=[];if(!td||td.next===td.prev)return tm;if(tc&&(td=function(h,w,q,tr){var tn,ti,to,ts,tu,tl=[];for(tn=0,ti=w.length;tn<ti;tn++)to=w[tn]*tr,ts=tn<ti-1?w[tn+1]*tr:h.length,(tu=lv(h,to,ts,tr,!1))===tu.next&&(tu.steiner=!0),tl.push(function(h){var w=h,q=h;do(w.x<q.x||w.x===q.x&&w.y<q.y)&&(q=w),w=w.next;while(w!==h);return q}(tu));for(tl.sort(U0),tn=0;tn<tl.length;tn++)q=function(h,w){var q=function(h,w){var q,tr,tn,ti=w,to=h.x,ts=h.y,tu=-1/0;do{if(ts<=ti.y&&ts>=ti.next.y&&ti.next.y!==ti.y){var tl=ti.x+(ts-ti.y)*(ti.next.x-ti.x)/(ti.next.y-ti.y);if(tl<=to&&tl>tu&&(tu=tl,tn=ti.x<ti.next.x?ti:ti.next,tl===to))return tn}ti=ti.next}while(ti!==w);if(!tn)return null;var tc,tp=tn,td=tn.x,tm=tn.y,ty=1/0;ti=tn;do to>=ti.x&&ti.x>=td&&to!==ti.x&&so(ts<tm?to:tu,ts,td,tm,ts<tm?tu:to,ts,ti.x,ti.y)&&(tc=Math.abs(ts-ti.y)/(to-ti.x),Pa(ti,h)&&(tc<ty||tc===ty&&(ti.x>tn.x||ti.x===tn.x&&(q=tn,tr=ti,0>dr(q.prev,q,tr.prev)&&0>dr(tr.next,q,q.next))))&&(tn=ti,ty=tc)),ti=ti.next;while(ti!==tp);return tn}(h,w);if(!q)return w;var tr=hv(q,h);return Gi(tr,tr.next),Gi(q,q.next)}(tl[tn],q);return q}(h,w,td,q)),h.length>80*q){tr=ti=h[0],tn=to=h[1];for(var ty=q;ty<tp;ty+=q)ts=h[ty],tu=h[ty+1],ts<tr&&(tr=ts),tu<tn&&(tn=tu),ts>ti&&(ti=ts),tu>to&&(to=tu);tl=0!==(tl=Math.max(ti-tr,to-tn))?32767/tl:0}return function Ia(h,w,q,tr,tn,ti,to){if(h){!to&&ti&&function(h,w,q,tr){var tn=h;do 0===tn.z&&(tn.z=hc(tn.x,tn.y,w,q,tr)),tn.prevZ=tn.prev,tn.nextZ=tn.next,tn=tn.next;while(tn!==h);tn.prevZ.nextZ=null,tn.prevZ=null,function(h){var w,q,tr,tn,ti,to,ts,tu,tl=1;do{for(q=h,h=null,ti=null,to=0;q;){for(to++,tr=q,ts=0,w=0;w<tl&&(ts++,tr=tr.nextZ);w++);for(tu=tl;ts>0||tu>0&&tr;)0!==ts&&(0===tu||!tr||q.z<=tr.z)?(tn=q,q=q.nextZ,ts--):(tn=tr,tr=tr.nextZ,tu--),ti?ti.nextZ=tn:h=tn,tn.prevZ=ti,ti=tn;q=tr}ti.nextZ=null,tl*=2}while(to>1)}(tn)}(h,tr,tn,ti);for(var ts,tu,tl=h;h.prev!==h.next;){if(ts=h.prev,tu=h.next,ti?function(h,w,q,tr){var tn=h.prev,ti=h.next;if(dr(tn,h,ti)>=0)return!1;for(var to=tn.x,ts=h.x,tu=ti.x,tl=tn.y,tc=h.y,tp=ti.y,td=to<ts?to<tu?to:tu:ts<tu?ts:tu,tm=tl<tc?tl<tp?tl:tp:tc<tp?tc:tp,ty=to>ts?to>tu?to:tu:ts>tu?ts:tu,tv=tl>tc?tl>tp?tl:tp:tc>tp?tc:tp,tb=hc(td,tm,w,q,tr),tx=hc(ty,tv,w,q,tr),tT=h.prevZ,tE=h.nextZ;tT&&tT.z>=tb&&tE&&tE.z<=tx;){if(tT.x>=td&&tT.x<=ty&&tT.y>=tm&&tT.y<=tv&&tT!==tn&&tT!==ti&&so(to,tl,ts,tc,tu,tp,tT.x,tT.y)&&dr(tT.prev,tT,tT.next)>=0||(tT=tT.prevZ,tE.x>=td&&tE.x<=ty&&tE.y>=tm&&tE.y<=tv&&tE!==tn&&tE!==ti&&so(to,tl,ts,tc,tu,tp,tE.x,tE.y)&&dr(tE.prev,tE,tE.next)>=0))return!1;tE=tE.nextZ}for(;tT&&tT.z>=tb;){if(tT.x>=td&&tT.x<=ty&&tT.y>=tm&&tT.y<=tv&&tT!==tn&&tT!==ti&&so(to,tl,ts,tc,tu,tp,tT.x,tT.y)&&dr(tT.prev,tT,tT.next)>=0)return!1;tT=tT.prevZ}for(;tE&&tE.z<=tx;){if(tE.x>=td&&tE.x<=ty&&tE.y>=tm&&tE.y<=tv&&tE!==tn&&tE!==ti&&so(to,tl,ts,tc,tu,tp,tE.x,tE.y)&&dr(tE.prev,tE,tE.next)>=0)return!1;tE=tE.nextZ}return!0}(h,tr,tn,ti):function(h){var w=h.prev,q=h.next;if(dr(w,h,q)>=0)return!1;for(var tr=w.x,tn=h.x,ti=q.x,to=w.y,ts=h.y,tu=q.y,tl=tr<tn?tr<ti?tr:ti:tn<ti?tn:ti,tc=to<ts?to<tu?to:tu:ts<tu?ts:tu,tp=tr>tn?tr>ti?tr:ti:tn>ti?tn:ti,td=to>ts?to>tu?to:tu:ts>tu?ts:tu,tm=q.next;tm!==w;){if(tm.x>=tl&&tm.x<=tp&&tm.y>=tc&&tm.y<=td&&so(tr,to,tn,ts,ti,tu,tm.x,tm.y)&&dr(tm.prev,tm,tm.next)>=0)return!1;tm=tm.next}return!0}(h)){w.push(ts.i/q|0),w.push(h.i/q|0),w.push(tu.i/q|0),Ra(h),h=tu.next,tl=tu.next;continue}if((h=tu)===tl){to?1===to?Ia(h=function(h,w,q){var tr=h;do{var tn=tr.prev,ti=tr.next.next;!Lu(tn,ti)&&cv(tn,tr,tr.next,ti)&&Pa(tn,ti)&&Pa(ti,tn)&&(w.push(tn.i/q|0),w.push(tr.i/q|0),w.push(ti.i/q|0),Ra(tr),Ra(tr.next),tr=h=ti),tr=tr.next}while(tr!==h);return Gi(tr)}(Gi(h),w,q),w,q,tr,tn,ti,2):2===to&&function(h,w,q,tr,tn,ti){var to=h;do{for(var ts,tu,tl=to.next.next;tl!==to.prev;){if(to.i!==tl.i&&(ts=to,tu=tl,ts.next.i!==tu.i&&ts.prev.i!==tu.i&&!function(h,w){var q=h;do{if(q.i!==h.i&&q.next.i!==h.i&&q.i!==w.i&&q.next.i!==w.i&&cv(q,q.next,h,w))return!0;q=q.next}while(q!==h);return!1}(ts,tu)&&(Pa(ts,tu)&&Pa(tu,ts)&&function(h,w){var q=h,tr=!1,tn=(h.x+w.x)/2,ti=(h.y+w.y)/2;do q.y>ti!=q.next.y>ti&&q.next.y!==q.y&&tn<(q.next.x-q.x)*(ti-q.y)/(q.next.y-q.y)+q.x&&(tr=!tr),q=q.next;while(q!==h);return tr}(ts,tu)&&(dr(ts.prev,ts,tu.prev)||dr(ts,tu.prev,tu))||Lu(ts,tu)&&dr(ts.prev,ts,ts.next)>0&&dr(tu.prev,tu,tu.next)>0))){var tc=hv(to,tl);to=Gi(to,to.next),tc=Gi(tc,tc.next),Ia(to,w,q,tr,tn,ti,0),Ia(tc,w,q,tr,tn,ti,0);return}tl=tl.next}to=to.next}while(to!==h)}(h,w,q,tr,tn,ti):Ia(Gi(h),w,q,tr,tn,ti,1);break}}}}(td,tm,q,tr,tn,tl,0),tm}function lv(h,w,q,tr,tn){var ti,to;if(tn===pc(h,w,q,tr)>0)for(ti=w;ti<q;ti+=tr)to=qf(ti,h[ti],h[ti+1],to);else for(ti=q-tr;ti>=w;ti-=tr)to=qf(ti,h[ti],h[ti+1],to);return to&&Lu(to,to.next)&&(Ra(to),to=to.next),to}function Gi(h,w){if(!h)return h;w||(w=h);var q,tr=h;do if(q=!1,!tr.steiner&&(Lu(tr,tr.next)||0===dr(tr.prev,tr,tr.next))){if(Ra(tr),(tr=w=tr.prev)===tr.next)break;q=!0}else tr=tr.next;while(q||tr!==w);return w}function U0(h,w){return h.x-w.x}function hc(h,w,q,tr,tn){return(h=((h=((h=((h=((h=(h-q)*tn|0)|h<<8)&16711935)|h<<4)&252645135)|h<<2)&858993459)|h<<1)&1431655765)|(w=((w=((w=((w=((w=(w-tr)*tn|0)|w<<8)&16711935)|w<<4)&252645135)|w<<2)&858993459)|w<<1)&1431655765)<<1}function so(h,w,q,tr,tn,ti,to,ts){return(tn-to)*(w-ts)>=(h-to)*(ti-ts)&&(h-to)*(tr-ts)>=(q-to)*(w-ts)&&(q-to)*(ti-ts)>=(tn-to)*(tr-ts)}function dr(h,w,q){return(w.y-h.y)*(q.x-w.x)-(w.x-h.x)*(q.y-w.y)}function Lu(h,w){return h.x===w.x&&h.y===w.y}function cv(h,w,q,tr){var tn=cs(dr(h,w,q)),ti=cs(dr(h,w,tr)),to=cs(dr(q,tr,h)),ts=cs(dr(q,tr,w));return!!(tn!==ti&&to!==ts||0===tn&&ls(h,q,w)||0===ti&&ls(h,tr,w)||0===to&&ls(q,h,tr)||0===ts&&ls(q,w,tr))}function ls(h,w,q){return w.x<=Math.max(h.x,q.x)&&w.x>=Math.min(h.x,q.x)&&w.y<=Math.max(h.y,q.y)&&w.y>=Math.min(h.y,q.y)}function cs(h){return h>0?1:h<0?-1:0}function Pa(h,w){return 0>dr(h.prev,h,h.next)?dr(h,w,h.next)>=0&&dr(h,h.prev,w)>=0:0>dr(h,w,h.prev)||0>dr(h,h.next,w)}function hv(h,w){var q=new fc(h.i,h.x,h.y),tr=new fc(w.i,w.x,w.y),tn=h.next,ti=w.prev;return h.next=w,w.prev=h,q.next=tn,tn.prev=q,tr.next=q,q.prev=tr,ti.next=tr,tr.prev=ti,tr}function qf(h,w,q,tr){var tn=new fc(h,w,q);return tr?(tn.next=tr.next,tn.prev=tr,tr.next.prev=tn,tr.next=tn):(tn.prev=tn,tn.next=tn),tn}function Ra(h){h.next.prev=h.prev,h.prev.next=h.next,h.prevZ&&(h.prevZ.nextZ=h.nextZ),h.nextZ&&(h.nextZ.prevZ=h.prevZ)}function fc(h,w,q){this.i=h,this.x=w,this.y=q,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function pc(h,w,q,tr){for(var tn=0,ti=w,to=q-tr;ti<q;ti+=tr)tn+=(h[to]-h[ti])*(h[ti+1]+h[to+1]),to=ti;return tn}ey.exports=Ou,ey.exports.default=Ou,Ou.deviation=function(h,w,q,tr){var tn=w&&w.length,ti=tn?w[0]*q:h.length,to=Math.abs(pc(h,0,ti,q));if(tn)for(var ts=0,tu=w.length;ts<tu;ts++){var tl=w[ts]*q,tc=ts<tu-1?w[ts+1]*q:h.length;to-=Math.abs(pc(h,tl,tc,q))}var tp=0;for(ts=0;ts<tr.length;ts+=3){var td=tr[ts]*q,tm=tr[ts+1]*q,ty=tr[ts+2]*q;tp+=Math.abs((h[td]-h[ty])*(h[tm+1]-h[td+1])-(h[td]-h[tm])*(h[ty+1]-h[td+1]))}return 0===to&&0===tp?0:Math.abs((tp-to)/to)},Ou.flatten=function(h){for(var w=h[0][0].length,q={vertices:[],holes:[],dimensions:w},tr=0,tn=0;tn<h.length;tn++){for(var ti=0;ti<h[tn].length;ti++)for(var to=0;to<w;to++)q.vertices.push(h[tn][ti][to]);tn>0&&(tr+=h[tn-1].length,q.holes.push(tr))}return q};var ev=ey.exports;let eb=wu(ev);var ex={},eT={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */eT.exports,eN=eT.exports,function(h){var w=eN&&!eN.nodeType&&eN,q=eT&&!eT.nodeType&&eT,tr="object"==typeof tH&&tH;(tr.global===tr||tr.window===tr||tr.self===tr)&&(h=tr);var tn,ti,to=/^xn--/,ts=/[^\x20-\x7E]/,tu=/[\x2E\u3002\uFF0E\uFF61]/g,tl={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},tc=Math.floor,tp=String.fromCharCode;function G(h){throw RangeError(tl[h])}function P(h,w){for(var q=h.length,tr=[];q--;)tr[q]=w(h[q]);return tr}function M(h,w){var q=h.split("@"),tr="";return q.length>1&&(tr=q[0]+"@",h=q[1]),tr+P((h=h.replace(tu,".")).split("."),w).join(".")}function W(h){for(var w,q,tr=[],tn=0,ti=h.length;tn<ti;)(w=h.charCodeAt(tn++))>=55296&&w<=56319&&tn<ti?(64512&(q=h.charCodeAt(tn++)))==56320?tr.push(((1023&w)<<10)+(1023&q)+65536):(tr.push(w),tn--):tr.push(w);return tr}function ft(h){return P(h,function(h){var w="";return h>65535&&(h-=65536,w+=tp(h>>>10&1023|55296),h=56320|1023&h),w+=tp(h)}).join("")}function Ot(h,w){return h+22+75*(h<26)-((0!=w)<<5)}function H(h,w,q){var tr=0;for(h=q?tc(h/700):h>>1,h+=tc(h/w);h>455;tr+=36)h=tc(h/35);return tc(tr+36*h/(h+38))}function $(h){var w,q,tr,tn,ti,to,ts,tu,tl,tp,td,tm=[],ty=h.length,tv=0,tb=128,tx=72;for((tr=h.lastIndexOf("-"))<0&&(tr=0),tn=0;tn<tr;++tn)h.charCodeAt(tn)>=128&&G("not-basic"),tm.push(h.charCodeAt(tn));for(ti=tr>0?tr+1:0;ti<ty;){for(to=tv,ts=1,tu=36;ti>=ty&&G("invalid-input"),((tl=(w=h.charCodeAt(ti++))-48<10?w-22:w-65<26?w-65:w-97<26?w-97:36)>=36||tl>tc((2147483647-tv)/ts))&&G("overflow"),tv+=tl*ts,!(tl<(tp=tu<=tx?1:tu>=tx+26?26:tu-tx));tu+=36)ts>tc(2147483647/(td=36-tp))&&G("overflow"),ts*=td;tx=H(tv-to,q=tm.length+1,0==to),tc(tv/q)>2147483647-tb&&G("overflow"),tb+=tc(tv/q),tv%=q,tm.splice(tv++,0,tb)}return ft(tm)}function lt(h){var w,q,tr,tn,ti,to,ts,tu,tl,td,tm,ty,tv,tb,tx,tT=[];for(ty=(h=W(h)).length,w=128,q=0,ti=72,to=0;to<ty;++to)(tm=h[to])<128&&tT.push(tp(tm));for(tr=tn=tT.length,tn&&tT.push("-");tr<ty;){for(ts=2147483647,to=0;to<ty;++to)(tm=h[to])>=w&&tm<ts&&(ts=tm);for(ts-w>tc((2147483647-q)/(tv=tr+1))&&G("overflow"),q+=(ts-w)*tv,w=ts,to=0;to<ty;++to)if((tm=h[to])<w&&++q>2147483647&&G("overflow"),tm==w){for(tu=q,tl=36;!(tu<(td=tl<=ti?1:tl>=ti+26?26:tl-ti));tl+=36)tx=tu-td,tb=36-td,tT.push(tp(Ot(td+tx%tb,0))),tu=tc(tx/tb);tT.push(tp(Ot(tu,0))),ti=H(q,tv,tr==tn),q=0,++tr}++q,++w}return tT.join("")}if(tn={version:"1.4.1",ucs2:{decode:W,encode:ft},decode:$,encode:lt,toASCII:function(h){return M(h,function(h){return ts.test(h)?"xn--"+lt(h):h})},toUnicode:function(h){return M(h,function(h){return to.test(h)?$(h.slice(4).toLowerCase()):h})}},w&&q){if(eT.exports==w)q.exports=tn;else for(ti in tn)tn.hasOwnProperty(ti)&&(w[ti]=tn[ti])}else h.punycode=tn}(tH);var eE,eO,eL,eS,eI,eP,eR,eN,eM,ek=eT.exports,eU="u">typeof Symbol&&Symbol,eC={foo:{}},eD=Object,eF=Object.prototype.toString,eB=Math.max,Jf=function(h,w){for(var q=[],tr=0;tr<h.length;tr+=1)q[tr]=h[tr];for(var tn=0;tn<w.length;tn+=1)q[tn+h.length]=w[tn];return q},ry=function(h,w){for(var q=[],tr=w||0,tn=0;tr<h.length;tr+=1,tn+=1)q[tn]=h[tr];return q},ny=function(h,w){for(var q="",tr=0;tr<h.length;tr+=1)q+=h[tr],tr+1<h.length&&(q+=w);return q},ej=Function.prototype.bind||function(h){var w=this;if("function"!=typeof w||"[object Function]"!==eF.apply(w))throw TypeError("Function.prototype.bind called on incompatible "+w);for(var q,tr=ry(arguments,1),tn=eB(0,w.length-tr.length),ti=[],to=0;to<tn;to++)ti[to]="$"+to;if(q=Function("binder","return function ("+ny(ti,",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof q){var tn=w.apply(this,Jf(tr,arguments));return Object(tn)===tn?tn:this}return w.apply(h,Jf(tr,arguments))}),w.prototype){var u=function(){};u.prototype=w.prototype,q.prototype=new u,u.prototype=null}return q},eG={}.hasOwnProperty,eV=Function.prototype.call,eX=eV.bind?eV.bind(eG):function(h,w){return eV.call(eG,h,w)},eH=SyntaxError,ez=Function,eK=TypeError,Ju=function(h){try{return ez('"use strict"; return ('+h+").constructor;")()}catch{}},eY=Object.getOwnPropertyDescriptor;if(eY)try{eY({},"")}catch{eY=null}var Qu=function(){throw new eK},eW=eY?function(){try{return arguments.callee,Qu}catch{try{return eY(arguments,"callee").get}catch{return Qu}}}():Qu,eq="function"==typeof eU&&"function"==typeof Symbol&&"symbol"==typeof eU("foo")&&"symbol"==typeof Symbol("bar")&&function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var h={},w=Symbol("test"),q=Object(w);if("string"==typeof w||"[object Symbol]"!==Object.prototype.toString.call(w)||"[object Symbol]"!==Object.prototype.toString.call(q))return!1;for(w in h[w]=42,h)return!1;if("function"==typeof Object.keys&&0!==Object.keys(h).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(h).length)return!1;var tr=Object.getOwnPropertySymbols(h);if(1!==tr.length||tr[0]!==w||!Object.prototype.propertyIsEnumerable.call(h,w))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var tn=Object.getOwnPropertyDescriptor(h,w);if(42!==tn.value||!0!==tn.enumerable)return!1}return!0}(),eZ={__proto__:eC}.foo===eC.foo&&!(({__proto__:null})instanceof eD),eJ=Object.getPrototypeOf||(eZ?function(h){return h.__proto__}:null),eQ={},e$=typeof Uint8Array>"u"||!eJ?eM:eJ(Uint8Array),e0={"%AggregateError%":typeof AggregateError>"u"?eM:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?eM:ArrayBuffer,"%ArrayIteratorPrototype%":eq&&eJ?eJ([][Symbol.iterator]()):eM,"%AsyncFromSyncIteratorPrototype%":eM,"%AsyncFunction%":eQ,"%AsyncGenerator%":eQ,"%AsyncGeneratorFunction%":eQ,"%AsyncIteratorPrototype%":eQ,"%Atomics%":typeof Atomics>"u"?eM:Atomics,"%BigInt%":typeof BigInt>"u"?eM:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?eM:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?eM:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?eM:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?eM:Float32Array,"%Float64Array%":typeof Float64Array>"u"?eM:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?eM:FinalizationRegistry,"%Function%":ez,"%GeneratorFunction%":eQ,"%Int8Array%":typeof Int8Array>"u"?eM:Int8Array,"%Int16Array%":typeof Int16Array>"u"?eM:Int16Array,"%Int32Array%":typeof Int32Array>"u"?eM:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":eq&&eJ?eJ(eJ([][Symbol.iterator]())):eM,"%JSON%":"object"==typeof JSON?JSON:eM,"%Map%":typeof Map>"u"?eM:Map,"%MapIteratorPrototype%":!(typeof Map>"u")&&eq&&eJ?eJ(new Map()[Symbol.iterator]()):eM,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?eM:Promise,"%Proxy%":typeof Proxy>"u"?eM:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?eM:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?eM:Set,"%SetIteratorPrototype%":!(typeof Set>"u")&&eq&&eJ?eJ(new Set()[Symbol.iterator]()):eM,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?eM:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":eq&&eJ?eJ(""[Symbol.iterator]()):eM,"%Symbol%":eq?Symbol:eM,"%SyntaxError%":eH,"%ThrowTypeError%":eW,"%TypedArray%":e$,"%TypeError%":eK,"%Uint8Array%":typeof Uint8Array>"u"?eM:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?eM:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?eM:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?eM:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?eM:WeakMap,"%WeakRef%":typeof WeakRef>"u"?eM:WeakRef,"%WeakSet%":typeof WeakSet>"u"?eM:WeakSet};if(eJ)try{null.error}catch(h){var e1=eJ(eJ(h));e0["%Error.prototype%"]=e1}var hy=function e(h){var w;if("%AsyncFunction%"===h)w=Ju("async function () {}");else if("%GeneratorFunction%"===h)w=Ju("function* () {}");else if("%AsyncGeneratorFunction%"===h)w=Ju("async function* () {}");else if("%AsyncGenerator%"===h){var q=e("%AsyncGeneratorFunction%");q&&(w=q.prototype)}else if("%AsyncIteratorPrototype%"===h){var tr=e("%AsyncGenerator%");tr&&eJ&&(w=eJ(tr.prototype))}return e0[h]=w,w},e2={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},e3=ej.call(Function.call,Array.prototype.concat),e4=ej.call(Function.apply,Array.prototype.splice),e5=ej.call(Function.call,String.prototype.replace),e6=ej.call(Function.call,String.prototype.slice),e8=ej.call(Function.call,RegExp.prototype.exec),e7=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,e9=/\\(\\)?/g,gy=function(h){var w=e6(h,0,1),q=e6(h,-1);if("%"===w&&"%"!==q)throw new eH("invalid intrinsic syntax, expected closing `%`");if("%"===q&&"%"!==w)throw new eH("invalid intrinsic syntax, expected opening `%`");var tr=[];return e5(h,e7,function(h,w,q,tn){tr[tr.length]=q?e5(tn,e9,"$1"):w||h}),tr},my=function(h,w){var q,tr=h;if(eX(e2,tr)&&(tr="%"+(q=e2[tr])[0]+"%"),eX(e0,tr)){var tn=e0[tr];if(tn===eQ&&(tn=hy(tr)),typeof tn>"u"&&!w)throw new eK("intrinsic "+h+" exists, but is not available. Please file an issue!");return{alias:q,name:tr,value:tn}}throw new eH("intrinsic "+h+" does not exist!")},Yh=function(h,w){if("string"!=typeof h||0===h.length)throw new eK("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof w)throw new eK('"allowMissing" argument must be a boolean');if(null===e8(/^%?[^%]*%?$/,h))throw new eH("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var q=gy(h),tr=q.length>0?q[0]:"",tn=my("%"+tr+"%",w),ti=tn.name,to=tn.value,ts=!1,tu=tn.alias;tu&&(tr=tu[0],e4(q,e3([0,1],tu)));for(var tl=1,tc=!0;tl<q.length;tl+=1){var tp=q[tl],td=e6(tp,0,1),tm=e6(tp,-1);if(('"'===td||"'"===td||"`"===td||'"'===tm||"'"===tm||"`"===tm)&&td!==tm)throw new eH("property names with quotes must have matching quotes");if("constructor"!==tp&&tc||(ts=!0),tr+="."+tp,eX(e0,ti="%"+tr+"%"))to=e0[ti];else if(null!=to){if(!(tp in to)){if(!w)throw new eK("base intrinsic for "+h+" exists, but the property is not available.");return}if(eY&&tl+1>=q.length){var ty=eY(to,tp);to=(tc=!!ty)&&"get"in ty&&!("originalValue"in ty.get)?ty.get:to[tp]}else tc=eX(to,tp),to=to[tp];tc&&!ts&&(e0[ti]=to)}}return to},re={exports:{}};!function(h){var w=Yh("%Function.prototype.apply%"),q=Yh("%Function.prototype.call%"),tr=Yh("%Reflect.apply%",!0)||ej.call(q,w),tn=Yh("%Object.getOwnPropertyDescriptor%",!0),ti=Yh("%Object.defineProperty%",!0),to=Yh("%Math.max%");if(ti)try{ti({},"a",{value:1})}catch{ti=null}h.exports=function(h){var w=tr(ej,q,arguments);return tn&&ti&&tn(w,"length").configurable&&ti(w,"length",{value:1+to(0,h.length-(arguments.length-1))}),w};var l=function(){return tr(ej,w,arguments)};ti?ti(h.exports,"apply",{value:l}):h.exports.apply=l}(re);var ri=re.exports,ro=ri(Yh("String.prototype.indexOf"));let rs=Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})),ru=function(h){if(h.__esModule)return h;var w=h.default;if("function"==typeof w){var t=function r(){return this instanceof r?Reflect.construct(w,arguments,this.constructor):w.apply(this,arguments)};t.prototype=w.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(h).forEach(function(w){var q=Object.getOwnPropertyDescriptor(h,w);Object.defineProperty(t,w,q.get?q:{enumerable:!0,get:function(){return h[w]}})}),t}(rs);var rl="function"==typeof Map&&Map.prototype,rc=Object.getOwnPropertyDescriptor&&rl?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,rp=rl&&rc&&"function"==typeof rc.get?rc.get:null,rf=rl&&Map.prototype.forEach,rd="function"==typeof Set&&Set.prototype,r_=Object.getOwnPropertyDescriptor&&rd?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,rg=rd&&r_&&"function"==typeof r_.get?r_.get:null,rv=rd&&Set.prototype.forEach,rb="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,rx="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,rT="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,rE=Boolean.prototype.valueOf,rA=Object.prototype.toString,rO=Function.prototype.toString,rw=String.prototype.match,rL=String.prototype.slice,rS=String.prototype.replace,rI=String.prototype.toUpperCase,rP=String.prototype.toLowerCase,rR=RegExp.prototype.test,rN=Array.prototype.concat,rM=Array.prototype.join,rk=Array.prototype.slice,rU=Math.floor,rC="function"==typeof BigInt?BigInt.prototype.valueOf:null,rD=Object.getOwnPropertySymbols,rF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,rB="function"==typeof Symbol&&"object"==typeof Symbol.iterator,rj="function"==typeof Symbol&&Symbol.toStringTag?Symbol.toStringTag:null,rG=Object.prototype.propertyIsEnumerable,rV=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(h){return h.__proto__}:null);function lp(h,w){if(h===1/0||h===-1/0||h!=h||h&&h>-1e3&&h<1e3||rR.call(/e/,w))return w;var q=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof h){var tr=h<0?-rU(-h):rU(h);if(tr!==h){var tn=String(tr),ti=rL.call(w,tn.length+1);return rS.call(tn,q,"$&_")+"."+rS.call(rS.call(ti,/([0-9]{3})/g,"$&_"),/_$/,"")}}return rS.call(w,q,"$&_")}var rX=ru.custom,rH=xv(rX)?rX:null;function yv(h,w,q){var tr="double"===(q.quoteStyle||w)?'"':"'";return tr+h+tr}function gc(h){return"[object Array]"===ii(h)&&(!rj||!("object"==typeof h&&rj in h))}function fp(h){return"[object RegExp]"===ii(h)&&(!rj||!("object"==typeof h&&rj in h))}function xv(h){if(rB)return h&&"object"==typeof h&&h instanceof Symbol;if("symbol"==typeof h)return!0;if(!h||"object"!=typeof h||!rF)return!1;try{return rF.call(h),!0}catch{}return!1}var rz=Object.prototype.hasOwnProperty||function(h){return h in this};function Hn(h,w){return rz.call(h,w)}function ii(h){return rA.call(h)}function bv(h,w){if(h.indexOf)return h.indexOf(w);for(var q=0,tr=h.length;q<tr;q++)if(h[q]===w)return q;return -1}function $y(h){var w=h.charCodeAt(0),q={8:"b",9:"t",10:"n",12:"f",13:"r"}[w];return q?"\\"+q:"\\x"+(w<16?"0":"")+rI.call(w.toString(16))}function ia(h){return"Object("+h+")"}function nl(h){return h+" { ? }"}function pp(h,w,q,tr){return h+" ("+w+") {"+(tr?mc(q,tr):rM.call(q,", "))+"}"}function mc(h,w){if(0===h.length)return"";var q=`
`+w.prev+w.base;return q+rM.call(h,","+q)+`
`+w.prev}function hs(h,w){var q=gc(h),tr=[];if(q){tr.length=h.length;for(var tn=0;tn<h.length;tn++)tr[tn]=Hn(h,tn)?w(h[tn],h):""}var ti,to="function"==typeof rD?rD(h):[];if(rB){ti={};for(var ts=0;ts<to.length;ts++)ti["$"+to[ts]]=to[ts]}for(var tu in h)Hn(h,tu)&&(q&&String(Number(tu))===tu&&tu<h.length||rB&&ti["$"+tu]instanceof Symbol||(rR.call(/[^\w$]/,tu)?tr.push(w(tu,h)+": "+w(h[tu],h)):tr.push(tu+": "+w(h[tu],h))));if("function"==typeof rD)for(var tl=0;tl<to.length;tl++)rG.call(h,to[tl])&&tr.push("["+w(to[tl])+"]: "+w(h[to[tl]],h));return tr}var Vo=function(h,w){var q=Yh(h,!!w);return"function"==typeof q&&ro(h,".prototype.")>-1?ri(q):q},Qy=function e(h,w,q,tr){var tn=w||{};if(Hn(tn,"quoteStyle")&&"single"!==tn.quoteStyle&&"double"!==tn.quoteStyle)throw TypeError('option "quoteStyle" must be "single" or "double"');if(Hn(tn,"maxStringLength")&&("number"==typeof tn.maxStringLength?tn.maxStringLength<0&&tn.maxStringLength!==1/0:null!==tn.maxStringLength))throw TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var ti=!Hn(tn,"customInspect")||tn.customInspect;if("boolean"!=typeof ti&&"symbol"!==ti)throw TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Hn(tn,"indent")&&null!==tn.indent&&"	"!==tn.indent&&!(parseInt(tn.indent,10)===tn.indent&&tn.indent>0))throw TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Hn(tn,"numericSeparator")&&"boolean"!=typeof tn.numericSeparator)throw TypeError('option "numericSeparator", if provided, must be `true` or `false`');var to=tn.numericSeparator;if(typeof h>"u")return"undefined";if(null===h)return"null";if("boolean"==typeof h)return h?"true":"false";if("string"==typeof h)return function Tv(h,w){if(h.length>w.maxStringLength){var q=h.length-w.maxStringLength;return Tv(rL.call(h,0,w.maxStringLength),w)+"... "+q+" more character"+(q>1?"s":"")}return yv(rS.call(rS.call(h,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,$y),"single",w)}(h,tn);if("number"==typeof h){if(0===h)return 1/0/h>0?"0":"-0";var ts=String(h);return to?lp(h,ts):ts}if("bigint"==typeof h){var tu=String(h)+"n";return to?lp(h,tu):tu}var tl=typeof tn.depth>"u"?5:tn.depth;if(typeof q>"u"&&(q=0),q>=tl&&tl>0&&"object"==typeof h)return gc(h)?"[Array]":"[Object]";var tc=function(h,w){var q;if("	"===h.indent)q="	";else{if("number"!=typeof h.indent||!(h.indent>0))return null;q=rM.call(Array(h.indent+1)," ")}return{base:q,prev:rM.call(Array(w+1),q)}}(tn,q);if(typeof tr>"u")tr=[];else if(bv(tr,h)>=0)return"[Circular]";function d(h,w,ti){if(w&&(tr=rk.call(tr)).push(w),ti){var to={depth:tn.depth};return Hn(tn,"quoteStyle")&&(to.quoteStyle=tn.quoteStyle),e(h,to,q+1,tr)}return e(h,tn,q+1,tr)}if("function"==typeof h&&!fp(h)){var tp=function(h){if(h.name)return h.name;var w=rw.call(rO.call(h),/^function\s*([\w$]+)/);return w?w[1]:null}(h),td=hs(h,d);return"[Function"+(tp?": "+tp:" (anonymous)")+"]"+(td.length>0?" { "+rM.call(td,", ")+" }":"")}if(xv(h)){var tm=rB?rS.call(String(h),/^(Symbol\(.*\))_[^)]*$/,"$1"):rF.call(h);return"object"!=typeof h||rB?tm:ia(tm)}if(h&&"object"==typeof h&&("u">typeof HTMLElement&&h instanceof HTMLElement||"string"==typeof h.nodeName&&"function"==typeof h.getAttribute)){for(var ty,tv="<"+rP.call(String(h.nodeName)),tb=h.attributes||[],tx=0;tx<tb.length;tx++)tv+=" "+tb[tx].name+"="+yv((ty=tb[tx].value,rS.call(String(ty),/"/g,"&quot;")),"double",tn);return tv+=">",h.childNodes&&h.childNodes.length&&(tv+="..."),tv+="</"+rP.call(String(h.nodeName))+">"}if(gc(h)){if(0===h.length)return"[]";var tT=hs(h,d);return tc&&!function(h){for(var w=0;w<h.length;w++)if(bv(h[w],`
`)>=0)return!1;return!0}(tT)?"["+mc(tT,tc)+"]":"[ "+rM.call(tT,", ")+" ]"}if("[object Error]"===ii(h)&&(!rj||!("object"==typeof h&&rj in h))){var tE=hs(h,d);return"cause"in Error.prototype||!("cause"in h)||rG.call(h,"cause")?0===tE.length?"["+String(h)+"]":"{ ["+String(h)+"] "+rM.call(tE,", ")+" }":"{ ["+String(h)+"] "+rM.call(rN.call("[cause]: "+d(h.cause),tE),", ")+" }"}if("object"==typeof h&&ti){if(rH&&"function"==typeof h[rH]&&ru)return ru(h,{depth:tl-q});if("symbol"!==ti&&"function"==typeof h.inspect)return h.inspect()}if(function(h){if(!rp||!h||"object"!=typeof h)return!1;try{rp.call(h);try{rg.call(h)}catch{return!0}return h instanceof Map}catch{}return!1}(h)){var tA=[];return rf&&rf.call(h,function(w,q){tA.push(d(q,h,!0)+" => "+d(w,h))}),pp("Map",rp.call(h),tA,tc)}if(function(h){if(!rg||!h||"object"!=typeof h)return!1;try{rg.call(h);try{rp.call(h)}catch{return!0}return h instanceof Set}catch{}return!1}(h)){var tO=[];return rv&&rv.call(h,function(w){tO.push(d(w,h))}),pp("Set",rg.call(h),tO,tc)}if(function(h){if(!rb||!h||"object"!=typeof h)return!1;try{rb.call(h,rb);try{rx.call(h,rx)}catch{return!0}return h instanceof WeakMap}catch{}return!1}(h))return nl("WeakMap");if(function(h){if(!rx||!h||"object"!=typeof h)return!1;try{rx.call(h,rx);try{rb.call(h,rb)}catch{return!0}return h instanceof WeakSet}catch{}return!1}(h))return nl("WeakSet");if(function(h){if(!rT||!h||"object"!=typeof h)return!1;try{return rT.call(h),!0}catch{}return!1}(h))return nl("WeakRef");if("[object Number]"===ii(h)&&(!rj||!("object"==typeof h&&rj in h)))return ia(d(Number(h)));if(function(h){if(!h||"object"!=typeof h||!rC)return!1;try{return rC.call(h),!0}catch{}return!1}(h))return ia(d(rC.call(h)));if("[object Boolean]"===ii(h)&&(!rj||!("object"==typeof h&&rj in h)))return ia(rE.call(h));if("[object String]"===ii(h)&&(!rj||!("object"==typeof h&&rj in h)))return ia(d(String(h)));if(!("[object Date]"===ii(h)&&(!rj||!("object"==typeof h&&rj in h)))&&!fp(h)){var tw=hs(h,d),tL=rV?rV(h)===Object.prototype:h instanceof Object||h.constructor===Object,tS=h instanceof Object?"":"null prototype",tI=!tL&&rj&&Object(h)===h&&rj in h?rL.call(ii(h),8,-1):tS?"Object":"",tP=(tL||"function"!=typeof h.constructor?"":h.constructor.name?h.constructor.name+" ":"")+(tI||tS?"["+rM.call(rN.call([],tI||[],tS||[]),": ")+"] ":"");return 0===tw.length?tP+"{}":tc?tP+"{"+mc(tw,tc)+"}":tP+"{ "+rM.call(tw,", ")+" }"}return String(h)},rK=Yh("%TypeError%"),rY=Yh("%WeakMap%",!0),rW=Yh("%Map%",!0),rq=Vo("WeakMap.prototype.get",!0),rZ=Vo("WeakMap.prototype.set",!0),rJ=Vo("WeakMap.prototype.has",!0),rQ=Vo("Map.prototype.get",!0),r$=Vo("Map.prototype.set",!0),r0=Vo("Map.prototype.has",!0),Jh=function(h,w){for(var q,tr=h;null!==(q=tr.next);tr=q)if(q.key===w)return tr.next=q.next,q.next=h.next,h.next=q,q},s1=function(h,w){var q=Jh(h,w);return q&&q.value},u1=function(h,w,q){var tr=Jh(h,w);tr?tr.value=q:h.next={key:w,next:h.next,value:q}},r1=String.prototype.replace,r2=/%20/g,r3={RFC1738:"RFC1738",RFC3986:"RFC3986"},r4={default:r3.RFC3986,formatters:{RFC1738:function(h){return r1.call(h,r2,"+")},RFC3986:function(h){return String(h)}},RFC1738:r3.RFC1738,RFC3986:r3.RFC3986},r5=Object.prototype.hasOwnProperty,r6=Array.isArray,r8=function(){for(var h=[],w=0;w<256;++w)h.push("%"+((w<16?"0":"")+w.toString(16)).toUpperCase());return h}(),d1=function(h){for(;h.length>1;){var w=h.pop(),q=w.obj[w.prop];if(r6(q)){for(var tr=[],tn=0;tn<q.length;++tn)"u">typeof q[tn]&&tr.push(q[tn]);w.obj[w.prop]=tr}}},Av=function(h,w){for(var q=w&&w.plainObjects?Object.create(null):{},tr=0;tr<h.length;++tr)"u">typeof h[tr]&&(q[tr]=h[tr]);return q},r7={arrayToObject:Av,assign:function(h,w){return Object.keys(w).reduce(function(h,q){return h[q]=w[q],h},h)},combine:function(h,w){return[].concat(h,w)},compact:function(h){for(var w=[{obj:{o:h},prop:"o"}],q=[],tr=0;tr<w.length;++tr)for(var tn=w[tr],ti=tn.obj[tn.prop],to=Object.keys(ti),ts=0;ts<to.length;++ts){var tu=to[ts],tl=ti[tu];"object"==typeof tl&&null!==tl&&-1===q.indexOf(tl)&&(w.push({obj:ti,prop:tu}),q.push(tl))}return d1(w),h},decode:function(h,w,q){var tr=h.replace(/\+/g," ");if("iso-8859-1"===q)return tr.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(tr)}catch{return tr}},encode:function(h,w,q,tr,tn){if(0===h.length)return h;var ti=h;if("symbol"==typeof h?ti=Symbol.prototype.toString.call(h):"string"!=typeof h&&(ti=String(h)),"iso-8859-1"===q)return escape(ti).replace(/%u[0-9a-f]{4}/gi,function(h){return"%26%23"+parseInt(h.slice(2),16)+"%3B"});for(var to="",ts=0;ts<ti.length;++ts){var tu=ti.charCodeAt(ts);if(45===tu||46===tu||95===tu||126===tu||tu>=48&&tu<=57||tu>=65&&tu<=90||tu>=97&&tu<=122||tn===r4.RFC1738&&(40===tu||41===tu)){to+=ti.charAt(ts);continue}if(tu<128){to+=r8[tu];continue}if(tu<2048){to+=r8[192|tu>>6]+r8[128|63&tu];continue}if(tu<55296||tu>=57344){to+=r8[224|tu>>12]+r8[128|tu>>6&63]+r8[128|63&tu];continue}ts+=1,to+=r8[240|(tu=65536+((1023&tu)<<10|1023&ti.charCodeAt(ts)))>>18]+r8[128|tu>>12&63]+r8[128|tu>>6&63]+r8[128|63&tu]}return to},isBuffer:function(h){return!!h&&"object"==typeof h&&!!(h.constructor&&h.constructor.isBuffer&&h.constructor.isBuffer(h))},isRegExp:function(h){return"[object RegExp]"===Object.prototype.toString.call(h)},maybeMap:function(h,w){if(r6(h)){for(var q=[],tr=0;tr<h.length;tr+=1)q.push(w(h[tr]));return q}return w(h)},merge:function e(h,w,q){if(!w)return h;if("object"!=typeof w){if(r6(h))h.push(w);else{if(!h||"object"!=typeof h)return[h,w];(q&&(q.plainObjects||q.allowPrototypes)||!r5.call(Object.prototype,w))&&(h[w]=!0)}return h}if(!h||"object"!=typeof h)return[h].concat(w);var tr=h;return r6(h)&&!r6(w)&&(tr=Av(h,q)),r6(h)&&r6(w)?(w.forEach(function(w,tr){if(r5.call(h,tr)){var tn=h[tr];tn&&"object"==typeof tn&&w&&"object"==typeof w?h[tr]=e(tn,w,q):h.push(w)}else h[tr]=w}),h):Object.keys(w).reduce(function(h,tr){var tn=w[tr];return r5.call(h,tr)?h[tr]=e(h[tr],tn,q):h[tr]=tn,h},tr)}},wv=function(){var h,w,q,tr={assert:function(h){if(!tr.has(h))throw new rK("Side channel does not contain "+Qy(h))},get:function(tr){if(rY&&tr&&("object"==typeof tr||"function"==typeof tr)){if(h)return rq(h,tr)}else if(rW){if(w)return rQ(w,tr)}else if(q)return s1(q,tr)},has:function(tr){if(rY&&tr&&("object"==typeof tr||"function"==typeof tr)){if(h)return rJ(h,tr)}else if(rW){if(w)return r0(w,tr)}else if(q)return!!Jh(q,tr);return!1},set:function(tr,tn){rY&&tr&&("object"==typeof tr||"function"==typeof tr)?(h||(h=new rY),rZ(h,tr,tn)):rW?(w||(w=new rW),r$(w,tr,tn)):(q||(q={key:{},next:null}),u1(q,tr,tn))}};return tr},r9=Object.prototype.hasOwnProperty,nr={brackets:function(h){return h+"[]"},comma:"comma",indices:function(h,w){return h+"["+w+"]"},repeat:function(h){return h}},ni=Array.isArray,no=Array.prototype.push,Ov=function(h,w){no.apply(h,ni(w)?w:[w])},ns=Date.prototype.toISOString,na=r4.default,nu={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:r7.encode,encodeValuesOnly:!1,format:na,formatter:r4.formatters[na],indices:!1,serializeDate:function(h){return ns.call(h)},skipNulls:!1,strictNullHandling:!1},nc={},S1=function e(h,w,q,tr,tn,ti,to,ts,tu,tl,tc,tp,td,tm,ty,tv){for(var tb,tx,tT=h,tE=tv,tA=0,tO=!1;void 0!==(tE=tE.get(nc))&&!tO;){var tw=tE.get(h);if(tA+=1,"u">typeof tw){if(tw===tA)throw RangeError("Cyclic object value");tO=!0}typeof tE.get(nc)>"u"&&(tA=0)}if("function"==typeof ts?tT=ts(w,tT):tT instanceof Date?tT=tc(tT):"comma"===q&&ni(tT)&&(tT=r7.maybeMap(tT,function(h){return h instanceof Date?tc(h):h})),null===tT){if(tn)return to&&!tm?to(w,nu.encoder,ty,"key",tp):w;tT=""}if("string"==typeof(tb=tT)||"number"==typeof tb||"boolean"==typeof tb||"symbol"==typeof tb||"bigint"==typeof tb||r7.isBuffer(tT))return to?[td(tm?w:to(w,nu.encoder,ty,"key",tp))+"="+td(to(tT,nu.encoder,ty,"value",tp))]:[td(w)+"="+td(String(tT))];var tL=[];if(typeof tT>"u")return tL;if("comma"===q&&ni(tT))tm&&to&&(tT=r7.maybeMap(tT,to)),tx=[{value:tT.length>0?tT.join(",")||null:void 0}];else if(ni(ts))tx=ts;else{var tS=Object.keys(tT);tx=tu?tS.sort(tu):tS}for(var tI=tr&&ni(tT)&&1===tT.length?w+"[]":w,tP=0;tP<tx.length;++tP){var tR=tx[tP],tN="object"==typeof tR&&"u">typeof tR.value?tR.value:tT[tR];if(!(ti&&null===tN)){var tM=ni(tT)?"function"==typeof q?q(tI,tR):tI:tI+(tl?"."+tR:"["+tR+"]");tv.set(h,tA);var tk=wv();tk.set(nc,tv),Ov(tL,e(tN,tM,q,tr,tn,ti,"comma"===q&&tm&&ni(tT)?null:to,ts,tu,tl,tc,tp,td,tm,ty,tk))}}return tL},I1=function(h){if(!h)return nu;if(null!==h.encoder&&"u">typeof h.encoder&&"function"!=typeof h.encoder)throw TypeError("Encoder has to be a function.");var w=h.charset||nu.charset;if("u">typeof h.charset&&"utf-8"!==h.charset&&"iso-8859-1"!==h.charset)throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var q=r4.default;if("u">typeof h.format){if(!r9.call(r4.formatters,h.format))throw TypeError("Unknown format option provided.");q=h.format}var tr=r4.formatters[q],tn=nu.filter;return("function"==typeof h.filter||ni(h.filter))&&(tn=h.filter),{addQueryPrefix:"boolean"==typeof h.addQueryPrefix?h.addQueryPrefix:nu.addQueryPrefix,allowDots:typeof h.allowDots>"u"?nu.allowDots:!!h.allowDots,charset:w,charsetSentinel:"boolean"==typeof h.charsetSentinel?h.charsetSentinel:nu.charsetSentinel,delimiter:typeof h.delimiter>"u"?nu.delimiter:h.delimiter,encode:"boolean"==typeof h.encode?h.encode:nu.encode,encoder:"function"==typeof h.encoder?h.encoder:nu.encoder,encodeValuesOnly:"boolean"==typeof h.encodeValuesOnly?h.encodeValuesOnly:nu.encodeValuesOnly,filter:tn,format:q,formatter:tr,serializeDate:"function"==typeof h.serializeDate?h.serializeDate:nu.serializeDate,skipNulls:"boolean"==typeof h.skipNulls?h.skipNulls:nu.skipNulls,sort:"function"==typeof h.sort?h.sort:null,strictNullHandling:"boolean"==typeof h.strictNullHandling?h.strictNullHandling:nu.strictNullHandling}},np=Object.prototype.hasOwnProperty,nd=Array.isArray,n_={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:r7.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},Lv=function(h,w){return h&&"string"==typeof h&&w.comma&&h.indexOf(",")>-1?h.split(","):h},U1=function(h,w){var q,tr={__proto__:null},tn=w.ignoreQueryPrefix?h.replace(/^\?/,""):h,ti=w.parameterLimit===1/0?void 0:w.parameterLimit,to=tn.split(w.delimiter,ti),ts=-1,tu=w.charset;if(w.charsetSentinel)for(q=0;q<to.length;++q)0===to[q].indexOf("utf8=")&&("utf8=%E2%9C%93"===to[q]?tu="utf-8":"utf8=%26%2310003%3B"===to[q]&&(tu="iso-8859-1"),ts=q,q=to.length);for(q=0;q<to.length;++q)if(q!==ts){var tl,tc,tp=to[q],td=tp.indexOf("]="),tm=-1===td?tp.indexOf("="):td+1;-1===tm?(tl=w.decoder(tp,n_.decoder,tu,"key"),tc=w.strictNullHandling?null:""):(tl=w.decoder(tp.slice(0,tm),n_.decoder,tu,"key"),tc=r7.maybeMap(Lv(tp.slice(tm+1),w),function(h){return w.decoder(h,n_.decoder,tu,"value")})),tc&&w.interpretNumericEntities&&"iso-8859-1"===tu&&(tc=tc.replace(/&#(\d+);/g,function(h,w){return String.fromCharCode(parseInt(w,10))})),tp.indexOf("[]=")>-1&&(tc=nd(tc)?[tc]:tc),np.call(tr,tl)?tr[tl]=r7.combine(tr[tl],tc):tr[tl]=tc}return tr},M1=function(h,w,q,tr){for(var tn=tr?w:Lv(w,q),ti=h.length-1;ti>=0;--ti){var to,ts=h[ti];if("[]"===ts&&q.parseArrays)to=[].concat(tn);else{to=q.plainObjects?Object.create(null):{};var tu="["===ts.charAt(0)&&"]"===ts.charAt(ts.length-1)?ts.slice(1,-1):ts,tl=parseInt(tu,10);q.parseArrays||""!==tu?!isNaN(tl)&&ts!==tu&&String(tl)===tu&&tl>=0&&q.parseArrays&&tl<=q.arrayLimit?(to=[])[tl]=tn:"__proto__"!==tu&&(to[tu]=tn):to={0:tn}}tn=to}return tn},D1=function(h,w,q,tr){if(h){var tn=q.allowDots?h.replace(/\.([^.[]+)/g,"[$1]"):h,ti=/(\[[^[\]]*])/g,to=q.depth>0&&/(\[[^[\]]*])/.exec(tn),ts=to?tn.slice(0,to.index):tn,tu=[];if(ts){if(!q.plainObjects&&np.call(Object.prototype,ts)&&!q.allowPrototypes)return;tu.push(ts)}for(var tl=0;q.depth>0&&null!==(to=ti.exec(tn))&&tl<q.depth;){if(tl+=1,!q.plainObjects&&np.call(Object.prototype,to[1].slice(1,-1))&&!q.allowPrototypes)return;tu.push(to[1])}return to&&tu.push("["+tn.slice(to.index)+"]"),M1(tu,w,q,tr)}},F1=function(h){if(!h)return n_;if(null!==h.decoder&&void 0!==h.decoder&&"function"!=typeof h.decoder)throw TypeError("Decoder has to be a function.");if("u">typeof h.charset&&"utf-8"!==h.charset&&"iso-8859-1"!==h.charset)throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var w=typeof h.charset>"u"?n_.charset:h.charset;return{allowDots:typeof h.allowDots>"u"?n_.allowDots:!!h.allowDots,allowPrototypes:"boolean"==typeof h.allowPrototypes?h.allowPrototypes:n_.allowPrototypes,allowSparse:"boolean"==typeof h.allowSparse?h.allowSparse:n_.allowSparse,arrayLimit:"number"==typeof h.arrayLimit?h.arrayLimit:n_.arrayLimit,charset:w,charsetSentinel:"boolean"==typeof h.charsetSentinel?h.charsetSentinel:n_.charsetSentinel,comma:"boolean"==typeof h.comma?h.comma:n_.comma,decoder:"function"==typeof h.decoder?h.decoder:n_.decoder,delimiter:"string"==typeof h.delimiter||r7.isRegExp(h.delimiter)?h.delimiter:n_.delimiter,depth:"number"==typeof h.depth||!1===h.depth?+h.depth:n_.depth,ignoreQueryPrefix:!0===h.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof h.interpretNumericEntities?h.interpretNumericEntities:n_.interpretNumericEntities,parameterLimit:"number"==typeof h.parameterLimit?h.parameterLimit:n_.parameterLimit,parseArrays:!1!==h.parseArrays,plainObjects:"boolean"==typeof h.plainObjects?h.plainObjects:n_.plainObjects,strictNullHandling:"boolean"==typeof h.strictNullHandling?h.strictNullHandling:n_.strictNullHandling}};function rn(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var ng=/^([a-z0-9.+-]+:)/i,nm=/:[0-9]*$/,nv=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,nb=["'"].concat(["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"])),nx=["%","/","?",";","#"].concat(nb),nT=["/","?","#"],nE=/^[+a-z0-9A-Z_-]{0,63}$/,nA=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,nO={javascript:!0,"javascript:":!0},nw={javascript:!0,"javascript:":!0},nL={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},nS={formats:r4,parse:function(h,w){var q=F1(w);if(""===h||null===h||typeof h>"u")return q.plainObjects?Object.create(null):{};for(var tr="string"==typeof h?U1(h,q):h,tn=q.plainObjects?Object.create(null):{},ti=Object.keys(tr),to=0;to<ti.length;++to){var ts=ti[to],tu=D1(ts,tr[ts],q,"string"==typeof h);tn=r7.merge(tn,tu,q)}return!0===q.allowSparse?tn:r7.compact(tn)},stringify:function(h,w){var q,tr,tn=h,ti=I1(w);"function"==typeof ti.filter?tn=(0,ti.filter)("",tn):ni(ti.filter)&&(tr=ti.filter);var to=[];if("object"!=typeof tn||null===tn)return"";q=w&&w.arrayFormat in nr?w.arrayFormat:w&&"indices"in w?w.indices?"indices":"repeat":"indices";var ts=nr[q];if(w&&"commaRoundTrip"in w&&"boolean"!=typeof w.commaRoundTrip)throw TypeError("`commaRoundTrip` must be a boolean, or absent");var tu="comma"===ts&&w&&w.commaRoundTrip;tr||(tr=Object.keys(tn)),ti.sort&&tr.sort(ti.sort);for(var tl=wv(),tc=0;tc<tr.length;++tc){var tp=tr[tc];ti.skipNulls&&null===tn[tp]||Ov(to,S1(tn[tp],tp,ts,tu,ti.strictNullHandling,ti.skipNulls,ti.encode?ti.encoder:null,ti.filter,ti.sort,ti.allowDots,ti.serializeDate,ti.format,ti.formatter,ti.encodeValuesOnly,ti.charset,tl))}var td=to.join(ti.delimiter),tm=!0===ti.addQueryPrefix?"?":"";return ti.charsetSentinel&&("iso-8859-1"===ti.charset?tm+="utf8=%26%2310003%3B&":tm+="utf8=%E2%9C%93&"),td.length>0?tm+td:""}};function Ja(h,w,q){if(h&&"object"==typeof h&&h instanceof rn)return h;var tr=new rn;return tr.parse(h,w,q),tr}rn.prototype.parse=function(h,w,q){if("string"!=typeof h)throw TypeError("Parameter 'url' must be a string, not "+typeof h);var tr=h.indexOf("?"),tn=-1!==tr&&tr<h.indexOf("#")?"?":"#",ti=h.split(tn);ti[0]=ti[0].replace(/\\/g,"/");var to=h=ti.join(tn);if(to=to.trim(),!q&&1===h.split("#").length){var ts=nv.exec(to);if(ts)return this.path=to,this.href=to,this.pathname=ts[1],ts[2]?(this.search=ts[2],w?this.query=nS.parse(this.search.substr(1)):this.query=this.search.substr(1)):w&&(this.search="",this.query={}),this}var tu=ng.exec(to);if(tu){var tl=(tu=tu[0]).toLowerCase();this.protocol=tl,to=to.substr(tu.length)}if(q||tu||to.match(/^\/\/[^@/]+@[^@/]+/)){var tc="//"===to.substr(0,2);tc&&!(tu&&nw[tu])&&(to=to.substr(2),this.slashes=!0)}if(!nw[tu]&&(tc||tu&&!nL[tu])){for(var tp,td,tm=-1,ty=0;ty<nT.length;ty++){var tv=to.indexOf(nT[ty]);-1!==tv&&(-1===tm||tv<tm)&&(tm=tv)}-1!==(td=-1===tm?to.lastIndexOf("@"):to.lastIndexOf("@",tm))&&(tp=to.slice(0,td),to=to.slice(td+1),this.auth=decodeURIComponent(tp)),tm=-1;for(var ty=0;ty<nx.length;ty++){var tv=to.indexOf(nx[ty]);-1!==tv&&(-1===tm||tv<tm)&&(tm=tv)}-1===tm&&(tm=to.length),this.host=to.slice(0,tm),to=to.slice(tm),this.parseHost(),this.hostname=this.hostname||"";var tb="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!tb)for(var tx=this.hostname.split(/\./),ty=0,tT=tx.length;ty<tT;ty++){var tE=tx[ty];if(tE&&!tE.match(nE)){for(var tA="",tO=0,tw=tE.length;tO<tw;tO++)tE.charCodeAt(tO)>127?tA+="x":tA+=tE[tO];if(!tA.match(nE)){var tL=tx.slice(0,ty),tS=tx.slice(ty+1),tI=tE.match(nA);tI&&(tL.push(tI[1]),tS.unshift(tI[2])),tS.length&&(to="/"+tS.join(".")+to),this.hostname=tL.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),tb||(this.hostname=ek.toASCII(this.hostname));var tP=this.port?":"+this.port:"",tR=this.hostname||"";this.host=tR+tP,this.href+=this.host,tb&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==to[0]&&(to="/"+to))}if(!nO[tl])for(var ty=0,tT=nb.length;ty<tT;ty++){var tN=nb[ty];if(-1!==to.indexOf(tN)){var tM=encodeURIComponent(tN);tM===tN&&(tM=escape(tN)),to=to.split(tN).join(tM)}}var tk=to.indexOf("#");-1!==tk&&(this.hash=to.substr(tk),to=to.slice(0,tk));var tU=to.indexOf("?");if(-1!==tU?(this.search=to.substr(tU),this.query=to.substr(tU+1),w&&(this.query=nS.parse(this.query)),to=to.slice(0,tU)):w&&(this.search="",this.query={}),to&&(this.pathname=to),nL[tl]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var tP=this.pathname||"",tC=this.search||"";this.path=tP+tC}return this.href=this.format(),this},rn.prototype.format=function(){var h=this.auth||"";h&&(h=(h=encodeURIComponent(h)).replace(/%3A/i,":")+"@");var w=this.protocol||"",q=this.pathname||"",tr=this.hash||"",tn=!1,ti="";this.host?tn=h+this.host:this.hostname&&(tn=h+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(tn+=":"+this.port)),this.query&&"object"==typeof this.query&&Object.keys(this.query).length&&(ti=nS.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var to=this.search||ti&&"?"+ti||"";return w&&":"!==w.substr(-1)&&(w+=":"),this.slashes||(!w||nL[w])&&!1!==tn?(tn="//"+(tn||""),q&&"/"!==q.charAt(0)&&(q="/"+q)):tn||(tn=""),tr&&"#"!==tr.charAt(0)&&(tr="#"+tr),to&&"?"!==to.charAt(0)&&(to="?"+to),w+tn+(q=q.replace(/[?#]/g,function(h){return encodeURIComponent(h)}))+(to=to.replace("#","%23"))+tr},rn.prototype.resolve=function(h){return this.resolveObject(Ja(h,!1,!0)).format()},rn.prototype.resolveObject=function(h){if("string"==typeof h){var w=new rn;w.parse(h,!1,!0),h=w}for(var q=new rn,tr=Object.keys(this),tn=0;tn<tr.length;tn++){var ti=tr[tn];q[ti]=this[ti]}if(q.hash=h.hash,""===h.href)return q.href=q.format(),q;if(h.slashes&&!h.protocol){for(var to=Object.keys(h),ts=0;ts<to.length;ts++){var tu=to[ts];"protocol"!==tu&&(q[tu]=h[tu])}return nL[q.protocol]&&q.hostname&&!q.pathname&&(q.pathname="/",q.path=q.pathname),q.href=q.format(),q}if(h.protocol&&h.protocol!==q.protocol){if(!nL[h.protocol]){for(var tl=Object.keys(h),tc=0;tc<tl.length;tc++){var tp=tl[tc];q[tp]=h[tp]}return q.href=q.format(),q}if(q.protocol=h.protocol,h.host||nw[h.protocol])q.pathname=h.pathname;else{for(var td=(h.pathname||"").split("/");td.length&&!(h.host=td.shift()););h.host||(h.host=""),h.hostname||(h.hostname=""),""!==td[0]&&td.unshift(""),td.length<2&&td.unshift(""),q.pathname=td.join("/")}if(q.search=h.search,q.query=h.query,q.host=h.host||"",q.auth=h.auth,q.hostname=h.hostname||h.host,q.port=h.port,q.pathname||q.search){var tm=q.pathname||"",ty=q.search||"";q.path=tm+ty}return q.slashes=q.slashes||h.slashes,q.href=q.format(),q}var tv=q.pathname&&"/"===q.pathname.charAt(0),tb=h.host||h.pathname&&"/"===h.pathname.charAt(0),tx=tb||tv||q.host&&h.pathname,tT=tx,tE=q.pathname&&q.pathname.split("/")||[],td=h.pathname&&h.pathname.split("/")||[],tA=q.protocol&&!nL[q.protocol];if(tA&&(q.hostname="",q.port=null,q.host&&(""===tE[0]?tE[0]=q.host:tE.unshift(q.host)),q.host="",h.protocol&&(h.hostname=null,h.port=null,h.host&&(""===td[0]?td[0]=h.host:td.unshift(h.host)),h.host=null),tx=tx&&(""===td[0]||""===tE[0])),tb)q.host=h.host||""===h.host?h.host:q.host,q.hostname=h.hostname||""===h.hostname?h.hostname:q.hostname,q.search=h.search,q.query=h.query,tE=td;else if(td.length)tE||(tE=[]),tE.pop(),tE=tE.concat(td),q.search=h.search,q.query=h.query;else if(null!=h.search){if(tA){q.host=tE.shift(),q.hostname=q.host;var tO=!!(q.host&&q.host.indexOf("@")>0)&&q.host.split("@");tO&&(q.auth=tO.shift(),q.hostname=tO.shift(),q.host=q.hostname)}return q.search=h.search,q.query=h.query,(null!==q.pathname||null!==q.search)&&(q.path=(q.pathname?q.pathname:"")+(q.search?q.search:"")),q.href=q.format(),q}if(!tE.length)return q.pathname=null,q.search?q.path="/"+q.search:q.path=null,q.href=q.format(),q;for(var tw=tE.slice(-1)[0],tL=(q.host||h.host||tE.length>1)&&("."===tw||".."===tw)||""===tw,tS=0,tI=tE.length;tI>=0;tI--)"."===(tw=tE[tI])?tE.splice(tI,1):".."===tw?(tE.splice(tI,1),tS++):tS&&(tE.splice(tI,1),tS--);if(!tx&&!tT)for(;tS--;tS)tE.unshift("..");tx&&""!==tE[0]&&(!tE[0]||"/"!==tE[0].charAt(0))&&tE.unshift(""),tL&&"/"!==tE.join("/").substr(-1)&&tE.push("");var tP=""===tE[0]||tE[0]&&"/"===tE[0].charAt(0);if(tA){q.hostname=tP?"":tE.length?tE.shift():"",q.host=q.hostname;var tO=!!(q.host&&q.host.indexOf("@")>0)&&q.host.split("@");tO&&(q.auth=tO.shift(),q.hostname=tO.shift(),q.host=q.hostname)}return(tx=tx||q.host&&tE.length)&&!tP&&tE.unshift(""),tE.length>0?q.pathname=tE.join("/"):(q.pathname=null,q.path=null),(null!==q.pathname||null!==q.search)&&(q.path=(q.pathname?q.pathname:"")+(q.search?q.search:"")),q.auth=h.auth||q.auth,q.slashes=q.slashes||h.slashes,q.href=q.format(),q},rn.prototype.parseHost=function(){var h=this.host,w=nm.exec(h);w&&(":"!==(w=w[0])&&(this.port=w.substr(1)),h=h.substr(0,h.length-w.length)),h&&(this.hostname=h)};var nI=ex.parse=Ja;ex.resolve=function(h,w){return Ja(h,!1,!0).resolve(w)},ex.resolveObject=function(h,w){return h?Ja(h,!1,!0).resolveObject(w):w},ex.format=function(h){return"string"==typeof h&&(h=Ja(h)),h instanceof rn?h.format():rn.prototype.format.call(h)},ex.Url=rn,(nV=n5||(n5={}))[nV.WEBGL_LEGACY=0]="WEBGL_LEGACY",nV[nV.WEBGL=1]="WEBGL",nV[nV.WEBGL2=2]="WEBGL2",(nX=n6||(n6={}))[nX.UNKNOWN=0]="UNKNOWN",nX[nX.WEBGL=1]="WEBGL",nX[nX.CANVAS=2]="CANVAS",(nH=n8||(n8={}))[nH.COLOR=16384]="COLOR",nH[nH.DEPTH=256]="DEPTH",nH[nH.STENCIL=1024]="STENCIL",(nz=n7||(n7={}))[nz.NORMAL=0]="NORMAL",nz[nz.ADD=1]="ADD",nz[nz.MULTIPLY=2]="MULTIPLY",nz[nz.SCREEN=3]="SCREEN",nz[nz.OVERLAY=4]="OVERLAY",nz[nz.DARKEN=5]="DARKEN",nz[nz.LIGHTEN=6]="LIGHTEN",nz[nz.COLOR_DODGE=7]="COLOR_DODGE",nz[nz.COLOR_BURN=8]="COLOR_BURN",nz[nz.HARD_LIGHT=9]="HARD_LIGHT",nz[nz.SOFT_LIGHT=10]="SOFT_LIGHT",nz[nz.DIFFERENCE=11]="DIFFERENCE",nz[nz.EXCLUSION=12]="EXCLUSION",nz[nz.HUE=13]="HUE",nz[nz.SATURATION=14]="SATURATION",nz[nz.COLOR=15]="COLOR",nz[nz.LUMINOSITY=16]="LUMINOSITY",nz[nz.NORMAL_NPM=17]="NORMAL_NPM",nz[nz.ADD_NPM=18]="ADD_NPM",nz[nz.SCREEN_NPM=19]="SCREEN_NPM",nz[nz.NONE=20]="NONE",nz[nz.SRC_OVER=0]="SRC_OVER",nz[nz.SRC_IN=21]="SRC_IN",nz[nz.SRC_OUT=22]="SRC_OUT",nz[nz.SRC_ATOP=23]="SRC_ATOP",nz[nz.DST_OVER=24]="DST_OVER",nz[nz.DST_IN=25]="DST_IN",nz[nz.DST_OUT=26]="DST_OUT",nz[nz.DST_ATOP=27]="DST_ATOP",nz[nz.ERASE=26]="ERASE",nz[nz.SUBTRACT=28]="SUBTRACT",nz[nz.XOR=29]="XOR",(nK=n9||(n9={}))[nK.POINTS=0]="POINTS",nK[nK.LINES=1]="LINES",nK[nK.LINE_LOOP=2]="LINE_LOOP",nK[nK.LINE_STRIP=3]="LINE_STRIP",nK[nK.TRIANGLES=4]="TRIANGLES",nK[nK.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",nK[nK.TRIANGLE_FAN=6]="TRIANGLE_FAN",(nY=io||(io={}))[nY.RGBA=6408]="RGBA",nY[nY.RGB=6407]="RGB",nY[nY.ALPHA=6406]="ALPHA",nY[nY.LUMINANCE=6409]="LUMINANCE",nY[nY.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",nY[nY.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",nY[nY.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(nW=is||(is={}))[nW.TEXTURE_2D=3553]="TEXTURE_2D",nW[nW.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",nW[nW.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",nW[nW.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",nW[nW.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",nW[nW.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",nW[nW.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",nW[nW.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",nW[nW.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(nq=iu||(iu={}))[nq.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",nq[nq.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",nq[nq.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",nq[nq.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",nq[nq.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",nq[nq.FLOAT=5126]="FLOAT",nq[nq.HALF_FLOAT=36193]="HALF_FLOAT",(nZ=il||(il={}))[nZ.NEAREST=0]="NEAREST",nZ[nZ.LINEAR=1]="LINEAR",(nJ=ic||(ic={}))[nJ.CLAMP=33071]="CLAMP",nJ[nJ.REPEAT=10497]="REPEAT",nJ[nJ.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(nQ=ip||(ip={}))[nQ.OFF=0]="OFF",nQ[nQ.POW2=1]="POW2",nQ[nQ.ON=2]="ON",(n$=id||(id={}))[n$.NPM=0]="NPM",n$[n$.UNPACK=1]="UNPACK",n$[n$.PMA=2]="PMA",n$[n$.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",n$[n$.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",n$[n$.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(n0=i_||(i_={}))[n0.NO=0]="NO",n0[n0.YES=1]="YES",n0[n0.AUTO=2]="AUTO",n0[n0.BLEND=0]="BLEND",n0[n0.CLEAR=1]="CLEAR",n0[n0.BLIT=2]="BLIT",(n1=ig||(ig={}))[n1.AUTO=0]="AUTO",n1[n1.MANUAL=1]="MANUAL",(n2=im||(im={})).LOW="lowp",n2.MEDIUM="mediump",n2.HIGH="highp",(n3=iy||(iy={}))[n3.NONE=0]="NONE",n3[n3.SCISSOR=1]="SCISSOR",n3[n3.STENCIL=2]="STENCIL",n3[n3.SPRITE=3]="SPRITE",(n4=iv||(iv={}))[n4.NONE=0]="NONE",n4[n4.LOW=2]="LOW",n4[n4.MEDIUM=4]="MEDIUM",n4[n4.HIGH=8]="HIGH",/*!
 * @pixi/utils - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */ed.RETINA_PREFIX=/@([0-9\.]+)x/,ed.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0;var nP=!1,nR="5.3.3";function Sv(h){var w;if(!nP){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var q=[`
 %c %c %c PixiJS `+nR+" - ✰ "+h+` ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(w=window.console).log.apply(w,q)}else window.console&&window.console.log("PixiJS "+nR+" - "+h+" - http://www.pixijs.com/");nP=!0}}function Iv(){return typeof ib>"u"&&(ib=function(){var h={stencil:!0,failIfMajorPerformanceCaveat:ed.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!window.WebGLRenderingContext)return!1;var w=document.createElement("canvas"),q=w.getContext("webgl",h)||w.getContext("experimental-webgl",h),tr=!!(q&&q.getContextAttributes().stencil);if(q){var tn=q.getExtension("WEBGL_lose_context");tn&&tn.loseContext()}return q=null,tr}catch{return!1}}()),ib}function Vi(h,w){return void 0===w&&(w=[]),w[0]=(h>>16&255)/255,w[1]=(h>>8&255)/255,w[2]=(255&h)/255,w}function tf(h){var w=h.toString(16);return"#"+(w="000000".substr(0,6-w.length)+w)}function ef(h){return"string"==typeof h&&"#"===h[0]&&(h=h.substr(1)),parseInt(h,16)}var nN=function(){for(var h=[],w=[],q=0;q<32;q++)h[q]=q,w[q]=q;h[n7.NORMAL_NPM]=n7.NORMAL,h[n7.ADD_NPM]=n7.ADD,h[n7.SCREEN_NPM]=n7.SCREEN,w[n7.NORMAL]=n7.NORMAL_NPM,w[n7.ADD]=n7.ADD_NPM,w[n7.SCREEN]=n7.SCREEN_NPM;var tr=[];return tr.push(w),tr.push(h),tr}();function nf(h,w){return nN[w?1:0][h]}function Pv(h,w,q,tr){return q=q||new Float32Array(4),tr||void 0===tr?(q[0]=h[0]*w,q[1]=h[1]*w,q[2]=h[2]*w):(q[0]=h[0],q[1]=h[1],q[2]=h[2]),q[3]=w,q}function Su(h,w){if(1===w)return(255*w<<24)+h;if(0===w)return 0;var q=h>>16&255,tr=h>>8&255,tn=255&h;return q=q*w+.5|0,tr=tr*w+.5|0,tn=tn*w+.5|0,(255*w<<24)+(q<<16)+(tr<<8)+tn}function of(h,w,q,tr){return(q=q||new Float32Array(4))[0]=(h>>16&255)/255,q[1]=(h>>8&255)/255,q[2]=(255&h)/255,(tr||void 0===tr)&&(q[0]*=w,q[1]*=w,q[2]*=w),q[3]=w,q}function Rv(h,w){void 0===w&&(w=null);var q=6*h;if((w=w||new Uint16Array(q)).length!==q)throw Error("Out buffer length is incorrect, got "+w.length+" and expected "+q);for(var tr=0,tn=0;tr<q;tr+=6,tn+=4)w[tr+0]=tn+0,w[tr+1]=tn+1,w[tr+2]=tn+2,w[tr+3]=tn+0,w[tr+4]=tn+2,w[tr+5]=tn+3;return w}function Nv(h){if(4===h.BYTES_PER_ELEMENT)return h instanceof Float32Array?"Float32Array":h instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===h.BYTES_PER_ELEMENT){if(h instanceof Uint16Array)return"Uint16Array"}else if(1===h.BYTES_PER_ELEMENT&&h instanceof Uint8Array)return"Uint8Array";return null}var nM={Float32Array,Uint32Array,Int32Array,Uint8Array};function ka(h){return h+=0===h?1:0,--h,h|=h>>>1,h|=h>>>2,h|=h>>>4,h|=h>>>8,(h|=h>>>16)+1}function Ec(h){return!(h&h-1)&&!!h}function wc(h){var w=(h>65535?1:0)<<4,q=((h>>>=w)>255?1:0)<<3;return h>>>=q,w|=q,q=(h>15?1:0)<<2,h>>>=q,w|=q,q=(h>3?1:0)<<1,h>>>=q,(w|=q)|h>>1}function Ui(h,w,q){var tr,tn=h.length;if(!(w>=tn||0===q)){q=w+q>tn?tn-w:q;var ti=tn-q;for(tr=w;tr<ti;++tr)h[tr]=h[tr+q];h.length=ti}}function Ri(h){return 0===h?0:h<0?-1:1}var nk=0;function Xi(){return++nk}var nU={};function we(h,w,q){if(void 0===q&&(q=3),!nU[w]){var tr=Error().stack;typeof tr>"u"?console.warn("PixiJS Deprecation Warning: ",w+`
Deprecated since v`+h):(tr=tr.split(`
`).splice(q).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",w+`
Deprecated since v`+h),console.warn(tr),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",w+`
Deprecated since v`+h),console.warn(tr))),nU[w]=!0}}var nC={},nD=Object.create(null),nF=Object.create(null),nB=function(){function e(h,w,q){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=q||ed.RESOLUTION,this.resize(h,w)}return e.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},e.prototype.resize=function(h,w){this.canvas.width=h*this.resolution,this.canvas.height=w*this.resolution},e.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.canvas.width},set:function(h){this.canvas.width=h},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.canvas.height},set:function(h){this.canvas.height=h},enumerable:!1,configurable:!0}),e}();function kv(h){var w,q,tr,tn=h.width,ti=h.height,to=h.getContext("2d"),ts=to.getImageData(0,0,tn,ti).data,tu=ts.length,tl={top:null,left:null,right:null,bottom:null},tc=null;for(w=0;w<tu;w+=4)0!==ts[w+3]&&(q=w/4%tn,tr=~~(w/4/tn),null===tl.top&&(tl.top=tr),(null===tl.left||q<tl.left)&&(tl.left=q),(null===tl.right||tl.right<q)&&(tl.right=q+1),(null===tl.bottom||tl.bottom<tr)&&(tl.bottom=tr));return null!==tl.top&&(tn=tl.right-tl.left,ti=tl.bottom-tl.top+1,tc=to.getImageData(tl.left,tl.top,tn,ti)),{height:ti,width:tn,data:tc}}var nj=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function Uv(h,w){if(void 0===w&&(w=window.location),0===h.indexOf("data:"))return"";w=w||window.location,ix||(ix=document.createElement("a")),ix.href=h;var q=nI(ix.href),tr=!q.port&&""===w.port||q.port===w.port;return q.hostname===w.hostname&&tr&&q.protocol===w.protocol?"":"anonymous"}function Ca(h,w){var q=ed.RETINA_PREFIX.exec(h);return q?parseFloat(q[1]):void 0!==w?w:1}let nG=Object.freeze(Object.defineProperty({__proto__:null,BaseTextureCache:nF,CanvasRenderTarget:nB,DATA_URI:nj,EventEmitter:em,ProgramCache:nC,TextureCache:nD,clearTextureCache:function(){var h;for(h in nD)delete nD[h];for(h in nF)delete nF[h]},correctBlendMode:nf,createIndicesForQuads:Rv,decomposeDataUri:function(h){var w=nj.exec(h);if(w)return{mediaType:w[1]?w[1].toLowerCase():void 0,subType:w[2]?w[2].toLowerCase():void 0,charset:w[3]?w[3].toLowerCase():void 0,encoding:w[4]?w[4].toLowerCase():void 0,data:w[5]}},deprecation:we,destroyTextureCache:function(){var h;for(h in nD)nD[h].destroy();for(h in nF)nF[h].destroy()},determineCrossOrigin:Uv,earcut:eb,getBufferType:Nv,getResolutionOfUrl:Ca,hex2rgb:Vi,hex2string:tf,interleaveTypedArrays:function(h,w){for(var q=0,tr=0,tn={},ti=0;ti<h.length;ti++)tr+=w[ti],q+=h[ti].length;for(var to=new ArrayBuffer(4*q),ts=null,tu=0,ti=0;ti<h.length;ti++){var tl=w[ti],tc=h[ti],tp=Nv(tc);tn[tp]||(tn[tp]=new nM[tp](to)),ts=tn[tp];for(var td=0;td<tc.length;td++)ts[(td/tl|0)*tr+tu+td%tl]=tc[td];tu+=tl}return new Float32Array(to)},isMobile:ep,isPow2:Ec,isWebGLSupported:Iv,log2:wc,nextPow2:ka,premultiplyBlendMode:nN,premultiplyRgba:Pv,premultiplyTint:Su,premultiplyTintToRgba:of,removeItems:Ui,rgb2hex:function(h){return(255*h[0]<<16)+(255*h[1]<<8)+(255*h[2]|0)},sayHello:Sv,sign:Ri,skipHello:function(){nP=!0},string2hex:ef,trimCanvas:kv,uid:Xi,url:ex},Symbol.toStringTag,{value:"Module"}));/*!
 * @pixi/math - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var nV,nX,nH,nz,nK,nY,nW,nq,nZ,nJ,nQ,n$,n0,n1,n2,n3,n4,n5,n6,n8,n7,n9,io,is,iu,il,ic,ip,id,i_,ig,im,iy,iv,ib,ix,iT,iA=2*Math.PI,iw=180/Math.PI,iL=Math.PI/180;(aE=iT||(iT={}))[aE.POLY=0]="POLY",aE[aE.RECT=1]="RECT",aE[aE.CIRC=2]="CIRC",aE[aE.ELIP=3]="ELIP",aE[aE.RREC=4]="RREC";var iS=function(){function e(h,w,q,tr){void 0===h&&(h=0),void 0===w&&(w=0),void 0===q&&(q=0),void 0===tr&&(tr=0),this.x=Number(h),this.y=Number(w),this.width=Number(q),this.height=Number(tr),this.type=iT.RECT}return Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(e,"EMPTY",{get:function(){return new e(0,0,0,0)},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copyFrom=function(h){return this.x=h.x,this.y=h.y,this.width=h.width,this.height=h.height,this},e.prototype.copyTo=function(h){return h.x=this.x,h.y=this.y,h.width=this.width,h.height=this.height,h},e.prototype.contains=function(h,w){return!(this.width<=0)&&!(this.height<=0)&&h>=this.x&&h<this.x+this.width&&w>=this.y&&w<this.y+this.height},e.prototype.pad=function(h,w){return void 0===h&&(h=0),void 0===w&&(w=h),this.x-=h,this.y-=w,this.width+=2*h,this.height+=2*w,this},e.prototype.fit=function(h){var w=Math.max(this.x,h.x),q=Math.min(this.x+this.width,h.x+h.width),tr=Math.max(this.y,h.y),tn=Math.min(this.y+this.height,h.y+h.height);return this.x=w,this.width=Math.max(q-w,0),this.y=tr,this.height=Math.max(tn-tr,0),this},e.prototype.ceil=function(h,w){void 0===h&&(h=1),void 0===w&&(w=.001);var q=Math.ceil((this.x+this.width-w)*h)/h,tr=Math.ceil((this.y+this.height-w)*h)/h;return this.x=Math.floor((this.x+w)*h)/h,this.y=Math.floor((this.y+w)*h)/h,this.width=q-this.x,this.height=tr-this.y,this},e.prototype.enlarge=function(h){var w=Math.min(this.x,h.x),q=Math.max(this.x+this.width,h.x+h.width),tr=Math.min(this.y,h.y),tn=Math.max(this.y+this.height,h.y+h.height);return this.x=w,this.width=q-w,this.y=tr,this.height=tn-tr,this},e}(),iI=function(){function e(h,w,q){void 0===h&&(h=0),void 0===w&&(w=0),void 0===q&&(q=0),this.x=h,this.y=w,this.radius=q,this.type=iT.CIRC}return e.prototype.clone=function(){return new e(this.x,this.y,this.radius)},e.prototype.contains=function(h,w){if(this.radius<=0)return!1;var q=this.radius*this.radius,tr=this.x-h,tn=this.y-w;return tr*=tr,tn*=tn,tr+tn<=q},e.prototype.getBounds=function(){return new iS(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},e}(),iP=function(){function e(h,w,q,tr){void 0===h&&(h=0),void 0===w&&(w=0),void 0===q&&(q=0),void 0===tr&&(tr=0),this.x=h,this.y=w,this.width=q,this.height=tr,this.type=iT.ELIP}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.contains=function(h,w){if(this.width<=0||this.height<=0)return!1;var q=(h-this.x)/this.width,tr=(w-this.y)/this.height;return q*=q,tr*=tr,q+tr<=1},e.prototype.getBounds=function(){return new iS(this.x-this.width,this.y-this.height,this.width,this.height)},e}(),iR=function(){function e(){for(var h=arguments,w=[],q=0;q<arguments.length;q++)w[q]=h[q];var tr=Array.isArray(w[0])?w[0]:w;if("number"!=typeof tr[0]){for(var tn=[],ti=0,to=tr.length;ti<to;ti++)tn.push(tr[ti].x,tr[ti].y);tr=tn}this.points=tr,this.type=iT.POLY,this.closeStroke=!0}return e.prototype.clone=function(){var h=this.points.slice(),w=new e(h);return w.closeStroke=this.closeStroke,w},e.prototype.contains=function(h,w){for(var q=!1,tr=this.points.length/2,tn=0,ti=tr-1;tn<tr;ti=tn++){var to=this.points[2*tn],ts=this.points[2*tn+1],tu=this.points[2*ti],tl=this.points[2*ti+1];ts>w!=tl>w&&h<(tu-to)*((w-ts)/(tl-ts))+to&&(q=!q)}return q},e}(),iN=function(){function e(h,w,q,tr,tn){void 0===h&&(h=0),void 0===w&&(w=0),void 0===q&&(q=0),void 0===tr&&(tr=0),void 0===tn&&(tn=20),this.x=h,this.y=w,this.width=q,this.height=tr,this.radius=tn,this.type=iT.RREC}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height,this.radius)},e.prototype.contains=function(h,w){if(this.width<=0||this.height<=0)return!1;if(h>=this.x&&h<=this.x+this.width&&w>=this.y&&w<=this.y+this.height){if(w>=this.y+this.radius&&w<=this.y+this.height-this.radius||h>=this.x+this.radius&&h<=this.x+this.width-this.radius)return!0;var q=h-(this.x+this.radius),tr=w-(this.y+this.radius),tn=this.radius*this.radius;if(q*q+tr*tr<=tn||(q=h-(this.x+this.width-this.radius))*q+tr*tr<=tn||q*q+(tr=w-(this.y+this.height-this.radius))*tr<=tn||(q=h-(this.x+this.radius))*q+tr*tr<=tn)return!0}return!1},e}(),iM=function(){function e(h,w){void 0===h&&(h=0),void 0===w&&(w=0),this.x=h,this.y=w}return e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.copyFrom=function(h){return this.set(h.x,h.y),this},e.prototype.copyTo=function(h){return h.set(this.x,this.y),h},e.prototype.equals=function(h){return h.x===this.x&&h.y===this.y},e.prototype.set=function(h,w){return void 0===h&&(h=0),void 0===w&&(w=h),this.x=h,this.y=w,this},e}(),ik=function(){function e(h,w,q,tr){void 0===q&&(q=0),void 0===tr&&(tr=0),this._x=q,this._y=tr,this.cb=h,this.scope=w}return e.prototype.clone=function(h,w){return void 0===h&&(h=this.cb),void 0===w&&(w=this.scope),new e(h,w,this._x,this._y)},e.prototype.set=function(h,w){return void 0===h&&(h=0),void 0===w&&(w=h),(this._x!==h||this._y!==w)&&(this._x=h,this._y=w,this.cb.call(this.scope)),this},e.prototype.copyFrom=function(h){return(this._x!==h.x||this._y!==h.y)&&(this._x=h.x,this._y=h.y,this.cb.call(this.scope)),this},e.prototype.copyTo=function(h){return h.set(this._x,this._y),h},e.prototype.equals=function(h){return h.x===this._x&&h.y===this._y},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(h){this._x!==h&&(this._x=h,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(h){this._y!==h&&(this._y=h,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),e}(),iU=function(){function e(h,w,q,tr,tn,ti){void 0===h&&(h=1),void 0===w&&(w=0),void 0===q&&(q=0),void 0===tr&&(tr=1),void 0===tn&&(tn=0),void 0===ti&&(ti=0),this.array=null,this.a=h,this.b=w,this.c=q,this.d=tr,this.tx=tn,this.ty=ti}return e.prototype.fromArray=function(h){this.a=h[0],this.b=h[1],this.c=h[3],this.d=h[4],this.tx=h[2],this.ty=h[5]},e.prototype.set=function(h,w,q,tr,tn,ti){return this.a=h,this.b=w,this.c=q,this.d=tr,this.tx=tn,this.ty=ti,this},e.prototype.toArray=function(h,w){this.array||(this.array=new Float32Array(9));var q=w||this.array;return h?(q[0]=this.a,q[1]=this.b,q[2]=0,q[3]=this.c,q[4]=this.d,q[5]=0,q[6]=this.tx,q[7]=this.ty):(q[0]=this.a,q[1]=this.c,q[2]=this.tx,q[3]=this.b,q[4]=this.d,q[5]=this.ty,q[6]=0,q[7]=0),q[8]=1,q},e.prototype.apply=function(h,w){w=w||new iM;var q=h.x,tr=h.y;return w.x=this.a*q+this.c*tr+this.tx,w.y=this.b*q+this.d*tr+this.ty,w},e.prototype.applyInverse=function(h,w){w=w||new iM;var q=1/(this.a*this.d+-(this.c*this.b)),tr=h.x,tn=h.y;return w.x=this.d*q*tr+-this.c*q*tn+(this.ty*this.c-this.tx*this.d)*q,w.y=this.a*q*tn+-this.b*q*tr+(-this.ty*this.a+this.tx*this.b)*q,w},e.prototype.translate=function(h,w){return this.tx+=h,this.ty+=w,this},e.prototype.scale=function(h,w){return this.a*=h,this.d*=w,this.c*=h,this.b*=w,this.tx*=h,this.ty*=w,this},e.prototype.rotate=function(h){var w=Math.cos(h),q=Math.sin(h),tr=this.a,tn=this.c,ti=this.tx;return this.a=tr*w-this.b*q,this.b=tr*q+this.b*w,this.c=tn*w-this.d*q,this.d=tn*q+this.d*w,this.tx=ti*w-this.ty*q,this.ty=ti*q+this.ty*w,this},e.prototype.append=function(h){var w=this.a,q=this.b,tr=this.c,tn=this.d;return this.a=h.a*w+h.b*tr,this.b=h.a*q+h.b*tn,this.c=h.c*w+h.d*tr,this.d=h.c*q+h.d*tn,this.tx=h.tx*w+h.ty*tr+this.tx,this.ty=h.tx*q+h.ty*tn+this.ty,this},e.prototype.setTransform=function(h,w,q,tr,tn,ti,to,ts,tu){return this.a=Math.cos(to+tu)*tn,this.b=Math.sin(to+tu)*tn,this.c=-Math.sin(to-ts)*ti,this.d=Math.cos(to-ts)*ti,this.tx=h-(q*this.a+tr*this.c),this.ty=w-(q*this.b+tr*this.d),this},e.prototype.prepend=function(h){var w=this.tx;if(1!==h.a||0!==h.b||0!==h.c||1!==h.d){var q=this.a,tr=this.c;this.a=q*h.a+this.b*h.c,this.b=q*h.b+this.b*h.d,this.c=tr*h.a+this.d*h.c,this.d=tr*h.b+this.d*h.d}return this.tx=w*h.a+this.ty*h.c+h.tx,this.ty=w*h.b+this.ty*h.d+h.ty,this},e.prototype.decompose=function(h){var w=this.a,q=this.b,tr=this.c,tn=this.d,ti=-Math.atan2(-tr,tn),to=Math.atan2(q,w),ts=Math.abs(ti+to);return ts<1e-5||1e-5>Math.abs(iA-ts)?(h.rotation=to,h.skew.x=h.skew.y=0):(h.rotation=0,h.skew.x=ti,h.skew.y=to),h.scale.x=Math.sqrt(w*w+q*q),h.scale.y=Math.sqrt(tr*tr+tn*tn),h.position.x=this.tx,h.position.y=this.ty,h},e.prototype.invert=function(){var h=this.a,w=this.b,q=this.c,tr=this.d,tn=this.tx,ti=h*tr-w*q;return this.a=tr/ti,this.b=-w/ti,this.c=-q/ti,this.d=h/ti,this.tx=(q*this.ty-tr*tn)/ti,this.ty=-(h*this.ty-w*tn)/ti,this},e.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},e.prototype.clone=function(){var h=new e;return h.a=this.a,h.b=this.b,h.c=this.c,h.d=this.d,h.tx=this.tx,h.ty=this.ty,h},e.prototype.copyTo=function(h){return h.a=this.a,h.b=this.b,h.c=this.c,h.d=this.d,h.tx=this.tx,h.ty=this.ty,h},e.prototype.copyFrom=function(h){return this.a=h.a,this.b=h.b,this.c=h.c,this.d=h.d,this.tx=h.tx,this.ty=h.ty,this},Object.defineProperty(e,"IDENTITY",{get:function(){return new e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"TEMP_MATRIX",{get:function(){return new e},enumerable:!1,configurable:!0}),e}(),iC=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],iD=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],iF=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],iB=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],ij=[],iG=[],iV=Math.sign;!function(){for(var h=0;h<16;h++){var w=[];ij.push(w);for(var q=0;q<16;q++)for(var tr=iV(iC[h]*iC[q]+iF[h]*iD[q]),tn=iV(iD[h]*iC[q]+iB[h]*iD[q]),ti=iV(iC[h]*iF[q]+iF[h]*iB[q]),to=iV(iD[h]*iF[q]+iB[h]*iB[q]),ts=0;ts<16;ts++)if(iC[ts]===tr&&iD[ts]===tn&&iF[ts]===ti&&iB[ts]===to){w.push(ts);break}}for(var h=0;h<16;h++){var tu=new iU;tu.set(iC[h],iD[h],iF[h],iB[h],0,0),iG.push(tu)}}();var iX={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(h){return iC[h]},uY:function(h){return iD[h]},vX:function(h){return iF[h]},vY:function(h){return iB[h]},inv:function(h){return 8&h?15&h:7&-h},add:function(h,w){return ij[h][w]},sub:function(h,w){return ij[h][iX.inv(w)]},rotate180:function(h){return 4^h},isVertical:function(h){return(3&h)==2},byDirection:function(h,w){return 2*Math.abs(h)<=Math.abs(w)?w>=0?iX.S:iX.N:2*Math.abs(w)<=Math.abs(h)?h>0?iX.E:iX.W:w>0?h>0?iX.SE:iX.SW:h>0?iX.NE:iX.NW},matrixAppendRotationInv:function(h,w,q,tr){void 0===q&&(q=0),void 0===tr&&(tr=0);var tn=iG[iX.inv(w)];tn.tx=q,tn.ty=tr,h.append(tn)}},iH=function(){function e(){this.worldTransform=new iU,this.localTransform=new iU,this.position=new ik(this.onChange,this,0,0),this.scale=new ik(this.onChange,this,1,1),this.pivot=new ik(this.onChange,this,0,0),this.skew=new ik(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return e.prototype.onChange=function(){this._localID++},e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},e.prototype.updateLocalTransform=function(){var h=this.localTransform;this._localID!==this._currentLocalID&&(h.a=this._cx*this.scale.x,h.b=this._sx*this.scale.x,h.c=this._cy*this.scale.y,h.d=this._sy*this.scale.y,h.tx=this.position.x-(this.pivot.x*h.a+this.pivot.y*h.c),h.ty=this.position.y-(this.pivot.x*h.b+this.pivot.y*h.d),this._currentLocalID=this._localID,this._parentID=-1)},e.prototype.updateTransform=function(h){var w=this.localTransform;if(this._localID!==this._currentLocalID&&(w.a=this._cx*this.scale.x,w.b=this._sx*this.scale.x,w.c=this._cy*this.scale.y,w.d=this._sy*this.scale.y,w.tx=this.position.x-(this.pivot.x*w.a+this.pivot.y*w.c),w.ty=this.position.y-(this.pivot.x*w.b+this.pivot.y*w.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==h._worldID){var q=h.worldTransform,tr=this.worldTransform;tr.a=w.a*q.a+w.b*q.c,tr.b=w.a*q.b+w.b*q.d,tr.c=w.c*q.a+w.d*q.c,tr.d=w.c*q.b+w.d*q.d,tr.tx=w.tx*q.a+w.ty*q.c+q.tx,tr.ty=w.tx*q.b+w.ty*q.d+q.ty,this._parentID=h._worldID,this._worldID++}},e.prototype.setFromMatrix=function(h){h.decompose(this),this._localID++},Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(h){this._rotation!==h&&(this._rotation=h,this.updateSkew())},enumerable:!1,configurable:!0}),e.IDENTITY=new e,e}();/*!
 * @pixi/display - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */ed.SORTABLE_CHILDREN=!1;var iz=function(){function e(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return e.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},e.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},e.prototype.getRectangle=function(h){return this.minX>this.maxX||this.minY>this.maxY?iS.EMPTY:((h=h||new iS(0,0,1,1)).x=this.minX,h.y=this.minY,h.width=this.maxX-this.minX,h.height=this.maxY-this.minY,h)},e.prototype.addPoint=function(h){this.minX=Math.min(this.minX,h.x),this.maxX=Math.max(this.maxX,h.x),this.minY=Math.min(this.minY,h.y),this.maxY=Math.max(this.maxY,h.y)},e.prototype.addQuad=function(h){var w=this.minX,q=this.minY,tr=this.maxX,tn=this.maxY,ti=h[0],to=h[1];w=ti<w?ti:w,q=to<q?to:q,tr=ti>tr?ti:tr,tn=to>tn?to:tn,ti=h[2],to=h[3],w=ti<w?ti:w,q=to<q?to:q,tr=ti>tr?ti:tr,tn=to>tn?to:tn,ti=h[4],to=h[5],w=ti<w?ti:w,q=to<q?to:q,tr=ti>tr?ti:tr,tn=to>tn?to:tn,ti=h[6],to=h[7],w=ti<w?ti:w,q=to<q?to:q,tr=ti>tr?ti:tr,tn=to>tn?to:tn,this.minX=w,this.minY=q,this.maxX=tr,this.maxY=tn},e.prototype.addFrame=function(h,w,q,tr,tn){this.addFrameMatrix(h.worldTransform,w,q,tr,tn)},e.prototype.addFrameMatrix=function(h,w,q,tr,tn){var ti=h.a,to=h.b,ts=h.c,tu=h.d,tl=h.tx,tc=h.ty,tp=this.minX,td=this.minY,tm=this.maxX,ty=this.maxY,tv=ti*w+ts*q+tl,tb=to*w+tu*q+tc;tp=tv<tp?tv:tp,td=tb<td?tb:td,tm=tv>tm?tv:tm,ty=tb>ty?tb:ty,tv=ti*tr+ts*q+tl,tb=to*tr+tu*q+tc,tp=tv<tp?tv:tp,td=tb<td?tb:td,tm=tv>tm?tv:tm,ty=tb>ty?tb:ty,tv=ti*w+ts*tn+tl,tb=to*w+tu*tn+tc,tp=tv<tp?tv:tp,td=tb<td?tb:td,tm=tv>tm?tv:tm,ty=tb>ty?tb:ty,tv=ti*tr+ts*tn+tl,tb=to*tr+tu*tn+tc,tp=tv<tp?tv:tp,td=tb<td?tb:td,tm=tv>tm?tv:tm,ty=tb>ty?tb:ty,this.minX=tp,this.minY=td,this.maxX=tm,this.maxY=ty},e.prototype.addVertexData=function(h,w,q){for(var tr=this.minX,tn=this.minY,ti=this.maxX,to=this.maxY,ts=w;ts<q;ts+=2){var tu=h[ts],tl=h[ts+1];tr=tu<tr?tu:tr,tn=tl<tn?tl:tn,ti=tu>ti?tu:ti,to=tl>to?tl:to}this.minX=tr,this.minY=tn,this.maxX=ti,this.maxY=to},e.prototype.addVertices=function(h,w,q,tr){this.addVerticesMatrix(h.worldTransform,w,q,tr)},e.prototype.addVerticesMatrix=function(h,w,q,tr,tn,ti){void 0===tn&&(tn=0),void 0===ti&&(ti=tn);for(var to=h.a,ts=h.b,tu=h.c,tl=h.d,tc=h.tx,tp=h.ty,td=this.minX,tm=this.minY,ty=this.maxX,tv=this.maxY,tb=q;tb<tr;tb+=2){var tx=w[tb],tT=w[tb+1],tE=to*tx+tu*tT+tc,tA=tl*tT+ts*tx+tp;td=Math.min(td,tE-tn),ty=Math.max(ty,tE+tn),tm=Math.min(tm,tA-ti),tv=Math.max(tv,tA+ti)}this.minX=td,this.minY=tm,this.maxX=ty,this.maxY=tv},e.prototype.addBounds=function(h){var w=this.minX,q=this.minY,tr=this.maxX,tn=this.maxY;this.minX=h.minX<w?h.minX:w,this.minY=h.minY<q?h.minY:q,this.maxX=h.maxX>tr?h.maxX:tr,this.maxY=h.maxY>tn?h.maxY:tn},e.prototype.addBoundsMask=function(h,w){var q=h.minX>w.minX?h.minX:w.minX,tr=h.minY>w.minY?h.minY:w.minY,tn=h.maxX<w.maxX?h.maxX:w.maxX,ti=h.maxY<w.maxY?h.maxY:w.maxY;if(q<=tn&&tr<=ti){var to=this.minX,ts=this.minY,tu=this.maxX,tl=this.maxY;this.minX=q<to?q:to,this.minY=tr<ts?tr:ts,this.maxX=tn>tu?tn:tu,this.maxY=ti>tl?ti:tl}},e.prototype.addBoundsMatrix=function(h,w){this.addFrameMatrix(w,h.minX,h.minY,h.maxX,h.maxY)},e.prototype.addBoundsArea=function(h,w){var q=h.minX>w.x?h.minX:w.x,tr=h.minY>w.y?h.minY:w.y,tn=h.maxX<w.x+w.width?h.maxX:w.x+w.width,ti=h.maxY<w.y+w.height?h.maxY:w.y+w.height;if(q<=tn&&tr<=ti){var to=this.minX,ts=this.minY,tu=this.maxX,tl=this.maxY;this.minX=q<to?q:to,this.minY=tr<ts?tr:ts,this.maxX=tn>tu?tn:tu,this.maxY=ti>tl?ti:tl}},e.prototype.pad=function(h,w){void 0===h&&(h=0),void 0===w&&(w=h),this.isEmpty()||(this.minX-=h,this.maxX+=h,this.minY-=w,this.maxY+=w)},e.prototype.addFramePad=function(h,w,q,tr,tn,ti){h-=tn,w-=ti,q+=tn,tr+=ti,this.minX=this.minX<h?this.minX:h,this.maxX=this.maxX>q?this.maxX:q,this.minY=this.minY<w?this.minY:w,this.maxY=this.maxY>tr?this.maxY:tr},e}(),Ic=function(h,w){return(Ic=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,w){h.__proto__=w}||function(h,w){for(var q in w)w.hasOwnProperty(q)&&(h[q]=w[q])})(h,w)};function sf(h,w){function t(){this.constructor=h}Ic(h,w),h.prototype=null===w?Object.create(w):(t.prototype=w.prototype,new t)}var iK=function(h){function n(){var w=h.call(this)||this;return w.tempDisplayObjectParent=null,w.transform=new iH,w.alpha=1,w.visible=!0,w.renderable=!0,w.parent=null,w.worldAlpha=1,w._lastSortedIndex=0,w._zIndex=0,w.filterArea=null,w.filters=null,w._enabledFilters=null,w._bounds=new iz,w._localBounds=null,w._boundsID=0,w._boundsRect=null,w._localBoundsRect=null,w._mask=null,w._destroyed=!1,w.isSprite=!1,w.isMask=!1,w}return sf(n,h),n.mixin=function(h){for(var w=Object.keys(h),q=0;q<w.length;++q){var tr=w[q];Object.defineProperty(n.prototype,tr,Object.getOwnPropertyDescriptor(h,tr))}},n.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},n.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},n.prototype.getBounds=function(h,w){return h||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),w||(this._boundsRect||(this._boundsRect=new iS),w=this._boundsRect),this._bounds.getRectangle(w)},n.prototype.getLocalBounds=function(h){h||(this._localBoundsRect||(this._localBoundsRect=new iS),h=this._localBoundsRect),this._localBounds||(this._localBounds=new iz);var w=this.transform,q=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var tr=this._bounds,tn=this._boundsID;this._bounds=this._localBounds;var ti=this.getBounds(!1,h);return this.parent=q,this.transform=w,this._bounds=tr,this._bounds.updateID+=this._boundsID-tn,ti},n.prototype.toGlobal=function(h,w,q){return void 0===q&&(q=!1),q||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(h,w)},n.prototype.toLocal=function(h,w,q,tr){return w&&(h=w.toGlobal(h,q,tr)),tr||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(h,q)},n.prototype.setParent=function(h){if(!h||!h.addChild)throw Error("setParent: Argument must be a Container");return h.addChild(this),h},n.prototype.setTransform=function(h,w,q,tr,tn,ti,to,ts,tu){return void 0===h&&(h=0),void 0===w&&(w=0),void 0===q&&(q=1),void 0===tr&&(tr=1),void 0===tn&&(tn=0),void 0===ti&&(ti=0),void 0===to&&(to=0),void 0===ts&&(ts=0),void 0===tu&&(tu=0),this.position.x=h,this.position.y=w,this.scale.x=q||1,this.scale.y=tr||1,this.rotation=tn,this.skew.x=ti,this.skew.y=to,this.pivot.x=ts,this.pivot.y=tu,this},n.prototype.destroy=function(h){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(n.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new iY),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),n.prototype.enableTempParent=function(){var h=this.parent;return this.parent=this._tempDisplayObjectParent,h},n.prototype.disableTempParent=function(h){this.parent=h},Object.defineProperty(n.prototype,"x",{get:function(){return this.position.x},set:function(h){this.transform.position.x=h},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this.position.y},set:function(h){this.transform.position.y=h},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"position",{get:function(){return this.transform.position},set:function(h){this.transform.position.copyFrom(h)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"scale",{get:function(){return this.transform.scale},set:function(h){this.transform.scale.copyFrom(h)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(h){this.transform.pivot.copyFrom(h)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"skew",{get:function(){return this.transform.skew},set:function(h){this.transform.skew.copyFrom(h)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(h){this.transform.rotation=h},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"angle",{get:function(){return this.transform.rotation*iw},set:function(h){this.transform.rotation=h*iL},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"zIndex",{get:function(){return this._zIndex},set:function(h){this._zIndex=h,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"worldVisible",{get:function(){var h=this;do{if(!h.visible)return!1;h=h.parent}while(h);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"mask",{get:function(){return this._mask},set:function(h){if(this._mask){var w=this._mask.maskObject||this._mask;w.renderable=!0,w.isMask=!1}if(this._mask=h,this._mask){var w=this._mask.maskObject||this._mask;w.renderable=!1,w.isMask=!0}},enumerable:!1,configurable:!0}),n}(em),iY=function(h){function n(){var w=null!==h&&h.apply(this,arguments)||this;return w.sortDirty=null,w}return sf(n,h),n}(iK);function dx(h,w){return h.zIndex===w.zIndex?h._lastSortedIndex-w._lastSortedIndex:h.zIndex-w.zIndex}iK.prototype.displayObjectUpdateTransform=iK.prototype.updateTransform;var iW=function(h){function n(){var w=h.call(this)||this;return w.children=[],w.sortableChildren=ed.SORTABLE_CHILDREN,w.sortDirty=!1,w}return sf(n,h),n.prototype.onChildrenChange=function(h){},n.prototype.addChild=function(){for(var h=arguments,w=[],q=0;q<arguments.length;q++)w[q]=h[q];if(w.length>1)for(var tr=0;tr<w.length;tr++)this.addChild(w[tr]);else{var tn=w[0];tn.parent&&tn.parent.removeChild(tn),tn.parent=this,this.sortDirty=!0,tn.transform._parentID=-1,this.children.push(tn),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",tn,this,this.children.length-1),tn.emit("added",this)}return w[0]},n.prototype.addChildAt=function(h,w){if(w<0||w>this.children.length)throw Error(h+"addChildAt: The index "+w+" supplied is out of bounds "+this.children.length);return h.parent&&h.parent.removeChild(h),h.parent=this,this.sortDirty=!0,h.transform._parentID=-1,this.children.splice(w,0,h),this._boundsID++,this.onChildrenChange(w),h.emit("added",this),this.emit("childAdded",h,this,w),h},n.prototype.swapChildren=function(h,w){if(h!==w){var q=this.getChildIndex(h),tr=this.getChildIndex(w);this.children[q]=w,this.children[tr]=h,this.onChildrenChange(q<tr?q:tr)}},n.prototype.getChildIndex=function(h){var w=this.children.indexOf(h);if(-1===w)throw Error("The supplied DisplayObject must be a child of the caller");return w},n.prototype.setChildIndex=function(h,w){if(w<0||w>=this.children.length)throw Error("The index "+w+" supplied is out of bounds "+this.children.length);var q=this.getChildIndex(h);Ui(this.children,q,1),this.children.splice(w,0,h),this.onChildrenChange(w)},n.prototype.getChildAt=function(h){if(h<0||h>=this.children.length)throw Error("getChildAt: Index ("+h+") does not exist.");return this.children[h]},n.prototype.removeChild=function(){for(var h=arguments,w=[],q=0;q<arguments.length;q++)w[q]=h[q];if(w.length>1)for(var tr=0;tr<w.length;tr++)this.removeChild(w[tr]);else{var tn=w[0],ti=this.children.indexOf(tn);if(-1===ti)return null;tn.parent=null,tn.transform._parentID=-1,Ui(this.children,ti,1),this._boundsID++,this.onChildrenChange(ti),tn.emit("removed",this),this.emit("childRemoved",tn,this,ti)}return w[0]},n.prototype.removeChildAt=function(h){var w=this.getChildAt(h);return w.parent=null,w.transform._parentID=-1,Ui(this.children,h,1),this._boundsID++,this.onChildrenChange(h),w.emit("removed",this),this.emit("childRemoved",w,this,h),w},n.prototype.removeChildren=function(h,w){void 0===h&&(h=0),void 0===w&&(w=this.children.length);var q,tr=h,tn=w,ti=tn-tr;if(ti>0&&ti<=tn){q=this.children.splice(tr,ti);for(var to=0;to<q.length;++to)q[to].parent=null,q[to].transform&&(q[to].transform._parentID=-1);this._boundsID++,this.onChildrenChange(h);for(var to=0;to<q.length;++to)q[to].emit("removed",this),this.emit("childRemoved",q[to],this,to);return q}if(0===ti&&0===this.children.length)return[];throw RangeError("removeChildren: numeric values are outside the acceptable range.")},n.prototype.sortChildren=function(){for(var h=!1,w=0,q=this.children.length;w<q;++w){var tr=this.children[w];tr._lastSortedIndex=w,h||0===tr.zIndex||(h=!0)}h&&this.children.length>1&&this.children.sort(dx),this.sortDirty=!1},n.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var h=0,w=this.children.length;h<w;++h){var q=this.children[h];q.visible&&q.updateTransform()}},n.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var h=0;h<this.children.length;h++){var w=this.children[h];if(!(!w.visible||!w.renderable)){if(w.calculateBounds(),w._mask){var q=w._mask.maskObject||w._mask;q.calculateBounds(),this._bounds.addBoundsMask(w._bounds,q._bounds)}else w.filterArea?this._bounds.addBoundsArea(w._bounds,w.filterArea):this._bounds.addBounds(w._bounds)}}this._bounds.updateID=this._boundsID},n.prototype.getLocalBounds=function(w,q){void 0===q&&(q=!1);var tr=h.prototype.getLocalBounds.call(this,w);if(!q)for(var tn=0,ti=this.children.length;tn<ti;++tn){var to=this.children[tn];to.visible&&to.updateTransform()}return tr},n.prototype._calculateBounds=function(){},n.prototype.render=function(h){if(!(!this.visible||this.worldAlpha<=0||!this.renderable)){if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(h);else{this._render(h);for(var w=0,q=this.children.length;w<q;++w)this.children[w].render(h)}}},n.prototype.renderAdvanced=function(h){h.batch.flush();var w=this.filters,q=this._mask;if(w){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var tr=0;tr<w.length;tr++)w[tr].enabled&&this._enabledFilters.push(w[tr]);this._enabledFilters.length&&h.filter.push(this,this._enabledFilters)}q&&h.mask.push(this,this._mask),this._render(h);for(var tr=0,tn=this.children.length;tr<tn;tr++)this.children[tr].render(h);h.batch.flush(),q&&h.mask.pop(this),w&&this._enabledFilters&&this._enabledFilters.length&&h.filter.pop()},n.prototype._render=function(h){},n.prototype.destroy=function(w){h.prototype.destroy.call(this),this.sortDirty=!1;var q="boolean"==typeof w?w:w&&w.children,tr=this.removeChildren(0,this.children.length);if(q)for(var tn=0;tn<tr.length;++tn)tr[tn].destroy(w)},Object.defineProperty(n.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(h){var w=this.getLocalBounds().width;0!==w?this.scale.x=h/w:this.scale.x=1,this._width=h},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(h){var w=this.getLocalBounds().height;0!==w?this.scale.y=h/w:this.scale.y=1,this._height=h},enumerable:!1,configurable:!0}),n}(iK);iW.prototype.containerUpdateTransform=iW.prototype.updateTransform;/*!
 * @pixi/accessibility - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/accessibility is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var iq={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};iK.mixin(iq);var iZ=function(){function e(h){this._hookDiv=null,(ep.tablet||ep.phone)&&this.createTouchHook();var w=document.createElement("div");w.style.width="100px",w.style.height="100px",w.style.position="absolute",w.style.top="0px",w.style.left="0px",w.style.zIndex="2",this.div=w,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=h,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._isActive=!1,this._isMobileAccessibility=!1,this.androidUpdateCount=0,this.androidUpdateFrequency=500,window.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(e.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),e.prototype.createTouchHook=function(){var h=this,w=document.createElement("button");w.style.width="1px",w.style.height="1px",w.style.position="absolute",w.style.top="-1000px",w.style.left="-1000px",w.style.zIndex="2",w.style.backgroundColor="#FF0000",w.title="select to enable accessability for this content",w.addEventListener("focus",function(){h._isMobileAccessibility=!0,h.activate(),h.destroyTouchHook()}),document.body.appendChild(w),this._hookDiv=w},e.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},e.prototype.activate=function(){this._isActive||(this._isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},e.prototype.deactivate=function(){!this._isActive||this._isMobileAccessibility||(this._isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},e.prototype.updateAccessibleObjects=function(h){if(!(!h.visible||!h.accessibleChildren)){h.accessible&&h.interactive&&(h._accessibleActive||this.addChild(h),h.renderId=this.renderId);for(var w=h.children,q=0;q<w.length;q++)this.updateAccessibleObjects(w[q])}},e.prototype.update=function(){var h=performance.now();if(!(ep.android.device&&h<this.androidUpdateCount)&&(this.androidUpdateCount=h+this.androidUpdateFrequency,this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var w=this.renderer.view.getBoundingClientRect(),q=this.renderer.resolution,tr=w.width/this.renderer.width*q,tn=w.height/this.renderer.height*q,ti=this.div;ti.style.left=w.left+"px",ti.style.top=w.top+"px",ti.style.width=this.renderer.width+"px",ti.style.height=this.renderer.height+"px";for(var to=0;to<this.children.length;to++){var ts=this.children[to];if(ts.renderId!==this.renderId)ts._accessibleActive=!1,Ui(this.children,to,1),this.div.removeChild(ts._accessibleDiv),this.pool.push(ts._accessibleDiv),ts._accessibleDiv=null,to--;else{ti=ts._accessibleDiv;var tu=ts.hitArea,tl=ts.worldTransform;ts.hitArea?(ti.style.left=(tl.tx+tu.x*tl.a)*tr+"px",ti.style.top=(tl.ty+tu.y*tl.d)*tn+"px",ti.style.width=tu.width*tl.a*tr+"px",ti.style.height=tu.height*tl.d*tn+"px"):(tu=ts.getBounds(),this.capHitArea(tu),ti.style.left=tu.x*tr+"px",ti.style.top=tu.y*tn+"px",ti.style.width=tu.width*tr+"px",ti.style.height=tu.height*tn+"px",ti.title!==ts.accessibleTitle&&null!==ts.accessibleTitle&&(ti.title=ts.accessibleTitle),ti.getAttribute("aria-label")!==ts.accessibleHint&&null!==ts.accessibleHint&&ti.setAttribute("aria-label",ts.accessibleHint)),(ts.accessibleTitle!==ti.title||ts.tabIndex!==ti.tabIndex)&&(ti.title=ts.accessibleTitle,ti.tabIndex=ts.tabIndex,this.debug&&this.updateDebugHTML(ti))}}this.renderId++}},e.prototype.updateDebugHTML=function(h){h.innerHTML="type: "+h.type+"</br> title : "+h.title+"</br> tabIndex: "+h.tabIndex},e.prototype.capHitArea=function(h){h.x<0&&(h.width+=h.x,h.x=0),h.y<0&&(h.height+=h.y,h.y=0),h.x+h.width>this.renderer.width&&(h.width=this.renderer.width-h.x),h.y+h.height>this.renderer.height&&(h.height=this.renderer.height-h.y)},e.prototype.addChild=function(h){var w=this.pool.pop();w||((w=document.createElement("button")).style.width="100px",w.style.height="100px",w.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",w.style.position="absolute",w.style.zIndex="2",w.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?w.setAttribute("aria-live","off"):w.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?w.setAttribute("aria-relevant","additions"):w.setAttribute("aria-relevant","text"),w.addEventListener("click",this._onClick.bind(this)),w.addEventListener("focus",this._onFocus.bind(this)),w.addEventListener("focusout",this._onFocusOut.bind(this))),w.style.pointerEvents=h.accessiblePointerEvents,w.type=h.accessibleType,h.accessibleTitle&&null!==h.accessibleTitle?w.title=h.accessibleTitle:h.accessibleHint&&null!==h.accessibleHint||(w.title="displayObject "+h.tabIndex),h.accessibleHint&&null!==h.accessibleHint&&w.setAttribute("aria-label",h.accessibleHint),this.debug&&this.updateDebugHTML(w),h._accessibleActive=!0,h._accessibleDiv=w,w.displayObject=h,this.children.push(h),this.div.appendChild(h._accessibleDiv),h._accessibleDiv.tabIndex=h.tabIndex},e.prototype._onClick=function(h){var w=this.renderer.plugins.interaction;w.dispatchEvent(h.target.displayObject,"click",w.eventData),w.dispatchEvent(h.target.displayObject,"pointertap",w.eventData),w.dispatchEvent(h.target.displayObject,"tap",w.eventData)},e.prototype._onFocus=function(h){h.target.getAttribute("aria-live")||h.target.setAttribute("aria-live","assertive");var w=this.renderer.plugins.interaction;w.dispatchEvent(h.target.displayObject,"mouseover",w.eventData)},e.prototype._onFocusOut=function(h){h.target.getAttribute("aria-live")||h.target.setAttribute("aria-live","polite");var w=this.renderer.plugins.interaction;w.dispatchEvent(h.target.displayObject,"mouseout",w.eventData)},e.prototype._onKeyDown=function(h){9===h.keyCode&&this.activate()},e.prototype._onMouseMove=function(h){0===h.movementX&&0===h.movementY||this.deactivate()},e.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},e}();/*!
 * @pixi/ticker - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */ed.TARGET_FPMS=.06,(aA=aI||(aI={}))[aA.INTERACTION=50]="INTERACTION",aA[aA.HIGH=25]="HIGH",aA[aA.NORMAL=0]="NORMAL",aA[aA.LOW=-25]="LOW",aA[aA.UTILITY=-50]="UTILITY";var iJ=function(){function e(h,w,q,tr){void 0===w&&(w=null),void 0===q&&(q=0),void 0===tr&&(tr=!1),this.fn=h,this.context=w,this.priority=q,this.once=tr,this.next=null,this.previous=null,this._destroyed=!1}return e.prototype.match=function(h,w){return void 0===w&&(w=null),this.fn===h&&this.context===w},e.prototype.emit=function(h){this.fn&&(this.context?this.fn.call(this.context,h):this.fn(h));var w=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),w},e.prototype.connect=function(h){this.previous=h,h.next&&(h.next.previous=this),this.next=h.next,h.next=this},e.prototype.destroy=function(h){void 0===h&&(h=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var w=this.next;return this.next=h?null:w,this.previous=null,w},e}(),iQ=function(){function e(){var h=this;this._head=new iJ(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this.autoStart=!1,this.deltaTime=1,this.deltaMS=1/ed.TARGET_FPMS,this.elapsedMS=1/ed.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._protected=!1,this._lastFrame=-1,this._tick=function(w){h._requestId=null,h.started&&(h.update(w),h.started&&null===h._requestId&&h._head.next&&(h._requestId=requestAnimationFrame(h._tick)))}}return e.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},e.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},e.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},e.prototype.add=function(h,w,q){return void 0===q&&(q=aI.NORMAL),this._addListener(new iJ(h,w,q))},e.prototype.addOnce=function(h,w,q){return void 0===q&&(q=aI.NORMAL),this._addListener(new iJ(h,w,q,!0))},e.prototype._addListener=function(h){var w=this._head.next,q=this._head;if(w){for(;w;){if(h.priority>w.priority){h.connect(q);break}q=w,w=w.next}h.previous||h.connect(q)}else h.connect(q);return this._startIfPossible(),this},e.prototype.remove=function(h,w){for(var q=this._head.next;q;)q=q.match(h,w)?q.destroy():q.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(e.prototype,"count",{get:function(){if(!this._head)return 0;for(var h=0,w=this._head;w=w.next;)h++;return h},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},e.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},e.prototype.destroy=function(){if(!this._protected){this.stop();for(var h=this._head.next;h;)h=h.destroy(!0);this._head.destroy(),this._head=null}},e.prototype.update=function(h){if(void 0===h&&(h=performance.now()),h>this.lastTime){if((w=this.elapsedMS=h-this.lastTime)>this._maxElapsedMS&&(w=this._maxElapsedMS),w*=this.speed,this._minElapsedMS){var w,q=h-this._lastFrame|0;if(q<this._minElapsedMS)return;this._lastFrame=h-q%this._minElapsedMS}this.deltaMS=w,this.deltaTime=this.deltaMS*ed.TARGET_FPMS;for(var tr=this._head,tn=tr.next;tn;)tn=tn.emit(this.deltaTime);tr.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=h},Object.defineProperty(e.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(h){var w=Math.min(Math.max(0,Math.min(this.maxFPS,h))/1e3,ed.TARGET_FPMS);this._maxElapsedMS=1/w},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(h){if(0===h)this._minElapsedMS=0;else{var w=Math.max(this.minFPS,h);this._minElapsedMS=1/(w/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"shared",{get:function(){if(!e._shared){var h=e._shared=new e;h.autoStart=!0,h._protected=!0}return e._shared},enumerable:!1,configurable:!0}),Object.defineProperty(e,"system",{get:function(){if(!e._system){var h=e._system=new e;h.autoStart=!0,h._protected=!0}return e._system},enumerable:!1,configurable:!0}),e}(),i$=function(){function e(){}return e.init=function(h){var w=this;h=Object.assign({autoStart:!0,sharedTicker:!1},h),Object.defineProperty(this,"ticker",{set:function(h){this._ticker&&this._ticker.remove(this.render,this),this._ticker=h,h&&h.add(this.render,this,aI.LOW)},get:function(){return this._ticker}}),this.stop=function(){w._ticker.stop()},this.start=function(){w._ticker.start()},this._ticker=null,this.ticker=h.sharedTicker?iQ.shared:new iQ,h.autoStart&&this.start()},e.destroy=function(){if(this._ticker){var h=this._ticker;this.ticker=null,h.destroy()}},e}(),i1=function(){function e(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new iM,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(e.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),e.prototype.getLocalPosition=function(h,w,q){return h.worldTransform.applyInverse(q||this.global,w)},e.prototype.copyEvent=function(h){"isPrimary"in h&&h.isPrimary&&(this.isPrimary=!0),this.button="button"in h&&h.button;var w="buttons"in h&&h.buttons;this.buttons=Number.isInteger(w)?w:"which"in h&&h.which,this.width="width"in h&&h.width,this.height="height"in h&&h.height,this.tiltX="tiltX"in h&&h.tiltX,this.tiltY="tiltY"in h&&h.tiltY,this.pointerType="pointerType"in h&&h.pointerType,this.pressure="pressure"in h&&h.pressure,this.rotationAngle="rotationAngle"in h&&h.rotationAngle,this.twist="twist"in h&&h.twist||0,this.tangentialPressure="tangentialPressure"in h&&h.tangentialPressure||0},e.prototype.reset=function(){this.isPrimary=!1},e}(),Rc=function(h,w){return(Rc=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,w){h.__proto__=w}||function(h,w){for(var q in w)w.hasOwnProperty(q)&&(h[q]=w[q])})(h,w)},i2=function(){function e(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return e.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},e.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},e}(),i3=function(){function e(h){this._pointerId=h,this._flags=e.FLAGS.NONE}return e.prototype._doSet=function(h,w){w?this._flags=this._flags|h:this._flags=this._flags&~h},Object.defineProperty(e.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flags",{get:function(){return this._flags},set:function(h){this._flags=h},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"none",{get:function(){return this._flags===e.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"over",{get:function(){return(this._flags&e.FLAGS.OVER)!=0},set:function(h){this._doSet(e.FLAGS.OVER,h)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightDown",{get:function(){return(this._flags&e.FLAGS.RIGHT_DOWN)!=0},set:function(h){this._doSet(e.FLAGS.RIGHT_DOWN,h)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftDown",{get:function(){return(this._flags&e.FLAGS.LEFT_DOWN)!=0},set:function(h){this._doSet(e.FLAGS.LEFT_DOWN,h)},enumerable:!1,configurable:!0}),e.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),e}(),i4=function(){function e(){this._tempPoint=new iM}return e.prototype.recursiveFindHit=function(h,w,q,tr,tn){if(!w||!w.visible)return!1;var ti=h.data.global;tn=w.interactive||tn;var to=!1,ts=tn,tu=!0;if(w.hitArea?(tr&&(w.worldTransform.applyInverse(ti,this._tempPoint),w.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?to=!0:(tr=!1,tu=!1)),ts=!1):w._mask&&tr&&(w._mask.containsPoint&&w._mask.containsPoint(ti)||(tr=!1)),tu&&w.interactiveChildren&&w.children)for(var tl=w.children,tc=tl.length-1;tc>=0;tc--){var tp=tl[tc],td=this.recursiveFindHit(h,tp,q,tr,ts);if(td){if(!tp.parent)continue;ts=!1,td&&(h.target&&(tr=!1),to=!0)}}return tn&&(tr&&!h.target&&!w.hitArea&&w.containsPoint&&w.containsPoint(ti)&&(to=!0),w.interactive&&(to&&!h.target&&(h.target=w),q&&q(h,w,!!to))),to},e.prototype.findHit=function(h,w,q,tr){this.recursiveFindHit(h,w,q,tr,!1)},e}(),i5={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(e){e?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};iK.mixin(i5);var i6={target:null,data:{global:null}},i8=function(h){function n(w,q){var tr=h.call(this)||this;return q=q||{},tr.renderer=w,tr.autoPreventDefault=void 0===q.autoPreventDefault||q.autoPreventDefault,tr.interactionFrequency=q.interactionFrequency||10,tr.mouse=new i1,tr.mouse.identifier=1,tr.mouse.global.set(-999999),tr.activeInteractionData={},tr.activeInteractionData[1]=tr.mouse,tr.interactionDataPool=[],tr.eventData=new i2,tr.interactionDOMElement=null,tr.moveWhenInside=!1,tr.eventsAdded=!1,tr.tickerAdded=!1,tr.mouseOverRenderer=!1,tr.supportsTouchEvents="ontouchstart"in window,tr.supportsPointerEvents=!!window.PointerEvent,tr.onPointerUp=tr.onPointerUp.bind(tr),tr.processPointerUp=tr.processPointerUp.bind(tr),tr.onPointerCancel=tr.onPointerCancel.bind(tr),tr.processPointerCancel=tr.processPointerCancel.bind(tr),tr.onPointerDown=tr.onPointerDown.bind(tr),tr.processPointerDown=tr.processPointerDown.bind(tr),tr.onPointerMove=tr.onPointerMove.bind(tr),tr.processPointerMove=tr.processPointerMove.bind(tr),tr.onPointerOut=tr.onPointerOut.bind(tr),tr.processPointerOverOut=tr.processPointerOverOut.bind(tr),tr.onPointerOver=tr.onPointerOver.bind(tr),tr.cursorStyles={default:"inherit",pointer:"pointer"},tr.currentCursorMode=null,tr.cursor=null,tr.resolution=1,tr.delayedEvents=[],tr.search=new i4,tr._tempDisplayObject=new iY,tr._useSystemTicker=void 0===q.useSystemTicker||q.useSystemTicker,tr.setTargetElement(tr.renderer.view,tr.renderer.resolution),tr}return!function(h,w){function t(){this.constructor=h}Rc(h,w),h.prototype=null===w?Object.create(w):(t.prototype=w.prototype,new t)}(n,h),Object.defineProperty(n.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(h){this._useSystemTicker=h,h?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),n.prototype.hitTest=function(h,w){return i6.target=null,i6.data.global=h,w||(w=this.lastObjectRendered),this.processInteractive(i6,w,null,!0),i6.target},n.prototype.setTargetElement=function(h,w){void 0===w&&(w=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=h,this.resolution=w,this.addEvents(),this.addTickerListener()},n.prototype.addTickerListener=function(){!this.tickerAdded&&this.interactionDOMElement&&this._useSystemTicker&&(iQ.system.add(this.tickerUpdate,this,aI.INTERACTION),this.tickerAdded=!0)},n.prototype.removeTickerListener=function(){this.tickerAdded&&(iQ.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},n.prototype.addEvents=function(){if(!(this.eventsAdded||!this.interactionDOMElement)){var h=this.interactionDOMElement.style;window.navigator.msPointerEnabled?(h.msContentZooming="none",h.msTouchAction="none"):this.supportsPointerEvents&&(h.touchAction="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0}},n.prototype.removeEvents=function(){if(!(!this.eventsAdded||!this.interactionDOMElement)){var h=this.interactionDOMElement.style;window.navigator.msPointerEnabled?(h.msContentZooming="",h.msTouchAction=""):this.supportsPointerEvents&&(h.touchAction=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1}},n.prototype.tickerUpdate=function(h){this._deltaTime+=h,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.update())},n.prototype.update=function(){if(this.interactionDOMElement){if(this._didMove){this._didMove=!1;return}for(var h in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(h)){var w=this.activeInteractionData[h];if(w.originalEvent&&"touch"!==w.pointerType){var q=this.configureInteractionEventForDOMEvent(this.eventData,w.originalEvent,w);this.processInteractive(q,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},n.prototype.setCursorMode=function(h){if(h=h||"default",this.currentCursorMode!==h){this.currentCursorMode=h;var w=this.cursorStyles[h];if(w)switch(typeof w){case"string":this.interactionDOMElement.style.cursor=w;break;case"function":w(h);break;case"object":Object.assign(this.interactionDOMElement.style,w)}else"string"!=typeof h||Object.prototype.hasOwnProperty.call(this.cursorStyles,h)||(this.interactionDOMElement.style.cursor=h)}},n.prototype.dispatchEvent=function(h,w,q){(!q.stopPropagationHint||h===q.stopsPropagatingAt)&&(q.currentTarget=h,q.type=w,h.emit(w,q),h[w]&&h[w](q))},n.prototype.delayDispatchEvent=function(h,w,q){this.delayedEvents.push({displayObject:h,eventString:w,eventData:q})},n.prototype.mapPositionToPoint=function(h,w,q){tr=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var tr,tn=1/this.resolution;h.x=(w-tr.left)*(this.interactionDOMElement.width/tr.width)*tn,h.y=(q-tr.top)*(this.interactionDOMElement.height/tr.height)*tn},n.prototype.processInteractive=function(h,w,q,tr){var tn=this.search.findHit(h,w,q,tr),ti=this.delayedEvents;if(!ti.length)return tn;h.stopPropagationHint=!1;var to=ti.length;this.delayedEvents=[];for(var ts=0;ts<to;ts++){var tu=ti[ts],tl=tu.displayObject,tc=tu.eventString,tp=tu.eventData;tp.stopsPropagatingAt===tl&&(tp.stopPropagationHint=!0),this.dispatchEvent(tl,tc,tp)}return tn},n.prototype.onPointerDown=function(h){if(!(this.supportsTouchEvents&&"touch"===h.pointerType)){var w=this.normalizeToPointerData(h);this.autoPreventDefault&&w[0].isNormalized&&(h.cancelable||!("cancelable"in h))&&h.preventDefault();for(var q=w.length,tr=0;tr<q;tr++){var tn=w[tr],ti=this.getInteractionDataForPointerId(tn),to=this.configureInteractionEventForDOMEvent(this.eventData,tn,ti);if(to.data.originalEvent=h,this.processInteractive(to,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",to),"touch"===tn.pointerType)this.emit("touchstart",to);else if("mouse"===tn.pointerType||"pen"===tn.pointerType){var ts=2===tn.button;this.emit(ts?"rightdown":"mousedown",this.eventData)}}}},n.prototype.processPointerDown=function(h,w,q){var tr=h.data,tn=h.data.identifier;if(q){if(w.trackedPointers[tn]||(w.trackedPointers[tn]=new i3(tn)),this.dispatchEvent(w,"pointerdown",h),"touch"===tr.pointerType)this.dispatchEvent(w,"touchstart",h);else if("mouse"===tr.pointerType||"pen"===tr.pointerType){var ti=2===tr.button;ti?w.trackedPointers[tn].rightDown=!0:w.trackedPointers[tn].leftDown=!0,this.dispatchEvent(w,ti?"rightdown":"mousedown",h)}}},n.prototype.onPointerComplete=function(h,w,q){for(var tr=this.normalizeToPointerData(h),tn=tr.length,ti=h.target!==this.interactionDOMElement?"outside":"",to=0;to<tn;to++){var ts=tr[to],tu=this.getInteractionDataForPointerId(ts),tl=this.configureInteractionEventForDOMEvent(this.eventData,ts,tu);if(tl.data.originalEvent=h,this.processInteractive(tl,this.lastObjectRendered,q,w||!ti),this.emit(w?"pointercancel":"pointerup"+ti,tl),"mouse"===ts.pointerType||"pen"===ts.pointerType){var tc=2===ts.button;this.emit(tc?"rightup"+ti:"mouseup"+ti,tl)}else"touch"===ts.pointerType&&(this.emit(w?"touchcancel":"touchend"+ti,tl),this.releaseInteractionDataForPointerId(ts.pointerId))}},n.prototype.onPointerCancel=function(h){this.supportsTouchEvents&&"touch"===h.pointerType||this.onPointerComplete(h,!0,this.processPointerCancel)},n.prototype.processPointerCancel=function(h,w){var q=h.data,tr=h.data.identifier;void 0!==w.trackedPointers[tr]&&(delete w.trackedPointers[tr],this.dispatchEvent(w,"pointercancel",h),"touch"===q.pointerType&&this.dispatchEvent(w,"touchcancel",h))},n.prototype.onPointerUp=function(h){this.supportsTouchEvents&&"touch"===h.pointerType||this.onPointerComplete(h,!1,this.processPointerUp)},n.prototype.processPointerUp=function(h,w,q){var tr=h.data,tn=h.data.identifier,ti=w.trackedPointers[tn],to="touch"===tr.pointerType,ts="mouse"===tr.pointerType||"pen"===tr.pointerType,tu=!1;if(ts){var tl=2===tr.button,tc=i3.FLAGS,tp=tl?tc.RIGHT_DOWN:tc.LEFT_DOWN,td=void 0!==ti&&ti.flags&tp;q?(this.dispatchEvent(w,tl?"rightup":"mouseup",h),td&&(this.dispatchEvent(w,tl?"rightclick":"click",h),tu=!0)):td&&this.dispatchEvent(w,tl?"rightupoutside":"mouseupoutside",h),ti&&(tl?ti.rightDown=!1:ti.leftDown=!1)}q?(this.dispatchEvent(w,"pointerup",h),to&&this.dispatchEvent(w,"touchend",h),ti&&((!ts||tu)&&this.dispatchEvent(w,"pointertap",h),to&&(this.dispatchEvent(w,"tap",h),ti.over=!1))):ti&&(this.dispatchEvent(w,"pointerupoutside",h),to&&this.dispatchEvent(w,"touchendoutside",h)),ti&&ti.none&&delete w.trackedPointers[tn]},n.prototype.onPointerMove=function(h){if(!(this.supportsTouchEvents&&"touch"===h.pointerType)){var w=this.normalizeToPointerData(h);("mouse"===w[0].pointerType||"pen"===w[0].pointerType)&&(this._didMove=!0,this.cursor=null);for(var q=w.length,tr=0;tr<q;tr++){var tn=w[tr],ti=this.getInteractionDataForPointerId(tn),to=this.configureInteractionEventForDOMEvent(this.eventData,tn,ti);to.data.originalEvent=h,this.processInteractive(to,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",to),"touch"===tn.pointerType&&this.emit("touchmove",to),("mouse"===tn.pointerType||"pen"===tn.pointerType)&&this.emit("mousemove",to)}"mouse"===w[0].pointerType&&this.setCursorMode(this.cursor)}},n.prototype.processPointerMove=function(h,w,q){var tr=h.data,tn="touch"===tr.pointerType,ti="mouse"===tr.pointerType||"pen"===tr.pointerType;ti&&this.processPointerOverOut(h,w,q),(!this.moveWhenInside||q)&&(this.dispatchEvent(w,"pointermove",h),tn&&this.dispatchEvent(w,"touchmove",h),ti&&this.dispatchEvent(w,"mousemove",h))},n.prototype.onPointerOut=function(h){if(!(this.supportsTouchEvents&&"touch"===h.pointerType)){var w=this.normalizeToPointerData(h)[0];"mouse"===w.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var q=this.getInteractionDataForPointerId(w),tr=this.configureInteractionEventForDOMEvent(this.eventData,w,q);tr.data.originalEvent=w,this.processInteractive(tr,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",tr),"mouse"===w.pointerType||"pen"===w.pointerType?this.emit("mouseout",tr):this.releaseInteractionDataForPointerId(q.identifier)}},n.prototype.processPointerOverOut=function(h,w,q){var tr=h.data,tn=h.data.identifier,ti="mouse"===tr.pointerType||"pen"===tr.pointerType,to=w.trackedPointers[tn];q&&!to&&(to=w.trackedPointers[tn]=new i3(tn)),void 0!==to&&(q&&this.mouseOverRenderer?(to.over||(to.over=!0,this.delayDispatchEvent(w,"pointerover",h),ti&&this.delayDispatchEvent(w,"mouseover",h)),ti&&null===this.cursor&&(this.cursor=w.cursor)):to.over&&(to.over=!1,this.dispatchEvent(w,"pointerout",this.eventData),ti&&this.dispatchEvent(w,"mouseout",h),to.none&&delete w.trackedPointers[tn]))},n.prototype.onPointerOver=function(h){var w=this.normalizeToPointerData(h)[0],q=this.getInteractionDataForPointerId(w),tr=this.configureInteractionEventForDOMEvent(this.eventData,w,q);tr.data.originalEvent=w,"mouse"===w.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",tr),("mouse"===w.pointerType||"pen"===w.pointerType)&&this.emit("mouseover",tr)},n.prototype.getInteractionDataForPointerId=function(h){var w,q=h.pointerId;return 1===q||"mouse"===h.pointerType?w=this.mouse:this.activeInteractionData[q]?w=this.activeInteractionData[q]:((w=this.interactionDataPool.pop()||new i1).identifier=q,this.activeInteractionData[q]=w),w.copyEvent(h),w},n.prototype.releaseInteractionDataForPointerId=function(h){var w=this.activeInteractionData[h];w&&(delete this.activeInteractionData[h],w.reset(),this.interactionDataPool.push(w))},n.prototype.configureInteractionEventForDOMEvent=function(h,w,q){return h.data=q,this.mapPositionToPoint(q.global,w.clientX,w.clientY),"touch"===w.pointerType&&(w.globalX=q.global.x,w.globalY=q.global.y),q.originalEvent=w,h.reset(),h},n.prototype.normalizeToPointerData=function(h){var w=[];if(this.supportsTouchEvents&&h instanceof TouchEvent)for(var q=0,tr=h.changedTouches.length;q<tr;q++){var tn=h.changedTouches[q];typeof tn.button>"u"&&(tn.button=h.touches.length?1:0),typeof tn.buttons>"u"&&(tn.buttons=h.touches.length?1:0),typeof tn.isPrimary>"u"&&(tn.isPrimary=1===h.touches.length&&"touchstart"===h.type),typeof tn.width>"u"&&(tn.width=tn.radiusX||1),typeof tn.height>"u"&&(tn.height=tn.radiusY||1),typeof tn.tiltX>"u"&&(tn.tiltX=0),typeof tn.tiltY>"u"&&(tn.tiltY=0),typeof tn.pointerType>"u"&&(tn.pointerType="touch"),typeof tn.pointerId>"u"&&(tn.pointerId=tn.identifier||0),typeof tn.pressure>"u"&&(tn.pressure=tn.force||.5),typeof tn.twist>"u"&&(tn.twist=0),typeof tn.tangentialPressure>"u"&&(tn.tangentialPressure=0),typeof tn.layerX>"u"&&(tn.layerX=tn.offsetX=tn.clientX),typeof tn.layerY>"u"&&(tn.layerY=tn.offsetY=tn.clientY),tn.isNormalized=!0,w.push(tn)}else!(h instanceof MouseEvent)||this.supportsPointerEvents&&h instanceof window.PointerEvent||(typeof h.isPrimary>"u"&&(h.isPrimary=!0),typeof h.width>"u"&&(h.width=1),typeof h.height>"u"&&(h.height=1),typeof h.tiltX>"u"&&(h.tiltX=0),typeof h.tiltY>"u"&&(h.tiltY=0),typeof h.pointerType>"u"&&(h.pointerType="mouse"),typeof h.pointerId>"u"&&(h.pointerId=1),typeof h.pressure>"u"&&(h.pressure=.5),typeof h.twist>"u"&&(h.twist=0),typeof h.tangentialPressure>"u"&&(h.tangentialPressure=0),h.isNormalized=!0),w.push(h);return w},n.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},n}(em),i7=function(){function e(h){this.items=[],this._name=h,this._aliasCount=0}return e.prototype.emit=function(h,w,q,tr,tn,ti,to,ts){if(arguments.length>8)throw Error("max arguments reached");var tu=this.name,tl=this.items;this._aliasCount++;for(var tc=0,tp=tl.length;tc<tp;tc++)tl[tc][tu](h,w,q,tr,tn,ti,to,ts);return tl===this.items&&this._aliasCount--,this},e.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},e.prototype.add=function(h){return h[this._name]&&(this.ensureNonAliasedItems(),this.remove(h),this.items.push(h)),this},e.prototype.remove=function(h){var w=this.items.indexOf(h);return -1!==w&&(this.ensureNonAliasedItems(),this.items.splice(w,1)),this},e.prototype.contains=function(h){return -1!==this.items.indexOf(h)},e.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},e.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(e.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),e}();Object.defineProperties(i7.prototype,{dispatch:{value:i7.prototype.emit},run:{value:i7.prototype.emit}}),/*!
 * @pixi/core - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */ed.PREFER_ENV=ep.any?n5.WEBGL:n5.WEBGL2,ed.STRICT_TEXTURE_CACHE=!1;var i9=[];function lf(h,w){if(!h)return null;var q="";if("string"==typeof h){var tr=/\.(\w{3,4})(?:$|\?|#)/i.exec(h);tr&&(q=tr[1].toLowerCase())}for(var tn=i9.length-1;tn>=0;--tn){var ti=i9[tn];if(ti.test&&ti.test(h,q))return new ti(h,w)}throw Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Nc=function(h,w){return(Nc=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,w){h.__proto__=w}||function(h,w){for(var q in w)w.hasOwnProperty(q)&&(h[q]=w[q])})(h,w)};function Je(h,w){function t(){this.constructor=h}Nc(h,w),h.prototype=null===w?Object.create(w):(t.prototype=w.prototype,new t)}var on=function(){function e(h,w){void 0===h&&(h=0),void 0===w&&(w=0),this._width=h,this._height=w,this.destroyed=!1,this.internal=!1,this.onResize=new i7("setRealSize"),this.onUpdate=new i7("update"),this.onError=new i7("onError")}return e.prototype.bind=function(h){this.onResize.add(h),this.onUpdate.add(h),this.onError.add(h),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},e.prototype.unbind=function(h){this.onResize.remove(h),this.onUpdate.remove(h),this.onError.remove(h)},e.prototype.resize=function(h,w){(h!==this._width||w!==this._height)&&(this._width=h,this._height=w,this.onResize.emit(h,w))},Object.defineProperty(e.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),e.prototype.update=function(){this.destroyed||this.onUpdate.emit()},e.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),e.prototype.style=function(h,w,q){return!1},e.prototype.dispose=function(){},e.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},e.test=function(h,w){return!1},e}(),oi=function(h){function n(w,q){var tr=this,tn=q||{},ti=tn.width,to=tn.height;if(!ti||!to)throw Error("BufferResource width or height invalid");return(tr=h.call(this,ti,to)||this).data=w,tr}return Je(n,h),n.prototype.upload=function(h,w,q){var tr=h.gl;return tr.pixelStorei(tr.UNPACK_PREMULTIPLY_ALPHA_WEBGL,w.alphaMode===id.UNPACK),q.width===w.width&&q.height===w.height?tr.texSubImage2D(w.target,0,0,0,w.width,w.height,w.format,w.type,this.data):(q.width=w.width,q.height=w.height,tr.texImage2D(w.target,0,q.internalFormat,w.width,w.height,0,w.format,q.type,this.data)),!0},n.prototype.dispose=function(){this.data=null},n.test=function(h){return h instanceof Float32Array||h instanceof Uint8Array||h instanceof Uint32Array},n}(on),oo={scaleMode:il.NEAREST,format:io.RGBA,alphaMode:id.NPM},oa=function(h){function n(w,q){void 0===w&&(w=null),void 0===q&&(q=null);var tr=h.call(this)||this,tn=(q=q||{}).alphaMode,ti=q.mipmap,to=q.anisotropicLevel,ts=q.scaleMode,tu=q.width,tl=q.height,tc=q.wrapMode,tp=q.format,td=q.type,tm=q.target,ty=q.resolution,tv=q.resourceOptions;return!w||w instanceof on||((w=lf(w,tv)).internal=!0),tr.width=tu||0,tr.height=tl||0,tr.resolution=ty||ed.RESOLUTION,tr.mipmap=void 0!==ti?ti:ed.MIPMAP_TEXTURES,tr.anisotropicLevel=void 0!==to?to:ed.ANISOTROPIC_LEVEL,tr.wrapMode=tc||ed.WRAP_MODE,tr.scaleMode=void 0!==ts?ts:ed.SCALE_MODE,tr.format=tp||io.RGBA,tr.type=td||iu.UNSIGNED_BYTE,tr.target=tm||is.TEXTURE_2D,tr.alphaMode=void 0!==tn?tn:id.UNPACK,void 0!==q.premultiplyAlpha&&(tr.premultiplyAlpha=q.premultiplyAlpha),tr.uid=Xi(),tr.touched=0,tr.isPowerOfTwo=!1,tr._refreshPOT(),tr._glTextures={},tr.dirtyId=0,tr.dirtyStyleId=0,tr.cacheId=null,tr.valid=tu>0&&tl>0,tr.textureCacheIds=[],tr.destroyed=!1,tr.resource=null,tr._batchEnabled=0,tr._batchLocation=0,tr.parentTextureArray=null,tr.setResource(w),tr}return Je(n,h),Object.defineProperty(n.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),n.prototype.setStyle=function(h,w){var q;return void 0!==h&&h!==this.scaleMode&&(this.scaleMode=h,q=!0),void 0!==w&&w!==this.mipmap&&(this.mipmap=w,q=!0),q&&this.dirtyStyleId++,this},n.prototype.setSize=function(h,w,q){return this.resolution=q||this.resolution,this.width=h,this.height=w,this._refreshPOT(),this.update(),this},n.prototype.setRealSize=function(h,w,q){return this.resolution=q||this.resolution,this.width=h/this.resolution,this.height=w/this.resolution,this._refreshPOT(),this.update(),this},n.prototype._refreshPOT=function(){this.isPowerOfTwo=Ec(this.realWidth)&&Ec(this.realHeight)},n.prototype.setResolution=function(h){var w=this.resolution;return w===h||(this.resolution=h,this.valid&&(this.width=this.width*w/h,this.height=this.height*w/h,this.emit("update",this)),this._refreshPOT()),this},n.prototype.setResource=function(h){if(this.resource===h)return this;if(this.resource)throw Error("Resource can be set only once");return h.bind(this),this.resource=h,this},n.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},n.prototype.onError=function(h){this.emit("error",this,h)},n.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete nF[this.cacheId],delete nD[this.cacheId],this.cacheId=null),this.dispose(),n.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},n.prototype.dispose=function(){this.emit("dispose",this)},n.prototype.castToBaseTexture=function(){return this},n.from=function(h,w,q){void 0===q&&(q=ed.STRICT_TEXTURE_CACHE);var tr="string"==typeof h,tn=null;tr?tn=h:(h._pixiId||(h._pixiId="pixiid_"+Xi()),tn=h._pixiId);var ti=nF[tn];if(tr&&q&&!ti)throw Error('The cacheId "'+tn+'" does not exist in BaseTextureCache.');return ti||((ti=new n(h,w)).cacheId=tn,n.addToCache(ti,tn)),ti},n.fromBuffer=function(h,w,q,tr){h=h||new Float32Array(w*q*4);var tn=new oi(h,{width:w,height:q}),ti=h instanceof Float32Array?iu.FLOAT:iu.UNSIGNED_BYTE;return new n(tn,Object.assign(oo,tr||{width:w,height:q,type:ti}))},n.addToCache=function(h,w){w&&(-1===h.textureCacheIds.indexOf(w)&&h.textureCacheIds.push(w),nF[w]&&console.warn("BaseTexture added to the cache with an id ["+w+"] that already had an entry"),nF[w]=h)},n.removeFromCache=function(h){if("string"==typeof h){var w=nF[h];if(w){var q=w.textureCacheIds.indexOf(h);return q>-1&&w.textureCacheIds.splice(q,1),delete nF[h],w}}else if(h&&h.textureCacheIds){for(var tr=0;tr<h.textureCacheIds.length;++tr)delete nF[h.textureCacheIds[tr]];return h.textureCacheIds.length=0,h}return null},n._globalBatch=0,n}(em),ou=function(h){function n(w,q){var tr=this,tn=q||{},ti=tn.width,to=tn.height;(tr=h.call(this,ti,to)||this).items=[],tr.itemDirtyIds=[];for(var ts=0;ts<w;ts++){var tu=new oa;tr.items.push(tu),tr.itemDirtyIds.push(-2)}return tr.length=w,tr._load=null,tr.baseTexture=null,tr}return Je(n,h),n.prototype.initFromArray=function(h,w){for(var q=0;q<this.length;q++)h[q]&&(h[q].castToBaseTexture?this.addBaseTextureAt(h[q].castToBaseTexture(),q):h[q]instanceof on?this.addResourceAt(h[q],q):this.addResourceAt(lf(h[q],w),q))},n.prototype.dispose=function(){for(var h=0,w=this.length;h<w;h++)this.items[h].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},n.prototype.addResourceAt=function(h,w){if(!this.items[w])throw Error("Index "+w+" is out of bounds");return h.valid&&!this.valid&&this.resize(h.width,h.height),this.items[w].setResource(h),this},n.prototype.bind=function(w){if(null!==this.baseTexture)throw Error("Only one base texture per TextureArray is allowed");h.prototype.bind.call(this,w);for(var q=0;q<this.length;q++)this.items[q].parentTextureArray=w,this.items[q].on("update",w.update,w)},n.prototype.unbind=function(w){h.prototype.unbind.call(this,w);for(var q=0;q<this.length;q++)this.items[q].parentTextureArray=null,this.items[q].off("update",w.update,w)},n.prototype.load=function(){var h=this;if(this._load)return this._load;var w=this.items.map(function(h){return h.resource}).filter(function(h){return h}).map(function(h){return h.load()});return this._load=Promise.all(w).then(function(){var w=h.items[0],q=w.realWidth,tr=w.realHeight;return h.resize(q,tr),Promise.resolve(h)}),this._load},n}(on),ol=function(h){function n(w,q){var tr,tn,ti=this,to=q||{},ts=to.width,tu=to.height;return Array.isArray(w)?(tr=w,tn=w.length):tn=w,ti=h.call(this,tn,{width:ts,height:tu})||this,tr&&ti.initFromArray(tr,q),ti}return Je(n,h),n.prototype.addBaseTextureAt=function(h,w){if(h.resource)this.addResourceAt(h.resource,w);else throw Error("ArrayResource does not support RenderTexture");return this},n.prototype.bind=function(w){h.prototype.bind.call(this,w),w.target=is.TEXTURE_2D_ARRAY},n.prototype.upload=function(h,w,q){var tr=this.length,tn=this.itemDirtyIds,ti=this.items,to=h.gl;q.dirtyId<0&&to.texImage3D(to.TEXTURE_2D_ARRAY,0,w.format,this._width,this._height,tr,0,w.format,w.type,null);for(var ts=0;ts<tr;ts++){var tu=ti[ts];tn[ts]<tu.dirtyId&&(tn[ts]=tu.dirtyId,tu.valid&&to.texSubImage3D(to.TEXTURE_2D_ARRAY,0,0,0,ts,tu.resource.width,tu.resource.height,1,w.format,w.type,tu.resource.source))}return!0},n}(ou),oc=function(h){function n(w){var q=this,tr=w.naturalWidth||w.videoWidth||w.width,tn=w.naturalHeight||w.videoHeight||w.height;return(q=h.call(this,tr,tn)||this).source=w,q.noSubImage=!1,q}return Je(n,h),n.crossOrigin=function(h,w,q){void 0===q&&0!==w.indexOf("data:")?h.crossOrigin=Uv(w):!1!==q&&(h.crossOrigin="string"==typeof q?q:"anonymous")},n.prototype.upload=function(h,w,q,tr){var tn=h.gl,ti=w.realWidth,to=w.realHeight;return tr=tr||this.source,tn.pixelStorei(tn.UNPACK_PREMULTIPLY_ALPHA_WEBGL,w.alphaMode===id.UNPACK),this.noSubImage||w.target!==tn.TEXTURE_2D||q.width!==ti||q.height!==to?(q.width=ti,q.height=to,tn.texImage2D(w.target,0,w.format,w.format,w.type,tr)):tn.texSubImage2D(tn.TEXTURE_2D,0,0,0,w.format,w.type,tr),!0},n.prototype.update=function(){if(!this.destroyed){var w=this.source,q=w.naturalWidth||w.videoWidth||w.width,tr=w.naturalHeight||w.videoHeight||w.height;this.resize(q,tr),h.prototype.update.call(this)}},n.prototype.dispose=function(){this.source=null},n}(on),op=function(h){function n(){return null!==h&&h.apply(this,arguments)||this}return Je(n,h),n.test=function(h){var w=window.OffscreenCanvas;return!!w&&h instanceof w||h instanceof HTMLCanvasElement},n}(oc),od=function(h){function n(w,q){var tr=this,tn=q||{},ti=tn.width,to=tn.height,ts=tn.autoLoad,tu=tn.linkBaseTexture;if(w&&w.length!==n.SIDES)throw Error("Invalid length. Got "+w.length+", expected 6");tr=h.call(this,6,{width:ti,height:to})||this;for(var tl=0;tl<n.SIDES;tl++)tr.items[tl].target=is.TEXTURE_CUBE_MAP_POSITIVE_X+tl;return tr.linkBaseTexture=!1!==tu,w&&tr.initFromArray(w,q),!1!==ts&&tr.load(),tr}return Je(n,h),n.prototype.bind=function(w){h.prototype.bind.call(this,w),w.target=is.TEXTURE_CUBE_MAP},n.prototype.addBaseTextureAt=function(h,w,q){if(void 0===q&&(q=this.linkBaseTexture),!this.items[w])throw Error("Index "+w+" is out of bounds");if(!this.linkBaseTexture||h.parentTextureArray||Object.keys(h._glTextures).length>0){if(h.resource)this.addResourceAt(h.resource,w);else throw Error("CubeResource does not support copying of renderTexture.")}else h.target=is.TEXTURE_CUBE_MAP_POSITIVE_X+w,h.parentTextureArray=this.baseTexture,this.items[w]=h;return h.valid&&!this.valid&&this.resize(h.realWidth,h.realHeight),this.items[w]=h,this},n.prototype.upload=function(h,w,q){for(var tr=this.itemDirtyIds,tn=0;tn<n.SIDES;tn++){var ti=this.items[tn];tr[tn]<ti.dirtyId&&(ti.valid&&ti.resource?(ti.resource.upload(h,ti,q),tr[tn]=ti.dirtyId):tr[tn]<-1&&(h.gl.texImage2D(ti.target,0,q.internalFormat,w.realWidth,w.realHeight,0,w.format,q.type,null),tr[tn]=-1))}return!0},n.test=function(h){return Array.isArray(h)&&h.length===n.SIDES},n.SIDES=6,n}(ou),o_=function(h){function n(w,q){var tr=this;if(q=q||{},!(w instanceof HTMLImageElement)){var tn=new Image;oc.crossOrigin(tn,w,q.crossorigin),tn.src=w,w=tn}return tr=h.call(this,w)||this,!w.complete&&tr._width&&tr._height&&(tr._width=0,tr._height=0),tr.url=w.src,tr._process=null,tr.preserveBitmap=!1,tr.createBitmap=(void 0!==q.createBitmap?q.createBitmap:ed.CREATE_IMAGE_BITMAP)&&!!window.createImageBitmap,tr.alphaMode="number"==typeof q.alphaMode?q.alphaMode:null,void 0!==q.premultiplyAlpha&&(tr.premultiplyAlpha=q.premultiplyAlpha),tr.bitmap=null,tr._load=null,!1!==q.autoLoad&&tr.load(),tr}return Je(n,h),n.prototype.load=function(h){var w=this;return this._load||(void 0!==h&&(this.createBitmap=h),this._load=new Promise(function(h,q){var tr=w.source;w.url=tr.src;var s=function(){w.destroyed||(tr.onload=null,tr.onerror=null,w.resize(tr.width,tr.height),w._load=null,w.createBitmap?h(w.process()):h(w))};tr.complete&&tr.src?s():(tr.onload=s,tr.onerror=function(h){q(h),w.onError.emit(h)})})),this._load},n.prototype.process=function(){var h=this,w=this.source;return null!==this._process?this._process:null===this.bitmap&&window.createImageBitmap?(this._process=window.createImageBitmap(w,0,0,w.width,w.height,{premultiplyAlpha:this.alphaMode===id.UNPACK?"premultiply":"none"}).then(function(w){return h.destroyed?Promise.reject():(h.bitmap=w,h.update(),h._process=null,Promise.resolve(h))}),this._process):Promise.resolve(this)},n.prototype.upload=function(w,q,tr){if("number"==typeof this.alphaMode&&(q.alphaMode=this.alphaMode),!this.createBitmap)return h.prototype.upload.call(this,w,q,tr);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(h.prototype.upload.call(this,w,q,tr,this.bitmap),!this.preserveBitmap){var tn=!0,ti=q._glTextures;for(var to in ti){var ts=ti[to];if(ts!==tr&&ts.dirtyId!==q.dirtyId){tn=!1;break}}tn&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},n.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,h.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},n.test=function(h){return"string"==typeof h||h instanceof HTMLImageElement},n}(oc),og=function(h){function n(w,q){var tr=this;return q=q||{},(tr=h.call(this,document.createElement("canvas"))||this)._width=0,tr._height=0,tr.svg=w,tr.scale=q.scale||1,tr._overrideWidth=q.width,tr._overrideHeight=q.height,tr._resolve=null,tr._crossorigin=q.crossorigin,tr._load=null,!1!==q.autoLoad&&tr.load(),tr}return Je(n,h),n.prototype.load=function(){var h=this;return this._load||(this._load=new Promise(function(w){if(h._resolve=function(){h.resize(h.source.width,h.source.height),w(h)},/^\<svg/.test(h.svg.trim())){if(!btoa)throw Error("Your browser doesn't support base64 conversions.");h.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(h.svg)))}h._loadSvg()})),this._load},n.prototype._loadSvg=function(){var h=this,w=new Image;oc.crossOrigin(w,this.svg,this._crossorigin),w.src=this.svg,w.onerror=function(q){h._resolve&&(w.onerror=null,h.onError.emit(q))},w.onload=function(){if(h._resolve){var q=w.width,tr=w.height;if(!q||!tr)throw Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var tn=q*h.scale,ti=tr*h.scale;(h._overrideWidth||h._overrideHeight)&&(tn=h._overrideWidth||h._overrideHeight/tr*q,ti=h._overrideHeight||h._overrideWidth/q*tr),tn=Math.round(tn),ti=Math.round(ti);var to=h.source;to.width=tn,to.height=ti,to._pixiId="canvas_"+Xi(),to.getContext("2d").drawImage(w,0,0,q,tr,0,0,tn,ti),h._resolve(),h._resolve=null}}},n.getSize=function(h){var w=n.SVG_SIZE.exec(h),q={};return w&&(q[w[1]]=Math.round(parseFloat(w[3])),q[w[5]]=Math.round(parseFloat(w[7]))),q},n.prototype.dispose=function(){h.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},n.test=function(h,w){return"svg"===w||"string"==typeof h&&0===h.indexOf("data:image/svg+xml;base64")||"string"==typeof h&&0===h.indexOf("<svg")},n.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,n}(oc),oy=function(h){function n(w,q){var tr=this;if(q=q||{},!(w instanceof HTMLVideoElement)){var tn=document.createElement("video");tn.setAttribute("preload","auto"),tn.setAttribute("webkit-playsinline",""),tn.setAttribute("playsinline",""),"string"==typeof w&&(w=[w]);var ti=w[0].src||w[0];oc.crossOrigin(tn,ti,q.crossorigin);for(var to=0;to<w.length;++to){var ts=document.createElement("source"),tu=w[to],tl=tu.src,tc=tu.mime,tp=(tl=tl||w[to]).split("?").shift().toLowerCase(),td=tp.substr(tp.lastIndexOf(".")+1);tc=tc||n.MIME_TYPES[td]||"video/"+td,ts.src=tl,ts.type=tc,tn.appendChild(ts)}w=tn}return(tr=h.call(this,w)||this).noSubImage=!0,tr._autoUpdate=!0,tr._isConnectedToTicker=!1,tr._updateFPS=q.updateFPS||0,tr._msToNextUpdate=0,tr.autoPlay=!1!==q.autoPlay,tr._load=null,tr._resolve=null,tr._onCanPlay=tr._onCanPlay.bind(tr),tr._onError=tr._onError.bind(tr),!1!==q.autoLoad&&tr.load(),tr}return Je(n,h),n.prototype.update=function(w){if(!this.destroyed){var q=iQ.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-q),(!this._updateFPS||this._msToNextUpdate<=0)&&(h.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},n.prototype.load=function(){var h=this;if(this._load)return this._load;var w=this.source;return(w.readyState===w.HAVE_ENOUGH_DATA||w.readyState===w.HAVE_FUTURE_DATA)&&w.width&&w.height&&(w.complete=!0),w.addEventListener("play",this._onPlayStart.bind(this)),w.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(w.addEventListener("canplay",this._onCanPlay),w.addEventListener("canplaythrough",this._onCanPlay),w.addEventListener("error",this._onError,!0)),this._load=new Promise(function(q){h.valid?q(h):(h._resolve=q,w.load())}),this._load},n.prototype._onError=function(h){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(h)},n.prototype._isSourcePlaying=function(){var h=this.source;return h.currentTime>0&&!1===h.paused&&!1===h.ended&&h.readyState>2},n.prototype._isSourceReady=function(){var h=this.source;return 3===h.readyState||4===h.readyState},n.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(iQ.shared.add(this.update,this),this._isConnectedToTicker=!0)},n.prototype._onPlayStop=function(){this._isConnectedToTicker&&(iQ.shared.remove(this.update,this),this._isConnectedToTicker=!1)},n.prototype._onCanPlay=function(){var h=this.source;h.removeEventListener("canplay",this._onCanPlay),h.removeEventListener("canplaythrough",this._onCanPlay);var w=this.valid;this.resize(h.videoWidth,h.videoHeight),!w&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&h.play()},n.prototype.dispose=function(){this._isConnectedToTicker&&iQ.shared.remove(this.update,this);var w=this.source;w&&(w.removeEventListener("error",this._onError,!0),w.pause(),w.src="",w.load()),h.prototype.dispose.call(this)},Object.defineProperty(n.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(h){h!==this._autoUpdate&&(this._autoUpdate=h,!this._autoUpdate&&this._isConnectedToTicker?(iQ.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(iQ.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(h){h!==this._updateFPS&&(this._updateFPS=h)},enumerable:!1,configurable:!0}),n.test=function(h,w){return h instanceof HTMLVideoElement||n.TYPES.indexOf(w)>-1},n.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],n.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},n}(oc),ob=function(h){function n(){return null!==h&&h.apply(this,arguments)||this}return Je(n,h),n.test=function(h){return!!window.createImageBitmap&&h instanceof ImageBitmap},n}(oc);i9.push(o_,ob,op,oy,og,oi,od,ol);var ox=function(){function e(h){this.renderer=h}return e.prototype.destroy=function(){this.renderer=null},e}(),oT=function(h){function n(){return null!==h&&h.apply(this,arguments)||this}return Je(n,h),n.prototype.upload=function(h,w,q){var tr=h.gl;return tr.pixelStorei(tr.UNPACK_PREMULTIPLY_ALPHA_WEBGL,w.alphaMode===id.UNPACK),q.width===w.width&&q.height===w.height?tr.texSubImage2D(w.target,0,0,0,w.width,w.height,w.format,w.type,this.data):(q.width=w.width,q.height=w.height,tr.texImage2D(w.target,0,1===h.context.webGLVersion?tr.DEPTH_COMPONENT:tr.DEPTH_COMPONENT16,w.width,w.height,0,w.format,w.type,this.data)),!0},n}(oi),oA=function(){function e(h,w){this.width=Math.ceil(h||100),this.height=Math.ceil(w||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new i7("disposeFramebuffer"),this.multisample=iv.NONE}return Object.defineProperty(e.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),e.prototype.addColorTexture=function(h,w){return void 0===h&&(h=0),this.colorTextures[h]=w||new oa(null,{scaleMode:il.NEAREST,resolution:1,mipmap:ip.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},e.prototype.addDepthTexture=function(h){return this.depthTexture=h||new oa(new oT(null,{width:this.width,height:this.height}),{scaleMode:il.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:ip.OFF,format:io.DEPTH_COMPONENT,type:iu.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},e.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},e.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},e.prototype.resize=function(h,w){if(h=Math.ceil(h),w=Math.ceil(w),!(h===this.width&&w===this.height)){this.width=h,this.height=w,this.dirtyId++,this.dirtySize++;for(var q=0;q<this.colorTextures.length;q++){var tr=this.colorTextures[q],tn=tr.resolution;tr.setSize(h/tn,w/tn)}if(this.depthTexture){var tn=this.depthTexture.resolution;this.depthTexture.setSize(h/tn,w/tn)}}},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},e}(),oO=function(h){function n(w){var q=this;if("number"==typeof w){var tr=arguments[0],tn=arguments[1],ti=arguments[2],to=arguments[3];w={width:tr,height:tn,scaleMode:ti,resolution:to}}q=h.call(this,null,w)||this;var ts=w||{},tu=ts.width,tl=ts.height;return q.mipmap=0,q.width=Math.ceil(tu)||100,q.height=Math.ceil(tl)||100,q.valid=!0,q.clearColor=[0,0,0,0],q.framebuffer=new oA(q.width*q.resolution,q.height*q.resolution).addColorTexture(0,q),q.maskStack=[],q.filterStack=[{}],q}return Je(n,h),n.prototype.resize=function(h,w){h=Math.ceil(h),w=Math.ceil(w),this.framebuffer.resize(h*this.resolution,w*this.resolution)},n.prototype.dispose=function(){this.framebuffer.dispose(),h.prototype.dispose.call(this)},n.prototype.destroy=function(){h.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},n}(oa),ow=function(){function e(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return e.prototype.set=function(h,w,q){var tr=w.width,tn=w.height;if(q){var ti=h.width/2/tr,to=h.height/2/tn,ts=h.x/tr+ti,tu=h.y/tn+to;q=iX.add(q,iX.NW),this.x0=ts+ti*iX.uX(q),this.y0=tu+to*iX.uY(q),q=iX.add(q,2),this.x1=ts+ti*iX.uX(q),this.y1=tu+to*iX.uY(q),q=iX.add(q,2),this.x2=ts+ti*iX.uX(q),this.y2=tu+to*iX.uY(q),q=iX.add(q,2),this.x3=ts+ti*iX.uX(q),this.y3=tu+to*iX.uY(q)}else this.x0=h.x/tr,this.y0=h.y/tn,this.x1=(h.x+h.width)/tr,this.y1=h.y/tn,this.x2=(h.x+h.width)/tr,this.y2=(h.y+h.height)/tn,this.x3=h.x/tr,this.y3=(h.y+h.height)/tn;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},e}(),oL=new ow,oS=function(h){function n(w,q,tr,tn,ti,to){var ts=h.call(this)||this;if(ts.noFrame=!1,q||(ts.noFrame=!0,q=new iS(0,0,1,1)),w instanceof n&&(w=w.baseTexture),ts.baseTexture=w,ts._frame=q,ts.trim=tn,ts.valid=!1,ts._uvs=oL,ts.uvMatrix=null,ts.orig=tr||q,ts._rotate=Number(ti||0),!0===ti)ts._rotate=2;else if(ts._rotate%2!=0)throw Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return ts.defaultAnchor=to?new iM(to.x,to.y):new iM(0,0),ts._updateID=0,ts.textureCacheIds=[],w.valid?ts.noFrame?w.valid&&ts.onBaseTextureUpdated(w):ts.frame=q:w.once("loaded",ts.onBaseTextureUpdated,ts),ts.noFrame&&w.on("update",ts.onBaseTextureUpdated,ts),ts}return Je(n,h),n.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},n.prototype.onBaseTextureUpdated=function(h){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=h.width,this._frame.height=h.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},n.prototype.destroy=function(h){if(this.baseTexture){if(h){var w=this.baseTexture;w&&w.url&&nD[w.url]&&n.removeFromCache(w.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,n.removeFromCache(this),this.textureCacheIds=null},n.prototype.clone=function(){return new n(this.baseTexture,this.frame.clone(),this.orig.clone(),this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor)},n.prototype.updateUvs=function(){this._uvs===oL&&(this._uvs=new ow),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},n.from=function(h,w,q){void 0===w&&(w={}),void 0===q&&(q=ed.STRICT_TEXTURE_CACHE);var tr="string"==typeof h,tn=null;tr?tn=h:(h._pixiId||(h._pixiId="pixiid_"+Xi()),tn=h._pixiId);var ti=nD[tn];if(tr&&q&&!ti)throw Error('The cacheId "'+tn+'" does not exist in TextureCache.');return ti||(w.resolution||(w.resolution=Ca(h)),(ti=new n(new oa(h,w))).baseTexture.cacheId=tn,oa.addToCache(ti.baseTexture,tn),n.addToCache(ti,tn)),ti},n.fromURL=function(h,w){var q=Object.assign({autoLoad:!1},null==w?void 0:w.resourceOptions),tr=n.from(h,Object.assign({resourceOptions:q},w),!1),tn=tr.baseTexture.resource;return tr.baseTexture.valid?Promise.resolve(tr):tn.load().then(function(){return Promise.resolve(tr)})},n.fromBuffer=function(h,w,q,tr){return new n(oa.fromBuffer(h,w,q,tr))},n.fromLoader=function(h,w,q){var tr=new o_(h);tr.url=w;var tn=new oa(tr,{scaleMode:ed.SCALE_MODE,resolution:Ca(w)}),ti=new n(tn);return q||(q=w),oa.addToCache(ti.baseTexture,q),n.addToCache(ti,q),q!==w&&(oa.addToCache(ti.baseTexture,w),n.addToCache(ti,w)),ti},n.addToCache=function(h,w){w&&(-1===h.textureCacheIds.indexOf(w)&&h.textureCacheIds.push(w),nD[w]&&console.warn("Texture added to the cache with an id ["+w+"] that already had an entry"),nD[w]=h)},n.removeFromCache=function(h){if("string"==typeof h){var w=nD[h];if(w){var q=w.textureCacheIds.indexOf(h);return q>-1&&w.textureCacheIds.splice(q,1),delete nD[h],w}}else if(h&&h.textureCacheIds){for(var tr=0;tr<h.textureCacheIds.length;++tr)nD[h.textureCacheIds[tr]]===h&&delete nD[h.textureCacheIds[tr]];return h.textureCacheIds.length=0,h}return null},Object.defineProperty(n.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"frame",{get:function(){return this._frame},set:function(h){this._frame=h,this.noFrame=!1;var w=h.x,q=h.y,tr=h.width,tn=h.height,ti=w+tr>this.baseTexture.width,to=q+tn>this.baseTexture.height;if(ti||to)throw Error("Texture Error: frame does not fit inside the base Texture dimensions: "+("X: "+w+" + "+tr+" = "+(w+tr)+" > "+this.baseTexture.width+" ")+(ti&&to?"and":"or")+" "+("Y: "+q+" + "+tn+" = "+(q+tn))+" > "+this.baseTexture.height);this.valid=tr&&tn&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=h),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rotate",{get:function(){return this._rotate},set:function(h){this._rotate=h,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),n.prototype.castToBaseTexture=function(){return this.baseTexture},n}(em);function Pu(h){h.destroy=function(){},h.on=function(){},h.once=function(){},h.emit=function(){}}oS.EMPTY=new oS(new oa),Pu(oS.EMPTY),Pu(oS.EMPTY.baseTexture),oS.WHITE=((aO=document.createElement("canvas")).width=16,aO.height=16,(aw=aO.getContext("2d")).fillStyle="white",aw.fillRect(0,0,16,16),new oS(new oa(new op(aO)))),Pu(oS.WHITE),Pu(oS.WHITE.baseTexture);var oI=function(h){function n(w,q){var tr=this,tn=null;if(!(w instanceof oO)){var ti=arguments[1],to=arguments[2],ts=arguments[3],tu=arguments[4];console.warn("Please use RenderTexture.create("+ti+", "+to+") instead of the ctor directly."),tn=arguments[0],q=null,w=new oO({width:ti,height:to,scaleMode:ts,resolution:tu})}return(tr=h.call(this,w,q)||this).legacyRenderer=tn,tr.valid=!0,tr.filterFrame=null,tr.filterPoolKey=null,tr.updateUvs(),tr}return Je(n,h),Object.defineProperty(n.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),n.prototype.resize=function(h,w,q){void 0===q&&(q=!0),h=Math.ceil(h),w=Math.ceil(w),this.valid=h>0&&w>0,this._frame.width=this.orig.width=h,this._frame.height=this.orig.height=w,q&&this.baseTexture.resize(h,w),this.updateUvs()},n.prototype.setResolution=function(h){var w=this.baseTexture;w.resolution!==h&&(w.setResolution(h),this.resize(w.width,w.height,!1))},n.create=function(h){return"number"==typeof h&&(h={width:h,height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),new n(new oO(h))},n}(oS),oP=function(){function e(h){this.texturePool={},this.textureOptions=h||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return e.prototype.createTexture=function(h,w){var q=new oO(Object.assign({width:h,height:w,resolution:1},this.textureOptions));return new oI(q)},e.prototype.getOptimalTexture=function(h,w,q){void 0===q&&(q=1);var tr=e.SCREEN_KEY;h*=q,w*=q,this.enableFullScreen&&h===this._pixelsWidth&&w===this._pixelsHeight||(tr=(65535&(h=ka(h)))<<16|65535&(w=ka(w))),this.texturePool[tr]||(this.texturePool[tr]=[]);var tn=this.texturePool[tr].pop();return tn||(tn=this.createTexture(h,w)),tn.filterPoolKey=tr,tn.setResolution(q),tn},e.prototype.getFilterTexture=function(h,w){var q=this.getOptimalTexture(h.width,h.height,w||h.resolution);return q.filterFrame=h.filterFrame,q},e.prototype.returnTexture=function(h){var w=h.filterPoolKey;h.filterFrame=null,this.texturePool[w].push(h)},e.prototype.returnFilterTexture=function(h){this.returnTexture(h)},e.prototype.clear=function(h){if(h=!1!==h)for(var w in this.texturePool){var q=this.texturePool[w];if(q)for(var tr=0;tr<q.length;tr++)q[tr].destroy(!0)}this.texturePool={}},e.prototype.setScreenSize=function(h){if(!(h.width===this._pixelsWidth&&h.height===this._pixelsHeight)){var w=e.SCREEN_KEY,q=this.texturePool[w];if(this.enableFullScreen=h.width>0&&h.height>0,q)for(var tr=0;tr<q.length;tr++)q[tr].destroy(!0);this.texturePool[w]=[],this._pixelsWidth=h.width,this._pixelsHeight=h.height}},e.SCREEN_KEY="screen",e}(),oR=function(){function e(h,w,q,tr,tn,ti,to){void 0===w&&(w=0),void 0===q&&(q=!1),void 0===tr&&(tr=5126),this.buffer=h,this.size=w,this.normalized=q,this.type=tr,this.stride=tn,this.start=ti,this.instance=to}return e.prototype.destroy=function(){this.buffer=null},e.from=function(h,w,q,tr,tn){return new e(h,w,q,tr,tn)},e}(),oN=0,oM=function(){function e(h,w,q){void 0===w&&(w=!0),void 0===q&&(q=!1),this.data=h||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=q,this.static=w,this.id=oN++,this.disposeRunner=new i7("disposeBuffer")}return e.prototype.update=function(h){this.data=h||this.data,this._updateID++},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroy=function(){this.dispose(),this.data=null},e.from=function(h){return h instanceof Array&&(h=new Float32Array(h)),new e(h)},e}();function tg(h){if(4===h.BYTES_PER_ELEMENT)return h instanceof Float32Array?"Float32Array":h instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===h.BYTES_PER_ELEMENT){if(h instanceof Uint16Array)return"Uint16Array"}else if(1===h.BYTES_PER_ELEMENT&&h instanceof Uint8Array)return"Uint8Array";return null}var ok={Float32Array,Uint32Array,Int32Array,Uint8Array},oU={5126:4,5123:2,5121:1},oC=0,oD={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},oF=function(){function e(h,w){void 0===h&&(h=[]),void 0===w&&(w={}),this.buffers=h,this.indexBuffer=null,this.attributes=w,this.glVertexArrayObjects={},this.id=oC++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new i7("disposeGeometry"),this.refCount=0}return e.prototype.addAttribute=function(h,w,q,tr,tn,ti,to,ts){if(void 0===q&&(q=0),void 0===tr&&(tr=!1),void 0===ts&&(ts=!1),!w)throw Error("You must pass a buffer when creating an attribute");w instanceof oM||(w instanceof Array&&(w=new Float32Array(w)),w=new oM(w));var tu=h.split("|");if(tu.length>1){for(var tl=0;tl<tu.length;tl++)this.addAttribute(tu[tl],w,q,tr,tn);return this}var tc=this.buffers.indexOf(w);return -1===tc&&(this.buffers.push(w),tc=this.buffers.length-1),this.attributes[h]=new oR(tc,q,tr,tn,ti,to,ts),this.instanced=this.instanced||ts,this},e.prototype.getAttribute=function(h){return this.attributes[h]},e.prototype.getBuffer=function(h){return this.buffers[this.getAttribute(h).buffer]},e.prototype.addIndex=function(h){return h instanceof oM||(h instanceof Array&&(h=new Uint16Array(h)),h=new oM(h)),h.index=!0,this.indexBuffer=h,-1===this.buffers.indexOf(h)&&this.buffers.push(h),this},e.prototype.getIndex=function(){return this.indexBuffer},e.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var h,w=[],q=[],tr=new oM;for(h in this.attributes){var tn=this.attributes[h],ti=this.buffers[tn.buffer];w.push(ti.data),q.push(tn.size*oU[tn.type]/4),tn.buffer=0}for(tr.data=function(h,w){for(var q=0,tr=0,tn={},ti=0;ti<h.length;ti++)tr+=w[ti],q+=h[ti].length;for(var to=new ArrayBuffer(4*q),ts=null,tu=0,ti=0;ti<h.length;ti++){var tl=w[ti],tc=h[ti],tp=tg(tc);tn[tp]||(tn[tp]=new ok[tp](to)),ts=tn[tp];for(var td=0;td<tc.length;td++)ts[(td/tl|0)*tr+tu+td%tl]=tc[td];tu+=tl}return new Float32Array(to)}(w,q),h=0;h<this.buffers.length;h++)this.buffers[h]!==this.indexBuffer&&this.buffers[h].destroy();return this.buffers=[tr],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},e.prototype.getSize=function(){for(var h in this.attributes){var w=this.attributes[h];return this.buffers[w.buffer].data.length/(w.stride/4||w.size)}return 0},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},e.prototype.clone=function(){for(var h=new e,w=0;w<this.buffers.length;w++)h.buffers[w]=new oM(this.buffers[w].data.slice(0));for(var w in this.attributes){var q=this.attributes[w];h.attributes[w]=new oR(q.buffer,q.size,q.normalized,q.type,q.stride,q.start,q.instance)}return this.indexBuffer&&(h.indexBuffer=h.buffers[this.buffers.indexOf(this.indexBuffer)],h.indexBuffer.index=!0),h},e.merge=function(h){for(var w,q=new e,tr=[],tn=[],ti=[],to=0;to<h.length;to++){w=h[to];for(var ts=0;ts<w.buffers.length;ts++)tn[ts]=tn[ts]||0,tn[ts]+=w.buffers[ts].data.length,ti[ts]=0}for(var to=0;to<w.buffers.length;to++)tr[to]=new oD[tg(w.buffers[to].data)](tn[to]),q.buffers[to]=new oM(tr[to]);for(var to=0;to<h.length;to++){w=h[to];for(var ts=0;ts<w.buffers.length;ts++)tr[ts].set(w.buffers[ts].data,ti[ts]),ti[ts]+=w.buffers[ts].data.length}if(q.attributes=w.attributes,w.indexBuffer){q.indexBuffer=q.buffers[w.buffers.indexOf(w.indexBuffer)],q.indexBuffer.index=!0;for(var tu=0,tl=0,tc=0,tp=0,to=0;to<w.buffers.length;to++)if(w.buffers[to]!==w.indexBuffer){tp=to;break}for(var to in w.attributes){var td=w.attributes[to];(0|td.buffer)===tp&&(tl+=td.size*oU[td.type]/4)}for(var to=0;to<h.length;to++){for(var tm=h[to].indexBuffer.data,ts=0;ts<tm.length;ts++)q.indexBuffer.data[ts+tc]+=tu;tu+=w.buffers[tp].data.length/tl,tc+=tm.length}}return q},e}(),oB=function(h){function n(){var w=h.call(this)||this;return w.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),w}return Je(n,h),n}(oF),oj=function(h){function n(){var w=h.call(this)||this;return w.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),w.uvs=new Float32Array([0,0,1,0,1,1,0,1]),w.vertexBuffer=new oM(w.vertices),w.uvBuffer=new oM(w.uvs),w.addAttribute("aVertexPosition",w.vertexBuffer).addAttribute("aTextureCoord",w.uvBuffer).addIndex([0,1,2,0,2,3]),w}return Je(n,h),n.prototype.map=function(h,w){var q=0,tr=0;return this.uvs[0]=q,this.uvs[1]=tr,this.uvs[2]=q+w.width/h.width,this.uvs[3]=tr,this.uvs[4]=q+w.width/h.width,this.uvs[5]=tr+w.height/h.height,this.uvs[6]=q,this.uvs[7]=tr+w.height/h.height,q=w.x,tr=w.y,this.vertices[0]=q,this.vertices[1]=tr,this.vertices[2]=q+w.width,this.vertices[3]=tr,this.vertices[4]=q+w.width,this.vertices[5]=tr+w.height,this.vertices[6]=q,this.vertices[7]=tr+w.height,this.invalidate(),this},n.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},n}(oF),oG=0,oV=function(){function e(h,w){this.uniforms=h,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=oG++,this.static=!!w}return e.prototype.update=function(){this.dirtyId++},e.prototype.add=function(h,w,q){this.uniforms[h]=new e(w,q)},e.from=function(h,w){return new e(h,w)},e}(),oX=function(){function e(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new iS,this.destinationFrame=new iS,this.filters=[]}return e.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},e}(),oH=function(h){function n(w){var q=h.call(this,w)||this;return q.defaultFilterStack=[{}],q.texturePool=new oP,q.texturePool.setScreenSize(w.view),q.statePool=[],q.quad=new oB,q.quadUv=new oj,q.tempRect=new iS,q.activeState={},q.globalUniforms=new oV({outputFrame:q.tempRect,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),q.forceClear=!1,q.useMaxPadding=!1,q}return Je(n,h),n.prototype.push=function(h,w){for(var q=this.renderer,tr=this.defaultFilterStack,tn=this.statePool.pop()||new oX,ti=w[0].resolution,to=w[0].padding,ts=w[0].autoFit,tu=w[0].legacy,tl=1;tl<w.length;tl++){var tc=w[tl];ti=Math.min(ti,tc.resolution),to=this.useMaxPadding?Math.max(to,tc.padding):to+tc.padding,ts=ts||tc.autoFit,tu=tu||tc.legacy}1===tr.length&&(this.defaultFilterStack[0].renderTexture=q.renderTexture.current),tr.push(tn),tn.resolution=ti,tn.legacy=tu,tn.target=h,tn.sourceFrame.copyFrom(h.filterArea||h.getBounds(!0)),tn.sourceFrame.pad(to),ts&&tn.sourceFrame.fit(this.renderer.renderTexture.sourceFrame),tn.sourceFrame.ceil(ti),tn.renderTexture=this.getOptimalFilterTexture(tn.sourceFrame.width,tn.sourceFrame.height,ti),tn.filters=w,tn.destinationFrame.width=tn.renderTexture.width,tn.destinationFrame.height=tn.renderTexture.height;var tp=this.tempRect;tp.width=tn.sourceFrame.width,tp.height=tn.sourceFrame.height,tn.renderTexture.filterFrame=tn.sourceFrame,q.renderTexture.bind(tn.renderTexture,tn.sourceFrame,tp),q.renderTexture.clear()},n.prototype.pop=function(){var h=this.defaultFilterStack,w=h.pop(),q=w.filters;this.activeState=w;var tr=this.globalUniforms.uniforms;tr.outputFrame=w.sourceFrame,tr.resolution=w.resolution;var tn=tr.inputSize,ti=tr.inputPixel,to=tr.inputClamp;if(tn[0]=w.destinationFrame.width,tn[1]=w.destinationFrame.height,tn[2]=1/tn[0],tn[3]=1/tn[1],ti[0]=tn[0]*w.resolution,ti[1]=tn[1]*w.resolution,ti[2]=1/ti[0],ti[3]=1/ti[1],to[0]=.5*ti[2],to[1]=.5*ti[3],to[2]=w.sourceFrame.width*tn[2]-.5*ti[2],to[3]=w.sourceFrame.height*tn[3]-.5*ti[3],w.legacy){var ts=tr.filterArea;ts[0]=w.destinationFrame.width,ts[1]=w.destinationFrame.height,ts[2]=w.sourceFrame.x,ts[3]=w.sourceFrame.y,tr.filterClamp=tr.inputClamp}this.globalUniforms.update();var tu=h[h.length-1];if(w.renderTexture.framebuffer.multisample>1&&this.renderer.framebuffer.blit(),1===q.length)q[0].apply(this,w.renderTexture,tu.renderTexture,i_.BLEND,w),this.returnFilterTexture(w.renderTexture);else{var tl=w.renderTexture,tc=this.getOptimalFilterTexture(tl.width,tl.height,w.resolution);tc.filterFrame=tl.filterFrame;var tp=0;for(tp=0;tp<q.length-1;++tp){q[tp].apply(this,tl,tc,i_.CLEAR,w);var td=tl;tl=tc,tc=td}q[tp].apply(this,tl,tu.renderTexture,i_.BLEND,w),this.returnFilterTexture(tl),this.returnFilterTexture(tc)}w.clear(),this.statePool.push(w)},n.prototype.bindAndClear=function(h,w){if(void 0===w&&(w=i_.CLEAR),h&&h.filterFrame){var q=this.tempRect;q.width=h.filterFrame.width,q.height=h.filterFrame.height,this.renderer.renderTexture.bind(h,h.filterFrame,q)}else this.renderer.renderTexture.bind(h);"boolean"==typeof w&&(w=w?i_.CLEAR:i_.BLEND,we("5.2.1","Use CLEAR_MODES when using clear applyFilter option")),(w===i_.CLEAR||w===i_.BLIT&&this.forceClear)&&this.renderer.renderTexture.clear()},n.prototype.applyFilter=function(h,w,q,tr){var tn=this.renderer;this.bindAndClear(q,tr),h.uniforms.uSampler=w,h.uniforms.filterGlobals=this.globalUniforms,tn.state.set(h.state),tn.shader.bind(h),h.legacy?(this.quadUv.map(w._frame,w.filterFrame),tn.geometry.bind(this.quadUv),tn.geometry.draw(n9.TRIANGLES)):(tn.geometry.bind(this.quad),tn.geometry.draw(n9.TRIANGLE_STRIP))},n.prototype.calculateSpriteMatrix=function(h,w){var q=this.activeState,tr=q.sourceFrame,tn=q.destinationFrame,ti=w._texture.orig,to=h.set(tn.width,0,0,tn.height,tr.x,tr.y),ts=w.worldTransform.copyTo(iU.TEMP_MATRIX);return ts.invert(),to.prepend(ts),to.scale(1/ti.width,1/ti.height),to.translate(w.anchor.x,w.anchor.y),to},n.prototype.destroy=function(){this.texturePool.clear(!1)},n.prototype.getOptimalFilterTexture=function(h,w,q){return void 0===q&&(q=1),this.texturePool.getOptimalTexture(h,w,q)},n.prototype.getFilterTexture=function(h,w){if("number"==typeof h){var q=h;h=w,w=q}h=h||this.activeState.renderTexture;var tr=this.texturePool.getOptimalTexture(h.width,h.height,w||h.resolution);return tr.filterFrame=h.filterFrame,tr},n.prototype.returnFilterTexture=function(h){this.texturePool.returnTexture(h)},n.prototype.emptyPool=function(){this.texturePool.clear(!0)},n.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},n}(ox),oz=function(){function e(h){this.renderer=h}return e.prototype.flush=function(){},e.prototype.destroy=function(){this.renderer=null},e.prototype.start=function(){},e.prototype.stop=function(){this.flush()},e.prototype.render=function(h){},e}(),oK=function(h){function n(w){var q=h.call(this,w)||this;return q.emptyRenderer=new oz(w),q.currentRenderer=q.emptyRenderer,q}return Je(n,h),n.prototype.setObjectRenderer=function(h){this.currentRenderer!==h&&(this.currentRenderer.stop(),this.currentRenderer=h,this.currentRenderer.start())},n.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},n.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},n.prototype.copyBoundTextures=function(h,w){for(var q=this.renderer.texture.boundTextures,tr=w-1;tr>=0;--tr)h[tr]=q[tr]||null,h[tr]&&(h[tr]._batchLocation=tr)},n.prototype.boundArray=function(h,w,q,tr){for(var tn=h.elements,ti=h.ids,to=h.count,ts=0,tu=0;tu<to;tu++){var tl=tn[tu],tc=tl._batchLocation;if(tc>=0&&tc<tr&&w[tc]===tl){ti[tu]=tc;continue}for(;ts<tr;){var tp=w[ts];if(tp&&tp._batchEnabled===q&&tp._batchLocation===ts){ts++;continue}ti[tu]=ts,tl._batchLocation=ts,w[ts]=tl;break}}},n}(ox),oY=0,oW=function(h){function n(w){var q=h.call(this,w)||this;return q.webGLVersion=1,q.extensions={},q.supports={uint32Indices:!1},q.handleContextLost=q.handleContextLost.bind(q),q.handleContextRestored=q.handleContextRestored.bind(q),w.view.addEventListener("webglcontextlost",q.handleContextLost,!1),w.view.addEventListener("webglcontextrestored",q.handleContextRestored,!1),q}return Je(n,h),Object.defineProperty(n.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),n.prototype.contextChange=function(h){this.gl=h,this.renderer.gl=h,this.renderer.CONTEXT_UID=oY++,h.isContextLost()&&h.getExtension("WEBGL_lose_context")&&h.getExtension("WEBGL_lose_context").restoreContext()},n.prototype.initFromContext=function(h){this.gl=h,this.validateContext(h),this.renderer.gl=h,this.renderer.CONTEXT_UID=oY++,this.renderer.runners.contextChange.emit(h)},n.prototype.initFromOptions=function(h){var w=this.createContext(this.renderer.view,h);this.initFromContext(w)},n.prototype.createContext=function(h,w){var q;if(ed.PREFER_ENV>=n5.WEBGL2&&(q=h.getContext("webgl2",w)),q)this.webGLVersion=2;else if(this.webGLVersion=1,!(q=h.getContext("webgl",w)||h.getContext("experimental-webgl",w)))throw Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=q,this.getExtensions(),this.gl},n.prototype.getExtensions=function(){var h=this.gl;1===this.webGLVersion?Object.assign(this.extensions,{drawBuffers:h.getExtension("WEBGL_draw_buffers"),depthTexture:h.getExtension("WEBGL_depth_texture"),loseContext:h.getExtension("WEBGL_lose_context"),vertexArrayObject:h.getExtension("OES_vertex_array_object")||h.getExtension("MOZ_OES_vertex_array_object")||h.getExtension("WEBKIT_OES_vertex_array_object"),anisotropicFiltering:h.getExtension("EXT_texture_filter_anisotropic"),uint32ElementIndex:h.getExtension("OES_element_index_uint"),floatTexture:h.getExtension("OES_texture_float"),floatTextureLinear:h.getExtension("OES_texture_float_linear"),textureHalfFloat:h.getExtension("OES_texture_half_float"),textureHalfFloatLinear:h.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,{anisotropicFiltering:h.getExtension("EXT_texture_filter_anisotropic"),colorBufferFloat:h.getExtension("EXT_color_buffer_float"),floatTextureLinear:h.getExtension("OES_texture_float_linear")})},n.prototype.handleContextLost=function(h){h.preventDefault()},n.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},n.prototype.destroy=function(){var h=this.renderer.view;h.removeEventListener("webglcontextlost",this.handleContextLost),h.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},n.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},n.prototype.validateContext=function(h){h.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var w="WebGL2RenderingContext"in window&&h instanceof window.WebGL2RenderingContext||!!h.getExtension("OES_element_index_uint");this.supports.uint32Indices=w,w||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},n}(ox),ag=function(h){this.framebuffer=h,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=iv.NONE,this.msaaBuffer=null,this.blitFramebuffer=null},oq=new iS,oZ=function(h){function n(w){var q=h.call(this,w)||this;return q.managedFramebuffers=[],q.unknownFramebuffer=new oA(10,10),q.msaaSamples=null,q}return Je(n,h),n.prototype.contextChange=function(){var h=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new iS,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var w=this.renderer.context.extensions.drawBuffers,q=this.renderer.context.extensions.depthTexture;ed.PREFER_ENV===n5.WEBGL_LEGACY&&(w=null,q=null),w?h.drawBuffers=function(h){return w.drawBuffersWEBGL(h)}:(this.hasMRT=!1,h.drawBuffers=function(){}),q||(this.writeDepthTexture=!1)}else this.msaaSamples=h.getInternalformatParameter(h.RENDERBUFFER,h.RGBA8,h.SAMPLES)},n.prototype.bind=function(h,w){var q=this.gl;if(h){var tr=h.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(h);this.current!==h&&(this.current=h,q.bindFramebuffer(q.FRAMEBUFFER,tr.framebuffer)),tr.dirtyId!==h.dirtyId&&(tr.dirtyId=h.dirtyId,tr.dirtyFormat!==h.dirtyFormat?(tr.dirtyFormat=h.dirtyFormat,this.updateFramebuffer(h)):tr.dirtySize!==h.dirtySize&&(tr.dirtySize=h.dirtySize,this.resizeFramebuffer(h)));for(var tn=0;tn<h.colorTextures.length;tn++){var ti=h.colorTextures[tn];this.renderer.texture.unbind(ti.parentTextureArray||ti)}h.depthTexture&&this.renderer.texture.unbind(h.depthTexture),w?this.setViewport(w.x,w.y,w.width,w.height):this.setViewport(0,0,h.width,h.height)}else this.current&&(this.current=null,q.bindFramebuffer(q.FRAMEBUFFER,null)),w?this.setViewport(w.x,w.y,w.width,w.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},n.prototype.setViewport=function(h,w,q,tr){var tn=this.viewport;(tn.width!==q||tn.height!==tr||tn.x!==h||tn.y!==w)&&(tn.x=h,tn.y=w,tn.width=q,tn.height=tr,this.gl.viewport(h,w,q,tr))},Object.defineProperty(n.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),n.prototype.clear=function(h,w,q,tr,tn){void 0===tn&&(tn=n8.COLOR|n8.DEPTH);var ti=this.gl;ti.clearColor(h,w,q,tr),ti.clear(tn)},n.prototype.initFramebuffer=function(h){var w=this.gl,q=new ag(w.createFramebuffer());return q.multisample=this.detectSamples(h.multisample),h.glFramebuffers[this.CONTEXT_UID]=q,this.managedFramebuffers.push(h),h.disposeRunner.add(this),q},n.prototype.resizeFramebuffer=function(h){var w=this.gl,q=h.glFramebuffers[this.CONTEXT_UID];q.stencil&&(w.bindRenderbuffer(w.RENDERBUFFER,q.stencil),w.renderbufferStorage(w.RENDERBUFFER,w.DEPTH_STENCIL,h.width,h.height));for(var tr=h.colorTextures,tn=0;tn<tr.length;tn++)this.renderer.texture.bind(tr[tn],0);h.depthTexture&&this.renderer.texture.bind(h.depthTexture,0)},n.prototype.updateFramebuffer=function(h){var w=this.gl,q=h.glFramebuffers[this.CONTEXT_UID],tr=h.colorTextures.length;w.drawBuffers||(tr=Math.min(tr,1)),q.multisample>1&&(q.msaaBuffer=w.createRenderbuffer(),w.bindRenderbuffer(w.RENDERBUFFER,q.msaaBuffer),w.renderbufferStorageMultisample(w.RENDERBUFFER,q.multisample,w.RGBA8,h.width,h.height),w.framebufferRenderbuffer(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.RENDERBUFFER,q.msaaBuffer));for(var tn=[],ti=0;ti<tr;ti++)if(!(0===ti&&q.multisample>1)){var to=h.colorTextures[ti],ts=to.parentTextureArray||to;this.renderer.texture.bind(ts,0),w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0+ti,to.target,ts._glTextures[this.CONTEXT_UID].texture,0),tn.push(w.COLOR_ATTACHMENT0+ti)}if(tn.length>1&&w.drawBuffers(tn),h.depthTexture&&this.writeDepthTexture){var tu=h.depthTexture;this.renderer.texture.bind(tu,0),w.framebufferTexture2D(w.FRAMEBUFFER,w.DEPTH_ATTACHMENT,w.TEXTURE_2D,tu._glTextures[this.CONTEXT_UID].texture,0)}!q.stencil&&(h.stencil||h.depth)&&(q.stencil=w.createRenderbuffer(),w.bindRenderbuffer(w.RENDERBUFFER,q.stencil),w.renderbufferStorage(w.RENDERBUFFER,w.DEPTH_STENCIL,h.width,h.height),h.depthTexture||w.framebufferRenderbuffer(w.FRAMEBUFFER,w.DEPTH_STENCIL_ATTACHMENT,w.RENDERBUFFER,q.stencil))},n.prototype.detectSamples=function(h){var w=this.msaaSamples,q=iv.NONE;if(h<=1||null===w)return q;for(var tr=0;tr<w.length;tr++)if(w[tr]<=h){q=w[tr];break}return 1===q&&(q=iv.NONE),q},n.prototype.blit=function(h,w,q){var tr=this.current,tn=this.renderer,ti=this.gl,to=this.CONTEXT_UID;if(2===tn.context.webGLVersion&&tr){var ts=tr.glFramebuffers[to];if(ts){if(!h){if(ts.multisample<=1)return;ts.blitFramebuffer||(ts.blitFramebuffer=new oA(tr.width,tr.height),ts.blitFramebuffer.addColorTexture(0,tr.colorTextures[0])),(h=ts.blitFramebuffer).width=tr.width,h.height=tr.height}w||((w=oq).width=tr.width,w.height=tr.height),q||(q=w);var tu=w.width===q.width&&w.height===q.height;this.bind(h),ti.bindFramebuffer(ti.READ_FRAMEBUFFER,ts.framebuffer),ti.blitFramebuffer(w.x,w.y,w.width,w.height,q.x,q.y,q.width,q.height,ti.COLOR_BUFFER_BIT,tu?ti.NEAREST:ti.LINEAR)}}},n.prototype.disposeFramebuffer=function(h,w){var q=h.glFramebuffers[this.CONTEXT_UID],tr=this.gl;if(q){delete h.glFramebuffers[this.CONTEXT_UID];var tn=this.managedFramebuffers.indexOf(h);tn>=0&&this.managedFramebuffers.splice(tn,1),h.disposeRunner.remove(this),w||(tr.deleteFramebuffer(q.framebuffer),q.stencil&&tr.deleteRenderbuffer(q.stencil))}},n.prototype.disposeAll=function(h){var w=this.managedFramebuffers;this.managedFramebuffers=[];for(var q=0;q<w.length;q++)this.disposeFramebuffer(w[q],h)},n.prototype.forceStencil=function(){var h=this.current;if(h){var w=h.glFramebuffers[this.CONTEXT_UID];if(!(!w||w.stencil)){h.enableStencil();var q=h.width,tr=h.height,tn=this.gl,ti=tn.createRenderbuffer();tn.bindRenderbuffer(tn.RENDERBUFFER,ti),tn.renderbufferStorage(tn.RENDERBUFFER,tn.DEPTH_STENCIL,q,tr),w.stencil=ti,tn.framebufferRenderbuffer(tn.FRAMEBUFFER,tn.DEPTH_STENCIL_ATTACHMENT,tn.RENDERBUFFER,ti)}}},n.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new iS},n}(ox),Cx=function(h){this.buffer=h||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},oJ={5126:4,5123:2,5121:1},oQ=function(h){function n(w){var q=h.call(this,w)||this;return q._activeGeometry=null,q._activeVao=null,q.hasVao=!0,q.hasInstance=!0,q.canUseUInt32ElementIndex=!1,q.managedGeometries={},q.managedBuffers={},q}return Je(n,h),n.prototype.contextChange=function(){this.disposeAll(!0);var h=this.gl=this.renderer.gl,w=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,!h.createVertexArray){var q=this.renderer.context.extensions.vertexArrayObject;ed.PREFER_ENV===n5.WEBGL_LEGACY&&(q=null),q?(h.createVertexArray=function(){return q.createVertexArrayOES()},h.bindVertexArray=function(h){return q.bindVertexArrayOES(h)},h.deleteVertexArray=function(h){return q.deleteVertexArrayOES(h)}):(this.hasVao=!1,h.createVertexArray=function(){return null},h.bindVertexArray=function(){return null},h.deleteVertexArray=function(){return null})}if(!h.vertexAttribDivisor){var tr=h.getExtension("ANGLE_instanced_arrays");tr?(h.vertexAttribDivisor=function(h,w){return tr.vertexAttribDivisorANGLE(h,w)},h.drawElementsInstanced=function(h,w,q,tn,ti){return tr.drawElementsInstancedANGLE(h,w,q,tn,ti)},h.drawArraysInstanced=function(h,w,q,tn){return tr.drawArraysInstancedANGLE(h,w,q,tn)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===w.webGLVersion||!!w.extensions.uint32ElementIndex},n.prototype.bind=function(h,w){w=w||this.renderer.shader.shader;var q=this.gl,tr=h.glVertexArrayObjects[this.CONTEXT_UID];tr||(this.managedGeometries[h.id]=h,h.disposeRunner.add(this),h.glVertexArrayObjects[this.CONTEXT_UID]=tr={});var tn=tr[w.program.id]||this.initGeometryVao(h,w.program);this._activeGeometry=h,this._activeVao!==tn&&(this._activeVao=tn,this.hasVao?q.bindVertexArray(tn):this.activateVao(h,w.program)),this.updateBuffers()},n.prototype.reset=function(){this.unbind()},n.prototype.updateBuffers=function(){for(var h=this._activeGeometry,w=this.gl,q=0;q<h.buffers.length;q++){var tr=h.buffers[q],tn=tr._glBuffers[this.CONTEXT_UID];if(tr._updateID!==tn.updateID){tn.updateID=tr._updateID;var ti=tr.index?w.ELEMENT_ARRAY_BUFFER:w.ARRAY_BUFFER;if(w.bindBuffer(ti,tn.buffer),this._boundBuffer=tn,tn.byteLength>=tr.data.byteLength)w.bufferSubData(ti,0,tr.data);else{var to=tr.static?w.STATIC_DRAW:w.DYNAMIC_DRAW;tn.byteLength=tr.data.byteLength,w.bufferData(ti,tr.data,to)}}}},n.prototype.checkCompatibility=function(h,w){var q=h.attributes,tr=w.attributeData;for(var tn in tr)if(!q[tn])throw Error('shader and geometry incompatible, geometry missing the "'+tn+'" attribute')},n.prototype.getSignature=function(h,w){var q=h.attributes,tr=w.attributeData,tn=["g",h.id];for(var ti in q)tr[ti]&&tn.push(ti);return tn.join("-")},n.prototype.initGeometryVao=function(h,w){this.checkCompatibility(h,w);var q=this.gl,tr=this.CONTEXT_UID,tn=this.getSignature(h,w),ti=h.glVertexArrayObjects[this.CONTEXT_UID],to=ti[tn];if(to)return ti[w.id]=to,to;var ts=h.buffers,tu=h.attributes,tl={},tc={};for(var tp in ts)tl[tp]=0,tc[tp]=0;for(var tp in tu)!tu[tp].size&&w.attributeData[tp]?tu[tp].size=w.attributeData[tp].size:tu[tp].size||console.warn("PIXI Geometry attribute '"+tp+"' size cannot be determined (likely the bound shader does not have the attribute)"),tl[tu[tp].buffer]+=tu[tp].size*oJ[tu[tp].type];for(var tp in tu){var td=tu[tp],tm=td.size;void 0===td.stride&&(tl[td.buffer]===tm*oJ[td.type]?td.stride=0:td.stride=tl[td.buffer]),void 0===td.start&&(td.start=tc[td.buffer],tc[td.buffer]+=tm*oJ[td.type])}to=q.createVertexArray(),q.bindVertexArray(to);for(var ty=0;ty<ts.length;ty++){var tv=ts[ty];tv._glBuffers[tr]||(tv._glBuffers[tr]=new Cx(q.createBuffer()),this.managedBuffers[tv.id]=tv,tv.disposeRunner.add(this)),tv._glBuffers[tr].refCount++}return this.activateVao(h,w),this._activeVao=to,ti[w.id]=to,ti[tn]=to,to},n.prototype.disposeBuffer=function(h,w){if(this.managedBuffers[h.id]){delete this.managedBuffers[h.id];var q=h._glBuffers[this.CONTEXT_UID],tr=this.gl;h.disposeRunner.remove(this),q&&(w||tr.deleteBuffer(q.buffer),delete h._glBuffers[this.CONTEXT_UID])}},n.prototype.disposeGeometry=function(h,w){if(this.managedGeometries[h.id]){delete this.managedGeometries[h.id];var q=h.glVertexArrayObjects[this.CONTEXT_UID],tr=this.gl,tn=h.buffers;if(h.disposeRunner.remove(this),q){for(var ti=0;ti<tn.length;ti++){var to=tn[ti]._glBuffers[this.CONTEXT_UID];to.refCount--,0!==to.refCount||w||this.disposeBuffer(tn[ti],w)}if(!w){for(var ts in q)if("g"===ts[0]){var tu=q[ts];this._activeVao===tu&&this.unbind(),tr.deleteVertexArray(tu)}}delete h.glVertexArrayObjects[this.CONTEXT_UID]}}},n.prototype.disposeAll=function(h){for(var w=Object.keys(this.managedGeometries),q=0;q<w.length;q++)this.disposeGeometry(this.managedGeometries[w[q]],h);w=Object.keys(this.managedBuffers);for(var q=0;q<w.length;q++)this.disposeBuffer(this.managedBuffers[w[q]],h)},n.prototype.activateVao=function(h,w){var q=this.gl,tr=this.CONTEXT_UID,tn=h.buffers,ti=h.attributes;h.indexBuffer&&q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,h.indexBuffer._glBuffers[tr].buffer);var to=null;for(var ts in ti){var tu=ti[ts],tl=tn[tu.buffer]._glBuffers[tr];if(w.attributeData[ts]){to!==tl&&(q.bindBuffer(q.ARRAY_BUFFER,tl.buffer),to=tl);var tc=w.attributeData[ts].location;if(q.enableVertexAttribArray(tc),q.vertexAttribPointer(tc,tu.size,tu.type||q.FLOAT,tu.normalized,tu.stride,tu.start),tu.instance){if(this.hasInstance)q.vertexAttribDivisor(tc,1);else throw Error("geometry error, GPU Instancing is not supported on this device")}}}},n.prototype.draw=function(h,w,q,tr){var tn=this.gl,ti=this._activeGeometry;if(ti.indexBuffer){var to=ti.indexBuffer.data.BYTES_PER_ELEMENT,ts=2===to?tn.UNSIGNED_SHORT:tn.UNSIGNED_INT;2===to||4===to&&this.canUseUInt32ElementIndex?ti.instanced?tn.drawElementsInstanced(h,w||ti.indexBuffer.data.length,ts,(q||0)*to,tr||1):tn.drawElements(h,w||ti.indexBuffer.data.length,ts,(q||0)*to):console.warn("unsupported index buffer type: uint32")}else ti.instanced?tn.drawArraysInstanced(h,q,w||ti.getSize(),tr||1):tn.drawArrays(h,q,w||ti.getSize());return this},n.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},n}(ox),o$=function(){function e(h){void 0===h&&(h=null),this.type=iy.NONE,this.autoDetect=!0,this.maskObject=h||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}return e.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=iy.NONE,this.autoDetect=!0),this._target=null},e.prototype.copyCountersOrReset=function(h){h?(this._stencilCounter=h._stencilCounter,this._scissorCounter=h._scissorCounter,this._scissorRect=h._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},e}();function Op(h,w,q){var tr=h.createShader(w);return h.shaderSource(tr,q),h.compileShader(tr),tr}function cg(h,w,q,tr){var tn=Op(h,h.VERTEX_SHADER,w),ti=Op(h,h.FRAGMENT_SHADER,q),to=h.createProgram();if(h.attachShader(to,tn),h.attachShader(to,ti),tr)for(var ts in tr)h.bindAttribLocation(to,tr[ts],ts);return h.linkProgram(to),h.getProgramParameter(to,h.LINK_STATUS)||(h.getShaderParameter(tn,h.COMPILE_STATUS)||(console.warn(w),console.error(h.getShaderInfoLog(tn))),h.getShaderParameter(ti,h.COMPILE_STATUS)||(console.warn(q),console.error(h.getShaderInfoLog(ti))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",h.getProgramParameter(to,h.VALIDATE_STATUS)),console.error("gl.getError()",h.getError()),""!==h.getProgramInfoLog(to)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",h.getProgramInfoLog(to)),h.deleteProgram(to),to=null),h.deleteShader(tn),h.deleteShader(ti),to}function cl(h){for(var w=Array(h),q=0;q<w.length;q++)w[q]=!1;return w}function hg(h,w){switch(h){case"float":case"int":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*w);case"vec3":return new Float32Array(3*w);case"vec4":return new Float32Array(4*w);case"ivec2":return new Int32Array(2*w);case"ivec3":return new Int32Array(3*w);case"ivec4":return new Int32Array(4*w);case"bool":return!1;case"bvec2":return cl(2*w);case"bvec3":return cl(3*w);case"bvec4":return cl(4*w);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var o1={},o2=o1;function pg(){if(o2===o1||o2&&o2.isContextLost()){var h=document.createElement("canvas"),w=void 0;ed.PREFER_ENV>=n5.WEBGL2&&(w=h.getContext("webgl2",{})),w||((w=h.getContext("webgl",{})||h.getContext("experimental-webgl",{}))?w.getExtension("WEBGL_draw_buffers"):w=null),o2=w}return o2}function Lp(h,w,q){if("precision"!==h.substring(0,9)){var tr=w;return w===im.HIGH&&q!==im.HIGH&&(tr=im.MEDIUM),"precision "+tr+` float;
`+h}return q!==im.HIGH&&"precision highp"===h.substring(0,15)?h.replace("precision highp","precision mediump"):h}var o3={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1},o4=null,o5={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Ip(h,w){if(!o4){var q=Object.keys(o5);o4={};for(var tr=0;tr<q.length;++tr){var tn=q[tr];o4[h[tn]]=o5[tn]}}return o4[w]}var o6=[{test:function(h){return"float"===h.type&&1===h.size},code:function(h){return`
            if(uv["`+h+'"] !== ud["'+h+`"].value)
            {
                ud["`+h+'"].value = uv["'+h+`"]
                gl.uniform1f(ud["`+h+'"].location, uv["'+h+`"])
            }
            `}},{test:function(h){return("sampler2D"===h.type||"samplerCube"===h.type||"sampler2DArray"===h.type)&&1===h.size&&!h.isArray},code:function(h){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+h+`"], t);

            if(ud["`+h+`"].value !== t)
            {
                ud["`+h+`"].value = t;
                gl.uniform1i(ud["`+h+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(h,w){return"mat3"===h.type&&1===h.size&&void 0!==w.a},code:function(h){return`
            gl.uniformMatrix3fv(ud["`+h+'"].location, false, uv["'+h+`"].toArray(true));
            `}},{test:function(h,w){return"vec2"===h.type&&1===h.size&&void 0!==w.x},code:function(h){return`
                cv = ud["`+h+`"].value;
                v = uv["`+h+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+h+`"].location, v.x, v.y);
                }`}},{test:function(h){return"vec2"===h.type&&1===h.size},code:function(h){return`
                cv = ud["`+h+`"].value;
                v = uv["`+h+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+h+`"].location, v[0], v[1]);
                }
            `}},{test:function(h,w){return"vec4"===h.type&&1===h.size&&void 0!==w.width},code:function(h){return`
                cv = ud["`+h+`"].value;
                v = uv["`+h+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+h+`"].location, v.x, v.y, v.width, v.height)
                }`}},{test:function(h){return"vec4"===h.type&&1===h.size},code:function(h){return`
                cv = ud["`+h+`"].value;
                v = uv["`+h+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+h+`"].location, v[0], v[1], v[2], v[3])
                }`}}],o8={float:`
    if(cv !== v)
    {
        cv.v = v;
        gl.uniform1f(location, v)
    }`,vec2:`
    if(cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},o7={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"},o9=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function dg(h,w){if(0===h)throw Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var q=w.createShader(w.FRAGMENT_SHADER);;){var tr=o9.replace(/%forloop%/gi,function(h){for(var w="",q=0;q<h;++q)q>0&&(w+=`
else `),q<h-1&&(w+="if(test == "+q+".0){}");return w}(h));if(w.shaderSource(q,tr),w.compileShader(q),w.getShaderParameter(q,w.COMPILE_STATUS))break;h=h/2|0}return h}var sn=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,ss=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,sa=0,su={},sl=function(){function e(h,w,q){void 0===q&&(q="pixi-shader"),this.id=sa++,this.vertexSrc=h||e.defaultVertexSrc,this.fragmentSrc=w||e.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(su[q=q.replace(/\s+/g,"-")]?(su[q]++,q+="-"+su[q]):su[q]=1,this.vertexSrc="#define SHADER_NAME "+q+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+q+`
`+this.fragmentSrc,this.vertexSrc=Lp(this.vertexSrc,ed.PRECISION_VERTEX,im.HIGH),this.fragmentSrc=Lp(this.fragmentSrc,ed.PRECISION_FRAGMENT,function(){if(!aP){aP=im.MEDIUM;var h=pg();h&&h.getShaderPrecisionFormat&&(aP=h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.HIGH_FLOAT).precision?im.HIGH:im.MEDIUM)}return aP}())),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}return e.prototype.extractData=function(h,w){var q=pg();if(q){var tr=cg(q,h,w);this.attributeData=this.getAttributeData(tr,q),this.uniformData=this.getUniformData(tr,q),q.deleteProgram(tr)}else this.uniformData={},this.attributeData={}},e.prototype.getAttributeData=function(h,w){for(var q={},tr=[],tn=w.getProgramParameter(h,w.ACTIVE_ATTRIBUTES),ti=0;ti<tn;ti++){var to=w.getActiveAttrib(h,ti),ts=Ip(w,to.type),tu={type:ts,name:to.name,size:o3[ts],location:0};q[to.name]=tu,tr.push(tu)}tr.sort(function(h,w){return h.name>w.name?1:-1});for(var ti=0;ti<tr.length;ti++)tr[ti].location=ti;return q},e.prototype.getUniformData=function(h,w){for(var q={},tr=w.getProgramParameter(h,w.ACTIVE_UNIFORMS),tn=0;tn<tr;tn++){var ti=w.getActiveUniform(h,tn),to=ti.name.replace(/\[.*?\]$/,""),ts=ti.name.match(/\[.*?\]$/),tu=Ip(w,ti.type);q[to]={type:tu,size:ti.size,isArray:ts,value:hg(tu,ti.size)}}return q},Object.defineProperty(e,"defaultVertexSrc",{get:function(){return ss},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return sn},enumerable:!1,configurable:!0}),e.from=function(h,w,q){var tr=h+w,tn=nC[tr];return tn||(nC[tr]=tn=new e(h,w,q)),tn},e}(),sp=function(){function e(h,w){for(var q in this.program=h,w?w instanceof oV?this.uniformGroup=w:this.uniformGroup=new oV(w):this.uniformGroup=new oV({}),h.uniformData)this.uniformGroup.uniforms[q]instanceof Array&&(this.uniformGroup.uniforms[q]=new Float32Array(this.uniformGroup.uniforms[q]))}return e.prototype.checkUniformExists=function(h,w){if(w.uniforms[h])return!0;for(var q in w.uniforms){var tr=w.uniforms[q];if(tr.group&&this.checkUniformExists(h,tr))return!0}return!1},e.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(e.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),e.from=function(h,w,q){var tr=sl.from(h,w);return new e(tr,q)},e}(),sd=function(){function e(){this.data=0,this.blendMode=n7.NORMAL,this.polygonOffset=0,this.blend=!0}return Object.defineProperty(e.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(h){!!(1&this.data)!==h&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(h){!!(2&this.data)!==h&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(h){!!(4&this.data)!==h&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(h){!!(8&this.data)!==h&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(h){!!(16&this.data)!==h&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this._blendMode},set:function(h){this.blend=h!==n7.NONE,this._blendMode=h},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(h){this.offsets=!!h,this._polygonOffset=h},enumerable:!1,configurable:!0}),e.for2d=function(){var h=new e;return h.depthTest=!1,h.blend=!0,h},e}(),s_=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,sg=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,sy=function(h){function n(w,q,tr){var tn=this,ti=sl.from(w||n.defaultVertexSrc,q||n.defaultFragmentSrc);return(tn=h.call(this,ti,tr)||this).padding=0,tn.resolution=ed.FILTER_RESOLUTION,tn.enabled=!0,tn.autoFit=!0,tn.legacy=!!tn.program.attributeData.aTextureCoord,tn.state=new sd,tn}return Je(n,h),n.prototype.apply=function(h,w,q,tr,tn){h.applyFilter(this,w,q,tr)},Object.defineProperty(n.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(h){this.state.blendMode=h},enumerable:!1,configurable:!0}),Object.defineProperty(n,"defaultVertexSrc",{get:function(){return s_},enumerable:!1,configurable:!0}),Object.defineProperty(n,"defaultFragmentSrc",{get:function(){return sg},enumerable:!1,configurable:!0}),n}(sp),sv=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,sb=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,sx=new iU,sT=function(){function e(h,w){this._texture=h,this.mapCoord=new iU,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof w>"u"?.5:w,this.isSimple=!1}return Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(h){this._texture=h,this._textureID=-1},enumerable:!1,configurable:!0}),e.prototype.multiplyUvs=function(h,w){void 0===w&&(w=h);for(var q=this.mapCoord,tr=0;tr<h.length;tr+=2){var tn=h[tr],ti=h[tr+1];w[tr]=tn*q.a+ti*q.c+q.tx,w[tr+1]=tn*q.b+ti*q.d+q.ty}return w},e.prototype.update=function(h){var w=this._texture;if(!w||!w.valid||!h&&this._textureID===w._updateID)return!1;this._textureID=w._updateID,this._updateID++;var q=w._uvs;this.mapCoord.set(q.x1-q.x0,q.y1-q.y0,q.x3-q.x0,q.y3-q.y0,q.x0,q.y0);var tr=w.orig,tn=w.trim;tn&&(sx.set(tr.width/tn.width,0,0,tr.height/tn.height,-tn.x/tn.width,-tn.y/tn.height),this.mapCoord.append(sx));var ti=w.baseTexture,to=this.uClampFrame,ts=this.clampMargin/ti.resolution,tu=this.clampOffset;return to[0]=(w._frame.x+ts+tu)/ti.width,to[1]=(w._frame.y+ts+tu)/ti.height,to[2]=(w._frame.x+w._frame.width-ts+tu)/ti.width,to[3]=(w._frame.y+w._frame.height-ts+tu)/ti.height,this.uClampOffset[0]=tu/ti.realWidth,this.uClampOffset[1]=tu/ti.realHeight,this.isSimple=w._frame.width===ti.width&&w._frame.height===ti.height&&0===w.rotate,!0},e}(),sE=function(h){function n(w){var q=this,tr=new iU;return q=h.call(this,sv,sb)||this,w.renderable=!1,q.maskSprite=w,q.maskMatrix=tr,q}return Je(n,h),n.prototype.apply=function(h,w,q,tr){var tn=this.maskSprite,ti=tn._texture;ti.valid&&(ti.uvMatrix||(ti.uvMatrix=new sT(ti,0)),ti.uvMatrix.update(),this.uniforms.npmAlpha=ti.baseTexture.alphaMode?0:1,this.uniforms.mask=ti,this.uniforms.otherMatrix=h.calculateSpriteMatrix(this.maskMatrix,tn).prepend(ti.uvMatrix.mapCoord),this.uniforms.alpha=tn.worldAlpha,this.uniforms.maskClamp=ti.uvMatrix.uClampFrame,h.applyFilter(this,w,q,tr))},n}(sy),sA=function(h){function n(w){var q=h.call(this,w)||this;return q.enableScissor=!1,q.alphaMaskPool=[],q.maskDataPool=[],q.maskStack=[],q.alphaMaskIndex=0,q}return Je(n,h),n.prototype.setMaskStack=function(h){this.maskStack=h,this.renderer.scissor.setMaskStack(h),this.renderer.stencil.setMaskStack(h)},n.prototype.push=function(h,w){var q=w;if(!q.isMaskData){var tr=this.maskDataPool.pop()||new o$;tr.pooled=!0,tr.maskObject=w,q=tr}switch(q.autoDetect&&this.detect(q),q.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),q._target=h,q.type){case iy.SCISSOR:this.maskStack.push(q),this.renderer.scissor.push(q);break;case iy.STENCIL:this.maskStack.push(q),this.renderer.stencil.push(q);break;case iy.SPRITE:q.copyCountersOrReset(null),this.pushSpriteMask(q),this.maskStack.push(q)}},n.prototype.pop=function(h){var w=this.maskStack.pop();if(!(!w||w._target!==h)){switch(w.type){case iy.SCISSOR:this.renderer.scissor.pop();break;case iy.STENCIL:this.renderer.stencil.pop(w.maskObject);break;case iy.SPRITE:this.popSpriteMask()}w.reset(),w.pooled&&this.maskDataPool.push(w)}},n.prototype.detect=function(h){var w=h.maskObject;if(w.isSprite){h.type=iy.SPRITE;return}if(h.type=iy.STENCIL,this.enableScissor&&w.isFastRect&&w.isFastRect()){var q=w.worldTransform,tr=Math.atan2(q.b,q.a),tn=Math.atan2(q.d,q.c);tn=((tn=Math.round(tn*(180/Math.PI)*100)-(tr=Math.round(tr*(180/Math.PI)*100)))%18e3+18e3)%18e3,0==(tr=(tr%9e3+9e3)%9e3)&&9e3===tn&&(h.type=iy.SCISSOR)}},n.prototype.pushSpriteMask=function(h){var w=h.maskObject,q=h._target,tr=this.alphaMaskPool[this.alphaMaskIndex];tr||(tr=this.alphaMaskPool[this.alphaMaskIndex]=[new sE(w)]),tr[0].resolution=this.renderer.resolution,tr[0].maskSprite=w;var tn=q.filterArea;q.filterArea=w.getBounds(!0),this.renderer.filter.push(q,tr),q.filterArea=tn,this.alphaMaskIndex++},n.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},n}(ox),sO=function(h){function n(w){var q=h.call(this,w)||this;return q.maskStack=[],q.glConst=0,q}return Je(n,h),n.prototype.getStackLength=function(){return this.maskStack.length},n.prototype.setMaskStack=function(h){var w=this.renderer.gl,q=this.getStackLength();this.maskStack=h;var tr=this.getStackLength();tr!==q&&(0===tr?w.disable(this.glConst):(w.enable(this.glConst),this._useCurrent()))},n.prototype._useCurrent=function(){},n.prototype.destroy=function(){h.prototype.destroy.call(this),this.maskStack=null},n}(ox),sw=function(h){function n(w){var q=h.call(this,w)||this;return q.glConst=WebGLRenderingContext.SCISSOR_TEST,q}return Je(n,h),n.prototype.getStackLength=function(){var h=this.maskStack[this.maskStack.length-1];return h?h._scissorCounter:0},n.prototype.push=function(h){var w=h.maskObject;w.renderable=!0;var q=h._scissorRect,tr=w.getBounds(!0),tn=this.renderer.gl;w.renderable=!1,q?tr.fit(q):tn.enable(tn.SCISSOR_TEST),h._scissorCounter++,h._scissorRect=tr,this._useCurrent()},n.prototype.pop=function(){var h=this.renderer.gl;this.getStackLength()>0?this._useCurrent():h.disable(h.SCISSOR_TEST)},n.prototype._useCurrent=function(){var h=this.maskStack[this.maskStack.length-1]._scissorRect,w=this.renderer.renderTexture.current,q=this.renderer.projection,tr=q.transform,tn=q.sourceFrame,ti=q.destinationFrame,to=w?w.resolution:this.renderer.resolution,ts=(h.x-tn.x)*to+ti.x,tu=(h.y-tn.y)*to+ti.y,tl=h.width*to,tc=h.height*to;tr&&(ts+=tr.tx*to,tu+=tr.ty*to),w||(tu=this.renderer.height-tc-tu),this.renderer.gl.scissor(ts,tu,tl,tc)},n}(sO),sL=function(h){function n(w){var q=h.call(this,w)||this;return q.glConst=WebGLRenderingContext.STENCIL_TEST,q}return Je(n,h),n.prototype.getStackLength=function(){var h=this.maskStack[this.maskStack.length-1];return h?h._stencilCounter:0},n.prototype.push=function(h){var w=h.maskObject,q=this.renderer.gl,tr=h._stencilCounter;0===tr&&(this.renderer.framebuffer.forceStencil(),q.enable(q.STENCIL_TEST)),h._stencilCounter++,q.colorMask(!1,!1,!1,!1),q.stencilFunc(q.EQUAL,tr,this._getBitwiseMask()),q.stencilOp(q.KEEP,q.KEEP,q.INCR),w.renderable=!0,w.render(this.renderer),this.renderer.batch.flush(),w.renderable=!1,this._useCurrent()},n.prototype.pop=function(h){var w=this.renderer.gl;0===this.getStackLength()?(w.disable(w.STENCIL_TEST),w.clear(w.STENCIL_BUFFER_BIT),w.clearStencil(0)):(w.colorMask(!1,!1,!1,!1),w.stencilOp(w.KEEP,w.KEEP,w.DECR),h.renderable=!0,h.render(this.renderer),this.renderer.batch.flush(),h.renderable=!1,this._useCurrent())},n.prototype._useCurrent=function(){var h=this.renderer.gl;h.colorMask(!0,!0,!0,!0),h.stencilFunc(h.EQUAL,this.getStackLength(),this._getBitwiseMask()),h.stencilOp(h.KEEP,h.KEEP,h.KEEP)},n.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},n}(sO),sS=function(h){function n(w){var q=h.call(this,w)||this;return q.destinationFrame=null,q.sourceFrame=null,q.defaultFrame=null,q.projectionMatrix=new iU,q.transform=null,q}return Je(n,h),n.prototype.update=function(h,w,q,tr){this.destinationFrame=h||this.destinationFrame||this.defaultFrame,this.sourceFrame=w||this.sourceFrame||h,this.calculateProjection(this.destinationFrame,this.sourceFrame,q,tr),this.transform&&this.projectionMatrix.append(this.transform);var tn=this.renderer;tn.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,tn.globalUniforms.update(),tn.shader.shader&&tn.shader.syncUniformGroup(tn.shader.shader.uniforms.globals)},n.prototype.calculateProjection=function(h,w,q,tr){var tn=this.projectionMatrix,ti=tr?-1:1;tn.identity(),tn.a=1/w.width*2,tn.d=ti*(1/w.height*2),tn.tx=-1-w.x*tn.a,tn.ty=-ti-w.y*tn.d},n.prototype.setTransform=function(h){},n}(ox),sI=new iS,sP=new iS,sR=new iS,sN=function(h){function n(w){var q=h.call(this,w)||this;return q.clearColor=w._backgroundColorRgba,q.defaultMaskStack=[],q.current=null,q.sourceFrame=new iS,q.destinationFrame=new iS,q}return Je(n,h),n.prototype.bind=function(h,w,q){void 0===h&&(h=null);var tr,tn,ti,to=this.renderer;this.current=h,h?(ti=(tr=h.baseTexture).resolution,w||(sI.width=h.frame.width,sI.height=h.frame.height,w=sI),q||(sP.x=h.frame.x,sP.y=h.frame.y,sP.width=w.width,sP.height=w.height,q=sP),tn=tr.framebuffer):(ti=to.resolution,w||(sI.width=to.screen.width,sI.height=to.screen.height,w=sI),q||((q=sI).width=w.width,q.height=w.height)),sR.x=q.x*ti,sR.y=q.y*ti,sR.width=q.width*ti,sR.height=q.height*ti,this.renderer.framebuffer.bind(tn,sR),this.renderer.projection.update(q,w,ti,!tn),h?this.renderer.mask.setMaskStack(tr.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(w),this.destinationFrame.copyFrom(q)},n.prototype.clear=function(h,w){h=this.current?h||this.current.baseTexture.clearColor:h||this.clearColor,this.renderer.framebuffer.clear(h[0],h[1],h[2],h[3],w)},n.prototype.resize=function(){this.bind(null)},n.prototype.reset=function(){this.bind(null)},n}(ox),sM=function(){function e(h,w){this.program=h,this.uniformData=w,this.uniformGroups={}}return e.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},e}(),sk=0,sU={textureCount:0},sC=function(h){function n(w){var q=h.call(this,w)||this;return q.destroyed=!1,q.systemCheck(),q.gl=null,q.shader=null,q.program=null,q.cache={},q.id=sk++,q}return Je(n,h),n.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof aR)return aR;try{var h=Function("param1","param2","param3","return param1[param2] === param3;");aR=!0===h({a:"b"},"a","b")}catch{aR=!1}return aR}())throw Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},n.prototype.contextChange=function(h){this.gl=h,this.reset()},n.prototype.bind=function(h,w){h.uniforms.globals=this.renderer.globalUniforms;var q=h.program,tr=q.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(h);return this.shader=h,this.program!==q&&(this.program=q,this.gl.useProgram(tr.program)),w||(sU.textureCount=0,this.syncUniformGroup(h.uniformGroup,sU)),tr},n.prototype.setUniforms=function(h){var w=this.shader.program,q=w.glPrograms[this.renderer.CONTEXT_UID];w.syncUniforms(q.uniformData,h,this.renderer)},n.prototype.syncUniformGroup=function(h,w){var q=this.getglProgram();h.static&&h.dirtyId===q.uniformGroups[h.id]||(q.uniformGroups[h.id]=h.dirtyId,this.syncUniforms(h,q,w))},n.prototype.syncUniforms=function(h,w,q){(h.syncUniforms[this.shader.program.id]||this.createSyncGroups(h))(w.uniformData,h.uniforms,this.renderer,q)},n.prototype.createSyncGroups=function(h){var w=this.getSignature(h,this.shader.program.uniformData);return this.cache[w]||(this.cache[w]=function(h,w){var q=[`
        var v = null;
        var cv = null
        var t = 0;
        var gl = renderer.gl
    `];for(var tr in h.uniforms){var tn=w[tr];if(!tn){h.uniforms[tr].group&&q.push(`
                    renderer.shader.syncUniformGroup(uv["`+tr+`"], syncData);
                `);continue}for(var ti=h.uniforms[tr],to=!1,ts=0;ts<o6.length;ts++)if(o6[ts].test(tn,ti)){q.push(o6[ts].code(tr,ti)),to=!0;break}if(!to){var tu=(1===tn.size?o8:o7)[tn.type].replace("location",'ud["'+tr+'"].location');q.push(`
            cv = ud["`+tr+`"].value;
            v = uv["`+tr+`"];
            `+tu+";")}}return Function("ud","uv","renderer","syncData",q.join(`
`))}(h,this.shader.program.uniformData)),h.syncUniforms[this.shader.program.id]=this.cache[w],h.syncUniforms[this.shader.program.id]},n.prototype.getSignature=function(h,w){var q=h.uniforms,tr=[];for(var tn in q)tr.push(tn),w[tn]&&tr.push(w[tn].type);return tr.join("-")},n.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},n.prototype.generateShader=function(h){var w=this.gl,q=h.program,tr={};for(var tn in q.attributeData)tr[tn]=q.attributeData[tn].location;var ti=cg(w,q.vertexSrc,q.fragmentSrc,tr),to={};for(var tn in q.uniformData){var ts=q.uniformData[tn];to[tn]={location:w.getUniformLocation(ti,tn),value:hg(ts.type,ts.size)}}var tu=new sM(ti,to);return q.glPrograms[this.renderer.CONTEXT_UID]=tu,tu},n.prototype.reset=function(){this.program=null,this.shader=null},n.prototype.destroy=function(){this.destroyed=!0},n}(ox),sD=function(h){function n(w){var q=h.call(this,w)||this;return q.gl=null,q.stateId=0,q.polygonOffset=0,q.blendMode=n7.NONE,q._blendEq=!1,q.map=[],q.map[0]=q.setBlend,q.map[1]=q.setOffset,q.map[2]=q.setCullFace,q.map[3]=q.setDepthTest,q.map[4]=q.setFrontFace,q.checks=[],q.defaultState=new sd,q.defaultState.blend=!0,q}return Je(n,h),n.prototype.contextChange=function(h){var w;this.gl=h,this.blendModes=(void 0===w&&(w=[]),w[n7.NORMAL]=[h.ONE,h.ONE_MINUS_SRC_ALPHA],w[n7.ADD]=[h.ONE,h.ONE],w[n7.MULTIPLY]=[h.DST_COLOR,h.ONE_MINUS_SRC_ALPHA,h.ONE,h.ONE_MINUS_SRC_ALPHA],w[n7.SCREEN]=[h.ONE,h.ONE_MINUS_SRC_COLOR,h.ONE,h.ONE_MINUS_SRC_ALPHA],w[n7.OVERLAY]=[h.ONE,h.ONE_MINUS_SRC_ALPHA],w[n7.DARKEN]=[h.ONE,h.ONE_MINUS_SRC_ALPHA],w[n7.LIGHTEN]=[h.ONE,h.ONE_MINUS_SRC_ALPHA],w[n7.COLOR_DODGE]=[h.ONE,h.ONE_MINUS_SRC_ALPHA],w[n7.COLOR_BURN]=[h.ONE,h.ONE_MINUS_SRC_ALPHA],w[n7.HARD_LIGHT]=[h.ONE,h.ONE_MINUS_SRC_ALPHA],w[n7.SOFT_LIGHT]=[h.ONE,h.ONE_MINUS_SRC_ALPHA],w[n7.DIFFERENCE]=[h.ONE,h.ONE_MINUS_SRC_ALPHA],w[n7.EXCLUSION]=[h.ONE,h.ONE_MINUS_SRC_ALPHA],w[n7.HUE]=[h.ONE,h.ONE_MINUS_SRC_ALPHA],w[n7.SATURATION]=[h.ONE,h.ONE_MINUS_SRC_ALPHA],w[n7.COLOR]=[h.ONE,h.ONE_MINUS_SRC_ALPHA],w[n7.LUMINOSITY]=[h.ONE,h.ONE_MINUS_SRC_ALPHA],w[n7.NONE]=[0,0],w[n7.NORMAL_NPM]=[h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA,h.ONE,h.ONE_MINUS_SRC_ALPHA],w[n7.ADD_NPM]=[h.SRC_ALPHA,h.ONE,h.ONE,h.ONE],w[n7.SCREEN_NPM]=[h.SRC_ALPHA,h.ONE_MINUS_SRC_COLOR,h.ONE,h.ONE_MINUS_SRC_ALPHA],w[n7.SRC_IN]=[h.DST_ALPHA,h.ZERO],w[n7.SRC_OUT]=[h.ONE_MINUS_DST_ALPHA,h.ZERO],w[n7.SRC_ATOP]=[h.DST_ALPHA,h.ONE_MINUS_SRC_ALPHA],w[n7.DST_OVER]=[h.ONE_MINUS_DST_ALPHA,h.ONE],w[n7.DST_IN]=[h.ZERO,h.SRC_ALPHA],w[n7.DST_OUT]=[h.ZERO,h.ONE_MINUS_SRC_ALPHA],w[n7.DST_ATOP]=[h.ONE_MINUS_DST_ALPHA,h.SRC_ALPHA],w[n7.XOR]=[h.ONE_MINUS_DST_ALPHA,h.ONE_MINUS_SRC_ALPHA],w[n7.SUBTRACT]=[h.ONE,h.ONE,h.ONE,h.ONE,h.FUNC_REVERSE_SUBTRACT,h.FUNC_ADD],w),this.set(this.defaultState),this.reset()},n.prototype.set=function(h){if(h=h||this.defaultState,this.stateId!==h.data){for(var w=this.stateId^h.data,q=0;w;)1&w&&this.map[q].call(this,!!(h.data&1<<q)),w>>=1,q++;this.stateId=h.data}for(var q=0;q<this.checks.length;q++)this.checks[q](this,h)},n.prototype.forceState=function(h){h=h||this.defaultState;for(var w=0;w<this.map.length;w++)this.map[w].call(this,!!(h.data&1<<w));for(var w=0;w<this.checks.length;w++)this.checks[w](this,h);this.stateId=h.data},n.prototype.setBlend=function(h){this.updateCheck(n.checkBlendMode,h),this.gl[h?"enable":"disable"](this.gl.BLEND)},n.prototype.setOffset=function(h){this.updateCheck(n.checkPolygonOffset,h),this.gl[h?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},n.prototype.setDepthTest=function(h){this.gl[h?"enable":"disable"](this.gl.DEPTH_TEST)},n.prototype.setCullFace=function(h){this.gl[h?"enable":"disable"](this.gl.CULL_FACE)},n.prototype.setFrontFace=function(h){this.gl.frontFace(this.gl[h?"CW":"CCW"])},n.prototype.setBlendMode=function(h){if(h!==this.blendMode){this.blendMode=h;var w=this.blendModes[h],q=this.gl;2===w.length?q.blendFunc(w[0],w[1]):q.blendFuncSeparate(w[0],w[1],w[2],w[3]),6===w.length?(this._blendEq=!0,q.blendEquationSeparate(w[4],w[5])):this._blendEq&&(this._blendEq=!1,q.blendEquationSeparate(q.FUNC_ADD,q.FUNC_ADD))}},n.prototype.setPolygonOffset=function(h,w){this.gl.polygonOffset(h,w)},n.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},n.prototype.updateCheck=function(h,w){var q=this.checks.indexOf(h);w&&-1===q?this.checks.push(h):w||-1===q||this.checks.splice(q,1)},n.checkBlendMode=function(h,w){h.setBlendMode(w.blendMode)},n.checkPolygonOffset=function(h,w){h.setPolygonOffset(1,w.polygonOffset)},n}(ox),sF=function(h){function n(w){var q=h.call(this,w)||this;return q.count=0,q.checkCount=0,q.maxIdle=ed.GC_MAX_IDLE,q.checkCountMax=ed.GC_MAX_CHECK_COUNT,q.mode=ed.GC_MODE,q}return Je(n,h),n.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==ig.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},n.prototype.run=function(){for(var h=this.renderer.texture,w=h.managedTextures,q=!1,tr=0;tr<w.length;tr++){var tn=w[tr];!tn.framebuffer&&this.count-tn.touched>this.maxIdle&&(h.destroyTexture(tn,!0),w[tr]=null,q=!0)}if(q){for(var ti=0,tr=0;tr<w.length;tr++)null!==w[tr]&&(w[ti++]=w[tr]);w.length=ti}},n.prototype.unload=function(h){var w,q=this.renderer.texture;!(null===(w=h._texture)||void 0===w)&&w.framebuffer&&q.destroyTexture(h._texture);for(var tr=h.children.length-1;tr>=0;tr--)this.unload(h.children[tr])},n}(ox),Js=function(h){this.texture=h,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121},sB=function(h){function n(w){var q=h.call(this,w)||this;return q.boundTextures=[],q.currentLocation=-1,q.managedTextures=[],q._unknownBoundTextures=!1,q.unknownTexture=new oa,q}return Je(n,h),n.prototype.contextChange=function(){var h=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var w=h.getParameter(h.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=w;for(var q=0;q<w;q++)this.boundTextures[q]=null;this.emptyTextures={};var tr=new Js(h.createTexture());h.bindTexture(h.TEXTURE_2D,tr.texture),h.texImage2D(h.TEXTURE_2D,0,h.RGBA,1,1,0,h.RGBA,h.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[h.TEXTURE_2D]=tr,this.emptyTextures[h.TEXTURE_CUBE_MAP]=new Js(h.createTexture()),h.bindTexture(h.TEXTURE_CUBE_MAP,this.emptyTextures[h.TEXTURE_CUBE_MAP].texture);for(var q=0;q<6;q++)h.texImage2D(h.TEXTURE_CUBE_MAP_POSITIVE_X+q,0,h.RGBA,1,1,0,h.RGBA,h.UNSIGNED_BYTE,null);h.texParameteri(h.TEXTURE_CUBE_MAP,h.TEXTURE_MAG_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_CUBE_MAP,h.TEXTURE_MIN_FILTER,h.LINEAR);for(var q=0;q<this.boundTextures.length;q++)this.bind(null,q)},n.prototype.bind=function(h,w){void 0===w&&(w=0);var q=this.gl;if(h){if((h=h.castToBaseTexture()).parentTextureArray)return;if(h.valid){h.touched=this.renderer.textureGC.count;var tr=h._glTextures[this.CONTEXT_UID]||this.initTexture(h);this.boundTextures[w]!==h&&(this.currentLocation!==w&&(this.currentLocation=w,q.activeTexture(q.TEXTURE0+w)),q.bindTexture(h.target,tr.texture)),tr.dirtyId!==h.dirtyId&&(this.currentLocation!==w&&(this.currentLocation=w,q.activeTexture(q.TEXTURE0+w)),this.updateTexture(h)),this.boundTextures[w]=h}}else this.currentLocation!==w&&(this.currentLocation=w,q.activeTexture(q.TEXTURE0+w)),q.bindTexture(q.TEXTURE_2D,this.emptyTextures[q.TEXTURE_2D].texture),this.boundTextures[w]=null},n.prototype.reset=function(){this._unknownBoundTextures=!0,this.currentLocation=-1;for(var h=0;h<this.boundTextures.length;h++)this.boundTextures[h]=this.unknownTexture},n.prototype.unbind=function(h){var w=this.gl,q=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var tr=0;tr<q.length;tr++)q[tr]===this.unknownTexture&&this.bind(null,tr)}for(var tr=0;tr<q.length;tr++)q[tr]===h&&(this.currentLocation!==tr&&(w.activeTexture(w.TEXTURE0+tr),this.currentLocation=tr),w.bindTexture(w.TEXTURE_2D,this.emptyTextures[h.target].texture),q[tr]=null)},n.prototype.initTexture=function(h){var w=new Js(this.gl.createTexture());return w.dirtyId=-1,h._glTextures[this.CONTEXT_UID]=w,this.managedTextures.push(h),h.on("dispose",this.destroyTexture,this),w},n.prototype.initTextureType=function(h,w){if(w.internalFormat=h.format,w.type=h.type,2===this.webGLVersion){var q=this.renderer.gl;h.type===q.FLOAT&&h.format===q.RGBA&&(w.internalFormat=q.RGBA32F),h.type===iu.HALF_FLOAT&&(w.type=q.HALF_FLOAT),w.type===q.HALF_FLOAT&&h.format===q.RGBA&&(w.internalFormat=q.RGBA16F)}},n.prototype.updateTexture=function(h){var w=h._glTextures[this.CONTEXT_UID];if(w){var q=this.renderer;if(this.initTextureType(h,w),!(h.resource&&h.resource.upload(q,h,w))){var tr=h.realWidth,tn=h.realHeight,ti=q.gl;(w.width!==tr||w.height!==tn||w.dirtyId<0)&&(w.width=tr,w.height=tn,ti.texImage2D(h.target,0,w.internalFormat,tr,tn,0,h.format,w.type,null))}h.dirtyStyleId!==w.dirtyStyleId&&this.updateTextureStyle(h),w.dirtyId=h.dirtyId}},n.prototype.destroyTexture=function(h,w){var q=this.gl;if((h=h.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(h),q.deleteTexture(h._glTextures[this.CONTEXT_UID].texture),h.off("dispose",this.destroyTexture,this),delete h._glTextures[this.CONTEXT_UID],!w)){var tr=this.managedTextures.indexOf(h);-1!==tr&&Ui(this.managedTextures,tr,1)}},n.prototype.updateTextureStyle=function(h){var w=h._glTextures[this.CONTEXT_UID];w&&(h.mipmap!==ip.POW2&&2===this.webGLVersion||h.isPowerOfTwo?w.mipmap=h.mipmap>=1:w.mipmap=!1,2===this.webGLVersion||h.isPowerOfTwo?w.wrapMode=h.wrapMode:w.wrapMode=ic.CLAMP,h.resource&&h.resource.style(this.renderer,h,w)||this.setStyle(h,w),w.dirtyStyleId=h.dirtyStyleId)},n.prototype.setStyle=function(h,w){var q=this.gl;if(w.mipmap&&q.generateMipmap(h.target),q.texParameteri(h.target,q.TEXTURE_WRAP_S,w.wrapMode),q.texParameteri(h.target,q.TEXTURE_WRAP_T,w.wrapMode),w.mipmap){q.texParameteri(h.target,q.TEXTURE_MIN_FILTER,h.scaleMode===il.LINEAR?q.LINEAR_MIPMAP_LINEAR:q.NEAREST_MIPMAP_NEAREST);var tr=this.renderer.context.extensions.anisotropicFiltering;if(tr&&h.anisotropicLevel>0&&h.scaleMode===il.LINEAR){var tn=Math.min(h.anisotropicLevel,q.getParameter(tr.MAX_TEXTURE_MAX_ANISOTROPY_EXT));q.texParameterf(h.target,tr.TEXTURE_MAX_ANISOTROPY_EXT,tn)}}else q.texParameteri(h.target,q.TEXTURE_MIN_FILTER,h.scaleMode===il.LINEAR?q.LINEAR:q.NEAREST);q.texParameteri(h.target,q.TEXTURE_MAG_FILTER,h.scaleMode===il.LINEAR?q.LINEAR:q.NEAREST)},n}(ox),sj=new iU,sG=function(h){function n(w,q){void 0===w&&(w=n6.UNKNOWN);var tr=h.call(this)||this;return(q=Object.assign({},ed.RENDER_OPTIONS,q)).roundPixels&&(ed.ROUND_PIXELS=q.roundPixels,we("5.0.0","Renderer roundPixels option is deprecated, please use PIXI.settings.ROUND_PIXELS",2)),tr.options=q,tr.type=w,tr.screen=new iS(0,0,q.width,q.height),tr.view=q.view||document.createElement("canvas"),tr.resolution=q.resolution||ed.RESOLUTION,tr.transparent=q.transparent,tr.autoDensity=q.autoDensity||q.autoResize||!1,tr.preserveDrawingBuffer=q.preserveDrawingBuffer,tr.clearBeforeRender=q.clearBeforeRender,tr._backgroundColor=0,tr._backgroundColorRgba=[0,0,0,0],tr._backgroundColorString="#000000",tr.backgroundColor=q.backgroundColor||tr._backgroundColor,tr._lastObjectRendered=null,tr.plugins={},tr}return Je(n,h),n.prototype.initPlugins=function(h){for(var w in h)this.plugins[w]=new h[w](this)},Object.defineProperty(n.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),n.prototype.resize=function(h,w){this.screen.width=h,this.screen.height=w,this.view.width=h*this.resolution,this.view.height=w*this.resolution,this.autoDensity&&(this.view.style.width=h+"px",this.view.style.height=w+"px"),this.emit("resize",h,w)},n.prototype.generateTexture=function(h,w,q,tr){0===(tr=tr||h.getLocalBounds(null,!0)).width&&(tr.width=1),0===tr.height&&(tr.height=1);var tn=oI.create({width:0|tr.width,height:0|tr.height,scaleMode:w,resolution:q});return sj.tx=-tr.x,sj.ty=-tr.y,this.render(h,tn,!1,sj,!!h.parent),tn},n.prototype.destroy=function(h){for(var w in this.plugins)this.plugins[w].destroy(),this.plugins[w]=null;h&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.plugins=null,this.type=n6.UNKNOWN,this.view=null,this.screen=null,this._tempDisplayObjectParent=null,this.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(n.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(h){this._backgroundColor=h,this._backgroundColorString=tf(h),Vi(h,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),n}(em),sV=function(h){function n(w){var q=h.call(this,n6.WEBGL,w)||this;return w=q.options,q.gl=null,q.CONTEXT_UID=0,q.runners={destroy:new i7("destroy"),contextChange:new i7("contextChange"),reset:new i7("reset"),update:new i7("update"),postrender:new i7("postrender"),prerender:new i7("prerender"),resize:new i7("resize")},q.globalUniforms=new oV({projectionMatrix:new iU},!0),q.addSystem(sA,"mask").addSystem(oW,"context").addSystem(sD,"state").addSystem(sC,"shader").addSystem(sB,"texture").addSystem(oQ,"geometry").addSystem(oZ,"framebuffer").addSystem(sw,"scissor").addSystem(sL,"stencil").addSystem(sS,"projection").addSystem(sF,"textureGC").addSystem(oH,"filter").addSystem(sN,"renderTexture").addSystem(oK,"batch"),q.initPlugins(n.__plugins),w.context?q.context.initFromContext(w.context):q.context.initFromOptions({alpha:!!q.transparent,antialias:w.antialias,premultipliedAlpha:q.transparent&&"notMultiplied"!==q.transparent,stencil:!0,preserveDrawingBuffer:w.preserveDrawingBuffer,powerPreference:q.options.powerPreference}),q.renderingToScreen=!0,Sv(2===q.context.webGLVersion?"WebGL 2":"WebGL 1"),q.resize(q.options.width,q.options.height),q}return Je(n,h),n.create=function(h){if(Iv())return new n(h);throw Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},n.prototype.addSystem=function(h,w){w||(w=h.name);var q=new h(this);if(this[w])throw Error('Whoops! The name "'+w+'" is already in use');for(var tr in this[w]=q,this.runners)this.runners[tr].add(q);return this},n.prototype.render=function(h,w,q,tr,tn){if(this.renderingToScreen=!w,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=tr,!this.context.isLost){if(w||(this._lastObjectRendered=h),!tn){var ti=h.enableTempParent();h.updateTransform(),h.disableTempParent(ti)}this.renderTexture.bind(w),this.batch.currentRenderer.start(),(void 0!==q?q:this.clearBeforeRender)&&this.renderTexture.clear(),h.render(this),this.batch.currentRenderer.flush(),w&&w.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},n.prototype.resize=function(w,q){h.prototype.resize.call(this,w,q),this.runners.resize.emit(w,q)},n.prototype.reset=function(){return this.runners.reset.emit(),this},n.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},n.prototype.destroy=function(w){for(var q in this.runners.destroy.emit(),this.runners)this.runners[q].destroy();h.prototype.destroy.call(this,w),this.gl=null},n.registerPlugin=function(h,w){n.__plugins=n.__plugins||{},n.__plugins[h]=w},n}(sG);function Sg(h){return sV.create(h)}var sX=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,sH=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,hu=function(){this.texArray=null,this.blend=0,this.type=n9.TRIANGLES,this.start=0,this.size=0,this.data=null},sz=function(){function e(){this.elements=[],this.ids=[],this.count=0}return e.prototype.clear=function(){for(var h=0;h<this.count;h++)this.elements[h]=null;this.count=0},e}(),sK=function(){function e(h){this.rawBinaryData=new ArrayBuffer(h),this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(e.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),e.prototype.view=function(h){return this[h+"View"]},e.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},e.sizeOf=function(h){switch(h){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw Error(h+" isn't a valid view type")}},e}(),sY=function(h){function n(w){var q=h.call(this,w)||this;return q.shaderGenerator=null,q.geometryClass=null,q.vertexSize=null,q.state=sd.for2d(),q.size=4*ed.SPRITE_BATCH_SIZE,q._vertexCount=0,q._indexCount=0,q._bufferedElements=[],q._bufferedTextures=[],q._bufferSize=0,q._shader=null,q._packedGeometries=[],q._packedGeometryPoolSize=2,q._flushId=0,q._aBuffers={},q._iBuffers={},q.MAX_TEXTURES=1,q.renderer.on("prerender",q.onPrerender,q),w.runners.contextChange.add(q),q._dcIndex=0,q._aIndex=0,q._iIndex=0,q._attributeBuffer=null,q._indexBuffer=null,q._tempBoundTextures=[],q}return Je(n,h),n.prototype.contextChange=function(){var h=this.renderer.gl;ed.PREFER_ENV===n5.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(h.getParameter(h.MAX_TEXTURE_IMAGE_UNITS),ed.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=dg(this.MAX_TEXTURES,h)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var w=0;w<this._packedGeometryPoolSize;w++)this._packedGeometries[w]=new this.geometryClass;this.initFlushBuffers()},n.prototype.initFlushBuffers=function(){for(var h=n._drawCallPool,w=n._textureArrayPool,q=this.size/4,tr=Math.floor(q/this.MAX_TEXTURES)+1;h.length<q;)h.push(new hu);for(;w.length<tr;)w.push(new sz);for(var tn=0;tn<this.MAX_TEXTURES;tn++)this._tempBoundTextures[tn]=null},n.prototype.onPrerender=function(){this._flushId=0},n.prototype.render=function(h){h._texture.valid&&(this._vertexCount+h.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=h.vertexData.length/2,this._indexCount+=h.indices.length,this._bufferedTextures[this._bufferSize]=h._texture.baseTexture,this._bufferedElements[this._bufferSize++]=h)},n.prototype.buildTexturesAndDrawCalls=function(){var h=this._bufferedTextures,w=this.MAX_TEXTURES,q=n._textureArrayPool,tr=this.renderer.batch,tn=this._tempBoundTextures,ti=this.renderer.textureGC.count,to=++oa._globalBatch,ts=0,tu=q[0],tl=0;tr.copyBoundTextures(tn,w);for(var tc=0;tc<this._bufferSize;++tc){var tp=h[tc];h[tc]=null,tp._batchEnabled!==to&&(tu.count>=w&&(tr.boundArray(tu,tn,to,w),this.buildDrawCalls(tu,tl,tc),tl=tc,tu=q[++ts],++to),tp._batchEnabled=to,tp.touched=ti,tu.elements[tu.count++]=tp)}tu.count>0&&(tr.boundArray(tu,tn,to,w),this.buildDrawCalls(tu,tl,this._bufferSize),++ts,++to);for(var tc=0;tc<tn.length;tc++)tn[tc]=null;oa._globalBatch=to},n.prototype.buildDrawCalls=function(h,w,q){var tr=this._bufferedElements,tn=this._attributeBuffer,ti=this._indexBuffer,to=this.vertexSize,ts=n._drawCallPool,tu=this._dcIndex,tl=this._aIndex,tc=this._iIndex,tp=ts[tu];tp.start=this._iIndex,tp.texArray=h;for(var td=w;td<q;++td){var tm=tr[td],ty=nN[tm._texture.baseTexture.alphaMode?1:0][tm.blendMode];tr[td]=null,w<td&&tp.blend!==ty&&(tp.size=tc-tp.start,w=td,(tp=ts[++tu]).texArray=h,tp.start=tc),this.packInterleavedGeometry(tm,tn,ti,tl,tc),tl+=tm.vertexData.length/2*to,tc+=tm.indices.length,tp.blend=ty}w<q&&(tp.size=tc-tp.start,++tu),this._dcIndex=tu,this._aIndex=tl,this._iIndex=tc},n.prototype.bindAndClearTexArray=function(h){for(var w=this.renderer.texture,q=0;q<h.count;q++)w.bind(h.elements[q],h.ids[q]),h.elements[q]=null;h.count=0},n.prototype.updateGeometry=function(){var h=this._packedGeometries,w=this._attributeBuffer,q=this._indexBuffer;ed.CAN_UPLOAD_SAME_BUFFER?(h[this._flushId]._buffer.update(w.rawBinaryData),h[this._flushId]._indexBuffer.update(q),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,h[this._flushId]=new this.geometryClass),h[this._flushId]._buffer.update(w.rawBinaryData),h[this._flushId]._indexBuffer.update(q),this.renderer.geometry.bind(h[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},n.prototype.drawBatches=function(){for(var h=this._dcIndex,w=this.renderer,q=w.gl,tr=w.state,tn=n._drawCallPool,ti=null,to=0;to<h;to++){var ts=tn[to],tu=ts.texArray,tl=ts.type,tc=ts.size,tp=ts.start,td=ts.blend;ti!==tu&&(ti=tu,this.bindAndClearTexArray(tu)),this.state.blendMode=td,tr.set(this.state),q.drawElements(tl,tc,q.UNSIGNED_SHORT,2*tp)}},n.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},n.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.shader.bind(this._shader),ed.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},n.prototype.stop=function(){this.flush()},n.prototype.destroy=function(){for(var w=0;w<this._packedGeometryPoolSize;w++)this._packedGeometries[w]&&this._packedGeometries[w].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),h.prototype.destroy.call(this)},n.prototype.getAttributeBuffer=function(h){var w=ka(Math.ceil(h/8)),q=wc(w),tr=8*w;this._aBuffers.length<=q&&(this._iBuffers.length=q+1);var tn=this._aBuffers[tr];return tn||(this._aBuffers[tr]=tn=new sK(tr*this.vertexSize*4)),tn},n.prototype.getIndexBuffer=function(h){var w=ka(Math.ceil(h/12)),q=wc(w),tr=12*w;this._iBuffers.length<=q&&(this._iBuffers.length=q+1);var tn=this._iBuffers[q];return tn||(this._iBuffers[q]=tn=new Uint16Array(tr)),tn},n.prototype.packInterleavedGeometry=function(h,w,q,tr,tn){for(var ti=w.uint32View,to=w.float32View,ts=tr/this.vertexSize,tu=h.uvs,tl=h.indices,tc=h.vertexData,tp=h._texture.baseTexture._batchLocation,td=Math.min(h.worldAlpha,1),tm=td<1&&h._texture.baseTexture.alphaMode?Su(h._tintRGB,td):h._tintRGB+(255*td<<24),ty=0;ty<tc.length;ty+=2)to[tr++]=tc[ty],to[tr++]=tc[ty+1],to[tr++]=tu[ty],to[tr++]=tu[ty+1],ti[tr++]=tm,to[tr++]=tp;for(var ty=0;ty<tl.length;ty++)q[tn++]=ts+tl[ty]},n._drawCallPool=[],n._textureArrayPool=[],n}(oz),sW=function(){function e(h,w){if(this.vertexSrc=h,this.fragTemplate=w,this.programCache={},this.defaultGroupCache={},0>w.indexOf("%count%"))throw Error('Fragment template must contain "%count%".');if(0>w.indexOf("%forloop%"))throw Error('Fragment template must contain "%forloop%".')}return e.prototype.generateShader=function(h){if(!this.programCache[h]){for(var w=new Int32Array(h),q=0;q<h;q++)w[q]=q;this.defaultGroupCache[h]=oV.from({uSamplers:w},!0);var tr=this.fragTemplate;tr=(tr=tr.replace(/%count%/gi,""+h)).replace(/%forloop%/gi,this.generateSampleSrc(h)),this.programCache[h]=new sl(this.vertexSrc,tr)}var tn={tint:new Float32Array([1,1,1,1]),translationMatrix:new iU,default:this.defaultGroupCache[h]};return new sp(this.programCache[h],tn)},e.prototype.generateSampleSrc=function(h){var w="";w+=`

`;for(var q=0;q<h;q++)q>0&&(w+=`
else `),q<h-1&&(w+="if(vTextureId < "+q+".5)"),w+=`
{
	color = texture2D(uSamplers[`+q+"], vTextureCoord);"+`
}`;return w+`

`},e}(),sq=function(h){function n(w){void 0===w&&(w=!1);var q=h.call(this)||this;return q._buffer=new oM(null,w,!1),q._indexBuffer=new oM(null,w,!0),q.addAttribute("aVertexPosition",q._buffer,2,!1,iu.FLOAT).addAttribute("aTextureCoord",q._buffer,2,!1,iu.FLOAT).addAttribute("aColor",q._buffer,4,!0,iu.UNSIGNED_BYTE).addAttribute("aTextureId",q._buffer,1,!0,iu.FLOAT).addIndex(q._indexBuffer),q}return Je(n,h),n}(oF),sZ=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,sJ=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,sQ=function(){function e(){}return e.create=function(h){var w=Object.assign({vertex:sZ,fragment:sJ,geometryClass:sq,vertexSize:6},h),q=w.vertex,tr=w.fragment,tn=w.vertexSize,ti=w.geometryClass;return function(h){function u(w){var to=h.call(this,w)||this;return to.shaderGenerator=new sW(q,tr),to.geometryClass=ti,to.vertexSize=tn,to}return Je(u,h),u}(sY)},Object.defineProperty(e,"defaultVertexSrc",{get:function(){return sZ},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentTemplate",{get:function(){return sJ},enumerable:!1,configurable:!0}),e}(),s$=sQ.create(),s0=function(){function e(h){var w=this;h=Object.assign({forceCanvas:!1},h),this.renderer=Sg(h),this.stage=new iW,e._plugins.forEach(function(q){q.init.call(w,h)})}return e.registerPlugin=function(h){e._plugins.push(h)},e.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(e.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),e.prototype.destroy=function(h,w){var q=this,tr=e._plugins.slice(0);tr.reverse(),tr.forEach(function(h){h.destroy.call(q)}),this.stage.destroy(w),this.stage=null,this.renderer.destroy(h),this.renderer=null},e}();s0._plugins=[];var s2=function(){function e(){}return e.init=function(h){var w=this;Object.defineProperty(this,"resizeTo",{set:function(h){window.removeEventListener("resize",this.queueResize),this._resizeTo=h,h&&(window.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){w._resizeTo&&(w.cancelResize(),w._resizeId=requestAnimationFrame(function(){return w.resize()}))},this.cancelResize=function(){w._resizeId&&(cancelAnimationFrame(w._resizeId),w._resizeId=null)},this.resize=function(){if(w._resizeTo){if(w.cancelResize(),w._resizeTo===window)h=window.innerWidth,q=window.innerHeight;else{var h,q,tr=w._resizeTo,tn=tr.clientWidth,ti=tr.clientHeight;h=tn,q=ti}w.renderer.resize(h,q)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=h.resizeTo||null},e.destroy=function(){this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},e}();s0.registerPlugin(s2);/*!
 * @pixi/extract - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var s3=new iS,s4=function(){function e(h){this.renderer=h,h.extract=this}return e.prototype.image=function(h,w,q){var tr=new Image;return tr.src=this.base64(h,w,q),tr},e.prototype.base64=function(h,w,q){return this.canvas(h).toDataURL(w,q)},e.prototype.canvas=function(h){var w,q,tr,tn=this.renderer,ti=!1,to=!1;h&&(h instanceof oI?tr=h:(tr=this.renderer.generateTexture(h),to=!0)),tr?(w=tr.baseTexture.resolution,q=tr.frame,ti=!1,tn.renderTexture.bind(tr)):(w=this.renderer.resolution,ti=!0,(q=s3).width=this.renderer.width,q.height=this.renderer.height,tn.renderTexture.bind(null));var ts=Math.floor(q.width*w+1e-4),tu=Math.floor(q.height*w+1e-4),tl=new nB(ts,tu,1),tc=new Uint8Array(4*ts*tu),tp=tn.gl;tp.readPixels(q.x*w,q.y*w,ts,tu,tp.RGBA,tp.UNSIGNED_BYTE,tc);var td=tl.context.getImageData(0,0,ts,tu);if(e.arrayPostDivide(tc,td.data),tl.context.putImageData(td,0,0),ti){var tm=new nB(tl.width,tl.height,1);tm.context.scale(1,-1),tm.context.drawImage(tl.canvas,0,-tu),tl.destroy(),tl=tm}return to&&tr.destroy(!0),tl.canvas},e.prototype.pixels=function(h){var w,q,tr,tn=this.renderer,ti=!1;h&&(h instanceof oI?tr=h:(tr=this.renderer.generateTexture(h),ti=!0)),tr?(w=tr.baseTexture.resolution,q=tr.frame,tn.renderTexture.bind(tr)):(w=tn.resolution,(q=s3).width=tn.width,q.height=tn.height,tn.renderTexture.bind(null));var to=q.width*w,ts=q.height*w,tu=new Uint8Array(4*to*ts),tl=tn.gl;return tl.readPixels(q.x*w,q.y*w,to,ts,tl.RGBA,tl.UNSIGNED_BYTE,tu),ti&&tr.destroy(!0),e.arrayPostDivide(tu,tu),tu},e.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},e.arrayPostDivide=function(h,w){for(var q=0;q<h.length;q+=4){var tr=w[q+3]=h[q+3];0!==tr?(w[q]=Math.round(Math.min(255*h[q]/tr,255)),w[q+1]=Math.round(Math.min(255*h[q+1]/tr,255)),w[q+2]=Math.round(Math.min(255*h[q+2]/tr,255))):(w[q]=h[q],w[q+1]=h[q+1],w[q+2]=h[q+2])}},e}();let s5=wu((h,w={})=>{if(!h)return;let q={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?))?((((?:[^?#/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@/]*@)([^:/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#/]*\.[^?#/.]+(?:[?#]|$)))*\/?)?([^?#/]*))(?:\?([^#]*))?(?:#(.*))?)/}},tr=q.parser[w.strictMode?"strict":"loose"].exec(h),tn={},ti=14;for(;ti--;)tn[q.key[ti]]=tr[ti]||"";return tn[q.q.name]={},tn[q.key[12]].replace(q.q.parser,function(h,w,tr){w&&(tn[q.q.name][w]=tr)}),tn});let Ts=class Ts{constructor(h,w=!1,q){this._fn=h,this._once=w,this._thisArg=q,this._next=this._prev=this._owner=null}detach(){return null!==this._owner&&(this._owner.detach(this),!0)}};function Mp(h,w){return h._head?(h._tail._next=w,w._prev=h._tail):h._head=w,h._tail=w,w._owner=h,w}let In=class In{constructor(){this._head=this._tail=void 0}handlers(h=!1){let w=this._head;if(h)return!!w;let q=[];for(;w;)q.push(w),w=w._next;return q}has(h){if(!(h instanceof Ts))throw Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return h._owner===this}dispatch(){let h=this._head;if(!h)return!1;for(;h;)h._once&&this.detach(h),h._fn.apply(h._thisArg,arguments),h=h._next;return!0}add(h,w=null){if("function"!=typeof h)throw Error("MiniSignal#add(): First arg must be a Function.");return Mp(this,new Ts(h,!1,w))}once(h,w=null){if("function"!=typeof h)throw Error("MiniSignal#once(): First arg must be a Function.");return Mp(this,new Ts(h,!0,w))}detach(h){if(!(h instanceof Ts))throw Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return h._owner!==this||(h._prev&&(h._prev._next=h._next),h._next&&(h._next._prev=h._prev),h===this._head?(this._head=h._next,null===h._next&&(this._tail=null)):h===this._tail&&(this._tail=h._prev,this._tail._next=null),h._owner=null),this}detachAll(){let h=this._head;if(!h)return this;for(this._head=this._tail=null;h;)h._owner=null,h=h._next;return this}};/*!
 * resource-loader - v3.0.1
 * https://github.com/pixijs/pixi-sound
 * Compiled Tue, 02 Jul 2019 14:06:18 UTC
 *
 * resource-loader is licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license
 */function di(){}function Dp(h,w,q,tr){var tn=0,ti=h.length;!function a(to){if(to||tn===ti){q&&q(to);return}tr?setTimeout(function(){w(h[tn++],a)},1):w(h[tn++],a)}()}var s6={};function Fp(h,w){for(var q=0;q<w.length;q++){var tr=w[q];tr.enumerable=tr.enumerable||!1,tr.configurable=!0,"value"in tr&&(tr.writable=!0),Object.defineProperty(h,tr.key,tr)}}function Dg(h,w,q){return w&&Fp(h.prototype,w),q&&Fp(h,q),h}var s8=!!(window.XDomainRequest&&!("withCredentials"in new XMLHttpRequest)),s7=null;function vb(){}var s9=function(){function e(h,w,q){if("string"!=typeof h||"string"!=typeof w)throw Error("Both name and url are required for constructing a resource.");q=q||{},this._flags=0,this._setFlag(e.STATUS_FLAGS.DATA_URL,0===w.indexOf("data:")),this.name=h,this.url=w,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===q.crossOrigin?"anonymous":q.crossOrigin,this.timeout=q.timeout||0,this.loadType=q.loadType||this._determineLoadType(),this.xhrType=q.xhrType,this.metadata=q.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=e.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=vb,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new In,this.onProgress=new In,this.onComplete=new In,this.onAfterMiddleware=new In}e.setExtensionLoadType=function(h,w){Gp(e._loadTypeMap,h,w)},e.setExtensionXhrType=function(h,w){Gp(e._xhrTypeMap,h,w)};var h=e.prototype;return h.complete=function(){this._clearEvents(),this._finish()},h.abort=function(h){if(!this.error){if(this.error=Error(h),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data){if(this.data.src)this.data.src=e.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild)}this._finish()}},h.load=function(h){var w=this;if(!this.isLoading){if(this.isComplete){h&&setTimeout(function(){return h(w)},1);return}switch(h&&this.onComplete.once(h),this._setFlag(e.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(!1===this.crossOrigin||"string"!=typeof this.crossOrigin)&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case e.LOAD_TYPE.IMAGE:this.type=e.TYPE.IMAGE,this._loadElement("image");break;case e.LOAD_TYPE.AUDIO:this.type=e.TYPE.AUDIO,this._loadSourceElement("audio");break;case e.LOAD_TYPE.VIDEO:this.type=e.TYPE.VIDEO,this._loadSourceElement("video");break;case e.LOAD_TYPE.XHR:default:s8&&this.crossOrigin?this._loadXdr():this._loadXhr()}}},h._hasFlag=function(h){return(this._flags&h)!=0},h._setFlag=function(h,w){this._flags=w?this._flags|h:this._flags&~h},h._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},h._finish=function(){if(this.isComplete)throw Error("Complete called again for an already completed resource.");this._setFlag(e.STATUS_FLAGS.COMPLETE,!0),this._setFlag(e.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},h._loadElement=function(h){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===h&&"u">typeof window.Image?this.data=new Image:this.data=document.createElement(h),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},h._loadSourceElement=function(h){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===h&&"u">typeof window.Audio?this.data=new Audio:this.data=document.createElement(h),null===this.data){this.abort("Unsupported element: "+h);return}if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource){if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var w=this.metadata.mimeType,q=0;q<this.url.length;++q)this.data.appendChild(this._createSource(h,this.url[q],Array.isArray(w)?w[q]:w));else{var tr=this.metadata.mimeType;this.data.appendChild(this._createSource(h,this.url,Array.isArray(tr)?tr[0]:tr))}}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},h._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var h=this.xhr=new XMLHttpRequest;h.open("GET",this.url,!0),h.timeout=this.timeout,this.xhrType===e.XHR_RESPONSE_TYPE.JSON||this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT?h.responseType=e.XHR_RESPONSE_TYPE.TEXT:h.responseType=this.xhrType,h.addEventListener("error",this._boundXhrOnError,!1),h.addEventListener("timeout",this._boundXhrOnTimeout,!1),h.addEventListener("abort",this._boundXhrOnAbort,!1),h.addEventListener("progress",this._boundOnProgress,!1),h.addEventListener("load",this._boundXhrOnLoad,!1),h.send()},h._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var h=this.xhr=new XDomainRequest;h.timeout=this.timeout||5e3,h.onerror=this._boundXhrOnError,h.ontimeout=this._boundXhrOnTimeout,h.onprogress=this._boundOnProgress,h.onload=this._boundXhrOnLoad,h.open("GET",this.url,!0),setTimeout(function(){return h.send()},1)},h._createSource=function(h,w,q){q||(q=h+"/"+this._getExtension(w));var tr=document.createElement("source");return tr.src=w,tr.type=q,tr},h._onError=function(h){this.abort("Failed to load element using: "+h.target.nodeName)},h._onProgress=function(h){h&&h.lengthComputable&&this.onProgress.dispatch(this,h.loaded/h.total)},h._onTimeout=function(){this.abort("Load timed out.")},h._xhrOnError=function(){var h=this.xhr;this.abort(ml(h)+" Request failed. Status: "+h.status+', text: "'+h.statusText+'"')},h._xhrOnTimeout=function(){var h=this.xhr;this.abort(ml(h)+" Request timed out.")},h._xhrOnAbort=function(){var h=this.xhr;this.abort(ml(h)+" Request was aborted by the user.")},h._xhrOnLoad=function(){var h=this.xhr,w="",q=typeof h.status>"u"?200:h.status;if((""===h.responseType||"text"===h.responseType||typeof h.responseType>"u")&&(w=h.responseText),0===q&&(w.length>0||h.responseType===e.XHR_RESPONSE_TYPE.BUFFER)?q=200:1223===q&&(q=204),(q/100|0)==2){if(this.xhrType===e.XHR_RESPONSE_TYPE.TEXT)this.data=w,this.type=e.TYPE.TEXT;else if(this.xhrType===e.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(w),this.type=e.TYPE.JSON}catch(h){this.abort("Error trying to parse loaded json: "+h);return}else if(this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var tr=new DOMParser;this.data=tr.parseFromString(w,"text/xml")}else{var tn=document.createElement("div");tn.innerHTML=w,this.data=tn}this.type=e.TYPE.XML}catch(h){this.abort("Error trying to parse loaded xml: "+h);return}else this.data=h.response||w}else{this.abort("["+h.status+"] "+h.statusText+": "+h.responseURL);return}this.complete()},h._determineCrossOrigin=function(h,w){if(0===h.indexOf("data:"))return"";if(window.origin!==window.location.origin)return"anonymous";w=w||window.location,s7||(s7=document.createElement("a")),s7.href=h;var q=!(h=s5(s7.href,{strictMode:!0})).port&&""===w.port||h.port===w.port,tr=h.protocol?h.protocol+":":"";return h.host===w.hostname&&q&&tr===w.protocol?"":"anonymous"},h._determineXhrType=function(){return e._xhrTypeMap[this.extension]||e.XHR_RESPONSE_TYPE.TEXT},h._determineLoadType=function(){return e._loadTypeMap[this.extension]||e.LOAD_TYPE.XHR},h._getExtension=function(){var h=this.url,w="";if(this.isDataUrl){var q=h.indexOf("/");w=h.substring(q+1,h.indexOf(";",q))}else{var tr=h.indexOf("?"),tn=h.indexOf("#"),ti=Math.min(tr>-1?tr:h.length,tn>-1?tn:h.length);w=(h=h.substring(0,ti)).substring(h.lastIndexOf(".")+1)}return w.toLowerCase()},h._getMimeFromXhrType=function(h){switch(h){case e.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case e.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case e.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case e.XHR_RESPONSE_TYPE.JSON:return"application/json";case e.XHR_RESPONSE_TYPE.DEFAULT:case e.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},Dg(e,[{key:"isDataUrl",get:function(){return this._hasFlag(e.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(e.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(e.STATUS_FLAGS.LOADING)}}]),e}();function Gp(h,w,q){w&&0===w.indexOf(".")&&(w=w.substring(1)),w&&(h[w]=q)}function ml(h){return h.toString().replace("object ","")}s9.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},s9.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},s9.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},s9.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},s9._loadTypeMap={gif:s9.LOAD_TYPE.IMAGE,png:s9.LOAD_TYPE.IMAGE,bmp:s9.LOAD_TYPE.IMAGE,jpg:s9.LOAD_TYPE.IMAGE,jpeg:s9.LOAD_TYPE.IMAGE,tif:s9.LOAD_TYPE.IMAGE,tiff:s9.LOAD_TYPE.IMAGE,webp:s9.LOAD_TYPE.IMAGE,tga:s9.LOAD_TYPE.IMAGE,svg:s9.LOAD_TYPE.IMAGE,"svg+xml":s9.LOAD_TYPE.IMAGE,mp3:s9.LOAD_TYPE.AUDIO,ogg:s9.LOAD_TYPE.AUDIO,wav:s9.LOAD_TYPE.AUDIO,mp4:s9.LOAD_TYPE.VIDEO,webm:s9.LOAD_TYPE.VIDEO},s9._xhrTypeMap={xhtml:s9.XHR_RESPONSE_TYPE.DOCUMENT,html:s9.XHR_RESPONSE_TYPE.DOCUMENT,htm:s9.XHR_RESPONSE_TYPE.DOCUMENT,xml:s9.XHR_RESPONSE_TYPE.DOCUMENT,tmx:s9.XHR_RESPONSE_TYPE.DOCUMENT,svg:s9.XHR_RESPONSE_TYPE.DOCUMENT,tsx:s9.XHR_RESPONSE_TYPE.DOCUMENT,gif:s9.XHR_RESPONSE_TYPE.BLOB,png:s9.XHR_RESPONSE_TYPE.BLOB,bmp:s9.XHR_RESPONSE_TYPE.BLOB,jpg:s9.XHR_RESPONSE_TYPE.BLOB,jpeg:s9.XHR_RESPONSE_TYPE.BLOB,tif:s9.XHR_RESPONSE_TYPE.BLOB,tiff:s9.XHR_RESPONSE_TYPE.BLOB,webp:s9.XHR_RESPONSE_TYPE.BLOB,tga:s9.XHR_RESPONSE_TYPE.BLOB,json:s9.XHR_RESPONSE_TYPE.JSON,text:s9.XHR_RESPONSE_TYPE.TEXT,txt:s9.XHR_RESPONSE_TYPE.TEXT,ttf:s9.XHR_RESPONSE_TYPE.BUFFER,otf:s9.XHR_RESPONSE_TYPE.BUFFER},s9.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";var ar=window.URL||window.webkitURL,an=/(#[\w-]+)?$/,ai=function(){function e(h,w){var q=this;void 0===h&&(h=""),void 0===w&&(w=10),this.baseUrl=h,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(h,w){return q._loadResource(h,w)},this._queue=function(h,w){if(null==w)w=1;else if(0===w)throw Error("Concurrency must not be zero");var q=0,tr={_tasks:[],concurrency:w,saturated:di,unsaturated:di,buffer:w/4,empty:di,drain:di,error:di,started:!1,paused:!1,push:function(h,w){i(h,!1,w)},kill:function(){q=0,tr.drain=di,tr.started=!1,tr._tasks=[]},unshift:function(h,w){i(h,!0,w)},process:function(){for(;!tr.paused&&q<tr.concurrency&&tr._tasks.length;){var w=tr._tasks.shift();0===tr._tasks.length&&tr.empty(),(q+=1)===tr.concurrency&&tr.saturated(),h(w.data,function(h){return function(){if(null===h)throw Error("Callback was already called.");var w=h;h=null,w.apply(this,arguments)}}(function(h){return function(){q-=1,h.callback.apply(h,arguments),null!=arguments[0]&&tr.error(arguments[0],h.data),q<=tr.concurrency-tr.buffer&&tr.unsaturated(),tr.idle()&&tr.drain(),tr.process()}}(w)))}},length:function(){return tr._tasks.length},running:function(){return q},idle:function(){return tr._tasks.length+q===0},pause:function(){!0!==tr.paused&&(tr.paused=!0)},resume:function(){if(!1!==tr.paused){tr.paused=!1;for(var h=1;h<=tr.concurrency;h++)tr.process()}}};function i(h,w,q){if(null!=q&&"function"!=typeof q)throw Error("task callback must be a function");if(tr.started=!0,null==h&&tr.idle()){setTimeout(function(){return tr.drain()},1);return}var tn={data:h,callback:"function"==typeof q?q:di};w?tr._tasks.unshift(tn):tr._tasks.push(tn),setTimeout(function(){return tr.process()},1)}return tr}(this._boundLoadResource,w),this._queue.pause(),this.resources={},this.onProgress=new In,this.onError=new In,this.onLoad=new In,this.onStart=new In,this.onComplete=new In;for(var tr=0;tr<e._defaultBeforeMiddleware.length;++tr)this.pre(e._defaultBeforeMiddleware[tr]);for(var tn=0;tn<e._defaultAfterMiddleware.length;++tn)this.use(e._defaultAfterMiddleware[tn])}var h=e.prototype;return h.add=function(h,w,q,tr){if(Array.isArray(h)){for(var tn=0;tn<h.length;++tn)this.add(h[tn]);return this}if("object"==typeof h&&(tr=w||h.callback||h.onComplete,q=h,w=h.url,h=h.name||h.key||h.url),"string"!=typeof w&&(tr=q,q=w,w=h),"string"!=typeof w)throw Error("No url passed to add resource to loader.");if("function"==typeof q&&(tr=q,q=null),this.loading&&(!q||!q.parentResource))throw Error("Cannot add resources while the loader is running.");if(this.resources[h])throw Error('Resource named "'+h+'" already exists.');if(w=this._prepareUrl(w),this.resources[h]=new s9(h,w,q),"function"==typeof tr&&this.resources[h].onAfterMiddleware.once(tr),this.loading){for(var ti=q.parentResource,to=[],ts=0;ts<ti.children.length;++ts)ti.children[ts].isComplete||to.push(ti.children[ts]);var tu=ti.progressChunk*(to.length+1)/(to.length+2);ti.children.push(this.resources[h]),ti.progressChunk=tu;for(var tl=0;tl<to.length;++tl)to[tl].progressChunk=tu;this.resources[h].progressChunk=tu}return this._queue.push(this.resources[h]),this},h.pre=function(h){return this._beforeMiddleware.push(h),this},h.use=function(h){return this._afterMiddleware.push(h),this},h.reset=function(){for(var h in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var w=this.resources[h];w._onLoadBinding&&w._onLoadBinding.detach(),w.isLoading&&w.abort()}return this.resources={},this},h.load=function(h){if("function"==typeof h&&this.onComplete.once(h),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var w=this._queue._tasks.length,q=100/w,tr=0;tr<this._queue._tasks.length;++tr)this._queue._tasks[tr].data.progressChunk=q;this._onStart(),this._queue.resume()}return this},h._prepareUrl=function(h){var w,q=s5(h,{strictMode:!0});if(w=q.protocol||!q.path||0===h.indexOf("//")?h:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==h.charAt(0)?this.baseUrl+"/"+h:this.baseUrl+h,this.defaultQueryString){var tr=an.exec(w)[0];-1!==(w=w.substr(0,w.length-tr.length)).indexOf("?")?w+="&"+this.defaultQueryString:w+="?"+this.defaultQueryString,w+=tr}return w},h._loadResource=function(h,w){var q=this;h._dequeue=w,Dp(this._beforeMiddleware,function(w,tr){w.call(q,h,function(){tr(h.isComplete?{}:null)})},function(){h.isComplete?q._onLoad(h):(h._onLoadBinding=h.onComplete.once(q._onLoad,q),h.load())},!0)},h._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},h._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},h._onLoad=function(h){var w=this;h._onLoadBinding=null,this._resourcesParsing.push(h),h._dequeue(),Dp(this._afterMiddleware,function(q,tr){q.call(w,h,tr)},function(){h.onAfterMiddleware.dispatch(h),w.progress=Math.min(100,w.progress+h.progressChunk),w.onProgress.dispatch(w,h),h.error?w.onError.dispatch(h.error,w,h):w.onLoad.dispatch(w,h),w._resourcesParsing.splice(w._resourcesParsing.indexOf(h),1),w._queue.idle()&&0===w._resourcesParsing.length&&w._onComplete()},!0)},Dg(e,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(h){this._queue.concurrency=h}}]),e}();ai._defaultBeforeMiddleware=[],ai._defaultAfterMiddleware=[],ai.pre=function(h){return ai._defaultBeforeMiddleware.push(h),ai},ai.use=function(h){return ai._defaultAfterMiddleware.push(h),ai};/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Cc=function(h,w){return(Cc=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,w){h.__proto__=w}||function(h,w){for(var q in w)w.hasOwnProperty(q)&&(h[q]=w[q])})(h,w)},ao=function(){function e(){}return e.use=function(h,w){h.data&&h.type===s9.TYPE.IMAGE&&(h.texture=oS.fromLoader(h.data,h.url,h.name)),w()},e}(),as=function(h){function n(w,q){for(var tr=h.call(this,w,q)||this,tn=0;tn<n._plugins.length;++tn){var ti=n._plugins[tn],to=ti.pre,ts=ti.use;to&&tr.pre(to),ts&&tr.use(ts)}return tr._protected=!1,tr}return!function(h,w){function t(){this.constructor=h}Cc(h,w),h.prototype=null===w?Object.create(w):(t.prototype=w.prototype,new t)}(n,h),n.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(n,"shared",{get:function(){var h=n._shared;return h||((h=new n)._protected=!0,n._shared=h),h},enumerable:!1,configurable:!0}),n.registerPlugin=function(h){return n._plugins.push(h),h.add&&h.add(),n},n._plugins=[],n}(ai);as.registerPlugin({use:{caching:function(h,w){var q=this;s6[h.url]?(h.data=s6[h.url],h.complete()):h.onComplete.once(function(){return s6[q.url]=q.data}),w()},parsing:function(h,w){if(!h.data){w();return}if(h.xhr&&h.xhrType===s9.XHR_RESPONSE_TYPE.BLOB){if(window.Blob&&"string"!=typeof h.data){if(0===h.data.type.indexOf("image")){var q=ar.createObjectURL(h.data);h.blob=h.data,h.data=new Image,h.data.src=q,h.type=s9.TYPE.IMAGE,h.data.onload=function(){ar.revokeObjectURL(q),h.data.onload=null,w()};return}}else{var tr=h.xhr.getResponseHeader("content-type");if(tr&&0===tr.indexOf("image")){h.data=new Image,h.data.src="data:"+tr+";base64,"+function(h){for(var w="",q=0;q<h.length;){for(var tr=[0,0,0],tn=[0,0,0,0],ti=0;ti<tr.length;++ti)q<h.length?tr[ti]=255&h.charCodeAt(q++):tr[ti]=0;switch(tn[0]=tr[0]>>2,tn[1]=(3&tr[0])<<4|tr[1]>>4,tn[2]=(15&tr[1])<<2|tr[2]>>6,tn[3]=63&tr[2],q-(h.length-1)){case 2:tn[3]=64,tn[2]=64;break;case 1:tn[3]=64}for(var to=0;to<tn.length;++to)w+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(tn[to])}return w}(h.xhr.responseText),h.type=s9.TYPE.IMAGE,h.data.onload=function(){h.data.onload=null,w()};return}}}w()}}.parsing}),as.registerPlugin(ao);var aa=function(){function e(){}return e.init=function(h){h=Object.assign({sharedLoader:!1},h),this.loader=h.sharedLoader?as.shared:new as},e.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},e}(),Uc=function(h,w){return(Uc=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,w){h.__proto__=w}||function(h,w){for(var q in w)w.hasOwnProperty(q)&&(h[q]=w[q])})(h,w)};function Gg(h,w){function t(){this.constructor=h}Uc(h,w),h.prototype=null===w?Object.create(w):(t.prototype=w.prototype,new t)}var au=function(h){function n(w,q,tr,tn){void 0===w&&(w=1500),void 0===tr&&(tr=16384),void 0===tn&&(tn=!1);var ti=h.call(this)||this;return tr>16384&&(tr=16384),ti._properties=[!1,!0,!1,!1,!1],ti._maxSize=w,ti._batchSize=tr,ti._buffers=null,ti._bufferUpdateIDs=[],ti._updateID=0,ti.interactiveChildren=!1,ti.blendMode=n7.NORMAL,ti.autoResize=tn,ti.roundPixels=!0,ti.baseTexture=null,ti.setProperties(q),ti._tint=0,ti.tintRgb=new Float32Array(4),ti.tint=16777215,ti}return Gg(n,h),n.prototype.setProperties=function(h){h&&(this._properties[0]="vertices"in h||"scale"in h?!!h.vertices||!!h.scale:this._properties[0],this._properties[1]="position"in h?!!h.position:this._properties[1],this._properties[2]="rotation"in h?!!h.rotation:this._properties[2],this._properties[3]="uvs"in h?!!h.uvs:this._properties[3],this._properties[4]="tint"in h||"alpha"in h?!!h.tint||!!h.alpha:this._properties[4])},n.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(n.prototype,"tint",{get:function(){return this._tint},set:function(h){this._tint=h,Vi(h,this.tintRgb)},enumerable:!1,configurable:!0}),n.prototype.render=function(h){var w=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return w.onChildrenChange(0)})),h.batch.setObjectRenderer(h.plugins.particle),h.plugins.particle.render(this))},n.prototype.onChildrenChange=function(h){for(var w=Math.floor(h/this._batchSize);this._bufferUpdateIDs.length<w;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[w]=++this._updateID},n.prototype.dispose=function(){if(this._buffers){for(var h=0;h<this._buffers.length;++h)this._buffers[h].destroy();this._buffers=null}},n.prototype.destroy=function(w){h.prototype.destroy.call(this,w),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},n}(iW),al=function(){function e(h,w,q){this.geometry=new oF,this.indexBuffer=null,this.size=q,this.dynamicProperties=[],this.staticProperties=[];for(var tr=0;tr<h.length;++tr){var tn=h[tr];tn={attributeName:tn.attributeName,size:tn.size,uploadFunction:tn.uploadFunction,type:tn.type||iu.FLOAT,offset:tn.offset},w[tr]?this.dynamicProperties.push(tn):this.staticProperties.push(tn)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return e.prototype.initBuffers=function(){var h=this.geometry,w=0;this.indexBuffer=new oM(Rv(this.size),!0,!0),h.addIndex(this.indexBuffer),this.dynamicStride=0;for(var q=0;q<this.dynamicProperties.length;++q){var tr=this.dynamicProperties[q];tr.offset=w,w+=tr.size,this.dynamicStride+=tr.size}var tn=new ArrayBuffer(this.size*this.dynamicStride*16);this.dynamicData=new Float32Array(tn),this.dynamicDataUint32=new Uint32Array(tn),this.dynamicBuffer=new oM(this.dynamicData,!1,!1);var ti=0;this.staticStride=0;for(var q=0;q<this.staticProperties.length;++q){var tr=this.staticProperties[q];tr.offset=ti,ti+=tr.size,this.staticStride+=tr.size}var to=new ArrayBuffer(this.size*this.staticStride*16);this.staticData=new Float32Array(to),this.staticDataUint32=new Uint32Array(to),this.staticBuffer=new oM(this.staticData,!0,!1);for(var q=0;q<this.dynamicProperties.length;++q){var tr=this.dynamicProperties[q];h.addAttribute(tr.attributeName,this.dynamicBuffer,0,tr.type===iu.UNSIGNED_BYTE,tr.type,4*this.dynamicStride,4*tr.offset)}for(var q=0;q<this.staticProperties.length;++q){var tr=this.staticProperties[q];h.addAttribute(tr.attributeName,this.staticBuffer,0,tr.type===iu.UNSIGNED_BYTE,tr.type,4*this.staticStride,4*tr.offset)}},e.prototype.uploadDynamic=function(h,w,q){for(var tr=0;tr<this.dynamicProperties.length;tr++){var tn=this.dynamicProperties[tr];tn.uploadFunction(h,w,q,tn.type===iu.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,tn.offset)}this.dynamicBuffer._updateID++},e.prototype.uploadStatic=function(h,w,q){for(var tr=0;tr<this.staticProperties.length;tr++){var tn=this.staticProperties[tr];tn.uploadFunction(h,w,q,tn.type===iu.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,tn.offset)}this.staticBuffer._updateID++},e.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},e}(),ap=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,af=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`,ad=function(h){function n(w){var q=h.call(this,w)||this;return q.shader=null,q.properties=null,q.tempMatrix=new iU,q.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:q.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:q.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:q.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:q.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:iu.UNSIGNED_BYTE,uploadFunction:q.uploadTint,offset:0}],q.shader=sp.from(af,ap,{}),q.state=sd.for2d(),q}return Gg(n,h),n.prototype.render=function(h){var w=h.children,q=h._maxSize,tr=h._batchSize,tn=this.renderer,ti=w.length;if(0!==ti){ti>q&&!h.autoResize&&(ti=q);var to=h._buffers;to||(to=h._buffers=this.generateBuffers(h));var ts=w[0]._texture.baseTexture;this.state.blendMode=nf(h.blendMode,ts.alphaMode),tn.state.set(this.state);var tu=tn.gl,tl=h.worldTransform.copyTo(this.tempMatrix);tl.prepend(tn.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=tl.toArray(!0),this.shader.uniforms.uColor=Pv(h.tintRgb,h.worldAlpha,this.shader.uniforms.uColor,ts.alphaMode),this.shader.uniforms.uSampler=ts,this.renderer.shader.bind(this.shader);for(var tc=!1,tp=0,td=0;tp<ti;tp+=tr,td+=1){var tm=ti-tp;tm>tr&&(tm=tr),td>=to.length&&to.push(this._generateOneMoreBuffer(h));var ty=to[td];ty.uploadDynamic(w,tp,tm);var tv=h._bufferUpdateIDs[td]||0;(tc=tc||ty._updateID<tv)&&(ty._updateID=h._updateID,ty.uploadStatic(w,tp,tm)),tn.geometry.bind(ty.geometry),tu.drawElements(tu.TRIANGLES,6*tm,tu.UNSIGNED_SHORT,0)}}},n.prototype.generateBuffers=function(h){for(var w=[],q=h._maxSize,tr=h._batchSize,tn=h._properties,ti=0;ti<q;ti+=tr)w.push(new al(this.properties,tn,tr));return w},n.prototype._generateOneMoreBuffer=function(h){var w=h._batchSize,q=h._properties;return new al(this.properties,q,w)},n.prototype.uploadVertices=function(h,w,q,tr,tn,ti){for(var to=0,ts=0,tu=0,tl=0,tc=0;tc<q;++tc){var tp=h[w+tc],td=tp._texture,tm=tp.scale.x,ty=tp.scale.y,tv=td.trim,tb=td.orig;tv?(to=(ts=tv.x-tp.anchor.x*tb.width)+tv.width,tu=(tl=tv.y-tp.anchor.y*tb.height)+tv.height):(to=tb.width*(1-tp.anchor.x),ts=-(tb.width*tp.anchor.x),tu=tb.height*(1-tp.anchor.y),tl=-(tb.height*tp.anchor.y)),tr[ti]=ts*tm,tr[ti+1]=tl*ty,tr[ti+tn]=to*tm,tr[ti+tn+1]=tl*ty,tr[ti+2*tn]=to*tm,tr[ti+2*tn+1]=tu*ty,tr[ti+3*tn]=ts*tm,tr[ti+3*tn+1]=tu*ty,ti+=4*tn}},n.prototype.uploadPosition=function(h,w,q,tr,tn,ti){for(var to=0;to<q;to++){var ts=h[w+to].position;tr[ti]=ts.x,tr[ti+1]=ts.y,tr[ti+tn]=ts.x,tr[ti+tn+1]=ts.y,tr[ti+2*tn]=ts.x,tr[ti+2*tn+1]=ts.y,tr[ti+3*tn]=ts.x,tr[ti+3*tn+1]=ts.y,ti+=4*tn}},n.prototype.uploadRotation=function(h,w,q,tr,tn,ti){for(var to=0;to<q;to++){var ts=h[w+to].rotation;tr[ti]=ts,tr[ti+tn]=ts,tr[ti+2*tn]=ts,tr[ti+3*tn]=ts,ti+=4*tn}},n.prototype.uploadUvs=function(h,w,q,tr,tn,ti){for(var to=0;to<q;++to){var ts=h[w+to]._texture._uvs;ts?(tr[ti]=ts.x0,tr[ti+1]=ts.y0,tr[ti+tn]=ts.x1,tr[ti+tn+1]=ts.y1,tr[ti+2*tn]=ts.x2,tr[ti+2*tn+1]=ts.y2,tr[ti+3*tn]=ts.x3,tr[ti+3*tn+1]=ts.y3):(tr[ti]=0,tr[ti+1]=0,tr[ti+tn]=0,tr[ti+tn+1]=0,tr[ti+2*tn]=0,tr[ti+2*tn+1]=0,tr[ti+3*tn]=0,tr[ti+3*tn+1]=0),ti+=4*tn}},n.prototype.uploadTint=function(h,w,q,tr,tn,ti){for(var to=0;to<q;++to){var ts=h[w+to],tu=ts._texture.baseTexture.alphaMode>0,tl=ts.alpha,tc=tl<1&&tu?Su(ts._tintRGB,tl):ts._tintRGB+(255*tl<<24);tr[ti]=tc,tr[ti+tn]=tc,tr[ti+2*tn]=tc,tr[ti+3*tn]=tc,ti+=4*tn}},n.prototype.destroy=function(){h.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},n}(oz);(aL=aN||(aN={})).MITER="miter",aL.BEVEL="bevel",aL.ROUND="round",(aS=aM||(aM={})).BUTT="butt",aS.ROUND="round",aS.SQUARE="square";var a_={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(h,w){if(void 0===w&&(w=20),!this.adaptive||!h||isNaN(h))return w;var q=Math.ceil(h/this.maxLength);return q<this.minSegments?q=this.minSegments:q>this.maxSegments&&(q=this.maxSegments),q}},am=function(){function e(){this.color=16777215,this.alpha=1,this.texture=oS.WHITE,this.matrix=null,this.visible=!1,this.reset()}return e.prototype.clone=function(){var h=new e;return h.color=this.color,h.alpha=this.alpha,h.texture=this.texture,h.matrix=this.matrix,h.visible=this.visible,h},e.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=oS.WHITE,this.matrix=null,this.visible=!1},e.prototype.destroy=function(){this.texture=null,this.matrix=null},e}(),Mc=function(h,w){return(Mc=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,w){h.__proto__=w}||function(h,w){for(var q in w)w.hasOwnProperty(q)&&(h[q]=w[q])})(h,w)};function Nu(h,w){function t(){this.constructor=h}Mc(h,w),h.prototype=null===w?Object.create(w):(t.prototype=w.prototype,new t)}var ay={build:function(h){h.points=h.shape.points.slice()},triangulate:function(h,w){var q=h.points,tr=h.holes,tn=w.points,ti=w.indices;if(q.length>=6){for(var to=[],ts=0;ts<tr.length;ts++){var tu=tr[ts];to.push(q.length/2),q=q.concat(tu.points)}var tl=eb(q,to,2);if(!tl)return;for(var tc=tn.length/2,ts=0;ts<tl.length;ts+=3)ti.push(tl[ts]+tc),ti.push(tl[ts+1]+tc),ti.push(tl[ts+2]+tc);for(var ts=0;ts<q.length;ts++)tn.push(q[ts])}}},ab={build:function(h){var w,q,tr=h.shape,tn=h.points,ti=tr.x,to=tr.y;if(tn.length=0,h.type===iT.CIRC)w=tr.radius,q=tr.radius;else{var ts=h.shape;w=ts.width,q=ts.height}if(!(0===w||0===q)){var tu=Math.floor(30*Math.sqrt(tr.radius))||Math.floor(15*Math.sqrt(w+q));tu/=2.3;for(var tl=2*Math.PI/tu,tc=0;tc<tu-.5;tc++)tn.push(ti+Math.sin(-tl*tc)*w,to+Math.cos(-tl*tc)*q);tn.push(tn[0],tn[1])}},triangulate:function(h,w){var q=h.points,tr=w.points,tn=w.indices,ti=tr.length/2,to=ti,ts=h.shape,tu=h.matrix,tl=ts.x,tc=ts.y;tr.push(h.matrix?tu.a*tl+tu.c*tc+tu.tx:tl,h.matrix?tu.b*tl+tu.d*tc+tu.ty:tc);for(var tp=0;tp<q.length;tp+=2)tr.push(q[tp],q[tp+1]),tn.push(ti++,to,ti)}},ax={build:function(h){var w=h.shape,q=w.x,tr=w.y,tn=w.width,ti=w.height,to=h.points;to.length=0,to.push(q,tr,q+tn,tr,q+tn,tr+ti,q,tr+ti)},triangulate:function(h,w){var q=h.points,tr=w.points,tn=tr.length/2;tr.push(q[0],q[1],q[2],q[3],q[6],q[7],q[4],q[5]),w.indices.push(tn,tn+1,tn+2,tn+1,tn+2,tn+3)}};function Es(h,w,q,tr,tn,ti,to){void 0===to&&(to=[]);for(var ts,tu,tl=to,tc=0,tp=0,td=0,tm=0,ty=0,tv=0,tb=0,tx=0;tb<=20;++tb)tc=h+(q-h)*(tx=tb/20),tp=w+(tr-w)*tx,td=q+(tn-q)*tx,tm=tr+(ti-tr)*tx,ty=(ts=tc)+(td-ts)*tx,tv=(tu=tp)+(tm-tu)*tx,tl.push(ty,tv);return tl}var aT={build:function(h){var w=h.shape,q=h.points,tr=w.x,tn=w.y,ti=w.width,to=w.height,ts=Math.max(0,Math.min(w.radius,Math.min(ti,to)/2));q.length=0,ts?(Es(tr,tn+ts,tr,tn,tr+ts,tn,q),Es(tr+ti-ts,tn,tr+ti,tn,tr+ti,tn+ts,q),Es(tr+ti,tn+to-ts,tr+ti,tn+to,tr+ti-ts,tn+to,q),Es(tr+ts,tn+to,tr,tn+to,tr,tn+to-ts,q)):q.push(tr,tn,tr+ti,tn,tr+ti,tn+to,tr,tn+to)},triangulate:function(h,w){for(var q=h.points,tr=w.points,tn=w.indices,ti=tr.length/2,to=eb(q,null,2),ts=0,tu=to.length;ts<tu;ts+=3)tn.push(to[ts]+ti),tn.push(to[ts+1]+ti),tn.push(to[ts+2]+ti);for(var ts=0,tu=q.length;ts<tu;ts++)tr.push(q[ts],q[++ts])}};function Xp(h,w,q,tr,tn,ti,to,ts){to?(tu=tr,tl=-q):(tu=-tr,tl=q);var tu,tl,tc=h-q*tn+tu,tp=w-tr*tn+tl,td=h+q*ti+tu,tm=w+tr*ti+tl;return ts.push(tc,tp),ts.push(td,tm),2}function ws(h,w,q,tr,tn,ti,to,ts){var tu=q-h,tl=tr-w,tc=Math.atan2(tu,tl),tp=Math.atan2(tn-h,ti-w);ts&&tc<tp?tc+=2*Math.PI:!ts&&tc>tp&&(tp+=2*Math.PI);var td=tc,tm=tp-tc,ty=Math.sqrt(tu*tu+tl*tl),tv=(15*Math.abs(tm)*Math.sqrt(ty)/Math.PI>>0)+1,tb=tm/tv;if(td+=tb,ts){to.push(h,w),to.push(q,tr);for(var tx=1,tT=td;tx<tv;tx++,tT+=tb)to.push(h,w),to.push(h+Math.sin(tT)*ty,w+Math.cos(tT)*ty);to.push(h,w),to.push(tn,ti)}else{to.push(q,tr),to.push(h,w);for(var tx=1,tT=td;tx<tv;tx++,tT+=tb)to.push(h+Math.sin(tT)*ty,w+Math.cos(tT)*ty),to.push(h,w);to.push(tn,ti),to.push(h,w)}return 2*tv}function Fc(h,w){h.lineStyle.native?function(h,w){var q=0,tr=h.shape,tn=h.points||tr.points,ti=tr.type!==iT.POLY||tr.closeStroke;if(0!==tn.length){var to=w.points,ts=w.indices,tu=tn.length/2,tl=to.length/2,tc=tl;for(to.push(tn[0],tn[1]),q=1;q<tu;q++)to.push(tn[2*q],tn[2*q+1]),ts.push(tc,tc+1),tc++;ti&&ts.push(tc,tl)}}(h,w):function(h,w){var q=h.shape,tr=h.points||q.points.slice(),tn=w.closePointEps;if(0!==tr.length){var ti=h.lineStyle,to=new iM(tr[0],tr[1]),ts=new iM(tr[tr.length-2],tr[tr.length-1]),tu=q.type!==iT.POLY||q.closeStroke,tl=Math.abs(to.x-ts.x)<tn&&Math.abs(to.y-ts.y)<tn;if(tu){tr=tr.slice(),tl&&(tr.pop(),tr.pop(),ts.set(tr[tr.length-2],tr[tr.length-1]));var tc=(to.x+ts.x)*.5,tp=(ts.y+to.y)*.5;tr.unshift(tc,tp),tr.push(tc,tp)}var td=w.points,tm=tr.length/2,ty=tr.length,tv=td.length/2,tb=ti.width/2,tx=tb*tb,tT=ti.miterLimit*ti.miterLimit,tE=tr[0],tA=tr[1],tO=tr[2],tw=tr[3],tL=0,tS=0,tI=-(tA-tw),tP=tE-tO,tR=0,tN=0,tM=Math.sqrt(tI*tI+tP*tP);tI/=tM,tP/=tM,tI*=tb,tP*=tb;var tk=ti.alignment,tU=(1-tk)*2,tC=2*tk;tu||(ti.cap===aM.ROUND?ty+=ws(tE-tI*(tU-tC)*.5,tA-tP*(tU-tC)*.5,tE-tI*tU,tA-tP*tU,tE+tI*tC,tA+tP*tC,td,!0)+2:ti.cap===aM.SQUARE&&(ty+=Xp(tE,tA,tI,tP,tU,tC,!0,td))),td.push(tE-tI*tU,tA-tP*tU),td.push(tE+tI*tC,tA+tP*tC);for(var tD=1;tD<tm-1;++tD){tE=tr[(tD-1)*2],tA=tr[(tD-1)*2+1],tO=tr[2*tD],tw=tr[2*tD+1],tL=tr[(tD+1)*2],tS=tr[(tD+1)*2+1],tM=Math.sqrt((tI=-(tA-tw))*tI+(tP=tE-tO)*tP),tI/=tM,tP/=tM,tI*=tb,tP*=tb,tM=Math.sqrt((tR=-(tw-tS))*tR+(tN=tO-tL)*tN),tR/=tM,tN/=tM,tR*=tb,tN*=tb;var tF=tO-tE,tB=tA-tw,tj=tO-tL,tG=tS-tw,tV=tB*tj-tG*tF,tX=tV<0;if(.1>Math.abs(tV)){td.push(tO-tI*tU,tw-tP*tU),td.push(tO+tI*tC,tw+tP*tC);continue}var tH=(-tI+tE)*(-tP+tw)-(-tI+tO)*(-tP+tA),tz=(-tR+tL)*(-tN+tw)-(-tR+tO)*(-tN+tS),tK=(tF*tz-tj*tH)/tV,tY=(tG*tH-tB*tz)/tV,tW=(tK-tO)*(tK-tO)+(tY-tw)*(tY-tw),tq=tO+(tK-tO)*tU,tZ=tw+(tY-tw)*tU,tJ=tO-(tK-tO)*tC,tQ=tw-(tY-tw)*tC;ti.join===aN.BEVEL||tW/tx>tT?(tX?(td.push(tq,tZ),td.push(tO+tI*tC,tw+tP*tC),td.push(tq,tZ),td.push(tO+tR*tC,tw+tN*tC)):(td.push(tO-tI*tU,tw-tP*tU),td.push(tJ,tQ),td.push(tO-tR*tU,tw-tN*tU),td.push(tJ,tQ)),ty+=2):ti.join===aN.ROUND?tX?(td.push(tq,tZ),td.push(tO+tI*tC,tw+tP*tC),ty+=ws(tO,tw,tO+tI*tC,tw+tP*tC,tO+tR*tC,tw+tN*tC,td,!0)+4,td.push(tq,tZ),td.push(tO+tR*tC,tw+tN*tC)):(td.push(tO-tI*tU,tw-tP*tU),td.push(tJ,tQ),ty+=ws(tO,tw,tO-tI*tU,tw-tP*tU,tO-tR*tU,tw-tN*tU,td,!1)+4,td.push(tO-tR*tU,tw-tN*tU),td.push(tJ,tQ)):(td.push(tq,tZ),td.push(tJ,tQ))}tE=tr[(tm-2)*2],tA=tr[(tm-2)*2+1],tO=tr[(tm-1)*2],tM=Math.sqrt((tI=-(tA-(tw=tr[(tm-1)*2+1])))*tI+(tP=tE-tO)*tP),tI/=tM,tP/=tM,tI*=tb,tP*=tb,td.push(tO-tI*tU,tw-tP*tU),td.push(tO+tI*tC,tw+tP*tC),tu||(ti.cap===aM.ROUND?ty+=ws(tO-tI*(tU-tC)*.5,tw-tP*(tU-tC)*.5,tO-tI*tU,tw-tP*tU,tO+tI*tC,tw+tP*tC,td,!1)+2:ti.cap===aM.SQUARE&&(ty+=Xp(tO,tw,tI,tP,tU,tC,!1,td)));for(var t$=w.indices,t0=a_.epsilon*a_.epsilon,tD=tv;tD<ty+tv-2;++tD)tE=td[2*tD],tA=td[2*tD+1],tO=td[(tD+1)*2],tw=td[(tD+1)*2+1],tL=td[(tD+2)*2],Math.abs(tE*(tw-(tS=td[(tD+2)*2+1]))+tO*(tS-tA)+tL*(tA-tw))<t0||t$.push(tD,tD+1,tD+2)}}(h,w)}var aE,aA,aO,aw,aL,aS,aI,aP,aR,aN,aM,ak,aU=function(h){function n(w,q,tr,tn,ti,to){void 0===to&&(to=0),ti=ti||tn/2;for(var ts=-1*Math.PI/2+to,tu=2*tr,tl=iA/tu,tc=[],tp=0;tp<tu;tp++){var td=tp%2?ti:tn,tm=tp*tl+ts;tc.push(w+td*Math.cos(tm),q+td*Math.sin(tm))}return h.call(this,tc)||this}return Nu(n,h),n}(iR),aC=function(){function e(){}return e.curveTo=function(h,w,q,tr,tn,ti){var to=ti[ti.length-2],ts=ti[ti.length-1]-w,tu=to-h,tl=tr-w,tc=q-h,tp=Math.abs(ts*tc-tu*tl);if(tp<1e-8||0===tn)return(ti[ti.length-2]!==h||ti[ti.length-1]!==w)&&ti.push(h,w),null;var td=ts*ts+tu*tu,tm=tl*tl+tc*tc,ty=ts*tl+tu*tc,tv=tn*Math.sqrt(td)/tp,tb=tn*Math.sqrt(tm)/tp,tx=tv*ty/td,tT=tb*ty/tm,tE=tv*tc+tb*tu,tA=tv*tl+tb*ts,tO=Math.atan2(ts*(tb+tx)-tA,tu*(tb+tx)-tE),tw=Math.atan2(tl*(tv+tT)-tA,tc*(tv+tT)-tE);return{cx:tE+h,cy:tA+w,radius:tn,startAngle:tO,endAngle:tw,anticlockwise:tu*tl>tc*ts}},e.arc=function(h,w,q,tr,tn,ti,to,ts,tu){for(var tl=to-ti,tc=a_._segmentsCount(Math.abs(tl)*tn,40*Math.ceil(Math.abs(tl)/iA)),tp=tl/(2*tc),td=2*tp,tm=Math.cos(tp),ty=Math.sin(tp),tv=tc-1,tb=tv%1/tv,tx=0;tx<=tv;++tx){var tT=tp+ti+td*(tx+tb*tx),tE=Math.cos(tT),tA=-Math.sin(tT);tu.push((tm*tE+ty*tA)*tn+q,(-(tm*tA)+ty*tE)*tn+tr)}},e}(),aD=function(){function e(){}return e.curveLength=function(h,w,q,tr,tn,ti,to,ts){for(var tu=0,tl=0,tc=0,tp=0,td=0,tm=0,ty=0,tv=0,tb=0,tx=0,tT=0,tE=h,tA=w,tO=1;tO<=10;++tO)tp=(tc=(tl=tO/10)*tl)*tl,tv=(ty=(tm=(td=1-tl)*td)*td)*h+3*tm*tl*q+3*td*tc*tn+tp*to,tb=ty*w+3*tm*tl*tr+3*td*tc*ti+tp*ts,tx=tE-tv,tT=tA-tb,tE=tv,tA=tb,tu+=Math.sqrt(tx*tx+tT*tT);return tu},e.curveTo=function(h,w,q,tr,tn,ti,to){var ts=to[to.length-2],tu=to[to.length-1];to.length-=2;var tl=a_._segmentsCount(e.curveLength(ts,tu,h,w,q,tr,tn,ti)),tc=0,tp=0,td=0,tm=0,ty=0;to.push(ts,tu);for(var tv=1,tb=0;tv<=tl;++tv)td=(tp=(tc=1-(tb=tv/tl))*tc)*tc,ty=(tm=tb*tb)*tb,to.push(td*ts+3*tp*tb*h+3*tc*tm*q+ty*tn,td*tu+3*tp*tb*w+3*tc*tm*tr+ty*ti)},e}(),aF=function(){function e(){}return e.curveLength=function(h,w,q,tr,tn,ti){var to=h-2*q+tn,ts=w-2*tr+ti,tu=2*q-2*h,tl=2*tr-2*w,tc=4*(to*to+ts*ts),tp=4*(to*tu+ts*tl),td=tu*tu+tl*tl,tm=2*Math.sqrt(tc+tp+td),ty=Math.sqrt(tc),tv=2*tc*ty,tb=2*Math.sqrt(td),tx=tp/ty;return(tv*tm+ty*tp*(tm-tb)+(4*td*tc-tp*tp)*Math.log((2*ty+tx+tm)/(tx+tb)))/(4*tv)},e.curveTo=function(h,w,q,tr,tn){for(var ti=tn[tn.length-2],to=tn[tn.length-1],ts=a_._segmentsCount(e.curveLength(ti,to,h,w,q,tr)),tu=0,tl=0,tc=1;tc<=ts;++tc){var tp=tc/ts;tu=ti+(h-ti)*tp,tl=to+(w-to)*tp,tn.push(tu+(h+(q-h)*tp-tu)*tp,tl+(w+(tr-w)*tp-tl)*tp)}},e}(),aB=function(){function e(){this.reset()}return e.prototype.begin=function(h,w,q){this.reset(),this.style=h,this.start=w,this.attribStart=q},e.prototype.end=function(h,w){this.attribSize=w-this.attribStart,this.size=h-this.start},e.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},e}(),aj=((ak={})[iT.POLY]=ay,ak[iT.CIRC]=ab,ak[iT.ELIP]=ab,ak[iT.RECT]=ax,ak[iT.RREC]=aT,ak),aG=[],aV=[],aX=function(){function e(h,w,q,tr){void 0===w&&(w=null),void 0===q&&(q=null),void 0===tr&&(tr=null),this.shape=h,this.lineStyle=q,this.fillStyle=w,this.matrix=tr,this.type=h.type,this.points=[],this.holes=[]}return e.prototype.clone=function(){return new e(this.shape,this.fillStyle,this.lineStyle,this.matrix)},e.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},e}(),aH=new iM,az=new iz,aK=function(h){function n(){var w=h.call(this)||this;return w.uvsFloat32=null,w.indicesUint16=null,w.points=[],w.colors=[],w.uvs=[],w.indices=[],w.textureIds=[],w.graphicsData=[],w.dirty=0,w.batchDirty=-1,w.cacheDirty=-1,w.clearDirty=0,w.drawCalls=[],w.batches=[],w.shapeIndex=0,w._bounds=new iz,w.boundsDirty=-1,w.boundsPadding=0,w.batchable=!1,w.indicesUint16=null,w.uvsFloat32=null,w.closePointEps=1e-4,w}return Nu(n,h),Object.defineProperty(n.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),n.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var h=0;h<this.drawCalls.length;h++)this.drawCalls[h].texArray.clear(),aV.push(this.drawCalls[h]);this.drawCalls.length=0;for(var h=0;h<this.batches.length;h++){var w=this.batches[h];w.reset(),aG.push(w)}this.batches.length=0},n.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},n.prototype.drawShape=function(h,w,q,tr){void 0===w&&(w=null),void 0===q&&(q=null),void 0===tr&&(tr=null);var tn=new aX(h,w,q,tr);return this.graphicsData.push(tn),this.dirty++,this},n.prototype.drawHole=function(h,w){if(void 0===w&&(w=null),!this.graphicsData.length)return null;var q=new aX(h,null,null,w),tr=this.graphicsData[this.graphicsData.length-1];return q.lineStyle=tr.lineStyle,tr.holes.push(q),this.dirty++,this},n.prototype.destroy=function(){h.prototype.destroy.call(this);for(var w=0;w<this.graphicsData.length;++w)this.graphicsData[w].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},n.prototype.containsPoint=function(h){for(var w=this.graphicsData,q=0;q<w.length;++q){var tr=w[q];if(tr.fillStyle.visible&&tr.shape&&(tr.matrix?tr.matrix.applyInverse(h,aH):aH.copyFrom(h),tr.shape.contains(aH.x,aH.y))){var tn=!1;if(tr.holes){for(var ti=0;ti<tr.holes.length;ti++)if(tr.holes[ti].shape.contains(aH.x,aH.y)){tn=!0;break}}if(!tn)return!0}}return!1},n.prototype.updateBatches=function(h){if(!this.graphicsData.length){this.batchable=!0;return}if(this.validateBatching()){this.cacheDirty=this.dirty;var w=this.uvs,q=this.graphicsData,tr=null,tn=null;this.batches.length>0&&(tn=(tr=this.batches[this.batches.length-1]).style);for(var ti=this.shapeIndex;ti<q.length;ti++){this.shapeIndex++;var to=q[ti],ts=to.fillStyle,tu=to.lineStyle;aj[to.type].build(to),to.matrix&&this.transformPoints(to.points,to.matrix);for(var tl=0;tl<2;tl++){var tc=0===tl?ts:tu;if(tc.visible){var tp=tc.texture.baseTexture,td=this.indices.length,tm=this.points.length/2;tp.wrapMode=ic.REPEAT,0===tl?this.processFill(to):this.processLine(to);var ty=this.points.length/2-tm;0!==ty&&(tr&&!this._compareStyles(tn,tc)&&(tr.end(td,tm),tr=null),tr||((tr=aG.pop()||new aB).begin(tc,td,tm),this.batches.push(tr),tn=tc),this.addUvs(this.points,w,tc.texture,tm,ty,tc.matrix))}}}var tv=this.indices.length,tb=this.points.length/2;if(tr&&tr.end(tv,tb),0===this.batches.length){this.batchable=!0;return}if(this.indicesUint16&&this.indices.length===this.indicesUint16.length)this.indicesUint16.set(this.indices);else{var tx=tb>65535&&h;this.indicesUint16=tx?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}},n.prototype._compareStyles=function(h,w){return!(!h||!w||h.texture.baseTexture!==w.texture.baseTexture||h.color+h.alpha!==w.color+w.alpha||!!h.native!=!!w.native)},n.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var h=0,w=this.graphicsData.length;h<w;h++){var q=this.graphicsData[h],tr=q.fillStyle,tn=q.lineStyle;if(tr&&!tr.texture.baseTexture.valid||tn&&!tn.texture.baseTexture.valid)return!1}return!0},n.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var h=this.batches,w=0,q=h.length;w<q;w++)for(var tr=h[w],tn=0;tn<tr.size;tn++){var ti=tr.start+tn;this.indicesUint16[ti]=this.indicesUint16[ti]-tr.attribStart}},n.prototype.isBatchable=function(){if(this.points.length>131070)return!1;for(var h=this.batches,w=0;w<h.length;w++)if(h[w].style.native)return!1;return this.points.length<2*n.BATCHABLE_SIZE},n.prototype.buildDrawCalls=function(){for(var h=++oa._globalBatch,w=0;w<this.drawCalls.length;w++)this.drawCalls[w].texArray.clear(),aV.push(this.drawCalls[w]);this.drawCalls.length=0;var q=this.colors,tr=this.textureIds,tn=aV.pop();tn||((tn=new hu).texArray=new sz),tn.texArray.count=0,tn.start=0,tn.size=0,tn.type=n9.TRIANGLES;var ti=0,to=null,ts=0,tu=!1,tl=n9.TRIANGLES,tc=0;this.drawCalls.push(tn);for(var w=0;w<this.batches.length;w++){var tp=this.batches[w],td=tp.style,tm=td.texture.baseTexture;!!td.native!==tu&&(tl=(tu=!!td.native)?n9.LINES:n9.TRIANGLES,to=null,ti=8,h++),to!==tm&&(to=tm,tm._batchEnabled!==h&&(8===ti&&(h++,ti=0,tn.size>0&&((tn=aV.pop())||((tn=new hu).texArray=new sz),this.drawCalls.push(tn)),tn.start=tc,tn.size=0,tn.texArray.count=0,tn.type=tl),tm.touched=1,tm._batchEnabled=h,tm._batchLocation=ti,tm.wrapMode=10497,tn.texArray.elements[tn.texArray.count++]=tm,ti++)),tn.size+=tp.size,tc+=tp.size,ts=tm._batchLocation,this.addColors(q,td.color,td.alpha,tp.attribSize),this.addTextureIds(tr,ts,tp.attribSize)}oa._globalBatch=h,this.packAttributes()},n.prototype.packAttributes=function(){for(var h=this.points,w=this.uvs,q=this.colors,tr=this.textureIds,tn=new ArrayBuffer(12*h.length),ti=new Float32Array(tn),to=new Uint32Array(tn),ts=0,tu=0;tu<h.length/2;tu++)ti[ts++]=h[2*tu],ti[ts++]=h[2*tu+1],ti[ts++]=w[2*tu],ti[ts++]=w[2*tu+1],to[ts++]=q[tu],ti[ts++]=tr[tu];this._buffer.update(tn),this._indexBuffer.update(this.indicesUint16)},n.prototype.processFill=function(h){h.holes.length?(this.processHoles(h.holes),ay.triangulate(h,this)):aj[h.type].triangulate(h,this)},n.prototype.processLine=function(h){Fc(h,this);for(var w=0;w<h.holes.length;w++)Fc(h.holes[w],this)},n.prototype.processHoles=function(h){for(var w=0;w<h.length;w++){var q=h[w];aj[q.type].build(q),q.matrix&&this.transformPoints(q.points,q.matrix)}},n.prototype.calculateBounds=function(){var h=this._bounds,w=iU.IDENTITY;this._bounds.clear(),az.clear();for(var q=0;q<this.graphicsData.length;q++){var tr=this.graphicsData[q],tn=tr.shape,ti=tr.type,to=tr.lineStyle,ts=tr.matrix||iU.IDENTITY,tu=0;if(to&&to.visible){var tl=to.alignment;tu=to.width,ti===iT.POLY?tu*=.5+Math.abs(.5-tl):tu*=Math.max(0,tl)}(w!==ts&&(az.isEmpty()||(h.addBoundsMatrix(az,w),az.clear()),w=ts),ti===iT.RECT||ti===iT.RREC)?az.addFramePad(tn.x,tn.y,tn.x+tn.width,tn.y+tn.height,tu,tu):ti===iT.CIRC?az.addFramePad(tn.x,tn.y,tn.x,tn.y,tn.radius+tu,tn.radius+tu):ti===iT.ELIP?az.addFramePad(tn.x,tn.y,tn.x,tn.y,tn.width+tu,tn.height+tu):h.addVerticesMatrix(w,tn.points,0,tn.points.length,tu,tu)}az.isEmpty()||h.addBoundsMatrix(az,w),h.pad(this.boundsPadding,this.boundsPadding)},n.prototype.transformPoints=function(h,w){for(var q=0;q<h.length/2;q++){var tr=h[2*q],tn=h[2*q+1];h[2*q]=w.a*tr+w.c*tn+w.tx,h[2*q+1]=w.b*tr+w.d*tn+w.ty}},n.prototype.addColors=function(h,w,q,tr){for(var tn=Su((w>>16)+(65280&w)+((255&w)<<16),q);tr-- >0;)h.push(tn)},n.prototype.addTextureIds=function(h,w,q){for(;q-- >0;)h.push(w)},n.prototype.addUvs=function(h,w,q,tr,tn,ti){void 0===ti&&(ti=null);for(var to=0,ts=w.length,tu=q.frame;to<tn;){var tl=h[(tr+to)*2],tc=h[(tr+to)*2+1];if(ti){var tp=ti.a*tl+ti.c*tc+ti.tx;tc=ti.b*tl+ti.d*tc+ti.ty,tl=tp}to++,w.push(tl/tu.width,tc/tu.height)}var td=q.baseTexture;(tu.width<td.width||tu.height<td.height)&&this.adjustUvs(w,q,ts,tn)},n.prototype.adjustUvs=function(h,w,q,tr){for(var tn=w.baseTexture,ti=q+2*tr,to=w.frame,ts=to.width/tn.width,tu=to.height/tn.height,tl=to.x/to.width,tc=to.y/to.height,tp=Math.floor(h[q]+1e-6),td=Math.floor(h[q+1]+1e-6),tm=q+2;tm<ti;tm+=2)tp=Math.min(tp,Math.floor(h[tm]+1e-6)),td=Math.min(td,Math.floor(h[tm+1]+1e-6));tl-=tp,tc-=td;for(var tm=q;tm<ti;tm+=2)h[tm]=(h[tm]+tl)*ts,h[tm+1]=(h[tm+1]+tc)*tu},n.BATCHABLE_SIZE=100,n}(sq),aY=function(h){function n(){var w=null!==h&&h.apply(this,arguments)||this;return w.width=0,w.alignment=.5,w.native=!1,w.cap=aM.BUTT,w.join=aN.MITER,w.miterLimit=10,w}return Nu(n,h),n.prototype.clone=function(){var h=new n;return h.color=this.color,h.alpha=this.alpha,h.texture=this.texture,h.matrix=this.matrix,h.visible=this.visible,h.width=this.width,h.alignment=this.alignment,h.native=this.native,h.cap=this.cap,h.join=this.join,h.miterLimit=this.miterLimit,h},n.prototype.reset=function(){h.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},n}(am),aW=new Float32Array(3),aq={},aZ=function(h){function n(w){void 0===w&&(w=null);var q=h.call(this)||this;return q._geometry=w||new aK,q._geometry.refCount++,q.shader=null,q.state=sd.for2d(),q._fillStyle=new am,q._lineStyle=new aY,q._matrix=null,q._holeMode=!1,q.currentPath=null,q.batches=[],q.batchTint=-1,q.batchDirty=-1,q.vertexData=null,q.pluginName="batch",q._transformID=-1,q.tint=16777215,q.blendMode=n7.NORMAL,q}return Nu(n,h),Object.defineProperty(n.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),n.prototype.clone=function(){return this.finishPoly(),new n(this._geometry)},Object.defineProperty(n.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(h){this.state.blendMode=h},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"tint",{get:function(){return this._tint},set:function(h){this._tint=h},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),n.prototype.lineStyle=function(h){if(void 0===h&&(h=null),"number"==typeof h){var w=arguments;h={width:w[0]||0,color:w[1]||0,alpha:void 0!==w[2]?w[2]:1,alignment:void 0!==w[3]?w[3]:.5,native:!!w[4]}}return this.lineTextureStyle(h)},n.prototype.lineTextureStyle=function(h){if("number"==typeof h){we("v5.2.0","Please use object-based options for Graphics#lineTextureStyle");var w=arguments;Object.keys(h={width:w[0],texture:w[1],color:w[2],alpha:w[3],matrix:w[4],alignment:w[5],native:w[6]}).forEach(function(w){return void 0===h[w]&&delete h[w]})}h=Object.assign({width:0,texture:oS.WHITE,color:h&&h.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:aM.BUTT,join:aN.MITER,miterLimit:10},h),this.currentPath&&this.startPoly();var q=h.width>0&&h.alpha>0;return q?(h.matrix&&(h.matrix=h.matrix.clone(),h.matrix.invert()),Object.assign(this._lineStyle,{visible:q},h)):this._lineStyle.reset(),this},n.prototype.startPoly=function(){if(this.currentPath){var h=this.currentPath.points,w=this.currentPath.points.length;w>2&&(this.drawShape(this.currentPath),this.currentPath=new iR,this.currentPath.closeStroke=!1,this.currentPath.points.push(h[w-2],h[w-1]))}else this.currentPath=new iR,this.currentPath.closeStroke=!1},n.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},n.prototype.moveTo=function(h,w){return this.startPoly(),this.currentPath.points[0]=h,this.currentPath.points[1]=w,this},n.prototype.lineTo=function(h,w){this.currentPath||this.moveTo(0,0);var q=this.currentPath.points,tr=q[q.length-2],tn=q[q.length-1];return(tr!==h||tn!==w)&&q.push(h,w),this},n.prototype._initCurve=function(h,w){void 0===h&&(h=0),void 0===w&&(w=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[h,w]):this.moveTo(h,w)},n.prototype.quadraticCurveTo=function(h,w,q,tr){this._initCurve();var tn=this.currentPath.points;return 0===tn.length&&this.moveTo(0,0),aF.curveTo(h,w,q,tr,tn),this},n.prototype.bezierCurveTo=function(h,w,q,tr,tn,ti){return this._initCurve(),aD.curveTo(h,w,q,tr,tn,ti,this.currentPath.points),this},n.prototype.arcTo=function(h,w,q,tr,tn){this._initCurve(h,w);var ti=this.currentPath.points,to=aC.curveTo(h,w,q,tr,tn,ti);if(to){var ts=to.cx,tu=to.cy,tl=to.radius,tc=to.startAngle,tp=to.endAngle,td=to.anticlockwise;this.arc(ts,tu,tl,tc,tp,td)}return this},n.prototype.arc=function(h,w,q,tr,tn,ti){if(void 0===ti&&(ti=!1),tr===tn||(!ti&&tn<=tr?tn+=iA:ti&&tr<=tn&&(tr+=iA),0==tn-tr))return this;var to=h+Math.cos(tr)*q,ts=w+Math.sin(tr)*q,tu=this._geometry.closePointEps,tl=this.currentPath?this.currentPath.points:null;if(tl){var tc=Math.abs(tl[tl.length-2]-to),tp=Math.abs(tl[tl.length-1]-ts);tc<tu&&tp<tu||tl.push(to,ts)}else this.moveTo(to,ts),tl=this.currentPath.points;return aC.arc(to,ts,h,w,q,tr,tn,ti,tl),this},n.prototype.beginFill=function(h,w){return void 0===h&&(h=0),void 0===w&&(w=1),this.beginTextureFill({texture:oS.WHITE,color:h,alpha:w})},n.prototype.beginTextureFill=function(h){if(h instanceof oS){we("v5.2.0","Please use object-based options for Graphics#beginTextureFill");var w=arguments;Object.keys(h={texture:w[0],color:w[1],alpha:w[2],matrix:w[3]}).forEach(function(w){return void 0===h[w]&&delete h[w]})}h=Object.assign({texture:oS.WHITE,color:16777215,alpha:1,matrix:null},h),this.currentPath&&this.startPoly();var q=h.alpha>0;return q?(h.matrix&&(h.matrix=h.matrix.clone(),h.matrix.invert()),Object.assign(this._fillStyle,{visible:q},h)):this._fillStyle.reset(),this},n.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},n.prototype.drawRect=function(h,w,q,tr){return this.drawShape(new iS(h,w,q,tr))},n.prototype.drawRoundedRect=function(h,w,q,tr,tn){return this.drawShape(new iN(h,w,q,tr,tn))},n.prototype.drawCircle=function(h,w,q){return this.drawShape(new iI(h,w,q))},n.prototype.drawEllipse=function(h,w,q,tr){return this.drawShape(new iP(h,w,q,tr))},n.prototype.drawPolygon=function(){for(var h=arguments,w=[],q=0;q<arguments.length;q++)w[q]=h[q];var tr,tn=!0,ti=w[0];ti.points?(tn=ti.closeStroke,tr=ti.points):tr=Array.isArray(w[0])?w[0]:w;var to=new iR(tr);return to.closeStroke=tn,this.drawShape(to),this},n.prototype.drawShape=function(h){return this._holeMode?this._geometry.drawHole(h,this._matrix):this._geometry.drawShape(h,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},n.prototype.drawStar=function(h,w,q,tr,tn,ti){return void 0===ti&&(ti=0),this.drawPolygon(new aU(h,w,q,tr,tn,ti))},n.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},n.prototype.isFastRect=function(){var h=this._geometry.graphicsData;return 1===h.length&&h[0].shape.type===iT.RECT&&!(h[0].lineStyle.visible&&h[0].lineStyle.width)},n.prototype._render=function(h){this.finishPoly();var w=this._geometry,q=h.context.supports.uint32Indices;w.updateBatches(q),w.batchable?(this.batchDirty!==w.batchDirty&&this._populateBatches(),this._renderBatched(h)):(h.batch.flush(),this._renderDirect(h))},n.prototype._populateBatches=function(){var h=this._geometry,w=this.blendMode,q=h.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=h.batchDirty,this.batches.length=q,this.vertexData=new Float32Array(h.points);for(var tr=0;tr<q;tr++){var tn=h.batches[tr],ti=tn.style.color,to=new Float32Array(this.vertexData.buffer,8*tn.attribStart,2*tn.attribSize),ts=new Float32Array(h.uvsFloat32.buffer,8*tn.attribStart,2*tn.attribSize),tu={vertexData:to,blendMode:w,indices:new Uint16Array(h.indicesUint16.buffer,2*tn.start,tn.size),uvs:ts,_batchRGB:Vi(ti),_tintRGB:ti,_texture:tn.style.texture,alpha:tn.style.alpha,worldAlpha:1};this.batches[tr]=tu}},n.prototype._renderBatched=function(h){if(this.batches.length){h.batch.setObjectRenderer(h.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var w=0,q=this.batches.length;w<q;w++){var tr=this.batches[w];tr.worldAlpha=this.worldAlpha*tr.alpha,h.plugins[this.pluginName].render(tr)}}},n.prototype._renderDirect=function(h){var w=this._resolveDirectShader(h),q=this._geometry,tr=this.tint,tn=this.worldAlpha,ti=w.uniforms,to=q.drawCalls;ti.translationMatrix=this.transform.worldTransform,ti.tint[0]=(tr>>16&255)/255*tn,ti.tint[1]=(tr>>8&255)/255*tn,ti.tint[2]=(255&tr)/255*tn,ti.tint[3]=tn,h.shader.bind(w),h.geometry.bind(q,w),h.state.set(this.state);for(var ts=0,tu=to.length;ts<tu;ts++)this._renderDrawCallDirect(h,q.drawCalls[ts])},n.prototype._renderDrawCallDirect=function(h,w){for(var q=w.texArray,tr=w.type,tn=w.size,ti=w.start,to=q.count,ts=0;ts<to;ts++)h.texture.bind(q.elements[ts],ts);h.geometry.draw(tr,tn,ti)},n.prototype._resolveDirectShader=function(h){var w=this.shader,q=this.pluginName;if(!w){if(!aq[q]){for(var tr=new Int32Array(16),tn=0;tn<16;tn++)tr[tn]=tn;var ti={tint:new Float32Array([1,1,1,1]),translationMatrix:new iU,default:oV.from({uSamplers:tr},!0)},to=h.plugins[q]._shader.program;aq[q]=new sp(to,ti)}w=aq[q]}return w},n.prototype._calculateBounds=function(){this.finishPoly();var h=this._geometry;if(h.graphicsData.length){var w=h.bounds,q=w.minX,tr=w.minY,tn=w.maxX,ti=w.maxY;this._bounds.addFrame(this.transform,q,tr,tn,ti)}},n.prototype.containsPoint=function(h){return this.worldTransform.applyInverse(h,n._TEMP_POINT),this._geometry.containsPoint(n._TEMP_POINT)},n.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var h=Vi(this.tint,aW),w=0;w<this.batches.length;w++){var q=this.batches[w],tr=q._batchRGB,tn=(h[0]*tr[0]*255<<16)+(h[1]*tr[1]*255<<8)+(0|h[2]*tr[2]*255);q._tintRGB=(tn>>16)+(65280&tn)+((255&tn)<<16)}}},n.prototype.calculateVertices=function(){var h=this.transform._worldID;if(this._transformID!==h){this._transformID=h;for(var w=this.transform.worldTransform,q=w.a,tr=w.b,tn=w.c,ti=w.d,to=w.tx,ts=w.ty,tu=this._geometry.points,tl=this.vertexData,tc=0,tp=0;tp<tu.length;tp+=2){var td=tu[tp],tm=tu[tp+1];tl[tc++]=q*td+tn*tm+to,tl[tc++]=ti*tm+tr*td+ts}}},n.prototype.closePath=function(){var h=this.currentPath;return h&&(h.closeStroke=!0),this},n.prototype.setMatrix=function(h){return this._matrix=h,this},n.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},n.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},n.prototype.destroy=function(w){h.prototype.destroy.call(this,w),this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,h.prototype.destroy.call(this,w)},n._TEMP_POINT=new iM,n}(iW),Vc=function(h,w){return(Vc=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,w){h.__proto__=w}||function(h,w){for(var q in w)w.hasOwnProperty(q)&&(h[q]=w[q])})(h,w)},aJ=new iM,aQ=new Uint16Array([0,1,2,0,2,3]),a$=function(h){function n(w){var q=h.call(this)||this;return q._anchor=new ik(q._onAnchorUpdate,q,w?w.defaultAnchor.x:0,w?w.defaultAnchor.y:0),q._texture=null,q._width=0,q._height=0,q._tint=null,q._tintRGB=null,q.tint=16777215,q.blendMode=n7.NORMAL,q._cachedTint=16777215,q.uvs=null,q.texture=w||oS.EMPTY,q.vertexData=new Float32Array(8),q.vertexTrimmedData=null,q._transformID=-1,q._textureID=-1,q._transformTrimmedID=-1,q._textureTrimmedID=-1,q.indices=aQ,q.pluginName="batch",q.isSprite=!0,q._roundPixels=ed.ROUND_PIXELS,q}return!function(h,w){function t(){this.constructor=h}Vc(h,w),h.prototype=null===w?Object.create(w):(t.prototype=w.prototype,new t)}(n,h),n.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Ri(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Ri(this.scale.y)*this._height/this._texture.orig.height)},n.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},n.prototype.calculateVertices=function(){var h=this._texture;if(!(this._transformID===this.transform._worldID&&this._textureID===h._updateID)){this._textureID!==h._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=h._updateID;var w=this.transform.worldTransform,q=w.a,tr=w.b,tn=w.c,ti=w.d,to=w.tx,ts=w.ty,tu=this.vertexData,tl=h.trim,tc=h.orig,tp=this._anchor,td=0,tm=0,ty=0,tv=0;if(tl?(td=(tm=tl.x-tp._x*tc.width)+tl.width,ty=(tv=tl.y-tp._y*tc.height)+tl.height):(td=(tm=-tp._x*tc.width)+tc.width,ty=(tv=-tp._y*tc.height)+tc.height),tu[0]=q*tm+tn*tv+to,tu[1]=ti*tv+tr*tm+ts,tu[2]=q*td+tn*tv+to,tu[3]=ti*tv+tr*td+ts,tu[4]=q*td+tn*ty+to,tu[5]=ti*ty+tr*td+ts,tu[6]=q*tm+tn*ty+to,tu[7]=ti*ty+tr*tm+ts,this._roundPixels)for(var tb=ed.RESOLUTION,tx=0;tx<tu.length;++tx)tu[tx]=Math.round((tu[tx]*tb|0)/tb)}},n.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var h=this._texture,w=this.vertexTrimmedData,q=h.orig,tr=this._anchor,tn=this.transform.worldTransform,ti=tn.a,to=tn.b,ts=tn.c,tu=tn.d,tl=tn.tx,tc=tn.ty,tp=-tr._x*q.width,td=tp+q.width,tm=-tr._y*q.height,ty=tm+q.height;w[0]=ti*tp+ts*tm+tl,w[1]=tu*tm+to*tp+tc,w[2]=ti*td+ts*tm+tl,w[3]=tu*tm+to*td+tc,w[4]=ti*td+ts*ty+tl,w[5]=tu*ty+to*td+tc,w[6]=ti*tp+ts*ty+tl,w[7]=tu*ty+to*tp+tc},n.prototype._render=function(h){this.calculateVertices(),h.batch.setObjectRenderer(h.plugins[this.pluginName]),h.plugins[this.pluginName].render(this)},n.prototype._calculateBounds=function(){var h=this._texture.trim,w=this._texture.orig;h&&(h.width!==w.width||h.height!==w.height)?(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData)):(this.calculateVertices(),this._bounds.addQuad(this.vertexData))},n.prototype.getLocalBounds=function(w){return 0===this.children.length?(this._bounds.minX=-(this._texture.orig.width*this._anchor._x),this._bounds.minY=-(this._texture.orig.height*this._anchor._y),this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),w||(this._localBoundsRect||(this._localBoundsRect=new iS),w=this._localBoundsRect),this._bounds.getRectangle(w)):h.prototype.getLocalBounds.call(this,w)},n.prototype.containsPoint=function(h){this.worldTransform.applyInverse(h,aJ);var w=this._texture.orig.width,q=this._texture.orig.height,tr=-w*this.anchor.x,tn=0;return aJ.x>=tr&&aJ.x<tr+w&&(tn=-q*this.anchor.y,aJ.y>=tn&&aJ.y<tn+q)},n.prototype.destroy=function(w){if(h.prototype.destroy.call(this,w),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof w?w:w&&w.texture){var q="boolean"==typeof w?w:w&&w.baseTexture;this._texture.destroy(!!q)}this._texture=null},n.from=function(h,w){var q=h instanceof oS?h:oS.from(h,w);return new n(q)},Object.defineProperty(n.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(h){this._roundPixels!==h&&(this._transformID=-1),this._roundPixels=h},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(h){var w=Ri(this.scale.x)||1;this.scale.x=w*h/this._texture.orig.width,this._width=h},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(h){var w=Ri(this.scale.y)||1;this.scale.y=w*h/this._texture.orig.height,this._height=h},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"anchor",{get:function(){return this._anchor},set:function(h){this._anchor.copyFrom(h)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"tint",{get:function(){return this._tint},set:function(h){this._tint=h,this._tintRGB=(h>>16)+(65280&h)+((255&h)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"texture",{get:function(){return this._texture},set:function(h){this._texture!==h&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=h||oS.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,h&&(h.baseTexture.valid?this._onTextureUpdate():h.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),n}(iW),Xc=function(h,w){return(Xc=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,w){h.__proto__=w}||function(h,w){for(var q in w)w.hasOwnProperty(q)&&(h[q]=w[q])})(h,w)};(lG=ca||(ca={}))[lG.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",lG[lG.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL";var a0={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:ca.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},a1=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],a2=function(){function e(h){this.styleID=0,this.reset(),Al(this,h,h)}return e.prototype.clone=function(){var h={};return Al(h,this,a0),new e(h)},e.prototype.reset=function(){Al(this,a0,a0)},Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(h){this._align!==h&&(this._align=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"breakWords",{get:function(){return this._breakWords},set:function(h){this._breakWords!==h&&(this._breakWords=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(h){this._dropShadow!==h&&(this._dropShadow=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(h){this._dropShadowAlpha!==h&&(this._dropShadowAlpha=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(h){this._dropShadowAngle!==h&&(this._dropShadowAngle=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(h){this._dropShadowBlur!==h&&(this._dropShadowBlur=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(h){var w=Tl(h);this._dropShadowColor!==w&&(this._dropShadowColor=w,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(h){this._dropShadowDistance!==h&&(this._dropShadowDistance=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fill},set:function(h){var w=Tl(h);this._fill!==w&&(this._fill=w,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(h){this._fillGradientType!==h&&(this._fillGradientType=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(h){(function(h,w){if(!Array.isArray(h)||!Array.isArray(w)||h.length!==w.length)return!1;for(var q=0;q<h.length;++q)if(h[q]!==w[q])return!1;return!0})(this._fillGradientStops,h)||(this._fillGradientStops=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(h){this.fontFamily!==h&&(this._fontFamily=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(h){this._fontSize!==h&&(this._fontSize=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(h){this._fontStyle!==h&&(this._fontStyle=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(h){this._fontVariant!==h&&(this._fontVariant=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(h){this._fontWeight!==h&&(this._fontWeight=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(h){this._letterSpacing!==h&&(this._letterSpacing=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(h){this._lineHeight!==h&&(this._lineHeight=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leading",{get:function(){return this._leading},set:function(h){this._leading!==h&&(this._leading=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(h){this._lineJoin!==h&&(this._lineJoin=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(h){this._miterLimit!==h&&(this._miterLimit=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"padding",{get:function(){return this._padding},set:function(h){this._padding!==h&&(this._padding=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stroke",{get:function(){return this._stroke},set:function(h){var w=Tl(h);this._stroke!==w&&(this._stroke=w,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(h){this._strokeThickness!==h&&(this._strokeThickness=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(h){this._textBaseline!==h&&(this._textBaseline=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trim",{get:function(){return this._trim},set:function(h){this._trim!==h&&(this._trim=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(h){this._whiteSpace!==h&&(this._whiteSpace=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(h){this._wordWrap!==h&&(this._wordWrap=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(h){this._wordWrapWidth!==h&&(this._wordWrapWidth=h,this.styleID++)},enumerable:!1,configurable:!0}),e.prototype.toFontString=function(){var h="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,w=this.fontFamily;Array.isArray(this.fontFamily)||(w=this.fontFamily.split(","));for(var q=w.length-1;q>=0;q--){var tr=w[q].trim();!/([\"\'])[^\'\"]+\1/.test(tr)&&0>a1.indexOf(tr)&&(tr='"'+tr+'"'),w[q]=tr}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+h+" "+w.join(",")},e}();function Hp(h){return"number"==typeof h?tf(h):("string"==typeof h&&0===h.indexOf("0x")&&(h=h.replace("0x","#")),h)}function Tl(h){if(!Array.isArray(h))return Hp(h);for(var w=0;w<h.length;++w)h[w]=Hp(h[w]);return h}function Al(h,w,q){for(var tr in q)Array.isArray(w[tr])?h[tr]=w[tr].slice():h[tr]=w[tr]}var a3=function(){function e(h,w,q,tr,tn,ti,to,ts,tu){this.text=h,this.style=w,this.width=q,this.height=tr,this.lines=tn,this.lineWidths=ti,this.lineHeight=to,this.maxLineWidth=ts,this.fontProperties=tu}return e.measureText=function(h,w,q,tr){void 0===tr&&(tr=e._canvas),q=q??w.wordWrap;var tn=w.toFontString(),ti=e.measureFont(tn);0===ti.fontSize&&(ti.fontSize=w.fontSize,ti.ascent=w.fontSize);var to=tr.getContext("2d");to.font=tn;for(var ts=q?e.wordWrap(h,w,tr):h,tu=ts.split(/(?:\r\n|\r|\n)/),tl=Array(tu.length),tc=0,tp=0;tp<tu.length;tp++){var td=to.measureText(tu[tp]).width+(tu[tp].length-1)*w.letterSpacing;tl[tp]=td,tc=Math.max(tc,td)}var tm=tc+w.strokeThickness;w.dropShadow&&(tm+=w.dropShadowDistance);var ty=w.lineHeight||ti.fontSize+w.strokeThickness,tv=Math.max(ty,ti.fontSize+w.strokeThickness)+(tu.length-1)*(ty+w.leading);return w.dropShadow&&(tv+=w.dropShadowDistance),new e(h,w,tm,tv,tu,tl,ty+w.leading,tc,ti)},e.wordWrap=function(h,w,q){void 0===q&&(q=e._canvas);for(var tr=q.getContext("2d"),tn=0,ti="",to="",ts={},tu=w.letterSpacing,tl=w.whiteSpace,tc=e.collapseSpaces(tl),tp=e.collapseNewlines(tl),td=!tc,tm=w.wordWrapWidth+tu,ty=e.tokenize(h),tv=0;tv<ty.length;tv++){var tb=ty[tv];if(e.isNewline(tb)){if(!tp){to+=e.addLine(ti),td=!tc,ti="",tn=0;continue}tb=" "}if(tc){var tx=e.isBreakingSpace(tb),tT=e.isBreakingSpace(ti[ti.length-1]);if(tx&&tT)continue}var tE=e.getFromCache(tb,tu,ts,tr);if(tE>tm){if(""!==ti&&(to+=e.addLine(ti),ti="",tn=0),e.canBreakWords(tb,w.breakWords))for(var tA=e.wordWrapSplit(tb),tO=0;tO<tA.length;tO++){for(var tw=tA[tO],tL=1;tA[tO+tL];){var tS=tA[tO+tL],tI=tw[tw.length-1];if(e.canBreakChars(tI,tS,tb,tO,w.breakWords))break;tw+=tS,tL++}tO+=tw.length-1;var tP=e.getFromCache(tw,tu,ts,tr);tP+tn>tm&&(to+=e.addLine(ti),td=!1,ti="",tn=0),ti+=tw,tn+=tP}else{ti.length>0&&(to+=e.addLine(ti),ti="",tn=0);var tR=tv===ty.length-1;to+=e.addLine(tb,!tR),td=!1,ti="",tn=0}}else tE+tn>tm&&(td=!1,to+=e.addLine(ti),ti="",tn=0),(ti.length>0||!e.isBreakingSpace(tb)||td)&&(ti+=tb,tn+=tE)}return to+e.addLine(ti,!1)},e.addLine=function(h,w){return void 0===w&&(w=!0),h=e.trimRight(h),h=w?h+`
`:h},e.getFromCache=function(h,w,q,tr){var tn=q[h];if(void 0===tn){var ti=h.length*w;tn=tr.measureText(h).width+ti,q[h]=tn}return tn},e.collapseSpaces=function(h){return"normal"===h||"pre-line"===h},e.collapseNewlines=function(h){return"normal"===h},e.trimRight=function(h){if("string"!=typeof h)return"";for(var w=h.length-1;w>=0;w--){var q=h[w];if(!e.isBreakingSpace(q))break;h=h.slice(0,-1)}return h},e.isNewline=function(h){return"string"==typeof h&&e._newlines.indexOf(h.charCodeAt(0))>=0},e.isBreakingSpace=function(h){return"string"==typeof h&&e._breakingSpaces.indexOf(h.charCodeAt(0))>=0},e.tokenize=function(h){var w=[],q="";if("string"!=typeof h)return w;for(var tr=0;tr<h.length;tr++){var tn=h[tr];if(e.isBreakingSpace(tn)||e.isNewline(tn)){""!==q&&(w.push(q),q=""),w.push(tn);continue}q+=tn}return""!==q&&w.push(q),w},e.canBreakWords=function(h,w){return w},e.canBreakChars=function(h,w,q,tr,tn){return!0},e.wordWrapSplit=function(h){return h.split("")},e.measureFont=function(h){if(e._fonts[h])return e._fonts[h];var w={ascent:0,descent:0,fontSize:0},q=e._canvas,tr=e._context;tr.font=h;var tn=e.METRICS_STRING+e.BASELINE_SYMBOL,ti=Math.ceil(tr.measureText(tn).width),to=Math.ceil(tr.measureText(e.BASELINE_SYMBOL).width),ts=2*to;to=to*e.BASELINE_MULTIPLIER|0,q.width=ti,q.height=ts,tr.fillStyle="#f00",tr.fillRect(0,0,ti,ts),tr.font=h,tr.textBaseline="alphabetic",tr.fillStyle="#000",tr.fillText(tn,0,to);var tu=tr.getImageData(0,0,ti,ts).data,tl=tu.length,tc=4*ti,tp=0,td=0,tm=!1;for(tp=0;tp<to;++tp){for(var ty=0;ty<tc;ty+=4)if(255!==tu[td+ty]){tm=!0;break}if(tm)break;td+=tc}for(w.ascent=to-tp,td=tl-tc,tm=!1,tp=ts;tp>to;--tp){for(var ty=0;ty<tc;ty+=4)if(255!==tu[td+ty]){tm=!0;break}if(tm)break;td-=tc}return w.descent=tp-to,w.fontSize=w.ascent+w.descent,e._fonts[h]=w,w},e.clearMetrics=function(h){void 0===h&&(h=""),h?delete e._fonts[h]:e._fonts={}},e}(),a4=function(){try{var h=new OffscreenCanvas(0,0),w=h.getContext("2d");return w&&w.measureText?h:document.createElement("canvas")}catch{return document.createElement("canvas")}}();a4.width=a4.height=10,a3._canvas=a4,a3._context=a4.getContext("2d"),a3._fonts={},a3.METRICS_STRING="|\xc9q\xc5",a3.BASELINE_SYMBOL="M",a3.BASELINE_MULTIPLIER=1.4,a3._newlines=[10,13],a3._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var a5={texture:!0,children:!1,baseTexture:!0},a6=function(h){function n(w,q,tr){var tn=this,ti=!1;tr||(tr=document.createElement("canvas"),ti=!0),tr.width=3,tr.height=3;var to=oS.from(tr);return to.orig=new iS,to.trim=new iS,(tn=h.call(this,to)||this)._ownCanvas=ti,tn.canvas=tr,tn.context=tn.canvas.getContext("2d"),tn._resolution=ed.RESOLUTION,tn._autoResolution=!0,tn._text=null,tn._style=null,tn._styleListener=null,tn._font="",tn.text=w,tn.style=q,tn.localStyleID=-1,tn}return!function(h,w){function t(){this.constructor=h}Xc(h,w),h.prototype=null===w?Object.create(w):(t.prototype=w.prototype,new t)}(n,h),n.prototype.updateText=function(h){var w=this._style;if(this.localStyleID!==w.styleID&&(this.dirty=!0,this.localStyleID=w.styleID),!(!this.dirty&&h)){this._font=this._style.toFontString();var q=this.context,tr=a3.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),tn=tr.width,ti=tr.height,to=tr.lines,ts=tr.lineHeight,tu=tr.lineWidths,tl=tr.maxLineWidth,tc=tr.fontProperties;this.canvas.width=Math.ceil((Math.max(1,tn)+2*w.padding)*this._resolution),this.canvas.height=Math.ceil((Math.max(1,ti)+2*w.padding)*this._resolution),q.scale(this._resolution,this._resolution),q.clearRect(0,0,this.canvas.width,this.canvas.height),q.font=this._font,q.lineWidth=w.strokeThickness,q.textBaseline=w.textBaseline,q.lineJoin=w.lineJoin,q.miterLimit=w.miterLimit;for(var tp,td,tm=w.dropShadow?2:1,ty=0;ty<tm;++ty){var tv=w.dropShadow&&0===ty,tb=tv?2*ti:0,tx=tb*this.resolution;if(tv){q.fillStyle="black",q.strokeStyle="black";var tT=w.dropShadowColor,tE=Vi("number"==typeof tT?tT:ef(tT));q.shadowColor="rgba("+255*tE[0]+","+255*tE[1]+","+255*tE[2]+","+w.dropShadowAlpha+")",q.shadowBlur=w.dropShadowBlur,q.shadowOffsetX=Math.cos(w.dropShadowAngle)*w.dropShadowDistance,q.shadowOffsetY=Math.sin(w.dropShadowAngle)*w.dropShadowDistance+tx}else q.fillStyle=this._generateFillStyle(w,to,tr),q.strokeStyle=w.stroke,q.shadowColor="0",q.shadowBlur=0,q.shadowOffsetX=0,q.shadowOffsetY=0;for(var tA=0;tA<to.length;tA++)tp=w.strokeThickness/2,td=w.strokeThickness/2+tA*ts+tc.ascent,"right"===w.align?tp+=tl-tu[tA]:"center"===w.align&&(tp+=(tl-tu[tA])/2),w.stroke&&w.strokeThickness&&this.drawLetterSpacing(to[tA],tp+w.padding,td+w.padding-tb,!0),w.fill&&this.drawLetterSpacing(to[tA],tp+w.padding,td+w.padding-tb)}this.updateTexture()}},n.prototype.drawLetterSpacing=function(h,w,q,tr){void 0===tr&&(tr=!1);var tn=this._style.letterSpacing;if(0===tn){tr?this.context.strokeText(h,w,q):this.context.fillText(h,w,q);return}for(var ti=w,to=Array.from?Array.from(h):h.split(""),ts=this.context.measureText(h).width,tu=0,tl=0;tl<to.length;++tl){var tc=to[tl];tr?this.context.strokeText(tc,ti,q):this.context.fillText(tc,ti,q),ti+=ts-(tu=this.context.measureText(h.substring(tl+1)).width)+tn,ts=tu}},n.prototype.updateTexture=function(){var h=this.canvas;if(this._style.trim){var w=kv(h);w.data&&(h.width=w.width,h.height=w.height,this.context.putImageData(w.data,0,0))}var q=this._texture,tr=this._style,tn=tr.trim?0:tr.padding,ti=q.baseTexture;q.trim.width=q._frame.width=Math.ceil(h.width/this._resolution),q.trim.height=q._frame.height=Math.ceil(h.height/this._resolution),q.trim.x=-tn,q.trim.y=-tn,q.orig.width=q._frame.width-2*tn,q.orig.height=q._frame.height-2*tn,this._onTextureUpdate(),ti.setRealSize(h.width,h.height,this._resolution),this._recursivePostUpdateTransform(),this.dirty=!1},n.prototype._render=function(w){this._autoResolution&&this._resolution!==w.resolution&&(this._resolution=w.resolution,this.dirty=!0),this.updateText(!0),h.prototype._render.call(this,w)},n.prototype.getLocalBounds=function(w){return this.updateText(!0),h.prototype.getLocalBounds.call(this,w)},n.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},n.prototype._generateFillStyle=function(h,w,q){var tr=h.fill;if(!Array.isArray(tr))return tr;if(1===tr.length)return tr[0];var tn,ti=h.dropShadow?h.dropShadowDistance:0,to=h.padding||0,ts=Math.ceil(this.canvas.width/this._resolution)-ti-2*to,tu=Math.ceil(this.canvas.height/this._resolution)-ti-2*to,tl=tr.slice(),tc=h.fillGradientStops.slice();if(!tc.length)for(var tp=tl.length+1,td=1;td<tp;++td)tc.push(td/tp);if(tl.unshift(tr[0]),tc.unshift(0),tl.push(tr[tr.length-1]),tc.push(1),h.fillGradientType===ca.LINEAR_VERTICAL){tn=this.context.createLinearGradient(ts/2,to,ts/2,tu+to);for(var tm=0,ty=q.fontProperties.fontSize+h.strokeThickness,tv=ty/tu,td=0;td<w.length;td++)for(var tb=q.lineHeight*td,tx=0;tx<tl.length;tx++){var tT=Math.max(tm,tb/tu+("number"==typeof tc[tx]?tc[tx]:tx/tl.length)*tv);tT=Math.min(tT,1),tn.addColorStop(tT,tl[tx]),tm=tT}}else{tn=this.context.createLinearGradient(to,tu/2,ts+to,tu/2);for(var tE=tl.length+1,tA=1,td=0;td<tl.length;td++){var tO=void 0;tO="number"==typeof tc[td]?tc[td]:tA/tE,tn.addColorStop(tO,tl[td]),tA++}}return tn},n.prototype.destroy=function(w){"boolean"==typeof w&&(w={children:w}),w=Object.assign({},a5,w),h.prototype.destroy.call(this,w),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(n.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(h){this.updateText(!0);var w=Ri(this.scale.x)||1;this.scale.x=w*h/this._texture.orig.width,this._width=h},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(h){this.updateText(!0);var w=Ri(this.scale.y)||1;this.scale.y=w*h/this._texture.orig.height,this._height=h},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"style",{get:function(){return this._style},set:function(h){(h=h||{})instanceof a2?this._style=h:this._style=new a2(h),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"text",{get:function(){return this._text},set:function(h){h=String(h??""),this._text!==h&&(this._text=h,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"resolution",{get:function(){return this._resolution},set:function(h){this._autoResolution=!1,this._resolution!==h&&(this._resolution=h,this.dirty=!0)},enumerable:!1,configurable:!0}),n}(a$);/*!
 * @pixi/prepare - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */ed.UPLOADS_PER_FRAME=4;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Hc=function(h,w){return(Hc=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,w){h.__proto__=w}||function(h,w){for(var q in w)w.hasOwnProperty(q)&&(h[q]=w[q])})(h,w)},a8=function(){function e(h){this.maxItemsPerFrame=h,this.itemsLeft=0}return e.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},e.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},e}();function Fb(h,w){var q=!1;if(h&&h._textures&&h._textures.length){for(var tr=0;tr<h._textures.length;tr++)if(h._textures[tr]instanceof oS){var tn=h._textures[tr].baseTexture;-1===w.indexOf(tn)&&(w.push(tn),q=!0)}}return q}function Bb(h,w){if(h.baseTexture instanceof oa){var q=h.baseTexture;return -1===w.indexOf(q)&&w.push(q),!0}return!1}function Gb(h,w){if(h._texture&&h._texture instanceof oS){var q=h._texture.baseTexture;return -1===w.indexOf(q)&&w.push(q),!0}return!1}function jb(h,w){return w instanceof a6&&(w.updateText(!0),!0)}function Vb(h,w){if(w instanceof a2){var q=w.toFontString();return a3.measureFont(q),!0}return!1}function Xb(h,w){if(h instanceof a6){-1===w.indexOf(h.style)&&w.push(h.style),-1===w.indexOf(h)&&w.push(h);var q=h._texture.baseTexture;return -1===w.indexOf(q)&&w.push(q),!0}return!1}function Hb(h,w){return h instanceof a2&&(-1===w.indexOf(h)&&w.push(h),!0)}var a7=function(){function e(h){var w=this;this.limiter=new a8(ed.UPLOADS_PER_FRAME),this.renderer=h,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){w.queue&&w.prepareItems()},this.registerFindHook(Xb),this.registerFindHook(Hb),this.registerFindHook(Fb),this.registerFindHook(Bb),this.registerFindHook(Gb),this.registerUploadHook(jb),this.registerUploadHook(Vb)}return e.prototype.upload=function(h,w){"function"==typeof h&&(w=h,h=null),h&&this.add(h),this.queue.length?(w&&this.completes.push(w),this.ticking||(this.ticking=!0,iQ.system.addOnce(this.tick,this,aI.UTILITY))):w&&w()},e.prototype.tick=function(){setTimeout(this.delayedTick,0)},e.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var h=this.queue[0],w=!1;if(h&&!h._destroyed){for(var q=0,tr=this.uploadHooks.length;q<tr;q++)if(this.uploadHooks[q](this.uploadHookHelper,h)){this.queue.shift(),w=!0;break}}w||this.queue.shift()}if(this.queue.length)iQ.system.addOnce(this.tick,this,aI.UTILITY);else{this.ticking=!1;var tn=this.completes.slice(0);this.completes.length=0;for(var q=0,tr=tn.length;q<tr;q++)tn[q]()}},e.prototype.registerFindHook=function(h){return h&&this.addHooks.push(h),this},e.prototype.registerUploadHook=function(h){return h&&this.uploadHooks.push(h),this},e.prototype.add=function(h){for(var w=0,q=this.addHooks.length;w<q&&!this.addHooks[w](h,this.queue);w++);if(h instanceof iW)for(var w=h.children.length-1;w>=0;w--)this.add(h.children[w]);return this},e.prototype.destroy=function(){this.ticking&&iQ.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},e}();function Jg(h,w){return w instanceof oa&&(w._glTextures[h.CONTEXT_UID]||h.texture.bind(w),!0)}function zb(h,w){if(!(w instanceof aZ))return!1;var q=w.geometry;w.finishPoly(),q.updateBatches();for(var tr=q.batches,tn=0;tn<tr.length;tn++){var ti=tr[tn].style.texture;ti&&Jg(h,ti.baseTexture)}return q.batchable||h.geometry.bind(q,w._resolveDirectShader(h)),!0}function Kb(h,w){return h instanceof aZ&&(w.push(h),!0)}var a9=function(h){function n(w){var q=h.call(this,w)||this;return q.uploadHookHelper=q.renderer,q.registerFindHook(Kb),q.registerUploadHook(Jg),q.registerUploadHook(zb),q}return!function(h,w){function t(){this.constructor=h}Hc(h,w),h.prototype=null===w?Object.create(w):(t.prototype=w.prototype,new t)}(n,h),n}(a7),ur=function(){function e(h){this.maxMilliseconds=h,this.frameStart=0}return e.prototype.beginFrame=function(){this.frameStart=Date.now()},e.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},e}(),un=function(){function e(h,w,q){void 0===q&&(q=null),this._texture=h instanceof oS?h:null,this.baseTexture=h instanceof oa?h:this._texture.baseTexture,this.textures={},this.animations={},this.data=w;var tr=this.baseTexture.resource;this.resolution=this._updateResolution(q||(tr?tr.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return e.prototype._updateResolution=function(h){void 0===h&&(h=null);var w=this.data.meta.scale,q=Ca(h,null);return null===q&&(q=void 0!==w?parseFloat(w):1),1!==q&&this.baseTexture.setResolution(q),q},e.prototype.parse=function(h){this._batchIndex=0,this._callback=h,this._frameKeys.length<=e.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},e.prototype._processFrames=function(h){for(var w=h,q=e.BATCH_SIZE;w-h<q&&w<this._frameKeys.length;){var tr=this._frameKeys[w],tn=this._frames[tr],ti=tn.frame;if(ti){var to=null,ts=null,tu=!1!==tn.trimmed&&tn.sourceSize?tn.sourceSize:tn.frame,tl=new iS(0,0,Math.floor(tu.w)/this.resolution,Math.floor(tu.h)/this.resolution);to=tn.rotated?new iS(Math.floor(ti.x)/this.resolution,Math.floor(ti.y)/this.resolution,Math.floor(ti.h)/this.resolution,Math.floor(ti.w)/this.resolution):new iS(Math.floor(ti.x)/this.resolution,Math.floor(ti.y)/this.resolution,Math.floor(ti.w)/this.resolution,Math.floor(ti.h)/this.resolution),!1!==tn.trimmed&&tn.spriteSourceSize&&(ts=new iS(Math.floor(tn.spriteSourceSize.x)/this.resolution,Math.floor(tn.spriteSourceSize.y)/this.resolution,Math.floor(ti.w)/this.resolution,Math.floor(ti.h)/this.resolution)),this.textures[tr]=new oS(this.baseTexture,to,tl,ts,tn.rotated?2:0,tn.anchor),oS.addToCache(this.textures[tr],tr)}w++}},e.prototype._processAnimations=function(){var h=this.data.animations||{};for(var w in h){this.animations[w]=[];for(var q=0;q<h[w].length;q++){var tr=h[w][q];this.animations[w].push(this.textures[tr])}}},e.prototype._parseComplete=function(){var h=this._callback;this._callback=null,this._batchIndex=0,h.call(this,this.textures)},e.prototype._nextBatch=function(){var h=this;this._processFrames(this._batchIndex*e.BATCH_SIZE),this._batchIndex++,setTimeout(function(){h._batchIndex*e.BATCH_SIZE<h._frameKeys.length?h._nextBatch():(h._processAnimations(),h._parseComplete())},0)},e.prototype.destroy=function(h){var w;for(var q in void 0===h&&(h=!1),this.textures)this.textures[q].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,h&&(null===(w=this._texture)||void 0===w||w.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},e.BATCH_SIZE=1e3,e}(),ui=function(){function e(){}return e.use=function(h,w){var q=h.name+"_image";if(!h.data||h.type!==s9.TYPE.JSON||!h.data.frames||this.resources[q]){w();return}var tr={crossOrigin:h.crossOrigin,metadata:h.metadata.imageMetadata,parentResource:h},tn=e.getResourcePath(h,this.baseUrl);this.add(q,tn,tr,function(q){if(q.error){w(q.error);return}var tr=new un(q.texture,h.data,h.url);tr.parse(function(){h.spritesheet=tr,h.textures=tr.textures,w()})})},e.getResourcePath=function(h,w){return h.isDataUrl?h.data.meta.image:ex.resolve(h.url.replace(w,""),h.data.meta.image)},e}(),zc=function(h,w){return(zc=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,w){h.__proto__=w}||function(h,w){for(var q in w)w.hasOwnProperty(q)&&(h[q]=w[q])})(h,w)};function rm(h,w){function t(){this.constructor=h}zc(h,w),h.prototype=null===w?Object.create(w):(t.prototype=w.prototype,new t)}var us=new iM,ua=function(h){function n(w,q,tr){void 0===q&&(q=100),void 0===tr&&(tr=100);var tn=h.call(this,w)||this;return tn.tileTransform=new iH,tn._width=q,tn._height=tr,tn.uvMatrix=w.uvMatrix||new sT(w),tn.pluginName="tilingSprite",tn.uvRespectAnchor=!1,tn}return rm(n,h),Object.defineProperty(n.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(h){this.uvMatrix.clampMargin=h,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(h){this.tileTransform.scale.copyFrom(h)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(h){this.tileTransform.position.copyFrom(h)},enumerable:!1,configurable:!0}),n.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},n.prototype._render=function(h){var w=this._texture;w&&w.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),h.batch.setObjectRenderer(h.plugins[this.pluginName]),h.plugins[this.pluginName].render(this))},n.prototype._calculateBounds=function(){var h=-(this._width*this._anchor._x),w=-(this._height*this._anchor._y),q=this._width*(1-this._anchor._x),tr=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,h,w,q,tr)},n.prototype.getLocalBounds=function(w){return 0===this.children.length?(this._bounds.minX=-(this._width*this._anchor._x),this._bounds.minY=-(this._height*this._anchor._y),this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),w||(this._localBoundsRect||(this._localBoundsRect=new iS),w=this._localBoundsRect),this._bounds.getRectangle(w)):h.prototype.getLocalBounds.call(this,w)},n.prototype.containsPoint=function(h){this.worldTransform.applyInverse(h,us);var w=this._width,q=this._height,tr=-w*this.anchor._x;if(us.x>=tr&&us.x<tr+w){var tn=-q*this.anchor._y;if(us.y>=tn&&us.y<tn+q)return!0}return!1},n.prototype.destroy=function(w){h.prototype.destroy.call(this,w),this.tileTransform=null,this.uvMatrix=null},n.from=function(h,w){return"number"==typeof w&&(we("5.3.0","TilingSprite.from use options instead of width and height args"),w={width:w,height:arguments[2]}),new n(oS.from(h,w),w.width,w.height)},Object.defineProperty(n.prototype,"width",{get:function(){return this._width},set:function(h){this._width=h},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this._height},set:function(h){this._height=h},enumerable:!1,configurable:!0}),n}(a$),uu=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,ul=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord - floor(vTextureCoord - uClampOffset);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture2D(uSampler, coord);
    gl_FragColor = texSample * uColor;
}
`,uc=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 sample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = sample * uColor;
}
`,up=new iU,uf=function(h){function n(w){var q=h.call(this,w)||this,tr={globals:q.renderer.globalUniforms};return q.shader=sp.from(uu,ul,tr),q.simpleShader=sp.from(uu,uc,tr),q.quad=new oj,q.state=sd.for2d(),q}return rm(n,h),n.prototype.render=function(h){var w=this.renderer,q=this.quad,tr=q.vertices;tr[0]=tr[6]=-(h._width*h.anchor.x),tr[1]=tr[3]=-(h._height*h.anchor.y),tr[2]=tr[4]=h._width*(1-h.anchor.x),tr[5]=tr[7]=h._height*(1-h.anchor.y),h.uvRespectAnchor&&((tr=q.uvs)[0]=tr[6]=-h.anchor.x,tr[1]=tr[3]=-h.anchor.y,tr[2]=tr[4]=1-h.anchor.x,tr[5]=tr[7]=1-h.anchor.y),q.invalidate();var tn=h._texture,ti=tn.baseTexture,to=h.tileTransform.localTransform,ts=h.uvMatrix,tu=ti.isPowerOfTwo&&tn.frame.width===ti.width&&tn.frame.height===ti.height;tu&&(ti._glTextures[w.CONTEXT_UID]?tu=ti.wrapMode!==ic.CLAMP:ti.wrapMode===ic.CLAMP&&(ti.wrapMode=ic.REPEAT));var tl=tu?this.simpleShader:this.shader,tc=tn.width,tp=tn.height,td=h._width,tm=h._height;up.set(to.a*tc/td,to.b*tc/tm,to.c*tp/td,to.d*tp/tm,to.tx/td,to.ty/tm),up.invert(),tu?up.prepend(ts.mapCoord):(tl.uniforms.uMapCoord=ts.mapCoord.toArray(!0),tl.uniforms.uClampFrame=ts.uClampFrame,tl.uniforms.uClampOffset=ts.uClampOffset),tl.uniforms.uTransform=up.toArray(!0),tl.uniforms.uColor=of(h.tint,h.worldAlpha,tl.uniforms.uColor,ti.alphaMode),tl.uniforms.translationMatrix=h.transform.worldTransform.toArray(!0),tl.uniforms.uSampler=tn,w.shader.bind(tl),w.geometry.bind(q),this.state.blendMode=nf(h.blendMode,ti.alphaMode),w.state.set(this.state),w.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},n}(oz),Kc=function(h,w){return(Kc=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,w){h.__proto__=w}||function(h,w){for(var q in w)w.hasOwnProperty(q)&&(h[q]=w[q])})(h,w)};function bf(h,w){function t(){this.constructor=h}Kc(h,w),h.prototype=null===w?Object.create(w):(t.prototype=w.prototype,new t)}var ud=function(){function e(h,w){this.uvBuffer=h,this.uvMatrix=w,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return e.prototype.update=function(h){if(!(!h&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var w=this.uvBuffer.data;this.data&&this.data.length===w.length||(this.data=new Float32Array(w.length)),this.uvMatrix.multiplyUvs(w,this.data),this._updateID++}},e}(),u_=new iM,ug=new iR,um=function(h){function n(w,q,tr,tn){void 0===tn&&(tn=n9.TRIANGLES);var ti=h.call(this)||this;return ti.geometry=w,w.refCount++,ti.shader=q,ti.state=tr||sd.for2d(),ti.drawMode=tn,ti.start=0,ti.size=0,ti.uvs=null,ti.indices=null,ti.vertexData=new Float32Array(1),ti.vertexDirty=0,ti._transformID=-1,ti.tint=16777215,ti.blendMode=n7.NORMAL,ti._roundPixels=ed.ROUND_PIXELS,ti.batchUvs=null,ti}return bf(n,h),Object.defineProperty(n.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"material",{get:function(){return this.shader},set:function(h){this.shader=h},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(h){this.state.blendMode=h},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(h){this._roundPixels!==h&&(this._transformID=-1),this._roundPixels=h},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"tint",{get:function(){return this.shader.tint},set:function(h){this.shader.tint=h},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"texture",{get:function(){return this.shader.texture},set:function(h){this.shader.texture=h},enumerable:!1,configurable:!0}),n.prototype._render=function(h){var w=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===n9.TRIANGLES&&w.length<2*n.BATCHABLE_SIZE?this._renderToBatch(h):this._renderDefault(h)},n.prototype._renderDefault=function(h){var w=this.shader;w.alpha=this.worldAlpha,w.update&&w.update(),h.batch.flush(),w.program.uniformData.translationMatrix&&(w.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0)),h.shader.bind(w),h.state.set(this.state),h.geometry.bind(this.geometry,w),h.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},n.prototype._renderToBatch=function(h){var w=this.geometry;this.shader.uvMatrix&&(this.shader.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=w.indexBuffer.data,this._tintRGB=this.shader._tintRGB,this._texture=this.shader.texture;var q=this.material.pluginName;h.batch.setObjectRenderer(h.plugins[q]),h.plugins[q].render(this)},n.prototype.calculateVertices=function(){var h=this.geometry,w=h.buffers[0].data;if(!(h.vertexDirtyId===this.vertexDirty&&this._transformID===this.transform._worldID)){this._transformID=this.transform._worldID,this.vertexData.length!==w.length&&(this.vertexData=new Float32Array(w.length));for(var q=this.transform.worldTransform,tr=q.a,tn=q.b,ti=q.c,to=q.d,ts=q.tx,tu=q.ty,tl=this.vertexData,tc=0;tc<tl.length/2;tc++){var tp=w[2*tc],td=w[2*tc+1];tl[2*tc]=tr*tp+ti*td+ts,tl[2*tc+1]=tn*tp+to*td+tu}if(this._roundPixels)for(var tm=ed.RESOLUTION,tc=0;tc<tl.length;++tc)tl[tc]=Math.round((tl[tc]*tm|0)/tm);this.vertexDirty=h.vertexDirtyId}},n.prototype.calculateUvs=function(){var h=this.geometry.buffers[1];this.shader.uvMatrix.isSimple?this.uvs=h.data:(this.batchUvs||(this.batchUvs=new ud(h,this.shader.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},n.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},n.prototype.containsPoint=function(h){if(!this.getBounds().contains(h.x,h.y))return!1;this.worldTransform.applyInverse(h,u_);for(var w=this.geometry.getBuffer("aVertexPosition").data,q=ug.points,tr=this.geometry.getIndex().data,tn=tr.length,ti=4===this.drawMode?3:1,to=0;to+2<tn;to+=ti){var ts=2*tr[to],tu=2*tr[to+1],tl=2*tr[to+2];if(q[0]=w[ts],q[1]=w[ts+1],q[2]=w[tu],q[3]=w[tu+1],q[4]=w[tl],q[5]=w[tl+1],ug.contains(u_.x,u_.y))return!0}return!1},n.prototype.destroy=function(w){h.prototype.destroy.call(this,w),this.geometry.refCount--,0===this.geometry.refCount&&this.geometry.dispose(),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},n.BATCHABLE_SIZE=100,n}(iW),uy=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,uv=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`,ub=function(h){function n(w,q){var tr=this,tn={uSampler:w,alpha:1,uTextureMatrix:iU.IDENTITY,uColor:new Float32Array([1,1,1,1])};return(q=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},q)).uniforms&&Object.assign(tn,q.uniforms),(tr=h.call(this,q.program||sl.from(uv,uy),tn)||this)._colorDirty=!1,tr.uvMatrix=new sT(w),tr.batchable=void 0===q.program,tr.pluginName=q.pluginName,tr.tint=q.tint,tr.alpha=q.alpha,tr}return bf(n,h),Object.defineProperty(n.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(h){this.uniforms.uSampler!==h&&(this.uniforms.uSampler=h,this.uvMatrix.texture=h)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"alpha",{get:function(){return this._alpha},set:function(h){h!==this._alpha&&(this._alpha=h,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"tint",{get:function(){return this._tint},set:function(h){h!==this._tint&&(this._tint=h,this._tintRGB=(h>>16)+(65280&h)+((255&h)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),n.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var h=this.texture.baseTexture;of(this._tint,this._alpha,this.uniforms.uColor,h.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},n}(sp),ux=function(h){function n(w,q,tr){var tn=h.call(this)||this,ti=new oM(w),to=new oM(q,!0),ts=new oM(tr,!0,!0);return tn.addAttribute("aVertexPosition",ti,2,!1,iu.FLOAT).addAttribute("aTextureCoord",to,2,!1,iu.FLOAT).addIndex(ts),tn._updateId=-1,tn}return bf(n,h),Object.defineProperty(n.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),n}(oF),Yc=function(h,w){return(Yc=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,w){h.__proto__=w}||function(h,w){for(var q in w)w.hasOwnProperty(q)&&(h[q]=w[q])})(h,w)},Ma=function(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[]},uT=[function(){function e(){}return e.test=function(h){return"string"==typeof h&&0===h.indexOf("info face=")},e.parse=function(h){var w=h.match(/^[a-z]+\s+.+$/gm),q={info:[],common:[],page:[],char:[],chars:[],kerning:[]};for(var tr in w){var tn=w[tr].match(/^[a-z]+/gm)[0],ti=w[tr].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),to={};for(var ts in ti){var tu=ti[ts].split("="),tl=tu[0],tc=tu[1].replace(/"/gm,""),tp=parseFloat(tc),td=isNaN(tp)?tc:tp;to[tl]=td}q[tn].push(to)}var tm=new Ma;return q.info.forEach(function(h){return tm.info.push({face:h.face,size:parseInt(h.size,10)})}),q.common.forEach(function(h){return tm.common.push({lineHeight:parseInt(h.lineHeight,10)})}),q.page.forEach(function(h){return tm.page.push({id:parseInt(h.id,10),file:h.file})}),q.char.forEach(function(h){return tm.char.push({id:parseInt(h.id,10),page:parseInt(h.page,10),x:parseInt(h.x,10),y:parseInt(h.y,10),width:parseInt(h.width,10),height:parseInt(h.height,10),xoffset:parseInt(h.xoffset,10),yoffset:parseInt(h.yoffset,10),xadvance:parseInt(h.xadvance,10)})}),q.kerning.forEach(function(h){return tm.kerning.push({first:parseInt(h.first,10),second:parseInt(h.second,10),amount:parseInt(h.amount,10)})}),tm},e}(),function(){function e(){}return e.test=function(h){return h instanceof XMLDocument&&h.getElementsByTagName("page").length&&null!==h.getElementsByTagName("info")[0].getAttribute("face")},e.parse=function(h){for(var w=new Ma,q=h.getElementsByTagName("info"),tr=h.getElementsByTagName("common"),tn=h.getElementsByTagName("page"),ti=h.getElementsByTagName("char"),to=h.getElementsByTagName("kerning"),ts=0;ts<q.length;ts++)w.info.push({face:q[ts].getAttribute("face"),size:parseInt(q[ts].getAttribute("size"),10)});for(var ts=0;ts<tr.length;ts++)w.common.push({lineHeight:parseInt(tr[ts].getAttribute("lineHeight"),10)});for(var ts=0;ts<tn.length;ts++)w.page.push({id:parseInt(tn[ts].getAttribute("id"),10)||0,file:tn[ts].getAttribute("file")});for(var ts=0;ts<ti.length;ts++){var tu=ti[ts];w.char.push({id:parseInt(tu.getAttribute("id"),10),page:parseInt(tu.getAttribute("page"),10)||0,x:parseInt(tu.getAttribute("x"),10),y:parseInt(tu.getAttribute("y"),10),width:parseInt(tu.getAttribute("width"),10),height:parseInt(tu.getAttribute("height"),10),xoffset:parseInt(tu.getAttribute("xoffset"),10),yoffset:parseInt(tu.getAttribute("yoffset"),10),xadvance:parseInt(tu.getAttribute("xadvance"),10)})}for(var ts=0;ts<to.length;ts++)w.kerning.push({first:parseInt(to[ts].getAttribute("first"),10),second:parseInt(to[ts].getAttribute("second"),10),amount:parseInt(to[ts].getAttribute("amount"),10)});return w},e}()];function om(h){for(var w=0;w<uT.length;w++)if(uT[w].test(h))return uT[w];return null}function Yp(h,w,q,tr,tn,ti){var to=q.fill;if(!Array.isArray(to))return to;if(1===to.length)return to[0];var ts,tu=q.dropShadow?q.dropShadowDistance:0,tl=q.padding||0,tc=Math.ceil(h.width/tr)-tu-2*tl,tp=Math.ceil(h.height/tr)-tu-2*tl,td=to.slice(),tm=q.fillGradientStops.slice();if(!tm.length)for(var ty=td.length+1,tv=1;tv<ty;++tv)tm.push(tv/ty);if(td.unshift(to[0]),tm.unshift(0),td.push(to[to.length-1]),tm.push(1),q.fillGradientType===ca.LINEAR_VERTICAL){ts=w.createLinearGradient(tc/2,tl,tc/2,tp+tl);for(var tb=0,tx=ti.fontProperties.fontSize+q.strokeThickness,tT=tx/tp,tv=0;tv<tn.length;tv++)for(var tE=ti.lineHeight*tv,tA=0;tA<td.length;tA++){var tO=Math.max(tb,tE/tp+("number"==typeof tm[tA]?tm[tA]:tA/td.length)*tT);tO=Math.min(tO,1),ts.addColorStop(tO,td[tA]),tb=tO}}else{ts=w.createLinearGradient(tl,tp/2,tc+tl,tp/2);for(var tw=td.length+1,tL=1,tv=0;tv<td.length;tv++){var tS=void 0;tS="number"==typeof tm[tv]?tm[tv]:tL/tw,ts.addColorStop(tS,td[tv]),tL++}}return ts}var uE=function(){function e(h,w){var q=h.info[0],tr=h.common[0],tn=Ca(h.page[0].file),ti={};this.font=q.face,this.size=q.size,this.lineHeight=tr.lineHeight/tn,this.chars={},this.pageTextures=ti;for(var to=0;to<h.page.length;to++){var ts=h.page[to],tu=ts.id,tl=ts.file;ti[tu]=w instanceof Array?w[to]:w[tl]}for(var to=0;to<h.char.length;to++){var tc=h.char[to],tu=tc.id,tp=tc.page,td=h.char[to],tm=td.x,ty=td.y,tv=td.width,tb=td.height,tx=td.xoffset,tT=td.yoffset,tE=td.xadvance;tm/=tn,ty/=tn,tv/=tn,tb/=tn,tx/=tn,tT/=tn,tE/=tn;var tA=new iS(tm+ti[tp].frame.x/tn,ty+ti[tp].frame.y/tn,tv,tb);this.chars[tu]={xOffset:tx,yOffset:tT,xAdvance:tE,kerning:{},texture:new oS(ti[tp].baseTexture,tA),page:tp}}for(var to=0;to<h.kerning.length;to++){var tO=h.kerning[to],tw=tO.first,tL=tO.second,tS=tO.amount;tw/=tn,tL/=tn,tS/=tn,this.chars[tL]&&(this.chars[tL].kerning[tw]=tS)}}return e.prototype.destroy=function(){for(var h in this.chars)this.chars[h].texture.destroy(),this.chars[h].texture=null;for(var h in this.pageTextures)this.pageTextures[h].destroy(!0),this.pageTextures[h]=null;this.chars=null,this.pageTextures=null},e.install=function(h,w){if(h instanceof Ma)q=h;else{var q,tr=om(h);if(!tr)throw Error("Unrecognized data format for font.");q=tr.parse(h)}w instanceof oS&&(w=[w]);var tn=new e(q,w);return e.available[tn.font]=tn,tn},e.uninstall=function(h){var w=e.available[h];if(!w)throw Error("No font found named '"+h+"'");w.destroy(),delete e.available[h]},e.from=function(h,w,q){if(!h)throw Error("[BitmapFont] Property `name` is required.");var tr=Object.assign({},e.defaultOptions,q),tn=tr.chars,ti=tr.padding,to=tr.resolution,ts=tr.textureWidth,tu=tr.textureHeight,tl=function(h){"string"==typeof h&&(h=[h]);for(var w=[],q=0,tr=h.length;q<tr;q++){var tn=h[q];if(Array.isArray(tn)){if(2!==tn.length)throw Error("[BitmapFont]: Invalid character range length, expecting 2 got "+tn.length+".");var ti=tn[0].charCodeAt(0),to=tn[1].charCodeAt(0);if(to<ti)throw Error("[BitmapFont]: Invalid character range.");for(var ts=ti;ts<=to;ts++)w.push(String.fromCharCode(ts))}else w.push.apply(w,tn.split(""))}if(0===w.length)throw Error("[BitmapFont]: Empty set when resolving characters.");return w}(tn),tc=w instanceof a2?w:new a2(w),tp=new Ma;tp.info[0]={face:tc.fontFamily,size:tc.fontSize},tp.common[0]={lineHeight:tc.fontSize};for(var td,tm,ty,tv=0,tb=0,tx=0,tT=[],tE=0;tE<tl.length;tE++){td||((td=document.createElement("canvas")).width=ts,td.height=tu,tm=td.getContext("2d"),ty=new oa(td,{resolution:to}),tT.push(new oS(ty)),tp.page.push({id:tT.length-1,file:""}));var tA=a3.measureText(tl[tE],tc,!1,td),tO=tA.width,tw=Math.ceil(tA.height),tL=Math.ceil(("italic"===tc.fontStyle?2:1)*tO);if(tb>=tu-tw*to){if(0===tb)throw Error("[BitmapFont] textureHeight "+tu+"px is too small for "+tc.fontSize+"px fonts");--tE,td=null,tm=null,ty=null,tb=0,tv=0,tx=0;continue}if(tx=Math.max(tw+tA.fontProperties.descent,tx),tL*to+tv>=ts){--tE,tb+=tx*to,tb=Math.ceil(tb),tv=0,tx=0;continue}(function(h,w,q,tr,tn,ti,to){var ts=q.text,tu=q.fontProperties;w.translate(tr,tn),w.scale(ti,ti);var tl=to.strokeThickness/2,tc=-(to.strokeThickness/2);w.font=to.toFontString(),w.lineWidth=to.strokeThickness,w.textBaseline=to.textBaseline,w.lineJoin=to.lineJoin,w.miterLimit=to.miterLimit,w.fillStyle=Yp(h,w,to,ti,[ts],q),w.strokeStyle=to.stroke,w.font=to.toFontString(),w.lineWidth=to.strokeThickness,w.textBaseline=to.textBaseline,w.lineJoin=to.lineJoin,w.miterLimit=to.miterLimit,w.fillStyle=Yp(h,w,to,ti,[ts],q),w.strokeStyle=to.stroke;var tp=to.dropShadowColor,td=Vi("number"==typeof tp?tp:ef(tp));to.dropShadow?(w.shadowColor="rgba("+255*td[0]+","+255*td[1]+","+255*td[2]+","+to.dropShadowAlpha+")",w.shadowBlur=to.dropShadowBlur,w.shadowOffsetX=Math.cos(to.dropShadowAngle)*to.dropShadowDistance,w.shadowOffsetY=Math.sin(to.dropShadowAngle)*to.dropShadowDistance):(w.shadowColor="0",w.shadowBlur=0,w.shadowOffsetX=0,w.shadowOffsetY=0),to.stroke&&to.strokeThickness&&w.strokeText(ts,tl,tc+q.lineHeight-tu.descent),to.fill&&w.fillText(ts,tl,tc+q.lineHeight-tu.descent),w.setTransform(),w.fillStyle="rgba(0, 0, 0, 0)"})(td,tm,tA,tv,tb,to,tc);var tS=tA.text.charCodeAt(0);tp.char.push({id:tS,page:tT.length-1,x:tv/to,y:tb/to,width:tL,height:tw,xoffset:0,yoffset:0,xadvance:Math.ceil(tO-(tc.dropShadow?tc.dropShadowDistance:0)-(tc.stroke?tc.strokeThickness:0))}),tv+=(tL+2*ti)*to,tv=Math.ceil(tv)}var tI=new e(tp,tT);return void 0!==e.available[h]&&e.uninstall(h),e.available[h]=tI,tI},e.ALPHA=[["a","z"],["A","Z"]," "],e.NUMERIC=[["0","9"]],e.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],e.ASCII=[[" ","~"]],e.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:e.ALPHANUMERIC},e.available={},e}(),uA=[],uO=[],uw=function(h){function n(w,q){void 0===q&&(q={});var tr=h.call(this)||this;tr._tint=16777215,q.font&&(we("5.3.0","PIXI.BitmapText constructor style.font property is deprecated."),tr._upgradeStyle(q));var tn=Object.assign({},n.styleDefaults,q),ti=tn.align,to=tn.tint,ts=tn.maxWidth,tu=tn.letterSpacing,tl=tn.fontName,tc=tn.fontSize;if(!uE.available[tl])throw Error('Missing BitmapFont "'+tl+'"');return tr._activePagesMeshData=[],tr._textWidth=0,tr._textHeight=0,tr._align=ti,tr._tint=to,tr._fontName=tl,tr._fontSize=tc||uE.available[tl].size,tr._text=w,tr._maxWidth=ts,tr._maxLineHeight=0,tr._letterSpacing=tu,tr._anchor=new ik(function(){tr.dirty=!0},tr,0,0),tr.roundPixels=ed.ROUND_PIXELS,tr.dirty=!0,tr}return!function(h,w){function t(){this.constructor=h}Yc(h,w),h.prototype=null===w?Object.create(w):(t.prototype=w.prototype,new t)}(n,h),n.prototype.updateText=function(){for(var h,w=uE.available[this._fontName],q=this._fontSize/w.size,tr=new iM,tn=[],ti=[],to=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",ts=to.length,tu=this._maxWidth*w.size/this._fontSize,tl=null,tc=0,tp=0,td=0,tm=-1,ty=0,tv=0,tb=0,tx=0;tx<ts;tx++){var tT=to.charCodeAt(tx),tE=to.charAt(tx);if(/(?:\s)/.test(tE)&&(tm=tx,ty=tc),"\r"===tE||tE===`
`){ti.push(tc),tp=Math.max(tp,tc),++td,++tv,tr.x=0,tr.y+=w.lineHeight,tl=null;continue}var tA=w.chars[tT];if(tA){tl&&tA.kerning[tl]&&(tr.x+=tA.kerning[tl]);var tO=uO.pop()||{texture:oS.EMPTY,line:0,charCode:0,position:new iM};tO.texture=tA.texture,tO.line=td,tO.charCode=tT,tO.position.x=tr.x+tA.xOffset+this._letterSpacing/2,tO.position.y=tr.y+tA.yOffset,tn.push(tO),tr.x+=tA.xAdvance+this._letterSpacing,tc=tr.x,tb=Math.max(tb,tA.yOffset+tA.texture.height),tl=tT,-1!==tm&&tu>0&&tr.x>tu&&(Ui(tn,1+tm-++tv,1+tx-tm),tx=tm,tm=-1,ti.push(ty),tp=Math.max(tp,ty),td++,tr.x=0,tr.y+=w.lineHeight,tl=null)}}var tw=to.charAt(to.length-1);"\r"!==tw&&tw!==`
`&&(/(?:\s)/.test(tw)&&(tc=ty),ti.push(tc),tp=Math.max(tp,tc));for(var tL=[],tx=0;tx<=td;tx++){var tS=0;"right"===this._align?tS=tp-ti[tx]:"center"===this._align&&(tS=(tp-ti[tx])/2),tL.push(tS)}for(var tI=tn.length,tP={},tR=[],tN=this._activePagesMeshData,tx=0;tx<tN.length;tx++)uA.push(tN[tx]);for(var tx=0;tx<tI;tx++){var tM=tn[tx].texture,tk=tM.baseTexture.uid;if(!tP[tk]){var tU=uA.pop();if(!tU){var tC=new ux,tD=new ub(oS.EMPTY);tU={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:new um(tC,tD),vertices:null,uvs:null,indices:null}}tU.index=0,tU.indexCount=0,tU.vertexCount=0,tU.uvsCount=0,tU.total=0,tU.mesh.texture=new oS(tM.baseTexture),tU.mesh.tint=this._tint,tR.push(tU),tP[tk]=tU}tP[tk].total++}for(var tx=0;tx<tN.length;tx++)-1===tR.indexOf(tN[tx])&&this.removeChild(tN[tx].mesh);for(var tx=0;tx<tR.length;tx++)tR[tx].mesh.parent!==this&&this.addChild(tR[tx].mesh);for(var tx in this._activePagesMeshData=tR,tP){var tU=tP[tx],tF=tU.total;(!((null===(h=tU.indices)||void 0===h?void 0:h.length)>6*tF)||tU.vertices.length<2*um.BATCHABLE_SIZE)&&(tU.vertices=new Float32Array(8*tF),tU.uvs=new Float32Array(8*tF),tU.indices=new Uint16Array(6*tF)),tU.mesh.size=6*tF}for(var tx=0;tx<tI;tx++){var tE=tn[tx],tB=(tE.position.x+tL[tE.line])*q,tj=tE.position.y*q,tM=tE.texture,tG=tP[tM.baseTexture.uid],tV=tM.frame,tX=tM._uvs,tH=tG.index++;tG.indices[6*tH+0]=0+4*tH,tG.indices[6*tH+1]=1+4*tH,tG.indices[6*tH+2]=2+4*tH,tG.indices[6*tH+3]=0+4*tH,tG.indices[6*tH+4]=2+4*tH,tG.indices[6*tH+5]=3+4*tH,tG.vertices[8*tH+0]=tB,tG.vertices[8*tH+1]=tj,tG.vertices[8*tH+2]=tB+tV.width*q,tG.vertices[8*tH+3]=tj,tG.vertices[8*tH+4]=tB+tV.width*q,tG.vertices[8*tH+5]=tj+tV.height*q,tG.vertices[8*tH+6]=tB,tG.vertices[8*tH+7]=tj+tV.height*q,tG.uvs[8*tH+0]=tX.x0,tG.uvs[8*tH+1]=tX.y0,tG.uvs[8*tH+2]=tX.x1,tG.uvs[8*tH+3]=tX.y1,tG.uvs[8*tH+4]=tX.x2,tG.uvs[8*tH+5]=tX.y2,tG.uvs[8*tH+6]=tX.x3,tG.uvs[8*tH+7]=tX.y3}for(var tx in this._textWidth=tp*q,this._textHeight=(tr.y+w.lineHeight)*q,tP){var tU=tP[tx];if(0!==this.anchor.x||0!==this.anchor.y)for(var tz=0,tK=this._textWidth*this.anchor.x,tY=this._textHeight*this.anchor.y,tW=0;tW<tU.total;tW++)tU.vertices[tz++]-=tK,tU.vertices[tz++]-=tY,tU.vertices[tz++]-=tK,tU.vertices[tz++]-=tY,tU.vertices[tz++]-=tK,tU.vertices[tz++]-=tY,tU.vertices[tz++]-=tK,tU.vertices[tz++]-=tY;this._maxLineHeight=tb*q;var tq=tU.mesh.geometry.getBuffer("aVertexPosition"),tZ=tU.mesh.geometry.getBuffer("aTextureCoord"),tJ=tU.mesh.geometry.getIndex();tq.data=tU.vertices,tZ.data=tU.uvs,tJ.data=tU.indices,tq.update(),tZ.update(),tJ.update()}for(var tx=0;tx<tn.length;tx++)uO.push(tn[tx])},n.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},n.prototype.getLocalBounds=function(){return this.validate(),h.prototype.getLocalBounds.call(this)},n.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(n.prototype,"tint",{get:function(){return this._tint},set:function(h){if(this._tint!==h){this._tint=h;for(var w=0;w<this._activePagesMeshData.length;w++)this._activePagesMeshData[w].mesh.tint=h}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"align",{get:function(){return this._align},set:function(h){this._align!==h&&(this._align=h,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fontName",{get:function(){return this._fontName},set:function(h){if(!uE.available[h])throw Error('Missing BitmapFont "'+h+'"');this._fontName!==h&&(this._fontName=h,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fontSize",{get:function(){return this._fontSize},set:function(h){this._fontSize!==h&&(this._fontSize=h,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"anchor",{get:function(){return this._anchor},set:function(h){"number"==typeof h?this._anchor.set(h):this._anchor.copyFrom(h)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"text",{get:function(){return this._text},set:function(h){h=String(h??""),this._text!==h&&(this._text=h,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(h){this._maxWidth!==h&&(this._maxWidth=h,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(h){this._letterSpacing!==h&&(this._letterSpacing=h,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),n.prototype._upgradeStyle=function(h){if("string"==typeof h.font){var w=h.font.split(" ");h.fontName=1===w.length?w[0]:w.slice(1).join(" "),w.length>=2&&(h.fontSize=parseInt(w[0],10))}else h.fontName=h.font.name,h.fontSize="number"==typeof h.font.size?h.font.size:parseInt(h.font.size,10)},n.registerFont=function(h,w){return we("5.3.0","PIXI.BitmapText.registerFont is deprecated, use PIXI.BitmapFont.install"),uE.install(h,w)},Object.defineProperty(n,"fonts",{get:function(){return we("5.3.0","PIXI.BitmapText.fonts is deprecated, use PIXI.BitmapFont.available"),uE.available},enumerable:!1,configurable:!0}),n.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},n}(iW),uL=function(){function e(){}return e.add=function(){s9.setExtensionXhrType("fnt",s9.XHR_RESPONSE_TYPE.DOCUMENT)},e.use=function(h,w){var q=om(h.data);if(!q){w();return}for(var tr=e.getBaseUrl(this,h),tn=q.parse(h.data),ti={},s=function(q){ti[q.metadata.pageFile]=q.texture,Object.keys(ti).length===tn.page.length&&(h.bitmapFont=uE.install(tn,ti),w())},to=0;to<tn.page.length;++to){var ts=tn.page[to].file,tu=tr+ts,tl=!1;for(var tc in this.resources){var tp=this.resources[tc];if(tp.url===tu){tp.metadata.pageFile=ts,tp.texture?s(tp):tp.onAfterMiddleware.add(s),tl=!0;break}}if(!tl){var td={crossOrigin:h.crossOrigin,loadType:s9.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:ts},h.metadata.imageMetadata),parentResource:h};this.add(tu,td,s)}}},e.getBaseUrl=function(h,w){var q=w.isDataUrl?"":e.dirname(w.url);return w.isDataUrl&&("."===q&&(q=""),h.baseUrl&&q&&"/"===h.baseUrl.charAt(h.baseUrl.length-1)&&(q+="/")),(q=q.replace(h.baseUrl,""))&&"/"!==q.charAt(q.length-1)&&(q+="/"),q},e.dirname=function(h){var w=h.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return w===h?".":""===w?"/":w},e}(),Wc=function(h,w){return(Wc=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,w){h.__proto__=w}||function(h,w){for(var q in w)w.hasOwnProperty(q)&&(h[q]=w[q])})(h,w)},uS=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`,uI=function(h){function n(w){void 0===w&&(w=1);var q=h.call(this,sX,uS,{uAlpha:1})||this;return q.alpha=w,q}return!function(h,w){function t(){this.constructor=h}Wc(h,w),h.prototype=null===w?Object.create(w):(t.prototype=w.prototype,new t)}(n,h),Object.defineProperty(n.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(h){this.uniforms.uAlpha=h},enumerable:!1,configurable:!0}),n}(sy),qc=function(h,w){return(qc=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,w){h.__proto__=w}||function(h,w){for(var q in w)w.hasOwnProperty(q)&&(h[q]=w[q])})(h,w)};function sm(h,w){function t(){this.constructor=h}qc(h,w),h.prototype=null===w?Object.create(w):(t.prototype=w.prototype,new t)}var uP=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`,uR={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},uN=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);(lV=cu||(cu={}))[lV.WEBGL_LEGACY=0]="WEBGL_LEGACY",lV[lV.WEBGL=1]="WEBGL",lV[lV.WEBGL2=2]="WEBGL2",(lX=cc||(cc={}))[lX.UNKNOWN=0]="UNKNOWN",lX[lX.WEBGL=1]="WEBGL",lX[lX.CANVAS=2]="CANVAS",(lH=ch||(ch={}))[lH.COLOR=16384]="COLOR",lH[lH.DEPTH=256]="DEPTH",lH[lH.STENCIL=1024]="STENCIL",(lz=cp||(cp={}))[lz.NORMAL=0]="NORMAL",lz[lz.ADD=1]="ADD",lz[lz.MULTIPLY=2]="MULTIPLY",lz[lz.SCREEN=3]="SCREEN",lz[lz.OVERLAY=4]="OVERLAY",lz[lz.DARKEN=5]="DARKEN",lz[lz.LIGHTEN=6]="LIGHTEN",lz[lz.COLOR_DODGE=7]="COLOR_DODGE",lz[lz.COLOR_BURN=8]="COLOR_BURN",lz[lz.HARD_LIGHT=9]="HARD_LIGHT",lz[lz.SOFT_LIGHT=10]="SOFT_LIGHT",lz[lz.DIFFERENCE=11]="DIFFERENCE",lz[lz.EXCLUSION=12]="EXCLUSION",lz[lz.HUE=13]="HUE",lz[lz.SATURATION=14]="SATURATION",lz[lz.COLOR=15]="COLOR",lz[lz.LUMINOSITY=16]="LUMINOSITY",lz[lz.NORMAL_NPM=17]="NORMAL_NPM",lz[lz.ADD_NPM=18]="ADD_NPM",lz[lz.SCREEN_NPM=19]="SCREEN_NPM",lz[lz.NONE=20]="NONE",lz[lz.SRC_OVER=0]="SRC_OVER",lz[lz.SRC_IN=21]="SRC_IN",lz[lz.SRC_OUT=22]="SRC_OUT",lz[lz.SRC_ATOP=23]="SRC_ATOP",lz[lz.DST_OVER=24]="DST_OVER",lz[lz.DST_IN=25]="DST_IN",lz[lz.DST_OUT=26]="DST_OUT",lz[lz.DST_ATOP=27]="DST_ATOP",lz[lz.ERASE=26]="ERASE",lz[lz.SUBTRACT=28]="SUBTRACT",lz[lz.XOR=29]="XOR",(lK=cf||(cf={}))[lK.POINTS=0]="POINTS",lK[lK.LINES=1]="LINES",lK[lK.LINE_LOOP=2]="LINE_LOOP",lK[lK.LINE_STRIP=3]="LINE_STRIP",lK[lK.TRIANGLES=4]="TRIANGLES",lK[lK.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",lK[lK.TRIANGLE_FAN=6]="TRIANGLE_FAN",(lY=cd||(cd={}))[lY.RGBA=6408]="RGBA",lY[lY.RGB=6407]="RGB",lY[lY.ALPHA=6406]="ALPHA",lY[lY.LUMINANCE=6409]="LUMINANCE",lY[lY.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",lY[lY.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",lY[lY.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(lW=c_||(c_={}))[lW.TEXTURE_2D=3553]="TEXTURE_2D",lW[lW.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",lW[lW.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",lW[lW.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",lW[lW.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",lW[lW.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",lW[lW.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",lW[lW.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",lW[lW.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(lq=cm||(cm={}))[lq.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",lq[lq.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",lq[lq.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",lq[lq.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",lq[lq.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",lq[lq.FLOAT=5126]="FLOAT",lq[lq.HALF_FLOAT=36193]="HALF_FLOAT",(lZ=cy||(cy={}))[lZ.NEAREST=0]="NEAREST",lZ[lZ.LINEAR=1]="LINEAR",(lJ=cb||(cb={}))[lJ.CLAMP=33071]="CLAMP",lJ[lJ.REPEAT=10497]="REPEAT",lJ[lJ.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(lQ=cx||(cx={}))[lQ.OFF=0]="OFF",lQ[lQ.POW2=1]="POW2",lQ[lQ.ON=2]="ON",(l$=cT||(cT={}))[l$.NPM=0]="NPM",l$[l$.UNPACK=1]="UNPACK",l$[l$.PMA=2]="PMA",l$[l$.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",l$[l$.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",l$[l$.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(l0=cE||(cE={}))[l0.NO=0]="NO",l0[l0.YES=1]="YES",l0[l0.AUTO=2]="AUTO",l0[l0.BLEND=0]="BLEND",l0[l0.CLEAR=1]="CLEAR",l0[l0.BLIT=2]="BLIT",(l1=cA||(cA={}))[l1.AUTO=0]="AUTO",l1[l1.MANUAL=1]="MANUAL",(l2=cO||(cO={})).LOW="lowp",l2.MEDIUM="mediump",l2.HIGH="highp",(l3=cw||(cw={}))[l3.NONE=0]="NONE",l3[l3.SCISSOR=1]="SCISSOR",l3[l3.STENCIL=2]="STENCIL",l3[l3.SPRITE=3]="SPRITE",(l4=cL||(cL={}))[l4.NONE=0]="NONE",l4[l4.LOW=2]="LOW",l4[l4.MEDIUM=4]="MEDIUM",l4[l4.HIGH=8]="HIGH";var uM=function(h){function n(w,q,tr,tn,ti){void 0===q&&(q=8),void 0===tr&&(tr=4),void 0===tn&&(tn=ed.RESOLUTION),void 0===ti&&(ti=5);var to=this,ts=function(h,w){var q,tr=Math.ceil(h/2),tn=uP,ti="";q=w?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var to=0;to<h;to++){var ts=q.replace("%index%",to.toString());ti+=(ts=ts.replace("%sampleIndex%",to-(tr-1)+".0"))+`
`}return(tn=tn.replace("%blur%",ti)).replace("%size%",h.toString())}(ti,w),tu=function(h){for(var w,q=uR[h],tr=q.length,tn=uN,ti="",to=0;to<h;to++){var ts="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",to.toString());w=to,to>=tr&&(w=h-to-1),ti+=(ts=ts.replace("%value%",q[w].toString()))+`
`}return(tn=tn.replace("%blur%",ti)).replace("%size%",h.toString())}(ti);return(to=h.call(this,ts,tu)||this).horizontal=w,to.resolution=tn,to._quality=0,to.quality=tr,to.blur=q,to}return sm(n,h),n.prototype.apply=function(h,w,q,tr){if(q?this.horizontal?this.uniforms.strength=1/q.width*(q.width/w.width):this.uniforms.strength=1/q.height*(q.height/w.height):this.horizontal?this.uniforms.strength=1/h.renderer.width*(h.renderer.width/w.width):this.uniforms.strength=1/h.renderer.height*(h.renderer.height/w.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)h.applyFilter(this,w,q,tr);else{var tn=h.getFilterTexture(),ti=h.renderer,to=w,ts=tn;this.state.blend=!1,h.applyFilter(this,to,ts,cE.CLEAR);for(var tu=1;tu<this.passes-1;tu++){h.bindAndClear(to,cE.BLIT),this.uniforms.uSampler=ts;var tl=ts;ts=to,to=tl,ti.shader.bind(this),ti.geometry.draw(5)}this.state.blend=!0,h.applyFilter(this,ts,q,tr),h.returnFilterTexture(tn)}},Object.defineProperty(n.prototype,"blur",{get:function(){return this.strength},set:function(h){this.padding=1+2*Math.abs(h),this.strength=h},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"quality",{get:function(){return this._quality},set:function(h){this._quality=h,this.passes=h},enumerable:!1,configurable:!0}),n}(sy),uk=function(h){function n(w,q,tr,tn){void 0===w&&(w=8),void 0===q&&(q=4),void 0===tr&&(tr=ed.RESOLUTION),void 0===tn&&(tn=5);var ti=h.call(this)||this;return ti.blurXFilter=new uM(!0,w,q,tr,tn),ti.blurYFilter=new uM(!1,w,q,tr,tn),ti.resolution=tr,ti.quality=q,ti.blur=w,ti.repeatEdgePixels=!1,ti}return sm(n,h),n.prototype.apply=function(h,w,q,tr){var tn=Math.abs(this.blurXFilter.strength),ti=Math.abs(this.blurYFilter.strength);if(tn&&ti){var to=h.getFilterTexture();this.blurXFilter.apply(h,w,to,cE.CLEAR),this.blurYFilter.apply(h,to,q,tr),h.returnFilterTexture(to)}else ti?this.blurYFilter.apply(h,w,q,tr):this.blurXFilter.apply(h,w,q,tr)},n.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},Object.defineProperty(n.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(h){this.blurXFilter.blur=this.blurYFilter.blur=h,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(h){this.blurXFilter.quality=this.blurYFilter.quality=h},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(h){this.blurXFilter.blur=h,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(h){this.blurYFilter.blur=h,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(h){this.blurYFilter.blendMode=h},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(h){this._repeatEdgePixels=h,this.updatePadding()},enumerable:!1,configurable:!0}),n}(sy),Zc=function(h,w){return(Zc=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,w){h.__proto__=w}||function(h,w){for(var q in w)w.hasOwnProperty(q)&&(h[q]=w[q])})(h,w)},uU=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`,uC=function(h){function n(){var w=this,q={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return(w=h.call(this,sH,uU,q)||this).alpha=1,w}return!function(h,w){function t(){this.constructor=h}Zc(h,w),h.prototype=null===w?Object.create(w):(t.prototype=w.prototype,new t)}(n,h),n.prototype._loadMatrix=function(h,w){void 0===w&&(w=!1);var q=h;w&&(this._multiply(q,this.uniforms.m,h),q=this._colorMatrix(q)),this.uniforms.m=q},n.prototype._multiply=function(h,w,q){return h[0]=w[0]*q[0]+w[1]*q[5]+w[2]*q[10]+w[3]*q[15],h[1]=w[0]*q[1]+w[1]*q[6]+w[2]*q[11]+w[3]*q[16],h[2]=w[0]*q[2]+w[1]*q[7]+w[2]*q[12]+w[3]*q[17],h[3]=w[0]*q[3]+w[1]*q[8]+w[2]*q[13]+w[3]*q[18],h[4]=w[0]*q[4]+w[1]*q[9]+w[2]*q[14]+w[3]*q[19]+w[4],h[5]=w[5]*q[0]+w[6]*q[5]+w[7]*q[10]+w[8]*q[15],h[6]=w[5]*q[1]+w[6]*q[6]+w[7]*q[11]+w[8]*q[16],h[7]=w[5]*q[2]+w[6]*q[7]+w[7]*q[12]+w[8]*q[17],h[8]=w[5]*q[3]+w[6]*q[8]+w[7]*q[13]+w[8]*q[18],h[9]=w[5]*q[4]+w[6]*q[9]+w[7]*q[14]+w[8]*q[19]+w[9],h[10]=w[10]*q[0]+w[11]*q[5]+w[12]*q[10]+w[13]*q[15],h[11]=w[10]*q[1]+w[11]*q[6]+w[12]*q[11]+w[13]*q[16],h[12]=w[10]*q[2]+w[11]*q[7]+w[12]*q[12]+w[13]*q[17],h[13]=w[10]*q[3]+w[11]*q[8]+w[12]*q[13]+w[13]*q[18],h[14]=w[10]*q[4]+w[11]*q[9]+w[12]*q[14]+w[13]*q[19]+w[14],h[15]=w[15]*q[0]+w[16]*q[5]+w[17]*q[10]+w[18]*q[15],h[16]=w[15]*q[1]+w[16]*q[6]+w[17]*q[11]+w[18]*q[16],h[17]=w[15]*q[2]+w[16]*q[7]+w[17]*q[12]+w[18]*q[17],h[18]=w[15]*q[3]+w[16]*q[8]+w[17]*q[13]+w[18]*q[18],h[19]=w[15]*q[4]+w[16]*q[9]+w[17]*q[14]+w[18]*q[19]+w[19],h},n.prototype._colorMatrix=function(h){var w=new Float32Array(h);return w[4]/=255,w[9]/=255,w[14]/=255,w[19]/=255,w},n.prototype.brightness=function(h,w){var q=[h,0,0,0,0,0,h,0,0,0,0,0,h,0,0,0,0,0,1,0];this._loadMatrix(q,w)},n.prototype.greyscale=function(h,w){var q=[h,h,h,0,0,h,h,h,0,0,h,h,h,0,0,0,0,0,1,0];this._loadMatrix(q,w)},n.prototype.blackAndWhite=function(h){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],h)},n.prototype.hue=function(h,w){var q=Math.cos(h=(h||0)/180*Math.PI),tr=Math.sin(h),tn=1/3,ti=(0,Math.sqrt)(1/3);this._loadMatrix([q+(1-q)*tn,tn*(1-q)-ti*tr,tn*(1-q)+ti*tr,0,0,tn*(1-q)+ti*tr,q+tn*(1-q),tn*(1-q)-ti*tr,0,0,tn*(1-q)-ti*tr,tn*(1-q)+ti*tr,q+tn*(1-q),0,0,0,0,0,1,0],w)},n.prototype.contrast=function(h,w){var q=(h||0)+1,tr=-.5*(q-1),tn=[q,0,0,0,tr,0,q,0,0,tr,0,0,q,0,tr,0,0,0,1,0];this._loadMatrix(tn,w)},n.prototype.saturate=function(h,w){void 0===h&&(h=0);var q=2*h/3+1,tr=-((q-1)*.5),tn=[q,tr,tr,0,0,tr,q,tr,0,0,tr,tr,q,0,0,0,0,0,1,0];this._loadMatrix(tn,w)},n.prototype.desaturate=function(){this.saturate(-1)},n.prototype.negative=function(h){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],h)},n.prototype.sepia=function(h){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],h)},n.prototype.technicolor=function(h){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],h)},n.prototype.polaroid=function(h){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],h)},n.prototype.toBGR=function(h){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],h)},n.prototype.kodachrome=function(h){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],h)},n.prototype.browni=function(h){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],h)},n.prototype.vintage=function(h){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],h)},n.prototype.colorTone=function(h,w,q,tr,tn){h=h||.2,w=w||.15,q=q||16770432,tr=tr||3375104;var ti=(q>>16&255)/255,to=(q>>8&255)/255,ts=(255&q)/255,tu=(tr>>16&255)/255,tl=(tr>>8&255)/255,tc=(255&tr)/255,tp=[.3,.59,.11,0,0,ti,to,ts,h,0,tu,tl,tc,w,0,ti-tu,to-tl,ts-tc,0,0];this._loadMatrix(tp,tn)},n.prototype.night=function(h,w){var q=[-2*(h=h||.1),-h,0,0,0,-h,0,h,0,0,0,h,2*h,0,0,0,0,0,1,0];this._loadMatrix(q,w)},n.prototype.predator=function(h,w){this._loadMatrix([11.224130630493164*h,-4.794486999511719*h,-2.8746118545532227*h,0*h,.40342438220977783*h,-3.6330697536468506*h,9.193157196044922*h,-2.951810836791992*h,0*h,-1.316135048866272*h,-3.2184197902679443*h,-4.2375030517578125*h,7.476448059082031*h,0*h,.8044459223747253*h,0,0,0,1,0],w)},n.prototype.lsd=function(h){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],h)},n.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperty(n.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(h){this.uniforms.m=h},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(h){this.uniforms.uAlpha=h},enumerable:!1,configurable:!0}),n}(sy);uC.prototype.grayscale=uC.prototype.greyscale;/*!
 * @pixi/filter-displacement - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Qc=function(h,w){return(Qc=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,w){h.__proto__=w}||function(h,w){for(var q in w)w.hasOwnProperty(q)&&(h[q]=w[q])})(h,w)},uD=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,uF=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`,uB=function(h){function n(w,q){var tr=this,tn=new iU;return w.renderable=!1,(tr=h.call(this,uF,uD,{mapSampler:w._texture,filterMatrix:tn,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this).maskSprite=w,tr.maskMatrix=tn,null==q&&(q=20),tr.scale=new iM(q,q),tr}return!function(h,w){function t(){this.constructor=h}Qc(h,w),h.prototype=null===w?Object.create(w):(t.prototype=w.prototype,new t)}(n,h),n.prototype.apply=function(h,w,q,tr){this.uniforms.filterMatrix=h.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var tn=this.maskSprite.worldTransform,ti=Math.sqrt(tn.a*tn.a+tn.b*tn.b),to=Math.sqrt(tn.c*tn.c+tn.d*tn.d);0!==ti&&0!==to&&(this.uniforms.rotation[0]=tn.a/ti,this.uniforms.rotation[1]=tn.b/ti,this.uniforms.rotation[2]=tn.c/to,this.uniforms.rotation[3]=tn.d/to),h.applyFilter(this,w,q,tr)},Object.defineProperty(n.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(h){this.uniforms.mapSampler=h},enumerable:!1,configurable:!0}),n}(sy),th=function(h,w){return(th=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,w){h.__proto__=w}||function(h,w){for(var q in w)w.hasOwnProperty(q)&&(h[q]=w[q])})(h,w)},uj=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputPixel;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`,uG=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputPixel;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,uV=function(h){function n(){return h.call(this,uj,uG)||this}return!function(h,w){function t(){this.constructor=h}th(h,w),h.prototype=null===w?Object.create(w):(t.prototype=w.prototype,new t)}(n,h),n}(sy),eh=function(h,w){return(eh=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,w){h.__proto__=w}||function(h,w){for(var q in w)w.hasOwnProperty(q)&&(h[q]=w[q])})(h,w)},uX=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`,uH=function(h){function n(w,q){void 0===w&&(w=.5),void 0===q&&(q=Math.random());var tr=h.call(this,sH,uX,{uNoise:0,uSeed:0})||this;return tr.noise=w,tr.seed=q,tr}return!function(h,w){function t(){this.constructor=h}eh(h,w),h.prototype=null===w?Object.create(w):(t.prototype=w.prototype,new t)}(n,h),Object.defineProperty(n.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(h){this.uniforms.uNoise=h},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(h){this.uniforms.uSeed=h},enumerable:!1,configurable:!0}),n}(sy),uz=new iU;iK.prototype._cacheAsBitmap=!1,iK.prototype._cacheData=null;var LT=function(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null};Object.defineProperties(iK.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(h){if(this._cacheAsBitmap!==h){var w;this._cacheAsBitmap=h,h?(this._cacheData||(this._cacheData=new LT),(w=this._cacheData).originalRender=this.render,w.originalRenderCanvas=this.renderCanvas,w.originalUpdateTransform=this.updateTransform,w.originalCalculateBounds=this.calculateBounds,w.originalGetLocalBounds=this.getLocalBounds,w.originalDestroy=this.destroy,w.originalContainsPoint=this.containsPoint,w.originalMask=this._mask,w.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((w=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=w.originalRender,this.renderCanvas=w.originalRenderCanvas,this.calculateBounds=w.originalCalculateBounds,this.getLocalBounds=w.originalGetLocalBounds,this.destroy=w.originalDestroy,this.updateTransform=w.originalUpdateTransform,this.containsPoint=w.originalContainsPoint,this._mask=w.originalMask,this.filterArea=w.originalFilterArea)}}}}),iK.prototype._renderCached=function(h){this.visible&&!(this.worldAlpha<=0)&&this.renderable&&(this._initCachedDisplayObject(h),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(h))},iK.prototype._initCachedDisplayObject=function(h){if(!(this._cacheData&&this._cacheData.sprite)){var w=this.alpha;this.alpha=1,h.batch.flush();var q=this.getLocalBounds(null,!0).clone();if(this.filters){var tr=this.filters[0].padding;q.pad(tr)}q.ceil(ed.RESOLUTION);var tn=h.renderTexture.current,ti=h.renderTexture.sourceFrame.clone(),to=h.projection.transform,ts=oI.create({width:q.width,height:q.height}),tu="cacheAsBitmap_"+Xi();this._cacheData.textureCacheId=tu,oa.addToCache(ts.baseTexture,tu),oS.addToCache(ts,tu);var tl=this.transform.localTransform.copyTo(uz).invert().translate(-q.x,-q.y);this.render=this._cacheData.originalRender,h.render(this,ts,!0,tl,!1),h.projection.transform=to,h.renderTexture.bind(tn,ti),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var tc=new a$(ts);tc.transform.worldTransform=this.transform.worldTransform,tc.anchor.x=-(q.x/q.width),tc.anchor.y=-(q.y/q.height),tc.alpha=w,tc._bounds=this._bounds,this._cacheData.sprite=tc,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=tc.containsPoint.bind(tc)}},iK.prototype._renderCachedCanvas=function(h){this.visible&&!(this.worldAlpha<=0)&&this.renderable&&(this._initCachedDisplayObjectCanvas(h),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(h))},iK.prototype._initCachedDisplayObjectCanvas=function(h){if(!(this._cacheData&&this._cacheData.sprite)){var w=this.getLocalBounds(null,!0),q=this.alpha;this.alpha=1;var tr=h.context,tn=h._projTransform;w.ceil(ed.RESOLUTION);var ti=oI.create({width:w.width,height:w.height}),to="cacheAsBitmap_"+Xi();this._cacheData.textureCacheId=to,oa.addToCache(ti.baseTexture,to),oS.addToCache(ti,to),this.transform.localTransform.copyTo(uz),uz.invert(),uz.tx-=w.x,uz.ty-=w.y,this.renderCanvas=this._cacheData.originalRenderCanvas,h.render(this,ti,!0,uz,!1),h.context=tr,h._projTransform=tn,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var ts=new a$(ti);ts.transform.worldTransform=this.transform.worldTransform,ts.anchor.x=-(w.x/w.width),ts.anchor.y=-(w.y/w.height),ts.alpha=q,ts._bounds=this._bounds,this._cacheData.sprite=ts,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=h._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=ts.containsPoint.bind(ts)}},iK.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},iK.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},iK.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,oa.removeFromCache(this._cacheData.textureCacheId),oS.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},iK.prototype._cacheAsBitmapDestroy=function(h){this.cacheAsBitmap=!1,this.destroy(h)},/*!
 * @pixi/mixin-get-child-by-name - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */iK.prototype.name=null,iW.prototype.getChildByName=function(h,w){for(var q=0,tr=this.children.length;q<tr;q++)if(this.children[q].name===h)return this.children[q];if(w){for(var q=0,tr=this.children.length;q<tr;q++)if(this.children[q].getChildByName){var tn=this.children[q].getChildByName(h,!0);if(tn)return tn}}return null},/*!
 * @pixi/mixin-get-global-position - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */iK.prototype.getGlobalPosition=function(h,w){return void 0===h&&(h=new iM),void 0===w&&(w=!1),this.parent?this.parent.toGlobal(this.position,h,w):(h.x=this.position.x,h.y=this.position.y),h};/*!
 * @pixi/mesh-extras - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/mesh-extras is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var rh=function(h,w){return(rh=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,w){h.__proto__=w}||function(h,w){for(var q in w)w.hasOwnProperty(q)&&(h[q]=w[q])})(h,w)};function zo(h,w){function t(){this.constructor=h}rh(h,w),h.prototype=null===w?Object.create(w):(t.prototype=w.prototype,new t)}var uK=function(h){function n(w,q,tr,tn){void 0===w&&(w=100),void 0===q&&(q=100),void 0===tr&&(tr=10),void 0===tn&&(tn=10);var ti=h.call(this)||this;return ti.segWidth=tr,ti.segHeight=tn,ti.width=w,ti.height=q,ti.build(),ti}return zo(n,h),n.prototype.build=function(){for(var h=this.segWidth*this.segHeight,w=[],q=[],tr=[],tn=this.segWidth-1,ti=this.segHeight-1,to=this.width/tn,ts=this.height/ti,tu=0;tu<h;tu++){var tl=tu%this.segWidth,tc=tu/this.segWidth|0;w.push(tl*to,tc*ts),q.push(tl/tn,tc/ti)}for(var tp=tn*ti,tu=0;tu<tp;tu++){var td=tu%tn,tm=tu/tn|0,ty=tm*this.segWidth+td,tv=tm*this.segWidth+td+1,tb=(tm+1)*this.segWidth+td,tx=(tm+1)*this.segWidth+td+1;tr.push(ty,tv,tb,tv,tx,tb)}this.buffers[0].data=new Float32Array(w),this.buffers[1].data=new Float32Array(q),this.indexBuffer.data=new Uint16Array(tr),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},n}(ux),uY=function(h){function n(w,q,tr){void 0===w&&(w=200),void 0===tr&&(tr=0);var tn=h.call(this,new Float32Array(4*q.length),new Float32Array(4*q.length),new Uint16Array((q.length-1)*6))||this;return tn.points=q,tn._width=w,tn.textureScale=tr,tn.build(),tn}return zo(n,h),Object.defineProperty(n.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),n.prototype.build=function(){var h=this.points;if(h){var w=this.getBuffer("aVertexPosition"),q=this.getBuffer("aTextureCoord"),tr=this.getIndex();if(!(h.length<1)){w.data.length/4!==h.length&&(w.data=new Float32Array(4*h.length),q.data=new Float32Array(4*h.length),tr.data=new Uint16Array((h.length-1)*6));var tn=q.data,ti=tr.data;tn[0]=0,tn[1]=0,tn[2]=0,tn[3]=1;for(var to=0,ts=h[0],tu=this._width*this.textureScale,tl=h.length,tc=0;tc<tl;tc++){var tp=4*tc;if(this.textureScale>0){var td=ts.x-h[tc].x,tm=ts.y-h[tc].y,ty=Math.sqrt(td*td+tm*tm);ts=h[tc],to+=ty/tu}else to=tc/(tl-1);tn[tp]=to,tn[tp+1]=0,tn[tp+2]=to,tn[tp+3]=1}for(var tv=0,tc=0;tc<tl-1;tc++){var tp=2*tc;ti[tv++]=tp,ti[tv++]=tp+1,ti[tv++]=tp+2,ti[tv++]=tp+2,ti[tv++]=tp+1,ti[tv++]=tp+3}q.update(),tr.update(),this.updateVertices()}}},n.prototype.updateVertices=function(){var h=this.points;if(!(h.length<1)){for(var w,q=h[0],tr=0,tn=0,ti=this.buffers[0].data,to=h.length,ts=0;ts<to;ts++){var tu=h[ts],tl=4*ts;tn=-((w=ts<h.length-1?h[ts+1]:tu).x-q.x);var tc=Math.sqrt((tr=w.y-q.y)*tr+tn*tn),tp=this.textureScale>0?this.textureScale*this._width/2:this._width/2;tr/=tc,tn/=tc,tr*=tp,tn*=tp,ti[tl]=tu.x+tr,ti[tl+1]=tu.y+tn,ti[tl+2]=tu.x-tr,ti[tl+3]=tu.y-tn,q=tu}this.buffers[0].update()}},n.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},n}(ux),uW=function(h){function n(w,q,tr){void 0===tr&&(tr=0);var tn=this,ti=new uY(w.height,q,tr),to=new ub(w);return tr>0&&(w.baseTexture.wrapMode=ic.REPEAT),(tn=h.call(this,ti,to)||this).autoUpdate=!0,tn}return zo(n,h),n.prototype._render=function(w){var q=this.geometry;(this.autoUpdate||q._width!==this.shader.texture.height)&&(q._width=this.shader.texture.height,q.update()),h.prototype._render.call(this,w)},n}(um),uq=function(h){function n(w,q,tr){var tn=this,ti=new uK(w.width,w.height,q,tr),to=new ub(oS.WHITE);return(tn=h.call(this,ti,to)||this).texture=w,tn}return zo(n,h),n.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var h=this.geometry;h.width=this.shader.texture.width,h.height=this.shader.texture.height,h.build()},Object.defineProperty(n.prototype,"texture",{get:function(){return this.shader.texture},set:function(h){this.shader.texture!==h&&(this.shader.texture=h,this._textureID=-1,h.baseTexture.valid?this.textureUpdated():h.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),n.prototype._render=function(w){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),h.prototype._render.call(this,w)},n}(um),uZ=function(h){function n(w,q,tr,tn,ti){void 0===w&&(w=oS.EMPTY);var to=this,ts=new ux(q,tr,tn);ts.getBuffer("aVertexPosition").static=!1;var tu=new ub(w);return(to=h.call(this,ts,tu,null,ti)||this).autoUpdate=!0,to}return zo(n,h),Object.defineProperty(n.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(h){this.geometry.getBuffer("aVertexPosition").data=h},enumerable:!1,configurable:!0}),n.prototype._render=function(w){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),h.prototype._render.call(this,w)},n}(um),uJ=function(h){function n(w,q,tr,tn,ti){void 0===q&&(q=10),void 0===tr&&(tr=10),void 0===tn&&(tn=10),void 0===ti&&(ti=10);var to=h.call(this,oS.WHITE,4,4)||this;return to._origWidth=w.orig.width,to._origHeight=w.orig.height,to._width=to._origWidth,to._height=to._origHeight,to._leftWidth=q,to._rightWidth=tn,to._topHeight=tr,to._bottomHeight=ti,to.texture=w,to}return zo(n,h),n.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(n.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(h){this.geometry.getBuffer("aVertexPosition").data=h},enumerable:!1,configurable:!0}),n.prototype.updateHorizontalVertices=function(){var h=this.vertices,w=this._getMinScale();h[9]=h[11]=h[13]=h[15]=this._topHeight*w,h[17]=h[19]=h[21]=h[23]=this._height-this._bottomHeight*w,h[25]=h[27]=h[29]=h[31]=this._height},n.prototype.updateVerticalVertices=function(){var h=this.vertices,w=this._getMinScale();h[2]=h[10]=h[18]=h[26]=this._leftWidth*w,h[4]=h[12]=h[20]=h[28]=this._width-this._rightWidth*w,h[6]=h[14]=h[22]=h[30]=this._width},n.prototype._getMinScale=function(){var h=this._leftWidth+this._rightWidth,w=this._width>h?1:this._width/h,q=this._topHeight+this._bottomHeight;return Math.min(w,this._height>q?1:this._height/q)},Object.defineProperty(n.prototype,"width",{get:function(){return this._width},set:function(h){this._width=h,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this._height},set:function(h){this._height=h,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(h){this._leftWidth=h,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(h){this._rightWidth=h,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"topHeight",{get:function(){return this._topHeight},set:function(h){this._topHeight=h,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(h){this._bottomHeight=h,this._refresh()},enumerable:!1,configurable:!0}),n.prototype._refresh=function(){var h=this.texture,w=this.geometry.buffers[1].data;this._origWidth=h.orig.width,this._origHeight=h.orig.height;var q=1/this._origWidth,tr=1/this._origHeight;w[0]=w[8]=w[16]=w[24]=0,w[1]=w[3]=w[5]=w[7]=0,w[6]=w[14]=w[22]=w[30]=1,w[25]=w[27]=w[29]=w[31]=1,w[2]=w[10]=w[18]=w[26]=q*this._leftWidth,w[4]=w[12]=w[20]=w[28]=1-q*this._rightWidth,w[9]=w[11]=w[13]=w[15]=tr*this._topHeight,w[17]=w[19]=w[21]=w[23]=1-tr*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},n}(uq),nh=function(h,w){return(nh=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,w){h.__proto__=w}||function(h,w){for(var q in w)w.hasOwnProperty(q)&&(h[q]=w[q])})(h,w)},uQ=function(h){function n(w,q){void 0===q&&(q=!0);var tr=h.call(this,w[0]instanceof oS?w[0]:w[0].texture)||this;return tr._textures=null,tr._durations=null,tr._autoUpdate=q,tr._isConnectedToTicker=!1,tr.animationSpeed=1,tr.loop=!0,tr.updateAnchor=!1,tr.onComplete=null,tr.onFrameChange=null,tr.onLoop=null,tr._currentTime=0,tr._playing=!1,tr._previousFrame=null,tr.textures=w,tr}return!function(h,w){function t(){this.constructor=h}nh(h,w),h.prototype=null===w?Object.create(w):(t.prototype=w.prototype,new t)}(n,h),n.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(iQ.shared.remove(this.update,this),this._isConnectedToTicker=!1))},n.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(iQ.shared.add(this.update,this,aI.HIGH),this._isConnectedToTicker=!0))},n.prototype.gotoAndStop=function(h){this.stop();var w=this.currentFrame;this._currentTime=h,w!==this.currentFrame&&this.updateTexture()},n.prototype.gotoAndPlay=function(h){var w=this.currentFrame;this._currentTime=h,w!==this.currentFrame&&this.updateTexture(),this.play()},n.prototype.update=function(h){var w=this.animationSpeed*h,q=this.currentFrame;if(null!==this._durations){var tr=this._currentTime%1*this._durations[this.currentFrame];for(tr+=w/60*1e3;tr<0;)this._currentTime--,tr+=this._durations[this.currentFrame];var tn=Math.sign(this.animationSpeed*h);for(this._currentTime=Math.floor(this._currentTime);tr>=this._durations[this.currentFrame];)tr-=this._durations[this.currentFrame]*tn,this._currentTime+=tn;this._currentTime+=tr/this._durations[this.currentFrame]}else this._currentTime+=w;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):q!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<q?this.onLoop():this.animationSpeed<0&&this.currentFrame>q&&this.onLoop()),this.updateTexture())},n.prototype.updateTexture=function(){var h=this.currentFrame;this._previousFrame!==h&&(this._previousFrame=h,this._texture=this._textures[h],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},n.prototype.destroy=function(w){this.stop(),h.prototype.destroy.call(this,w),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},n.fromFrames=function(h){for(var w=[],q=0;q<h.length;++q)w.push(oS.from(h[q]));return new n(w)},n.fromImages=function(h){for(var w=[],q=0;q<h.length;++q)w.push(oS.from(h[q]));return new n(w)},Object.defineProperty(n.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"textures",{get:function(){return this._textures},set:function(h){if(h[0]instanceof oS)this._textures=h,this._durations=null;else{this._textures=[],this._durations=[];for(var w=0;w<h.length;w++)this._textures.push(h[w].texture),this._durations.push(h[w].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"currentFrame",{get:function(){var h=Math.floor(this._currentTime)%this._textures.length;return h<0&&(h+=this._textures.length),h},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(h){h!==this._autoUpdate&&(this._autoUpdate=h,!this._autoUpdate&&this._isConnectedToTicker?(iQ.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(iQ.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),n}(a$),ih=function(h,w){return(ih=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,w){h.__proto__=w}||function(h,w){for(var q in w)w.hasOwnProperty(q)&&(h[q]=w[q])})(h,w)};function fd(h,w){function t(){this.constructor=h}ih(h,w),h.prototype=null===w?Object.create(w):(t.prototype=w.prototype,new t)}var u$="5.0.0";sV.registerPlugin("accessibility",iZ),sV.registerPlugin("extract",s4),sV.registerPlugin("interaction",i8),sV.registerPlugin("particle",ad),sV.registerPlugin("prepare",a9),sV.registerPlugin("batch",s$),sV.registerPlugin("tilingSprite",uf),as.registerPlugin(uL),as.registerPlugin(ui),s0.registerPlugin(i$),s0.registerPlugin(aa);let u0=Object.freeze(Object.defineProperty({__proto__:null,get ALPHA_MODES(){return id},AbstractBatchRenderer:sY,AbstractRenderer:sG,AccessibilityManager:iZ,AnimatedSprite:uQ,AppLoaderPlugin:aa,Application:s0,Attribute:oR,get BLEND_MODES(){return n7},get BUFFER_BITS(){return n8},BasePrepare:a7,BaseRenderTexture:oO,BaseTexture:oa,BatchDrawCall:hu,BatchGeometry:sq,BatchPluginFactory:sQ,BatchRenderer:s$,BatchShaderGenerator:sW,BatchTextureArray:sz,BitmapFont:uE,BitmapFontData:Ma,BitmapFontLoader:uL,BitmapText:uw,Bounds:iz,Buffer:oM,get CLEAR_MODES(){return i_},Circle:iI,Container:iW,CountLimiter:a8,DEG_TO_RAD:iL,get DRAW_MODES(){return n9},DisplayObject:iK,get ENV(){return n5},Ellipse:iP,Extract:s4,get FORMATS(){return io},FillStyle:am,Filter:sy,FilterState:oX,Framebuffer:oA,get GC_MODES(){return ig},GLFramebuffer:ag,GLProgram:sM,GLTexture:Js,GRAPHICS_CURVES:a_,Geometry:oF,Graphics:aZ,GraphicsData:aX,GraphicsGeometry:aK,IGLUniformData:function(){},InteractionData:i1,InteractionEvent:i2,InteractionManager:i8,InteractionTrackingData:i3,get LINE_CAP(){return aM},get LINE_JOIN(){return aN},LineStyle:aY,Loader:as,LoaderResource:s9,get MASK_TYPES(){return iy},get MIPMAP_MODES(){return ip},get MSAA_QUALITY(){return iv},MaskData:o$,Matrix:iU,Mesh:um,MeshBatchUvs:ud,MeshGeometry:ux,MeshMaterial:ub,NineSlicePlane:uJ,ObjectRenderer:oz,ObservablePoint:ik,PI_2:iA,get PRECISION(){return im},ParticleContainer:au,ParticleRenderer:ad,PlaneGeometry:uK,Point:iM,Polygon:iR,Prepare:a9,Program:sl,Quad:oB,QuadUv:oj,RAD_TO_DEG:iw,get RENDERER_TYPE(){return n6},Rectangle:iS,RenderTexture:oI,RenderTexturePool:oP,Renderer:sV,RopeGeometry:uY,RoundedRectangle:iN,Runner:i7,get SCALE_MODES(){return il},get SHAPES(){return iT},Shader:sp,SimpleMesh:uZ,SimplePlane:uq,SimpleRope:uW,Sprite:a$,SpriteMaskFilter:sE,Spritesheet:un,SpritesheetLoader:ui,State:sd,System:ox,get TARGETS(){return is},get TEXT_GRADIENT(){return ca},get TYPES(){return iu},TemporaryDisplayObject:iY,Text:a6,TextMetrics:a3,TextStyle:a2,Texture:oS,TextureLoader:ao,TextureMatrix:sT,TextureUvs:ow,Ticker:iQ,TickerPlugin:i$,TilingSprite:ua,TilingSpriteRenderer:uf,TimeLimiter:ur,Transform:iH,get UPDATE_PRIORITY(){return aI},UniformGroup:oV,VERSION:"5.3.3",ViewableBuffer:sK,get WRAP_MODES(){return ic},accessibleTarget:iq,autoDetectRenderer:Sg,checkMaxIfStatementsInShader:dg,defaultFilterVertex:sH,defaultVertex:sX,filters:{AlphaFilter:uI,BlurFilter:uk,BlurFilterPass:uM,ColorMatrixFilter:uC,DisplacementFilter:uB,FXAAFilter:uV,NoiseFilter:uH},graphicsUtils:{buildPoly:ay,buildCircle:ab,buildRectangle:ax,buildRoundedRectangle:aT,FILL_COMMANDS:aj,BATCH_POOL:aG,DRAW_CALL_POOL:aV,buildLine:Fc,Star:aU,ArcUtils:aC,BezierUtils:aD,QuadraticUtils:aF,BatchPart:aB},groupD8:iX,interactiveTarget:i5,isMobile:ep,resources:{Resource:on,BaseImageResource:oc,INSTALLED:i9,autoDetectResource:lf,AbstractMultiResource:ou,ArrayResource:ol,BufferResource:oi,CanvasResource:op,CubeResource:od,ImageResource:o_,SVGResource:og,VideoResource:oy,ImageBitmapResource:ob},settings:ed,systems:{FilterSystem:oH,BatchSystem:oK,ContextSystem:oW,FramebufferSystem:oZ,GeometrySystem:oQ,MaskSystem:sA,ScissorSystem:sw,StencilSystem:sL,ProjectionSystem:sS,RenderTextureSystem:sN,ShaderSystem:sC,StateSystem:sD,TextureGCSystem:sF,TextureSystem:sB},uniformParsers:o6,useDeprecated:function(){var h=this;Object.defineProperties(h,{SVG_SIZE:{get:function(){return we(u$,"PIXI.utils.SVG_SIZE property has moved to PIXI.resources.SVGResource.SVG_SIZE"),h.SVGResource.SVG_SIZE}},TransformStatic:{get:function(){return we(u$,"PIXI.TransformStatic class has been removed, use PIXI.Transform"),h.Transform}},TransformBase:{get:function(){return we(u$,"PIXI.TransformBase class has been removed, use PIXI.Transform"),h.Transform}},TRANSFORM_MODE:{get:function(){return we(u$,"PIXI.TRANSFORM_MODE property has been removed"),{STATIC:0,DYNAMIC:1}}},WebGLRenderer:{get:function(){return we(u$,"PIXI.WebGLRenderer class has moved to PIXI.Renderer"),h.Renderer}},CanvasRenderTarget:{get:function(){return we(u$,"PIXI.CanvasRenderTarget class has moved to PIXI.utils.CanvasRenderTarget"),h.utils.CanvasRenderTarget}},loader:{get:function(){return we(u$,"PIXI.loader instance has moved to PIXI.Loader.shared"),h.Loader.shared}},FilterManager:{get:function(){return we(u$,"PIXI.FilterManager class has moved to PIXI.systems.FilterSystem"),h.systems.FilterSystem}},CanvasTinter:{get:function(){return we("5.2.0","PIXI.CanvasTinter namespace has moved to PIXI.canvasUtils"),h.canvasUtils}},GroupD8:{get:function(){return we("5.2.0","PIXI.GroupD8 namespace has moved to PIXI.groupD8"),h.groupD8}}}),h.accessibility={},Object.defineProperties(h.accessibility,{AccessibilityManager:{get:function(){return we("5.3.0","PIXI.accessibility.AccessibilityManager moved to PIXI.AccessibilityManager"),h.AccessibilityManager}}}),h.interaction={},Object.defineProperties(h.interaction,{InteractionManager:{get:function(){return we("5.3.0","PIXI.interaction.InteractionManager moved to PIXI.InteractionManager"),h.InteractionManager}},InteractionData:{get:function(){return we("5.3.0","PIXI.interaction.InteractionData moved to PIXI.InteractionData"),h.InteractionData}},InteractionEvent:{get:function(){return we("5.3.0","PIXI.interaction.InteractionEvent moved to PIXI.InteractionEvent"),h.InteractionEvent}}}),h.prepare={},Object.defineProperties(h.prepare,{BasePrepare:{get:function(){return we("5.2.1","PIXI.prepare.BasePrepare moved to PIXI.BasePrepare"),h.BasePrepare}},Prepare:{get:function(){return we("5.2.1","PIXI.prepare.Prepare moved to PIXI.Prepare"),h.Prepare}},CanvasPrepare:{get:function(){return we("5.2.1","PIXI.prepare.CanvasPrepare moved to PIXI.CanvasPrepare"),h.CanvasPrepare}}}),h.extract={},Object.defineProperties(h.extract,{Extract:{get:function(){return we("5.2.1","PIXI.extract.Extract moved to PIXI.Extract"),h.Extract}},CanvasExtract:{get:function(){return we("5.2.1","PIXI.extract.CanvasExtract moved to PIXI.CanvasExtract"),h.CanvasExtract}}}),h.extras={},Object.defineProperties(h.extras,{TilingSprite:{get:function(){return we(u$,"PIXI.extras.TilingSprite class has moved to PIXI.TilingSprite"),h.TilingSprite}},TilingSpriteRenderer:{get:function(){return we(u$,"PIXI.extras.TilingSpriteRenderer class has moved to PIXI.TilingSpriteRenderer"),h.TilingSpriteRenderer}},AnimatedSprite:{get:function(){return we(u$,"PIXI.extras.AnimatedSprite class has moved to PIXI.AnimatedSprite"),h.AnimatedSprite}},BitmapText:{get:function(){return we(u$,"PIXI.extras.BitmapText class has moved to PIXI.BitmapText"),h.BitmapText}}}),h.TilingSprite.fromFrame=function(w,q,tr){return we("5.3.0","TilingSprite.fromFrame is deprecated, use TilingSprite.from"),h.TilingSprite.from(w,{width:q,height:tr})},h.TilingSprite.fromImage=function(w,q,tr,tn){return void 0===tn&&(tn={}),we("5.3.0","TilingSprite.fromImage is deprecated, use TilingSprite.from"),tn&&"object"!=typeof tn&&(tn={scaleMode:arguments[4],resourceOptions:{crossorigin:arguments[3]}}),tn.width=q,tn.height=tr,h.TilingSprite.from(w,tn)},Object.defineProperties(h.utils,{getSvgSize:{get:function(){return we(u$,"PIXI.utils.getSvgSize function has moved to PIXI.resources.SVGResource.getSize"),h.resources.SVGResource.getSize}}}),h.mesh={},Object.defineProperties(h.mesh,{Mesh:{get:function(){return we(u$,"PIXI.mesh.Mesh class has moved to PIXI.SimpleMesh"),h.SimpleMesh}},NineSlicePlane:{get:function(){return we(u$,"PIXI.mesh.NineSlicePlane class has moved to PIXI.NineSlicePlane"),h.NineSlicePlane}},Plane:{get:function(){return we(u$,"PIXI.mesh.Plane class has moved to PIXI.SimplePlane"),h.SimplePlane}},Rope:{get:function(){return we(u$,"PIXI.mesh.Rope class has moved to PIXI.SimpleRope"),h.SimpleRope}},RawMesh:{get:function(){return we(u$,"PIXI.mesh.RawMesh class has moved to PIXI.Mesh"),h.Mesh}},CanvasMeshRenderer:{get:function(){return we(u$,"PIXI.mesh.CanvasMeshRenderer class has moved to PIXI.CanvasMeshRenderer"),h.CanvasMeshRenderer}},MeshRenderer:{get:function(){return we(u$,"PIXI.mesh.MeshRenderer class has moved to PIXI.MeshRenderer"),h.MeshRenderer}}}),h.particles={},Object.defineProperties(h.particles,{ParticleContainer:{get:function(){return we(u$,"PIXI.particles.ParticleContainer class has moved to PIXI.ParticleContainer"),h.ParticleContainer}},ParticleRenderer:{get:function(){return we(u$,"PIXI.particles.ParticleRenderer class has moved to PIXI.ParticleRenderer"),h.ParticleRenderer}}}),h.ticker={},Object.defineProperties(h.ticker,{Ticker:{get:function(){return we(u$,"PIXI.ticker.Ticker class has moved to PIXI.Ticker"),h.Ticker}},shared:{get:function(){return we(u$,"PIXI.ticker.shared instance has moved to PIXI.Ticker.shared"),h.Ticker.shared}}}),h.loaders={},Object.defineProperties(h.loaders,{Loader:{get:function(){return we(u$,"PIXI.loaders.Loader class has moved to PIXI.Loader"),h.Loader}},Resource:{get:function(){return we(u$,"PIXI.loaders.Resource class has moved to PIXI.LoaderResource"),h.LoaderResource}},bitmapFontParser:{get:function(){return we(u$,"PIXI.loaders.bitmapFontParser function has moved to PIXI.BitmapFontLoader.use"),h.BitmapFontLoader.use}},parseBitmapFontData:{get:function(){we(u$,"PIXI.loaders.parseBitmapFontData function has removed")}},spritesheetParser:{get:function(){return we(u$,"PIXI.loaders.spritesheetParser function has moved to PIXI.SpritesheetLoader.use"),h.SpritesheetLoader.use}},getResourcePath:{get:function(){return we(u$,"PIXI.loaders.getResourcePath property has moved to PIXI.SpritesheetLoader.getResourcePath"),h.SpritesheetLoader.getResourcePath}}}),h.Loader.addPixiMiddleware=function(w){return we(u$,"PIXI.loaders.Loader.addPixiMiddleware function is deprecated, use PIXI.loaders.Loader.registerPlugin"),h.loaders.Loader.registerPlugin({use:w()})};var n=function(h){return"on"+h.charAt(0).toUpperCase()+h.slice(1)};Object.assign(h.Loader.prototype,{on:function(h){we(u$,"PIXI.Loader#on is completely deprecated, use PIXI.Loader#"+n(h)+".add")},once:function(h){we(u$,"PIXI.Loader#once is completely deprecated, use PIXI.Loader#"+n(h)+".once")},off:function(h){we(u$,"PIXI.Loader#off is completely deprecated, use PIXI.Loader#"+n(h)+".detach")}}),Object.defineProperty(h.extract,"WebGLExtract",{get:function(){return we(u$,"PIXI.extract.WebGLExtract method has moved to PIXI.Extract"),h.Extract}}),Object.defineProperty(h.prepare,"WebGLPrepare",{get:function(){return we(u$,"PIXI.prepare.WebGLPrepare class has moved to PIXI.Prepare"),h.Prepare}}),h.Container.prototype._renderWebGL=function(h){we(u$,"PIXI.Container._renderWebGL method has moved to PIXI.Container._render"),this._render(h)},h.Container.prototype.renderWebGL=function(h){we(u$,"PIXI.Container.renderWebGL method has moved to PIXI.Container.render"),this.render(h)},h.DisplayObject.prototype.renderWebGL=function(h){we(u$,"PIXI.DisplayObject.renderWebGL method has moved to PIXI.DisplayObject.render"),this.render(h)},h.Container.prototype.renderAdvancedWebGL=function(h){we(u$,"PIXI.Container.renderAdvancedWebGL method has moved to PIXI.Container.renderAdvanced"),this.renderAdvanced(h)},Object.defineProperties(h.settings,{TRANSFORM_MODE:{get:function(){return we(u$,"PIXI.settings.TRANSFORM_MODE property has been removed"),0},set:function(){we(u$,"PIXI.settings.TRANSFORM_MODE property has been removed")}}});var w=h.BaseTexture;w.prototype.loadSource=function(w){we(u$,"PIXI.BaseTexture.loadSource method has been deprecated");var q=h.resources.autoDetectResource(w);q.internal=!0,this.setResource(q),this.update()};var q=!1;Object.defineProperties(w.prototype,{hasLoaded:{get:function(){return we(u$,"PIXI.BaseTexture.hasLoaded property has been removed, use PIXI.BaseTexture.valid"),this.valid}},imageUrl:{get:function(){var h;return we(u$,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"),null===(h=this.resource)||void 0===h?void 0:h.url},set:function(h){we(u$,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"),this.resource&&(this.resource.url=h)}},source:{get:function(){return we(u$,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source`"),this.resource.source},set:function(h){we(u$,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source` if you want to set HTMLCanvasElement. Otherwise, create new BaseTexture."),this.resource&&(this.resource.source=h)}},premultiplyAlpha:{get:function(){return we("5.2.0","PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),0!==this.alphaMode},set:function(h){we("5.2.0","PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode=Number(h)}},_id:{get:function(){return q||(we("5.2.0","PIXI.BaseTexture._id batch local field has been changed to `_batchLocation`"),q=!0),this._batchLocation},set:function(h){this._batchLocation=h}}}),w.fromImage=function(h,q,tr,tn){return we(u$,"PIXI.BaseTexture.fromImage method has been replaced with PIXI.BaseTexture.from"),w.from(h,{scaleMode:tr,resourceOptions:{scale:tn,crossorigin:q}})},w.fromCanvas=function(h,q){return we(u$,"PIXI.BaseTexture.fromCanvas method has been replaced with PIXI.BaseTexture.from"),w.from(h,{scaleMode:q})},w.fromSVG=function(h,q,tr,tn){return we(u$,"PIXI.BaseTexture.fromSVG method has been replaced with PIXI.BaseTexture.from"),w.from(h,{scaleMode:tr,resourceOptions:{scale:tn,crossorigin:q}})},Object.defineProperties(h.resources.ImageResource.prototype,{premultiplyAlpha:{get:function(){return we("5.2.0","PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),0!==this.alphaMode},set:function(h){we("5.2.0","PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode=Number(h)}}}),h.Point.prototype.copy=function(h){return we(u$,"PIXI.Point.copy method has been replaced with PIXI.Point.copyFrom"),this.copyFrom(h)},h.ObservablePoint.prototype.copy=function(h){return we(u$,"PIXI.ObservablePoint.copy method has been replaced with PIXI.ObservablePoint.copyFrom"),this.copyFrom(h)},h.Rectangle.prototype.copy=function(h){return we(u$,"PIXI.Rectangle.copy method has been replaced with PIXI.Rectangle.copyFrom"),this.copyFrom(h)},h.Matrix.prototype.copy=function(h){return we(u$,"PIXI.Matrix.copy method has been replaced with PIXI.Matrix.copyTo"),this.copyTo(h)},h.systems.StateSystem.prototype.setState=function(h){return we("v5.1.0","StateSystem.setState has been renamed to StateSystem.set"),this.set(h)},Object.assign(h.systems.FilterSystem.prototype,{getRenderTarget:function(h,w){return we(u$,"PIXI.FilterManager.getRenderTarget method has been replaced with PIXI.systems.FilterSystem#getFilterTexture"),this.getFilterTexture(null,w)},returnRenderTarget:function(h){we(u$,"PIXI.FilterManager.returnRenderTarget method has been replaced with PIXI.systems.FilterSystem.returnFilterTexture"),this.returnFilterTexture(h)},calculateScreenSpaceMatrix:function(h){we(u$,"PIXI.systems.FilterSystem.calculateScreenSpaceMatrix method is removed, use `(vTextureCoord * inputSize.xy) + outputFrame.xy` instead");var w=h.identity(),q=this.activeState,tr=q.sourceFrame,tn=q.destinationFrame;return w.translate(tr.x/tn.width,tr.y/tn.height),w.scale(tn.width,tn.height),w},calculateNormalizedScreenSpaceMatrix:function(h){we(u$,"PIXI.systems.FilterManager.calculateNormalizedScreenSpaceMatrix method is removed, use `((vTextureCoord * inputSize.xy) + outputFrame.xy) / outputFrame.zw` instead.");var w=this.activeState,q=w.sourceFrame,tr=w.destinationFrame,tn=h.identity();tn.translate(q.x/tr.width,q.y/tr.height);var ti=tr.width/q.width,to=tr.height/q.height;return tn.scale(ti,to),tn}}),Object.defineProperties(h.RenderTexture.prototype,{sourceFrame:{get:function(){return we(u$,"PIXI.RenderTexture.sourceFrame property has been removed"),this.filterFrame}},size:{get:function(){return we(u$,"PIXI.RenderTexture.size property has been removed"),this._frame}}});var tr=function(h){function d(w,q,tr,tn){return we(u$,"PIXI.filters.BlurXFilter class is deprecated, use PIXI.filters.BlurFilterPass"),h.call(this,!0,w,q,tr,tn)||this}return fd(d,h),d}(h.filters.BlurFilterPass),tn=function(h){function d(w,q,tr,tn){return we(u$,"PIXI.filters.BlurYFilter class is deprecated, use PIXI.filters.BlurFilterPass"),h.call(this,!1,w,q,tr,tn)||this}return fd(d,h),d}(h.filters.BlurFilterPass);Object.assign(h.filters,{BlurXFilter:tr,BlurYFilter:tn});var ti=h.Sprite,to=h.Texture,ts=h.Graphics;function l(h,w,q,tr){return we(u$,"PIXI.Sprite."+h+" method is deprecated, use PIXI.Sprite.from"),ti.from(w,{resourceOptions:{scale:tr,crossorigin:q}})}function f(h,w,q,tr){return we(u$,"PIXI.Texture."+h+" method is deprecated, use PIXI.Texture.from"),to.from(w,{resourceOptions:{scale:tr,crossorigin:q}})}ts.prototype.generateCanvasTexture||(ts.prototype.generateCanvasTexture=function(){we(u$,'PIXI.Graphics.generateCanvasTexture method is only available in "pixi.js-legacy"')}),Object.defineProperty(ts.prototype,"graphicsData",{get:function(){return we(u$,"PIXI.Graphics.graphicsData property is deprecated, use PIXI.Graphics.geometry.graphicsData"),this.geometry.graphicsData}}),ti.fromImage=l.bind(null,"fromImage"),ti.fromSVG=l.bind(null,"fromSVG"),ti.fromCanvas=l.bind(null,"fromCanvas"),ti.fromVideo=l.bind(null,"fromVideo"),ti.fromFrame=l.bind(null,"fromFrame"),to.fromImage=f.bind(null,"fromImage"),to.fromSVG=f.bind(null,"fromSVG"),to.fromCanvas=f.bind(null,"fromCanvas"),to.fromVideo=f.bind(null,"fromVideo"),to.fromFrame=f.bind(null,"fromFrame"),Object.defineProperty(h.AbstractRenderer.prototype,"autoResize",{get:function(){return we(u$,"PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"),this.autoDensity},set:function(h){we(u$,"PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"),this.autoDensity=h}}),Object.defineProperty(h.Renderer.prototype,"textureManager",{get:function(){return we(u$,"PIXI.Renderer.textureManager property is deprecated, use PIXI.Renderer.texture"),this.texture}}),h.utils.mixins={mixin:function(){we(u$,"PIXI.utils.mixins.mixin function is no longer available")},delayMixin:function(){we(u$,"PIXI.utils.mixins.delayMixin function is no longer available")},performMixins:function(){we(u$,"PIXI.utils.mixins.performMixins function is no longer available")}},Object.defineProperty(h.BitmapText.prototype,"font",{get:function(){return we("5.3.0","PIXI.BitmapText.font property is deprecated, use fontName, fontSize, tint or align properties"),{name:this._fontName,size:this._fontSize,tint:this._tint,align:this._align}},set:function(w){if(we("5.3.0","PIXI.BitmapText.font property is deprecated, use fontName, fontSize, tint or align properties"),w){var q={font:w};this._upgradeStyle(q),q.fontSize=q.fontSize||h.BitmapFont.available[q.fontName].size,this._fontName=q.fontName,this._fontSize=q.fontSize,this.dirty=!0}}})},utils:nG},Symbol.toStringTag,{value:"Module"})),u2=["init","load","saveState","loadState","getStateForAgent","tick"];let BT=class BT{constructor(h,w){this.buffer=oI.create({width:h,height:w}),this.sprite=new a$(this.buffer),this.sprite.pivot.set(0,0),this.sprite.position.set(0,0)}};let GT=class GT{constructor(h){this._ticker=h=>this._tick(h),this._isPlaying=!1,this._displayedTickError=!1,this.autoClearBackBuffer=!0,this.boot=h=>new Promise(async w=>{var q,tr;this._bootOptions=h,this._vm=h.vm;let tn=128,ti=128,to=this.header.aspectRatio;if(void 0!==to){let[h,w]=to.split("/").map(h=>parseInt(h));console.log(`desired ratio ${h}/${w} = ${h/w}`),h>=w?tn=Math.round(ti*h/w):ti=Math.round(tn*w/h)}return this.header.width=tn,this.header.height=ti,this.header.scale=.5,console.log(`game size ${tn}x${ti}`),this.backBuffer.resize(tn,ti),this._clearSprite.width=tn,this._clearSprite.height=ti,this._game=await (q=this,tr=this._vm.gameServer,new Promise(async h=>{let w=await function(h,w){let q=h.options.main??h.header.main;if(void 0===q)throw"header is missing main attribute with the path to your main script";return"function"==typeof q?q({vm:h,stage:h.stage,PIXI:h.PIXI}):w.get(q).then(w=>{console.log("load main from script");let q={};return Function("vm","stage","PIXI","exports","module",`${w}
; ${u2.map(h=>`if (typeof ${h} !== "undefined") exports.${h} = ${h}`).join(";")}`)(h,h.stage,h.PIXI,q,{exports:{boot:void 0}}),q})}(q,tr);return console.log("loaded game with hooks",w),void 0!==w.init&&w.init(q),void 0!==w.load&&await w.load(),h(w)})),this._vm.root.appendChild(this._app.view),this.resize(),w(this)}),this.speed=1,this.options=h??{},ed.SCALE_MODE=il.NEAREST,this._app=new s0({backgroundColor:0,resolution:1,autoDensity:!0,width:128,height:128,clearBeforeRender:!1,antialias:!1}),this._backBuffer=new BT(128,128),this._backStage=new iW,this._clearSprite=new a$(oS.WHITE),this._clearSprite.width=128,this._clearSprite.height=128,this._clearSprite.tint=0,"development"===this.options.mode&&(console.log("hook PixiMoroxel8AI API"),this.hookAPI(window))}get header(){var h;return null==(h=this._vm)?void 0:h.header}hookAPI(h){h.PIXI=u0,h.stage=this.stage,h.vm=this}_tick(h){void 0!==this.ticker&&this.ticker(h)}get width(){return this._backBuffer.buffer.width}get height(){return this._backBuffer.buffer.height}get scale(){return .5}help(){return""}play(){void 0===this._app||this._isPlaying||(this._isPlaying=!0,this._displayedTickError=!1,this.resize(),this._ticker=h=>this._tick(h),this._app.ticker.add(this._ticker))}pause(){void 0!==this._app&&this._app.ticker.remove(this._ticker)}stop(){this._app.destroy(!0,{children:!0,texture:!0,baseTexture:!0})}resize(){if(void 0===this._vm)return;let h=this._vm.width,w=this._vm.height;this._app.renderer.resolution=1,this._app.renderer.resize(h,w),this._backBuffer.sprite.scale.set(h/this.width,w/this.height)}saveState(){var h,w;return(null==(h=this._game)?void 0:h.saveState)!==void 0?null==(w=this._game)?void 0:w.saveState():{}}loadState(h){var w,q;(null==(w=this._game)?void 0:w.loadState)!==void 0&&(null==(q=this._game)||q.loadState(h))}getStateForAgent(){var h,w;return(null==(h=this._game)?void 0:h.getStateForAgent)!==void 0?null==(w=this._game)?void 0:w.getStateForAgent():{}}tick(h,w,q){var tr,tn;if((null==(tr=this._game)?void 0:tr.tick)!==void 0)try{null==(tn=this._game)||tn.tick(h,w,q)}catch(h){this._displayedTickError||(this._displayedTickError=!0,console.error(h))}q&&(this.autoClearBackBuffer&&this._app.renderer.render(this._clearSprite,this._backBuffer.buffer),this._app.renderer.render(this._backStage,this._backBuffer.buffer),this._app.renderer.render(this._backBuffer.sprite))}get gameServer(){return this._vm.gameServer}get PIXI(){return u0}get stage(){return this._backStage}get renderer(){return this._app.renderer}get backBuffer(){return this._backBuffer.buffer}get frame(){return this._vm.frame}get time(){return this._vm.time}};let u3=["saveState","loadState","getStateForAgent","tick"];let XT=class XT{constructor(h,w){this._fun=h,this._context=w}saveState(){return void 0!==this._context.saveState?this._context.saveState():{}}loadState(h){void 0!==this._context.loadState&&this._context.loadState(h)}getStateForAgent(){return void 0!==this._context.getStateForAgent?this._context.getStateForAgent():{}}tick(h){void 0!==this._context.tick&&this._context.tick(h)}};var u4=function(h){var w={};function t(q){if(w[q])return w[q].exports;var tr=w[q]={i:q,l:!1,exports:{}};return h[q].call(tr.exports,tr,tr.exports,t),tr.l=!0,tr.exports}return t.m=h,t.c=w,t.d=function(h,w,q){t.o(h,w)||Object.defineProperty(h,w,{enumerable:!0,get:q})},t.r=function(h){"u">typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(h,"__esModule",{value:!0})},t.t=function(h,w){if(1&w&&(h=t(h)),8&w||4&w&&"object"==typeof h&&h&&h.__esModule)return h;var q=Object.create(null);if(t.r(q),Object.defineProperty(q,"default",{enumerable:!0,value:h}),2&w&&"string"!=typeof h)for(var tr in h)t.d(q,tr,(function(w){return h[w]}).bind(null,tr));return q},t.n=function(h){var w=h&&h.__esModule?function(){return h.default}:function(){return h};return t.d(w,"a",w),w},t.o=function(h,w){return Object.prototype.hasOwnProperty.call(h,w)},t.p="",t(t.s=34)}([function(h,w,q){/**
  @license MIT
  
  Copyright © 2017-2018 Benoit Giannangeli
  Copyright © 2017-2018 Daurnimator
  Copyright © 1994–2017 Lua.org, PUC-Rio.
  */let tr=q(5);h.exports.FENGARI_AUTHORS=tr.FENGARI_AUTHORS,h.exports.FENGARI_COPYRIGHT=tr.FENGARI_COPYRIGHT,h.exports.FENGARI_RELEASE=tr.FENGARI_RELEASE,h.exports.FENGARI_VERSION=tr.FENGARI_VERSION,h.exports.FENGARI_VERSION_MAJOR=tr.FENGARI_VERSION_MAJOR,h.exports.FENGARI_VERSION_MINOR=tr.FENGARI_VERSION_MINOR,h.exports.FENGARI_VERSION_NUM=tr.FENGARI_VERSION_NUM,h.exports.FENGARI_VERSION_RELEASE=tr.FENGARI_VERSION_RELEASE,h.exports.luastring_eq=tr.luastring_eq,h.exports.luastring_indexOf=tr.luastring_indexOf,h.exports.luastring_of=tr.luastring_of,h.exports.to_jsstring=tr.to_jsstring,h.exports.to_luastring=tr.to_luastring,h.exports.to_uristring=tr.to_uristring;let tn=q(3),ti=q(2),to=q(7),ts=q(17);h.exports.luaconf=tn,h.exports.lua=ti,h.exports.lauxlib=to,h.exports.lualib=ts},function(h,w,q){let tr,tn,ti;if(tr="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):function(h){let w=0,q=h.length,tr=new Uint8Array(q);for(;q>w;)tr[w]=h[w++];return tr},"function"==typeof new Uint8Array().indexOf)tn=function(h,w,q){return h.indexOf(w,q)};else{let h=[].indexOf;if(0!==h.call(new Uint8Array(1),0))throw Error("missing .indexOf");tn=function(w,q,tr){return h.call(w,q,tr)}}ti="function"==typeof Uint8Array.of?Uint8Array.of.bind(Uint8Array):function(){return tr(arguments)};let a=function(h){return h instanceof Uint8Array},to="cannot convert invalid utf8 to javascript string",ts=";,/?:@&=+$abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789,-_.!~*'()#".split("").reduce(function(h,w){return h[w.charCodeAt(0)]=!0,h},{}),tu={},f=function(h,w){if("string"!=typeof h)throw TypeError("to_luastring expects a javascript string");if(w){let w=tu[h];if(a(w))return w}let q=h.length,tn=Array(q),ti=0;for(let w=0;w<q;++w){let tr=h.charCodeAt(w);if(tr<=127)tn[ti++]=tr;else if(tr<=2047)tn[ti++]=192|tr>>6,tn[ti++]=128|63&tr;else{if(tr>=55296&&tr<=56319&&w+1<q){let q=h.charCodeAt(w+1);q>=56320&&q<=57343&&(w++,tr=1024*(tr-55296)+q+9216)}tr<=65535?tn[ti++]=224|tr>>12:(tn[ti++]=240|tr>>18,tn[ti++]=128|tr>>12&63),tn[ti++]=128|tr>>6&63,tn[ti++]=128|63&tr}}return tn=tr(tn),w&&(tu[h]=tn),tn};h.exports.luastring_from=tr,h.exports.luastring_indexOf=tn,h.exports.luastring_of=ti,h.exports.is_luastring=a,h.exports.luastring_eq=function(h,w){if(h!==w){let q=h.length;if(q!==w.length)return!1;for(let tr=0;tr<q;tr++)if(h[tr]!==w[tr])return!1}return!0},h.exports.to_jsstring=function(h,w,q,tr){if(!a(h))throw TypeError("to_jsstring expects a Uint8Array");q=void 0===q?h.length:Math.min(h.length,q);let tn="";for(let ti=void 0!==w?w:0;ti<q;){let w=h[ti++];if(w<128)tn+=String.fromCharCode(w);else if(w<194||w>244){if(!tr)throw RangeError(to);tn+="�"}else if(w<=223){if(ti>=q){if(!tr)throw RangeError(to);tn+="�";continue}let ts=h[ti++];if((192&ts)!=128){if(!tr)throw RangeError(to);tn+="�";continue}tn+=String.fromCharCode(((31&w)<<6)+(63&ts))}else if(w<=239){if(ti+1>=q){if(!tr)throw RangeError(to);tn+="�";continue}let ts=h[ti++];if((192&ts)!=128){if(!tr)throw RangeError(to);tn+="�";continue}let tu=h[ti++];if((192&tu)!=128){if(!tr)throw RangeError(to);tn+="�";continue}let tl=((15&w)<<12)+((63&ts)<<6)+(63&tu);tl<=65535?tn+=String.fromCharCode(tl):tn+=String.fromCharCode(55296+((tl-=65536)>>10),tl%1024+56320)}else{if(ti+2>=q){if(!tr)throw RangeError(to);tn+="�";continue}let ts=h[ti++];if((192&ts)!=128){if(!tr)throw RangeError(to);tn+="�";continue}let tu=h[ti++];if((192&tu)!=128){if(!tr)throw RangeError(to);tn+="�";continue}let tl=h[ti++];if((192&tl)!=128){if(!tr)throw RangeError(to);tn+="�";continue}let tc=((7&w)<<18)+((63&ts)<<12)+((63&tu)<<6)+(63&tl);tn+=String.fromCharCode(55296+((tc-=65536)>>10),tc%1024+56320)}}return tn},h.exports.to_uristring=function(h){if(!a(h))throw TypeError("to_uristring expects a Uint8Array");let w="";for(let q=0;q<h.length;q++){let tr=h[q];ts[tr]?w+=String.fromCharCode(tr):w+="%"+(tr<16?"0":"")+tr.toString(16)}return w},h.exports.to_luastring=f,h.exports.from_userstring=function(h){if(!a(h)){if("string"!=typeof h)throw TypeError("expects an array of bytes or javascript string");h=f(h)}return h};let tl=f("\x1bLua");h.exports.LUA_SIGNATURE=tl,h.exports.LUA_VERSION_MAJOR="5",h.exports.LUA_VERSION_MINOR="3",h.exports.LUA_VERSION_NUM=503,h.exports.LUA_VERSION_RELEASE="4",h.exports.LUA_VERSION="Lua 5.3",h.exports.LUA_RELEASE="Lua 5.3.4",h.exports.LUA_COPYRIGHT="Lua 5.3.4  Copyright (C) 1994-2017 Lua.org, PUC-Rio",h.exports.LUA_AUTHORS="R. Ierusalimschy, L. H. de Figueiredo, W. Celes";let tc={LUA_TNONE:-1,LUA_TNIL:0,LUA_TBOOLEAN:1,LUA_TLIGHTUSERDATA:2,LUA_TNUMBER:3,LUA_TSTRING:4,LUA_TTABLE:5,LUA_TFUNCTION:6,LUA_TUSERDATA:7,LUA_TTHREAD:8,LUA_NUMTAGS:9};tc.LUA_TSHRSTR=0|tc.LUA_TSTRING,tc.LUA_TLNGSTR=16|tc.LUA_TSTRING,tc.LUA_TNUMFLT=0|tc.LUA_TNUMBER,tc.LUA_TNUMINT=16|tc.LUA_TNUMBER,tc.LUA_TLCL=0|tc.LUA_TFUNCTION,tc.LUA_TLCF=16|tc.LUA_TFUNCTION,tc.LUA_TCCL=32|tc.LUA_TFUNCTION;let{LUAI_MAXSTACK:tp}=q(3),td=-tp-1e3;h.exports.LUA_HOOKCALL=0,h.exports.LUA_HOOKCOUNT=3,h.exports.LUA_HOOKLINE=2,h.exports.LUA_HOOKRET=1,h.exports.LUA_HOOKTAILCALL=4,h.exports.LUA_MASKCALL=1,h.exports.LUA_MASKCOUNT=8,h.exports.LUA_MASKLINE=4,h.exports.LUA_MASKRET=2,h.exports.LUA_MINSTACK=20,h.exports.LUA_MULTRET=-1,h.exports.LUA_OPADD=0,h.exports.LUA_OPBAND=7,h.exports.LUA_OPBNOT=13,h.exports.LUA_OPBOR=8,h.exports.LUA_OPBXOR=9,h.exports.LUA_OPDIV=5,h.exports.LUA_OPEQ=0,h.exports.LUA_OPIDIV=6,h.exports.LUA_OPLE=2,h.exports.LUA_OPLT=1,h.exports.LUA_OPMOD=3,h.exports.LUA_OPMUL=2,h.exports.LUA_OPPOW=4,h.exports.LUA_OPSHL=10,h.exports.LUA_OPSHR=11,h.exports.LUA_OPSUB=1,h.exports.LUA_OPUNM=12,h.exports.LUA_REGISTRYINDEX=td,h.exports.LUA_RIDX_GLOBALS=2,h.exports.LUA_RIDX_LAST=2,h.exports.LUA_RIDX_MAINTHREAD=1,h.exports.constant_types=tc,h.exports.lua_Debug=class{constructor(){this.event=NaN,this.name=null,this.namewhat=null,this.what=null,this.source=null,this.currentline=NaN,this.linedefined=NaN,this.lastlinedefined=NaN,this.nups=NaN,this.nparams=NaN,this.isvararg=NaN,this.istailcall=NaN,this.short_src=null,this.i_ci=null}},h.exports.lua_upvalueindex=function(h){return td-h},h.exports.thread_status={LUA_OK:0,LUA_YIELD:1,LUA_ERRRUN:2,LUA_ERRSYNTAX:3,LUA_ERRMEM:4,LUA_ERRGCMM:5,LUA_ERRERR:6}},function(h,w,q){let tr=q(1),tn=q(18),ti=q(11),to=q(8),ts=q(12);h.exports.LUA_AUTHORS=tr.LUA_AUTHORS,h.exports.LUA_COPYRIGHT=tr.LUA_COPYRIGHT,h.exports.LUA_ERRERR=tr.thread_status.LUA_ERRERR,h.exports.LUA_ERRGCMM=tr.thread_status.LUA_ERRGCMM,h.exports.LUA_ERRMEM=tr.thread_status.LUA_ERRMEM,h.exports.LUA_ERRRUN=tr.thread_status.LUA_ERRRUN,h.exports.LUA_ERRSYNTAX=tr.thread_status.LUA_ERRSYNTAX,h.exports.LUA_HOOKCALL=tr.LUA_HOOKCALL,h.exports.LUA_HOOKCOUNT=tr.LUA_HOOKCOUNT,h.exports.LUA_HOOKLINE=tr.LUA_HOOKLINE,h.exports.LUA_HOOKRET=tr.LUA_HOOKRET,h.exports.LUA_HOOKTAILCALL=tr.LUA_HOOKTAILCALL,h.exports.LUA_MASKCALL=tr.LUA_MASKCALL,h.exports.LUA_MASKCOUNT=tr.LUA_MASKCOUNT,h.exports.LUA_MASKLINE=tr.LUA_MASKLINE,h.exports.LUA_MASKRET=tr.LUA_MASKRET,h.exports.LUA_MINSTACK=tr.LUA_MINSTACK,h.exports.LUA_MULTRET=tr.LUA_MULTRET,h.exports.LUA_NUMTAGS=tr.constant_types.LUA_NUMTAGS,h.exports.LUA_OK=tr.thread_status.LUA_OK,h.exports.LUA_OPADD=tr.LUA_OPADD,h.exports.LUA_OPBAND=tr.LUA_OPBAND,h.exports.LUA_OPBNOT=tr.LUA_OPBNOT,h.exports.LUA_OPBOR=tr.LUA_OPBOR,h.exports.LUA_OPBXOR=tr.LUA_OPBXOR,h.exports.LUA_OPDIV=tr.LUA_OPDIV,h.exports.LUA_OPEQ=tr.LUA_OPEQ,h.exports.LUA_OPIDIV=tr.LUA_OPIDIV,h.exports.LUA_OPLE=tr.LUA_OPLE,h.exports.LUA_OPLT=tr.LUA_OPLT,h.exports.LUA_OPMOD=tr.LUA_OPMOD,h.exports.LUA_OPMUL=tr.LUA_OPMUL,h.exports.LUA_OPPOW=tr.LUA_OPPOW,h.exports.LUA_OPSHL=tr.LUA_OPSHL,h.exports.LUA_OPSHR=tr.LUA_OPSHR,h.exports.LUA_OPSUB=tr.LUA_OPSUB,h.exports.LUA_OPUNM=tr.LUA_OPUNM,h.exports.LUA_REGISTRYINDEX=tr.LUA_REGISTRYINDEX,h.exports.LUA_RELEASE=tr.LUA_RELEASE,h.exports.LUA_RIDX_GLOBALS=tr.LUA_RIDX_GLOBALS,h.exports.LUA_RIDX_LAST=tr.LUA_RIDX_LAST,h.exports.LUA_RIDX_MAINTHREAD=tr.LUA_RIDX_MAINTHREAD,h.exports.LUA_SIGNATURE=tr.LUA_SIGNATURE,h.exports.LUA_TNONE=tr.constant_types.LUA_TNONE,h.exports.LUA_TNIL=tr.constant_types.LUA_TNIL,h.exports.LUA_TBOOLEAN=tr.constant_types.LUA_TBOOLEAN,h.exports.LUA_TLIGHTUSERDATA=tr.constant_types.LUA_TLIGHTUSERDATA,h.exports.LUA_TNUMBER=tr.constant_types.LUA_TNUMBER,h.exports.LUA_TSTRING=tr.constant_types.LUA_TSTRING,h.exports.LUA_TTABLE=tr.constant_types.LUA_TTABLE,h.exports.LUA_TFUNCTION=tr.constant_types.LUA_TFUNCTION,h.exports.LUA_TUSERDATA=tr.constant_types.LUA_TUSERDATA,h.exports.LUA_TTHREAD=tr.constant_types.LUA_TTHREAD,h.exports.LUA_VERSION=tr.LUA_VERSION,h.exports.LUA_VERSION_MAJOR=tr.LUA_VERSION_MAJOR,h.exports.LUA_VERSION_MINOR=tr.LUA_VERSION_MINOR,h.exports.LUA_VERSION_NUM=tr.LUA_VERSION_NUM,h.exports.LUA_VERSION_RELEASE=tr.LUA_VERSION_RELEASE,h.exports.LUA_YIELD=tr.thread_status.LUA_YIELD,h.exports.lua_Debug=tr.lua_Debug,h.exports.lua_upvalueindex=tr.lua_upvalueindex,h.exports.lua_absindex=tn.lua_absindex,h.exports.lua_arith=tn.lua_arith,h.exports.lua_atpanic=tn.lua_atpanic,h.exports.lua_atnativeerror=tn.lua_atnativeerror,h.exports.lua_call=tn.lua_call,h.exports.lua_callk=tn.lua_callk,h.exports.lua_checkstack=tn.lua_checkstack,h.exports.lua_close=ts.lua_close,h.exports.lua_compare=tn.lua_compare,h.exports.lua_concat=tn.lua_concat,h.exports.lua_copy=tn.lua_copy,h.exports.lua_createtable=tn.lua_createtable,h.exports.lua_dump=tn.lua_dump,h.exports.lua_error=tn.lua_error,h.exports.lua_gc=tn.lua_gc,h.exports.lua_getallocf=tn.lua_getallocf,h.exports.lua_getextraspace=tn.lua_getextraspace,h.exports.lua_getfield=tn.lua_getfield,h.exports.lua_getglobal=tn.lua_getglobal,h.exports.lua_gethook=ti.lua_gethook,h.exports.lua_gethookcount=ti.lua_gethookcount,h.exports.lua_gethookmask=ti.lua_gethookmask,h.exports.lua_geti=tn.lua_geti,h.exports.lua_getinfo=ti.lua_getinfo,h.exports.lua_getlocal=ti.lua_getlocal,h.exports.lua_getmetatable=tn.lua_getmetatable,h.exports.lua_getstack=ti.lua_getstack,h.exports.lua_gettable=tn.lua_gettable,h.exports.lua_gettop=tn.lua_gettop,h.exports.lua_getupvalue=tn.lua_getupvalue,h.exports.lua_getuservalue=tn.lua_getuservalue,h.exports.lua_insert=tn.lua_insert,h.exports.lua_isboolean=tn.lua_isboolean,h.exports.lua_iscfunction=tn.lua_iscfunction,h.exports.lua_isfunction=tn.lua_isfunction,h.exports.lua_isinteger=tn.lua_isinteger,h.exports.lua_islightuserdata=tn.lua_islightuserdata,h.exports.lua_isnil=tn.lua_isnil,h.exports.lua_isnone=tn.lua_isnone,h.exports.lua_isnoneornil=tn.lua_isnoneornil,h.exports.lua_isnumber=tn.lua_isnumber,h.exports.lua_isproxy=tn.lua_isproxy,h.exports.lua_isstring=tn.lua_isstring,h.exports.lua_istable=tn.lua_istable,h.exports.lua_isthread=tn.lua_isthread,h.exports.lua_isuserdata=tn.lua_isuserdata,h.exports.lua_isyieldable=to.lua_isyieldable,h.exports.lua_len=tn.lua_len,h.exports.lua_load=tn.lua_load,h.exports.lua_newstate=ts.lua_newstate,h.exports.lua_newtable=tn.lua_newtable,h.exports.lua_newthread=ts.lua_newthread,h.exports.lua_newuserdata=tn.lua_newuserdata,h.exports.lua_next=tn.lua_next,h.exports.lua_pcall=tn.lua_pcall,h.exports.lua_pcallk=tn.lua_pcallk,h.exports.lua_pop=tn.lua_pop,h.exports.lua_pushboolean=tn.lua_pushboolean,h.exports.lua_pushcclosure=tn.lua_pushcclosure,h.exports.lua_pushcfunction=tn.lua_pushcfunction,h.exports.lua_pushfstring=tn.lua_pushfstring,h.exports.lua_pushglobaltable=tn.lua_pushglobaltable,h.exports.lua_pushinteger=tn.lua_pushinteger,h.exports.lua_pushjsclosure=tn.lua_pushjsclosure,h.exports.lua_pushjsfunction=tn.lua_pushjsfunction,h.exports.lua_pushlightuserdata=tn.lua_pushlightuserdata,h.exports.lua_pushliteral=tn.lua_pushliteral,h.exports.lua_pushlstring=tn.lua_pushlstring,h.exports.lua_pushnil=tn.lua_pushnil,h.exports.lua_pushnumber=tn.lua_pushnumber,h.exports.lua_pushstring=tn.lua_pushstring,h.exports.lua_pushthread=tn.lua_pushthread,h.exports.lua_pushvalue=tn.lua_pushvalue,h.exports.lua_pushvfstring=tn.lua_pushvfstring,h.exports.lua_rawequal=tn.lua_rawequal,h.exports.lua_rawget=tn.lua_rawget,h.exports.lua_rawgeti=tn.lua_rawgeti,h.exports.lua_rawgetp=tn.lua_rawgetp,h.exports.lua_rawlen=tn.lua_rawlen,h.exports.lua_rawset=tn.lua_rawset,h.exports.lua_rawseti=tn.lua_rawseti,h.exports.lua_rawsetp=tn.lua_rawsetp,h.exports.lua_register=tn.lua_register,h.exports.lua_remove=tn.lua_remove,h.exports.lua_replace=tn.lua_replace,h.exports.lua_resume=to.lua_resume,h.exports.lua_rotate=tn.lua_rotate,h.exports.lua_setallof=to.lua_setallof,h.exports.lua_setfield=tn.lua_setfield,h.exports.lua_setglobal=tn.lua_setglobal,h.exports.lua_sethook=ti.lua_sethook,h.exports.lua_seti=tn.lua_seti,h.exports.lua_setlocal=ti.lua_setlocal,h.exports.lua_setmetatable=tn.lua_setmetatable,h.exports.lua_settable=tn.lua_settable,h.exports.lua_settop=tn.lua_settop,h.exports.lua_setupvalue=tn.lua_setupvalue,h.exports.lua_setuservalue=tn.lua_setuservalue,h.exports.lua_status=tn.lua_status,h.exports.lua_stringtonumber=tn.lua_stringtonumber,h.exports.lua_toboolean=tn.lua_toboolean,h.exports.lua_todataview=tn.lua_todataview,h.exports.lua_tointeger=tn.lua_tointeger,h.exports.lua_tointegerx=tn.lua_tointegerx,h.exports.lua_tojsstring=tn.lua_tojsstring,h.exports.lua_tolstring=tn.lua_tolstring,h.exports.lua_tonumber=tn.lua_tonumber,h.exports.lua_tonumberx=tn.lua_tonumberx,h.exports.lua_topointer=tn.lua_topointer,h.exports.lua_toproxy=tn.lua_toproxy,h.exports.lua_tostring=tn.lua_tostring,h.exports.lua_tothread=tn.lua_tothread,h.exports.lua_touserdata=tn.lua_touserdata,h.exports.lua_type=tn.lua_type,h.exports.lua_typename=tn.lua_typename,h.exports.lua_upvalueid=tn.lua_upvalueid,h.exports.lua_upvaluejoin=tn.lua_upvaluejoin,h.exports.lua_version=tn.lua_version,h.exports.lua_xmove=tn.lua_xmove,h.exports.lua_yield=to.lua_yield,h.exports.lua_yieldk=to.lua_yieldk,h.exports.lua_tocfunction=tn.lua_tocfunction},function(h,w,q){let tr={},{LUA_VERSION_MAJOR:tn,LUA_VERSION_MINOR:ti,to_luastring:to}=q(1);h.exports.LUA_PATH_SEP=";",h.exports.LUA_PATH_MARK="?",h.exports.LUA_EXEC_DIR="!";let ts=tn+"."+ti;h.exports.LUA_VDIR=ts;{h.exports.LUA_DIRSEP="/";let w="./lua/"+ts+"/";h.exports.LUA_LDIR=w,h.exports.LUA_JSDIR=w;let q=to(w+"?.lua;"+w+"?/init.lua;./?.lua;./?/init.lua");h.exports.LUA_PATH_DEFAULT=q;let tr=to(w+"?.js;"+w+"loadall.js;./?.js");h.exports.LUA_JSPATH_DEFAULT=tr}let tu=tr.LUA_COMPAT_FLOATSTRING||!1,tl=tr.LUAI_MAXSTACK||1e6,tc=tr.LUA_IDSIZE||59,tp=tr.LUAL_BUFFERSIZE||8192,d=function(h,w){for(var q=Math.min(3,Math.ceil(Math.abs(w)/1023)),tr=h,tn=0;tn<q;tn++)tr*=Math.pow(2,Math.floor((w+tn)/q));return tr};h.exports.LUAI_MAXSTACK=tl,h.exports.LUA_COMPAT_FLOATSTRING=tu,h.exports.LUA_IDSIZE=tc,h.exports.LUA_INTEGER_FMT="%d",h.exports.LUA_INTEGER_FRMLEN="",h.exports.LUA_MAXINTEGER=2147483647,h.exports.LUA_MININTEGER=-2147483648,h.exports.LUA_NUMBER_FMT="%.14g",h.exports.LUA_NUMBER_FRMLEN="",h.exports.LUAL_BUFFERSIZE=tp,h.exports.frexp=function(h){if(0===h)return[h,0];var w=new DataView(new ArrayBuffer(8));w.setFloat64(0,h);var q=w.getUint32(0)>>>20&2047;0===q&&(w.setFloat64(0,18446744073709552e3*h),q=(w.getUint32(0)>>>20&2047)-64);var tr=q-1022;return[d(h,-tr),tr]},h.exports.ldexp=d,h.exports.lua_getlocaledecpoint=function(){return 46},h.exports.lua_integer2str=function(h){return String(h)},h.exports.lua_number2str=function(h){return String(Number(h.toPrecision(14)))},h.exports.lua_numbertointeger=function(h){return h>=-2147483648&&h<2147483648&&h},h.exports.luai_apicheck=function(h,w){if(!w)throw Error(w)}},function(h,w,q){let{luai_apicheck:tr}=q(3),i=function(h){if(!h)throw Error("assertion failed")};h.exports.lua_assert=i,h.exports.luai_apicheck=tr||function(h,w){return i(w)},h.exports.api_check=function(h,w,q){return tr(h,w&&q)},h.exports.LUAI_MAXCCALLS=200,h.exports.LUA_MINBUFFER=32,h.exports.luai_nummod=function(h,w,q){let tr=w%q;return tr*q<0&&(tr+=q),tr},h.exports.MAX_INT=2147483647,h.exports.MIN_INT=-2147483648},function(h,w,q){let tr=q(1),tn=`Fengari 0.1.4  Copyright (C) 2017-2018 B. Giannangeli, Daurnimator
Based on: `+tr.LUA_COPYRIGHT;h.exports.FENGARI_AUTHORS="B. Giannangeli, Daurnimator",h.exports.FENGARI_COPYRIGHT=tn,h.exports.FENGARI_RELEASE="Fengari 0.1.4",h.exports.FENGARI_VERSION="Fengari 0.1",h.exports.FENGARI_VERSION_MAJOR="0",h.exports.FENGARI_VERSION_MINOR="1",h.exports.FENGARI_VERSION_NUM=1,h.exports.FENGARI_VERSION_RELEASE="4",h.exports.is_luastring=tr.is_luastring,h.exports.luastring_eq=tr.luastring_eq,h.exports.luastring_from=tr.luastring_from,h.exports.luastring_indexOf=tr.luastring_indexOf,h.exports.luastring_of=tr.luastring_of,h.exports.to_jsstring=tr.to_jsstring,h.exports.to_luastring=tr.to_luastring,h.exports.to_uristring=tr.to_uristring,h.exports.from_userstring=tr.from_userstring},function(h,w,q){let{LUA_OPADD:tr,LUA_OPBAND:tn,LUA_OPBNOT:ti,LUA_OPBOR:to,LUA_OPBXOR:ts,LUA_OPDIV:tu,LUA_OPIDIV:tl,LUA_OPMOD:tc,LUA_OPMUL:tp,LUA_OPPOW:td,LUA_OPSHL:tm,LUA_OPSHR:ty,LUA_OPSUB:tv,LUA_OPUNM:tb,constant_types:{LUA_NUMTAGS:tx,LUA_TBOOLEAN:tT,LUA_TCCL:tE,LUA_TFUNCTION:tA,LUA_TLCF:tO,LUA_TLCL:tw,LUA_TLIGHTUSERDATA:tL,LUA_TLNGSTR:tS,LUA_TNIL:tI,LUA_TNUMBER:tP,LUA_TNUMFLT:tR,LUA_TNUMINT:tN,LUA_TSHRSTR:tM,LUA_TSTRING:tk,LUA_TTABLE:tU,LUA_TTHREAD:tC,LUA_TUSERDATA:tD},from_userstring:tF,luastring_indexOf:tB,luastring_of:tj,to_jsstring:tG,to_luastring:tV}=q(1),{lisdigit:tX,lisprint:tH,lisspace:tz,lisxdigit:tK}=q(22),tY=q(11),tW=q(8),tq=q(12),{luaS_bless:tZ,luaS_new:tJ}=q(10),tQ=q(9),{LUA_COMPAT_FLOATSTRING:t$,ldexp:t0,lua_integer2str:t1,lua_number2str:t2}=q(3),t3=q(15),{MAX_INT:t4,luai_nummod:t5,lua_assert:t6}=q(4),t8=q(14),t7=tx+1;let wt=class wt{constructor(h,w){this.type=h,this.value=w}ttype(){return 63&this.type}ttnov(){return 15&this.type}checktag(h){return this.type===h}checktype(h){return this.ttnov()===h}ttisnumber(){return this.checktype(tP)}ttisfloat(){return this.checktag(tR)}ttisinteger(){return this.checktag(tN)}ttisnil(){return this.checktag(tI)}ttisboolean(){return this.checktag(tT)}ttislightuserdata(){return this.checktag(tL)}ttisstring(){return this.checktype(tk)}ttisshrstring(){return this.checktag(tM)}ttislngstring(){return this.checktag(tS)}ttistable(){return this.checktag(tU)}ttisfunction(){return this.checktype(tA)}ttisclosure(){return(31&this.type)===tA}ttisCclosure(){return this.checktag(tE)}ttisLclosure(){return this.checktag(tw)}ttislcf(){return this.checktag(tO)}ttisfulluserdata(){return this.checktag(tD)}ttisthread(){return this.checktag(tC)}ttisdeadkey(){return this.checktag(t7)}l_isfalse(){return this.ttisnil()||this.ttisboolean()&&!1===this.value}setfltvalue(h){this.type=tR,this.value=h}chgfltvalue(h){t6(this.type==tR),this.value=h}setivalue(h){this.type=tN,this.value=h}chgivalue(h){t6(this.type==tN),this.value=h}setnilvalue(){this.type=tI,this.value=null}setfvalue(h){this.type=tO,this.value=h}setpvalue(h){this.type=tL,this.value=h}setbvalue(h){this.type=tT,this.value=h}setsvalue(h){this.type=tS,this.value=h}setuvalue(h){this.type=tD,this.value=h}setthvalue(h){this.type=tC,this.value=h}setclLvalue(h){this.type=tw,this.value=h}setclCvalue(h){this.type=tE,this.value=h}sethvalue(h){this.type=tU,this.value=h}setdeadvalue(){this.type=t7,this.value=null}setfrom(h){this.type=h.type,this.value=h.value}tsvalue(){return t6(this.ttisstring()),this.value}svalue(){return this.tsvalue().getstr()}vslen(){return this.tsvalue().tsslen()}jsstring(h,w){return tG(this.svalue(),h,w,!0)}};let ue=function(h,w,q){h.stack[w].setsvalue(q)},t9=new wt(tI,null);Object.freeze(t9),h.exports.luaO_nilobject=t9;let ce=class ce{constructor(h,w){this.id=h.l_G.id_counter++,this.p=null,this.nupvalues=w,this.upvals=Array(w)}};let Le=class Le{constructor(h,w,q){for(this.id=h.l_G.id_counter++,this.f=w,this.nupvalues=q,this.upvalue=Array(q);q--;)this.upvalue[q]=new wt(tI,null)}};let Re=class Re{constructor(h,w){this.id=h.l_G.id_counter++,this.metatable=null,this.uservalue=new wt(tI,null),this.len=w,this.data=Object.create(null)}};let er=tV("..."),en=tV('[string "'),ei=tV('"]'),Ft=function(h){return tX(h)?h-48:(223&h)-55},Dt=function(h,w){let q=1;if(t6(w<=1114111),w<128)h[7]=w;else{let tr=63;do h[8-q++]=128|63&w,w>>=6,tr>>=1;while(w>tr);h[8-q]=~tr<<1|w}return q},Rt=function(h,w){let q="x"===w?function(h){let w,q=0,tr=0,tn=0,ti=0,to=0,ts=!1;for(;tz(h[q]);)q++;if(((w=45===h[q])||43===h[q])&&q++,48!==h[q]||120!==h[q+1]&&88!==h[q+1])return null;for(q+=2;;q++)if(46===h[q]){if(ts)break;ts=!0}else{if(!tK(h[q]))break;0===tn&&48===h[q]?ti++:++tn<=30?tr=16*tr+Ft(h[q]):to++,ts&&to--}if(ti+tn===0)return null;if(to*=4,112===h[q]||80===h[q]){let w,tr=0;if(((w=45===h[++q])||43===h[q])&&q++,!tX(h[q]))return null;for(;tX(h[q]);)tr=10*tr+h[q++]-48;w&&(tr=-tr),to+=tr}return w&&(tr=-tr),{n:t0(tr,to),i:q}}(h):function(h){try{h=tG(h)}catch{return null}let w=/^[\t\v\f \n\r]*[+-]?(?:[0-9]+\.?[0-9]*|\.[0-9]*)(?:[eE][+-]?[0-9]+)?/.exec(h);if(!w)return null;let q=parseFloat(w[0]);return isNaN(q)?null:{n:q,i:w[0].length}}(h);if(null===q)return null;for(;tz(h[q.i]);)q.i++;return q.i===h.length||0===h[q.i]?q:null},eo=[46,120,88,110,78],es={46:".",120:"x",88:"x",110:"n",78:"n"},eu=Math.floor(t4/10),el=t4%10,ve=function(h,w){let q;if(w.ttisinteger())q=tV(t1(w.value));else{let h=t2(w.value);!t$&&/^[-0123456789]+$/.test(h)&&(h+=".0"),q=tV(h)}w.setsvalue(tZ(h,q))},xe=function(h,w){tW.luaD_inctop(h),ue(h,h.top-1,tJ(h,w))},Ue=function(h,w,q){let tr,tn=0,ti=0,to=0;for(;-1!=(tr=tB(w,37,ti));){switch(xe(h,w.subarray(ti,tr)),w[tr+1]){case 115:{let w=q[to++];if(null===w)w=tV("(null)",!0);else{let h=tB(w=tF(w),0);-1!==h&&(w=w.subarray(0,h))}xe(h,w);break}case 99:{let w=q[to++];tH(w)?xe(h,tj(w)):ne(h,tV("<\\%d>",!0),w);break}case 100:case 73:tW.luaD_inctop(h),h.stack[h.top-1].setivalue(q[to++]),ve(h,h.stack[h.top-1]);break;case 102:tW.luaD_inctop(h),h.stack[h.top-1].setfltvalue(q[to++]),ve(h,h.stack[h.top-1]);break;case 112:{let w=q[to++];if(w instanceof tq.lua_State||w instanceof tQ.Table||w instanceof Re||w instanceof ce||w instanceof Le)xe(h,tV("0x"+w.id.toString(16)));else switch(typeof w){case"undefined":xe(h,tV("undefined"));break;case"number":xe(h,tV("Number("+w+")"));break;case"string":xe(h,tV("String("+JSON.stringify(w)+")"));break;case"boolean":xe(h,tV(w?"Boolean(true)":"Boolean(false)"));break;case"object":if(null===w){xe(h,tV("null"));break}case"function":{let q=h.l_G.ids.get(w);q||(q=h.l_G.id_counter++,h.l_G.ids.set(w,q)),xe(h,tV("0x"+q.toString(16)));break}default:xe(h,tV("<id NYI>"))}break}case 85:{let w=new Uint8Array(8),tr=Dt(w,q[to++]);xe(h,w.subarray(8-tr));break}case 37:xe(h,tV("%",!0));break;default:tY.luaG_runerror(h,tV("invalid option '%%%c' to 'lua_pushfstring'"),w[tr+1])}tn+=2,ti=tr+2}return tW.luaD_checkstack(h,1),xe(h,w.subarray(ti)),tn>0&&t3.luaV_concat(h,tn+1),h.stack[h.top-1].svalue()},ne=function(h,w,...q){return Ue(h,w,q)},se=function(h,w,q,tu){switch(w){case tr:return q+tu|0;case tv:return q-tu|0;case tp:return t3.luaV_imul(q,tu);case tc:return t3.luaV_mod(h,q,tu);case tl:return t3.luaV_div(h,q,tu);case tn:return q&tu;case to:return q|tu;case ts:return q^tu;case tm:return t3.luaV_shiftl(q,tu);case ty:return t3.luaV_shiftl(q,-tu);case tb:return 0-q|0;case ti:return -1^q;default:t6(0)}},be=function(h,w,q,tn){switch(w){case tr:return q+tn;case tv:return q-tn;case tp:return q*tn;case tu:return q/tn;case td:return Math.pow(q,tn);case tl:return Math.floor(q/tn);case tb:return-q;case tc:return t5(h,q,tn);default:t6(0)}};h.exports.CClosure=Le,h.exports.LClosure=ce,h.exports.LUA_TDEADKEY=t7,h.exports.LUA_TPROTO=tx,h.exports.LocVar=class{constructor(){this.varname=null,this.startpc=NaN,this.endpc=NaN}},h.exports.TValue=wt,h.exports.Udata=Re,h.exports.UTF8BUFFSZ=8,h.exports.luaO_arith=function(h,w,q,tl,tc){let tp="number"==typeof tc?h.stack[tc]:tc;switch(w){case tn:case to:case ts:case tm:case ty:case ti:{let tr,tn;if(!1!==(tr=t3.tointeger(q))&&!1!==(tn=t3.tointeger(tl)))return void tp.setivalue(se(h,w,tr,tn));break}case tu:case td:{let tr,tn;if(!1!==(tr=t3.tonumber(q))&&!1!==(tn=t3.tonumber(tl)))return void tp.setfltvalue(be(h,w,tr,tn));break}default:{let tr,tn;if(q.ttisinteger()&&tl.ttisinteger())return void tp.setivalue(se(h,w,q.value,tl.value));if(!1!==(tr=t3.tonumber(q))&&!1!==(tn=t3.tonumber(tl)))return void tp.setfltvalue(be(h,w,tr,tn))}}t6(null!==h),t8.luaT_trybinTM(h,q,tl,tc,w-tr+t8.TMS.TM_ADD)},h.exports.luaO_chunkid=function(h,w){let q,tr=h.length;if(61===h[0])tr<w?(q=new Uint8Array(tr-1)).set(h.subarray(1)):(q=new Uint8Array(w)).set(h.subarray(1,w+1));else if(64===h[0])tr<=w?(q=new Uint8Array(tr-1)).set(h.subarray(1)):((q=new Uint8Array(w)).set(er),w-=er.length,q.set(h.subarray(tr-w),er.length));else{q=new Uint8Array(w);let tn=tB(h,10);q.set(en);let ti=en.length;tr<(w-=en.length+er.length+ei.length)&&-1===tn?(q.set(h,ti),ti+=h.length):(-1!==tn&&(tr=tn),tr>w&&(tr=w),q.set(h.subarray(0,tr),ti),ti+=tr,q.set(er,ti),ti+=er.length),q.set(ei,ti),ti+=ei.length,q=q.subarray(0,ti)}return q},h.exports.luaO_hexavalue=Ft,h.exports.luaO_int2fb=function(h){let w=0;if(h<8)return h;for(;h>=128;)h=h+15>>4,w+=4;for(;h>=16;)h=h+1>>1,w++;return w+1<<3|h-8},h.exports.luaO_pushfstring=ne,h.exports.luaO_pushvfstring=Ue,h.exports.luaO_str2num=function(h,w){let q=function(h){let w,q=0,tr=0,tn=!0;for(;tz(h[q]);)q++;if(((w=45===h[q])||43===h[q])&&q++,48!==h[q]||120!==h[q+1]&&88!==h[q+1])for(;q<h.length&&tX(h[q]);q++){let ti=h[q]-48;if(tr>=eu&&(tr>eu||ti>el+w))return null;tr=10*tr+ti|0,tn=!1}else for(q+=2;q<h.length&&tK(h[q]);q++)tr=16*tr+Ft(h[q])|0,tn=!1;for(;q<h.length&&tz(h[q]);)q++;return tn||q!==h.length&&0!==h[q]?null:{n:0|(w?-tr:tr),i:q}}(h);return null!==q?(w.setivalue(q.n),q.i+1):null!==(q=function(h){let w=h.length,q=0;for(let tr=0;tr<w;tr++){let w=h[tr];if(-1!==eo.indexOf(w)){q=w;break}}let tr=es[q];return"n"===tr?null:Rt(h,tr)}(h))?(w.setfltvalue(q.n),q.i+1):0},h.exports.luaO_tostring=ve,h.exports.luaO_utf8esc=Dt,h.exports.numarith=be,h.exports.pushobj2s=function(h,w){h.stack[h.top++]=new wt(w.type,w.value)},h.exports.pushsvalue2s=function(h,w){h.stack[h.top++]=new wt(tS,w)},h.exports.setobjs2s=function(h,w,q){h.stack[w].setfrom(h.stack[q])},h.exports.setobj2s=function(h,w,q){h.stack[w].setfrom(q)},h.exports.setsvalue2s=ue},function(h,w,q){let tr,tn;let{LUAL_BUFFERSIZE:ti}=q(3),{LUA_ERRERR:to,LUA_MULTRET:ts,LUA_REGISTRYINDEX:tu,LUA_SIGNATURE:tl,LUA_TBOOLEAN:tc,LUA_TLIGHTUSERDATA:tp,LUA_TNIL:td,LUA_TNONE:tm,LUA_TNUMBER:ty,LUA_TSTRING:tv,LUA_TTABLE:tb,LUA_VERSION_NUM:tx,lua_Debug:tT,lua_absindex:tE,lua_atpanic:tA,lua_call:tO,lua_checkstack:tw,lua_concat:tL,lua_copy:tS,lua_createtable:tI,lua_error:tP,lua_getfield:tR,lua_getinfo:tN,lua_getmetatable:tM,lua_getstack:tk,lua_gettop:tU,lua_insert:tC,lua_isinteger:tD,lua_isnil:tF,lua_isnumber:tB,lua_isstring:tj,lua_istable:tG,lua_len:tV,lua_load:tX,lua_newstate:tH,lua_newtable:tz,lua_next:tK,lua_pcall:tY,lua_pop:tW,lua_pushboolean:tq,lua_pushcclosure:tZ,lua_pushcfunction:tJ,lua_pushfstring:tQ,lua_pushinteger:t$,lua_pushliteral:t0,lua_pushlstring:t1,lua_pushnil:t2,lua_pushstring:t3,lua_pushvalue:t4,lua_pushvfstring:t5,lua_rawequal:t6,lua_rawget:t8,lua_rawgeti:t7,lua_rawlen:t9,lua_rawseti:er,lua_remove:en,lua_setfield:ei,lua_setglobal:eo,lua_setmetatable:es,lua_settop:eu,lua_toboolean:el,lua_tointeger:ep,lua_tointegerx:ed,lua_tojsstring:e_,lua_tolstring:eg,lua_tonumber:em,lua_tonumberx:ey,lua_topointer:ev,lua_tostring:eb,lua_touserdata:ex,lua_type:eT,lua_typename:eE,lua_version:eO}=q(2),{from_userstring:eL,luastring_eq:eS,to_luastring:eI,to_uristring:eP}=q(5),eR=to+1,eN=eI("_LOADED"),eM=eI("_PRELOAD"),ek=eI("FILE*"),eU=eI("__name"),eC=eI("__tostring"),eD=new Uint8Array(0);let A=class A{constructor(){this.L=null,this.b=eD,this.n=0}};let Q=function(h,w,q){if(0===q||!tG(h,-1))return 0;for(t2(h);tK(h,-2);){if(eT(h,-2)===tv){if(t6(h,w,-1))return tW(h,1),1;if(Q(h,w,q-1))return en(h,-2),t0(h,"."),tC(h,-2),tL(h,3),1}tW(h,1)}return 0},Mt=function(h,w){let q=tU(h);if(tN(h,eI("f"),w),tR(h,tu,eN),Q(h,q+1,2)){let w=eb(h,-1);return 95===w[0]&&71===w[1]&&46===w[2]&&(t3(h,w.subarray(3)),en(h,-2)),tS(h,-1,q+1),tW(h,2),1}return eu(h,q),0},Wt=function(h,w){Mt(h,w)?(tQ(h,eI("function '%s'"),eb(h,-1)),en(h,-2)):0!==w.namewhat.length?tQ(h,eI("%s '%s'"),w.namewhat,w.name):w.what&&109===w.what[0]?t0(h,"main chunk"):w.what&&76===w.what[0]?tQ(h,eI("function <%s:%d>"),w.short_src,w.linedefined):t0(h,"?")},ge=function(h){throw Error("PANIC: unprotected error in call to Lua API ("+e_(h,-1)+")")},ye=function(h,w,q){let tr=new tT;return tk(h,0,tr)?(tN(h,eI("n"),tr),eS(tr.namewhat,eI("method"))&&0==--w?D(h,eI("calling '%s' on bad self (%s)"),tr.name,q):(null===tr.name&&(tr.name=Mt(h,tr)?eb(h,-1):eI("?")),D(h,eI("bad argument #%d to '%s' (%s)"),w,tr.name,q))):D(h,eI("bad argument #%d (%s)"),w,q)},nt=function(h,w,q){let tr;tr=Bt(h,w,eU)===tv?eb(h,-1):eT(h,w)===tp?eI("light userdata",!0):fe(h,w);let tn=tQ(h,eI("%s expected, got %s"),q,tr);return ye(h,w,tn)},jt=function(h,w){let q=new tT;tk(h,w,q)&&(tN(h,eI("Sl",!0),q),q.currentline>0)?tQ(h,eI("%s:%d: "),q.short_src,q.currentline):t3(h,eI(""))},D=function(h,w,...q){return jt(h,1),t5(h,w,q),tL(h,2),tP(h)},bt=function(h,w,q,tr){if(w)return tq(h,1),1;{let w,tn;return t2(h),tr?(w=tr.message,tn=-tr.errno):(w="Success",tn=0),q?tQ(h,eI("%s: %s"),q,eI(w)):t3(h,eI(w)),t$(h,tn),3}},it=function(h,w){return tR(h,tu,w)},zt=function(h,w,q){let tr=ex(h,w);return null!==tr&&tM(h,w)?(it(h,q),t6(h,-1,-2)||(tr=null),tW(h,2),tr):null},he=function(h,w,q){nt(h,w,eE(h,q))},fe=function(h,w){return eE(h,eT(h,w))},ae=function(h,w){let q=eg(h,w);return null!=q||he(h,w,tv),q},je=function(h,w,q){return 0>=eT(h,w)?null===q?null:eL(q):ae(h,w)},Oe=function(h,w){let q=ey(h,w);return!1===q&&he(h,w,ty),q},Ee=function(h,w){let q=ed(h,w);return!1===q&&(tB(h,w)?ye(h,w,eI("number has no integer representation",!0)):he(h,w,ty)),q},Ne=function(h,w){let q=h.n+w;if(h.b.length<q){let w=Math.max(2*h.b.length,q),tr=new Uint8Array(w);tr.set(h.b),h.b=tr}return h.b.subarray(h.n,q)},ke=function(h,w){w.L=h,w.b=eD},ir=function(h,w,q){q>0&&(w=eL(w),Ne(h,q).set(w.subarray(0,q)),Ze(h,q))},Be=function(h,w){ir(h,w=eL(w),w.length)},or=function(h){t1(h.L,h.b,h.n),h.n=0,h.b=eD},Ze=function(h,w){h.n+=w},L=function(h,w,q,tr){return 0>=eT(h,q)?tr:w(h,q)},ot=function(h,w){let q=w.string;return w.string=null,q},Gt=function(h,w,q,tr,tn){return tX(h,ot,{string:w},tr,tn)},Ht=function(h,w,q,tr){return Gt(h,w,0,tr,null)},te=function(h,w){return Ht(h,w,w.length,w)},Bt=function(h,w,q){if(tM(h,w)){t3(h,q);let w=t8(h,-2);return w===td?tW(h,2):en(h,-2),w}return td},Xt=function(h,w,q){return w=tE(h,w),Bt(h,w,q)!==td&&(t4(h,w),tO(h,1,1),!0)},eF=eI("%I"),eB=eI("%f"),oe=function(h,w,q){var tr=q>>>0,tn=w.length,ti=h.length+1-tn;t:for(;tr<ti;tr++){for(let q=0;q<tn;q++)if(h[tr+q]!==w[q])continue t;return tr}return -1},m=function(h,w,q){return tR(h,w,q)===tb||(tW(h,1),w=tE(h,w),tz(h),t4(h,-1),ei(h,w,q),!1)},z=function(h,w,q){for(let tr in X(h,q,eI("too many upvalues",!0)),w){for(let w=0;w<q;w++)t4(h,-q);tZ(h,w[tr],q),ei(h,-(q+2),eI(tr))}tW(h,q)},X=function(h,w,q){tw(h,w)||(q?D(h,eI("stack overflow (%s)"),q):D(h,eI("stack overflow",!0)))},ct=function(h,w,q,tr){let tn=tr.message,ti=eb(h,q).subarray(1);return tQ(h,eI("cannot %s %s: %s"),eI(w),ti,eI(tn)),en(h,q),eR},ej=[239,187,191],ie=function(h){let w=function(h){let w;h.n=0;let q=0;do{if(null===(w=tr(h))||w!==ej[q])return w;q++,h.buff[h.n++]=w}while(q<ej.length);return h.n=0,tr(h)}(h);if(35===w){do w=tr(h);while(w&&10!==w);return{skipped:!0,c:tr(h)}}return{skipped:!1,c:w}};{let E=class E{constructor(){this.n=NaN,this.f=null,this.buff=new Uint8Array(1024),this.pos=0,this.err=void 0}};let j=function(h,w){if(null!==w.f&&w.n>0){let h=w.n;return w.n=0,w.f=w.f.subarray(w.pos),w.buff.subarray(0,h)}let q=w.f;return w.f=null,q};tr=function(h){return h.pos<h.f.length?h.f[h.pos++]:null},tn=function(h,w,q){let tr=new E,tn=tU(h)+1;if(null===w)throw Error("Can't read stdin in the browser");{tQ(h,eI("@%s"),w);let q=eP(w),ti=new XMLHttpRequest;if(ti.open("GET",q,!1),typeof window>"u"&&(ti.responseType="arraybuffer"),ti.send(),!(ti.status>=200&&ti.status<=299))return tr.err=ti.status,ct(h,"open",tn,{message:`${ti.status}: ${ti.statusText}`});"string"==typeof ti.response?tr.f=eI(ti.response):tr.f=new Uint8Array(ti.response)}let ti=ie(tr);ti.c===tl[0]&&w||ti.skipped&&(tr.buff[tr.n++]=10),null!==ti.c&&(tr.buff[tr.n++]=ti.c);let to=tX(h,j,tr,eb(h,-1),q),ts=tr.err;return ts?(eu(h,tn),ct(h,"read",tn,ts)):(en(h,tn),to)}}let me=function(h,w){return tn(h,w,null)},Ie=function(h,w,q){let tr=eO(h);72!=q&&D(h,eI("core and library have incompatible numeric types")),tr!=eO(null)?D(h,eI("multiple Lua VMs detected")):tr!==w&&D(h,eI("version mismatch: app. needs %f, Lua core provides %f"),w,tr)};h.exports.LUA_ERRFILE=eR,h.exports.LUA_FILEHANDLE=ek,h.exports.LUA_LOADED_TABLE=eN,h.exports.LUA_NOREF=-2,h.exports.LUA_PRELOAD_TABLE=eM,h.exports.LUA_REFNIL=-1,h.exports.luaL_Buffer=A,h.exports.luaL_addchar=function(h,w){Ne(h,1),h.b[h.n++]=w},h.exports.luaL_addlstring=ir,h.exports.luaL_addsize=Ze,h.exports.luaL_addstring=Be,h.exports.luaL_addvalue=function(h){let w=h.L,q=eb(w,-1);ir(h,q,q.length),tW(w,1)},h.exports.luaL_argcheck=function(h,w,q,tr){w||ye(h,q,tr)},h.exports.luaL_argerror=ye,h.exports.luaL_buffinit=ke,h.exports.luaL_buffinitsize=function(h,w,q){return ke(h,w),Ne(w,q)},h.exports.luaL_callmeta=Xt,h.exports.luaL_checkany=function(h,w){eT(h,w)===tm&&ye(h,w,eI("value expected",!0))},h.exports.luaL_checkinteger=Ee,h.exports.luaL_checklstring=ae,h.exports.luaL_checknumber=Oe,h.exports.luaL_checkoption=function(h,w,q,tr){let tn=null!==q?je(h,w,q):ae(h,w);for(let h=0;tr[h];h++)if(eS(tr[h],tn))return h;return ye(h,w,tQ(h,eI("invalid option '%s'"),tn))},h.exports.luaL_checkstack=X,h.exports.luaL_checkstring=ae,h.exports.luaL_checktype=function(h,w,q){eT(h,w)!==q&&he(h,w,q)},h.exports.luaL_checkudata=function(h,w,q){let tr=zt(h,w,q);return null===tr&&nt(h,w,q),tr},h.exports.luaL_checkversion=function(h){Ie(h,tx,72)},h.exports.luaL_checkversion_=Ie,h.exports.luaL_dofile=function(h,w){return me(h,w)||tY(h,0,ts,0)},h.exports.luaL_dostring=function(h,w){return te(h,w)||tY(h,0,ts,0)},h.exports.luaL_error=D,h.exports.luaL_execresult=function(h,w){let q,tr;if(null===w)return tq(h,1),t0(h,"exit"),t$(h,0),3;if(w.status)q="exit",tr=w.status;else{if(!w.signal)return bt(h,0,null,w);q="signal",tr=w.signal}return t2(h),t0(h,q),t$(h,tr),3},h.exports.luaL_fileresult=bt,h.exports.luaL_getmetafield=Bt,h.exports.luaL_getmetatable=it,h.exports.luaL_getsubtable=m,h.exports.luaL_gsub=function(h,w,q,tr){let tn,ti=new A;for(ke(h,ti);(tn=oe(w,q))>=0;)ir(ti,w,tn),Be(ti,tr),w=w.subarray(tn+q.length);return Be(ti,w),or(ti),eb(h,-1)},h.exports.luaL_len=function(h,w){tV(h,w);let q=ed(h,-1);return!1===q&&D(h,eI("object length is not an integer",!0)),tW(h,1),q},h.exports.luaL_loadbuffer=Ht,h.exports.luaL_loadbufferx=Gt,h.exports.luaL_loadfile=me,h.exports.luaL_loadfilex=tn,h.exports.luaL_loadstring=te,h.exports.luaL_newlib=function(h,w){tI(h),z(h,w,0)},h.exports.luaL_newlibtable=function(h){tI(h)},h.exports.luaL_newmetatable=function(h,w){return it(h,w)!==td?0:(tW(h,1),tI(h,0,2),t3(h,w),ei(h,-2,eU),t4(h,-1),ei(h,tu,w),1)},h.exports.luaL_newstate=function(){let h=tH();return h&&tA(h,ge),h},h.exports.luaL_opt=L,h.exports.luaL_optinteger=function(h,w,q){return L(h,Ee,w,q)},h.exports.luaL_optlstring=je,h.exports.luaL_optnumber=function(h,w,q){return L(h,Oe,w,q)},h.exports.luaL_optstring=je,h.exports.luaL_prepbuffer=function(h){return Ne(h,ti)},h.exports.luaL_prepbuffsize=Ne,h.exports.luaL_pushresult=or,h.exports.luaL_pushresultsize=function(h,w){Ze(h,w),or(h)},h.exports.luaL_ref=function(h,w){let q;return tF(h,-1)?(tW(h,1),-1):(w=tE(h,w),t7(h,w,0),q=ep(h,-1),tW(h,1),0!==q?(t7(h,w,q),er(h,w,0)):q=t9(h,w)+1,er(h,w,q),q)},h.exports.luaL_requiref=function(h,w,q,tr){m(h,tu,eN),tR(h,-1,w),el(h,-1)||(tW(h,1),tJ(h,q),t3(h,w),tO(h,1,1),t4(h,-1),ei(h,-3,w)),en(h,-2),tr&&(t4(h,-1),eo(h,w))},h.exports.luaL_setfuncs=z,h.exports.luaL_setmetatable=function(h,w){it(h,w),es(h,-2)},h.exports.luaL_testudata=zt,h.exports.luaL_tolstring=function(h,w){if(Xt(h,w,eC))tj(h,-1)||D(h,eI("'__tostring' must return a string"));else switch(eT(h,w)){case ty:tD(h,w)?tQ(h,eF,ep(h,w)):tQ(h,eB,em(h,w));break;case tv:t4(h,w);break;case tc:t0(h,el(h,w)?"true":"false");break;case td:t0(h,"nil");break;default:{let q=Bt(h,w,eU),tr=q===tv?eb(h,-1):fe(h,w);tQ(h,eI("%s: %p"),tr,ev(h,w)),q!==td&&en(h,-2)}}return eg(h,-1)},h.exports.luaL_traceback=function(h,w,q,tr){let tn=new tT,ti=tU(h),to=function(h){let w=new tT,q=1,tr=1;for(;tk(h,tr,w);)q=tr,tr*=2;for(;q<tr;){let tn=Math.floor((q+tr)/2);tk(h,tn,w)?q=tn+1:tr=tn}return tr-1}(w),ts=to-tr>21?10:-1;for(q&&tQ(h,eI(`%s
`),q),X(h,10,null),t0(h,"stack traceback:");tk(w,tr++,tn);)0==ts--?(t0(h,`
	...`),tr=to-11+1):(tN(w,eI("Slnt",!0),tn),tQ(h,eI(`
	%s:`),tn.short_src),tn.currentline>0&&t0(h,`${tn.currentline}:`),t0(h," in "),Wt(h,tn),tn.istailcall&&t0(h,`
	(...tail calls..)`),tL(h,tU(h)-ti));tL(h,tU(h)-ti)},h.exports.luaL_typename=fe,h.exports.luaL_unref=function(h,w,q){q>=0&&(w=tE(h,w),t7(h,w,0),er(h,w,q),t$(h,q),er(h,w,0))},h.exports.luaL_where=jt,h.exports.lua_writestringerror=function(){for(let h=0;h<arguments.length;h++){let w=arguments[h];do{let h=/([^\n]*)\n?([\d\D]*)/.exec(w);console.error(h[1]),w=h[2]}while(""!==w)}}},function(h,w,q){let{LUA_HOOKCALL:tr,LUA_HOOKRET:tn,LUA_HOOKTAILCALL:ti,LUA_MASKCALL:to,LUA_MASKLINE:ts,LUA_MASKRET:tu,LUA_MINSTACK:tl,LUA_MULTRET:tc,LUA_SIGNATURE:tp,constant_types:{LUA_TCCL:td,LUA_TLCF:tm,LUA_TLCL:ty,LUA_TNIL:tv},thread_status:{LUA_ERRMEM:tb,LUA_ERRERR:tx,LUA_ERRRUN:tT,LUA_ERRSYNTAX:tE,LUA_OK:tA,LUA_YIELD:tO},lua_Debug:tw,luastring_indexOf:tL,to_luastring:tS}=q(1),tI=q(18),tP=q(11),tR=q(13),{api_check:tN,lua_assert:tM,LUAI_MAXCCALLS:tk}=q(4),tU=q(6),tC=q(16),tD=q(23),tF=q(12),{luaS_newliteral:tB}=q(10),tj=q(14),{LUAI_MAXSTACK:tG}=q(3),tV=q(36),tX=q(15),{MBuffer:tH}=q(19),qt=function(h,w){if(h.top<w)for(;h.top<w;)h.stack[h.top++]=new tU.TValue(tv,null);else for(;h.top>w;)delete h.stack[--h.top]},Ct=function(h,w,q){let tr=h.top;for(;h.top<q+1;)h.stack[h.top++]=new tU.TValue(tv,null);switch(w){case tb:tU.setsvalue2s(h,q,tB(h,"not enough memory"));break;case tx:tU.setsvalue2s(h,q,tB(h,"error in error handling"));break;default:tU.setobjs2s(h,q,tr-1)}for(;h.top>q+1;)delete h.stack[--h.top]},tz=tG+200,Jt=function(h,w){tM(w<=tG||w==tz),tM(h.stack_last==h.stack.length-tF.EXTRA_STACK),h.stack.length=w,h.stack_last=w-tF.EXTRA_STACK},J=function(h,w){let q=h.stack.length;if(q>tG)ht(h,tx);else{let tr=h.top+w+tF.EXTRA_STACK,tn=2*q;tn>tG&&(tn=tG),tn<tr&&(tn=tr),tn>tG?(Jt(h,tz),tP.luaG_runerror(h,tS("stack overflow",!0))):Jt(h,tn)}},Z=function(h,w){h.stack_last-h.top<=w&&J(h,w)},xt=function(h){let w=function(h){let w=h.top;for(let q=h.ci;null!==q;q=q.previous)w<q.top&&(w=q.top);return tM(w<=h.stack_last),w+1}(h),q=w+Math.floor(w/8)+2*tF.EXTRA_STACK;q>tG&&(q=tG),h.stack.length>tG&&tF.luaE_freeCI(h),w<=tG-tF.EXTRA_STACK&&q<h.stack.length&&Jt(h,q)},rt=function(h,w,q){let tn=h.stack[w];switch(tn.type){case td:case tm:{let ti=tn.type===td?tn.value.f:tn.value;Z(h,tl);let ts=tF.luaE_extendCI(h);ts.funcOff=w,ts.nresults=q,ts.func=tn,ts.top=h.top+tl,tM(ts.top<=h.stack_last),ts.callstatus=0,h.hookmask&to&&Zt(h,tr,-1);let tu=ti(h);if("number"!=typeof tu||tu<0||(0|tu)!==tu)throw Error("invalid return value from JS function (expected integer)");return tI.api_checknelems(h,tu),It(h,ts,h.top-tu,tu),!0}case ty:{let tr,ti=tn.value.p,ts=h.top-w-1,tu=ti.maxstacksize;if(Z(h,tu),ti.is_vararg)tr=et(h,ti,ts);else{for(;ts<ti.numparams;ts++)h.stack[h.top++]=new tU.TValue(tv,null);tr=w+1}let tl=tF.luaE_extendCI(h);return tl.funcOff=w,tl.nresults=q,tl.func=tn,tl.l_base=tr,tl.top=tr+tu,qt(h,tl.top),tl.l_code=ti.code,tl.l_savedpc=0,tl.callstatus=tF.CIST_LUA,h.hookmask&to&&Ut(h,tl),!1}default:return Z(h,1),Et(h,w,tn),rt(h,w,q)}},It=function(h,w,q,tr){let ti=w.nresults;h.hookmask&(tu|ts)&&(h.hookmask&tu&&Zt(h,tn,-1),h.oldpc=w.previous.l_savedpc);let to=w.funcOff;return h.ci=w.previous,h.ci.next=null,ee(h,q,to,tr,ti)},ee=function(h,w,q,tr,tn){switch(tn){case 0:break;case 1:0===tr?h.stack[q].setnilvalue():tU.setobjs2s(h,q,w);break;case tc:for(let tn=0;tn<tr;tn++)tU.setobjs2s(h,q+tn,w+tn);for(let w=h.top;w>=q+tr;w--)delete h.stack[w];return h.top=q+tr,!1;default:{let ti;if(tn<=tr)for(ti=0;ti<tn;ti++)tU.setobjs2s(h,q+ti,w+ti);else{for(ti=0;ti<tr;ti++)tU.setobjs2s(h,q+ti,w+ti);for(;ti<tn;ti++)q+ti>=h.top?h.stack[q+ti]=new tU.TValue(tv,null):h.stack[q+ti].setnilvalue()}}}let ti=q+tn;for(let w=h.top;w>=ti;w--)delete h.stack[w];return h.top=ti,!0},Zt=function(h,w,q){let tr=h.hook;if(tr&&h.allowhook){let tn=h.ci,ti=h.top,to=tn.top,ts=new tw;ts.event=w,ts.currentline=q,ts.i_ci=tn,Z(h,tl),tn.top=h.top+tl,tM(tn.top<=h.stack_last),h.allowhook=0,tn.callstatus|=tF.CIST_HOOKED,tr(h,ts),tM(!h.allowhook),h.allowhook=1,tn.top=to,qt(h,ti),tn.callstatus&=~tF.CIST_HOOKED}},Ut=function(h,w){let q=tr;w.l_savedpc++,w.previous.callstatus&tF.CIST_LUA&&w.previous.l_code[w.previous.l_savedpc-1].opcode==tC.OpCodesI.OP_TAILCALL&&(w.callstatus|=tF.CIST_TAIL,q=ti),Zt(h,q,-1),w.l_savedpc--},et=function(h,w,q){let tr,tn=w.numparams,ti=h.top-q,to=h.top;for(tr=0;tr<tn&&tr<q;tr++)tU.pushobj2s(h,h.stack[ti+tr]),h.stack[ti+tr].setnilvalue();for(;tr<tn;tr++)h.stack[h.top++]=new tU.TValue(tv,null);return to},Et=function(h,w,q){let tr=tj.luaT_gettmbyobj(h,q,tj.TMS.TM_CALL);tr.ttisfunction(tr)||tP.luaG_typeerror(h,q,tS("call",!0)),tU.pushobj2s(h,h.stack[h.top-1]);for(let q=h.top-2;q>w;q--)tU.setobjs2s(h,q,q-1);tU.setobj2s(h,w,tr)},k=function(h,w,q){++h.nCcalls>=tk&&(h.nCcalls===tk?tP.luaG_runerror(h,tS("JS stack overflow",!0)):h.nCcalls>=tk+(tk>>3)&&ht(h,tx)),rt(h,w,q)||tX.luaV_execute(h),h.nCcalls--},ht=function(h,w){if(h.errorJmp)throw h.errorJmp.status=w,h.errorJmp;{let q=h.l_G;if(h.status=w,!q.mainthread.errorJmp){let tr=q.panic;throw tr&&(Ct(h,w,h.top),h.ci.top<h.top&&(h.ci.top=h.top),tr(h)),Error(`Aborted ${w}`)}q.mainthread.stack[q.mainthread.top++]=h.stack[h.top-1],ht(q.mainthread,w)}},St=function(h,w,q){let tr=h.nCcalls,tn={status:tA,previous:h.errorJmp};h.errorJmp=tn;try{w(h,q)}catch(w){if(tn.status===tA){let q=h.l_G.atnativeerror;if(q)try{if(tn.status=tA,tI.lua_pushcfunction(h,q),tI.lua_pushlightuserdata(h,w),Re(h,h.top-2,1),0!==h.errfunc){let w=h.errfunc;tU.pushobj2s(h,h.stack[h.top-1]),tU.setobjs2s(h,h.top-2,w),Re(h,h.top-2,1)}tn.status=tT}catch{tn.status===tA&&(tn.status=-1)}else tn.status=-1}}return h.errorJmp=tn.previous,h.nCcalls=tr,tn.status},F=function(h,w){let q=h.ci;tM(null!==q.c_k&&0===h.nny),tM(q.callstatus&tF.CIST_YPCALL||w===tO),q.callstatus&tF.CIST_YPCALL&&(q.callstatus&=~tF.CIST_YPCALL,h.errfunc=q.c_old_errfunc),q.nresults===tc&&h.ci.top<h.top&&(h.ci.top=h.top);let tr=(0,q.c_k)(h,w,q.c_ctx);tI.api_checknelems(h,tr),It(h,q,h.top-tr,tr)},_t=function(h,w){for(null!==w&&F(h,w);h.ci!==h.base_ci;)h.ci.callstatus&tF.CIST_LUA?(tX.luaV_finishOp(h),tX.luaV_execute(h)):F(h,tO)},wt=function(h,w){let q=function(h){for(let w=h.ci;null!==w;w=w.previous)if(w.callstatus&tF.CIST_YPCALL)return w;return null}(h);if(null===q)return 0;let tr=q.extra;return tR.luaF_close(h,tr),Ct(h,w,tr),h.ci=q,h.allowhook=q.callstatus&tF.CIST_OAH,h.nny=0,xt(h),h.errfunc=q.c_old_errfunc,1},ue=function(h,w,q){let tr=tB(h,w);if(0===q)tU.pushsvalue2s(h,tr),tN(h,h.top<=h.ci.top,"stack overflow");else{for(let w=1;w<q;w++)delete h.stack[--h.top];tU.setsvalue2s(h,h.top-1,tr)}return tT},le=function(h,w){let q=h.top-w,tr=h.ci;h.status===tA?rt(h,q-1,tc)||tX.luaV_execute(h):(tM(h.status===tO),h.status=tA,tr.funcOff=tr.extra,tr.func=h.stack[tr.funcOff],tr.callstatus&tF.CIST_LUA?tX.luaV_execute(h):(null!==tr.c_k&&(w=tr.c_k(h,tO,tr.c_ctx),tI.api_checknelems(h,w),q=h.top-w),It(h,tr,q,w)),_t(h,null))},ce=function(h,w,q,tr){let tn=h.ci;return tI.api_checknelems(h,w),h.nny>0&&(h!==h.l_G.mainthread?tP.luaG_runerror(h,tS("attempt to yield across a JS-call boundary",!0)):tP.luaG_runerror(h,tS("attempt to yield from outside a coroutine",!0))),h.status=tO,tn.extra=tn.funcOff,tn.callstatus&tF.CIST_LUA?tN(h,null===tr,"hooks cannot continue after yielding"):(tn.c_k=tr,null!==tr&&(tn.c_ctx=q),tn.funcOff=h.top-w-1,tn.func=h.stack[tn.funcOff],ht(h,tO)),tM(tn.callstatus&tF.CIST_HOOKED),0},Le=function(h,w,q,tr,tn){let ti=h.ci,to=h.allowhook,ts=h.nny,tu=h.errfunc;h.errfunc=tn;let tl=St(h,w,q);return tl!==tA&&(tR.luaF_close(h,tr),Ct(h,tl,tr),h.ci=ti,h.allowhook=to,h.nny=ts,xt(h)),h.errfunc=tu,tl},Re=function(h,w,q){h.nny++,k(h,w,q),h.nny--},Pe=function(h,w,q){w&&-1===tL(w,q[0])&&(tU.luaO_pushfstring(h,tS("attempt to load a %s chunk (mode is '%s')"),q,w),ht(h,tE))},Fe=function(h,w){let q,tr=w.z.zgetc();tr===tp[0]?(Pe(h,w.mode,tS("binary",!0)),q=tV.luaU_undump(h,w.z,w.name)):(Pe(h,w.mode,tS("text",!0)),q=tD.luaY_parser(h,w.z,w.buff,w.dyd,w.name,tr)),tM(q.nupvalues===q.p.upvalues.length),tR.luaF_initupvals(h,q)};h.exports.adjust_top=qt,h.exports.luaD_call=k,h.exports.luaD_callnoyield=Re,h.exports.luaD_checkstack=Z,h.exports.luaD_growstack=J,h.exports.luaD_hook=Zt,h.exports.luaD_inctop=function(h){Z(h,1),h.stack[h.top++]=new tU.TValue(tv,null)},h.exports.luaD_pcall=Le,h.exports.luaD_poscall=It,h.exports.luaD_precall=rt,h.exports.luaD_protectedparser=function(h,w,q,tr){let tn=new class{constructor(h,w,q){this.z=h,this.buff=new tH,this.dyd=new tD.Dyndata,this.mode=q,this.name=w}}(w,q,tr);h.nny++;let ti=Le(h,Fe,tn,h.top,h.errfunc);return h.nny--,ti},h.exports.luaD_rawrunprotected=St,h.exports.luaD_reallocstack=Jt,h.exports.luaD_throw=ht,h.exports.lua_isyieldable=function(h){return 0===h.nny},h.exports.lua_resume=function(h,w,q){let tr=h.nny;if(h.status===tA){if(h.ci!==h.base_ci)return ue(h,"cannot resume non-suspended coroutine",q)}else if(h.status!==tO)return ue(h,"cannot resume dead coroutine",q);if(h.nCcalls=w?w.nCcalls+1:1,h.nCcalls>=tk)return ue(h,"JS stack overflow",q);h.nny=0,tI.api_checknelems(h,h.status===tA?q+1:q);let tn=St(h,le,q);if(-1===tn)tn=tT;else{for(;tn>tO&&wt(h,tn);)tn=St(h,_t,tn);tn>tO?(h.status=tn,Ct(h,tn,h.top),h.ci.top=h.top):tM(tn===h.status)}return h.nny=tr,h.nCcalls--,tM(h.nCcalls===(w?w.nCcalls:0)),tn},h.exports.lua_yield=function(h,w){ce(h,w,0,null)},h.exports.lua_yieldk=ce},function(h,w,q){let{constant_types:{LUA_TBOOLEAN:tr,LUA_TCCL:tn,LUA_TLCF:ti,LUA_TLCL:to,LUA_TLIGHTUSERDATA:ts,LUA_TLNGSTR:tu,LUA_TNIL:tl,LUA_TNUMFLT:tc,LUA_TNUMINT:tp,LUA_TSHRSTR:td,LUA_TTABLE:tm,LUA_TTHREAD:ty,LUA_TUSERDATA:tv},to_luastring:tb}=q(1),{lua_assert:tx}=q(4),tT=q(11),tE=q(6),{luaS_hashlongstr:tA,TString:tO}=q(10),tw=q(12),tL=new WeakMap,G=function(h){let w=tL.get(h);return w||(w={},tL.set(h,w)),w},P=function(h,w){switch(w.type){case tl:return tT.luaG_runerror(h,tb("table index is nil",!0));case tc:if(isNaN(w.value))return tT.luaG_runerror(h,tb("table index is NaN",!0));case tp:case tr:case tm:case to:case ti:case tn:case tv:case ty:return w.value;case td:case tu:return tA(w.tsvalue());case ts:{let q=w.value;switch(typeof q){case"string":return"*"+q;case"number":return"#"+q;case"boolean":return q?"?true":"?false";case"function":return G(q);case"object":if(q instanceof tw.lua_State&&q.l_G===h.l_G||q instanceof M||q instanceof tE.Udata||q instanceof tE.LClosure||q instanceof tE.CClosure)return G(q);default:return q}}default:throw Error("unknown key type: "+w.type)}};let M=class M{constructor(h){this.id=h.l_G.id_counter++,this.strong=new Map,this.dead_strong=new Map,this.dead_weak=void 0,this.f=void 0,this.l=void 0,this.metatable=null,this.flags=-1}};let W=function(h,w,q,tr){h.dead_strong.clear(),h.dead_weak=void 0;let tn=null,ti={key:q,value:tr,p:tn=h.l,n:void 0};h.f||(h.f=ti),tn&&(tn.n=ti),h.strong.set(w,ti),h.l=ti},ft=function(h,w){let q=h.strong.get(w);if(q){q.key.setdeadvalue(),q.value=void 0;let tr=q.n,tn=q.p;q.p=void 0,tn&&(tn.n=tr),tr&&(tr.p=tn),h.f===q&&(h.f=tr),h.l===q&&(h.l=tn),h.strong.delete(w),("object"==typeof w?null!==w:"function"==typeof w)?(h.dead_weak||(h.dead_weak=new WeakMap),h.dead_weak.set(w,q)):h.dead_strong.set(w,q)}},gt=function(h,w){let q=h.strong.get(w);return q?q.value:tE.luaO_nilobject},Ot=function(h,w){return tx("number"==typeof w&&(0|w)===w),gt(h,w)};h.exports.invalidateTMcache=function(h){h.flags=0},h.exports.luaH_get=function(h,w,q){return tx(q instanceof tE.TValue),q.ttisnil()||q.ttisfloat()&&isNaN(q.value)?tE.luaO_nilobject:gt(w,P(h,q))},h.exports.luaH_getint=Ot,h.exports.luaH_getn=function(h){let w=0,q=h.strong.size+1;for(;q-w>1;){let tr=Math.floor((w+q)/2);Ot(h,tr).ttisnil()?q=tr:w=tr}return w},h.exports.luaH_getstr=function(h,w){return tx(w instanceof tO),gt(h,tA(w))},h.exports.luaH_setfrom=function(h,w,q,tr){tx(q instanceof tE.TValue);let tn=P(h,q);if(tr.ttisnil())return void ft(w,tn);let ti=w.strong.get(tn);if(ti)ti.value.setfrom(tr);else{let h=q.value;W(w,tn,q.ttisfloat()&&(0|h)===h?new tE.TValue(tp,h):new tE.TValue(q.type,h),new tE.TValue(tr.type,tr.value))}},h.exports.luaH_setint=function(h,w,q){if(tx("number"==typeof w&&(0|w)===w&&q instanceof tE.TValue),q.ttisnil())return void ft(h,w);let tr=h.strong.get(w);if(tr)tr.value.setfrom(q);else{let tr=new tE.TValue(tp,w);W(h,w,tr,new tE.TValue(q.type,q.value))}},h.exports.luaH_new=function(h){return new M(h)},h.exports.luaH_next=function(h,w,q){let tr,tn=h.stack[q];if(tn.type===tl){if(!(tr=w.f))return!1}else{let q=P(h,tn);if(tr=w.strong.get(q)){if(!(tr=tr.n))return!1}else{if(!(tr=w.dead_weak&&w.dead_weak.get(q)||w.dead_strong.get(q)))return tT.luaG_runerror(h,tb("invalid key to 'next'"));do if(!(tr=tr.n))return!1;while(tr.key.ttisdeadkey())}}return tE.setobj2s(h,q,tr.key),tE.setobj2s(h,q+1,tr.value),!0},h.exports.Table=M},function(h,w,q){let{is_luastring:tr,luastring_eq:tn,luastring_from:ti,to_luastring:to}=q(1),{lua_assert:ts}=q(4);let u=class u{constructor(h,w){this.hash=null,this.realstring=w}getstr(){return this.realstring}tsslen(){return this.realstring.length}};let l=function(h){ts(tr(h));let w=h.length,q="|";for(let tr=0;tr<w;tr++)q+=h[tr].toString(16);return q},f=function(h,w){return ts(w instanceof Uint8Array),new u(h,w)};h.exports.luaS_eqlngstr=function(h,w){return ts(h instanceof u),ts(w instanceof u),h==w||tn(h.realstring,w.realstring)},h.exports.luaS_hash=l,h.exports.luaS_hashlongstr=function(h){return ts(h instanceof u),null===h.hash&&(h.hash=l(h.getstr())),h.hash},h.exports.luaS_bless=f,h.exports.luaS_new=function(h,w){return f(h,ti(w))},h.exports.luaS_newliteral=function(h,w){return f(h,to(w))},h.exports.TString=u},function(h,w,q){let{LUA_HOOKCOUNT:tr,LUA_HOOKLINE:tn,LUA_MASKCOUNT:ti,LUA_MASKLINE:to,constant_types:{LUA_TBOOLEAN:ts,LUA_TNIL:tu,LUA_TTABLE:tl},thread_status:{LUA_ERRRUN:tc,LUA_YIELD:tp},from_userstring:td,luastring_eq:tm,luastring_indexOf:ty,to_luastring:tv}=q(1),{api_check:tb,lua_assert:tx}=q(4),{LUA_IDSIZE:tT}=q(3),tE=q(18),tA=q(8),tO=q(13),tw=q(20),tL=q(6),tS=q(16),tI=q(12),tP=q(9),tR=q(14),tN=q(15),gt=function(h){return tx(h.callstatus&tI.CIST_LUA),h.l_savedpc-1},Ot=function(h){return 0!==h.func.value.p.lineinfo.length?h.func.value.p.lineinfo[gt(h)]:-1},H=function(h){if(h.status===tp){let w=h.ci,q=w.funcOff;w.func=h.stack[w.extra],w.funcOff=w.extra,w.extra=q}},$=function(h,w){tx(w<h.upvalues.length);let q=h.upvalues[w].name;return null===q?tv("?",!0):q.getstr()},lt=function(h,w,q){let tr,tn=null;if(w.callstatus&tI.CIST_LUA){if(q<0){var ti;let h;return ti=-q,h=w.func.value.p.numparams,ti>=w.l_base-w.funcOff-h?null:{pos:w.funcOff+h+ti,name:tv("(*vararg)",!0)}}tr=w.l_base,tn=tO.luaF_getlocalname(w.func.value.p,q,gt(w))}else tr=w.funcOff+1;if(null===tn){if(!((w===h.ci?h.top:w.next.funcOff)-tr>=q&&q>0))return null;tn=tv("(*temporary)",!0)}return{pos:tr+(q-1),name:tn}},dt=function(h,w){if(null===w||w instanceof tL.CClosure)h.source=tv("=[JS]",!0),h.linedefined=-1,h.lastlinedefined=-1,h.what=tv("J",!0);else{let q=w.p;h.source=q.source?q.source.getstr():tv("=?",!0),h.linedefined=q.linedefined,h.lastlinedefined=q.lastlinedefined,h.what=0===h.linedefined?tv("main",!0):tv("Lua",!0)}h.short_src=tL.luaO_chunkid(h.source,tT)},Vt=function(h,w){let q={name:null,funcname:null};return null===w?null:w.callstatus&tI.CIST_FIN?(q.name=tv("__gc",!0),q.funcname=tv("metamethod",!0),q):!(w.callstatus&tI.CIST_TAIL)&&w.previous.callstatus&tI.CIST_LUA?pt(h,w.previous):null},S=function(h,w,q){let tr={name:null,funcname:null};if(tS.ISK(q)){let w=h.k[tS.INDEXK(q)];if(w.ttisstring())return tr.name=w.svalue(),tr}else{let tr=B(h,w,q);if(tr&&99===tr.funcname[0])return tr}return tr.name=tv("?",!0),tr},U=function(h,w){return h<w?-1:h},B=function(h,w,q){let tr={name:tO.luaF_getlocalname(h,q+1,w),funcname:null};if(tr.name)return tr.funcname=tv("local",!0),tr;let tn=function(h,w,q){let tr=-1,tn=0,ti=tS.OpCodesI;for(let to=0;to<w;to++){let ts=h.code[to],tu=ts.A;switch(ts.opcode){case ti.OP_LOADNIL:{let h=ts.B;tu<=q&&q<=tu+h&&(tr=U(to,tn));break}case ti.OP_TFORCALL:q>=tu+2&&(tr=U(to,tn));break;case ti.OP_CALL:case ti.OP_TAILCALL:q>=tu&&(tr=U(to,tn));break;case ti.OP_JMP:{let h=to+1+ts.sBx;to<h&&h<=w&&h>tn&&(tn=h);break}default:tS.testAMode(ts.opcode)&&q===tu&&(tr=U(to,tn))}}return tr}(h,w,q),ti=tS.OpCodesI;if(-1!==tn){let w=h.code[tn];switch(w.opcode){case ti.OP_MOVE:{let q=w.B;if(q<w.A)return B(h,tn,q);break}case ti.OP_GETTABUP:case ti.OP_GETTABLE:{let q=w.C,to=w.B,ts=w.opcode===ti.OP_GETTABLE?tO.luaF_getlocalname(h,to+1,tn):$(h,to);return tr.name=S(h,tn,q).name,tr.funcname=ts&&tm(ts,tw.LUA_ENV)?tv("global",!0):tv("field",!0),tr}case ti.OP_GETUPVAL:return tr.name=$(h,w.B),tr.funcname=tv("upvalue",!0),tr;case ti.OP_LOADK:case ti.OP_LOADKX:{let q=w.opcode===ti.OP_LOADK?w.Bx:h.code[tn+1].Ax;if(h.k[q].ttisstring())return tr.name=h.k[q].svalue(),tr.funcname=tv("constant",!0),tr;break}case ti.OP_SELF:{let q=w.C;return tr.name=S(h,tn,q).name,tr.funcname=tv("method",!0),tr}}}return null},pt=function(h,w){let q={name:null,funcname:null},tr=0,tn=w.func.value.p,ti=gt(w),to=tn.code[ti],ts=tS.OpCodesI;if(w.callstatus&tI.CIST_HOOKED)return q.name=tv("?",!0),q.funcname=tv("hook",!0),q;switch(to.opcode){case ts.OP_CALL:case ts.OP_TAILCALL:return B(tn,ti,to.A);case ts.OP_TFORCALL:return q.name=tv("for iterator",!0),q.funcname=tv("for iterator",!0),q;case ts.OP_SELF:case ts.OP_GETTABUP:case ts.OP_GETTABLE:tr=tR.TMS.TM_INDEX;break;case ts.OP_SETTABUP:case ts.OP_SETTABLE:tr=tR.TMS.TM_NEWINDEX;break;case ts.OP_ADD:tr=tR.TMS.TM_ADD;break;case ts.OP_SUB:tr=tR.TMS.TM_SUB;break;case ts.OP_MUL:tr=tR.TMS.TM_MUL;break;case ts.OP_MOD:tr=tR.TMS.TM_MOD;break;case ts.OP_POW:tr=tR.TMS.TM_POW;break;case ts.OP_DIV:tr=tR.TMS.TM_DIV;break;case ts.OP_IDIV:tr=tR.TMS.TM_IDIV;break;case ts.OP_BAND:tr=tR.TMS.TM_BAND;break;case ts.OP_BOR:tr=tR.TMS.TM_BOR;break;case ts.OP_BXOR:tr=tR.TMS.TM_BXOR;break;case ts.OP_SHL:tr=tR.TMS.TM_SHL;break;case ts.OP_SHR:tr=tR.TMS.TM_SHR;break;case ts.OP_UNM:tr=tR.TMS.TM_UNM;break;case ts.OP_BNOT:tr=tR.TMS.TM_BNOT;break;case ts.OP_LEN:tr=tR.TMS.TM_LEN;break;case ts.OP_CONCAT:tr=tR.TMS.TM_CONCAT;break;case ts.OP_EQ:tr=tR.TMS.TM_EQ;break;case ts.OP_LT:tr=tR.TMS.TM_LT;break;case ts.OP_LE:tr=tR.TMS.TM_LE;break;default:return null}return q.name=h.l_G.tmname[tr].getstr(),q.funcname=tv("metamethod",!0),q},ut=function(h,w){let q=h.ci,tr=null;if(q.callstatus&tI.CIST_LUA){tr=function(h,w,q){let tr=w.func.value;for(let h=0;h<tr.nupvalues;h++)if(tr.upvals[h]===q)return{name:$(tr.p,h),funcname:tv("upvalue",!0)};return null}(0,q,w);let tn=function(h,w,q){for(let tr=w.l_base;tr<w.top;tr++)if(h.stack[tr]===q)return tr;return!1}(h,q,w);!tr&&tn&&(tr=B(q.func.value.p,gt(q),tn-q.l_base))}return tr?tL.luaO_pushfstring(h,tv(" (%s '%s')",!0),tr.funcname,tr.name):tv("",!0)},qt=function(h,w,q){let tr=tR.luaT_objtypename(h,w);kt(h,tv("attempt to %s a %s value%s",!0),q,tr,ut(h,w))},Ct=function(h,w,q,tr){let tn;return tn=q?tL.luaO_chunkid(q.getstr(),tT):tv("?",!0),tL.luaO_pushfstring(h,tv("%s:%d: %s",!0),tn,tr,w)},kt=function(h,w,...q){let tr=h.ci,tn=tL.luaO_pushvfstring(h,w,q);tr.callstatus&tI.CIST_LUA&&Ct(h,tn,tr.func.value.p.source,Ot(tr)),Jt(h)},Jt=function(h){if(0!==h.errfunc){let w=h.errfunc;tL.pushobj2s(h,h.stack[h.top-1]),tL.setobjs2s(h,h.top-2,w),tA.luaD_callnoyield(h,h.top-2,1)}tA.luaD_throw(h,tc)};h.exports.luaG_addinfo=Ct,h.exports.luaG_concaterror=function(h,w,q){(w.ttisstring()||tN.cvt2str(w))&&(w=q),qt(h,w,tv("concatenate",!0))},h.exports.luaG_errormsg=Jt,h.exports.luaG_opinterror=function(h,w,q,tr){!1===tN.tonumber(w)&&(q=w),qt(h,q,tr)},h.exports.luaG_ordererror=function(h,w,q){let tr=tR.luaT_objtypename(h,w),tn=tR.luaT_objtypename(h,q);tm(tr,tn)?kt(h,tv("attempt to compare two %s values",!0),tr):kt(h,tv("attempt to compare %s with %s",!0),tr,tn)},h.exports.luaG_runerror=kt,h.exports.luaG_tointerror=function(h,w,q){!1===tN.tointeger(w)&&(q=w),kt(h,tv("number%s has no integer representation",!0),ut(h,q))},h.exports.luaG_traceexec=function(h){let w=h.ci,q=h.hookmask,ts=0==--h.hookcount&&q&ti;if(ts)h.hookcount=h.basehookcount;else if(!(q&to))return;if(w.callstatus&tI.CIST_HOOKYIELD)w.callstatus&=~tI.CIST_HOOKYIELD;else{if(ts&&tA.luaD_hook(h,tr,-1),q&to){let q=w.func.value.p,tr=w.l_savedpc-1,ti=0!==q.lineinfo.length?q.lineinfo[tr]:-1;(0===tr||w.l_savedpc<=h.oldpc||ti!==(0!==q.lineinfo.length?q.lineinfo[h.oldpc-1]:-1))&&tA.luaD_hook(h,tn,ti)}h.oldpc=w.l_savedpc,h.status===tp&&(ts&&(h.hookcount=1),w.l_savedpc--,w.callstatus|=tI.CIST_HOOKYIELD,w.funcOff=h.top-1,w.func=h.stack[w.funcOff],tA.luaD_throw(h,tp))}},h.exports.luaG_typeerror=qt,h.exports.lua_gethook=function(h){return h.hook},h.exports.lua_gethookcount=function(h){return h.basehookcount},h.exports.lua_gethookmask=function(h){return h.hookmask},h.exports.lua_getinfo=function(h,w,q){let tr,tn,ti,to;return w=td(w),H(h),62===w[0]?(ti=null,to=h.stack[h.top-1],tb(h,to.ttisfunction(),"function expected"),w=w.subarray(1),h.top--):(to=(ti=q.i_ci).func,tx(ti.func.ttisfunction())),tr=function(h,w,q,tr,tn){let ti=1;for(;w.length>0;w=w.subarray(1))switch(w[0]){case 83:dt(q,tr);break;case 108:q.currentline=tn&&tn.callstatus&tI.CIST_LUA?Ot(tn):-1;break;case 117:q.nups=null===tr?0:tr.nupvalues,null===tr||tr instanceof tL.CClosure?(q.isvararg=!0,q.nparams=0):(q.isvararg=tr.p.is_vararg,q.nparams=tr.p.numparams);break;case 116:q.istailcall=tn?tn.callstatus&tI.CIST_TAIL:0;break;case 110:{let w=Vt(h,tn);null===w?(q.namewhat=tv("",!0),q.name=null):(q.namewhat=w.funcname,q.name=w.name);break}case 76:case 102:break;default:ti=0}return ti}(h,w,q,tn=to.ttisclosure()?to.value:null,ti),ty(w,102)>=0&&(tL.pushobj2s(h,to),tb(h,h.top<=h.ci.top,"stack overflow")),H(h),ty(w,76)>=0&&function(h,w){if(null===w||w instanceof tL.CClosure)h.stack[h.top]=new tL.TValue(tu,null),tE.api_incr_top(h);else{let q=w.p.lineinfo,tr=tP.luaH_new(h);h.stack[h.top]=new tL.TValue(tl,tr),tE.api_incr_top(h);let tn=new tL.TValue(ts,!0);for(let h=0;h<q.length;h++)tP.luaH_setint(tr,q[h],tn)}}(h,tn),tr},h.exports.lua_getlocal=function(h,w,q){let tr;if(H(h),null===w)tr=h.stack[h.top-1].ttisLclosure()?tO.luaF_getlocalname(h.stack[h.top-1].value.p,q,0):null;else{let tn=lt(h,w.i_ci,q);tn?(tr=tn.name,tL.pushobj2s(h,h.stack[tn.pos]),tb(h,h.top<=h.ci.top,"stack overflow")):tr=null}return H(h),tr},h.exports.lua_getstack=function(h,w,q){let tr,tn;if(w<0)return 0;for(tr=h.ci;w>0&&tr!==h.base_ci;tr=tr.previous)w--;return 0===w&&tr!==h.base_ci?(tn=1,q.i_ci=tr):tn=0,tn},h.exports.lua_sethook=function(h,w,q,tr){null!==w&&0!==q||(q=0,w=null),h.ci.callstatus&tI.CIST_LUA&&(h.oldpc=h.ci.l_savedpc),h.hook=w,h.basehookcount=tr,h.hookcount=h.basehookcount,h.hookmask=q},h.exports.lua_setlocal=function(h,w,q){let tr;H(h);let tn=lt(h,w.i_ci,q);return tn?(tr=tn.name,tL.setobjs2s(h,tn.pos,h.top-1),delete h.stack[--h.top]):tr=null,H(h),tr}},function(h,w,q){let{LUA_MINSTACK:tr,LUA_RIDX_GLOBALS:tn,LUA_RIDX_MAINTHREAD:ti,constant_types:{LUA_NUMTAGS:to,LUA_TNIL:ts,LUA_TTABLE:tu,LUA_TTHREAD:tl},thread_status:{LUA_OK:tc}}=q(1),tp=q(6),td=q(8),tm=q(18),ty=q(9),tv=q(14),tb=2*tr;let O=class O{constructor(){this.func=null,this.funcOff=NaN,this.top=NaN,this.previous=null,this.next=null,this.l_base=NaN,this.l_code=null,this.l_savedpc=NaN,this.c_k=null,this.c_old_errfunc=null,this.c_ctx=null,this.nresults=NaN,this.callstatus=NaN}};let V=class V{constructor(h){this.id=h.id_counter++,this.base_ci=new O,this.top=NaN,this.stack_last=NaN,this.oldpc=NaN,this.l_G=h,this.stack=null,this.ci=null,this.errorJmp=null,this.nCcalls=0,this.hook=null,this.hookmask=0,this.basehookcount=0,this.allowhook=1,this.hookcount=this.basehookcount,this.nny=1,this.status=tc,this.errfunc=0}};let C=function(h){h.ci.next=null},K=function(h,w){h.stack=Array(tb),h.top=0,h.stack_last=tb-5;let q=h.base_ci;q.next=q.previous=null,q.callstatus=0,q.funcOff=h.top,q.func=h.stack[h.top],h.stack[h.top++]=new tp.TValue(ts,null),q.top=h.top+tr,h.ci=q},Y=function(h){h.ci=h.base_ci,C(h),h.stack=null},tt=function(h){let w,q=h.l_G;K(h),w=ty.luaH_new(h),q.l_registry.sethvalue(w),ty.luaH_setint(w,ti,new tp.TValue(tl,h)),ty.luaH_setint(w,tn,new tp.TValue(tu,ty.luaH_new(h))),tv.luaT_init(h),q.version=tm.lua_version(null)};h.exports.lua_State=V,h.exports.CallInfo=O,h.exports.CIST_OAH=1,h.exports.CIST_LUA=2,h.exports.CIST_HOOKED=4,h.exports.CIST_FRESH=8,h.exports.CIST_YPCALL=16,h.exports.CIST_TAIL=32,h.exports.CIST_HOOKYIELD=64,h.exports.CIST_LEQ=128,h.exports.CIST_FIN=256,h.exports.EXTRA_STACK=5,h.exports.lua_close=function(h){Y(h=h.l_G.mainthread)},h.exports.lua_newstate=function(){let h=new class{constructor(){this.id_counter=1,this.ids=new WeakMap,this.mainthread=null,this.l_registry=new tp.TValue(ts,null),this.panic=null,this.atnativeerror=null,this.version=null,this.tmname=Array(tv.TMS.TM_N),this.mt=Array(to)}},w=new V(h);return h.mainthread=w,td.luaD_rawrunprotected(w,tt,null)!==tc&&(w=null),w},h.exports.lua_newthread=function(h){let w=h.l_G,q=new V(w);return h.stack[h.top]=new tp.TValue(tl,q),tm.api_incr_top(h),q.hookmask=h.hookmask,q.basehookcount=h.basehookcount,q.hook=h.hook,q.hookcount=q.basehookcount,K(q),q},h.exports.luaE_extendCI=function(h){let w=new O;return h.ci.next=w,w.previous=h.ci,w.next=null,h.ci=w,w},h.exports.luaE_freeCI=C,h.exports.luaE_freethread=function(h,w){Y(w)}},function(h,w,q){let{constant_types:{LUA_TNIL:tr}}=q(1),tn=q(6);h.exports.MAXUPVAL=255,h.exports.Proto=class{constructor(h){this.id=h.l_G.id_counter++,this.k=[],this.p=[],this.code=[],this.cache=null,this.lineinfo=[],this.upvalues=[],this.numparams=0,this.is_vararg=!1,this.maxstacksize=0,this.locvars=[],this.linedefined=0,this.lastlinedefined=0,this.source=null}},h.exports.luaF_findupval=function(h,w){return h.stack[w]},h.exports.luaF_close=function(h,w){for(let q=w;q<h.top;q++){let w=h.stack[q];h.stack[q]=new tn.TValue(w.type,w.value)}},h.exports.luaF_getlocalname=function(h,w,q){for(let tr=0;tr<h.locvars.length&&h.locvars[tr].startpc<=q;tr++)if(q<h.locvars[tr].endpc&&0==--w)return h.locvars[tr].varname.getstr();return null},h.exports.luaF_initupvals=function(h,w){for(let h=0;h<w.nupvalues;h++)w.upvals[h]=new tn.TValue(tr,null)},h.exports.luaF_newLclosure=function(h,w){return new tn.LClosure(h,w)}},function(h,w,q){let{constant_types:{LUA_TTABLE:tr,LUA_TUSERDATA:tn},to_luastring:ti}=q(1),{lua_assert:to}=q(4),ts=q(6),tu=q(8),tl=q(12),{luaS_bless:tc,luaS_new:tp}=q(10),td=q(9),tm=q(11),ty=q(15),tv=["no value","nil","boolean","userdata","number","string","table","function","userdata","thread","proto"].map(h=>ti(h)),T=function(h){return tv[h+1]},tb={TM_INDEX:0,TM_NEWINDEX:1,TM_GC:2,TM_MODE:3,TM_LEN:4,TM_EQ:5,TM_ADD:6,TM_SUB:7,TM_MUL:8,TM_MOD:9,TM_POW:10,TM_DIV:11,TM_IDIV:12,TM_BAND:13,TM_BOR:14,TM_BXOR:15,TM_SHL:16,TM_SHR:17,TM_UNM:18,TM_BNOT:19,TM_LT:20,TM_LE:21,TM_CONCAT:22,TM_CALL:23,TM_N:24},tx=ti("__name",!0),C=function(h,w,q,tr,tn,ti){let to=h.top;if(ts.pushobj2s(h,w),ts.pushobj2s(h,q),ts.pushobj2s(h,tr),ti||ts.pushobj2s(h,tn),h.ci.callstatus&tl.CIST_LUA?tu.luaD_call(h,to,ti):tu.luaD_callnoyield(h,to,ti),ti){let w=h.stack[h.top-1];delete h.stack[--h.top],tn.setfrom(w)}},K=function(h,w,q,tr,tn){let ti=tt(h,w,tn);return ti.ttisnil()&&(ti=tt(h,q,tn)),!ti.ttisnil()&&(C(h,ti,w,q,tr,1),!0)},Y=function(h,w,q){let tr=td.luaH_getstr(h,q);return to(w<=tb.TM_EQ),tr.ttisnil()?(h.flags|=1<<w,null):tr},tt=function(h,w,q){let ti;switch(w.ttnov()){case tr:case tn:ti=w.value.metatable;break;default:ti=h.l_G.mt[w.ttnov()]}return ti?td.luaH_getstr(ti,h.l_G.tmname[q]):ts.luaO_nilobject};h.exports.fasttm=function(h,w,q){return null===w||w.flags&1<<q?null:Y(w,q,h.l_G.tmname[q])},h.exports.TMS=tb,h.exports.luaT_callTM=C,h.exports.luaT_callbinTM=K,h.exports.luaT_trybinTM=function(h,w,q,tr,tn){if(!K(h,w,q,tr,tn))switch(tn){case tb.TM_CONCAT:return tm.luaG_concaterror(h,w,q);case tb.TM_BAND:case tb.TM_BOR:case tb.TM_BXOR:case tb.TM_SHL:case tb.TM_SHR:case tb.TM_BNOT:{let tr=ty.tonumber(w),tn=ty.tonumber(q);return!1!==tr&&!1!==tn?tm.luaG_tointerror(h,w,q):tm.luaG_opinterror(h,w,q,ti("perform bitwise operation on",!0))}default:return tm.luaG_opinterror(h,w,q,ti("perform arithmetic on",!0))}},h.exports.luaT_callorderTM=function(h,w,q,tr){let tn=new ts.TValue;return K(h,w,q,tn,tr)?!tn.l_isfalse():null},h.exports.luaT_gettm=Y,h.exports.luaT_gettmbyobj=tt,h.exports.luaT_init=function(h){h.l_G.tmname[tb.TM_INDEX]=new tp(h,ti("__index",!0)),h.l_G.tmname[tb.TM_NEWINDEX]=new tp(h,ti("__newindex",!0)),h.l_G.tmname[tb.TM_GC]=new tp(h,ti("__gc",!0)),h.l_G.tmname[tb.TM_MODE]=new tp(h,ti("__mode",!0)),h.l_G.tmname[tb.TM_LEN]=new tp(h,ti("__len",!0)),h.l_G.tmname[tb.TM_EQ]=new tp(h,ti("__eq",!0)),h.l_G.tmname[tb.TM_ADD]=new tp(h,ti("__add",!0)),h.l_G.tmname[tb.TM_SUB]=new tp(h,ti("__sub",!0)),h.l_G.tmname[tb.TM_MUL]=new tp(h,ti("__mul",!0)),h.l_G.tmname[tb.TM_MOD]=new tp(h,ti("__mod",!0)),h.l_G.tmname[tb.TM_POW]=new tp(h,ti("__pow",!0)),h.l_G.tmname[tb.TM_DIV]=new tp(h,ti("__div",!0)),h.l_G.tmname[tb.TM_IDIV]=new tp(h,ti("__idiv",!0)),h.l_G.tmname[tb.TM_BAND]=new tp(h,ti("__band",!0)),h.l_G.tmname[tb.TM_BOR]=new tp(h,ti("__bor",!0)),h.l_G.tmname[tb.TM_BXOR]=new tp(h,ti("__bxor",!0)),h.l_G.tmname[tb.TM_SHL]=new tp(h,ti("__shl",!0)),h.l_G.tmname[tb.TM_SHR]=new tp(h,ti("__shr",!0)),h.l_G.tmname[tb.TM_UNM]=new tp(h,ti("__unm",!0)),h.l_G.tmname[tb.TM_BNOT]=new tp(h,ti("__bnot",!0)),h.l_G.tmname[tb.TM_LT]=new tp(h,ti("__lt",!0)),h.l_G.tmname[tb.TM_LE]=new tp(h,ti("__le",!0)),h.l_G.tmname[tb.TM_CONCAT]=new tp(h,ti("__concat",!0)),h.l_G.tmname[tb.TM_CALL]=new tp(h,ti("__call",!0))},h.exports.luaT_objtypename=function(h,w){let q;if(w.ttistable()&&null!==(q=w.value.metatable)||w.ttisfulluserdata()&&null!==(q=w.value.metatable)){let w=td.luaH_getstr(q,tc(h,tx));if(w.ttisstring())return w.svalue()}return T(w.ttnov())},h.exports.ttypename=T},function(h,w,q){let{LUA_MASKLINE:tr,LUA_MASKCOUNT:tn,LUA_MULTRET:ti,constant_types:{LUA_TBOOLEAN:to,LUA_TLCF:ts,LUA_TLIGHTUSERDATA:tu,LUA_TLNGSTR:tl,LUA_TNIL:tc,LUA_TNUMBER:tp,LUA_TNUMFLT:td,LUA_TNUMINT:tm,LUA_TSHRSTR:ty,LUA_TTABLE:tv,LUA_TUSERDATA:tb},to_luastring:tx}=q(1),{INDEXK:tT,ISK:tE,LFIELDS_PER_FLUSH:tA,OpCodesI:{OP_ADD:tO,OP_BAND:tw,OP_BNOT:tL,OP_BOR:tS,OP_BXOR:tI,OP_CALL:tP,OP_CLOSURE:tR,OP_CONCAT:tN,OP_DIV:tM,OP_EQ:tk,OP_EXTRAARG:tU,OP_FORLOOP:tC,OP_FORPREP:tD,OP_GETTABLE:tF,OP_GETTABUP:tB,OP_GETUPVAL:tj,OP_IDIV:tG,OP_JMP:tV,OP_LE:tX,OP_LEN:tH,OP_LOADBOOL:tz,OP_LOADK:tK,OP_LOADKX:tY,OP_LOADNIL:tW,OP_LT:tq,OP_MOD:tZ,OP_MOVE:tJ,OP_MUL:tQ,OP_NEWTABLE:t$,OP_NOT:t0,OP_POW:t1,OP_RETURN:t2,OP_SELF:t3,OP_SETLIST:t4,OP_SETTABLE:t5,OP_SETTABUP:t6,OP_SETUPVAL:t8,OP_SHL:t7,OP_SHR:t9,OP_SUB:er,OP_TAILCALL:en,OP_TEST:ei,OP_TESTSET:eo,OP_TFORCALL:es,OP_TFORLOOP:eu,OP_UNM:el,OP_VARARG:ep}}=q(16),{LUA_MAXINTEGER:ed,LUA_MININTEGER:e_,lua_numbertointeger:eg}=q(3),{lua_assert:em,luai_nummod:ey}=q(4),ev=q(6),eb=q(13),ex=q(12),{luaS_bless:eT,luaS_eqlngstr:eE,luaS_hashlongstr:eO}=q(10),eL=q(8),eS=q(14),eI=q(9),eP=q(11),p=function(h,w,q){return w+q.A},b=function(h,w,q){return w+q.B},_=function(h,w,q,tr){return tE(tr.B)?q[tT(tr.B)]:h.stack[w+tr.B]},x=function(h,w,q,tr){return tE(tr.C)?q[tT(tr.C)]:h.stack[w+tr.C]},N=function(h,w,q,tr){let tn=q.A;0!==tn&&eb.luaF_close(h,w.l_base+tn-1),w.l_savedpc+=q.sBx+tr},A=function(h,w){N(h,w,w.l_code[w.l_savedpc],1)},Q=function(h,w,q){if(w.ttisnumber()&&q.ttisnumber())return D(w,q)?1:0;if(w.ttisstring()&&q.ttisstring())return 0>it(w.tsvalue(),q.tsvalue())?1:0;{let tr=eS.luaT_callorderTM(h,w,q,eS.TMS.TM_LT);return null===tr&&eP.luaG_ordererror(h,w,q),tr?1:0}},Mt=function(h,w,q){let tr;return w.ttisnumber()&&q.ttisnumber()?bt(w,q)?1:0:w.ttisstring()&&q.ttisstring()?0>=it(w.tsvalue(),q.tsvalue())?1:0:null!==(tr=eS.luaT_callorderTM(h,w,q,eS.TMS.TM_LE))?tr?1:0:(h.ci.callstatus|=ex.CIST_LEQ,tr=eS.luaT_callorderTM(h,q,w,eS.TMS.TM_LT),h.ci.callstatus^=ex.CIST_LEQ,null===tr&&eP.luaG_ordererror(h,w,q),tr?0:1)},Wt=function(h,w,q){let tr;if(w.ttype()!==q.ttype())return w.ttnov()!==q.ttnov()||w.ttnov()!==tp?0:w.value===q.value?1:0;switch(w.ttype()){case tc:return 1;case to:return w.value==q.value?1:0;case tu:case tm:case td:case ts:return w.value===q.value?1:0;case ty:case tl:return eE(w.tsvalue(),q.tsvalue())?1:0;case tb:case tv:if(w.value===q.value)return 1;if(null===h)return 0;null===(tr=eS.fasttm(h,w.value.metatable,eS.TMS.TM_EQ))&&(tr=eS.fasttm(h,q.value.metatable,eS.TMS.TM_EQ));break;default:return w.value===q.value?1:0}if(null===tr)return 0;let tn=new ev.TValue;return eS.luaT_callTM(h,tr,w,q,tn,1),tn.l_isfalse()?0:1},ge=function(h,w){let q=!1,tr=ye(h,w<0?2:1);if(!1===tr){let tn=jt(h);if(!1===tn)return!1;0<tn?(tr=ed,w<0&&(q=!0)):(tr=e_,w>=0&&(q=!0))}return{stopnow:q,ilimit:tr}},ye=function(h,w){if(h.ttisfloat()){let q=h.value,tr=Math.floor(q);if(q!==tr){if(0===w)return!1;w>1&&(tr+=1)}return eg(tr)}if(h.ttisinteger())return h.value;if(Ee(h)){let q=new ev.TValue;if(ev.luaO_str2num(h.svalue(),q)===h.vslen()+1)return ye(q,w)}return!1},nt=function(h){return h.ttisinteger()?h.value:ye(h,0)},jt=function(h){if(h.ttnov()===tp)return h.value;if(Ee(h)){let w=new ev.TValue;if(ev.luaO_str2num(h.svalue(),w)===h.vslen()+1)return w.value}return!1},D=function(h,w){return h.value<w.value},bt=function(h,w){return h.value<=w.value},it=function(h,w){let q=eO(h),tr=eO(w);return q===tr?0:q<tr?-1:1},zt=function(h,w,q){let tr;switch(q.ttype()){case tv:{let tn=q.value;if(null!==(tr=eS.fasttm(h,tn.metatable,eS.TMS.TM_LEN)))break;return void w.setivalue(eI.luaH_getn(tn))}case ty:case tl:return void w.setivalue(q.vslen());default:(tr=eS.luaT_gettmbyobj(h,q,eS.TMS.TM_LEN)).ttisnil()&&eP.luaG_typeerror(h,q,tx("get length of",!0))}eS.luaT_callTM(h,tr,q,q,w,1)},eR=Math.imul||function(h,w){let q=65535&h,tr=65535&w;return q*tr+((h>>>16&65535)*tr+q*(w>>>16&65535)<<16>>>0)|0},fe=function(h,w,q){return 0===q&&eP.luaG_runerror(h,tx("attempt to divide by zero")),0|Math.floor(w/q)},ae=function(h,w,q){return 0===q&&eP.luaG_runerror(h,tx("attempt to perform 'n%%0'")),w-Math.floor(w/q)*q|0},Ae=function(h,w){return w<0?w<=-32?0:h>>>-w:w>=32?0:h<<w},je=function(h,w,q,tr){let tn=h.cache;if(null!==tn){let ti=h.upvalues,to=ti.length;for(let h=0;h<to;h++){let to=ti[h].instack?q[tr+ti[h].idx]:w[ti[h].idx];if(tn.upvals[h]!==to)return null}}return tn},de=function(h,w,q,tr,tn){let ti=w.upvalues.length,to=w.upvalues,ts=new ev.LClosure(h,ti);ts.p=w,h.stack[tn].setclLvalue(ts);for(let w=0;w<ti;w++)to[w].instack?ts.upvals[w]=eb.luaF_findupval(h,tr+to[w].idx):ts.upvals[w]=q[to[w].idx];w.cache=ts},Oe=function(h){return h.ttisnumber()},Ee=function(h){return h.ttisstring()},Ne=function(h,w){let q=h.stack[w];return!!q.ttisstring()||!!Oe(q)&&(ev.luaO_tostring(h,q),!0)},ke=function(h){return h.ttisstring()&&0===h.vslen()},ir=function(h,w,q,tr){let tn=0;do{let ti=h.stack[w-q],to=ti.vslen(),ts=ti.svalue();tr.set(ts,tn),tn+=to}while(--q>0)},Be=function(h,w){em(w>=2);do{let q=h.top,tr=2;if((h.stack[q-2].ttisstring()||Oe(h.stack[q-2]))&&Ne(h,q-1)){if(ke(h.stack[q-1]))Ne(h,q-2);else if(ke(h.stack[q-2]))ev.setobjs2s(h,q-2,q-1);else{let tn=h.stack[q-1].vslen();for(tr=1;tr<w&&Ne(h,q-tr-1);tr++)tn+=h.stack[q-tr-1].vslen();let ti=new Uint8Array(tn);ir(h,q,tr,ti);let to=eT(h,ti);ev.setsvalue2s(h,q-tr,to)}}else eS.luaT_trybinTM(h,h.stack[q-2],h.stack[q-1],h.stack[q-2],eS.TMS.TM_CONCAT);for(w-=tr-1;h.top>q-(tr-1);)delete h.stack[--h.top]}while(w>1)},or=function(h,w,q,tr){for(let tn=0;tn<2e3;tn++){let tn;if(w.ttistable()){let ti=eI.luaH_get(h,w.value,q);if(!ti.ttisnil())return void ev.setobj2s(h,tr,ti);if(null===(tn=eS.fasttm(h,w.value.metatable,eS.TMS.TM_INDEX)))return void h.stack[tr].setnilvalue()}else(tn=eS.luaT_gettmbyobj(h,w,eS.TMS.TM_INDEX)).ttisnil()&&eP.luaG_typeerror(h,w,tx("index",!0));if(tn.ttisfunction())return void eS.luaT_callTM(h,tn,w,q,h.stack[tr],1);w=tn}eP.luaG_runerror(h,tx("'__index' chain too long; possible loop",!0))},Ze=function(h,w,q,tr){for(let tn=0;tn<2e3;tn++){let tn;if(w.ttistable()){let ti=w.value;if(!eI.luaH_get(h,ti,q).ttisnil()||null===(tn=eS.fasttm(h,ti.metatable,eS.TMS.TM_NEWINDEX)))return eI.luaH_setfrom(h,ti,q,tr),void eI.invalidateTMcache(ti)}else(tn=eS.luaT_gettmbyobj(h,w,eS.TMS.TM_NEWINDEX)).ttisnil()&&eP.luaG_typeerror(h,w,tx("index",!0));if(tn.ttisfunction())return void eS.luaT_callTM(h,tn,w,q,tr,0);w=tn}eP.luaG_runerror(h,tx("'__newindex' chain too long; possible loop",!0))};h.exports.cvt2str=Oe,h.exports.cvt2num=Ee,h.exports.luaV_gettable=or,h.exports.luaV_concat=Be,h.exports.luaV_div=fe,h.exports.luaV_equalobj=Wt,h.exports.luaV_execute=function(h){let w=h.ci;for(w.callstatus|=ex.CIST_FRESH;;){em(w===h.ci);let q=w.func.value,to=q.p.k,ts=w.l_base,tu=w.l_code[w.l_savedpc++];h.hookmask&(tr|tn)&&eP.luaG_traceexec(h);let tl=p(0,ts,tu);switch(tu.opcode){case tJ:ev.setobjs2s(h,tl,b(0,ts,tu));break;case tK:{let w=to[tu.Bx];ev.setobj2s(h,tl,w);break}case tY:{em(w.l_code[w.l_savedpc].opcode===tU);let q=to[w.l_code[w.l_savedpc++].Ax];ev.setobj2s(h,tl,q);break}case tz:h.stack[tl].setbvalue(0!==tu.B),0!==tu.C&&w.l_savedpc++;break;case tW:for(let w=0;w<=tu.B;w++)h.stack[tl+w].setnilvalue();break;case tj:{let w=tu.B;ev.setobj2s(h,tl,q.upvals[w]);break}case tB:{let w=q.upvals[tu.B],tr=x(h,ts,to,tu);or(h,w,tr,tl);break}case tF:{let w=h.stack[b(0,ts,tu)],q=x(h,ts,to,tu);or(h,w,q,tl);break}case t6:{let w=q.upvals[tu.A],tr=_(h,ts,to,tu),tn=x(h,ts,to,tu);Ze(h,w,tr,tn);break}case t8:q.upvals[tu.B].setfrom(h.stack[tl]);break;case t5:{let w=h.stack[tl],q=_(h,ts,to,tu),tr=x(h,ts,to,tu);Ze(h,w,q,tr);break}case t$:h.stack[tl].sethvalue(eI.luaH_new(h));break;case t3:{let w=b(0,ts,tu),q=x(h,ts,to,tu);ev.setobjs2s(h,tl+1,w),or(h,h.stack[w],q,tl);break}case tO:{let w,q,tr=_(h,ts,to,tu),tn=x(h,ts,to,tu);tr.ttisinteger()&&tn.ttisinteger()?h.stack[tl].setivalue(tr.value+tn.value|0):!1!==(w=jt(tr))&&!1!==(q=jt(tn))?h.stack[tl].setfltvalue(w+q):eS.luaT_trybinTM(h,tr,tn,h.stack[tl],eS.TMS.TM_ADD);break}case er:{let w,q,tr=_(h,ts,to,tu),tn=x(h,ts,to,tu);tr.ttisinteger()&&tn.ttisinteger()?h.stack[tl].setivalue(tr.value-tn.value|0):!1!==(w=jt(tr))&&!1!==(q=jt(tn))?h.stack[tl].setfltvalue(w-q):eS.luaT_trybinTM(h,tr,tn,h.stack[tl],eS.TMS.TM_SUB);break}case tQ:{let w,q,tr=_(h,ts,to,tu),tn=x(h,ts,to,tu);tr.ttisinteger()&&tn.ttisinteger()?h.stack[tl].setivalue(eR(tr.value,tn.value)):!1!==(w=jt(tr))&&!1!==(q=jt(tn))?h.stack[tl].setfltvalue(w*q):eS.luaT_trybinTM(h,tr,tn,h.stack[tl],eS.TMS.TM_MUL);break}case tZ:{let w,q,tr=_(h,ts,to,tu),tn=x(h,ts,to,tu);tr.ttisinteger()&&tn.ttisinteger()?h.stack[tl].setivalue(ae(h,tr.value,tn.value)):!1!==(w=jt(tr))&&!1!==(q=jt(tn))?h.stack[tl].setfltvalue(ey(h,w,q)):eS.luaT_trybinTM(h,tr,tn,h.stack[tl],eS.TMS.TM_MOD);break}case t1:{let w,q,tr=_(h,ts,to,tu),tn=x(h,ts,to,tu);!1!==(w=jt(tr))&&!1!==(q=jt(tn))?h.stack[tl].setfltvalue(Math.pow(w,q)):eS.luaT_trybinTM(h,tr,tn,h.stack[tl],eS.TMS.TM_POW);break}case tM:{let w,q,tr=_(h,ts,to,tu),tn=x(h,ts,to,tu);!1!==(w=jt(tr))&&!1!==(q=jt(tn))?h.stack[tl].setfltvalue(w/q):eS.luaT_trybinTM(h,tr,tn,h.stack[tl],eS.TMS.TM_DIV);break}case tG:{let w,q,tr=_(h,ts,to,tu),tn=x(h,ts,to,tu);tr.ttisinteger()&&tn.ttisinteger()?h.stack[tl].setivalue(fe(h,tr.value,tn.value)):!1!==(w=jt(tr))&&!1!==(q=jt(tn))?h.stack[tl].setfltvalue(Math.floor(w/q)):eS.luaT_trybinTM(h,tr,tn,h.stack[tl],eS.TMS.TM_IDIV);break}case tw:{let w,q,tr=_(h,ts,to,tu),tn=x(h,ts,to,tu);!1!==(w=nt(tr))&&!1!==(q=nt(tn))?h.stack[tl].setivalue(w&q):eS.luaT_trybinTM(h,tr,tn,h.stack[tl],eS.TMS.TM_BAND);break}case tS:{let w,q,tr=_(h,ts,to,tu),tn=x(h,ts,to,tu);!1!==(w=nt(tr))&&!1!==(q=nt(tn))?h.stack[tl].setivalue(w|q):eS.luaT_trybinTM(h,tr,tn,h.stack[tl],eS.TMS.TM_BOR);break}case tI:{let w,q,tr=_(h,ts,to,tu),tn=x(h,ts,to,tu);!1!==(w=nt(tr))&&!1!==(q=nt(tn))?h.stack[tl].setivalue(w^q):eS.luaT_trybinTM(h,tr,tn,h.stack[tl],eS.TMS.TM_BXOR);break}case t7:{let w,q,tr=_(h,ts,to,tu),tn=x(h,ts,to,tu);!1!==(w=nt(tr))&&!1!==(q=nt(tn))?h.stack[tl].setivalue(Ae(w,q)):eS.luaT_trybinTM(h,tr,tn,h.stack[tl],eS.TMS.TM_SHL);break}case t9:{let w,q,tr=_(h,ts,to,tu),tn=x(h,ts,to,tu);!1!==(w=nt(tr))&&!1!==(q=nt(tn))?h.stack[tl].setivalue(Ae(w,-q)):eS.luaT_trybinTM(h,tr,tn,h.stack[tl],eS.TMS.TM_SHR);break}case el:{let w,q=h.stack[b(0,ts,tu)];q.ttisinteger()?h.stack[tl].setivalue(0|-q.value):!1!==(w=jt(q))?h.stack[tl].setfltvalue(-w):eS.luaT_trybinTM(h,q,q,h.stack[tl],eS.TMS.TM_UNM);break}case tL:{let w=h.stack[b(0,ts,tu)];w.ttisinteger()?h.stack[tl].setivalue(~w.value):eS.luaT_trybinTM(h,w,w,h.stack[tl],eS.TMS.TM_BNOT);break}case t0:{let w=h.stack[b(0,ts,tu)];h.stack[tl].setbvalue(w.l_isfalse());break}case tH:zt(h,h.stack[tl],h.stack[b(0,ts,tu)]);break;case tN:{let q=tu.B,tr=tu.C;h.top=ts+tr+1,Be(h,tr-q+1);let tn=ts+q;ev.setobjs2s(h,tl,tn),eL.adjust_top(h,w.top);break}case tV:N(h,w,tu,0);break;case tk:Wt(h,_(h,ts,to,tu),x(h,ts,to,tu))!==tu.A?w.l_savedpc++:A(h,w);break;case tq:Q(h,_(h,ts,to,tu),x(h,ts,to,tu))!==tu.A?w.l_savedpc++:A(h,w);break;case tX:Mt(h,_(h,ts,to,tu),x(h,ts,to,tu))!==tu.A?w.l_savedpc++:A(h,w);break;case ei:(tu.C?h.stack[tl].l_isfalse():!h.stack[tl].l_isfalse())?w.l_savedpc++:A(h,w);break;case eo:{let q=b(0,ts,tu),tr=h.stack[q];(tu.C?tr.l_isfalse():!tr.l_isfalse())?w.l_savedpc++:(ev.setobjs2s(h,tl,q),A(h,w));break}case tP:{let q=tu.B,tr=tu.C-1;if(0!==q&&eL.adjust_top(h,tl+q),!eL.luaD_precall(h,tl,tr)){w=h.ci;continue}tr>=0&&eL.adjust_top(h,w.top);break}case en:{let tr=tu.B;if(0!==tr&&eL.adjust_top(h,tl+tr),!eL.luaD_precall(h,tl,ti)){let tr=h.ci,tn=tr.previous,ti=tr.func,to=tr.funcOff,ts=tn.funcOff,tu=tr.l_base+ti.value.p.numparams;q.p.p.length>0&&eb.luaF_close(h,tn.l_base);for(let w=0;to+w<tu;w++)ev.setobjs2s(h,ts+w,to+w);tn.l_base=ts+(tr.l_base-to),tn.top=ts+(h.top-to),eL.adjust_top(h,tn.top),tn.l_code=tr.l_code,tn.l_savedpc=tr.l_savedpc,tn.callstatus|=ex.CIST_TAIL,tn.next=null,w=h.ci=tn,em(h.top===tn.l_base+h.stack[ts].value.p.maxstacksize);continue}break}case t2:{q.p.p.length>0&&eb.luaF_close(h,ts);let tr=eL.luaD_poscall(h,w,tl,0!==tu.B?tu.B-1:h.top-tl);if(w.callstatus&ex.CIST_FRESH)return;w=h.ci,tr&&eL.adjust_top(h,w.top),em(w.callstatus&ex.CIST_LUA),em(w.l_code[w.l_savedpc-1].opcode===tP);continue}case tC:if(h.stack[tl].ttisinteger()){let q=h.stack[tl+2].value,tr=h.stack[tl].value+q|0,tn=h.stack[tl+1].value;(0<q?tr<=tn:tn<=tr)&&(w.l_savedpc+=tu.sBx,h.stack[tl].chgivalue(tr),h.stack[tl+3].setivalue(tr))}else{let q=h.stack[tl+2].value,tr=h.stack[tl].value+q,tn=h.stack[tl+1].value;(0<q?tr<=tn:tn<=tr)&&(w.l_savedpc+=tu.sBx,h.stack[tl].chgfltvalue(tr),h.stack[tl+3].setfltvalue(tr))}break;case tD:{let q,tr=h.stack[tl],tn=h.stack[tl+1],ti=h.stack[tl+2];if(tr.ttisinteger()&&ti.ttisinteger()&&(q=ge(tn,ti.value))){let h=q.stopnow?0:tr.value;tn.value=q.ilimit,tr.value=h-ti.value|0}else{let w,q,to;!1===(w=jt(tn))&&eP.luaG_runerror(h,tx("'for' limit must be a number",!0)),h.stack[tl+1].setfltvalue(w),!1===(q=jt(ti))&&eP.luaG_runerror(h,tx("'for' step must be a number",!0)),h.stack[tl+2].setfltvalue(q),!1===(to=jt(tr))&&eP.luaG_runerror(h,tx("'for' initial value must be a number",!0)),h.stack[tl].setfltvalue(to-q)}w.l_savedpc+=tu.sBx;break}case es:{let q=tl+3;ev.setobjs2s(h,q+2,tl+2),ev.setobjs2s(h,q+1,tl+1),ev.setobjs2s(h,q,tl),eL.adjust_top(h,q+3),eL.luaD_call(h,q,tu.C),eL.adjust_top(h,w.top),tl=p(0,ts,tu=w.l_code[w.l_savedpc++]),em(tu.opcode===eu)}case eu:h.stack[tl+1].ttisnil()||(ev.setobjs2s(h,tl,tl+1),w.l_savedpc+=tu.sBx);break;case t4:{let q=tu.B,tr=tu.C;0===q&&(q=h.top-tl-1),0===tr&&(em(w.l_code[w.l_savedpc].opcode===tU),tr=w.l_code[w.l_savedpc++].Ax);let tn=h.stack[tl].value,ti=(tr-1)*tA+q;for(;q>0;q--)eI.luaH_setint(tn,ti--,h.stack[tl+q]);eL.adjust_top(h,w.top);break}case tR:{let w=q.p.p[tu.Bx],tr=je(w,q.upvals,h.stack,ts);null===tr?de(h,w,q.upvals,ts,tl):h.stack[tl].setclLvalue(tr);break}case ep:{let tr,tn=tu.B-1,ti=ts-w.funcOff-q.p.numparams-1;for(ti<0&&(ti=0),tn<0&&(tn=ti,eL.luaD_checkstack(h,ti),eL.adjust_top(h,tl+ti)),tr=0;tr<tn&&tr<ti;tr++)ev.setobjs2s(h,tl+tr,ts-ti+tr);for(;tr<tn;tr++)h.stack[tl+tr].setnilvalue();break}case tU:throw Error("invalid opcode")}}},h.exports.luaV_finishOp=function(h){let w=h.ci,q=w.l_base,tr=w.l_code[w.l_savedpc-1],tn=tr.opcode;switch(tn){case tO:case er:case tQ:case tM:case tG:case tw:case tS:case tI:case t7:case t9:case tZ:case t1:case el:case tL:case tH:case tB:case tF:case t3:ev.setobjs2s(h,q+tr.A,h.top-1),delete h.stack[--h.top];break;case tX:case tq:case tk:{let q=!h.stack[h.top-1].l_isfalse();delete h.stack[--h.top],w.callstatus&ex.CIST_LEQ&&(em(tn===tX),w.callstatus^=ex.CIST_LEQ,q=!q),em(w.l_code[w.l_savedpc].opcode===tV),!!tr.A!==q&&w.l_savedpc++;break}case tN:{let tn=h.top-1,ti=tn-1-(q+tr.B);ev.setobjs2s(h,tn-2,tn),ti>1&&(h.top=tn-1,Be(h,ti)),ev.setobjs2s(h,w.l_base+tr.A,h.top-1),eL.adjust_top(h,w.top);break}case es:em(w.l_code[w.l_savedpc].opcode===eu),eL.adjust_top(h,w.top);break;case tP:tr.C-1>=0&&eL.adjust_top(h,w.top)}},h.exports.luaV_imul=eR,h.exports.luaV_lessequal=Mt,h.exports.luaV_lessthan=Q,h.exports.luaV_mod=ae,h.exports.luaV_objlen=zt,h.exports.luaV_rawequalobj=function(h,w){return Wt(null,h,w)},h.exports.luaV_shiftl=Ae,h.exports.luaV_tointeger=ye,h.exports.settable=Ze,h.exports.tointeger=nt,h.exports.tonumber=jt},function(h,w,q){let tr=[96,113,65,84,80,80,92,108,60,16,60,84,108,124,124,124,124,124,124,124,124,124,124,124,124,96,96,96,96,104,34,188,188,188,132,228,84,84,16,98,98,4,98,20,81,80,23],i=function(h,w){return~(-1<<h)<<w},o=function(h,w){return~i(h,w)},a=function(h,w,q,tr){return h.code=h.code&o(tr,q)|w<<q&i(tr,q),u(h)},s=function(h,w){return a(h,w,14,18)},u=function(h){if("number"==typeof h)return{code:h,opcode:h>>0&i(6,0),A:h>>6&i(8,0),B:h>>23&i(9,0),C:h>>14&i(9,0),Bx:h>>14&i(18,0),Ax:h>>6&i(26,0),sBx:(h>>14&i(18,0))-131071};{let w=h.code;return h.opcode=w>>0&i(6,0),h.A=w>>6&i(8,0),h.B=w>>23&i(9,0),h.C=w>>14&i(9,0),h.Bx=w>>14&i(18,0),h.Ax=w>>6&i(26,0),h.sBx=(w>>14&i(18,0))-131071,h}};h.exports.BITRK=256,h.exports.CREATE_ABC=function(h,w,q,tr){return u(h<<0|w<<6|q<<23|tr<<14)},h.exports.CREATE_ABx=function(h,w,q){return u(h<<0|w<<6|q<<14)},h.exports.CREATE_Ax=function(h,w){return u(h<<0|w<<6)},h.exports.GET_OPCODE=function(h){return h.opcode},h.exports.GETARG_A=function(h){return h.A},h.exports.GETARG_B=function(h){return h.B},h.exports.GETARG_C=function(h){return h.C},h.exports.GETARG_Bx=function(h){return h.Bx},h.exports.GETARG_Ax=function(h){return h.Ax},h.exports.GETARG_sBx=function(h){return h.sBx},h.exports.INDEXK=function(h){return -257&h},h.exports.ISK=function(h){return 256&h},h.exports.LFIELDS_PER_FLUSH=50,h.exports.MAXARG_A=255,h.exports.MAXARG_Ax=67108863,h.exports.MAXARG_B=511,h.exports.MAXARG_Bx=262143,h.exports.MAXARG_C=511,h.exports.MAXARG_sBx=131071,h.exports.MAXINDEXRK=255,h.exports.NO_REG=255,h.exports.OpArgK=3,h.exports.OpArgN=0,h.exports.OpArgR=2,h.exports.OpArgU=1,h.exports.OpCodes=["MOVE","LOADK","LOADKX","LOADBOOL","LOADNIL","GETUPVAL","GETTABUP","GETTABLE","SETTABUP","SETUPVAL","SETTABLE","NEWTABLE","SELF","ADD","SUB","MUL","MOD","POW","DIV","IDIV","BAND","BOR","BXOR","SHL","SHR","UNM","BNOT","NOT","LEN","CONCAT","JMP","EQ","LT","LE","TEST","TESTSET","CALL","TAILCALL","RETURN","FORLOOP","FORPREP","TFORCALL","TFORLOOP","SETLIST","CLOSURE","VARARG","EXTRAARG"],h.exports.OpCodesI={OP_MOVE:0,OP_LOADK:1,OP_LOADKX:2,OP_LOADBOOL:3,OP_LOADNIL:4,OP_GETUPVAL:5,OP_GETTABUP:6,OP_GETTABLE:7,OP_SETTABUP:8,OP_SETUPVAL:9,OP_SETTABLE:10,OP_NEWTABLE:11,OP_SELF:12,OP_ADD:13,OP_SUB:14,OP_MUL:15,OP_MOD:16,OP_POW:17,OP_DIV:18,OP_IDIV:19,OP_BAND:20,OP_BOR:21,OP_BXOR:22,OP_SHL:23,OP_SHR:24,OP_UNM:25,OP_BNOT:26,OP_NOT:27,OP_LEN:28,OP_CONCAT:29,OP_JMP:30,OP_EQ:31,OP_LT:32,OP_LE:33,OP_TEST:34,OP_TESTSET:35,OP_CALL:36,OP_TAILCALL:37,OP_RETURN:38,OP_FORLOOP:39,OP_FORPREP:40,OP_TFORCALL:41,OP_TFORLOOP:42,OP_SETLIST:43,OP_CLOSURE:44,OP_VARARG:45,OP_EXTRAARG:46},h.exports.POS_A=6,h.exports.POS_Ax=6,h.exports.POS_B=23,h.exports.POS_Bx=14,h.exports.POS_C=14,h.exports.POS_OP=0,h.exports.RKASK=function(h){return 256|h},h.exports.SETARG_A=function(h,w){return a(h,w,6,8)},h.exports.SETARG_Ax=function(h,w){return a(h,w,6,26)},h.exports.SETARG_B=function(h,w){return a(h,w,23,9)},h.exports.SETARG_Bx=s,h.exports.SETARG_C=function(h,w){return a(h,w,14,9)},h.exports.SETARG_sBx=function(h,w){return s(h,w+131071)},h.exports.SET_OPCODE=function(h,w){return h.code=h.code&o(6,0)|w<<0&i(6,0),u(h)},h.exports.SIZE_A=8,h.exports.SIZE_Ax=26,h.exports.SIZE_B=9,h.exports.SIZE_Bx=18,h.exports.SIZE_C=9,h.exports.SIZE_OP=6,h.exports.fullins=u,h.exports.getBMode=function(h){return tr[h]>>4&3},h.exports.getCMode=function(h){return tr[h]>>2&3},h.exports.getOpMode=function(h){return 3&tr[h]},h.exports.iABC=0,h.exports.iABx=1,h.exports.iAsBx=2,h.exports.iAx=3,h.exports.testAMode=function(h){return 64&tr[h]},h.exports.testTMode=function(h){return 128&tr[h]}},function(h,w,q){let{LUA_VERSION_MAJOR:tr,LUA_VERSION_MINOR:tn}=q(2);h.exports.LUA_VERSUFFIX="_"+tr+"_"+tn,h.exports.lua_assert=function(h){},h.exports.luaopen_base=q(24).luaopen_base,h.exports.LUA_COLIBNAME="coroutine",h.exports.luaopen_coroutine=q(25).luaopen_coroutine,h.exports.LUA_TABLIBNAME="table",h.exports.luaopen_table=q(26).luaopen_table,h.exports.LUA_OSLIBNAME="os",h.exports.luaopen_os=q(27).luaopen_os,h.exports.LUA_STRLIBNAME="string",h.exports.luaopen_string=q(28).luaopen_string,h.exports.LUA_UTF8LIBNAME="utf8",h.exports.luaopen_utf8=q(29).luaopen_utf8,h.exports.LUA_BITLIBNAME="bit32",h.exports.LUA_MATHLIBNAME="math",h.exports.luaopen_math=q(30).luaopen_math,h.exports.LUA_DBLIBNAME="debug",h.exports.luaopen_debug=q(31).luaopen_debug,h.exports.LUA_LOADLIBNAME="package",h.exports.luaopen_package=q(32).luaopen_package,h.exports.LUA_FENGARILIBNAME="fengari",h.exports.luaopen_fengari=q(33).luaopen_fengari;let ti=q(39);h.exports.luaL_openlibs=ti.luaL_openlibs},function(h,w,q){let{LUA_MULTRET:tr,LUA_OPBNOT:tn,LUA_OPEQ:ti,LUA_OPLE:to,LUA_OPLT:ts,LUA_OPUNM:tu,LUA_REGISTRYINDEX:tl,LUA_RIDX_GLOBALS:tc,LUA_VERSION_NUM:tp,constant_types:{LUA_NUMTAGS:td,LUA_TBOOLEAN:tm,LUA_TCCL:ty,LUA_TFUNCTION:tv,LUA_TLCF:tb,LUA_TLCL:tx,LUA_TLIGHTUSERDATA:tT,LUA_TLNGSTR:tE,LUA_TNIL:tA,LUA_TNONE:tO,LUA_TNUMFLT:tw,LUA_TNUMINT:tL,LUA_TSHRSTR:tS,LUA_TTABLE:tI,LUA_TTHREAD:tP,LUA_TUSERDATA:tR},thread_status:{LUA_OK:tN},from_userstring:tM,to_luastring:tk}=q(1),{api_check:tU}=q(4),tC=q(11),tD=q(8),{luaU_dump:tF}=q(37),tB=q(13),tj=q(6),tG=q(12),{luaS_bless:tV,luaS_new:tX,luaS_newliteral:tH}=q(10),tz=q(14),{LUAI_MAXSTACK:tK}=q(3),tY=q(15),tW=q(9),{ZIO:tq}=q(19),tZ=tj.TValue,tJ=tj.CClosure,rt=function(h){h.top++,tU(h,h.top<=h.ci.top,"stack overflow")},It=function(h,w){tU(h,w<h.top-h.ci.funcOff,"not enough elements in the stack")},ee=function(h){if(!h)throw TypeError("invalid argument")},Zt=function(h){ee("number"==typeof h&&(0|h)===h)},Ut=function(h){return h!==tj.luaO_nilobject},et=function(h,w){let q=h.ci;if(w>0){let tr=q.funcOff+w;return tU(h,w<=q.top-(q.funcOff+1),"unacceptable index"),tr>=h.top?tj.luaO_nilobject:h.stack[tr]}return w>tl?(tU(h,0!==w&&-w<=h.top,"invalid index"),h.stack[h.top+w]):w===tl?h.l_G.l_registry:(tU(h,(w=tl-w)<=tB.MAXUPVAL+1,"upvalue index too large"),q.func.ttislcf()?tj.luaO_nilobject:w<=q.func.value.nupvalues?q.func.value.upvalue[w-1]:tj.luaO_nilobject)},Et=function(h,w){let q=h.ci;if(w>0){let tr=q.funcOff+w;return tU(h,w<=q.top-(q.funcOff+1),"unacceptable index"),tr>=h.top?null:tr}if(w>tl)return tU(h,0!==w&&-w<=h.top,"invalid index"),h.top+w;throw Error("attempt to use pseudo-index")},k=function(h,w){let q,tr=h.ci.funcOff;w>=0?(tU(h,w<=h.stack_last-(tr+1),"new top too large"),q=tr+1+w):(tU(h,-(w+1)<=h.top-(tr+1),"invalid new top"),q=h.top+w+1),tD.adjust_top(h,q)},ht=function(h,w){k(h,-w-1)},St=function(h,w,q){for(;w<q;w++,q--){let tr=h.stack[w],tn=new tZ(tr.type,tr.value);tj.setobjs2s(h,w,q),tj.setobj2s(h,q,tn)}},F=function(h,w,q){let tr=h.top-1,tn=Et(h,w),ti=h.stack[tn];tU(h,Ut(ti)&&w>tl,"index not in the stack"),tU(h,(q>=0?q:-q)<=tr-tn+1,"invalid 'n'");let to=q>=0?tr-q:tn-q-1;St(h,tn,to),St(h,to+1,h.top-1),St(h,tn,h.top-1)},_t=function(h,w,q){let tr=et(h,w);et(h,q).setfrom(tr)},wt=function(h,w,q){if(ee("function"==typeof w),Zt(q),0===q)h.stack[h.top]=new tZ(tb,w);else{It(h,q),tU(h,q<=tB.MAXUPVAL,"upvalue index too large");let tr=new tJ(h,w,q);for(let w=0;w<q;w++)tr.upvalue[w].setfrom(h.stack[h.top-q+w]);for(let w=1;w<q;w++)delete h.stack[--h.top];q>0&&--h.top,h.stack[h.top].setclCvalue(tr)}rt(h)},le=function(h,w){wt(h,w,0)},Le=function(h,w,q){let tr=tX(h,tM(q));It(h,1),tj.pushsvalue2s(h,tr),tU(h,h.top<=h.ci.top,"stack overflow"),tY.settable(h,w,h.stack[h.top-1],h.stack[h.top-2]),delete h.stack[--h.top],delete h.stack[--h.top]},Re=function(h,w){Le(h,tW.luaH_getint(h.l_G.l_registry.value,tc),w)},Pe=function(h,w,q){let tr=tX(h,tM(q));return tj.pushsvalue2s(h,tr),tU(h,h.top<=h.ci.top,"stack overflow"),tY.luaV_gettable(h,w,h.stack[h.top-1],h.top-1),h.stack[h.top-1].ttnov()},Fe=function(h,w,q){let tr=et(h,w);return Zt(q),tU(h,tr.ttistable(),"table expected"),tj.pushobj2s(h,tW.luaH_getint(tr.value,q)),tU(h,h.top<=h.ci.top,"stack overflow"),h.stack[h.top-1].ttnov()},I=function(h,w,q){let tr=new tj.TValue(tI,tW.luaH_new(h));h.stack[h.top]=tr,rt(h)},Ft=function(h,w,q){switch(Zt(q),w.ttype()){case ty:{let h=w.value;return 1<=q&&q<=h.nupvalues?{name:tk("",!0),val:h.upvalue[q-1]}:null}case tx:{let h=w.value,tr=h.p;if(!(1<=q&&q<=tr.upvalues.length))return null;let tn=tr.upvalues[q-1].name;return{name:tn?tn.getstr():tk("(*no name)",!0),val:h.upvals[q-1]}}default:return null}},Dt=function(h,w){let q=et(h,w);if(!q.ttisstring()){if(!tY.cvt2str(q))return null;tj.luaO_tostring(h,q)}return q.svalue()},Tt=function(h,w){return tY.tointeger(et(h,w))},Lt=function(h,w){return tY.tonumber(et(h,w))},tQ=new WeakMap,_e=function(h,w){tD.luaD_callnoyield(h,w.funcOff,w.nresults)},ve=function(h,w){let q=et(h,w);return Ut(q)?q.ttnov():tO},t$=tk("?"),Ue=function(h,w,q){tU(h,q===tr||h.ci.top-h.top>=q-w,"results from function overflow current stack size")},ne=function(h,w,q,tn,ti){tU(h,null===ti||!(h.ci.callstatus&tG.CIST_LUA),"cannot use continuations inside hooks"),It(h,w+1),tU(h,h.status===tN,"cannot do calls on non-normal thread"),Ue(h,w,q);let to=h.top-(w+1);null!==ti&&0===h.nny?(h.ci.c_k=ti,h.ci.c_ctx=tn,tD.luaD_call(h,to,q)):tD.luaD_callnoyield(h,to,q),q===tr&&h.ci.top<h.top&&(h.ci.top=h.top)},se=function(h,w,q,tn,ti,to){let ts,tu;tU(h,null===to||!(h.ci.callstatus&tG.CIST_LUA),"cannot use continuations inside hooks"),It(h,w+1),tU(h,h.status===tN,"cannot do calls on non-normal thread"),Ue(h,w,q),tu=0===tn?0:Et(h,tn);let tl=h.top-(w+1);if(null===to||h.nny>0)ts=tD.luaD_pcall(h,_e,{funcOff:tl,nresults:q},tl,tu);else{let w=h.ci;w.c_k=to,w.c_ctx=ti,w.extra=tl,w.c_old_errfunc=h.errfunc,h.errfunc=tu,w.callstatus&=~tG.CIST_OAH|h.allowhook,w.callstatus|=tG.CIST_YPCALL,tD.luaD_call(h,tl,q),w.callstatus&=~tG.CIST_YPCALL,h.errfunc=w.c_old_errfunc,ts=tN}return q===tr&&h.ci.top<h.top&&(h.ci.top=h.top),ts},be=function(h,w,q){let tr=et(h,w);tU(h,tr.ttisLclosure(),"Lua function expected");let tn=tr.value;return Zt(q),tU(h,1<=q&&q<=tn.p.upvalues.length,"invalid upvalue index"),{f:tn,i:q-1}};h.exports.api_incr_top=rt,h.exports.api_checknelems=It,h.exports.lua_absindex=function(h,w){return w>0||w<=tl?w:h.top-h.ci.funcOff+w},h.exports.lua_arith=function(h,w){w!==tu&&w!==tn?It(h,2):(It(h,1),tj.pushobj2s(h,h.stack[h.top-1]),tU(h,h.top<=h.ci.top,"stack overflow")),tj.luaO_arith(h,w,h.stack[h.top-2],h.stack[h.top-1],h.stack[h.top-2]),delete h.stack[--h.top]},h.exports.lua_atpanic=function(h,w){let q=h.l_G.panic;return h.l_G.panic=w,q},h.exports.lua_atnativeerror=function(h,w){let q=h.l_G.atnativeerror;return h.l_G.atnativeerror=w,q},h.exports.lua_call=function(h,w,q){ne(h,w,q,0,null)},h.exports.lua_callk=ne,h.exports.lua_checkstack=function(h,w){let q,tr=h.ci;return tU(h,w>=0,"negative 'n'"),h.stack_last-h.top>w?q=!0:h.top+tG.EXTRA_STACK>tK-w?q=!1:(tD.luaD_growstack(h,w),q=!0),q&&tr.top<h.top+w&&(tr.top=h.top+w),q},h.exports.lua_compare=function(h,w,q,tr){let tn=et(h,w),tu=et(h,q),tl=0;if(Ut(tn)&&Ut(tu))switch(tr){case ti:tl=tY.luaV_equalobj(h,tn,tu);break;case ts:tl=tY.luaV_lessthan(h,tn,tu);break;case to:tl=tY.luaV_lessequal(h,tn,tu);break;default:tU(h,!1,"invalid option")}return tl},h.exports.lua_concat=function(h,w){It(h,w),w>=2?tY.luaV_concat(h,w):0===w&&(tj.pushsvalue2s(h,tV(h,tk("",!0))),tU(h,h.top<=h.ci.top,"stack overflow"))},h.exports.lua_copy=_t,h.exports.lua_createtable=I,h.exports.lua_dump=function(h,w,q,tr){It(h,1);let tn=h.stack[h.top-1];return tn.ttisLclosure()?tF(h,tn.value.p,w,q,tr):1},h.exports.lua_error=function(h){It(h,1),tC.luaG_errormsg(h)},h.exports.lua_gc=function(){},h.exports.lua_getallocf=function(){return console.warn("lua_getallocf is not available"),0},h.exports.lua_getextraspace=function(){return console.warn("lua_getextraspace is not available"),0},h.exports.lua_getfield=function(h,w,q){return Pe(h,et(h,w),q)},h.exports.lua_getglobal=function(h,w){return Pe(h,tW.luaH_getint(h.l_G.l_registry.value,tc),w)},h.exports.lua_geti=function(h,w,q){let tr=et(h,w);return Zt(q),h.stack[h.top]=new tZ(tL,q),rt(h),tY.luaV_gettable(h,tr,h.stack[h.top-1],h.top-1),h.stack[h.top-1].ttnov()},h.exports.lua_getmetatable=function(h,w){let q,tr=et(h,w),tn=!1;switch(tr.ttnov()){case tI:case tR:q=tr.value.metatable;break;default:q=h.l_G.mt[tr.ttnov()]}return null!=q&&(h.stack[h.top]=new tZ(tI,q),rt(h),tn=!0),tn},h.exports.lua_gettable=function(h,w){let q=et(h,w);return tY.luaV_gettable(h,q,h.stack[h.top-1],h.top-1),h.stack[h.top-1].ttnov()},h.exports.lua_gettop=function(h){return h.top-(h.ci.funcOff+1)},h.exports.lua_getupvalue=function(h,w,q){let tr=Ft(0,et(h,w),q);if(tr){let w=tr.name,q=tr.val;return tj.pushobj2s(h,q),tU(h,h.top<=h.ci.top,"stack overflow"),w}return null},h.exports.lua_getuservalue=function(h,w){let q=et(h,w);tU(h,q.ttisfulluserdata(),"full userdata expected");let tr=q.value.uservalue;return h.stack[h.top]=new tZ(tr.type,tr.value),rt(h),h.stack[h.top-1].ttnov()},h.exports.lua_insert=function(h,w){F(h,w,1)},h.exports.lua_isboolean=function(h,w){return ve(h,w)===tm},h.exports.lua_iscfunction=function(h,w){let q=et(h,w);return q.ttislcf(q)||q.ttisCclosure()},h.exports.lua_isfunction=function(h,w){return ve(h,w)===tv},h.exports.lua_isinteger=function(h,w){return et(h,w).ttisinteger()},h.exports.lua_islightuserdata=function(h,w){return ve(h,w)===tT},h.exports.lua_isnil=function(h,w){return ve(h,w)===tA},h.exports.lua_isnone=function(h,w){return ve(h,w)===tO},h.exports.lua_isnoneornil=function(h,w){return 0>=ve(h,w)},h.exports.lua_isnumber=function(h,w){return!1!==tY.tonumber(et(h,w))},h.exports.lua_isproxy=function(h,w){let q=tQ.get(h);return!!q&&(null===w||w.l_G===q)},h.exports.lua_isstring=function(h,w){let q=et(h,w);return q.ttisstring()||tY.cvt2str(q)},h.exports.lua_istable=function(h,w){return et(h,w).ttistable()},h.exports.lua_isthread=function(h,w){return ve(h,w)===tP},h.exports.lua_isuserdata=function(h,w){let q=et(h,w);return q.ttisfulluserdata(q)||q.ttislightuserdata()},h.exports.lua_len=function(h,w){let q=et(h,w),tr=new tZ;tY.luaV_objlen(h,tr,q),h.stack[h.top]=tr,rt(h)},h.exports.lua_load=function(h,w,q,tr,tn){tr=tr?tM(tr):t$,null!==tn&&(tn=tM(tn));let ti=new tq(h,w,q),to=tD.luaD_protectedparser(h,ti,tr,tn);if(to===tN){let w=h.stack[h.top-1].value;if(w.nupvalues>=1){let q=tW.luaH_getint(h.l_G.l_registry.value,tc);w.upvals[0].setfrom(q)}}return to},h.exports.lua_newtable=function(h){I(h)},h.exports.lua_newuserdata=function(h,w){let q=new tj.Udata(h,w);return h.stack[h.top]=new tj.TValue(tR,q),rt(h),q.data},h.exports.lua_next=function(h,w){let q=et(h,w);return tU(h,q.ttistable(),"table expected"),h.stack[h.top]=new tZ,tW.luaH_next(h,q.value,h.top-1)?(rt(h),1):(delete h.stack[h.top],delete h.stack[--h.top],0)},h.exports.lua_pcall=function(h,w,q,tr){return se(h,w,q,tr,0,null)},h.exports.lua_pcallk=se,h.exports.lua_pop=ht,h.exports.lua_pushboolean=function(h,w){h.stack[h.top]=new tZ(tm,!!w),rt(h)},h.exports.lua_pushcclosure=wt,h.exports.lua_pushcfunction=le,h.exports.lua_pushfstring=function(h,w,...q){return w=tM(w),tj.luaO_pushvfstring(h,w,q)},h.exports.lua_pushglobaltable=function(h){Fe(h,tl,tc)},h.exports.lua_pushinteger=function(h,w){Zt(w),h.stack[h.top]=new tZ(tL,w),rt(h)},h.exports.lua_pushjsclosure=wt,h.exports.lua_pushjsfunction=le,h.exports.lua_pushlightuserdata=function(h,w){h.stack[h.top]=new tZ(tT,w),rt(h)},h.exports.lua_pushliteral=function(h,w){if(null==w)h.stack[h.top]=new tZ(tA,null),h.top++;else{ee("string"==typeof w);let q=tH(h,w);tj.pushsvalue2s(h,q),w=q.getstr()}return tU(h,h.top<=h.ci.top,"stack overflow"),w},h.exports.lua_pushlstring=function(h,w,q){let tr;return Zt(q),0===q?tr=tV(h,w=tk("",!0)):(tU(h,(w=tM(w)).length>=q,"invalid length to lua_pushlstring"),tr=tX(h,w.subarray(0,q))),tj.pushsvalue2s(h,tr),tU(h,h.top<=h.ci.top,"stack overflow"),tr.value},h.exports.lua_pushnil=function(h){h.stack[h.top]=new tZ(tA,null),rt(h)},h.exports.lua_pushnumber=function(h,w){ee("number"==typeof w),h.stack[h.top]=new tZ(tw,w),rt(h)},h.exports.lua_pushstring=function(h,w){if(null==w)h.stack[h.top]=new tZ(tA,null),h.top++;else{let q=tX(h,tM(w));tj.pushsvalue2s(h,q),w=q.getstr()}return tU(h,h.top<=h.ci.top,"stack overflow"),w},h.exports.lua_pushthread=function(h){return h.stack[h.top]=new tZ(tP,h),rt(h),h.l_G.mainthread===h},h.exports.lua_pushvalue=function(h,w){tj.pushobj2s(h,et(h,w)),tU(h,h.top<=h.ci.top,"stack overflow")},h.exports.lua_pushvfstring=function(h,w,q){return w=tM(w),tj.luaO_pushvfstring(h,w,q)},h.exports.lua_rawequal=function(h,w,q){let tr=et(h,w),tn=et(h,q);return Ut(tr)&&Ut(tn)?tY.luaV_equalobj(null,tr,tn):0},h.exports.lua_rawget=function(h,w){let q=et(h,w);return tU(h,q.ttistable(q),"table expected"),tj.setobj2s(h,h.top-1,tW.luaH_get(h,q.value,h.stack[h.top-1])),h.stack[h.top-1].ttnov()},h.exports.lua_rawgeti=Fe,h.exports.lua_rawgetp=function(h,w,q){let tr=et(h,w);tU(h,tr.ttistable(),"table expected");let tn=new tZ(tT,q);return tj.pushobj2s(h,tW.luaH_get(h,tr.value,tn)),tU(h,h.top<=h.ci.top,"stack overflow"),h.stack[h.top-1].ttnov()},h.exports.lua_rawlen=function(h,w){let q=et(h,w);switch(q.ttype()){case tS:case tE:return q.vslen();case tR:return q.value.len;case tI:return tW.luaH_getn(q.value);default:return 0}},h.exports.lua_rawset=function(h,w){It(h,2);let q=et(h,w);tU(h,q.ttistable(),"table expected");let tr=h.stack[h.top-2],tn=h.stack[h.top-1];tW.luaH_setfrom(h,q.value,tr,tn),tW.invalidateTMcache(q.value),delete h.stack[--h.top],delete h.stack[--h.top]},h.exports.lua_rawseti=function(h,w,q){Zt(q),It(h,1);let tr=et(h,w);tU(h,tr.ttistable(),"table expected"),tW.luaH_setint(tr.value,q,h.stack[h.top-1]),delete h.stack[--h.top]},h.exports.lua_rawsetp=function(h,w,q){It(h,1);let tr=et(h,w);tU(h,tr.ttistable(),"table expected");let tn=new tZ(tT,q),ti=h.stack[h.top-1];tW.luaH_setfrom(h,tr.value,tn,ti),delete h.stack[--h.top]},h.exports.lua_register=function(h,w,q){le(h,q),Re(h,w)},h.exports.lua_remove=function(h,w){F(h,w,-1),ht(h,1)},h.exports.lua_replace=function(h,w){_t(h,-1,w),ht(h,1)},h.exports.lua_rotate=F,h.exports.lua_setallocf=function(){return console.warn("lua_setallocf is not available"),0},h.exports.lua_setfield=function(h,w,q){Le(h,et(h,w),q)},h.exports.lua_setglobal=Re,h.exports.lua_seti=function(h,w,q){Zt(q),It(h,1);let tr=et(h,w);h.stack[h.top]=new tZ(tL,q),rt(h),tY.settable(h,tr,h.stack[h.top-1],h.stack[h.top-2]),delete h.stack[--h.top],delete h.stack[--h.top]},h.exports.lua_setmetatable=function(h,w){let q;It(h,1);let tr=et(h,w);switch(h.stack[h.top-1].ttisnil()?q=null:(tU(h,h.stack[h.top-1].ttistable(),"table expected"),q=h.stack[h.top-1].value),tr.ttnov()){case tR:case tI:tr.value.metatable=q;break;default:h.l_G.mt[tr.ttnov()]=q}return delete h.stack[--h.top],!0},h.exports.lua_settable=function(h,w){It(h,2);let q=et(h,w);tY.settable(h,q,h.stack[h.top-2],h.stack[h.top-1]),delete h.stack[--h.top],delete h.stack[--h.top]},h.exports.lua_settop=k,h.exports.lua_setupvalue=function(h,w,q){let tr=et(h,w);It(h,1);let tn=Ft(0,tr,q);if(tn){let w=tn.name;return tn.val.setfrom(h.stack[h.top-1]),delete h.stack[--h.top],w}return null},h.exports.lua_setuservalue=function(h,w){It(h,1);let q=et(h,w);tU(h,q.ttisfulluserdata(),"full userdata expected"),q.value.uservalue.setfrom(h.stack[h.top-1]),delete h.stack[--h.top]},h.exports.lua_status=function(h){return h.status},h.exports.lua_stringtonumber=function(h,w){let q=new tZ,tr=tj.luaO_str2num(w,q);return 0!==tr&&(h.stack[h.top]=q,rt(h)),tr},h.exports.lua_toboolean=function(h,w){return!et(h,w).l_isfalse()},h.exports.lua_tocfunction=function(h,w){let q=et(h,w);return q.ttislcf()||q.ttisCclosure()?q.value:null},h.exports.lua_todataview=function(h,w){let q=Dt(h,w);return new DataView(q.buffer,q.byteOffset,q.byteLength)},h.exports.lua_tointeger=function(h,w){let q=Tt(h,w);return!1===q?0:q},h.exports.lua_tointegerx=Tt,h.exports.lua_tojsstring=function(h,w){let q=et(h,w);if(!q.ttisstring()){if(!tY.cvt2str(q))return null;tj.luaO_tostring(h,q)}return q.jsstring()},h.exports.lua_tolstring=Dt,h.exports.lua_tonumber=function(h,w){let q=Lt(h,w);return!1===q?0:q},h.exports.lua_tonumberx=Lt,h.exports.lua_topointer=function(h,w){let q=et(h,w);switch(q.ttype()){case tI:case tx:case ty:case tb:case tP:case tR:case tT:return q.value;default:return null}},h.exports.lua_toproxy=function(h,w){var q,tr,tn;let ti,to=et(h,w);return q=h.l_G,tr=to.type,tn=to.value,ti=function(h){tU(h,h instanceof tG.lua_State&&q===h.l_G,"must be from same global state"),h.stack[h.top]=new tZ(tr,tn),rt(h)},tQ.set(ti,q),ti},h.exports.lua_tostring=Dt,h.exports.lua_tothread=function(h,w){let q=et(h,w);return q.ttisthread()?q.value:null},h.exports.lua_touserdata=function(h,w){let q=et(h,w);switch(q.ttnov()){case tR:return q.value.data;case tT:return q.value;default:return null}},h.exports.lua_type=ve,h.exports.lua_typename=function(h,w){return tU(h,tO<=w&&w<td,"invalid tag"),tz.ttypename(w)},h.exports.lua_upvalueid=function(h,w,q){let tr=et(h,w);switch(tr.ttype()){case tx:{let tr=be(h,w,q);return tr.f.upvals[tr.i]}case ty:{let w=tr.value;return tU(h,(0|q)===q&&q>0&&q<=w.nupvalues,"invalid upvalue index"),w.upvalue[q-1]}default:return tU(h,!1,"closure expected"),null}},h.exports.lua_upvaluejoin=function(h,w,q,tr,tn){let ti=be(h,w,q),to=be(h,tr,tn),ts=to.f.upvals[to.i];ti.f.upvals[ti.i]=ts},h.exports.lua_version=function(h){return null===h?tp:h.l_G.version},h.exports.lua_xmove=function(h,w,q){if(h!==w){It(h,q),tU(h,h.l_G===w.l_G,"moving among independent states"),tU(h,w.ci.top-w.top>=q,"stack overflow"),h.top-=q;for(let tr=0;tr<q;tr++)w.stack[w.top]=new tj.TValue,tj.setobj2s(w,w.top,h.stack[h.top+tr]),delete h.stack[h.top+tr],w.top++}}},function(h,w,q){let{lua_assert:tr}=q(4),i=function(h){let w=h.reader(h.L,h.data);if(null===w)return -1;tr(w instanceof Uint8Array,"Should only load binary of array of bytes");let q=w.length;return 0===q?-1:(h.buffer=w,h.off=0,h.n=q-1,h.buffer[h.off++])};h.exports.EOZ=-1,h.exports.luaZ_buffer=function(h){return h.buffer.subarray(0,h.n)},h.exports.luaZ_buffremove=function(h,w){h.n-=w},h.exports.luaZ_fill=i,h.exports.luaZ_read=function(h,w,q,tr){for(;tr;){if(0===h.n){if(-1===i(h))return tr;h.n++,h.off--}let tn=tr<=h.n?tr:h.n;for(let tr=0;tr<tn;tr++)w[q++]=h.buffer[h.off++];h.n-=tn,0===h.n&&(h.buffer=null),tr-=tn}return 0},h.exports.luaZ_resetbuffer=function(h){h.n=0},h.exports.luaZ_resizebuffer=function(h,w,q){let tr=new Uint8Array(q);w.buffer&&tr.set(w.buffer),w.buffer=tr},h.exports.MBuffer=class{constructor(){this.buffer=null,this.n=0}},h.exports.ZIO=class{constructor(h,w,q){this.L=h,tr("function"==typeof w,"ZIO requires a reader"),this.reader=w,this.data=q,this.n=0,this.buffer=null,this.off=0}zgetc(){return this.n-- >0?this.buffer[this.off++]:i(this)}}},function(h,w,q){let{constant_types:{LUA_TBOOLEAN:tr,LUA_TLNGSTR:tn},thread_status:{LUA_ERRSYNTAX:ti},to_luastring:to}=q(1),{LUA_MINBUFFER:ts,MAX_INT:tu,lua_assert:tl}=q(4),tc=q(11),tp=q(8),{lisdigit:td,lislalnum:tm,lislalpha:ty,lisspace:tv,lisxdigit:tb}=q(22),tx=q(6),{luaS_bless:tT,luaS_hash:tE,luaS_hashlongstr:tA,luaS_new:tO}=q(10),tw=q(9),{EOZ:tL,luaZ_buffer:tS,luaZ_buffremove:tI,luaZ_resetbuffer:tP,luaZ_resizebuffer:tR}=q(19),tN=to("_ENV",!0),tM=["and","break","do","else","elseif","end","false","for","function","goto","if","in","local","nil","not","or","repeat","return","then","true","until","while","//","..","...","==",">=","<=","~=","<<",">>","::","<eof>","<number>","<integer>","<name>","<string>"].map((h,w)=>to(h));let H=class H{constructor(){this.r=NaN,this.i=NaN,this.ts=null}};let $=class ${constructor(){this.token=NaN,this.seminfo=new H}};let lt=function(h,w){let q=h.buff;if(q.n+1>q.buffer.length){q.buffer.length>=tu/2&&Jt(h,to("lexical element too long",!0),0);let w=2*q.buffer.length;tR(h.L,q,w)}q.buffer[q.n++]=w<0?255+w+1:w},dt=function(h,w){if(w<257)return tx.luaO_pushfstring(h.L,to("'%c'",!0),w);{let q=tM[w-257];return w<289?tx.luaO_pushfstring(h.L,to("'%s'",!0),q):q}},Vt=function(h){return 10===h.current||13===h.current},S=function(h){h.current=h.z.zgetc()},U=function(h){lt(h,h.current),S(h)},tk=new tx.TValue(tr,!0),pt=function(h,w){let q=h.L,tr=tO(q,w),ti=h.h.strong.get(tA(tr));if(ti)tr=ti.key.tsvalue();else{let w=new tx.TValue(tn,tr);tw.luaH_setfrom(q,h.h,w,tk)}return tr},ut=function(h){let w=h.current;tl(Vt(h)),S(h),Vt(h)&&h.current!==w&&S(h),++h.linenumber>=tu&&Jt(h,to("chunk has too many lines",!0),0)},qt=function(h,w){return h.current===w&&(S(h),!0)},Ct=function(h,w){return(h.current===w[0].charCodeAt(0)||h.current===w[1].charCodeAt(0))&&(U(h),!0)},kt=function(h,w){let q="Ee",tr=h.current;for(tl(td(h.current)),U(h),48===tr&&Ct(h,"xX")&&(q="Pp");;)if(Ct(h,q)&&Ct(h,"-+"),tb(h.current))U(h);else{if(46!==h.current)break;U(h)}let tn=new tx.TValue;return 0===tx.luaO_str2num(tS(h.buff),tn)&&Jt(h,to("malformed number",!0),290),tn.ttisinteger()?(w.i=tn.value,291):(tl(tn.ttisfloat()),w.r=tn.value,290)},Jt=function(h,w,q){w=tc.luaG_addinfo(h.L,w,h.source,h.linenumber),q&&tx.luaO_pushfstring(h.L,to("%s near %s"),w,function(h,w){switch(w){case 292:case 293:case 290:case 291:return tx.luaO_pushfstring(h.L,to("'%s'",!0),tS(h.buff));default:return dt(h,w)}}(h,q)),tp.luaD_throw(h.L,ti)},J=function(h){let w=0,q=h.current;for(tl(91===q||93===q),U(h);61===h.current;)U(h),w++;return h.current===q?w:-w-1},Z=function(h,w,q){let tr=h.linenumber;U(h),Vt(h)&&ut(h);let tn=!1;for(;!tn;)switch(h.current){case tL:Jt(h,to(`unfinished long ${w?"string":"comment"} (starting at line ${tr})`),289);break;case 93:J(h)===q&&(U(h),tn=!0);break;case 10:case 13:lt(h,10),ut(h),w||tP(h.buff);break;default:w?U(h):S(h)}w&&(w.ts=pt(h,h.buff.buffer.subarray(2+q,h.buff.n-(2+q))))},xt=function(h,w,q){w||(h.current!==tL&&U(h),Jt(h,q,293))},rt=function(h){return U(h),xt(h,tb(h.current),to("hexadecimal digit expected",!0)),tx.luaO_hexavalue(h.current)},It=function(h){let w=rt(h);return w=(w<<4)+rt(h),tI(h.buff,2),w},ee=function(h){let w=new Uint8Array(tx.UTF8BUFFSZ),q=tx.luaO_utf8esc(w,function(h){let w=4;U(h),xt(h,123===h.current,to("missing '{'",!0));let q=rt(h);for(U(h);tb(h.current);)w++,q=(q<<4)+tx.luaO_hexavalue(h.current),xt(h,q<=1114111,to("UTF-8 value too large",!0)),U(h);return xt(h,125===h.current,to("missing '}'",!0)),S(h),tI(h.buff,w),q}(h));for(;q>0;q--)lt(h,w[tx.UTF8BUFFSZ-q])},Zt=function(h){let w,q=0;for(w=0;w<3&&td(h.current);w++)q=10*q+h.current-48,U(h);return xt(h,q<=255,to("decimal escape too large",!0)),tI(h.buff,w),q},Ut=function(h,w,q){for(U(h);h.current!==w;)switch(h.current){case tL:Jt(h,to("unfinished string",!0),289);break;case 10:case 13:Jt(h,to("unfinished string",!0),293);break;case 92:{let w,q;switch(U(h),h.current){case 97:q=7,w="read_save";break;case 98:q=8,w="read_save";break;case 102:q=12,w="read_save";break;case 110:q=10,w="read_save";break;case 114:q=13,w="read_save";break;case 116:q=9,w="read_save";break;case 118:q=11,w="read_save";break;case 120:q=It(h),w="read_save";break;case 117:ee(h),w="no_save";break;case 10:case 13:ut(h),q=10,w="only_save";break;case 92:case 34:case 39:q=h.current,w="read_save";break;case tL:w="no_save";break;case 122:for(tI(h.buff,1),S(h);tv(h.current);)Vt(h)?ut(h):S(h);w="no_save";break;default:xt(h,td(h.current),to("invalid escape sequence",!0)),q=Zt(h),w="only_save"}"read_save"===w&&S(h),"read_save"!==w&&"only_save"!==w||(tI(h.buff,1),lt(h,q));break}default:U(h)}U(h),q.ts=pt(h,h.buff.buffer.subarray(1,h.buff.n-1))},tU=Object.create(null);tM.forEach((h,w)=>tU[tE(h)]=w);let Et=function(h,w){for(tP(h.buff);;)switch(tl("number"==typeof h.current),h.current){case 10:case 13:ut(h);break;case 32:case 12:case 9:case 11:S(h);break;case 45:if(S(h),45!==h.current)return 45;if(S(h),91===h.current){let w=J(h);if(tP(h.buff),w>=0){Z(h,null,w),tP(h.buff);break}}for(;!Vt(h)&&h.current!==tL;)S(h);break;case 91:{let q=J(h);return q>=0?(Z(h,w,q),293):(-1!==q&&Jt(h,to("invalid long string delimiter",!0),293),91)}case 61:return S(h),qt(h,61)?282:61;case 60:return S(h),qt(h,61)?284:qt(h,60)?286:60;case 62:return S(h),qt(h,61)?283:qt(h,62)?287:62;case 47:return S(h),qt(h,47)?279:47;case 126:return S(h),qt(h,61)?285:126;case 58:return S(h),qt(h,58)?288:58;case 34:case 39:return Ut(h,h.current,w),293;case 46:return U(h),qt(h,46)?qt(h,46)?281:280:td(h.current)?kt(h,w):46;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return kt(h,w);case tL:return 289;default:if(ty(h.current)){do U(h);while(tm(h.current));let q=pt(h,tS(h.buff));w.ts=q;let tr=tU[tA(q)];return void 0!==tr&&tr<=22?tr+257:292}{let w=h.current;return S(h),w}}};h.exports.FIRST_RESERVED=257,h.exports.LUA_ENV=tN,h.exports.LexState=class{constructor(){this.current=NaN,this.linenumber=NaN,this.lastline=NaN,this.t=new $,this.lookahead=new $,this.fs=null,this.L=null,this.z=null,this.buff=null,this.h=null,this.dyd=null,this.source=null,this.envn=null}},h.exports.RESERVED={TK_AND:257,TK_BREAK:258,TK_DO:259,TK_ELSE:260,TK_ELSEIF:261,TK_END:262,TK_FALSE:263,TK_FOR:264,TK_FUNCTION:265,TK_GOTO:266,TK_IF:267,TK_IN:268,TK_LOCAL:269,TK_NIL:270,TK_NOT:271,TK_OR:272,TK_REPEAT:273,TK_RETURN:274,TK_THEN:275,TK_TRUE:276,TK_UNTIL:277,TK_WHILE:278,TK_IDIV:279,TK_CONCAT:280,TK_DOTS:281,TK_EQ:282,TK_GE:283,TK_LE:284,TK_NE:285,TK_SHL:286,TK_SHR:287,TK_DBCOLON:288,TK_EOS:289,TK_FLT:290,TK_INT:291,TK_NAME:292,TK_STRING:293},h.exports.isreserved=function(h){let w=tU[tA(h)];return void 0!==w&&w<=22},h.exports.luaX_lookahead=function(h){return tl(289===h.lookahead.token),h.lookahead.token=Et(h,h.lookahead.seminfo),h.lookahead.token},h.exports.luaX_newstring=pt,h.exports.luaX_next=function(h){h.lastline=h.linenumber,289!==h.lookahead.token?(h.t.token=h.lookahead.token,h.t.seminfo.i=h.lookahead.seminfo.i,h.t.seminfo.r=h.lookahead.seminfo.r,h.t.seminfo.ts=h.lookahead.seminfo.ts,h.lookahead.token=289):h.t.token=Et(h,h.t.seminfo)},h.exports.luaX_setinput=function(h,w,q,tr,tn){w.t={token:0,seminfo:new H},w.L=h,w.current=tn,w.lookahead={token:289,seminfo:new H},w.z=q,w.fs=null,w.linenumber=1,w.lastline=1,w.source=tr,w.envn=tT(h,tN),tR(h,w.buff,ts)},h.exports.luaX_syntaxerror=function(h,w){Jt(h,w,h.t.token)},h.exports.luaX_token2str=dt,h.exports.luaX_tokens=tM},function(h,w,q){let tr,tn,ti;let{lua:to,lauxlib:ts,lualib:tu,to_luastring:tl}=q(0),{LUA_MULTRET:tc,LUA_OK:tp,LUA_REGISTRYINDEX:td,LUA_RIDX_MAINTHREAD:tm,LUA_TBOOLEAN:ty,LUA_TFUNCTION:tv,LUA_TLIGHTUSERDATA:tb,LUA_TNIL:tx,LUA_TNONE:tT,LUA_TNUMBER:tE,LUA_TSTRING:tA,LUA_TTABLE:tO,LUA_TTHREAD:tw,LUA_TUSERDATA:tL,lua_atnativeerror:tS,lua_call:tI,lua_getfield:tP,lua_gettable:tR,lua_gettop:tN,lua_isnil:tM,lua_isproxy:tk,lua_newuserdata:tU,lua_pcall:tC,lua_pop:tD,lua_pushboolean:tF,lua_pushcfunction:tB,lua_pushinteger:tj,lua_pushlightuserdata:tG,lua_pushliteral:tV,lua_pushnil:tX,lua_pushnumber:tH,lua_pushstring:tz,lua_pushvalue:tK,lua_rawgeti:tY,lua_rawgetp:tW,lua_rawsetp:tq,lua_rotate:tZ,lua_setfield:tJ,lua_settable:tQ,lua_settop:t$,lua_toboolean:t0,lua_tojsstring:t1,lua_tonumber:t2,lua_toproxy:t3,lua_tothread:t4,lua_touserdata:t5,lua_type:t6}=to,{luaL_argerror:t8,luaL_checkany:t7,luaL_checkoption:t9,luaL_checkstack:er,luaL_checkudata:en,luaL_error:ei,luaL_getmetafield:eo,luaL_newlib:es,luaL_newmetatable:eu,luaL_requiref:el,luaL_setfuncs:ep,luaL_setmetatable:ed,luaL_testudata:e_,luaL_tolstring:eg}=ts,{luaopen_base:em}=tu,ey="u">typeof window?window:"u">typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:(0,eval)("this");if("u">typeof Reflect)tr=Reflect.apply,tn=Reflect.construct,ti=Reflect.deleteProperty;else{let h=Function.apply,w=Function.bind;tr=function(w,q,tr){return h.call(w,q,tr)},tn=function(h,q){switch(q.length){case 0:return new h;case 1:return new h(q[0]);case 2:return new h(q[0],q[1]);case 3:return new h(q[0],q[1],q[2]);case 4:return new h(q[0],q[1],q[2],q[3])}let tr=[null];return tr.push.apply(tr,q),new(w.apply(h,tr))},ti=Function("t","k","delete t[k]")}let ev=String.prototype.concat.bind(""),Kt=function(h){return"object"==typeof h?null!==h:"function"==typeof h},eb=tl("js object"),ve=function(h,w){let q=e_(h,w,eb);return q?q.data:void 0},xe=function(h,w){return en(h,w,eb).data},Ue=function(h,w){tU(h).data=w,ed(h,eb)},ne=function(h){tY(h,td,tm);let w=t4(h,-1);return tD(h,1),w},ex=new WeakMap,be=function(h,w){switch(typeof w){case"undefined":tX(h);break;case"number":tH(h,w);break;case"string":tz(h,tl(w));break;case"boolean":tF(h,w);break;case"symbol":tG(h,w);break;case"function":if(tk(w,h)){w(h);break}case"object":if(null===w){if(tW(h,td,null)!==tL)throw Error("js library not loaded into lua_State");break}default:{let q=ex.get(ne(h));if(!q)throw Error("js library not loaded into lua_State");let tr=q.get(w);tr?tr(h):(Ue(h,w),tr=t3(h,-1),q.set(w,tr))}}},c=function(h){let w=t5(h,1);return be(h,w),1},p=function(h,w){switch(t6(h,w)){case tT:case tx:return;case ty:return t0(h,w);case tb:return t5(h,w);case tE:return t2(h,w);case tA:return t1(h,w);case tL:{let q=ve(h,w);if(void 0!==q)return q}default:return ye(h,t3(h,w))}},b=function(h,w){let q=tC(h,w,1,0),tr=p(h,-1);if(tD(h,1),q===tp)return tr;throw tr},_=function(h,w,q,tr,tn){if(!Kt(tr))throw TypeError("`args` argument must be an object");let ti=+tr.length;ti>=0||(ti=0),er(h,2+ti,null);let to=tN(h);w(h),be(h,q);for(let w=0;w<ti;w++)be(h,tr[w]);if(tC(h,1+ti,tn,0)===tp){let w=tN(h)-to,q=Array(w);for(let tr=0;tr<w;tr++)q[tr]=p(h,to+tr+1);return t$(h,to),q}{let w=p(h,-1);throw t$(h,to),w}},x=function(h){return tR(h,1),1},N=function(h,w,q){return er(h,3,null),tB(h,x),w(h),be(h,q),b(h,2)},A=function(h,w,q){if(er(h,3,null),tB(h,x),w(h),be(h,q),tC(h,2,1,0)===tp){let w=tM(h,-1);return tD(h,1),!w}{let w=p(h,-1);throw tD(h,1),w}},Q=function(h,w,q,tr){if(er(h,4,null),tB(h,function(h){return tQ(h,1),0}),w(h),be(h,q),be(h,tr),tC(h,3,0,0)!==tp){let w=p(h,-1);throw tD(h,1),w}},Mt=function(h,w,q){if(er(h,4,null),tB(h,function(h){return tQ(h,1),0}),w(h),be(h,q),tX(h),tC(h,3,0,0)!==tp){let w=p(h,-1);throw tD(h,1),w}},Wt=function(h,w){return er(h,2,null),tB(h,function(h){return eg(h,1),1}),w(h),b(h,1)},ge=function(){let h=this.L;er(h,3,null);let w=tN(h);if(this.iter(h),this.state(h),this.last(h),tC(h,2,tc,0)===tp){let q;if(this.last=t3(h,w+1),tM(h,-1))q={done:!0,value:void 0};else{let tr=tN(h)-w,tn=Array(tr);for(let q=0;q<tr;q++)tn[q]=p(h,w+q+1);q={done:!1,value:tn}}return t$(h,w),q}{let w=p(h,-1);throw tD(h,1),w}},ye=function(h,w){let q=ne(h),zt=function(){return _(q,w,this,arguments,1)[0]};zt.apply=function(h,tr){return _(q,w,h,tr,1)[0]},zt.invoke=function(h,tr){return _(q,w,h,tr,tc)},zt.get=function(h){return N(q,w,h)},zt.has=function(h){return A(q,w,h)},zt.set=function(h,tr){return Q(q,w,h,tr)},zt.delete=function(h){return Mt(q,w,h)},zt.toString=function(){return Wt(q,w)},"function"==typeof Symbol&&(zt[Symbol.toStringTag]="Fengari object",zt[Symbol.iterator]=function(){return function(h,w){if(er(h,1,null),tB(h,function(h){return el(h,tl("_G"),em,0),tP(h,-1,tl("pairs")),w(h),tI(h,1,3),3}),tC(h,0,3,0)===tp){let w=t3(h,-3),q=t3(h,-2),tr=t3(h,-1);return tD(h,3),{L:h,iter:w,state:q,last:tr,next:ge}}{let w=p(h,-1);throw tD(h,1),w}}(q,w)},Symbol.toPrimitive&&(zt[Symbol.toPrimitive]=function(h){if("string"===h)return Wt(q,w)}));let tr=ex.get(q);if(!tr)throw Error("js library not loaded into lua_State");return tr.set(zt,w),zt},eT={new:function(h){let w=p(h,1),q=tN(h)-1,tr=Array(q);for(let w=0;w<q;w++)tr[w]=p(h,w+2);return be(h,tn(w,tr)),1},tonumber:function(h){let w=p(h,1);return tH(h,+w),1},tostring:function(h){let w=p(h,1);return tV(h,ev(w)),1},instanceof:function(h){let w=p(h,1),q=p(h,2);return tF(h,w instanceof q),1},typeof:function(h){let w=p(h,1);return tV(h,typeof w),1}};if("function"==typeof Symbol&&Symbol.iterator){let D=function(h,w){let q=xe(h,w),tn=q[Symbol.iterator];tn||t8(h,w,tl("object not iterable"));let ti=tr(tn,q,[]);return Kt(ti)||t8(h,w,tl("Result of the Symbol.iterator method is not an object")),ti},bt=function(h){let w=p(h,1).next();return w.done?0:(be(h,w.value),1)};eT.of=function(h){let w=D(h,1);return tB(h,bt),be(h,w),2}}if("function"==typeof Proxy&&"function"==typeof Symbol){let h=Symbol("lua_State"),w=Symbol("fengari-proxy"),q={apply:function(q,tr,tn){return _(q[h],q[w],tr,tn,1)[0]},construct:function(q,tr){let tn=q[h],ti=q[w],to=tr.length;er(tn,2+to,null),ti(tn);let ts=tN(tn);if(eo(tn,ts,tl("construct"))===tx)throw tD(tn,1),TypeError("not a constructor");tZ(tn,ts,1);for(let h=0;h<to;h++)be(tn,tr[h]);return b(tn,1+to)},defineProperty:function(q,tr,tn){let ti=q[h],to=q[w];return er(ti,4,null),to(ti),eo(ti,-1,tl("defineProperty"))===tx?(tD(ti,1),!1):(tZ(ti,-2,1),be(ti,tr),be(ti,tn),b(ti,3))},deleteProperty:function(q,tr){return Mt(q[h],q[w],tr)},get:function(q,tr){return N(q[h],q[w],tr)},getOwnPropertyDescriptor:function(q,tr){let tn=q[h],ti=q[w];if(er(tn,3,null),ti(tn),eo(tn,-1,tl("getOwnPropertyDescriptor"))!==tx)return tZ(tn,-2,1),be(tn,tr),b(tn,2);tD(tn,1)},getPrototypeOf:function(q){let tr=q[h],tn=q[w];return er(tr,2,null),tn(tr),eo(tr,-1,tl("getPrototypeOf"))===tx?(tD(tr,1),null):(tZ(tr,-2,1),b(tr,1))},has:function(q,tr){return A(q[h],q[w],tr)},ownKeys:function(q){let tr=q[h],tn=q[w];if(er(tr,2,null),tn(tr),eo(tr,-1,tl("ownKeys"))===tx)throw tD(tr,1),Error("ownKeys unknown for fengari object");return tZ(tr,-2,1),b(tr,1)},set:function(q,tr,tn){return Q(q[h],q[w],tr,tn),!0},setPrototypeOf:function(q,tr){let tn=q[h],ti=q[w];return er(tn,3,null),ti(tn),eo(tn,-1,tl("setPrototypeOf"))===tx?(tD(tn,1),!1):(tZ(tn,-2,1),be(tn,tr),b(tn,2))}},zt=function(){let h=(function(){}).bind();return delete h.length,delete h.name,h},tr=Function("return ()=>void 0;"),fe=function(){let h=tr();return delete h.length,delete h.name,h},ae=function(tr,tn,ti){let to;let ts=ne(tr);switch(ti){case"function":to=zt();break;case"arrow_function":to=fe();break;case"object":to={};break;default:throw TypeError("invalid type to createproxy")}return to[w]=tn,to[h]=ts,new Proxy(to,q)},tn=["function","arrow_function","object"],ti=tn.map(h=>tl(h));eT.createproxy=function(h){t7(h,1);let w=tn[t9(h,2,ti[0],ti)],q=ae(h,t3(h,1),w);return be(h,q),1}}let eE={__index:function(h){let w=xe(h,1),q=p(h,2);return be(h,w[q]),1},__newindex:function(h){let w=xe(h,1),q=p(h,2),tr=p(h,3);return void 0===tr?ti(w,q):w[q]=tr,0},__tostring:function(h){let w=ev(xe(h,1));return tz(h,tl(w)),1},__call:function(h){let w,q=xe(h,1),tn=tN(h)-1,ti=Array(Math.max(0,tn-1));if(tn>0&&(w=p(h,2),tn-- >0))for(let w=0;w<tn;w++)ti[w]=p(h,w+3);return be(h,tr(q,w,ti)),1},__pairs:function(h){let w,q,tn,ti,to=xe(h,1);if("function"!=typeof Symbol||void 0===(w=to[Symbol.for("__pairs")]))q=function(h){if(this.index>=this.keys.length)return;let w=this.keys[this.index++];return[w,this.object[w]]},tn={object:to,keys:Object.keys(to),index:0};else{let ts=tr(w,to,[]);void 0===ts&&ei(h,tl("bad '__pairs' result (object with keys 'iter', 'state', 'first' expected)")),void 0===(q=ts.iter)&&ei(h,tl("bad '__pairs' result (object.iter is missing)")),tn=ts.state,ti=ts.first}return tB(h,function(){let w=p(h,1),tn=p(h,2),ti=tr(q,w,[tn]);if(void 0===ti)return 0;Array.isArray(ti)||ei(h,tl("bad iterator result (Array or undefined expected)")),er(h,ti.length,null);for(let w=0;w<ti.length;w++)be(h,ti[w]);return ti.length}),be(h,tn),be(h,ti),3},__len:function(h){let w,q=xe(h,1);return be(h,"function"!=typeof Symbol||void 0===(w=q[Symbol.for("__len")])?q.length:tr(w,q,[])),1}};h.exports.FENGARI_INTEROP_VERSION="0.1",h.exports.FENGARI_INTEROP_VERSION_NUM=1,h.exports.FENGARI_INTEROP_RELEASE="0.1.2",h.exports.checkjs=xe,h.exports.testjs=ve,h.exports.pushjs=Ue,h.exports.push=be,h.exports.tojs=p,h.exports.luaopen_js=function(h){return ex.set(ne(h),new WeakMap),tS(h,c),es(h,eT),tV(h,"0.1"),tJ(h,-2,tl("_VERSION")),tj(h,1),tJ(h,-2,tl("_VERSION_NUM")),tV(h,"0.1.2"),tJ(h,-2,tl("_RELEASE")),eu(h,eb),ep(h,eE,0),tD(h,1),Ue(h,null),tK(h,-1),tq(h,td,null),tJ(h,-2,tl("null")),be(h,ey),tJ(h,-2,tl("global")),1}},function(h,w,q){let{luastring_of:tr}=q(1),tn=tr(0,0,0,0,0,0,0,0,0,0,8,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,22,22,22,22,22,22,22,22,22,22,4,4,4,4,4,4,4,21,21,21,21,21,21,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,4,4,4,5,4,21,21,21,21,21,21,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);h.exports.lisdigit=function(h){return(2&tn[h+1])!=0},h.exports.lislalnum=function(h){return(3&tn[h+1])!=0},h.exports.lislalpha=function(h){return(1&tn[h+1])!=0},h.exports.lisprint=function(h){return(4&tn[h+1])!=0},h.exports.lisspace=function(h){return(8&tn[h+1])!=0},h.exports.lisxdigit=function(h){return(16&tn[h+1])!=0}},function(h,w,q){let{LUA_MULTRET:tr,to_luastring:tn}=q(1),{BinOpr:{OPR_ADD:ti,OPR_AND:to,OPR_BAND:ts,OPR_BOR:tu,OPR_BXOR:tl,OPR_CONCAT:tc,OPR_DIV:tp,OPR_EQ:td,OPR_GE:tm,OPR_GT:ty,OPR_IDIV:tv,OPR_LE:tb,OPR_LT:tx,OPR_MOD:tT,OPR_MUL:tE,OPR_NE:tA,OPR_NOBINOPR:tO,OPR_OR:tw,OPR_POW:tL,OPR_SHL:tS,OPR_SHR:tI,OPR_SUB:tP},UnOpr:{OPR_BNOT:tR,OPR_LEN:tN,OPR_MINUS:tM,OPR_NOT:tk,OPR_NOUNOPR:tU},NO_JUMP:tC,getinstruction:tD,luaK_checkstack:tF,luaK_codeABC:tB,luaK_codeABx:tj,luaK_codeAsBx:tG,luaK_codek:tV,luaK_concat:tX,luaK_dischargevars:tH,luaK_exp2RK:tz,luaK_exp2anyreg:tK,luaK_exp2anyregup:tY,luaK_exp2nextreg:tW,luaK_exp2val:tq,luaK_fixline:tZ,luaK_getlabel:tJ,luaK_goiffalse:tQ,luaK_goiftrue:t$,luaK_indexed:t0,luaK_infix:t1,luaK_intK:t2,luaK_jump:t3,luaK_jumpto:t4,luaK_nil:t5,luaK_patchclose:t6,luaK_patchlist:t8,luaK_patchtohere:t7,luaK_posfix:t9,luaK_prefix:er,luaK_reserveregs:en,luaK_ret:ei,luaK_self:eo,luaK_setlist:es,luaK_setmultret:eu,luaK_setoneret:el,luaK_setreturns:ep,luaK_storevar:ed,luaK_stringK:e_}=q(35),eg=q(8),em=q(13),ey=q(20),{LUAI_MAXCCALLS:ev,MAX_INT:eb,lua_assert:ex}=q(4),eT=q(6),{OpCodesI:{OP_CALL:eE,OP_CLOSURE:eO,OP_FORLOOP:eL,OP_FORPREP:eS,OP_GETUPVAL:eI,OP_MOVE:eP,OP_NEWTABLE:eR,OP_SETTABLE:eN,OP_TAILCALL:eM,OP_TFORCALL:ek,OP_TFORLOOP:eU,OP_VARARG:eC},LFIELDS_PER_FLUSH:eD,SETARG_B:eF,SETARG_C:eB,SET_OPCODE:ej}=q(16),{luaS_eqlngstr:eG,luaS_new:eV,luaS_newliteral:eX}=q(10),eH=q(9),ez=em.Proto,eK=ey.RESERVED,zt=function(h){return h===eY.VCALL||h===eY.VVARARG},he=function(h,w){return eG(h,w)};let fe=class fe{constructor(){this.previous=null,this.firstlabel=NaN,this.firstgoto=NaN,this.nactvar=NaN,this.upval=NaN,this.isloop=NaN}};let eY={VVOID:0,VNIL:1,VTRUE:2,VFALSE:3,VK:4,VKFLT:5,VKINT:6,VNONRELOC:7,VLOCAL:8,VUPVAL:9,VINDEXED:10,VJMP:11,VRELOCABLE:12,VCALL:13,VVARARG:14};let Ae=class Ae{constructor(){this.k=NaN,this.u={ival:NaN,nval:NaN,info:NaN,ind:{idx:NaN,t:NaN,vt:NaN}},this.t=NaN,this.f=NaN}to(h){this.k=h.k,this.u=h.u,this.t=h.t,this.f=h.f}};let je=class je{constructor(){this.f=null,this.prev=null,this.ls=null,this.bl=null,this.pc=NaN,this.lasttarget=NaN,this.jpc=NaN,this.nk=NaN,this.np=NaN,this.firstlocal=NaN,this.nlocvars=NaN,this.nactvar=NaN,this.nups=NaN,this.freereg=NaN}};let de=class de{constructor(){this.arr=[],this.n=NaN,this.size=NaN}};let Oe=function(h,w){h.t.token=0,ey.luaX_syntaxerror(h,w)},Ee=function(h,w){ey.luaX_syntaxerror(h,eT.luaO_pushfstring(h.L,tn("%s expected",!0),ey.luaX_token2str(h,w)))},Ne=function(h,w,q,tr){let ti,to,ts,tu;w>q&&(ti=h.ls.L,ts=0===(to=h.f.linedefined)?tn("main function",!0):eT.luaO_pushfstring(ti,tn("function at line %d",!0),to),tu=eT.luaO_pushfstring(ti,tn("too many %s (limit is %d) in %s",!0),tr,q,ts),ey.luaX_syntaxerror(h.ls,tu))},ke=function(h,w){return h.t.token===w&&(ey.luaX_next(h),!0)},ir=function(h,w){h.t.token!==w&&Ee(h,w)},Be=function(h,w){ir(h,w),ey.luaX_next(h)},or=function(h,w,q){w||ey.luaX_syntaxerror(h,q)},Ze=function(h,w,q,tr){ke(h,w)||(tr===h.linenumber?Ee(h,w):ey.luaX_syntaxerror(h,eT.luaO_pushfstring(h.L,tn("%s expected (to close %s at line %d)"),ey.luaX_token2str(h,w),ey.luaX_token2str(h,q),tr)))},L=function(h){ir(h,eK.TK_NAME);let w=h.t.seminfo.ts;return ey.luaX_next(h),w},ot=function(h,w,q){h.f=h.t=tC,h.k=w,h.u.info=q},Gt=function(h,w,q){ot(w,eY.VK,e_(h.fs,q))},Ht=function(h,w){Gt(h,w,L(h))},te=function(h,w){let q,tr;let ti=h.fs,to=h.dyd,ts=((tr=(q=h.fs).f).locvars[q.nlocvars]=new eT.LocVar,tr.locvars[q.nlocvars].varname=w,q.nlocvars++);Ne(ti,to.actvar.n+1-ti.firstlocal,200,tn("local variables",!0)),to.actvar.arr[to.actvar.n]=new class{constructor(){this.idx=NaN}},to.actvar.arr[to.actvar.n].idx=ts,to.actvar.n++},Bt=function(h,w){te(h,ey.luaX_newstring(h,tn(w,!0)))},Xt=function(h,w){let q=h.ls.dyd.actvar.arr[h.firstlocal+w].idx;return ex(q<h.nlocvars),h.f.locvars[q]},Pt=function(h,w){let q=h.fs;for(q.nactvar=q.nactvar+w;w;w--)Xt(q,q.nactvar-w).startpc=q.pc},$t=function(h,w,q){let tr=h.f;return Ne(h,h.nups+1,em.MAXUPVAL,tn("upvalues",!0)),tr.upvalues[h.nups]={instack:q.k===eY.VLOCAL,idx:q.u.info,name:w},h.nups++},oe=function(h,w,q,tr){if(null===h)ot(q,eY.VVOID,0);else{let tn=function(h,w){for(let q=h.nactvar-1;q>=0;q--)if(he(w,Xt(h,q).varname))return q;return -1}(h,w);if(tn>=0)ot(q,eY.VLOCAL,tn),tr||function(h,w){let q=h.bl;for(;q.nactvar>w;)q=q.previous;q.upval=1}(h,tn);else{let tr=function(h,w){let q=h.f.upvalues;for(let tr=0;tr<h.nups;tr++)if(he(q[tr].name,w))return tr;return -1}(h,w);if(tr<0){if(oe(h.prev,w,q,0),q.k===eY.VVOID)return;tr=$t(h,w,q)}ot(q,eY.VUPVAL,tr)}}},m=function(h,w){let q=L(h),tr=h.fs;if(oe(tr,q,w,1),w.k===eY.VVOID){let tn=new Ae;oe(tr,h.envn,w,1),ex(w.k!==eY.VVOID),Gt(h,tn,q),t0(tr,w,tn)}},z=function(h,w,q,tr){let tn=h.fs,ti=w-q;if(zt(tr.k))++ti<0&&(ti=0),ep(tn,tr,ti),ti>1&&en(tn,ti-1);else if(tr.k!==eY.VVOID&&tW(tn,tr),ti>0){let h=tn.freereg;en(tn,ti),t5(tn,h,ti)}q>w&&(h.fs.freereg-=q-w)},X=function(h){let w=h.L;++w.nCcalls,Ne(h.fs,w.nCcalls,ev,tn("JS levels",!0))},ct=function(h){return h.L.nCcalls--},at=function(h,w,q){let tr=h.fs,ti=h.dyd.gt,to=ti.arr[w];if(ex(he(to.name,q.name)),to.nactvar<q.nactvar){let w=Xt(tr,to.nactvar).varname,q=eT.luaO_pushfstring(h.L,tn("<goto %s> at line %d jumps into the scope of local '%s'"),to.name.getstr(),to.line,w.getstr());Oe(h,q)}t8(tr,to.pc,q.pc);for(let h=w;h<ti.n-1;h++)ti.arr[h]=ti.arr[h+1];ti.n--},st=function(h,w){let q=h.fs.bl,tr=h.dyd,tn=tr.gt.arr[w];for(let ti=q.firstlabel;ti<tr.label.n;ti++){let to=tr.label.arr[ti];if(he(to.name,tn.name))return tn.nactvar>to.nactvar&&(q.upval||tr.label.n>q.firstlabel)&&t6(h.fs,tn.pc,to.nactvar),at(h,w,to),!0}return!1},ie=function(h,w,q,tr,tn){let ti=w.n;return w.arr[ti]=new class{constructor(){this.name=null,this.pc=NaN,this.line=NaN,this.nactvar=NaN}},w.arr[ti].name=q,w.arr[ti].line=tr,w.arr[ti].nactvar=h.fs.nactvar,w.arr[ti].pc=tn,w.n=ti+1,ti},pe=function(h,w){let q=h.dyd.gt,tr=h.fs.bl.firstgoto;for(;tr<q.n;)he(q.arr[tr].name,w.name)?at(h,tr,w):tr++},me=function(h,w,q){w.isloop=q,w.nactvar=h.nactvar,w.firstlabel=h.ls.dyd.label.n,w.firstgoto=h.ls.dyd.gt.n,w.upval=0,w.previous=h.bl,h.bl=w,ex(h.freereg===h.nactvar)},Ie=function(h,w,q){w.prev=h.fs,w.ls=h,h.fs=w,w.pc=0,w.lasttarget=0,w.jpc=tC,w.freereg=0,w.nk=0,w.np=0,w.nups=0,w.nlocvars=0,w.nactvar=0,w.firstlocal=h.dyd.actvar.n,w.bl=null;let tr=w.f;tr.source=h.source,tr.maxstacksize=2,me(w,q,!1)},E=function(h){var w;let q,tr,ti,to=h.bl,ts=h.ls;if(to.previous&&to.upval){let w=t3(h);t6(h,w,to.nactvar),t7(h,w)}to.isloop&&(q=eX(ts.L,"break"),tr=ie(ts,ts.dyd.label,q,0,ts.fs.pc),pe(ts,ts.dyd.label.arr[tr])),h.bl=to.previous,function(h,w){for(h.ls.dyd.actvar.n-=h.nactvar-w;h.nactvar>w;)Xt(h,--h.nactvar).endpc=h.pc}(h,to.nactvar),ex(to.nactvar===h.nactvar),h.freereg=h.nactvar,ts.dyd.label.n=to.firstlabel,to.previous?function(h,w){let q=w.firstgoto,tr=h.ls.dyd.gt;for(;q<tr.n;){let tn=tr.arr[q];tn.nactvar>w.nactvar&&(w.upval&&t6(h,tn.pc,w.nactvar),tn.nactvar=w.nactvar),st(h.ls,q)||q++}}(h,to):to.firstgoto<ts.dyd.gt.n&&(w=ts.dyd.gt.arr[to.firstgoto],ti=ey.isreserved(w.name)?"<%s> at line %d not inside a loop":"no visible label '%s' for <goto> at line %d",ti=eT.luaO_pushfstring(ts.L,tn(ti),w.name.getstr(),w.line),Oe(ts,ti))},j=function(h){let w=h.fs;ei(w,0,0),E(w),ex(null===w.bl),h.fs=w.prev},mt=function(h,w){switch(h.t.token){case eK.TK_ELSE:case eK.TK_ELSEIF:case eK.TK_END:case eK.TK_EOS:return!0;case eK.TK_UNTIL:return w;default:return!1}},Qt=function(h){for(;!mt(h,1);){if(h.t.token===eK.TK_RETURN)return void fi(h);fi(h)}},Te=function(h,w){let q=h.fs,tr=new Ae;tY(q,w),ey.luaX_next(h),Ht(h,tr),t0(q,w,tr)},Ce=function(h,w){ey.luaX_next(h),Ar(h,w),tq(h.fs,w),Be(h,93)},rr=function(h,w){let q=h.fs,tr=h.fs.freereg,ti=new Ae,to=new Ae;h.t.token===eK.TK_NAME?(Ne(q,w.nh,eb,tn("items in a constructor",!0)),Ht(h,ti)):Ce(h,ti),w.nh++,Be(h,61);let ts=tz(q,ti);Ar(h,to),tB(q,eN,w.t.u.info,ts,tz(q,to)),q.freereg=tr},Ur=function(h,w){w.v.k!==eY.VVOID&&(tW(h,w.v),w.v.k=eY.VVOID,w.tostore===eD&&(es(h,w.t.u.info,w.na,w.tostore),w.tostore=0))},Kr=function(h,w){Ar(h,w.v),Ne(h.fs,w.na,eb,tn("items in a constructor",!0)),w.na++,w.tostore++},Yr=function(h,w){switch(h.t.token){case eK.TK_NAME:61!==ey.luaX_lookahead(h)?Kr(h,w):rr(h,w);break;case 91:rr(h,w);break;default:Kr(h,w)}},br=function(h,w){let q=h.fs,tn=h.linenumber,ti=tB(q,eR,0,0,0),to=new class{constructor(){this.v=new Ae,this.t=new Ae,this.nh=NaN,this.na=NaN,this.tostore=NaN}};to.na=to.nh=to.tostore=0,to.t=w,ot(w,eY.VRELOCABLE,ti),ot(to.v,eY.VVOID,0),tW(h.fs,w),Be(h,123);do{if(ex(to.v.k===eY.VVOID||to.tostore>0),125===h.t.token)break;Ur(q,to),Yr(h,to)}while(ke(h,44)||ke(h,59));Ze(h,125,123,tn),0!==to.tostore&&(zt(to.v.k)?(eu(q,to.v),es(q,to.t.u.info,to.na,tr),to.na--):(to.v.k!==eY.VVOID&&tW(q,to.v),es(q,to.t.u.info,to.na,to.tostore))),eF(q.f.code[ti],eT.luaO_int2fb(to.na)),eB(q.f.code[ti],eT.luaO_int2fb(to.nh))},We=function(h,w,q,tr){let ti,to,ts,tu,tl=new je,tc=new fe;tl.f=(ti=h.L,to=new ez(ti),(ts=h.fs).f.p[ts.np++]=to,to),tl.f.linedefined=tr,Ie(h,tl,tc),Be(h,40),q&&(Bt(h,"self"),Pt(h,1)),function(h){let w=h.fs,q=w.f,tr=0;if(q.is_vararg=!1,41!==h.t.token)do switch(h.t.token){case eK.TK_NAME:te(h,L(h)),tr++;break;case eK.TK_DOTS:ey.luaX_next(h),q.is_vararg=!0;break;default:ey.luaX_syntaxerror(h,tn("<name> or '...' expected",!0))}while(!q.is_vararg&&ke(h,44));Pt(h,tr),q.numparams=w.nactvar,en(w,w.nactvar)}(h),Be(h,41),Qt(h),tl.f.lastlinedefined=h.linenumber,Ze(h,eK.TK_END,eK.TK_FUNCTION,tr),tu=h.fs.prev,ot(w,eY.VRELOCABLE,tj(tu,eO,0,tu.np-1)),tW(tu,w),j(h)},Tr=function(h,w){let q=1;for(Ar(h,w);ke(h,44);)tW(h.fs,w),Ar(h,w),q++;return q},qo=function(h,w,q){let ti,to=h.fs,ts=new Ae;switch(h.t.token){case 40:ey.luaX_next(h),41===h.t.token?ts.k=eY.VVOID:(Tr(h,ts),eu(to,ts)),Ze(h,41,40,q);break;case 123:br(h,ts);break;case eK.TK_STRING:Gt(h,ts,h.t.seminfo.ts),ey.luaX_next(h);break;default:ey.luaX_syntaxerror(h,tn("function arguments expected",!0))}ex(w.k===eY.VNONRELOC);let tu=w.u.info;zt(ts.k)?ti=tr:(ts.k!==eY.VVOID&&tW(to,ts),ti=to.freereg-(tu+1)),ot(w,eY.VCALL,tB(to,eE,tu,ti+1,2)),tZ(to,q),to.freereg=tu+1},li=function(h,w){let q=h.fs,tr=h.linenumber;for(!function(h,w){switch(h.t.token){case 40:{let q=h.linenumber;return ey.luaX_next(h),Ar(h,w),Ze(h,41,40,q),void tH(h.fs,w)}case eK.TK_NAME:return void m(h,w);default:ey.luaX_syntaxerror(h,tn("unexpected symbol",!0))}}(h,w);;)switch(h.t.token){case 46:Te(h,w);break;case 91:{let tr=new Ae;tY(q,w),Ce(h,tr),t0(q,w,tr);break}case 58:{let tn=new Ae;ey.luaX_next(h),Ht(h,tn),eo(q,w,tn),qo(h,w,tr);break}case 40:case eK.TK_STRING:case 123:tW(q,w),qo(h,w,tr);break;default:return}},eW=[{left:10,right:10},{left:10,right:10},{left:11,right:11},{left:11,right:11},{left:14,right:13},{left:11,right:11},{left:11,right:11},{left:6,right:6},{left:4,right:4},{left:5,right:5},{left:7,right:7},{left:7,right:7},{left:9,right:8},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:2,right:2},{left:1,right:1}],ci=function(h,w,q){X(h);let tr=function(h){switch(h){case eK.TK_NOT:return tk;case 45:return tM;case 126:return tR;case 35:return tN;default:return tU}}(h.t.token);if(tr!==tU){let q=h.linenumber;ey.luaX_next(h),ci(h,w,12),er(h.fs,tr,w,q)}else!function(h,w){switch(h.t.token){case eK.TK_FLT:ot(w,eY.VKFLT,0),w.u.nval=h.t.seminfo.r;break;case eK.TK_INT:ot(w,eY.VKINT,0),w.u.ival=h.t.seminfo.i;break;case eK.TK_STRING:Gt(h,w,h.t.seminfo.ts);break;case eK.TK_NIL:ot(w,eY.VNIL,0);break;case eK.TK_TRUE:ot(w,eY.VTRUE,0);break;case eK.TK_FALSE:ot(w,eY.VFALSE,0);break;case eK.TK_DOTS:{let q=h.fs;or(h,q.f.is_vararg,tn("cannot use '...' outside a vararg function",!0)),ot(w,eY.VVARARG,tB(q,eC,0,1,0));break}case 123:return void br(h,w);case eK.TK_FUNCTION:return ey.luaX_next(h),void We(h,w,0,h.linenumber);default:return void li(h,w)}ey.luaX_next(h)}(h,w);let tC=function(h){switch(h){case 43:return ti;case 45:return tP;case 42:return tE;case 37:return tT;case 94:return tL;case 47:return tp;case eK.TK_IDIV:return tv;case 38:return ts;case 124:return tu;case 126:return tl;case eK.TK_SHL:return tS;case eK.TK_SHR:return tI;case eK.TK_CONCAT:return tc;case eK.TK_NE:return tA;case eK.TK_EQ:return td;case 60:return tx;case eK.TK_LE:return tb;case 62:return ty;case eK.TK_GE:return tm;case eK.TK_AND:return to;case eK.TK_OR:return tw;default:return tO}}(h.t.token);for(;tC!==tO&&eW[tC].left>q;){let q=new Ae,tr=h.linenumber;ey.luaX_next(h),t1(h.fs,tC,w);let tn=ci(h,q,eW[tC].right);t9(h.fs,tC,w,q,tr),tC=tn}return ct(h),tC},Ar=function(h,w){ci(h,w,0)},An=function(h){let w=h.fs;me(w,new fe,0),Qt(h),E(w)};let Zo=class Zo{constructor(){this.prev=null,this.v=new Ae}};let Jo=function(h,w,q){var tr;let ti=new Ae;if(or(h,(tr=w.v.k,eY.VLOCAL<=tr&&tr<=eY.VINDEXED),tn("syntax error",!0)),ke(h,44)){let tr=new Zo;tr.prev=w,li(h,tr.v),tr.v.k!==eY.VINDEXED&&function(h,w,q){let tr=h.fs,tn=tr.freereg,ti=!1;for(;w;w=w.prev)w.v.k===eY.VINDEXED&&(w.v.u.ind.vt===q.k&&w.v.u.ind.t===q.u.info&&(ti=!0,w.v.u.ind.vt=eY.VLOCAL,w.v.u.ind.t=tn),q.k===eY.VLOCAL&&w.v.u.ind.idx===q.u.info&&(ti=!0,w.v.u.ind.idx=tn));ti&&(tB(tr,q.k===eY.VLOCAL?eP:eI,tn,q.u.info,0),en(tr,1))}(h,w,tr.v),Ne(h.fs,q+h.L.nCcalls,ev,tn("JS levels",!0)),Jo(h,tr,q+1)}else{Be(h,61);let tr=Tr(h,ti);if(tr===q)return el(h.fs,ti),void ed(h.fs,w.v,ti);z(h,q,tr,ti)}ot(ti,eY.VNONRELOC,h.fs.freereg-1),ed(h.fs,w.v,ti)},Qo=function(h){let w=new Ae;return Ar(h,w),w.k===eY.VNIL&&(w.k=eY.VFALSE),t$(h.fs,w),w.f},ta=function(h,w){let q,tr=h.linenumber;ke(h,eK.TK_GOTO)?q=L(h):(ey.luaX_next(h),q=eX(h.L,"break"));let tn=ie(h,h.dyd.gt,q,tr,w);st(h,tn)},Xu=function(h,w,q){let tr,ti=h.fs,to=h.dyd.label;(function(h,w,q){for(let tr=h.bl.firstlabel;tr<w.n;tr++)if(he(q,w.arr[tr].name)){let ti=eT.luaO_pushfstring(h.ls.L,tn("label '%s' already defined on line %d",!0),q.getstr(),w.arr[tr].line);Oe(h.ls,ti)}})(ti,to,w),Be(h,eK.TK_DBCOLON),tr=ie(h,to,w,q,tJ(ti)),function(h){for(;59===h.t.token||h.t.token===eK.TK_DBCOLON;)fi(h)}(h),mt(h,0)&&(to.arr[tr].nactvar=ti.bl.nactvar),pe(h,to.arr[tr])},hi=function(h){let w=new Ae;return Ar(h,w),tW(h.fs,w),ex(w.k===eY.VNONRELOC),w.u.info},ea=function(h,w,q,tr,tn){let ti,to=new fe,ts=h.fs;Pt(h,3),Be(h,eK.TK_DO);let tu=tn?tG(ts,eS,w,tC):t3(ts);me(ts,to,0),Pt(h,tr),en(ts,tr),An(h),E(ts),t7(ts,tu),tn?ti=tG(ts,eL,w,tC):(tB(ts,ek,w,0,tr),tZ(ts,q),ti=tG(ts,eU,w+2,tC)),t8(ts,ti,tu+1),tZ(ts,q)},Hu=function(h,w){let q=h.fs;me(q,new fe,1),ey.luaX_next(h);let tr=L(h);switch(h.t.token){case 61:let ti,to;to=(ti=h.fs).freereg,Bt(h,"(for index)"),Bt(h,"(for limit)"),Bt(h,"(for step)"),te(h,tr),Be(h,61),hi(h),Be(h,44),hi(h),ke(h,44)?hi(h):(tV(ti,ti.freereg,t2(ti,1)),en(ti,1)),ea(h,to,w,1,1);break;case 44:case eK.TK_IN:!function(h,w){let q=h.fs,tr=new Ae,tn=4,ti=q.freereg;for(Bt(h,"(for generator)"),Bt(h,"(for state)"),Bt(h,"(for control)"),te(h,w);ke(h,44);)te(h,L(h)),tn++;Be(h,eK.TK_IN);let to=h.linenumber;z(h,3,Tr(h,tr),tr),tF(q,3),ea(h,ti,to,tn-3,0)}(h,tr);break;default:ey.luaX_syntaxerror(h,tn("'=' or 'in' expected",!0))}Ze(h,eK.TK_END,eK.TK_FOR,w),E(q)},ra=function(h,w){let q,tr=new fe,tn=h.fs,ti=new Ae;if(ey.luaX_next(h),Ar(h,ti),Be(h,eK.TK_THEN),h.t.token===eK.TK_GOTO||h.t.token===eK.TK_BREAK){for(tQ(h.fs,ti),me(tn,tr,!1),ta(h,ti.t);ke(h,59););if(mt(h,0))return E(tn),w;q=t3(tn)}else t$(h.fs,ti),me(tn,tr,!1),q=ti.f;return Qt(h),E(tn),h.t.token!==eK.TK_ELSE&&h.t.token!==eK.TK_ELSEIF||(w=tX(tn,w,t3(tn))),t7(tn,q),w},zu=function(h,w){let q=new Ae,tr=new Ae;ey.luaX_next(h);let tn=function(h,w){let q=0;for(m(h,w);46===h.t.token;)Te(h,w);return 58===h.t.token&&(q=1,Te(h,w)),q}(h,q);We(h,tr,tn,w),ed(h.fs,q,tr),tZ(h.fs,w)},fi=function(h){let w=h.linenumber;switch(X(h),h.t.token){case 59:ey.luaX_next(h);break;case eK.TK_IF:!function(h,w){let q=h.fs,tr=tC;for(tr=ra(h,tr);h.t.token===eK.TK_ELSEIF;)tr=ra(h,tr);ke(h,eK.TK_ELSE)&&An(h),Ze(h,eK.TK_END,eK.TK_IF,w),t7(q,tr)}(h,w);break;case eK.TK_WHILE:let q,ti,to,ts;q=h.fs,ti=new fe,ey.luaX_next(h),to=tJ(q),ts=Qo(h),me(q,ti,1),Be(h,eK.TK_DO),An(h),t4(q,to),Ze(h,eK.TK_END,eK.TK_WHILE,w),E(q),t7(q,ts);break;case eK.TK_DO:ey.luaX_next(h),An(h),Ze(h,eK.TK_END,eK.TK_DO,w);break;case eK.TK_FOR:Hu(h,w);break;case eK.TK_REPEAT:let tu,tl,tc,tp,td;tl=tJ(tu=h.fs),tc=new fe,tp=new fe,me(tu,tc,1),me(tu,tp,0),ey.luaX_next(h),Qt(h),Ze(h,eK.TK_UNTIL,eK.TK_REPEAT,w),td=Qo(h),tp.upval&&t6(tu,td,tp.nactvar),E(tu),t8(tu,td,tl),E(tu);break;case eK.TK_FUNCTION:zu(h,w);break;case eK.TK_LOCAL:let tm,ty;ey.luaX_next(h),ke(h,eK.TK_FUNCTION)?(tm=new Ae,ty=h.fs,te(h,L(h)),Pt(h,1),We(h,tm,0,h.linenumber),Xt(ty,tm.u.info).startpc=ty.pc):function(h){let w,q=0,tr=new Ae;do te(h,L(h)),q++;while(ke(h,44));ke(h,61)?w=Tr(h,tr):(tr.k=eY.VVOID,w=0),z(h,q,w,tr),Pt(h,q)}(h);break;case eK.TK_DBCOLON:ey.luaX_next(h),Xu(h,L(h),w);break;case eK.TK_RETURN:let tv,tb,tx,tT;ey.luaX_next(h),tx=h.fs,tT=new Ae,mt(h,1)||59===h.t.token?tv=tb=0:(tb=Tr(h,tT),zt(tT.k)?(eu(tx,tT),tT.k===eY.VCALL&&1===tb&&(ej(tD(tx,tT),eM),ex(tD(tx,tT).A===tx.nactvar)),tv=tx.nactvar,tb=tr):1===tb?tv=tK(tx,tT):(tW(tx,tT),tv=tx.nactvar,ex(tb===tx.freereg-tv))),ei(tx,tv,tb),ke(h,59);break;case eK.TK_BREAK:case eK.TK_GOTO:ta(h,t3(h.fs));break;default:let tE,tA;tE=h.fs,li(h,(tA=new Zo).v),61===h.t.token||44===h.t.token?(tA.prev=null,Jo(h,tA,1)):(or(h,tA.v.k===eY.VCALL,tn("syntax error",!0)),eB(tD(tE,tA.v),1))}ex(h.fs.f.maxstacksize>=h.fs.freereg&&h.fs.freereg>=h.fs.nactvar),h.fs.freereg=h.fs.nactvar,ct(h)};h.exports.Dyndata=class{constructor(){this.actvar={arr:[],n:NaN,size:NaN},this.gt=new de,this.label=new de}},h.exports.expkind=eY,h.exports.expdesc=Ae,h.exports.luaY_parser=function(h,w,q,tr,tn,ti){let to,ts,tu=new ey.LexState,tl=new je,tc=em.luaF_newLclosure(h,1);return eg.luaD_inctop(h),h.stack[h.top-1].setclLvalue(tc),tu.h=eH.luaH_new(h),eg.luaD_inctop(h),h.stack[h.top-1].sethvalue(tu.h),tl.f=tc.p=new ez(h),tl.f.source=eV(h,tn),tu.buff=q,tu.dyd=tr,tr.actvar.n=tr.gt.n=tr.label.n=0,ey.luaX_setinput(h,tu,w,tl.f.source,ti),to=new fe,ts=new Ae,Ie(tu,tl,to),tl.f.is_vararg=!0,ot(ts,eY.VLOCAL,0),$t(tl,tu.envn,ts),ey.luaX_next(tu),Qt(tu),ir(tu,eK.TK_EOS),j(tu),ex(!tl.prev&&1===tl.nups&&!tu.fs),ex(0===tr.actvar.n&&0===tr.gt.n&&0===tr.label.n),delete h.stack[--h.top],tc},h.exports.vkisinreg=function(h){return h===eY.VNONRELOC||h===eY.VLOCAL}},function(h,w,q){let tr,tn;let{LUA_MULTRET:ti,LUA_OK:to,LUA_TFUNCTION:ts,LUA_TNIL:tu,LUA_TNONE:tl,LUA_TNUMBER:tc,LUA_TSTRING:tp,LUA_TTABLE:td,LUA_VERSION:tm,LUA_YIELD:ty,lua_call:tv,lua_callk:tb,lua_concat:tx,lua_error:tT,lua_getglobal:tE,lua_geti:tA,lua_getmetatable:tO,lua_gettop:tw,lua_insert:tL,lua_isnil:tS,lua_isnone:tI,lua_isstring:tP,lua_load:tR,lua_next:tN,lua_pcallk:tM,lua_pop:tk,lua_pushboolean:tU,lua_pushcfunction:tC,lua_pushglobaltable:tD,lua_pushinteger:tF,lua_pushliteral:tB,lua_pushnil:tj,lua_pushstring:tG,lua_pushvalue:tV,lua_rawequal:tX,lua_rawget:tH,lua_rawlen:tz,lua_rawset:tK,lua_remove:tY,lua_replace:tW,lua_rotate:tq,lua_setfield:tZ,lua_setmetatable:tJ,lua_settop:tQ,lua_setupvalue:t$,lua_stringtonumber:t0,lua_toboolean:t1,lua_tolstring:t2,lua_tostring:t3,lua_type:t4,lua_typename:t5}=q(2),{luaL_argcheck:t6,luaL_checkany:t8,luaL_checkinteger:t7,luaL_checkoption:t9,luaL_checkstack:er,luaL_checktype:en,luaL_error:ei,luaL_getmetafield:eo,luaL_loadbufferx:es,luaL_loadfile:eu,luaL_loadfilex:el,luaL_optinteger:ep,luaL_optstring:ed,luaL_setfuncs:e_,luaL_tolstring:eg,luaL_where:em}=q(7),{to_jsstring:ey,to_luastring:ev}=q(5);if("function"==typeof TextDecoder){let h="",w=new TextDecoder("utf-8");tr=function(q){h+=w.decode(q,{stream:!0})};let q=new Uint8Array(0);tn=function(){console.log(h+=w.decode(q)),h=""}}else{let h=[];tr=function(w){try{w=ey(w)}catch{let h=new Uint8Array(w.length);h.set(w),w=h}h.push(w)},tn=function(){console.log.apply(console.log,h),h=[]}}let eb=["stop","restart","collect","count","step","setpause","setstepmul","isrunning"].map(h=>ev(h)),_e=function(h){return en(h,1,td),tQ(h,2),tN(h,1)?2:(tj(h),1)},ve=function(h){let w=t7(h,2)+1;return tF(h,w),tA(h,1,w)===tu?1:2},xe=function(h){let w=ep(h,2,1);return tQ(h,1),t4(h,1)===tp&&w>0&&(em(h,w),tV(h,1),tx(h,2)),tT(h)},Ue=function(h,w,q){return w!==to&&w!==ty?(tU(h,0),tV(h,-2),2):tw(h)-q},ne=function(h,w,q){return w===to?(0!==q&&(tV(h,q),t$(h,-2,1)||tk(h,1)),1):(tj(h),tL(h,-2),2)},se=function(h,w){return er(h,2,"too many nested functions"),tV(h,1),tv(h,0,1),tS(h,-1)?(tk(h,1),null):(tP(h,-1)||ei(h,ev("reader function must return a string")),tW(h,5),t3(h,5))},be=function(h,w,q){return tw(h)-1},ex={assert:function(h){return t1(h,1)?tw(h):(t8(h,1),tY(h,1),tB(h,"assertion failed!"),tQ(h,1),xe(h))},collectgarbage:function(h){t9(h,1,"collect",eb),ep(h,2,0),ei(h,ev("lua_gc not implemented"))},dofile:function(h){let w=ed(h,1,null);return tQ(h,1),eu(h,w)!==to?tT(h):(tb(h,0,ti,0,be),be(h))},error:xe,getmetatable:function(h){return t8(h,1),tO(h,1)?eo(h,1,ev("__metatable",!0)):tj(h),1},ipairs:function(h){return t8(h,1),tC(h,ve),tV(h,1),tF(h,0),3},load:function(h){let w,q=t3(h,1),tr=ed(h,3,"bt"),tn=tI(h,4)?0:4;if(null!==q){let tn=ed(h,2,q);w=es(h,q,q.length,tn,tr)}else{let q=ed(h,2,"=(load)");en(h,1,ts),tQ(h,5),w=tR(h,se,null,q,tr)}return ne(h,w,tn)},loadfile:function(h){let w=ed(h,1,null),q=ed(h,2,null),tr=tI(h,3)?0:3,tn=el(h,w,q);return ne(h,tn,tr)},next:_e,pairs:function(h){var w;return w=ev("__pairs",!0),t8(h,1),eo(h,1,w)===tu?(tC(h,_e),tV(h,1),tj(h)):(tV(h,1),tv(h,1,3)),3},pcall:function(h){t8(h,1),tU(h,1),tL(h,1);let w=tM(h,tw(h)-2,ti,0,0,Ue);return Ue(h,w,0)},print:function(h){let w=tw(h);tE(h,ev("tostring",!0));for(let q=1;q<=w;q++){tV(h,-1),tV(h,q),tv(h,1,1);let w=t2(h,-1);if(null===w)return ei(h,ev("'tostring' must return a string to 'print'"));q>1&&tr(ev("	")),tr(w),tk(h,1)}return tn(),0},rawequal:function(h){return t8(h,1),t8(h,2),tU(h,tX(h,1,2)),1},rawget:function(h){return en(h,1,td),t8(h,2),tQ(h,2),tH(h,1),1},rawlen:function(h){let w=t4(h,1);return t6(h,w===td||w===tp,1,"table or string expected"),tF(h,tz(h,1)),1},rawset:function(h){return en(h,1,td),t8(h,2),t8(h,3),tQ(h,3),tK(h,1),1},select:function(h){let w=tw(h);if(t4(h,1)===tp&&35===t3(h,1)[0])return tF(h,w-1),1;{let q=t7(h,1);return q<0?q=w+q:q>w&&(q=w),t6(h,1<=q,1,"index out of range"),w-q}},setmetatable:function(h){let w=t4(h,2);return en(h,1,td),t6(h,w===tu||w===td,2,"nil or table expected"),eo(h,1,ev("__metatable",!0))!==tu?ei(h,ev("cannot change a protected metatable")):(tQ(h,2),tJ(h,1),1)},tonumber:function(h){if(0>=t4(h,2)){if(t8(h,1),t4(h,1)===tc)return tQ(h,1),1;{let w=t3(h,1);if(null!==w&&t0(h,w)===w.length+1)return 1}}else{let w=t7(h,2);en(h,1,tp);let q=t3(h,1);t6(h,2<=w&&w<=36,2,"base out of range");let tr=function(h,w){try{h=ey(h)}catch{return null}let q=/^[\t\v\f \n\r]*([+-]?)0*([0-9A-Za-z]+)[\t\v\f \n\r]*$/.exec(h);if(!q)return null;let tr=parseInt(q[1]+q[2],w);return isNaN(tr)?null:0|tr}(q,w);if(null!==tr)return tF(h,tr),1}return tj(h),1},tostring:function(h){return t8(h,1),eg(h,1),1},type:function(h){let w=t4(h,1);return t6(h,w!==tl,1,"value expected"),tG(h,t5(h,w)),1},xpcall:function(h){let w=tw(h);en(h,2,ts),tU(h,1),tV(h,1),tq(h,3,2);let q=tM(h,w-2,ti,2,2,Ue);return Ue(h,q,2)}};h.exports.luaopen_base=function(h){return tD(h),e_(h,ex,0),tV(h,-1),tZ(h,-2,ev("_G")),tB(h,tm),tZ(h,-2,ev("_VERSION")),1}},function(h,w,q){let{LUA_OK:tr,LUA_TFUNCTION:tn,LUA_TSTRING:ti,LUA_YIELD:to,lua_Debug:ts,lua_checkstack:tu,lua_concat:tl,lua_error:tc,lua_getstack:tp,lua_gettop:td,lua_insert:tm,lua_isyieldable:ty,lua_newthread:tv,lua_pop:tb,lua_pushboolean:tx,lua_pushcclosure:tT,lua_pushliteral:tE,lua_pushthread:tA,lua_pushvalue:tO,lua_resume:tw,lua_status:tL,lua_tothread:tS,lua_type:tI,lua_upvalueindex:tP,lua_xmove:tR,lua_yield:tN}=q(2),{luaL_argcheck:tM,luaL_checktype:tk,luaL_newlib:tU,luaL_where:tC}=q(7),lt=function(h){let w=tS(h,1);return tM(h,w,1,"thread expected"),w},dt=function(h,w,q){if(!tu(w,q))return tE(h,"too many arguments to resume"),-1;if(tL(w)===tr&&0===td(w))return tE(h,"cannot resume dead coroutine"),-1;tR(h,w,q);let tn=tw(w,h,q);if(tn===tr||tn===to){let q=td(w);return tu(h,q+1)?(tR(w,h,q),q):(tb(w,q),tE(h,"too many results to resume"),-1)}return tR(w,h,1),-1},Vt=function(h){let w=tS(h,tP(1)),q=dt(h,w,td(h));return q<0?(tI(h,-1)===ti&&(tC(h,1),tm(h,-2),tl(h,2)),tc(h)):q},S=function(h){tk(h,1,tn);let w=tv(h);return tO(h,1),tR(h,w,1),1},tD={create:S,isyieldable:function(h){return tx(h,ty(h)),1},resume:function(h){let w=lt(h),q=dt(h,w,td(h)-1);return q<0?(tx(h,0),tm(h,-2),2):(tx(h,1),tm(h,-(q+1)),q+1)},running:function(h){return tx(h,tA(h)),2},status:function(h){let w=lt(h);if(h===w)tE(h,"running");else switch(tL(w)){case to:tE(h,"suspended");break;case tr:tp(w,0,new ts)>0?tE(h,"normal"):0===td(w)?tE(h,"dead"):tE(h,"suspended");break;default:tE(h,"dead")}return 1},wrap:function(h){return S(h),tT(h,Vt,1),1},yield:function(h){return tN(h,td(h))}};h.exports.luaopen_coroutine=function(h){return tU(h,tD),1}},function(h,w,q){let{LUA_MAXINTEGER:tr}=q(3),{LUA_OPEQ:tn,LUA_OPLT:ti,LUA_TFUNCTION:to,LUA_TNIL:ts,LUA_TTABLE:tu,lua_call:tl,lua_checkstack:tc,lua_compare:tp,lua_createtable:td,lua_geti:tm,lua_getmetatable:ty,lua_gettop:tv,lua_insert:tb,lua_isnil:tx,lua_isnoneornil:tT,lua_isstring:tE,lua_pop:tA,lua_pushinteger:tO,lua_pushnil:tw,lua_pushstring:tL,lua_pushvalue:tS,lua_rawget:tI,lua_setfield:tP,lua_seti:tR,lua_settop:tN,lua_toboolean:tM,lua_type:tk}=q(2),{luaL_Buffer:tU,luaL_addlstring:tC,luaL_addvalue:tD,luaL_argcheck:tF,luaL_buffinit:tB,luaL_checkinteger:tj,luaL_checktype:tG,luaL_error:tV,luaL_len:tX,luaL_newlib:tH,luaL_opt:tz,luaL_optinteger:tK,luaL_optlstring:tY,luaL_pushresult:tW,luaL_typename:tq}=q(7),tZ=q(17),{to_luastring:tJ}=q(5),rt=function(h,w,q){return tL(h,w),tI(h,-q)!==ts},It=function(h,w,q){if(tk(h,w)!==tu){let tr=1;ty(h,w)&&(!(1&q)||rt(h,tJ("__index",!0),++tr))&&(!(2&q)||rt(h,tJ("__newindex",!0),++tr))&&(!(4&q)||rt(h,tJ("__len",!0),++tr))?tA(h,tr):tG(h,w,tu)}},ee=function(h,w,q){return It(h,w,4|q),tX(h,w)},Zt=function(h,w,q){tm(h,1,q),tE(h,-1)||tV(h,tJ("invalid value (%s) at index %d in table for 'concat'"),tq(h,-1),q),tD(w)},Ut=function(h,w,q){tR(h,1,w),tR(h,1,q)},et=function(h,w,q){if(tx(h,2))return tp(h,w,q,ti);{tS(h,2),tS(h,w-1),tS(h,q-2),tl(h,2,1);let tr=tM(h,-1);return tA(h,1),tr}},Et=function(h,w,q){let tr=w,tn=q-1;for(;;){for(;tm(h,1,++tr),et(h,-1,-2);)tr==q-1&&tV(h,tJ("invalid order function for sorting")),tA(h,1);for(;tm(h,1,--tn),et(h,-3,-1);)tn<tr&&tV(h,tJ("invalid order function for sorting")),tA(h,1);if(tn<tr)return tA(h,1),Ut(h,q-1,tr),tr;Ut(h,tr,tn)}},k=function(h,w,q){let tr=Math.floor((w-h)/4),tn=q%(2*tr)+(h+tr);return tZ.lua_assert(h+tr<=tn&&tn<=w-tr),tn},ht=function(h,w,q,tr){for(;w<q;){let tn,ti;if(tm(h,1,w),tm(h,1,q),et(h,-1,-2)?Ut(h,w,q):tA(h,2),q-w==1||(tm(h,1,tn=q-w<100||0===tr?Math.floor((w+q)/2):k(w,q,tr)),tm(h,1,w),et(h,-2,-1)?Ut(h,tn,w):(tA(h,1),tm(h,1,q),et(h,-1,-2)?Ut(h,tn,q):tA(h,2)),q-w==2))return;tm(h,1,tn),tS(h,-1),tm(h,1,q-1),Ut(h,tn,q-1),(tn=Et(h,w,q))-w<q-tn?(ht(h,w,tn-1,tr),ti=tn-w,w=tn+1):(ht(h,tn+1,q,tr),ti=q-tn,q=tn-1),(q-w)/128>ti&&(tr=Math.floor(4294967296*Math.random()))}},tQ={concat:function(h){let w=ee(h,1,1),q=tY(h,2,""),tr=q.length,tn=tK(h,3,1);w=tK(h,4,w);let ti=new tU;for(tB(h,ti);tn<w;tn++)Zt(h,ti,tn),tC(ti,q,tr);return tn===w&&Zt(h,ti,tn),tW(ti),1},insert:function(h){let w,q=ee(h,1,3)+1;switch(tv(h)){case 2:w=q;break;case 3:w=tj(h,2),tF(h,1<=w&&w<=q,2,"position out of bounds");for(let tr=q;tr>w;tr--)tm(h,1,tr-1),tR(h,1,tr);break;default:return tV(h,"wrong number of arguments to 'insert'")}return tR(h,1,w),0},move:function(h){let w=tj(h,2),q=tj(h,3),ti=tj(h,4),to=tT(h,5)?1:5;if(It(h,1,1),It(h,to,2),q>=w){tF(h,w>0||q<tr+w,3,"too many elements to move");let ts=q-w+1;if(tF(h,ti<=tr-ts+1,4,"destination wrap around"),ti>q||ti<=w||1!==to&&1!==tp(h,1,to,tn))for(let q=0;q<ts;q++)tm(h,1,w+q),tR(h,to,ti+q);else for(let q=ts-1;q>=0;q--)tm(h,1,w+q),tR(h,to,ti+q)}return tS(h,to),1},pack:function(h){let w=tv(h);td(h,w,1),tb(h,1);for(let q=w;q>=1;q--)tR(h,1,q);return tO(h,w),tP(h,1,tJ("n")),1},remove:function(h){let w=ee(h,1,3),q=tK(h,2,w);for(q!==w&&tF(h,1<=q&&q<=w+1,1,"position out of bounds"),tm(h,1,q);q<w;q++)tm(h,1,q+1),tR(h,1,q);return tw(h),tR(h,1,q),1},sort:function(h){let w=ee(h,1,3);return w>1&&(tF(h,w<tr,1,"array too big"),tT(h,2)||tG(h,2,to),tN(h,2),ht(h,1,w,0)),0},unpack:function(h){let w=tK(h,2,1),q=tz(h,tj,3,tX(h,1));if(w>q)return 0;let tr=q-w;if(tr>=Number.MAX_SAFE_INTEGER||!tc(h,++tr))return tV(h,tJ("too many results to unpack"));for(;w<q;w++)tm(h,1,w);return tm(h,1,q),tr}};h.exports.luaopen_table=function(h){return tH(h,tQ),1}},function(h,w,q){let{LUA_TNIL:tr,LUA_TTABLE:tn,lua_close:ti,lua_createtable:to,lua_getfield:ts,lua_isboolean:tu,lua_isnoneornil:tl,lua_pop:tc,lua_pushboolean:tp,lua_pushfstring:td,lua_pushinteger:tm,lua_pushliteral:ty,lua_pushnil:tv,lua_pushnumber:tb,lua_pushstring:tx,lua_setfield:tT,lua_settop:tE,lua_toboolean:tA,lua_tointegerx:tO}=q(2),{luaL_Buffer:tw,luaL_addchar:tL,luaL_addstring:tS,luaL_argerror:tI,luaL_buffinit:tP,luaL_checkinteger:tR,luaL_checkstring:tN,luaL_checktype:tM,luaL_error:tk,luaL_execresult:tU,luaL_fileresult:tC,luaL_newlib:tD,luaL_optinteger:tF,luaL_optlstring:tB,luaL_optstring:tj,luaL_pushresult:tG}=q(7),{luastring_eq:tV,to_jsstring:tX,to_luastring:tH}=q(5),tz=tH("aAbBcCdDeFhHIjklmMnpPrRStTuUwWxXyYzZ%"),Ct=function(h,w,q){tm(h,q),tT(h,-2,tH(w,!0))},kt=function(h,w,q){Ct(h,"sec",q?w.getUTCSeconds():w.getSeconds()),Ct(h,"min",q?w.getUTCMinutes():w.getMinutes()),Ct(h,"hour",q?w.getUTCHours():w.getHours()),Ct(h,"day",q?w.getUTCDate():w.getDate()),Ct(h,"month",(q?w.getUTCMonth():w.getMonth())+1),Ct(h,"year",q?w.getUTCFullYear():w.getFullYear()),Ct(h,"wday",(q?w.getUTCDay():w.getDay())+1),Ct(h,"yday",Math.floor((w-new Date(w.getFullYear(),0,0))/864e5))},tK=Number.MAX_SAFE_INTEGER/2,J=function(h,w,q,tn){let ti=ts(h,-1,tH(w,!0)),to=tO(h,-1);if(!1===to){if(ti!==tr)return tk(h,tH("field '%s' is not an integer"),w);if(q<0)return tk(h,tH("field '%s' missing in date table"),w);to=q}else{if(!(-tK<=to&&to<=tK))return tk(h,tH("field '%s' is out-of-bound"),w);to-=tn}return tc(h,1),to},tY={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map(h=>tH(h)),shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(h=>tH(h)),months:["January","February","March","April","May","June","July","August","September","October","November","December"].map(h=>tH(h)),shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map(h=>tH(h)),AM:tH("AM"),PM:tH("PM"),am:tH("am"),pm:tH("pm"),formats:{c:tH("%a %b %e %H:%M:%S %Y"),D:tH("%m/%d/%y"),F:tH("%Y-%m-%d"),R:tH("%H:%M"),r:tH("%I:%M:%S %p"),T:tH("%H:%M:%S"),X:tH("%T"),x:tH("%D")}},xt=function(h,w){let q=h.getDay();return"monday"===w&&(0===q?q=6:q--),Math.floor(((h-new Date(h.getFullYear(),0,1))/864e5+7-q)/7)},rt=function(h,w,q){w<10&&tL(h,q),tS(h,tH(String(w)))},It=function(h,w,q,tr){let tn=0;for(;tn<q.length;)if(37!==q[tn])tL(w,q[tn++]);else{let ti=ee(h,q,++tn);switch(q[tn]){case 37:tL(w,37);break;case 65:tS(w,tY.days[tr.getDay()]);break;case 66:tS(w,tY.months[tr.getMonth()]);break;case 67:rt(w,Math.floor(tr.getFullYear()/100),48);break;case 68:It(h,w,tY.formats.D,tr);break;case 70:It(h,w,tY.formats.F,tr);break;case 72:rt(w,tr.getHours(),48);break;case 73:rt(w,(tr.getHours()+11)%12+1,48);break;case 77:rt(w,tr.getMinutes(),48);break;case 80:tS(w,12>tr.getHours()?tY.am:tY.pm);break;case 82:It(h,w,tY.formats.R,tr);break;case 83:rt(w,tr.getSeconds(),48);break;case 84:It(h,w,tY.formats.T,tr);break;case 85:rt(w,xt(tr,"sunday"),48);break;case 87:rt(w,xt(tr,"monday"),48);break;case 88:It(h,w,tY.formats.X,tr);break;case 89:tS(w,tH(String(tr.getFullYear())));break;case 90:{let h=tr.toString().match(/\(([\w\s]+)\)/);h&&tS(w,tH(h[1]));break}case 97:tS(w,tY.shortDays[tr.getDay()]);break;case 98:case 104:tS(w,tY.shortMonths[tr.getMonth()]);break;case 99:It(h,w,tY.formats.c,tr);break;case 100:rt(w,tr.getDate(),48);break;case 101:rt(w,tr.getDate(),32);break;case 106:{let h=Math.floor((tr-new Date(tr.getFullYear(),0,1))/864e5);h<100&&(h<10&&tL(w,48),tL(w,48)),tS(w,tH(String(h)));break}case 107:rt(w,tr.getHours(),32);break;case 108:rt(w,(tr.getHours()+11)%12+1,32);break;case 109:rt(w,tr.getMonth()+1,48);break;case 110:tL(w,10);break;case 112:tS(w,12>tr.getHours()?tY.AM:tY.PM);break;case 114:It(h,w,tY.formats.r,tr);break;case 115:tS(w,tH(String(Math.floor(tr/1e3))));break;case 116:tL(w,8);break;case 117:{let h=tr.getDay();tS(w,tH(String(0===h?7:h)));break}case 119:tS(w,tH(String(tr.getDay())));break;case 120:It(h,w,tY.formats.x,tr);break;case 121:rt(w,tr.getFullYear()%100,48);break;case 122:{let h=tr.getTimezoneOffset();h>0?tL(w,45):(h=-h,tL(w,43)),rt(w,Math.floor(h/60),48),rt(w,h%60,48)}}tn+=ti}},ee=function(h,w,q){let tr=0,tn=1;for(;tr<tz.length&&tn<=w.length-q;tr+=tn)if(124===tz[tr])tn++;else if(tV(w.subarray(q,q+tn),tz.subarray(tr,tr+tn)))return tn;tI(h,1,td(h,tH("invalid conversion specifier '%%%s'"),w))},Zt=function(h,w){return tR(h,w)},tW={date:function(h){let w=tB(h,1,"%c"),q=tl(h,2)?new Date:new Date(1e3*Zt(h,2)),tr=!1,tn=0;if(33===w[0]&&(tr=!0,tn++),42===w[tn]&&116===w[tn+1])to(h,0,9),kt(h,q,tr);else{new Uint8Array(4)[0]=37;let tr=new tw;tP(h,tr),It(h,tr,w,q),tG(tr)}return 1},difftime:function(h){let w=Zt(h,1),q=Zt(h,2);return tb(h,w-q),1},time:function(h){let w;return tl(h,1)?w=new Date:(tM(h,1,tn),tE(h,1),w=new Date(J(h,"year",-1,0),J(h,"month",-1,1),J(h,"day",-1,0),J(h,"hour",12,0),J(h,"min",0,0),J(h,"sec",0,0)),kt(h,w)),tm(h,Math.floor(w/1e3)),1},clock:function(h){return tb(h,performance.now()/1e3),1}};h.exports.luaopen_os=function(h){return tD(h,tW),1}},function(h,w,q){let{sprintf:tr}=q(38),{LUA_INTEGER_FMT:tn,LUA_INTEGER_FRMLEN:ti,LUA_MININTEGER:to,LUA_NUMBER_FMT:ts,LUA_NUMBER_FRMLEN:tu,frexp:tl,lua_getlocaledecpoint:tc}=q(3),{LUA_TBOOLEAN:tp,LUA_TFUNCTION:td,LUA_TNIL:tm,LUA_TNUMBER:ty,LUA_TSTRING:tv,LUA_TTABLE:tb,lua_call:tx,lua_createtable:tT,lua_dump:tE,lua_gettable:tA,lua_gettop:tO,lua_isinteger:tw,lua_isstring:tL,lua_pop:tS,lua_pushcclosure:tI,lua_pushinteger:tP,lua_pushlightuserdata:tR,lua_pushliteral:tN,lua_pushlstring:tM,lua_pushnil:tk,lua_pushnumber:tU,lua_pushstring:tC,lua_pushvalue:tD,lua_remove:tF,lua_setfield:tB,lua_setmetatable:tj,lua_settop:tG,lua_toboolean:tV,lua_tointeger:tX,lua_tonumber:tH,lua_tostring:tz,lua_touserdata:tK,lua_type:tY,lua_upvalueindex:tW}=q(2),{luaL_Buffer:tq,luaL_addchar:tZ,luaL_addlstring:tJ,luaL_addsize:tQ,luaL_addstring:t$,luaL_addvalue:t0,luaL_argcheck:t1,luaL_argerror:t2,luaL_buffinit:t3,luaL_buffinitsize:t4,luaL_checkinteger:t5,luaL_checknumber:t6,luaL_checkstack:t8,luaL_checkstring:t7,luaL_checktype:t9,luaL_error:er,luaL_newlib:en,luaL_optinteger:ei,luaL_optstring:eo,luaL_prepbuffsize:es,luaL_pushresult:eu,luaL_pushresultsize:el,luaL_tolstring:ep,luaL_typename:ed}=q(7),e_=q(17),{luastring_eq:eg,luastring_indexOf:em,to_jsstring:ey,to_luastring:ev}=q(5),_e=function(h){let w=em(h,0);return w>-1?w:h.length},ve=function(h,w){return h>=0?h:0-h>w?0:w+h+1},xe=function(h,w,q,tr){return tJ(tr,w,q),0},eb=tu.length+1,ne=function(h,w,q){let tn=function(h){if(Object.is(h,1/0))return ev("inf");if(Object.is(h,-1/0))return ev("-inf");if(Number.isNaN(h))return ev("nan");if(0===h){let w=tr(ts+"x0p+0",h);return Object.is(h,-0)&&(w="-"+w),ev(w)}{let w="",q=tl(h),tn=q[0],ti=q[1];return tn<0&&(w+="-",tn=-tn),ev(w+="0x"+(2*tn).toString(16)+tr("p%+d",ti-=1))}}(q);if(65===w[eb])for(let h=0;h<tn.length;h++){let w=tn[h];w>=97&&(tn[h]=223&w)}else 97!==w[eb]&&er(h,ev("modifiers for format '%%a'/'%%A' not implemented"));return tn},ex=ev("-+ #0"),be=h=>97<=h&&h<=122||65<=h&&h<=90,c=h=>48<=h&&h<=57,p=h=>0<=h&&h<=31||127===h,b=h=>33<=h&&h<=126,_=h=>97<=h&&h<=122,x=h=>65<=h&&h<=90,N=h=>97<=h&&h<=122||65<=h&&h<=90||48<=h&&h<=57,A=h=>b(h)&&!N(h),Q=h=>32===h||h>=9&&h<=13,Mt=h=>48<=h&&h<=57||65<=h&&h<=70||97<=h&&h<=102,Wt=function(h,w,q){switch(tY(h,q)){case tv:{let tr=tz(h,q);!function(h,w,q){tZ(h,34);let tr=0;for(;q--;){if(34===w[tr]||92===w[tr]||10===w[tr])tZ(h,92),tZ(h,w[tr]);else if(p(w[tr])){let q=""+w[tr];c(w[tr+1])&&(q="0".repeat(3-q.length)+q),t$(h,ev("\\"+q))}else tZ(h,w[tr]);tr++}tZ(h,34)}(w,tr,tr.length);break}case ty:{let ts;if(tw(h,q)){let w=tX(h,q);ts=ev(tr(w===to?"0x%"+ti+"x":tn,w))}else{let w=tH(h,q);!function(h){if(0>em(h,46)){let w=em(h,tc());w&&(h[w]=46)}}(ts=ne(h,ev(`%${ti}a`),w))}t$(w,ts);break}case tm:case tp:ep(h,q),t0(w);break;default:t2(h,q,ev("value has no literal form"))}},ge=function(h,w,q,tr){let tn=q;for(;0!==w[tn]&&em(ex,w[tn])>=0;)tn++;tn-q>=ex.length&&er(h,ev("invalid format (repeated flags)")),c(w[tn])&&tn++,c(w[tn])&&tn++,46===w[tn]&&(c(w[++tn])&&tn++,c(w[tn])&&tn++),c(w[tn])&&er(h,ev("invalid format (width or precision too long)")),tr[0]=37;for(let h=0;h<tn-q+1;h++)tr[h+1]=w[q+h];return tn},ye=function(h,w){let q=h.length,tr=w.length,tn=h[q-1];for(let tn=0;tn<tr;tn++)h[tn+q-1]=w[tn];h[q+tr-1]=tn};let nt=class nt{constructor(h){this.L=h,this.islittle=!0,this.maxalign=1}};let D=function(h,w){if(h.off>=h.s.length||!c(h.s[h.off]))return w;{let w=0;do w=10*w+(h.s[h.off++]-48);while(h.off<h.s.length&&c(h.s[h.off])&&w<=214748363.8);return w}},bt=function(h,w,q){let tr=D(w,q);return(tr>16||tr<=0)&&er(h.L,ev("integral size (%d) out of limits [1,%d]"),tr,16),tr},it=function(h,w){let q={opt:w.s[w.off++],size:0};switch(q.opt){case 98:return q.size=1,q.opt=0,q;case 66:return q.size=1,q.opt=1,q;case 104:return q.size=2,q.opt=0,q;case 72:return q.size=2,q.opt=1,q;case 108:case 106:return q.size=4,q.opt=0,q;case 76:case 74:case 84:return q.size=4,q.opt=1,q;case 102:return q.size=4,q.opt=2,q;case 100:case 110:return q.size=8,q.opt=2,q;case 105:return q.size=bt(h,w,4),q.opt=0,q;case 73:return q.size=bt(h,w,4),q.opt=1,q;case 115:return q.size=bt(h,w,4),q.opt=4,q;case 99:return q.size=D(w,-1),-1===q.size&&er(h.L,ev("missing size for format option 'c'")),q.opt=3,q;case 122:return q.opt=5,q;case 120:return q.size=1,q.opt=6,q;case 88:return q.opt=7,q;case 32:break;case 60:case 61:h.islittle=!0;break;case 62:h.islittle=!1;break;case 33:h.maxalign=bt(h,w,8);break;default:er(h.L,ev("invalid format option '%c'"),q.opt)}return q.opt=8,q},zt=function(h,w,q){let tr={opt:NaN,size:NaN,ntoalign:NaN},tn=it(h,q);tr.size=tn.size,tr.opt=tn.opt;let ti=tr.size;if(7===tr.opt){if(q.off>=q.s.length||0===q.s[q.off])t2(h.L,1,ev("invalid next option for option 'X'"));else{let w=it(h,q);ti=w.size,3!==(w=w.opt)&&0!==ti||t2(h.L,1,ev("invalid next option for option 'X'"))}}return ti<=1||3===tr.opt?tr.ntoalign=0:(ti>h.maxalign&&(ti=h.maxalign),ti&ti-1&&t2(h.L,1,ev("format asks for alignment not power of 2")),tr.ntoalign=ti-(w&ti-1)&ti-1),tr},he=function(h,w,q,tr,tn){let ti=es(h,tr);ti[q?0:tr-1]=255&w;for(let h=1;h<tr;h++)w>>=8,ti[q?h:tr-1-h]=255&w;if(tn&&tr>4)for(let h=4;h<tr;h++)ti[q?h:tr-1-h]=255;tQ(h,tr)},fe=function(h,w,q,tr,tn){let ti=0,to=tr<=4?tr:4;for(let h=to-1;h>=0;h--)ti<<=8,ti|=w[q?h:tr-1-h];if(tr<4){if(tn){let h=1<<8*tr-1;ti=(ti^h)-h}}else if(tr>4){let ts=!tn||ti>=0?0:255;for(let tn=to;tn<tr;tn++)w[q?tn:tr-1-tn]!==ts&&er(h,ev("%d-byte integer does not fit into Lua Integer"),tr)}return ti},ae=function(h,w,q,tr){e_.lua_assert(w.length>=tr);let tn=new DataView(new ArrayBuffer(tr));for(let h=0;h<tr;h++)tn.setUint8(h,w[h],q);return 4==tr?tn.getFloat32(0,q):tn.getFloat64(0,q)},eT=ev("^$*+?.([%-");let je=class je{constructor(h){this.src=null,this.src_init=null,this.src_end=null,this.p=null,this.p_end=null,this.L=h,this.matchdepth=NaN,this.level=NaN,this.capture=[]}};let de=function(h,w){switch(h.p[w++]){case 37:return w===h.p_end&&er(h.L,ev("malformed pattern (ends with '%%')")),w+1;case 91:94===h.p[w]&&w++;do w===h.p_end&&er(h.L,ev("malformed pattern (missing ']')")),37===h.p[w++]&&w<h.p_end&&w++;while(93!==h.p[w]);return w+1;default:return w}},Oe=function(h,w){switch(w){case 97:return be(h);case 65:return!be(h);case 99:return p(h);case 67:return!p(h);case 100:return c(h);case 68:return!c(h);case 103:return b(h);case 71:return!b(h);case 108:return _(h);case 76:return!_(h);case 112:return A(h);case 80:return!A(h);case 115:return Q(h);case 83:return!Q(h);case 117:return x(h);case 85:return!x(h);case 119:return N(h);case 87:return!N(h);case 120:return Mt(h);case 88:return!Mt(h);case 122:return 0===h;case 90:return 0!==h;default:return w===h}},Ee=function(h,w,q,tr){let tn=!0;for(94===h.p[q+1]&&(tn=!1,q++);++q<tr;)if(37===h.p[q]){if(q++,Oe(w,h.p[q]))return tn}else if(45===h.p[q+1]&&q+2<tr){if(q+=2,h.p[q-2]<=w&&w<=h.p[q])return tn}else if(h.p[q]===w)return tn;return!tn},Ne=function(h,w,q,tr){if(w>=h.src_end)return!1;{let tn=h.src[w];switch(h.p[q]){case 46:return!0;case 37:return Oe(tn,h.p[q+1]);case 91:return Ee(h,tn,q,tr-1);default:return h.p[q]===tn}}},ke=function(h,w,q){if(q>=h.p_end-1&&er(h.L,ev("malformed pattern (missing arguments to '%%b'")),h.src[w]!==h.p[q])return null;{let tr=h.p[q],tn=h.p[q+1],ti=1;for(;++w<h.src_end;)if(h.src[w]===tn){if(0==--ti)return w+1}else h.src[w]===tr&&ti++}return null},ir=function(h,w,q,tr){let tn=0;for(;Ne(h,w+tn,q,tr);)tn++;for(;tn>=0;){let q=ot(h,w+tn,tr+1);if(q)return q;tn--}return null},Be=function(h,w,q,tr){for(;;){let tn=ot(h,w,tr+1);if(null!==tn)return tn;if(!Ne(h,w,q,tr))return null;w++}},or=function(h,w,q,tr){let tn,ti=h.level;return ti>=32&&er(h.L,ev("too many captures")),h.capture[ti]=h.capture[ti]?h.capture[ti]:{},h.capture[ti].init=w,h.capture[ti].len=tr,h.level=ti+1,null===(tn=ot(h,w,q))&&h.level--,tn},Ze=function(h,w,q){let tr,tn=function(h){let w=h.level;for(w--;w>=0;w--)if(-1===h.capture[w].len)return w;return er(h.L,ev("invalid pattern capture"))}(h);return h.capture[tn].len=w-h.capture[tn].init,null===(tr=ot(h,w,q))&&(h.capture[tn].len=-1),tr},L=function(h,w,q){var tr,tn,ti,to;q=(tr=q-49)<0||tr>=h.level||-1===h.capture[tr].len?er(h.L,ev("invalid capture index %%%d"),tr+1):tr;let ts=h.capture[q].len;return h.src_end-w>=ts&&(tn=h.src,ti=h.capture[q].init,to=h.src,eg(tn.subarray(ti,ti+ts),to.subarray(w,w+ts)))?w+ts:null},ot=function(h,w,q){let tr=!1,tn=!0;for(0==h.matchdepth--&&er(h.L,ev("pattern too complex"));tn||tr;)if(tn=!1,q!==h.p_end)switch(tr?void 0:h.p[q]){case 40:w=41===h.p[q+1]?or(h,w,q+2,-2):or(h,w,q+1,-1);break;case 41:w=Ze(h,w,q+1);break;case 36:if(q+1!==h.p_end){tr=!0;break}w=h.src.length-w==0?w:null;break;case 37:switch(h.p[q+1]){case 98:null!==(w=ke(h,w,q+2))&&(q+=4,tn=!0);break;case 102:{q+=2,91!==h.p[q]&&er(h.L,ev("missing '[' after '%%f' in pattern"));let tr=de(h,q),ti=w===h.src_init?0:h.src[w-1];if(!Ee(h,ti,q,tr-1)&&Ee(h,w===h.src_end?0:h.src[w],q,tr-1)){q=tr,tn=!0;break}w=null;break}case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:null!==(w=L(h,w,h.p[q+1]))&&(q+=2,tn=!0);break;default:tr=!0}break;default:{tr=!1;let ti=de(h,q);if(Ne(h,w,q,ti))switch(h.p[ti]){case 63:{let tr;null!==(tr=ot(h,w+1,ti+1))?w=tr:(q=ti+1,tn=!0);break}case 43:w++;case 42:w=ir(h,w,q,ti);break;case 45:w=Be(h,w,q,ti);break;default:w++,q=ti,tn=!0}else{if(42===h.p[ti]||63===h.p[ti]||45===h.p[ti]){q=ti+1,tn=!0;break}w=null}}}return h.matchdepth++,w},Gt=function(h,w,q,tr){if(w>=h.level)0===w?tM(h.L,h.src.subarray(q,tr),tr-q):er(h.L,ev("invalid capture index %%%d"),w+1);else{let q=h.capture[w].len;-1===q&&er(h.L,ev("unfinished capture")),-2===q?tP(h.L,h.capture[w].init-h.src_init+1):tM(h.L,h.src.subarray(h.capture[w].init),q)}},Ht=function(h,w,q){let tr=0===h.level&&h.src.subarray(w)?1:h.level;t8(h.L,tr,"too many captures");for(let tn=0;tn<tr;tn++)Gt(h,tn,w,q);return tr},te=function(h,w,q,tr,tn,ti){h.L=w,h.matchdepth=200,h.src=q,h.src_init=0,h.src_end=tr,h.p=tn,h.p_end=ti},Bt=function(h){h.level=0,e_.lua_assert(200===h.matchdepth)},Xt=function(h,w){let q=t7(h,1),tr=t7(h,2),tn=q.length,ti=tr.length,to=ve(ei(h,3,1),tn);if(to<1)to=1;else if(to>tn+1)return tk(h),1;if(w&&(tV(h,4)||function(h,w){for(let q=0;q<w;q++)if(-1!==em(eT,h[q]))return!1;return!0}(tr,ti))){let w=function(h,w,q){var tr=0,tn=w.length;if(0===tn)return tr;for(;-1!==(tr=h.indexOf(w[0],tr));tr++)if(eg(h.subarray(tr,tr+tn),w))return tr;return -1}(q.subarray(to-1),tr,0);if(w>-1)return tP(h,to+w),tP(h,to+w+ti-1),2}else{let ts=new je(h),tu=to-1,tl=94===tr[0];tl&&(tr=tr.subarray(1),ti--),te(ts,h,q,tn,tr,ti);do{let q;if(Bt(ts),null!==(q=ot(ts,tu,0)))return w?(tP(h,tu+1),tP(h,q),Ht(ts,null,0)+2):Ht(ts,tu,q)}while(tu++<ts.src_end&&!tl)}return tk(h),1},Pt=function(h){let w=tK(h,tW(3));w.ms.L=h;for(let h=w.src;h<=w.ms.src_end;h++){let q;if(Bt(w.ms),null!==(q=ot(w.ms,h,w.p))&&q!==w.lastmatch)return w.src=w.lastmatch=q,Ht(w.ms,h,q)}return 0},$t=function(h,w,q,tr,tn){let ti=h.L;switch(tn){case td:tD(ti,3),tx(ti,Ht(h,q,tr),1);break;case tb:Gt(h,0,q,tr),tA(ti,3);break;default:return void function(h,w,q,tr){let tn=h.L,ti=tz(tn,3),to=ti.length;for(let ts=0;ts<to;ts++)37!==ti[ts]?tZ(w,ti[ts]):c(ti[++ts])?48===ti[ts]?tJ(w,h.src.subarray(q,tr),tr-q):(Gt(h,ti[ts]-49,q,tr),ep(tn,-1),tF(tn,-2),t0(w)):(37!==ti[ts]&&er(tn,ev("invalid use of '%c' in replacement string"),37),tZ(w,ti[ts]))}(h,w,q,tr)}tV(ti,-1)?tL(ti,-1)||er(ti,ev("invalid replacement value (a %s)"),ed(ti,-1)):(tS(ti,1),tM(ti,h.src.subarray(q,tr),tr-q)),t0(w)},eE={byte:function(h){let w=t7(h,1),q=w.length,tr=ve(ei(h,2,1),q),tn=ve(ei(h,3,tr),q);if(tr<1&&(tr=1),tn>q&&(tn=q),tr>tn)return 0;if(tn-tr>=Number.MAX_SAFE_INTEGER)return er(h,"string slice too long");let ti=tn-tr+1;t8(h,ti,"string slice too long");for(let q=0;q<ti;q++)tP(h,w[tr+q-1]);return ti},char:function(h){let w=tO(h),q=new tq,tr=t4(h,q,w);for(let q=1;q<=w;q++){let w=t5(h,q);t1(h,w>=0&&w<=255,"value out of range"),tr[q-1]=w}return el(q,w),1},dump:function(h){let w=new tq,q=tV(h,2);return t9(h,1,td),tG(h,1),t3(h,w),0!==tE(h,xe,w,q)?er(h,ev("unable to dump given function")):(eu(w),1)},find:function(h){return Xt(h,1)},format:function(h){let w=tO(h),q=1,tn=t7(h,1),to=0,ts=new tq;for(t3(h,ts);to<tn.length;)if(37!==tn[to])tZ(ts,tn[to++]);else if(37===tn[++to])tZ(ts,tn[to++]);else{let tu=[];switch(++q>w&&t2(h,q,ev("no value")),to=ge(h,tn,to,tu),String.fromCharCode(tn[to++])){case"c":tZ(ts,t5(h,q));break;case"d":case"i":case"o":case"u":case"x":case"X":{let w=t5(h,q);ye(tu,ev(ti,!0)),t$(ts,ev(tr(String.fromCharCode(...tu),w)));break}case"a":case"A":ye(tu,ev(ti,!0)),t$(ts,ne(h,tu,t6(h,q)));break;case"e":case"E":case"f":case"g":case"G":{let w=t6(h,q);ye(tu,ev(ti,!0)),t$(ts,ev(tr(String.fromCharCode(...tu),w)));break}case"q":Wt(h,ts,q);break;case"s":{let w=ep(h,q);tu.length<=2||0===tu[2]?t0(ts):(t1(h,w.length===_e(w),q,"string contains zeros"),0>em(tu,46)&&w.length>=100?t0(ts):(t$(ts,ev(tr(String.fromCharCode(...tu),ey(w)))),tS(h,1)));break}default:return er(h,ev("invalid option '%%%c' to 'format'"),tn[to-1])}}return eu(ts),1},gmatch:function(h){let w=t7(h,1),q=t7(h,2),tr=w.length,tn=q.length;tG(h,2);let ti=new class{constructor(){this.src=NaN,this.p=NaN,this.lastmatch=NaN,this.ms=new je}};return tR(h,ti),te(ti.ms,h,w,tr,q,tn),ti.src=0,ti.p=0,ti.lastmatch=null,tI(h,Pt,3),1},gsub:function(h){let w=t7(h,1),q=w.length,tr=t7(h,2),tn=tr.length,ti=null,to=tY(h,3),ts=ei(h,4,q+1),tu=94===tr[0],tl=0,tc=new je(h),tp=new tq;for(t1(h,to===ty||to===tv||to===td||to===tb,3,"string/function/table expected"),t3(h,tp),tu&&(tr=tr.subarray(1),tn--),te(tc,h,w,q,tr,tn),w=0,tr=0;tl<ts;){let h;if(Bt(tc),null!==(h=ot(tc,w,tr))&&h!==ti)tl++,$t(tc,tp,w,h,to),w=ti=h;else{if(!(w<tc.src_end))break;tZ(tp,tc.src[w++])}if(tu)break}return tJ(tp,tc.src.subarray(w,tc.src_end),tc.src_end-w),eu(tp),tP(h,tl),2},len:function(h){return tP(h,t7(h,1).length),1},lower:function(h){let w=t7(h,1),q=w.length,tr=new Uint8Array(q);for(let h=0;h<q;h++){let q=w[h];x(q)&&(q|=32),tr[h]=q}return tC(h,tr),1},match:function(h){return Xt(h,0)},pack:function(h){let w=new tq,q=new nt(h),tr={s:t7(h,1),off:0},tn=1,ti=0;for(tk(h),t3(h,w);tr.off<tr.s.length;){let to=zt(q,ti,tr),ts=to.opt,tu=to.size,tl=to.ntoalign;for(ti+=tl+tu;tl-- >0;)tZ(w,0);switch(tn++,ts){case 0:{let tr=t5(h,tn);if(tu<4){let w=1<<8*tu-1;t1(h,-w<=tr&&tr<w,tn,"integer overflow")}he(w,tr,q.islittle,tu,tr<0);break}case 1:{let tr=t5(h,tn);tu<4&&t1(h,tr>>>0<1<<8*tu,tn,"unsigned overflow"),he(w,tr>>>0,q.islittle,tu,!1);break}case 2:{let tr=es(w,tu),ti=t6(h,tn),to=new DataView(tr.buffer,tr.byteOffset,tr.byteLength);4===tu?to.setFloat32(0,ti,q.islittle):to.setFloat64(0,ti,q.islittle),tQ(w,tu);break}case 3:{let q=t7(h,tn),tr=q.length;for(t1(h,tr<=tu,tn,"string longer than given size"),tJ(w,q,tr);tr++<tu;)tZ(w,0);break}case 4:{let tr=t7(h,tn),to=tr.length;t1(h,tu>=4||to<1<<8*tu,tn,"string length does not fit in given size"),he(w,to,q.islittle,tu,0),tJ(w,tr,to),ti+=to;break}case 5:{let q=t7(h,tn),tr=q.length;t1(h,0>em(q,0),tn,"strings contains zeros"),tJ(w,q,tr),tZ(w,0),ti+=tr+1;break}case 6:tZ(w,0);case 7:case 8:tn--}}return eu(w),1},packsize:function(h){let w=new nt(h),q={s:t7(h,1),off:0},tr=0;for(;q.off<q.s.length;){let tn=zt(w,tr,q),ti=tn.opt,to=tn.size;switch(t1(h,tr<=2147483647-(to+=tn.ntoalign),1,"format result too large"),tr+=to,ti){case 4:case 5:t2(h,1,"variable-length format")}}return tP(h,tr),1},rep:function(h){let w=t7(h,1),q=w.length,tr=t5(h,2),tn=eo(h,3,""),ti=tn.length;if(tr<=0)tN(h,"");else{if(q+ti<q||q+ti>2147483647/tr)return er(h,ev("resulting string too large"));{let to=tr*q+(tr-1)*ti,ts=new tq,tu=t4(h,ts,to),tl=0;for(;tr-- >1;)tu.set(w,tl),tl+=q,ti>0&&(tu.set(tn,tl),tl+=ti);tu.set(w,tl),el(ts,to)}}return 1},reverse:function(h){let w=t7(h,1),q=w.length,tr=new Uint8Array(q);for(let h=0;h<q;h++)tr[h]=w[q-1-h];return tC(h,tr),1},sub:function(h){let w=t7(h,1),q=w.length,tr=ve(t5(h,2),q),tn=ve(ei(h,3,-1),q);return tr<1&&(tr=1),tn>q&&(tn=q),tr<=tn?tC(h,w.subarray(tr-1,tr-1+(tn-tr+1))):tN(h,""),1},unpack:function(h){let w=new nt(h),q={s:t7(h,1),off:0},tr=t7(h,2),tn=tr.length,ti=ve(ei(h,3,1),tn)-1,to=0;for(t1(h,ti<=tn&&ti>=0,3,"initial position out of string");q.off<q.s.length;){let ts=zt(w,ti,q),tu=ts.opt,tl=ts.size,tc=ts.ntoalign;switch(ti+tc+tl>tn&&t2(h,2,ev("data string too short")),ti+=tc,t8(h,2,"too many results"),to++,tu){case 0:case 1:{let q=fe(h,tr.subarray(ti),w.islittle,tl,0===tu);tP(h,q);break}case 2:tU(h,ae(0,tr.subarray(ti),w.islittle,tl));break;case 3:tC(h,tr.subarray(ti,ti+tl));break;case 4:{let q=fe(h,tr.subarray(ti),w.islittle,tl,0);t1(h,ti+q+tl<=tn,2,"data string too short"),tC(h,tr.subarray(ti+tl,ti+tl+q)),ti+=q;break}case 5:{let w=em(tr,0,ti);-1===w&&(w=tr.length-ti),tC(h,tr.subarray(ti,w)),ti=w+1;break}case 7:case 6:case 8:to--}ti+=tl}return tP(h,ti+1),to+1},upper:function(h){let w=t7(h,1),q=w.length,tr=new Uint8Array(q);for(let h=0;h<q;h++){let q=w[h];_(q)&&(q&=223),tr[h]=q}return tC(h,tr),1}};h.exports.luaopen_string=function(h){return en(h,eE),tT(h,0,1),tN(h,""),tD(h,-2),tj(h,-2),tS(h,1),tD(h,-2),tB(h,-2,ev("__index",!0)),tS(h,1),1}},function(h,w,q){let{lua_gettop:tr,lua_pushcfunction:tn,lua_pushfstring:ti,lua_pushinteger:to,lua_pushnil:ts,lua_pushstring:tu,lua_pushvalue:tl,lua_setfield:tc,lua_tointeger:tp}=q(2),{luaL_Buffer:td,luaL_addvalue:tm,luaL_argcheck:ty,luaL_buffinit:tv,luaL_checkinteger:tb,luaL_checkstack:tx,luaL_checkstring:tT,luaL_error:tE,luaL_newlib:tA,luaL_optinteger:tO,luaL_pushresult:tw}=q(7),{luastring_of:tL,to_luastring:tS}=q(5),P=function(h){return(192&h)==128},M=function(h,w){return h>=0?h:0-h>w?0:w+h+1},tI=[255,127,2047,65535],ft=function(h,w){let q=h[w],tr=0;if(q<128)tr=q;else{let tn=0;for(;64&q;){let ti=h[w+ ++tn];if((192&ti)!=128)return null;tr=tr<<6|63&ti,q<<=1}if(tr|=(127&q)<<5*tn,tn>3||tr>1114111||tr<=tI[tn])return null;w+=tn}return{code:tr,pos:w+1}},tP=tS("%U"),Ot=function(h,w){let q=tb(h,w);ty(h,0<=q&&q<=1114111,w,"value out of range"),ti(h,tP,q)},H=function(h){let w=tT(h,1),q=w.length,tr=tp(h,2)-1;if(tr<0)tr=0;else if(tr<q)for(tr++;P(w[tr]);)tr++;if(tr>=q)return 0;{let q=ft(w,tr);return null===q||P(w[q.pos])?tE(h,tS("invalid UTF-8 code")):(to(h,tr+1),to(h,q.code),2)}},tR={char:function(h){let w=tr(h);if(1===w)Ot(h,1);else{let q=new td;tv(h,q);for(let tr=1;tr<=w;tr++)Ot(h,tr),tm(q);tw(q)}return 1},codepoint:function(h){let w=tT(h,1),q=M(tO(h,2,1),w.length),tr=M(tO(h,3,q),w.length);if(ty(h,q>=1,2,"out of range"),ty(h,tr<=w.length,3,"out of range"),q>tr)return 0;if(tr-q>=Number.MAX_SAFE_INTEGER)return tE(h,"string slice too long");let tn=tr-q+1;for(tx(h,tn,"string slice too long"),tn=0,q-=1;q<tr;){let tr=ft(w,q);if(null===tr)return tE(h,"invalid UTF-8 code");to(h,tr.code),q=tr.pos,tn++}return tn},codes:function(h){return tT(h,1),tn(h,H),tl(h,1),to(h,0),3},len:function(h){let w=0,q=tT(h,1),tr=q.length,tn=M(tO(h,2,1),tr),ti=M(tO(h,3,-1),tr);for(ty(h,1<=tn&&--tn<=tr,2,"initial position out of string"),ty(h,--ti<tr,3,"final position out of string");tn<=ti;){let tr=ft(q,tn);if(null===tr)return ts(h),to(h,tn+1),2;tn=tr.pos,w++}return to(h,w),1},offset:function(h){let w=tT(h,1),q=tb(h,2),tr=q>=0?1:w.length+1;if(tr=M(tO(h,3,tr),w.length),ty(h,1<=tr&&--tr<=w.length,3,"position out of range"),0===q)for(;tr>0&&P(w[tr]);)tr--;else if(P(w[tr])&&tE(h,"initial position is a continuation byte"),q<0)for(;q<0&&tr>0;){do tr--;while(tr>0&&P(w[tr]));q++}else for(q--;q>0&&tr<w.length;){do tr++;while(P(w[tr]));q--}return 0===q?to(h,tr+1):ts(h),1}},tN=tL(91,0,45,127,194,45,244,93,91,128,45,191,93,42);h.exports.luaopen_utf8=function(h){return tA(h,tR),tu(h,tN),tc(h,-2,tS("charpattern",!0)),1}},function(h,w,q){let tr;let{LUA_OPLT:tn,LUA_TNUMBER:ti,lua_compare:to,lua_gettop:ts,lua_isinteger:tu,lua_isnoneornil:tl,lua_pushboolean:tc,lua_pushinteger:tp,lua_pushliteral:td,lua_pushnil:tm,lua_pushnumber:ty,lua_pushvalue:tv,lua_setfield:tb,lua_settop:tx,lua_tointeger:tT,lua_tointegerx:tE,lua_type:tA}=q(2),{luaL_argcheck:tO,luaL_argerror:tw,luaL_checkany:tL,luaL_checkinteger:tS,luaL_checknumber:tI,luaL_error:tP,luaL_newlib:tR,luaL_optnumber:tN}=q(7),{LUA_MAXINTEGER:tM,LUA_MININTEGER:tk,lua_numbertointeger:tU}=q(3),{to_luastring:tC}=q(5),lt=function(){return tr=1103515245*tr+12345&2147483647},dt=function(h,w){let q=tU(w);!1!==q?tp(h,q):ty(h,w)},tD={abs:function(h){if(tu(h,1)){let w=tT(h,1);w<0&&(w=0|-w),tp(h,w)}else ty(h,Math.abs(tI(h,1)));return 1},acos:function(h){return ty(h,Math.acos(tI(h,1))),1},asin:function(h){return ty(h,Math.asin(tI(h,1))),1},atan:function(h){let w=tI(h,1),q=tN(h,2,1);return ty(h,Math.atan2(w,q)),1},ceil:function(h){return tu(h,1)?tx(h,1):dt(h,Math.ceil(tI(h,1))),1},cos:function(h){return ty(h,Math.cos(tI(h,1))),1},deg:function(h){return ty(h,tI(h,1)*(180/Math.PI)),1},exp:function(h){return ty(h,Math.exp(tI(h,1))),1},floor:function(h){return tu(h,1)?tx(h,1):dt(h,Math.floor(tI(h,1))),1},fmod:function(h){if(tu(h,1)&&tu(h,2)){let w=tT(h,2);0===w?tw(h,2,"zero"):tp(h,tT(h,1)%w|0)}else{let w=tI(h,1),q=tI(h,2);ty(h,w%q)}return 1},log:function(h){let w,q=tI(h,1);if(tl(h,2))w=Math.log(q);else{let tr=tI(h,2);w=2===tr?Math.log2(q):10===tr?Math.log10(q):Math.log(q)/Math.log(tr)}return ty(h,w),1},max:function(h){let w=ts(h),q=1;tO(h,w>=1,1,"value expected");for(let tr=2;tr<=w;tr++)to(h,q,tr,tn)&&(q=tr);return tv(h,q),1},min:function(h){let w=ts(h),q=1;tO(h,w>=1,1,"value expected");for(let tr=2;tr<=w;tr++)to(h,tr,q,tn)&&(q=tr);return tv(h,q),1},modf:function(h){if(tu(h,1))tx(h,1),ty(h,0);else{let w=tI(h,1),q=w<0?Math.ceil(w):Math.floor(w);dt(h,q),ty(h,w===q?0:w-q)}return 2},rad:function(h){return ty(h,tI(h,1)*(Math.PI/180)),1},random:function(h){let w,q,tn=void 0===tr?Math.random():lt()/2147483648;switch(ts(h)){case 0:return ty(h,tn),1;case 1:w=1,q=tS(h,1);break;case 2:w=tS(h,1),q=tS(h,2);break;default:return tP(h,"wrong number of arguments")}return tO(h,w<=q,1,"interval is empty"),tO(h,w>=0||q<=tM+w,1,"interval too large"),tp(h,Math.floor(tn*=q-w+1)+w),1},randomseed:function(h){return 0==(tr=0|tI(h,1))&&(tr=1),lt(),0},sin:function(h){return ty(h,Math.sin(tI(h,1))),1},sqrt:function(h){return ty(h,Math.sqrt(tI(h,1))),1},tan:function(h){return ty(h,Math.tan(tI(h,1))),1},tointeger:function(h){let w=tE(h,1);return!1!==w?tp(h,w):(tL(h,1),tm(h)),1},type:function(h){return tA(h,1)===ti?tu(h,1)?td(h,"integer"):td(h,"float"):(tL(h,1),tm(h)),1},ult:function(h){let w=tS(h,1),q=tS(h,2);return tc(h,w>=0?q<0||w<q:q<0&&w<q),1}};h.exports.luaopen_math=function(h){return tR(h,tD),ty(h,Math.PI),tb(h,-2,tC("pi",!0)),ty(h,1/0),tb(h,-2,tC("huge",!0)),tp(h,tM),tb(h,-2,tC("maxinteger",!0)),tp(h,tk),tb(h,-2,tC("mininteger",!0)),1}},function(h,w,q){let tr;let{LUA_MASKCALL:tn,LUA_MASKCOUNT:ti,LUA_MASKLINE:to,LUA_MASKRET:ts,LUA_REGISTRYINDEX:tu,LUA_TFUNCTION:tl,LUA_TNIL:tc,LUA_TTABLE:tp,LUA_TUSERDATA:td,lua_Debug:tm,lua_call:ty,lua_checkstack:tv,lua_gethook:tb,lua_gethookcount:tx,lua_gethookmask:tT,lua_getinfo:tE,lua_getlocal:tA,lua_getmetatable:tO,lua_getstack:tw,lua_getupvalue:tL,lua_getuservalue:tS,lua_insert:tI,lua_iscfunction:tP,lua_isfunction:tR,lua_isnoneornil:tN,lua_isthread:tM,lua_newtable:tk,lua_pcall:tU,lua_pop:tC,lua_pushboolean:tD,lua_pushfstring:tF,lua_pushinteger:tB,lua_pushlightuserdata:tj,lua_pushliteral:tG,lua_pushnil:tV,lua_pushstring:tX,lua_pushvalue:tH,lua_rawgetp:tz,lua_rawsetp:tK,lua_rotate:tY,lua_setfield:tW,lua_sethook:tq,lua_setlocal:tZ,lua_setmetatable:tJ,lua_settop:tQ,lua_setupvalue:t$,lua_setuservalue:t0,lua_tojsstring:t1,lua_toproxy:t2,lua_tostring:t3,lua_tothread:t4,lua_touserdata:t5,lua_type:t6,lua_upvalueid:t8,lua_upvaluejoin:t7,lua_xmove:t9}=q(2),{luaL_argcheck:er,luaL_argerror:en,luaL_checkany:ei,luaL_checkinteger:eo,luaL_checkstring:es,luaL_checktype:eu,luaL_error:el,luaL_loadbuffer:ep,luaL_newlib:ed,luaL_optinteger:e_,luaL_optstring:eg,luaL_traceback:em,lua_writestringerror:ey}=q(7),ev=q(17),{luastring_indexOf:eb,to_luastring:ex}=q(5),_e=function(h,w,q){h===w||tv(w,q)||el(h,ex("stack overflow",!0))},ve=function(h){return tM(h,1)?{arg:1,thread:t4(h,1)}:{arg:0,thread:h}},xe=function(h,w,q){tX(h,q),tW(h,-2,w)},Ue=function(h,w,q){tB(h,q),tW(h,-2,w)},ne=function(h,w,q){tD(h,q),tW(h,-2,w)},se=function(h,w,q){h==w?tY(h,-2,1):t9(w,h,1),tW(h,-2,q)},be=function(h,w){let q=eo(h,2);eu(h,1,tl);let tr=w?tL(h,1,q):t$(h,1,q);return null===tr?0:(tX(h,tr),tI(h,-(w+1)),w+1)},c=function(h,w,q){let tr=eo(h,q);return eu(h,w,tl),er(h,null!==tL(h,w,tr),q,"invalid upvalue index"),tr},eT=ex("__hooks__",!0),eE=["call","return","line","count","tail call"].map(h=>ex(h)),_=function(h,w){tz(h,tu,eT);let q=t5(h,-1).get(h);q&&(q(h),tX(h,eE[w.event]),w.currentline>=0?tB(h,w.currentline):tV(h),ev.lua_assert(tE(h,ex("lS"),w)),ty(h,2,0))},eO={gethook:function(h){let w,q=ve(h).thread,tr=new Uint8Array(5),ti=tT(q),tl=tb(q);return null===tl?tV(h):tl!==_?tG(h,"external hook"):(tz(h,tu,eT),t5(h,-1).get(q)(h)),tX(h,(w=0,ti&tn&&(tr[w++]=99),ti&ts&&(tr[w++]=114),ti&to&&(tr[w++]=108),tr.subarray(0,w))),tB(h,tx(q)),3},getinfo:function(h){let w=new tm,q=ve(h),tr=q.arg,tn=q.thread,ti=eg(h,tr+2,"flnStu");if(_e(h,tn,3),tR(h,tr+1))ti=tF(h,ex(">%s"),ti),tH(h,tr+1),t9(h,tn,1);else if(!tw(tn,eo(h,tr+1),w))return tV(h),1;return tE(tn,ti,w)||en(h,tr+2,"invalid option"),tk(h),eb(ti,83)>-1&&(xe(h,ex("source",!0),w.source),xe(h,ex("short_src",!0),w.short_src),Ue(h,ex("linedefined",!0),w.linedefined),Ue(h,ex("lastlinedefined",!0),w.lastlinedefined),xe(h,ex("what",!0),w.what)),eb(ti,108)>-1&&Ue(h,ex("currentline",!0),w.currentline),eb(ti,117)>-1&&(Ue(h,ex("nups",!0),w.nups),Ue(h,ex("nparams",!0),w.nparams),ne(h,ex("isvararg",!0),w.isvararg)),eb(ti,110)>-1&&(xe(h,ex("name",!0),w.name),xe(h,ex("namewhat",!0),w.namewhat)),eb(ti,116)>-1&&ne(h,ex("istailcall",!0),w.istailcall),eb(ti,76)>-1&&se(h,tn,ex("activelines",!0)),eb(ti,102)>-1&&se(h,tn,ex("func",!0)),1},getlocal:function(h){let w=ve(h),q=w.thread,tr=w.arg,tn=new tm,ti=eo(h,tr+2);if(tR(h,tr+1))return tH(h,tr+1),tX(h,tA(h,null,ti)),1;{if(!tw(q,eo(h,tr+1),tn))return en(h,tr+1,"level out of range");_e(h,q,1);let w=tA(q,tn,ti);return w?(t9(q,h,1),tX(h,w),tY(h,-2,1),2):(tV(h),1)}},getmetatable:function(h){return ei(h,1),tO(h,1)||tV(h),1},getregistry:function(h){return tH(h,tu),1},getupvalue:function(h){return be(h,1)},getuservalue:function(h){return t6(h,1)!==td?tV(h):tS(h,1),1},sethook:function(h){let w,q,tr,tp,td=ve(h),tm=td.thread,ty=td.arg;if(tN(h,ty+1))tQ(h,ty+1),tr=null,w=0,q=0;else{var tv;let tu;let tc=es(h,ty+2);eu(h,ty+1,tl),q=e_(h,ty+3,0),tr=_,tv=q,tu=0,eb(tc,99)>-1&&(tu|=tn),eb(tc,114)>-1&&(tu|=ts),eb(tc,108)>-1&&(tu|=to),tv>0&&(tu|=ti),w=tu}tz(h,tu,eT)===tc?(tj(h,tp=new WeakMap),tK(h,tu,eT)):tp=t5(h,-1);let tb=t2(h,ty+1);return tp.set(tm,tb),tq(tm,tr,w,q),0},setlocal:function(h){let w=ve(h),q=w.thread,tr=w.arg,tn=new tm,ti=eo(h,tr+1),to=eo(h,tr+2);if(!tw(q,ti,tn))return en(h,tr+1,"level out of range");ei(h,tr+3),tQ(h,tr+3),_e(h,q,1),t9(h,q,1);let ts=tZ(q,tn,to);return null===ts&&tC(q,1),tX(h,ts),1},setmetatable:function(h){let w=t6(h,2);return er(h,w==tc||w==tp,2,"nil or table expected"),tQ(h,2),tJ(h,1),1},setupvalue:function(h){return ei(h,3),be(h,0)},setuservalue:function(h){return eu(h,1,td),ei(h,2),tQ(h,2),t0(h,1),1},traceback:function(h){let w=ve(h),q=w.thread,tr=w.arg,tn=t3(h,tr+1);if(null!==tn||tN(h,tr+1)){let w=e_(h,tr+2,h===q?1:0);em(h,q,tn,w)}else tH(h,tr+1);return 1},upvalueid:function(h){let w=c(h,1,2);return tj(h,t8(h,1,w)),1},upvaluejoin:function(h){let w=c(h,1,2),q=c(h,3,4);return er(h,!tP(h,1),1,"Lua function expected"),er(h,!tP(h,3),3,"Lua function expected"),t7(h,1,w,3,q),0}};"u">typeof window&&(tr=function(){let h=prompt("lua_debug>","");return null!==h?h:""}),tr&&(eO.debug=function(h){for(;;){let w=tr();if("cont"===w)return 0;if(0===w.length)continue;let q=ex(w);(ep(h,q,q.length,ex("=(debug command)",!0))||tU(h,0,0,0))&&ey(t1(h,-1),`
`),tQ(h,0)}}),h.exports.luaopen_debug=function(h){return ed(h,eO),1}},function(h,w,q){let tr,tn;let{LUA_DIRSEP:ti,LUA_EXEC_DIR:to,LUA_JSPATH_DEFAULT:ts,LUA_PATH_DEFAULT:tu,LUA_PATH_MARK:tl,LUA_PATH_SEP:tc}=q(3),{LUA_OK:tp,LUA_REGISTRYINDEX:td,LUA_TNIL:tm,LUA_TTABLE:ty,lua_callk:tv,lua_createtable:tb,lua_getfield:tx,lua_insert:tT,lua_isfunction:tE,lua_isnil:tA,lua_isstring:tO,lua_newtable:tw,lua_pop:tL,lua_pushboolean:tS,lua_pushcclosure:tI,lua_pushcfunction:tP,lua_pushfstring:tR,lua_pushglobaltable:tN,lua_pushlightuserdata:tM,lua_pushliteral:tk,lua_pushlstring:tU,lua_pushnil:tC,lua_pushstring:tD,lua_pushvalue:tF,lua_rawgeti:tB,lua_rawgetp:tj,lua_rawseti:tG,lua_rawsetp:tV,lua_remove:tX,lua_setfield:tH,lua_setmetatable:tz,lua_settop:tK,lua_toboolean:tY,lua_tostring:tW,lua_touserdata:tq,lua_upvalueindex:tZ}=q(2),{LUA_LOADED_TABLE:tJ,LUA_PRELOAD_TABLE:tQ,luaL_Buffer:t$,luaL_addvalue:t0,luaL_buffinit:t1,luaL_checkstring:t2,luaL_error:t3,luaL_getsubtable:t4,luaL_gsub:t5,luaL_len:t6,luaL_loadfile:t8,luaL_newlib:t7,luaL_optstring:t9,luaL_pushresult:er,luaL_setfuncs:en}=q(7),ei=q(17),{luastring_indexOf:eo,to_jsstring:es,to_luastring:eu,to_uristring:el}=q(5),ep=q(0),ed="u">typeof window?window:"u">typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:(0,eval)("this"),e_=eu("__JSLIBS__"),eg=eu("luaopen_"),em=eu("_"),ey=eu("\x01");tr=function(h,w,q){w=el(w);let tr=new XMLHttpRequest;if(tr.open("GET",w,!1),tr.send(),tr.status<200||tr.status>=300)return tD(h,eu(`${tr.status}: ${tr.statusText}`)),null;let tn,ti=tr.response;/\/\/[#@] sourceURL=/.test(ti)||(ti+=" //# sourceURL="+w);try{tn=Function("fengari",ti)}catch(w){return tD(h,eu(`${w.name}: ${w.message}`)),null}let to=tn(ep);return"function"==typeof to||"object"==typeof to&&null!==to?to:void 0===to?ed:(tD(h,eu(`library returned unexpected type (${typeof to})`)),null)},tn=function(h){h=el(h);let w=new XMLHttpRequest;return w.open("GET",h,!1),w.send(),w.status>=200&&w.status<=299};let _e=function(h,w,q){let tn=Ue(h,w);if(null===tn){if(null===(tn=tr(h,w,42===q[0])))return 1;ne(h,w,tn)}if(42===q[0])return tS(h,1),0;{let w;let tr=(w=tn[es(q)])&&"function"==typeof w?w:(tR(h,eu("undefined symbol: %s"),q),null);return null===tr?2:(tP(h,tr),0)}},xe=function(h,w,q,tr){let tn,ti=`${q}${ei.LUA_VERSUFFIX}`;tD(h,eu(ti));let to=ed[ti];void 0===to&&(to=ed[q]),void 0===to||(tx(h,td,eu("LUA_NOENV")),tn=tY(h,-1),tL(h,1),tn)?tD(h,tr):(to=t5(h,eu(to),eu(tc+tc,!0),eu(tc+es(ey)+tc,!0)),t5(h,to,ey,tr),tX(h,-2)),tH(h,-3,w),tL(h,1)},Ue=function(h,w){tj(h,td,e_),tx(h,-1,w);let q=tq(h,-1);return tL(h,2),q},ne=function(h,w,q){tj(h,td,e_),tM(h,q),tF(h,-1),tH(h,-3,w),tG(h,-2,t6(h,-2)+1),tL(h,1)},se=function(h,w){for(;w[0]===tc.charCodeAt(0);)w=w.subarray(1);if(0===w.length)return null;let q=eo(w,tc.charCodeAt(0));return q<0&&(q=w.length),tU(h,w,q),w.subarray(q)},be=function(h,w,q,tr,ti){let to=new t$;for(t1(h,to),0!==tr[0]&&(w=t5(h,w,tr,ti));null!==(q=se(h,q));){let q=t5(h,tW(h,-1),eu(tl,!0),w);if(tX(h,-2),tn(q))return q;tR(h,eu(`
	no file '%s'`),q),tX(h,-2),t0(to)}return er(to),null},c=function(h,w,q,tr){tx(h,tZ(1),q);let tn=tW(h,-1);return null===tn&&t3(h,eu("'package.%s' must be a string"),q),be(h,w,tn,eu("."),tr)},p=function(h,w,q){return w?(tD(h,q),2):t3(h,eu(`error loading module '%s' from file '%s':
	%s`),tW(h,1),q,tW(h,-1))},b=function(h){let w=t2(h,1),q=c(h,w,eu("path",!0),eu(ti,!0));return null===q?1:p(h,t8(h,q)===tp,q)},_=function(h,w,q){let tr;let tn=eo(q=t5(h,q,eu("."),em),45);if(tn>=0){tr=tU(h,q,tn),tr=tR(h,eu("%s%s"),eg,tr);let ti=_e(h,w,tr);if(2!==ti)return ti;q=tn+1}return tr=tR(h,eu("%s%s"),eg,q),_e(h,w,tr)},x=function(h){let w=t2(h,1),q=c(h,w,eu("jspath",!0),eu(ti,!0));return null===q?1:p(h,0===_(h,q,w),q)},N=function(h){let w,q=t2(h,1),tr=eo(q,46);if(tr<0)return 0;tU(h,q,tr);let tn=c(h,tW(h,-1),eu("jspath",!0),eu(ti,!0));return null===tn?1:0!==(w=_(h,tn,q))?2!=w?p(h,0,tn):(tD(h,eu(`
	no module '%s' in file '%s'`),q,tn),1):(tD(h,tn),2)},A=function(h){let w=t2(h,1);return tx(h,td,tQ),tx(h,-1,w)===tm&&tR(h,eu(`
	no field package.preload['%s']`),w),1},Q=function(h,w,q){for(;w===tp?(tB(h,3,q.i)===tm&&(tL(h,1),er(q.msg),t3(h,eu("module '%s' not found:%s"),q.name,tW(h,-1))),tD(h,q.name),tv(h,1,2,q,Q)):w=tp,!tE(h,-2);q.i++)tO(h,-2)?(tL(h,1),t0(q.msg)):tL(h,2);return q.k(h,tp,q.ctx)},Mt=function(h,w,q){return tD(h,q),tT(h,-2),tv(h,2,1,q,Wt),Wt(h,tp,q)},Wt=function(h,w,q){return tA(h,-1)||tH(h,2,q),tx(h,2,q)==tm&&(tS(h,1),tF(h,-1),tH(h,2,q)),1},ev={loadlib:function(h){let w=t2(h,1),q=t2(h,2),tr=_e(h,w,q);return 0===tr?1:(tC(h),tT(h,-2),tk(h,1===tr?"open":"init"),3)},searchpath:function(h){return null!==be(h,t2(h,1),t2(h,2),t9(h,3,"."),t9(h,4,ti))?1:(tC(h),tT(h,-2),2)}},eb={require:function(h){let w,q=t2(h,1);return tK(h,1),tx(h,td,tJ),tx(h,2,q),tY(h,-1)?1:(tL(h,1),t1(h,w=new t$),tx(h,tZ(1),eu("searchers",!0))!==ty&&t3(h,eu("'package.searchers' must be a table")),Q(h,tp,{name:q,i:1,msg:w,ctx:q,k:Mt}))}};h.exports.luaopen_package=function(h){return tw(h),tb(h,0,1),tz(h,-2),tV(h,td,e_),t7(h,ev),function(h){let w=[A,b,x,N,null];tb(h);for(let q=0;w[q];q++)tF(h,-2),tI(h,w[q],1),tG(h,-2,q+1);tH(h,-2,eu("searchers",!0))}(h),xe(h,eu("path",!0),"LUA_PATH",tu),xe(h,eu("jspath",!0),"LUA_JSPATH",ts),tk(h,ti+`
`+tc+`
`+tl+`
`+to+`
-
`),tH(h,-2,eu("config",!0)),t4(h,td,tJ),tH(h,-2,eu("loaded",!0)),t4(h,td,tQ),tH(h,-2,eu("preload",!0)),tN(h),tF(h,-2),en(h,eb,1),tL(h,1),1}},function(h,w,q){let{lua_pushinteger:tr,lua_pushliteral:tn,lua_setfield:ti}=q(2),{luaL_newlib:to}=q(7),{FENGARI_AUTHORS:ts,FENGARI_COPYRIGHT:tu,FENGARI_RELEASE:tl,FENGARI_VERSION:tc,FENGARI_VERSION_MAJOR:tp,FENGARI_VERSION_MINOR:td,FENGARI_VERSION_NUM:tm,FENGARI_VERSION_RELEASE:ty,to_luastring:tv}=q(5);h.exports.luaopen_fengari=function(h){return to(h,{}),tn(h,ts),ti(h,-2,tv("AUTHORS")),tn(h,tu),ti(h,-2,tv("COPYRIGHT")),tn(h,tl),ti(h,-2,tv("RELEASE")),tn(h,tc),ti(h,-2,tv("VERSION")),tn(h,tp),ti(h,-2,tv("VERSION_MAJOR")),tn(h,td),ti(h,-2,tv("VERSION_MINOR")),tr(h,tm),ti(h,-2,tv("VERSION_NUM")),tn(h,ty),ti(h,-2,tv("VERSION_RELEASE")),1}},function(h,w,q){q.r(w),q.d(w,"L",function(){return tM}),q.d(w,"load",function(){return Ot});var tr=q(0);q.d(w,"FENGARI_AUTHORS",function(){return tr.FENGARI_AUTHORS}),q.d(w,"FENGARI_COPYRIGHT",function(){return tr.FENGARI_COPYRIGHT}),q.d(w,"FENGARI_RELEASE",function(){return tr.FENGARI_RELEASE}),q.d(w,"FENGARI_VERSION",function(){return tr.FENGARI_VERSION}),q.d(w,"FENGARI_VERSION_MAJOR",function(){return tr.FENGARI_VERSION_MAJOR}),q.d(w,"FENGARI_VERSION_MINOR",function(){return tr.FENGARI_VERSION_MINOR}),q.d(w,"FENGARI_VERSION_NUM",function(){return tr.FENGARI_VERSION_NUM}),q.d(w,"FENGARI_VERSION_RELEASE",function(){return tr.FENGARI_VERSION_RELEASE}),q.d(w,"luastring_eq",function(){return tr.luastring_eq}),q.d(w,"luastring_indexOf",function(){return tr.luastring_indexOf}),q.d(w,"luastring_of",function(){return tr.luastring_of}),q.d(w,"to_jsstring",function(){return tr.to_jsstring}),q.d(w,"to_luastring",function(){return tr.to_luastring}),q.d(w,"to_uristring",function(){return tr.to_uristring}),q.d(w,"lua",function(){return tr.lua}),q.d(w,"lauxlib",function(){return tr.lauxlib}),q.d(w,"lualib",function(){return tr.lualib});var tn=q(21);q.d(w,"interop",function(){return tn});let{LUA_ERRRUN:ti,LUA_ERRSYNTAX:to,LUA_OK:ts,LUA_VERSION_MAJOR:tu,LUA_VERSION_MINOR:tl,lua_Debug:tc,lua_getinfo:tp,lua_getstack:td,lua_gettop:tm,lua_insert:ty,lua_pcall:tv,lua_pop:tb,lua_pushcfunction:tx,lua_pushstring:tT,lua_remove:tE,lua_setglobal:tA,lua_tojsstring:tO}=tr.lua,{luaL_loadbuffer:tw,luaL_newstate:tL,luaL_requiref:tS}=tr.lauxlib,{checkjs:tI,luaopen_js:tP,push:tR,tojs:tN}=tn,tM=tL();function Ot(h,w){if("string"==typeof h)h=Object(tr.to_luastring)(h);else if(!(h instanceof Uint8Array))throw TypeError("expects an array of bytes or javascript string");let q,tn=tw(tM,h,null,w=w?Object(tr.to_luastring)(w):null);if(q=tn===to?SyntaxError(tO(tM,-1)):tN(tM,-1),tb(tM,1),tn!==ts)throw q;return q}if(tr.lualib.luaL_openlibs(tM),tS(tM,Object(tr.to_luastring)("js"),tP,1),tb(tM,1),tT(tM,Object(tr.to_luastring)(tr.FENGARI_COPYRIGHT)),tA(tM,Object(tr.to_luastring)("_COPYRIGHT")),"u">typeof document&&document instanceof HTMLDocument){let H=function(h){switch(h){case"anonymous":return"omit";case"use-credentials":return"include";default:return"same-origin"}},$=function(h){let w=new tc;return td(h,2,w)&&tp(h,Object(tr.to_luastring)("Sl"),w),tR(h,new ErrorEvent("error",{bubbles:!0,cancelable:!0,message:tO(h,1),error:tN(h,1),filename:w.short_src?Object(tr.to_jsstring)(w.short_src):void 0,lineno:w.currentline>0?w.currentline:void 0})),1},lt=function(h,w,q){let tr,tn=tw(tM,w,null,q);if(tn===to){let w=tO(tM,-1),q=h.src?h.src:document.location,tn,ti=SyntaxError(w,q,tn);tr=new ErrorEvent("error",{message:w,error:ti,filename:q,lineno:tn})}else if(tn===ts){let w=tm(tM);tx(tM,$),ty(tM,w),Object.defineProperty(document,"currentScript",{value:h,configurable:!0}),tn=tv(tM,0,0,w),delete document.currentScript,tE(tM,w),tn===ti&&(tr=tI(tM,-1))}tn!==ts&&(void 0===tr&&(tr=new ErrorEvent("error",{message:tO(tM,-1),error:tN(tM,-1)})),tb(tM,1),window.dispatchEvent(tr)&&console.error("uncaught exception",tr.error))},dt=function(h,w,q){if(h.status>=200&&h.status<300){let tn=h.response;lt(w,tn="string"==typeof tn?Object(tr.to_luastring)(h.response):new Uint8Array(tn),q)}else w.dispatchEvent(new Event("error"))},Vt=function(h){if(h.src){let w=Object(tr.to_luastring)("@"+h.src);if("complete"===document.readyState||h.async){if("function"==typeof fetch)fetch(h.src,{method:"GET",credentials:H(h.crossorigin),redirect:"follow",integrity:h.integrity}).then(function(h){if(h.ok)return h.arrayBuffer();throw Error("unable to fetch")}).then(function(q){lt(h,new Uint8Array(q),w)}).catch(function(w){h.dispatchEvent(new Event("error"))});else{let q=new XMLHttpRequest;q.open("GET",h.src,!0),q.responseType="arraybuffer",q.onreadystatechange=function(){4===q.readyState&&dt(q,h,w)},q.send()}}else{let q=new XMLHttpRequest;q.open("GET",h.src,!1),q.send(),dt(q,h,w)}}else{let w=Object(tr.to_luastring)(h.innerHTML),q=h.id?Object(tr.to_luastring)("="+h.id):w;lt(h,w,q)}},h=/^(.*?\/.*?)([\t ]*;.*)?$/,w=/^(\d+)\.(\d+)$/,B=function(q){if("SCRIPT"!==q.tagName)return;let tr=h.exec(q.type);if(!tr)return;let tn=tr[1];if("application/lua"===tn||"text/lua"===tn){if(q.hasAttribute("lua-version")){let h=w.exec(q.getAttribute("lua-version"));if(!h||h[1]!==tu||h[2]!==tl)return}Vt(q)}};"u">typeof MutationObserver?new MutationObserver(function(h,w){for(let w=0;w<h.length;w++){let q=h[w];for(let h=0;h<q.addedNodes.length;h++)B(q.addedNodes[h])}}).observe(document,{childList:!0,subtree:!0}):console.warn&&console.warn("fengari-web: MutationObserver not found; lua script tags will not be run when inserted"),Array.prototype.forEach.call(document.querySelectorAll('script[type^="application/lua"], script[type^="text/lua"]'),B)}},function(h,w,q){let{LUA_MULTRET:tr,LUA_OPADD:tn,LUA_OPBAND:ti,LUA_OPBNOT:to,LUA_OPBOR:ts,LUA_OPBXOR:tu,LUA_OPDIV:tl,LUA_OPIDIV:tc,LUA_OPMOD:tp,LUA_OPSHL:td,LUA_OPSHR:tm,LUA_OPUNM:ty,constant_types:{LUA_TBOOLEAN:tv,LUA_TLIGHTUSERDATA:tb,LUA_TLNGSTR:tx,LUA_TNIL:tT,LUA_TNUMFLT:tE,LUA_TNUMINT:tA,LUA_TTABLE:tO},to_luastring:tw}=q(1),{lua_assert:tL}=q(4),tS=q(20),tI=q(6),tP=q(16),tR=q(23),tN=q(9),tM=q(15),tk=tP.OpCodesI,tU=tI.TValue,tC={OPR_ADD:0,OPR_SUB:1,OPR_MUL:2,OPR_MOD:3,OPR_POW:4,OPR_DIV:5,OPR_IDIV:6,OPR_BAND:7,OPR_BOR:8,OPR_BXOR:9,OPR_SHL:10,OPR_SHR:11,OPR_CONCAT:12,OPR_EQ:13,OPR_LT:14,OPR_LE:15,OPR_NE:16,OPR_GT:17,OPR_GE:18,OPR_AND:19,OPR_OR:20,OPR_NOBINOPR:21},tD={OPR_MINUS:0,OPR_BNOT:1,OPR_NOT:2,OPR_LEN:3,OPR_NOUNOPR:4},dt=function(h){return h.t!==h.f},Vt=function(h,w){let q=tR.expkind;if(dt(h))return!1;switch(h.k){case q.VKINT:return!w||new tU(tA,h.u.ival);case q.VKFLT:return!w||new tU(tE,h.u.nval);default:return!1}},S=function(h,w,q){let tr,tn=w+q-1;if(h.pc>h.lasttarget&&(tr=h.f.code[h.pc-1]).opcode===tk.OP_LOADNIL){let h=tr.A,q=h+tr.B;if(h<=w&&w<=q+1||w<=h&&h<=tn+1)return h<w&&(w=h),q>tn&&(tn=q),tP.SETARG_A(tr,w),void tP.SETARG_B(tr,tn-w)}Ut(h,tk.OP_LOADNIL,w,q-1,0)},U=function(h,w){return h.f.code[w.u.info]},B=function(h,w){let q=h.f.code[w].sBx;return -1===q?-1:w+1+q},pt=function(h,w,q){let tr=h.f.code[w],tn=q-(w+1);tL(-1!==q),Math.abs(tn)>tP.MAXARG_sBx&&tS.luaX_syntaxerror(h.ls,tw("control structure too long",!0)),tP.SETARG_sBx(tr,tn)},ut=function(h,w,q){if(-1===q)return w;if(-1===w)w=q;else{let tr=w,tn=B(h,tr);for(;-1!==tn;)tn=B(h,tr=tn);pt(h,tr,q)}return w},qt=function(h){let w=h.jpc;h.jpc=-1;let q=Et(h,tk.OP_JMP,0,-1);return ut(h,q,w)},Ct=function(h,w,q,tr,tn){return Ut(h,w,q,tr,tn),qt(h)},kt=function(h){return h.lasttarget=h.pc,h.pc},Jt=function(h,w){return w>=1&&tP.testTMode(h.f.code[w-1].opcode)?w-1:w},J=function(h,w){return h.f.code[Jt(h,w)]},Z=function(h,w,q){let tr=Jt(h,w),tn=h.f.code[tr];return tn.opcode===tk.OP_TESTSET&&(q!==tP.NO_REG&&q!==tn.B?tP.SETARG_A(tn,q):h.f.code[tr]=tP.CREATE_ABC(tk.OP_TEST,tn.B,0,tn.C),!0)},xt=function(h,w){for(;-1!==w;w=B(h,w))Z(h,w,tP.NO_REG)},rt=function(h,w,q,tr,tn){for(;-1!==w;){let ti=B(h,w);Z(h,w,tr)?pt(h,w,q):pt(h,w,tn),w=ti}},It=function(h,w){kt(h),h.jpc=ut(h,h.jpc,w)},ee=function(h,w,q){q===h.pc?It(h,w):(tL(q<h.pc),rt(h,w,q,tP.NO_REG,q))},Zt=function(h,w){let q=h.f;return rt(h,h.jpc,h.pc,tP.NO_REG,h.pc),h.jpc=-1,q.code[h.pc]=w,q.lineinfo[h.pc]=h.ls.lastline,h.pc++},Ut=function(h,w,q,tr,tn){return tL(tP.getOpMode(w)===tP.iABC),tL(tP.getBMode(w)!==tP.OpArgN||0===tr),tL(tP.getCMode(w)!==tP.OpArgN||0===tn),tL(q<=tP.MAXARG_A&&tr<=tP.MAXARG_B&&tn<=tP.MAXARG_C),Zt(h,tP.CREATE_ABC(w,q,tr,tn))},et=function(h,w,q,tr){return tL(tP.getOpMode(w)===tP.iABx||tP.getOpMode(w)===tP.iAsBx),tL(tP.getCMode(w)===tP.OpArgN),tL(q<=tP.MAXARG_A&&tr<=tP.MAXARG_Bx),Zt(h,tP.CREATE_ABx(w,q,tr))},Et=function(h,w,q,tr){return et(h,w,q,tr+tP.MAXARG_sBx)},k=function(h,w){return tL(w<=tP.MAXARG_Ax),Zt(h,tP.CREATE_Ax(tk.OP_EXTRAARG,w))},ht=function(h,w,q){if(q<=tP.MAXARG_Bx)return et(h,tk.OP_LOADK,w,q);{let tr=et(h,tk.OP_LOADKX,w,0);return k(h,q),tr}},St=function(h,w){let q=h.freereg+w;q>h.f.maxstacksize&&(q>=255&&tS.luaX_syntaxerror(h.ls,tw("function or expression needs too many registers",!0)),h.f.maxstacksize=q)},F=function(h,w){St(h,w),h.freereg+=w},_t=function(h,w){!tP.ISK(w)&&w>=h.nactvar&&(h.freereg--,tL(w===h.freereg))},wt=function(h,w){w.k===tR.expkind.VNONRELOC&&_t(h,w.u.info)},ue=function(h,w,q){let tr=w.k===tR.expkind.VNONRELOC?w.u.info:-1,tn=q.k===tR.expkind.VNONRELOC?q.u.info:-1;tr>tn?(_t(h,tr),_t(h,tn)):(_t(h,tn),_t(h,tr))},le=function(h,w,q){let tr=h.f,tn=tN.luaH_get(h.L,h.ls.h,w);if(tn.ttisinteger()){let w=tn.value;if(w<h.nk&&tr.k[w].ttype()===q.ttype()&&tr.k[w].value===q.value)return w}let ti=h.nk;return tN.luaH_setfrom(h.L,h.ls.h,w,new tI.TValue(tA,ti)),tr.k[ti]=q,h.nk++,ti},ce=function(h,w){return le(h,new tU(tb,w),new tU(tA,w))},Le=function(h,w){let q=new tU(tE,w);return le(h,q,q)},Re=function(h,w){let q=new tU(tv,w);return le(h,q,q)},Pe=function(h,w,q){let tn=tR.expkind;if(w.k===tn.VCALL)tP.SETARG_C(U(h,w),q+1);else if(w.k===tn.VVARARG){let tr=U(h,w);tP.SETARG_B(tr,q+1),tP.SETARG_A(tr,h.freereg),F(h,1)}else tL(q===tr)},Fe=function(h,w){let q=tR.expkind;w.k===q.VCALL?(tL(2===U(h,w).C),w.k=q.VNONRELOC,w.u.info=U(h,w).A):w.k===q.VVARARG&&(tP.SETARG_B(U(h,w),2),w.k=q.VRELOCABLE)},I=function(h,w){let q=tR.expkind;switch(w.k){case q.VLOCAL:w.k=q.VNONRELOC;break;case q.VUPVAL:w.u.info=Ut(h,tk.OP_GETUPVAL,0,w.u.info,0),w.k=q.VRELOCABLE;break;case q.VINDEXED:{let tr;_t(h,w.u.ind.idx),w.u.ind.vt===q.VLOCAL?(_t(h,w.u.ind.t),tr=tk.OP_GETTABLE):(tL(w.u.ind.vt===q.VUPVAL),tr=tk.OP_GETTABUP),w.u.info=Ut(h,tr,0,w.u.ind.t,w.u.ind.idx),w.k=q.VRELOCABLE;break}case q.VVARARG:case q.VCALL:Fe(h,w)}},Ft=function(h,w,q,tr){return kt(h),Ut(h,tk.OP_LOADBOOL,w,q,tr)},Dt=function(h,w,q){let tr=tR.expkind;switch(I(h,w),w.k){case tr.VNIL:S(h,q,1);break;case tr.VFALSE:case tr.VTRUE:Ut(h,tk.OP_LOADBOOL,q,w.k===tr.VTRUE,0);break;case tr.VK:ht(h,q,w.u.info);break;case tr.VKFLT:ht(h,q,Le(h,w.u.nval));break;case tr.VKINT:ht(h,q,ce(h,w.u.ival));break;case tr.VRELOCABLE:{let tr=U(h,w);tP.SETARG_A(tr,q);break}case tr.VNONRELOC:q!==w.u.info&&Ut(h,tk.OP_MOVE,q,w.u.info,0);break;default:return void tL(w.k===tr.VJMP)}w.u.info=q,w.k=tr.VNONRELOC},Rt=function(h,w){w.k!==tR.expkind.VNONRELOC&&(F(h,1),Dt(h,w,h.freereg-1))},Tt=function(h,w){for(;-1!==w;w=B(h,w))if(J(h,w).opcode!==tk.OP_TESTSET)return!0;return!1},Lt=function(h,w,q){let tr=tR.expkind;if(Dt(h,w,q),w.k===tr.VJMP&&(w.t=ut(h,w.t,w.u.info)),dt(w)){let tn,ti=-1,to=-1;if(Tt(h,w.t)||Tt(h,w.f)){let tn=w.k===tr.VJMP?-1:qt(h);ti=Ft(h,q,0,1),to=Ft(h,q,1,0),It(h,tn)}tn=kt(h),rt(h,w.f,tn,q,ti),rt(h,w.t,tn,q,to)}w.f=w.t=-1,w.u.info=q,w.k=tr.VNONRELOC},Kt=function(h,w){I(h,w),wt(h,w),F(h,1),Lt(h,w,h.freereg-1)},_e=function(h,w){if(I(h,w),w.k===tR.expkind.VNONRELOC){if(!dt(w))return w.u.info;if(w.u.info>=h.nactvar)return Lt(h,w,w.u.info),w.u.info}return Kt(h,w),w.u.info},ve=function(h,w){dt(w)?_e(h,w):I(h,w)},xe=function(h,w){let q=tR.expkind,tr=!1;switch(ve(h,w),w.k){case q.VTRUE:w.u.info=Re(h,!0),tr=!0;break;case q.VFALSE:w.u.info=Re(h,!1),tr=!0;break;case q.VNIL:let tn,ti;w.u.info=(tn=new tU(tT,null),ti=new tU(tO,h.ls.h),le(h,ti,tn)),tr=!0;break;case q.VKINT:w.u.info=ce(h,w.u.ival),tr=!0;break;case q.VKFLT:w.u.info=Le(h,w.u.nval),tr=!0;break;case q.VK:tr=!0}return tr&&(w.k=q.VK,w.u.info<=tP.MAXINDEXRK)?tP.RKASK(w.u.info):_e(h,w)},Ue=function(h,w){let q=J(h,w.u.info);tL(tP.testTMode(q.opcode)&&q.opcode!==tk.OP_TESTSET&&q.opcode!==tk.OP_TEST),tP.SETARG_A(q,!q.A)},ne=function(h,w,q){if(w.k===tR.expkind.VRELOCABLE){let tr=U(h,w);if(tr.opcode===tk.OP_NOT)return h.pc--,Ct(h,tk.OP_TEST,tr.B,0,!q)}return Rt(h,w),wt(h,w),Ct(h,tk.OP_TESTSET,tP.NO_REG,w.u.info,q)},se=function(h,w){let q,tr=tR.expkind;switch(I(h,w),w.k){case tr.VJMP:Ue(h,w),q=w.u.info;break;case tr.VK:case tr.VKFLT:case tr.VKINT:case tr.VTRUE:q=-1;break;default:q=ne(h,w,0)}w.f=ut(h,w.f,q),It(h,w.t),w.t=-1},be=function(h,w){let q,tr=tR.expkind;switch(I(h,w),w.k){case tr.VJMP:q=w.u.info;break;case tr.VNIL:case tr.VFALSE:q=-1;break;default:q=ne(h,w,1)}w.t=ut(h,w.t,q),It(h,w.f),w.f=-1},c=function(h,w,q){let tr,tn,ty=tR.expkind;if(!(tr=Vt(w,!0))||!(tn=Vt(q,!0))||!function(h,w,q){switch(h){case ti:case ts:case tu:case td:case tm:case to:return!1!==tM.tointeger(w)&&!1!==tM.tointeger(q);case tl:case tc:case tp:return 0!==q.value;default:return 1}}(h,tr,tn))return 0;let tv=new tU;if(tI.luaO_arith(null,h,tr,tn,tv),tv.ttisinteger())w.k=ty.VKINT,w.u.ival=tv.value;else{let h=tv.value;if(isNaN(h)||0===h)return!1;w.k=ty.VKFLT,w.u.nval=h}return!0},p=function(h,w,q,tr,tn){let ti=xe(h,tr),to=xe(h,q);ue(h,q,tr),q.u.info=Ut(h,w,0,to,ti),q.k=tR.expkind.VRELOCABLE,b(h,tn)},b=function(h,w){h.f.lineinfo[h.pc-1]=w};h.exports.BinOpr=tC,h.exports.NO_JUMP=-1,h.exports.UnOpr=tD,h.exports.getinstruction=U,h.exports.luaK_checkstack=St,h.exports.luaK_code=Zt,h.exports.luaK_codeABC=Ut,h.exports.luaK_codeABx=et,h.exports.luaK_codeAsBx=Et,h.exports.luaK_codek=ht,h.exports.luaK_concat=ut,h.exports.luaK_dischargevars=I,h.exports.luaK_exp2RK=xe,h.exports.luaK_exp2anyreg=_e,h.exports.luaK_exp2anyregup=function(h,w){(w.k!==tR.expkind.VUPVAL||dt(w))&&_e(h,w)},h.exports.luaK_exp2nextreg=Kt,h.exports.luaK_exp2val=ve,h.exports.luaK_fixline=b,h.exports.luaK_getlabel=kt,h.exports.luaK_goiffalse=be,h.exports.luaK_goiftrue=se,h.exports.luaK_indexed=function(h,w,q){let tr=tR.expkind;tL(!dt(w)&&(tR.vkisinreg(w.k)||w.k===tr.VUPVAL)),w.u.ind.t=w.u.info,w.u.ind.idx=xe(h,q),w.u.ind.vt=w.k===tr.VUPVAL?tr.VUPVAL:tr.VLOCAL,w.k=tr.VINDEXED},h.exports.luaK_infix=function(h,w,q){switch(w){case tC.OPR_AND:se(h,q);break;case tC.OPR_OR:be(h,q);break;case tC.OPR_CONCAT:Kt(h,q);break;case tC.OPR_ADD:case tC.OPR_SUB:case tC.OPR_MUL:case tC.OPR_DIV:case tC.OPR_IDIV:case tC.OPR_MOD:case tC.OPR_POW:case tC.OPR_BAND:case tC.OPR_BOR:case tC.OPR_BXOR:case tC.OPR_SHL:case tC.OPR_SHR:Vt(q,!1)||xe(h,q);break;default:xe(h,q)}},h.exports.luaK_intK=ce,h.exports.luaK_jump=qt,h.exports.luaK_jumpto=function(h,w){return ee(h,qt(h),w)},h.exports.luaK_nil=S,h.exports.luaK_numberK=Le,h.exports.luaK_patchclose=function(h,w,q){for(q++;-1!==w;w=B(h,w)){let tr=h.f.code[w];tL(tr.opcode===tk.OP_JMP&&(0===tr.A||tr.A>=q)),tP.SETARG_A(tr,q)}},h.exports.luaK_patchlist=ee,h.exports.luaK_patchtohere=It,h.exports.luaK_posfix=function(h,w,q,tr,ti){let to=tR.expkind;switch(w){case tC.OPR_AND:tL(-1===q.t),I(h,tr),tr.f=ut(h,tr.f,q.f),q.to(tr);break;case tC.OPR_OR:tL(-1===q.f),I(h,tr),tr.t=ut(h,tr.t,q.t),q.to(tr);break;case tC.OPR_CONCAT:{ve(h,tr);let w=U(h,tr);tr.k===to.VRELOCABLE&&w.opcode===tk.OP_CONCAT?(tL(q.u.info===w.B-1),wt(h,q),tP.SETARG_B(w,q.u.info),q.k=to.VRELOCABLE,q.u.info=tr.u.info):(Kt(h,tr),p(h,tk.OP_CONCAT,q,tr,ti));break}case tC.OPR_ADD:case tC.OPR_SUB:case tC.OPR_MUL:case tC.OPR_DIV:case tC.OPR_IDIV:case tC.OPR_MOD:case tC.OPR_POW:case tC.OPR_BAND:case tC.OPR_BOR:case tC.OPR_BXOR:case tC.OPR_SHL:case tC.OPR_SHR:c(w+tn,q,tr)||p(h,w+tk.OP_ADD,q,tr,ti);break;case tC.OPR_EQ:case tC.OPR_LT:case tC.OPR_LE:case tC.OPR_NE:case tC.OPR_GT:case tC.OPR_GE:(function(h,w,q,tr){let tn,ti=tR.expkind;q.k===ti.VK?tn=tP.RKASK(q.u.info):(tL(q.k===ti.VNONRELOC),tn=q.u.info);let to=xe(h,tr);switch(ue(h,q,tr),w){case tC.OPR_NE:q.u.info=Ct(h,tk.OP_EQ,0,tn,to);break;case tC.OPR_GT:case tC.OPR_GE:{let tr=w-tC.OPR_NE+tk.OP_EQ;q.u.info=Ct(h,tr,1,to,tn);break}default:{let tr=w-tC.OPR_EQ+tk.OP_EQ;q.u.info=Ct(h,tr,1,tn,to)}}q.k=ti.VJMP})(h,w,q,tr)}return q},h.exports.luaK_prefix=function(h,w,q,tr){let tn=new tR.expdesc;switch(tn.k=tR.expkind.VKINT,tn.u.ival=tn.u.nval=tn.u.info=0,tn.t=-1,tn.f=-1,w){case tD.OPR_MINUS:case tD.OPR_BNOT:if(c(w+ty,q,tn))break;case tD.OPR_LEN:var ti;let to;ti=w+tk.OP_UNM,to=_e(h,q),wt(h,q),q.u.info=Ut(h,ti,0,to,0),q.k=tR.expkind.VRELOCABLE,b(h,tr);break;case tD.OPR_NOT:(function(h,w){let q=tR.expkind;switch(I(h,w),w.k){case q.VNIL:case q.VFALSE:w.k=q.VTRUE;break;case q.VK:case q.VKFLT:case q.VKINT:case q.VTRUE:w.k=q.VFALSE;break;case q.VJMP:Ue(h,w);break;case q.VRELOCABLE:case q.VNONRELOC:Rt(h,w),wt(h,w),w.u.info=Ut(h,tk.OP_NOT,0,w.u.info,0),w.k=q.VRELOCABLE}{let h=w.f;w.f=w.t,w.t=h}xt(h,w.f),xt(h,w.t)})(h,q)}},h.exports.luaK_reserveregs=F,h.exports.luaK_ret=function(h,w,q){Ut(h,tk.OP_RETURN,w,q+1,0)},h.exports.luaK_self=function(h,w,q){_e(h,w);let tr=w.u.info;wt(h,w),w.u.info=h.freereg,w.k=tR.expkind.VNONRELOC,F(h,2),Ut(h,tk.OP_SELF,w.u.info,tr,xe(h,q)),wt(h,q)},h.exports.luaK_setlist=function(h,w,q,tn){let ti=(q-1)/tP.LFIELDS_PER_FLUSH+1,to=tn===tr?0:tn;tL(0!==tn&&tn<=tP.LFIELDS_PER_FLUSH),ti<=tP.MAXARG_C?Ut(h,tk.OP_SETLIST,w,to,ti):ti<=tP.MAXARG_Ax?(Ut(h,tk.OP_SETLIST,w,to,0),k(h,ti)):tS.luaX_syntaxerror(h.ls,tw("constructor too long",!0)),h.freereg=w+1},h.exports.luaK_setmultret=function(h,w){Pe(h,w,tr)},h.exports.luaK_setoneret=Fe,h.exports.luaK_setreturns=Pe,h.exports.luaK_storevar=function(h,w,q){let tr=tR.expkind;switch(w.k){case tr.VLOCAL:return wt(h,q),void Lt(h,q,w.u.info);case tr.VUPVAL:{let tr=_e(h,q);Ut(h,tk.OP_SETUPVAL,tr,w.u.info,0);break}case tr.VINDEXED:{let tn=w.u.ind.vt===tr.VLOCAL?tk.OP_SETTABLE:tk.OP_SETTABUP,ti=xe(h,q);Ut(h,tn,w.u.ind.t,w.u.ind.idx,ti)}}wt(h,q)},h.exports.luaK_stringK=function(h,w){let q=new tU(tx,w);return le(h,q,q)}},function(h,w,q){let{LUA_SIGNATURE:tr,constant_types:{LUA_TBOOLEAN:tn,LUA_TLNGSTR:ti,LUA_TNIL:to,LUA_TNUMFLT:ts,LUA_TNUMINT:tu,LUA_TSHRSTR:tl},thread_status:{LUA_ERRSYNTAX:tc},is_luastring:tp,luastring_eq:td,to_luastring:tm}=q(1),ty=q(8),tv=q(13),tb=q(6),{MAXARG_sBx:tx,POS_A:tT,POS_Ax:tE,POS_B:tA,POS_Bx:tO,POS_C:tw,POS_OP:tL,SIZE_A:tS,SIZE_Ax:tI,SIZE_B:tP,SIZE_Bx:tR,SIZE_C:tN,SIZE_OP:tM}=q(16),{lua_assert:tk}=q(4),{luaS_bless:tU}=q(10),{luaZ_read:tC,ZIO:tD}=q(19),tF=[25,147,13,10,26,10];let Vt=class Vt{constructor(h,w,q){this.intSize=4,this.size_tSize=4,this.instructionSize=4,this.integerSize=4,this.numberSize=8,tk(w instanceof tD,"BytecodeParser only operates on a ZIO"),tk(tp(q)),64===q[0]||61===q[0]?this.name=q.subarray(1):q[0]==tr[0]?this.name=tm("binary string",!0):this.name=q,this.L=h,this.Z=w,this.arraybuffer=new ArrayBuffer(Math.max(this.intSize,this.size_tSize,this.instructionSize,this.integerSize,this.numberSize)),this.dv=new DataView(this.arraybuffer),this.u8=new Uint8Array(this.arraybuffer)}read(h){let w=new Uint8Array(h);return 0!==tC(this.Z,w,0,h)&&this.error("truncated"),w}LoadByte(){return 0!==tC(this.Z,this.u8,0,1)&&this.error("truncated"),this.u8[0]}LoadInt(){return 0!==tC(this.Z,this.u8,0,this.intSize)&&this.error("truncated"),this.dv.getInt32(0,!0)}LoadNumber(){return 0!==tC(this.Z,this.u8,0,this.numberSize)&&this.error("truncated"),this.dv.getFloat64(0,!0)}LoadInteger(){return 0!==tC(this.Z,this.u8,0,this.integerSize)&&this.error("truncated"),this.dv.getInt32(0,!0)}LoadSize_t(){return this.LoadInteger()}LoadString(){let h=this.LoadByte();return 255===h&&(h=this.LoadSize_t()),0===h?null:tU(this.L,this.read(h-1))}static MASK1(h,w){return~(-1<<h)<<w}LoadCode(h){let w=this.LoadInt();for(let q=0;q<w;q++){0!==tC(this.Z,this.u8,0,this.instructionSize)&&this.error("truncated");let w=this.dv.getUint32(0,!0);h.code[q]={code:w,opcode:w>>tL&Vt.MASK1(tM,0),A:w>>tT&Vt.MASK1(tS,0),B:w>>tA&Vt.MASK1(tP,0),C:w>>tw&Vt.MASK1(tN,0),Bx:w>>tO&Vt.MASK1(tR,0),Ax:w>>tE&Vt.MASK1(tI,0),sBx:(w>>tO&Vt.MASK1(tR,0))-tx}}}LoadConstants(h){let w=this.LoadInt();for(let q=0;q<w;q++){let w=this.LoadByte();switch(w){case to:h.k.push(new tb.TValue(to,null));break;case tn:h.k.push(new tb.TValue(tn,0!==this.LoadByte()));break;case ts:h.k.push(new tb.TValue(ts,this.LoadNumber()));break;case tu:h.k.push(new tb.TValue(tu,this.LoadInteger()));break;case tl:case ti:h.k.push(new tb.TValue(ti,this.LoadString()));break;default:this.error(`unrecognized constant '${w}'`)}}}LoadProtos(h){let w=this.LoadInt();for(let q=0;q<w;q++)h.p[q]=new tv.Proto(this.L),this.LoadFunction(h.p[q],h.source)}LoadUpvalues(h){let w=this.LoadInt();for(let q=0;q<w;q++)h.upvalues[q]={name:null,instack:this.LoadByte(),idx:this.LoadByte()}}LoadDebug(h){let w=this.LoadInt();for(let q=0;q<w;q++)h.lineinfo[q]=this.LoadInt();w=this.LoadInt();for(let q=0;q<w;q++)h.locvars[q]={varname:this.LoadString(),startpc:this.LoadInt(),endpc:this.LoadInt()};w=this.LoadInt();for(let q=0;q<w;q++)h.upvalues[q].name=this.LoadString()}LoadFunction(h,w){h.source=this.LoadString(),null===h.source&&(h.source=w),h.linedefined=this.LoadInt(),h.lastlinedefined=this.LoadInt(),h.numparams=this.LoadByte(),h.is_vararg=0!==this.LoadByte(),h.maxstacksize=this.LoadByte(),this.LoadCode(h),this.LoadConstants(h),this.LoadUpvalues(h),this.LoadProtos(h),this.LoadDebug(h)}checkliteral(h,w){td(this.read(h.length),h)||this.error(w)}checkHeader(){this.checkliteral(tr.subarray(1),"not a"),83!==this.LoadByte()&&this.error("version mismatch in"),0!==this.LoadByte()&&this.error("format mismatch in"),this.checkliteral(tF,"corrupted"),this.intSize=this.LoadByte(),this.size_tSize=this.LoadByte(),this.instructionSize=this.LoadByte(),this.integerSize=this.LoadByte(),this.numberSize=this.LoadByte(),this.checksize(this.intSize,4,"int"),this.checksize(this.size_tSize,4,"size_t"),this.checksize(this.instructionSize,4,"instruction"),this.checksize(this.integerSize,4,"integer"),this.checksize(this.numberSize,8,"number"),22136!==this.LoadInteger()&&this.error("endianness mismatch in"),370.5!==this.LoadNumber()&&this.error("float format mismatch in")}error(h){tb.luaO_pushfstring(this.L,tm("%s: %s precompiled chunk"),this.name,tm(h)),ty.luaD_throw(this.L,tc)}checksize(h,w,q){h!==w&&this.error(`${q} size mismatch in`)}};h.exports.luaU_undump=function(h,w,q){let tr=new Vt(h,w,q);tr.checkHeader();let tn=tv.luaF_newLclosure(h,tr.LoadByte());return ty.luaD_inctop(h),h.stack[h.top-1].setclLvalue(tn),tn.p=new tv.Proto(h),tr.LoadFunction(tn.p,null),tk(tn.nupvalues===tn.p.upvalues.length),tn}},function(h,w,q){let{LUA_SIGNATURE:tr,LUA_VERSION_MAJOR:tn,LUA_VERSION_MINOR:ti,constant_types:{LUA_TBOOLEAN:to,LUA_TLNGSTR:ts,LUA_TNIL:tu,LUA_TNUMFLT:tl,LUA_TNUMINT:tc,LUA_TSHRSTR:tp},luastring_of:td}=q(1),tm=td(25,147,13,10,26,10),ty=16*Number(tn)+Number(ti),y=function(h,w,q){0===q.status&&w>0&&(q.status=q.writer(q.L,h,w,q.data))},T=function(h,w){y(td(h),1,w)},O=function(h,w){let q=new ArrayBuffer(4);new DataView(q).setInt32(0,h,!0),y(new Uint8Array(q),4,w)},V=function(h,w){let q=new ArrayBuffer(4);new DataView(q).setInt32(0,h,!0),y(new Uint8Array(q),4,w)},C=function(h,w){let q=new ArrayBuffer(8);new DataView(q).setFloat64(0,h,!0),y(new Uint8Array(q),8,w)},K=function(h,w){if(null===h)T(0,w);else{let q=h.tsslen()+1,tr=h.getstr();q<255?T(q,w):(T(255,w),V(q,w)),y(tr,q-1,w)}},Y=function(h,w,q){q.strip||h.source===w?K(null,q):K(h.source,q),O(h.linedefined,q),O(h.lastlinedefined,q),T(h.numparams,q),T(h.is_vararg?1:0,q),T(h.maxstacksize,q),function(h,w){let q=h.code.map(h=>h.code);O(q.length,w);for(let h=0;h<q.length;h++)O(q[h],w)}(h,q),function(h,w){let q=h.k.length;O(q,w);for(let tr=0;tr<q;tr++){let q=h.k[tr];switch(T(q.ttype(),w),q.ttype()){case tu:break;case to:T(q.value?1:0,w);break;case tl:C(q.value,w);break;case tc:V(q.value,w);break;case tp:case ts:K(q.tsvalue(),w)}}}(h,q),function(h,w){let q=h.upvalues.length;O(q,w);for(let tr=0;tr<q;tr++)T(h.upvalues[tr].instack?1:0,w),T(h.upvalues[tr].idx,w)}(h,q),function(h,w){let q=h.p.length;O(q,w);for(let tr=0;tr<q;tr++)Y(h.p[tr],h.source,w)}(h,q),function(h,w){let q=w.strip?0:h.lineinfo.length;O(q,w);for(let tr=0;tr<q;tr++)O(h.lineinfo[tr],w);O(q=w.strip?0:h.locvars.length,w);for(let tr=0;tr<q;tr++)K(h.locvars[tr].varname,w),O(h.locvars[tr].startpc,w),O(h.locvars[tr].endpc,w);O(q=w.strip?0:h.upvalues.length,w);for(let tr=0;tr<q;tr++)K(h.upvalues[tr].name,w)}(h,q)};h.exports.luaU_dump=function(h,w,q,tn,ti){let to=new class{constructor(){this.L=null,this.write=null,this.data=null,this.strip=NaN,this.status=NaN}};return to.L=h,to.writer=q,to.data=tn,to.strip=ti,to.status=0,y(tr,tr.length,to),T(ty,to),T(0,to),y(tm,tm.length,to),T(4,to),T(4,to),T(4,to),T(4,to),T(8,to),V(22136,to),C(370.5,to),T(w.upvalues.length,to),Y(w,null,to),to.status}},function(h,w,q){var tr;!function(){var tn={not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};function o(h){return function(h,w){var q,tr,ti,to,ts,tu,tl,tc,tp,td=1,tm=h.length,ty="";for(tr=0;tr<tm;tr++)if("string"==typeof h[tr])ty+=h[tr];else if(Array.isArray(h[tr])){if((to=h[tr])[2])for(q=w[td],ti=0;ti<to[2].length;ti++){if(!q.hasOwnProperty(to[2][ti]))throw Error(o('[sprintf] property "%s" does not exist',to[2][ti]));q=q[to[2][ti]]}else q=to[1]?w[to[1]]:w[td++];if(tn.not_type.test(to[8])&&tn.not_primitive.test(to[8])&&q instanceof Function&&(q=q()),tn.numeric_arg.test(to[8])&&"number"!=typeof q&&isNaN(q))throw TypeError(o("[sprintf] expecting number but found %T",q));switch(tn.number.test(to[8])&&(tc=q>=0),to[8]){case"b":q=parseInt(q,10).toString(2);break;case"c":q=String.fromCharCode(parseInt(q,10));break;case"d":case"i":q=parseInt(q,10);break;case"j":q=JSON.stringify(q,null,to[6]?parseInt(to[6]):0);break;case"e":q=to[7]?parseFloat(q).toExponential(to[7]):parseFloat(q).toExponential();break;case"f":q=to[7]?parseFloat(q).toFixed(to[7]):parseFloat(q);break;case"g":q=to[7]?String(Number(q.toPrecision(to[7]))):parseFloat(q);break;case"o":q=(parseInt(q,10)>>>0).toString(8);break;case"s":q=String(q),q=to[7]?q.substring(0,to[7]):q;break;case"t":q=String(!!q),q=to[7]?q.substring(0,to[7]):q;break;case"T":q=Object.prototype.toString.call(q).slice(8,-1).toLowerCase(),q=to[7]?q.substring(0,to[7]):q;break;case"u":q=parseInt(q,10)>>>0;break;case"v":q=q.valueOf(),q=to[7]?q.substring(0,to[7]):q;break;case"x":q=(parseInt(q,10)>>>0).toString(16);break;case"X":q=(parseInt(q,10)>>>0).toString(16).toUpperCase()}tn.json.test(to[8])?ty+=q:(tn.number.test(to[8])&&(!tc||to[3])?(tp=tc?"+":"-",q=q.toString().replace(tn.sign,"")):tp="",tu=to[4]?"0"===to[4]?"0":to[4].charAt(1):" ",tl=to[6]-(tp+q).length,ts=to[6]&&tl>0?tu.repeat(tl):"",ty+=to[5]?tp+q+ts:"0"===tu?tp+ts+q:ts+tp+q)}return ty}(function(h){if(ti[h])return ti[h];for(var w,q=h,tr=[],to=0;q;){if(null!==(w=tn.text.exec(q)))tr.push(w[0]);else if(null!==(w=tn.modulo.exec(q)))tr.push("%");else{if(null===(w=tn.placeholder.exec(q)))throw SyntaxError("[sprintf] unexpected placeholder");if(w[2]){to|=1;var ts=[],tu=w[2],tl=[];if(null===(tl=tn.key.exec(tu)))throw SyntaxError("[sprintf] failed to parse named argument key");for(ts.push(tl[1]);""!==(tu=tu.substring(tl[0].length));)if(null!==(tl=tn.key_access.exec(tu)))ts.push(tl[1]);else{if(null===(tl=tn.index_access.exec(tu)))throw SyntaxError("[sprintf] failed to parse named argument key");ts.push(tl[1])}w[2]=ts}else to|=2;if(3===to)throw Error("[sprintf] mixing positional and named placeholders is not (yet) supported");tr.push(w)}q=q.substring(w[0].length)}return ti[h]=tr}(h),arguments)}function a(h,w){return o.apply(null,[h].concat(w||[]))}var ti=Object.create(null);w.sprintf=o,w.vsprintf=a,"u">typeof window&&(window.sprintf=o,window.vsprintf=a,void 0===(tr=(function(){return{sprintf:o,vsprintf:a}}).call(w,q,w,h))||(h.exports=tr))}()},function(h,w,q){let{lua_pop:tr}=q(2),{luaL_requiref:tn}=q(7),{to_luastring:ti}=q(5),to={};h.exports.luaL_openlibs=function(h){for(let w in to)tn(h,ti(w),to[w],1),tr(h,1)};let ts=q(17),{luaopen_base:tu}=q(24),{luaopen_coroutine:tl}=q(25),{luaopen_debug:tc}=q(31),{luaopen_math:tp}=q(30),{luaopen_package:td}=q(32),{luaopen_os:tm}=q(27),{luaopen_string:ty}=q(28),{luaopen_table:tv}=q(26),{luaopen_utf8:tb}=q(29);to._G=tu,to[ts.LUA_LOADLIBNAME]=td,to[ts.LUA_COLIBNAME]=tl,to[ts.LUA_TABLIBNAME]=tv,to[ts.LUA_OSLIBNAME]=tm,to[ts.LUA_STRLIBNAME]=ty,to[ts.LUA_MATHLIBNAME]=tp,to[ts.LUA_UTF8LIBNAME]=tb,to[ts.LUA_DBLIBNAME]=tc;let{luaopen_fengari:tx}=q(33);to[ts.LUA_FENGARILIBNAME]=tx}]);function Er(h,w){if("boolean"==typeof w)u4.lua.lua_pushboolean(h,w);else if("number"==typeof w)u4.lua.lua_pushnumber(h,w);else if("string"==typeof w)u4.lua.lua_pushstring(h,u4.to_luastring(w));else if(Array.isArray(w))u4.lua.lua_newtable(h),w.forEach((w,q)=>{Er(h,w),u4.lua.lua_rawseti(h,-2,q+1)});else if("object"==typeof w)u4.lua.lua_newtable(h),Object.entries(w).forEach(([w,q])=>{Er(h,q),u4.lua.lua_setfield(h,-2,w)});else throw`unknown type ${typeof w}`}function oh(h,w){return u4.lua.lua_toboolean(h,w)}function qe(h,w){return u4.lua.lua_tonumber(h,w)}function Nn(h,w){return u4.lua.lua_tojsstring(h,w)}function Fa(h,w){u4.lua.lua_pushnil(h);let q={};for(;0!=u4.lua.lua_next(h,-2);)q[Nn(h,-2)]=function fm(h,w){if(!u4.lua.lua_isnil(h,w)){if(u4.lua.lua_isboolean(h,w))return oh(h,w);if(u4.lua.lua_isnumber(h,w))return qe(h,w);if(u4.lua.lua_isstring(h,w))return Nn(h,w);if(u4.lua.lua_istable(h,w))return function(h,w){let q=u4.lua.lua_rawlen(h,w);if(0===q)return Fa(h);let tr=[];for(let w=0;w<q;++w){if(u4.lua.lua_rawgeti(h,-1,w+1),u4.lua.lua_isnil(h,-1))return u4.lua.lua_pop(h,1),Fa(h);tr.push(fm(h,-1)),u4.lua.lua_pop(h,1)}return tr}(h,w);throw`unknown type ${u4.lua.lua_typename(h,u4.lua.lua_type(h,w))}`}}(h,-1),u4.lua.lua_pop(h,1);return q}function ya(h){return u4.lua.lua_gettop(h)}function sr(h,w,q){var tr;return"number"==typeof w&&(tr=w,w=h=>h===tr),tr=>{let tn=ya(tr);return w(tn)?q(tr):u4.lauxlib.luaL_error(u4.to_luastring(h))}}let JT=class JT{get luaState(){return this._luaState}constructor(h){this._luaState=h}};var u5="u">typeof globalThis?globalThis:"u">typeof window?window:"u">typeof q.g?q.g:"u">typeof self?self:{};function ku(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var u6=function(h){var w={};function t(q){if(w[q])return w[q].exports;var tr=w[q]={i:q,l:!1,exports:{}};return h[q].call(tr.exports,tr,tr.exports,t),tr.l=!0,tr.exports}return t.m=h,t.c=w,t.d=function(h,w,q){t.o(h,w)||Object.defineProperty(h,w,{enumerable:!0,get:q})},t.r=function(h){"u">typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(h,"__esModule",{value:!0})},t.t=function(h,w){if(1&w&&(h=t(h)),8&w||4&w&&"object"==typeof h&&h&&h.__esModule)return h;var q=Object.create(null);if(t.r(q),Object.defineProperty(q,"default",{enumerable:!0,value:h}),2&w&&"string"!=typeof h)for(var tr in h)t.d(q,tr,(function(w){return h[w]}).bind(null,tr));return q},t.n=function(h){var w=h&&h.__esModule?function(){return h.default}:function(){return h};return t.d(w,"a",w),w},t.o=function(h,w){return Object.prototype.hasOwnProperty.call(h,w)},t.p="",t(t.s=34)}([function(h,w,q){/**
  @license MIT
  
  Copyright © 2017-2018 Benoit Giannangeli
  Copyright © 2017-2018 Daurnimator
  Copyright © 1994–2017 Lua.org, PUC-Rio.
  */let tr=q(5);h.exports.FENGARI_AUTHORS=tr.FENGARI_AUTHORS,h.exports.FENGARI_COPYRIGHT=tr.FENGARI_COPYRIGHT,h.exports.FENGARI_RELEASE=tr.FENGARI_RELEASE,h.exports.FENGARI_VERSION=tr.FENGARI_VERSION,h.exports.FENGARI_VERSION_MAJOR=tr.FENGARI_VERSION_MAJOR,h.exports.FENGARI_VERSION_MINOR=tr.FENGARI_VERSION_MINOR,h.exports.FENGARI_VERSION_NUM=tr.FENGARI_VERSION_NUM,h.exports.FENGARI_VERSION_RELEASE=tr.FENGARI_VERSION_RELEASE,h.exports.luastring_eq=tr.luastring_eq,h.exports.luastring_indexOf=tr.luastring_indexOf,h.exports.luastring_of=tr.luastring_of,h.exports.to_jsstring=tr.to_jsstring,h.exports.to_luastring=tr.to_luastring,h.exports.to_uristring=tr.to_uristring;let tn=q(3),ti=q(2),to=q(7),ts=q(17);h.exports.luaconf=tn,h.exports.lua=ti,h.exports.lauxlib=to,h.exports.lualib=ts},function(h,w,q){let tr,tn,ti;if(tr="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):function(h){let w=0,q=h.length,tr=new Uint8Array(q);for(;q>w;)tr[w]=h[w++];return tr},"function"==typeof new Uint8Array().indexOf)tn=function(h,w,q){return h.indexOf(w,q)};else{let h=[].indexOf;if(0!==h.call(new Uint8Array(1),0))throw Error("missing .indexOf");tn=function(w,q,tr){return h.call(w,q,tr)}}ti="function"==typeof Uint8Array.of?Uint8Array.of.bind(Uint8Array):function(){return tr(arguments)};let a=function(h){return h instanceof Uint8Array},to="cannot convert invalid utf8 to javascript string",ts=";,/?:@&=+$abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789,-_.!~*'()#".split("").reduce(function(h,w){return h[w.charCodeAt(0)]=!0,h},{}),tu={},f=function(h,w){if("string"!=typeof h)throw TypeError("to_luastring expects a javascript string");if(w){let w=tu[h];if(a(w))return w}let q=h.length,tn=Array(q),ti=0;for(let w=0;w<q;++w){let tr=h.charCodeAt(w);if(tr<=127)tn[ti++]=tr;else if(tr<=2047)tn[ti++]=192|tr>>6,tn[ti++]=128|63&tr;else{if(tr>=55296&&tr<=56319&&w+1<q){let q=h.charCodeAt(w+1);q>=56320&&q<=57343&&(w++,tr=1024*(tr-55296)+q+9216)}tr<=65535?tn[ti++]=224|tr>>12:(tn[ti++]=240|tr>>18,tn[ti++]=128|tr>>12&63),tn[ti++]=128|tr>>6&63,tn[ti++]=128|63&tr}}return tn=tr(tn),w&&(tu[h]=tn),tn};h.exports.luastring_from=tr,h.exports.luastring_indexOf=tn,h.exports.luastring_of=ti,h.exports.is_luastring=a,h.exports.luastring_eq=function(h,w){if(h!==w){let q=h.length;if(q!==w.length)return!1;for(let tr=0;tr<q;tr++)if(h[tr]!==w[tr])return!1}return!0},h.exports.to_jsstring=function(h,w,q,tr){if(!a(h))throw TypeError("to_jsstring expects a Uint8Array");q=void 0===q?h.length:Math.min(h.length,q);let tn="";for(let ti=void 0!==w?w:0;ti<q;){let w=h[ti++];if(w<128)tn+=String.fromCharCode(w);else if(w<194||w>244){if(!tr)throw RangeError(to);tn+="�"}else if(w<=223){if(ti>=q){if(!tr)throw RangeError(to);tn+="�";continue}let ts=h[ti++];if((192&ts)!=128){if(!tr)throw RangeError(to);tn+="�";continue}tn+=String.fromCharCode(((31&w)<<6)+(63&ts))}else if(w<=239){if(ti+1>=q){if(!tr)throw RangeError(to);tn+="�";continue}let ts=h[ti++];if((192&ts)!=128){if(!tr)throw RangeError(to);tn+="�";continue}let tu=h[ti++];if((192&tu)!=128){if(!tr)throw RangeError(to);tn+="�";continue}let tl=((15&w)<<12)+((63&ts)<<6)+(63&tu);tl<=65535?tn+=String.fromCharCode(tl):tn+=String.fromCharCode(55296+((tl-=65536)>>10),tl%1024+56320)}else{if(ti+2>=q){if(!tr)throw RangeError(to);tn+="�";continue}let ts=h[ti++];if((192&ts)!=128){if(!tr)throw RangeError(to);tn+="�";continue}let tu=h[ti++];if((192&tu)!=128){if(!tr)throw RangeError(to);tn+="�";continue}let tl=h[ti++];if((192&tl)!=128){if(!tr)throw RangeError(to);tn+="�";continue}let tc=((7&w)<<18)+((63&ts)<<12)+((63&tu)<<6)+(63&tl);tn+=String.fromCharCode(55296+((tc-=65536)>>10),tc%1024+56320)}}return tn},h.exports.to_uristring=function(h){if(!a(h))throw TypeError("to_uristring expects a Uint8Array");let w="";for(let q=0;q<h.length;q++){let tr=h[q];ts[tr]?w+=String.fromCharCode(tr):w+="%"+(tr<16?"0":"")+tr.toString(16)}return w},h.exports.to_luastring=f,h.exports.from_userstring=function(h){if(!a(h)){if("string"!=typeof h)throw TypeError("expects an array of bytes or javascript string");h=f(h)}return h};let tl=f("\x1bLua");h.exports.LUA_SIGNATURE=tl,h.exports.LUA_VERSION_MAJOR="5",h.exports.LUA_VERSION_MINOR="3",h.exports.LUA_VERSION_NUM=503,h.exports.LUA_VERSION_RELEASE="4",h.exports.LUA_VERSION="Lua 5.3",h.exports.LUA_RELEASE="Lua 5.3.4",h.exports.LUA_COPYRIGHT="Lua 5.3.4  Copyright (C) 1994-2017 Lua.org, PUC-Rio",h.exports.LUA_AUTHORS="R. Ierusalimschy, L. H. de Figueiredo, W. Celes";let tc={LUA_TNONE:-1,LUA_TNIL:0,LUA_TBOOLEAN:1,LUA_TLIGHTUSERDATA:2,LUA_TNUMBER:3,LUA_TSTRING:4,LUA_TTABLE:5,LUA_TFUNCTION:6,LUA_TUSERDATA:7,LUA_TTHREAD:8,LUA_NUMTAGS:9};tc.LUA_TSHRSTR=0|tc.LUA_TSTRING,tc.LUA_TLNGSTR=16|tc.LUA_TSTRING,tc.LUA_TNUMFLT=0|tc.LUA_TNUMBER,tc.LUA_TNUMINT=16|tc.LUA_TNUMBER,tc.LUA_TLCL=0|tc.LUA_TFUNCTION,tc.LUA_TLCF=16|tc.LUA_TFUNCTION,tc.LUA_TCCL=32|tc.LUA_TFUNCTION;let{LUAI_MAXSTACK:tp}=q(3),td=-tp-1e3;h.exports.LUA_HOOKCALL=0,h.exports.LUA_HOOKCOUNT=3,h.exports.LUA_HOOKLINE=2,h.exports.LUA_HOOKRET=1,h.exports.LUA_HOOKTAILCALL=4,h.exports.LUA_MASKCALL=1,h.exports.LUA_MASKCOUNT=8,h.exports.LUA_MASKLINE=4,h.exports.LUA_MASKRET=2,h.exports.LUA_MINSTACK=20,h.exports.LUA_MULTRET=-1,h.exports.LUA_OPADD=0,h.exports.LUA_OPBAND=7,h.exports.LUA_OPBNOT=13,h.exports.LUA_OPBOR=8,h.exports.LUA_OPBXOR=9,h.exports.LUA_OPDIV=5,h.exports.LUA_OPEQ=0,h.exports.LUA_OPIDIV=6,h.exports.LUA_OPLE=2,h.exports.LUA_OPLT=1,h.exports.LUA_OPMOD=3,h.exports.LUA_OPMUL=2,h.exports.LUA_OPPOW=4,h.exports.LUA_OPSHL=10,h.exports.LUA_OPSHR=11,h.exports.LUA_OPSUB=1,h.exports.LUA_OPUNM=12,h.exports.LUA_REGISTRYINDEX=td,h.exports.LUA_RIDX_GLOBALS=2,h.exports.LUA_RIDX_LAST=2,h.exports.LUA_RIDX_MAINTHREAD=1,h.exports.constant_types=tc,h.exports.lua_Debug=class{constructor(){this.event=NaN,this.name=null,this.namewhat=null,this.what=null,this.source=null,this.currentline=NaN,this.linedefined=NaN,this.lastlinedefined=NaN,this.nups=NaN,this.nparams=NaN,this.isvararg=NaN,this.istailcall=NaN,this.short_src=null,this.i_ci=null}},h.exports.lua_upvalueindex=function(h){return td-h},h.exports.thread_status={LUA_OK:0,LUA_YIELD:1,LUA_ERRRUN:2,LUA_ERRSYNTAX:3,LUA_ERRMEM:4,LUA_ERRGCMM:5,LUA_ERRERR:6}},function(h,w,q){let tr=q(1),tn=q(18),ti=q(11),to=q(8),ts=q(12);h.exports.LUA_AUTHORS=tr.LUA_AUTHORS,h.exports.LUA_COPYRIGHT=tr.LUA_COPYRIGHT,h.exports.LUA_ERRERR=tr.thread_status.LUA_ERRERR,h.exports.LUA_ERRGCMM=tr.thread_status.LUA_ERRGCMM,h.exports.LUA_ERRMEM=tr.thread_status.LUA_ERRMEM,h.exports.LUA_ERRRUN=tr.thread_status.LUA_ERRRUN,h.exports.LUA_ERRSYNTAX=tr.thread_status.LUA_ERRSYNTAX,h.exports.LUA_HOOKCALL=tr.LUA_HOOKCALL,h.exports.LUA_HOOKCOUNT=tr.LUA_HOOKCOUNT,h.exports.LUA_HOOKLINE=tr.LUA_HOOKLINE,h.exports.LUA_HOOKRET=tr.LUA_HOOKRET,h.exports.LUA_HOOKTAILCALL=tr.LUA_HOOKTAILCALL,h.exports.LUA_MASKCALL=tr.LUA_MASKCALL,h.exports.LUA_MASKCOUNT=tr.LUA_MASKCOUNT,h.exports.LUA_MASKLINE=tr.LUA_MASKLINE,h.exports.LUA_MASKRET=tr.LUA_MASKRET,h.exports.LUA_MINSTACK=tr.LUA_MINSTACK,h.exports.LUA_MULTRET=tr.LUA_MULTRET,h.exports.LUA_NUMTAGS=tr.constant_types.LUA_NUMTAGS,h.exports.LUA_OK=tr.thread_status.LUA_OK,h.exports.LUA_OPADD=tr.LUA_OPADD,h.exports.LUA_OPBAND=tr.LUA_OPBAND,h.exports.LUA_OPBNOT=tr.LUA_OPBNOT,h.exports.LUA_OPBOR=tr.LUA_OPBOR,h.exports.LUA_OPBXOR=tr.LUA_OPBXOR,h.exports.LUA_OPDIV=tr.LUA_OPDIV,h.exports.LUA_OPEQ=tr.LUA_OPEQ,h.exports.LUA_OPIDIV=tr.LUA_OPIDIV,h.exports.LUA_OPLE=tr.LUA_OPLE,h.exports.LUA_OPLT=tr.LUA_OPLT,h.exports.LUA_OPMOD=tr.LUA_OPMOD,h.exports.LUA_OPMUL=tr.LUA_OPMUL,h.exports.LUA_OPPOW=tr.LUA_OPPOW,h.exports.LUA_OPSHL=tr.LUA_OPSHL,h.exports.LUA_OPSHR=tr.LUA_OPSHR,h.exports.LUA_OPSUB=tr.LUA_OPSUB,h.exports.LUA_OPUNM=tr.LUA_OPUNM,h.exports.LUA_REGISTRYINDEX=tr.LUA_REGISTRYINDEX,h.exports.LUA_RELEASE=tr.LUA_RELEASE,h.exports.LUA_RIDX_GLOBALS=tr.LUA_RIDX_GLOBALS,h.exports.LUA_RIDX_LAST=tr.LUA_RIDX_LAST,h.exports.LUA_RIDX_MAINTHREAD=tr.LUA_RIDX_MAINTHREAD,h.exports.LUA_SIGNATURE=tr.LUA_SIGNATURE,h.exports.LUA_TNONE=tr.constant_types.LUA_TNONE,h.exports.LUA_TNIL=tr.constant_types.LUA_TNIL,h.exports.LUA_TBOOLEAN=tr.constant_types.LUA_TBOOLEAN,h.exports.LUA_TLIGHTUSERDATA=tr.constant_types.LUA_TLIGHTUSERDATA,h.exports.LUA_TNUMBER=tr.constant_types.LUA_TNUMBER,h.exports.LUA_TSTRING=tr.constant_types.LUA_TSTRING,h.exports.LUA_TTABLE=tr.constant_types.LUA_TTABLE,h.exports.LUA_TFUNCTION=tr.constant_types.LUA_TFUNCTION,h.exports.LUA_TUSERDATA=tr.constant_types.LUA_TUSERDATA,h.exports.LUA_TTHREAD=tr.constant_types.LUA_TTHREAD,h.exports.LUA_VERSION=tr.LUA_VERSION,h.exports.LUA_VERSION_MAJOR=tr.LUA_VERSION_MAJOR,h.exports.LUA_VERSION_MINOR=tr.LUA_VERSION_MINOR,h.exports.LUA_VERSION_NUM=tr.LUA_VERSION_NUM,h.exports.LUA_VERSION_RELEASE=tr.LUA_VERSION_RELEASE,h.exports.LUA_YIELD=tr.thread_status.LUA_YIELD,h.exports.lua_Debug=tr.lua_Debug,h.exports.lua_upvalueindex=tr.lua_upvalueindex,h.exports.lua_absindex=tn.lua_absindex,h.exports.lua_arith=tn.lua_arith,h.exports.lua_atpanic=tn.lua_atpanic,h.exports.lua_atnativeerror=tn.lua_atnativeerror,h.exports.lua_call=tn.lua_call,h.exports.lua_callk=tn.lua_callk,h.exports.lua_checkstack=tn.lua_checkstack,h.exports.lua_close=ts.lua_close,h.exports.lua_compare=tn.lua_compare,h.exports.lua_concat=tn.lua_concat,h.exports.lua_copy=tn.lua_copy,h.exports.lua_createtable=tn.lua_createtable,h.exports.lua_dump=tn.lua_dump,h.exports.lua_error=tn.lua_error,h.exports.lua_gc=tn.lua_gc,h.exports.lua_getallocf=tn.lua_getallocf,h.exports.lua_getextraspace=tn.lua_getextraspace,h.exports.lua_getfield=tn.lua_getfield,h.exports.lua_getglobal=tn.lua_getglobal,h.exports.lua_gethook=ti.lua_gethook,h.exports.lua_gethookcount=ti.lua_gethookcount,h.exports.lua_gethookmask=ti.lua_gethookmask,h.exports.lua_geti=tn.lua_geti,h.exports.lua_getinfo=ti.lua_getinfo,h.exports.lua_getlocal=ti.lua_getlocal,h.exports.lua_getmetatable=tn.lua_getmetatable,h.exports.lua_getstack=ti.lua_getstack,h.exports.lua_gettable=tn.lua_gettable,h.exports.lua_gettop=tn.lua_gettop,h.exports.lua_getupvalue=tn.lua_getupvalue,h.exports.lua_getuservalue=tn.lua_getuservalue,h.exports.lua_insert=tn.lua_insert,h.exports.lua_isboolean=tn.lua_isboolean,h.exports.lua_iscfunction=tn.lua_iscfunction,h.exports.lua_isfunction=tn.lua_isfunction,h.exports.lua_isinteger=tn.lua_isinteger,h.exports.lua_islightuserdata=tn.lua_islightuserdata,h.exports.lua_isnil=tn.lua_isnil,h.exports.lua_isnone=tn.lua_isnone,h.exports.lua_isnoneornil=tn.lua_isnoneornil,h.exports.lua_isnumber=tn.lua_isnumber,h.exports.lua_isproxy=tn.lua_isproxy,h.exports.lua_isstring=tn.lua_isstring,h.exports.lua_istable=tn.lua_istable,h.exports.lua_isthread=tn.lua_isthread,h.exports.lua_isuserdata=tn.lua_isuserdata,h.exports.lua_isyieldable=to.lua_isyieldable,h.exports.lua_len=tn.lua_len,h.exports.lua_load=tn.lua_load,h.exports.lua_newstate=ts.lua_newstate,h.exports.lua_newtable=tn.lua_newtable,h.exports.lua_newthread=ts.lua_newthread,h.exports.lua_newuserdata=tn.lua_newuserdata,h.exports.lua_next=tn.lua_next,h.exports.lua_pcall=tn.lua_pcall,h.exports.lua_pcallk=tn.lua_pcallk,h.exports.lua_pop=tn.lua_pop,h.exports.lua_pushboolean=tn.lua_pushboolean,h.exports.lua_pushcclosure=tn.lua_pushcclosure,h.exports.lua_pushcfunction=tn.lua_pushcfunction,h.exports.lua_pushfstring=tn.lua_pushfstring,h.exports.lua_pushglobaltable=tn.lua_pushglobaltable,h.exports.lua_pushinteger=tn.lua_pushinteger,h.exports.lua_pushjsclosure=tn.lua_pushjsclosure,h.exports.lua_pushjsfunction=tn.lua_pushjsfunction,h.exports.lua_pushlightuserdata=tn.lua_pushlightuserdata,h.exports.lua_pushliteral=tn.lua_pushliteral,h.exports.lua_pushlstring=tn.lua_pushlstring,h.exports.lua_pushnil=tn.lua_pushnil,h.exports.lua_pushnumber=tn.lua_pushnumber,h.exports.lua_pushstring=tn.lua_pushstring,h.exports.lua_pushthread=tn.lua_pushthread,h.exports.lua_pushvalue=tn.lua_pushvalue,h.exports.lua_pushvfstring=tn.lua_pushvfstring,h.exports.lua_rawequal=tn.lua_rawequal,h.exports.lua_rawget=tn.lua_rawget,h.exports.lua_rawgeti=tn.lua_rawgeti,h.exports.lua_rawgetp=tn.lua_rawgetp,h.exports.lua_rawlen=tn.lua_rawlen,h.exports.lua_rawset=tn.lua_rawset,h.exports.lua_rawseti=tn.lua_rawseti,h.exports.lua_rawsetp=tn.lua_rawsetp,h.exports.lua_register=tn.lua_register,h.exports.lua_remove=tn.lua_remove,h.exports.lua_replace=tn.lua_replace,h.exports.lua_resume=to.lua_resume,h.exports.lua_rotate=tn.lua_rotate,h.exports.lua_setallof=to.lua_setallof,h.exports.lua_setfield=tn.lua_setfield,h.exports.lua_setglobal=tn.lua_setglobal,h.exports.lua_sethook=ti.lua_sethook,h.exports.lua_seti=tn.lua_seti,h.exports.lua_setlocal=ti.lua_setlocal,h.exports.lua_setmetatable=tn.lua_setmetatable,h.exports.lua_settable=tn.lua_settable,h.exports.lua_settop=tn.lua_settop,h.exports.lua_setupvalue=tn.lua_setupvalue,h.exports.lua_setuservalue=tn.lua_setuservalue,h.exports.lua_status=tn.lua_status,h.exports.lua_stringtonumber=tn.lua_stringtonumber,h.exports.lua_toboolean=tn.lua_toboolean,h.exports.lua_todataview=tn.lua_todataview,h.exports.lua_tointeger=tn.lua_tointeger,h.exports.lua_tointegerx=tn.lua_tointegerx,h.exports.lua_tojsstring=tn.lua_tojsstring,h.exports.lua_tolstring=tn.lua_tolstring,h.exports.lua_tonumber=tn.lua_tonumber,h.exports.lua_tonumberx=tn.lua_tonumberx,h.exports.lua_topointer=tn.lua_topointer,h.exports.lua_toproxy=tn.lua_toproxy,h.exports.lua_tostring=tn.lua_tostring,h.exports.lua_tothread=tn.lua_tothread,h.exports.lua_touserdata=tn.lua_touserdata,h.exports.lua_type=tn.lua_type,h.exports.lua_typename=tn.lua_typename,h.exports.lua_upvalueid=tn.lua_upvalueid,h.exports.lua_upvaluejoin=tn.lua_upvaluejoin,h.exports.lua_version=tn.lua_version,h.exports.lua_xmove=tn.lua_xmove,h.exports.lua_yield=to.lua_yield,h.exports.lua_yieldk=to.lua_yieldk,h.exports.lua_tocfunction=tn.lua_tocfunction},function(h,w,q){let tr={},{LUA_VERSION_MAJOR:tn,LUA_VERSION_MINOR:ti,to_luastring:to}=q(1);h.exports.LUA_PATH_SEP=";",h.exports.LUA_PATH_MARK="?",h.exports.LUA_EXEC_DIR="!";let ts=tn+"."+ti;h.exports.LUA_VDIR=ts;{h.exports.LUA_DIRSEP="/";let w="./lua/"+ts+"/";h.exports.LUA_LDIR=w,h.exports.LUA_JSDIR=w;let q=to(w+"?.lua;"+w+"?/init.lua;./?.lua;./?/init.lua");h.exports.LUA_PATH_DEFAULT=q;let tr=to(w+"?.js;"+w+"loadall.js;./?.js");h.exports.LUA_JSPATH_DEFAULT=tr}let tu=tr.LUA_COMPAT_FLOATSTRING||!1,tl=tr.LUAI_MAXSTACK||1e6,tc=tr.LUA_IDSIZE||59,tp=tr.LUAL_BUFFERSIZE||8192,d=function(h,w){for(var q=Math.min(3,Math.ceil(Math.abs(w)/1023)),tr=h,tn=0;tn<q;tn++)tr*=Math.pow(2,Math.floor((w+tn)/q));return tr};h.exports.LUAI_MAXSTACK=tl,h.exports.LUA_COMPAT_FLOATSTRING=tu,h.exports.LUA_IDSIZE=tc,h.exports.LUA_INTEGER_FMT="%d",h.exports.LUA_INTEGER_FRMLEN="",h.exports.LUA_MAXINTEGER=2147483647,h.exports.LUA_MININTEGER=-2147483648,h.exports.LUA_NUMBER_FMT="%.14g",h.exports.LUA_NUMBER_FRMLEN="",h.exports.LUAL_BUFFERSIZE=tp,h.exports.frexp=function(h){if(0===h)return[h,0];var w=new DataView(new ArrayBuffer(8));w.setFloat64(0,h);var q=w.getUint32(0)>>>20&2047;0===q&&(w.setFloat64(0,18446744073709552e3*h),q=(w.getUint32(0)>>>20&2047)-64);var tr=q-1022;return[d(h,-tr),tr]},h.exports.ldexp=d,h.exports.lua_getlocaledecpoint=function(){return 46},h.exports.lua_integer2str=function(h){return String(h)},h.exports.lua_number2str=function(h){return String(Number(h.toPrecision(14)))},h.exports.lua_numbertointeger=function(h){return h>=-2147483648&&h<2147483648&&h},h.exports.luai_apicheck=function(h,w){if(!w)throw Error(w)}},function(h,w,q){let{luai_apicheck:tr}=q(3),i=function(h){if(!h)throw Error("assertion failed")};h.exports.lua_assert=i,h.exports.luai_apicheck=tr||function(h,w){return i(w)},h.exports.api_check=function(h,w,q){return tr(h,w&&q)},h.exports.LUAI_MAXCCALLS=200,h.exports.LUA_MINBUFFER=32,h.exports.luai_nummod=function(h,w,q){let tr=w%q;return tr*q<0&&(tr+=q),tr},h.exports.MAX_INT=2147483647,h.exports.MIN_INT=-2147483648},function(h,w,q){let tr=q(1),tn=`Fengari 0.1.4  Copyright (C) 2017-2018 B. Giannangeli, Daurnimator
Based on: `+tr.LUA_COPYRIGHT;h.exports.FENGARI_AUTHORS="B. Giannangeli, Daurnimator",h.exports.FENGARI_COPYRIGHT=tn,h.exports.FENGARI_RELEASE="Fengari 0.1.4",h.exports.FENGARI_VERSION="Fengari 0.1",h.exports.FENGARI_VERSION_MAJOR="0",h.exports.FENGARI_VERSION_MINOR="1",h.exports.FENGARI_VERSION_NUM=1,h.exports.FENGARI_VERSION_RELEASE="4",h.exports.is_luastring=tr.is_luastring,h.exports.luastring_eq=tr.luastring_eq,h.exports.luastring_from=tr.luastring_from,h.exports.luastring_indexOf=tr.luastring_indexOf,h.exports.luastring_of=tr.luastring_of,h.exports.to_jsstring=tr.to_jsstring,h.exports.to_luastring=tr.to_luastring,h.exports.to_uristring=tr.to_uristring,h.exports.from_userstring=tr.from_userstring},function(h,w,q){let{LUA_OPADD:tr,LUA_OPBAND:tn,LUA_OPBNOT:ti,LUA_OPBOR:to,LUA_OPBXOR:ts,LUA_OPDIV:tu,LUA_OPIDIV:tl,LUA_OPMOD:tc,LUA_OPMUL:tp,LUA_OPPOW:td,LUA_OPSHL:tm,LUA_OPSHR:ty,LUA_OPSUB:tv,LUA_OPUNM:tb,constant_types:{LUA_NUMTAGS:tx,LUA_TBOOLEAN:tT,LUA_TCCL:tE,LUA_TFUNCTION:tA,LUA_TLCF:tO,LUA_TLCL:tw,LUA_TLIGHTUSERDATA:tL,LUA_TLNGSTR:tS,LUA_TNIL:tI,LUA_TNUMBER:tP,LUA_TNUMFLT:tR,LUA_TNUMINT:tN,LUA_TSHRSTR:tM,LUA_TSTRING:tk,LUA_TTABLE:tU,LUA_TTHREAD:tC,LUA_TUSERDATA:tD},from_userstring:tF,luastring_indexOf:tB,luastring_of:tj,to_jsstring:tG,to_luastring:tV}=q(1),{lisdigit:tX,lisprint:tH,lisspace:tz,lisxdigit:tK}=q(22),tY=q(11),tW=q(8),tq=q(12),{luaS_bless:tZ,luaS_new:tJ}=q(10),tQ=q(9),{LUA_COMPAT_FLOATSTRING:t$,ldexp:t0,lua_integer2str:t1,lua_number2str:t2}=q(3),t3=q(15),{MAX_INT:t4,luai_nummod:t5,lua_assert:t6}=q(4),t8=q(14),t7=tx+1;let wt=class wt{constructor(h,w){this.type=h,this.value=w}ttype(){return 63&this.type}ttnov(){return 15&this.type}checktag(h){return this.type===h}checktype(h){return this.ttnov()===h}ttisnumber(){return this.checktype(tP)}ttisfloat(){return this.checktag(tR)}ttisinteger(){return this.checktag(tN)}ttisnil(){return this.checktag(tI)}ttisboolean(){return this.checktag(tT)}ttislightuserdata(){return this.checktag(tL)}ttisstring(){return this.checktype(tk)}ttisshrstring(){return this.checktag(tM)}ttislngstring(){return this.checktag(tS)}ttistable(){return this.checktag(tU)}ttisfunction(){return this.checktype(tA)}ttisclosure(){return(31&this.type)===tA}ttisCclosure(){return this.checktag(tE)}ttisLclosure(){return this.checktag(tw)}ttislcf(){return this.checktag(tO)}ttisfulluserdata(){return this.checktag(tD)}ttisthread(){return this.checktag(tC)}ttisdeadkey(){return this.checktag(t7)}l_isfalse(){return this.ttisnil()||this.ttisboolean()&&!1===this.value}setfltvalue(h){this.type=tR,this.value=h}chgfltvalue(h){t6(this.type==tR),this.value=h}setivalue(h){this.type=tN,this.value=h}chgivalue(h){t6(this.type==tN),this.value=h}setnilvalue(){this.type=tI,this.value=null}setfvalue(h){this.type=tO,this.value=h}setpvalue(h){this.type=tL,this.value=h}setbvalue(h){this.type=tT,this.value=h}setsvalue(h){this.type=tS,this.value=h}setuvalue(h){this.type=tD,this.value=h}setthvalue(h){this.type=tC,this.value=h}setclLvalue(h){this.type=tw,this.value=h}setclCvalue(h){this.type=tE,this.value=h}sethvalue(h){this.type=tU,this.value=h}setdeadvalue(){this.type=t7,this.value=null}setfrom(h){this.type=h.type,this.value=h.value}tsvalue(){return t6(this.ttisstring()),this.value}svalue(){return this.tsvalue().getstr()}vslen(){return this.tsvalue().tsslen()}jsstring(h,w){return tG(this.svalue(),h,w,!0)}};let ue=function(h,w,q){h.stack[w].setsvalue(q)},t9=new wt(tI,null);Object.freeze(t9),h.exports.luaO_nilobject=t9;let ce=class ce{constructor(h,w){this.id=h.l_G.id_counter++,this.p=null,this.nupvalues=w,this.upvals=Array(w)}};let Le=class Le{constructor(h,w,q){for(this.id=h.l_G.id_counter++,this.f=w,this.nupvalues=q,this.upvalue=Array(q);q--;)this.upvalue[q]=new wt(tI,null)}};let Re=class Re{constructor(h,w){this.id=h.l_G.id_counter++,this.metatable=null,this.uservalue=new wt(tI,null),this.len=w,this.data=Object.create(null)}};let er=tV("..."),en=tV('[string "'),ei=tV('"]'),Ft=function(h){return tX(h)?h-48:(223&h)-55},Dt=function(h,w){let q=1;if(t6(w<=1114111),w<128)h[7]=w;else{let tr=63;do h[8-q++]=128|63&w,w>>=6,tr>>=1;while(w>tr);h[8-q]=~tr<<1|w}return q},Rt=function(h,w){let q="x"===w?function(h){let w,q=0,tr=0,tn=0,ti=0,to=0,ts=!1;for(;tz(h[q]);)q++;if(((w=45===h[q])||43===h[q])&&q++,48!==h[q]||120!==h[q+1]&&88!==h[q+1])return null;for(q+=2;;q++)if(46===h[q]){if(ts)break;ts=!0}else{if(!tK(h[q]))break;0===tn&&48===h[q]?ti++:++tn<=30?tr=16*tr+Ft(h[q]):to++,ts&&to--}if(ti+tn===0)return null;if(to*=4,112===h[q]||80===h[q]){let w,tr=0;if(((w=45===h[++q])||43===h[q])&&q++,!tX(h[q]))return null;for(;tX(h[q]);)tr=10*tr+h[q++]-48;w&&(tr=-tr),to+=tr}return w&&(tr=-tr),{n:t0(tr,to),i:q}}(h):function(h){try{h=tG(h)}catch{return null}let w=/^[\t\v\f \n\r]*[+-]?(?:[0-9]+\.?[0-9]*|\.[0-9]*)(?:[eE][+-]?[0-9]+)?/.exec(h);if(!w)return null;let q=parseFloat(w[0]);return isNaN(q)?null:{n:q,i:w[0].length}}(h);if(null===q)return null;for(;tz(h[q.i]);)q.i++;return q.i===h.length||0===h[q.i]?q:null},eo=[46,120,88,110,78],es={46:".",120:"x",88:"x",110:"n",78:"n"},eu=Math.floor(t4/10),el=t4%10,ve=function(h,w){let q;if(w.ttisinteger())q=tV(t1(w.value));else{let h=t2(w.value);!t$&&/^[-0123456789]+$/.test(h)&&(h+=".0"),q=tV(h)}w.setsvalue(tZ(h,q))},xe=function(h,w){tW.luaD_inctop(h),ue(h,h.top-1,tJ(h,w))},Ue=function(h,w,q){let tr,tn=0,ti=0,to=0;for(;-1!=(tr=tB(w,37,ti));){switch(xe(h,w.subarray(ti,tr)),w[tr+1]){case 115:{let w=q[to++];if(null===w)w=tV("(null)",!0);else{let h=tB(w=tF(w),0);-1!==h&&(w=w.subarray(0,h))}xe(h,w);break}case 99:{let w=q[to++];tH(w)?xe(h,tj(w)):ne(h,tV("<\\%d>",!0),w);break}case 100:case 73:tW.luaD_inctop(h),h.stack[h.top-1].setivalue(q[to++]),ve(h,h.stack[h.top-1]);break;case 102:tW.luaD_inctop(h),h.stack[h.top-1].setfltvalue(q[to++]),ve(h,h.stack[h.top-1]);break;case 112:{let w=q[to++];if(w instanceof tq.lua_State||w instanceof tQ.Table||w instanceof Re||w instanceof ce||w instanceof Le)xe(h,tV("0x"+w.id.toString(16)));else switch(typeof w){case"undefined":xe(h,tV("undefined"));break;case"number":xe(h,tV("Number("+w+")"));break;case"string":xe(h,tV("String("+JSON.stringify(w)+")"));break;case"boolean":xe(h,tV(w?"Boolean(true)":"Boolean(false)"));break;case"object":if(null===w){xe(h,tV("null"));break}case"function":{let q=h.l_G.ids.get(w);q||(q=h.l_G.id_counter++,h.l_G.ids.set(w,q)),xe(h,tV("0x"+q.toString(16)));break}default:xe(h,tV("<id NYI>"))}break}case 85:{let w=new Uint8Array(8),tr=Dt(w,q[to++]);xe(h,w.subarray(8-tr));break}case 37:xe(h,tV("%",!0));break;default:tY.luaG_runerror(h,tV("invalid option '%%%c' to 'lua_pushfstring'"),w[tr+1])}tn+=2,ti=tr+2}return tW.luaD_checkstack(h,1),xe(h,w.subarray(ti)),tn>0&&t3.luaV_concat(h,tn+1),h.stack[h.top-1].svalue()},ne=function(h,w,...q){return Ue(h,w,q)},se=function(h,w,q,tu){switch(w){case tr:return q+tu|0;case tv:return q-tu|0;case tp:return t3.luaV_imul(q,tu);case tc:return t3.luaV_mod(h,q,tu);case tl:return t3.luaV_div(h,q,tu);case tn:return q&tu;case to:return q|tu;case ts:return q^tu;case tm:return t3.luaV_shiftl(q,tu);case ty:return t3.luaV_shiftl(q,-tu);case tb:return 0-q|0;case ti:return -1^q;default:t6(0)}},be=function(h,w,q,tn){switch(w){case tr:return q+tn;case tv:return q-tn;case tp:return q*tn;case tu:return q/tn;case td:return Math.pow(q,tn);case tl:return Math.floor(q/tn);case tb:return-q;case tc:return t5(h,q,tn);default:t6(0)}};h.exports.CClosure=Le,h.exports.LClosure=ce,h.exports.LUA_TDEADKEY=t7,h.exports.LUA_TPROTO=tx,h.exports.LocVar=class{constructor(){this.varname=null,this.startpc=NaN,this.endpc=NaN}},h.exports.TValue=wt,h.exports.Udata=Re,h.exports.UTF8BUFFSZ=8,h.exports.luaO_arith=function(h,w,q,tl,tc){let tp="number"==typeof tc?h.stack[tc]:tc;switch(w){case tn:case to:case ts:case tm:case ty:case ti:{let tr,tn;if(!1!==(tr=t3.tointeger(q))&&!1!==(tn=t3.tointeger(tl)))return void tp.setivalue(se(h,w,tr,tn));break}case tu:case td:{let tr,tn;if(!1!==(tr=t3.tonumber(q))&&!1!==(tn=t3.tonumber(tl)))return void tp.setfltvalue(be(h,w,tr,tn));break}default:{let tr,tn;if(q.ttisinteger()&&tl.ttisinteger())return void tp.setivalue(se(h,w,q.value,tl.value));if(!1!==(tr=t3.tonumber(q))&&!1!==(tn=t3.tonumber(tl)))return void tp.setfltvalue(be(h,w,tr,tn))}}t6(null!==h),t8.luaT_trybinTM(h,q,tl,tc,w-tr+t8.TMS.TM_ADD)},h.exports.luaO_chunkid=function(h,w){let q,tr=h.length;if(61===h[0])tr<w?(q=new Uint8Array(tr-1)).set(h.subarray(1)):(q=new Uint8Array(w)).set(h.subarray(1,w+1));else if(64===h[0])tr<=w?(q=new Uint8Array(tr-1)).set(h.subarray(1)):((q=new Uint8Array(w)).set(er),w-=er.length,q.set(h.subarray(tr-w),er.length));else{q=new Uint8Array(w);let tn=tB(h,10);q.set(en);let ti=en.length;tr<(w-=en.length+er.length+ei.length)&&-1===tn?(q.set(h,ti),ti+=h.length):(-1!==tn&&(tr=tn),tr>w&&(tr=w),q.set(h.subarray(0,tr),ti),ti+=tr,q.set(er,ti),ti+=er.length),q.set(ei,ti),ti+=ei.length,q=q.subarray(0,ti)}return q},h.exports.luaO_hexavalue=Ft,h.exports.luaO_int2fb=function(h){let w=0;if(h<8)return h;for(;h>=128;)h=h+15>>4,w+=4;for(;h>=16;)h=h+1>>1,w++;return w+1<<3|h-8},h.exports.luaO_pushfstring=ne,h.exports.luaO_pushvfstring=Ue,h.exports.luaO_str2num=function(h,w){let q=function(h){let w,q=0,tr=0,tn=!0;for(;tz(h[q]);)q++;if(((w=45===h[q])||43===h[q])&&q++,48!==h[q]||120!==h[q+1]&&88!==h[q+1])for(;q<h.length&&tX(h[q]);q++){let ti=h[q]-48;if(tr>=eu&&(tr>eu||ti>el+w))return null;tr=10*tr+ti|0,tn=!1}else for(q+=2;q<h.length&&tK(h[q]);q++)tr=16*tr+Ft(h[q])|0,tn=!1;for(;q<h.length&&tz(h[q]);)q++;return tn||q!==h.length&&0!==h[q]?null:{n:0|(w?-tr:tr),i:q}}(h);return null!==q?(w.setivalue(q.n),q.i+1):null!==(q=function(h){let w=h.length,q=0;for(let tr=0;tr<w;tr++){let w=h[tr];if(-1!==eo.indexOf(w)){q=w;break}}let tr=es[q];return"n"===tr?null:Rt(h,tr)}(h))?(w.setfltvalue(q.n),q.i+1):0},h.exports.luaO_tostring=ve,h.exports.luaO_utf8esc=Dt,h.exports.numarith=be,h.exports.pushobj2s=function(h,w){h.stack[h.top++]=new wt(w.type,w.value)},h.exports.pushsvalue2s=function(h,w){h.stack[h.top++]=new wt(tS,w)},h.exports.setobjs2s=function(h,w,q){h.stack[w].setfrom(h.stack[q])},h.exports.setobj2s=function(h,w,q){h.stack[w].setfrom(q)},h.exports.setsvalue2s=ue},function(h,w,q){let tr,tn;let{LUAL_BUFFERSIZE:ti}=q(3),{LUA_ERRERR:to,LUA_MULTRET:ts,LUA_REGISTRYINDEX:tu,LUA_SIGNATURE:tl,LUA_TBOOLEAN:tc,LUA_TLIGHTUSERDATA:tp,LUA_TNIL:td,LUA_TNONE:tm,LUA_TNUMBER:ty,LUA_TSTRING:tv,LUA_TTABLE:tb,LUA_VERSION_NUM:tx,lua_Debug:tT,lua_absindex:tE,lua_atpanic:tA,lua_call:tO,lua_checkstack:tw,lua_concat:tL,lua_copy:tS,lua_createtable:tI,lua_error:tP,lua_getfield:tR,lua_getinfo:tN,lua_getmetatable:tM,lua_getstack:tk,lua_gettop:tU,lua_insert:tC,lua_isinteger:tD,lua_isnil:tF,lua_isnumber:tB,lua_isstring:tj,lua_istable:tG,lua_len:tV,lua_load:tX,lua_newstate:tH,lua_newtable:tz,lua_next:tK,lua_pcall:tY,lua_pop:tW,lua_pushboolean:tq,lua_pushcclosure:tZ,lua_pushcfunction:tJ,lua_pushfstring:tQ,lua_pushinteger:t$,lua_pushliteral:t0,lua_pushlstring:t1,lua_pushnil:t2,lua_pushstring:t3,lua_pushvalue:t4,lua_pushvfstring:t5,lua_rawequal:t6,lua_rawget:t8,lua_rawgeti:t7,lua_rawlen:t9,lua_rawseti:er,lua_remove:en,lua_setfield:ei,lua_setglobal:eo,lua_setmetatable:es,lua_settop:eu,lua_toboolean:el,lua_tointeger:ep,lua_tointegerx:ed,lua_tojsstring:e_,lua_tolstring:eg,lua_tonumber:em,lua_tonumberx:ey,lua_topointer:ev,lua_tostring:eb,lua_touserdata:ex,lua_type:eT,lua_typename:eE,lua_version:eO}=q(2),{from_userstring:eL,luastring_eq:eS,to_luastring:eI,to_uristring:eP}=q(5),eR=to+1,eN=eI("_LOADED"),eM=eI("_PRELOAD"),ek=eI("FILE*"),eU=eI("__name"),eC=eI("__tostring"),eD=new Uint8Array(0);let A=class A{constructor(){this.L=null,this.b=eD,this.n=0}};let Q=function(h,w,q){if(0===q||!tG(h,-1))return 0;for(t2(h);tK(h,-2);){if(eT(h,-2)===tv){if(t6(h,w,-1))return tW(h,1),1;if(Q(h,w,q-1))return en(h,-2),t0(h,"."),tC(h,-2),tL(h,3),1}tW(h,1)}return 0},Mt=function(h,w){let q=tU(h);if(tN(h,eI("f"),w),tR(h,tu,eN),Q(h,q+1,2)){let w=eb(h,-1);return 95===w[0]&&71===w[1]&&46===w[2]&&(t3(h,w.subarray(3)),en(h,-2)),tS(h,-1,q+1),tW(h,2),1}return eu(h,q),0},Wt=function(h,w){Mt(h,w)?(tQ(h,eI("function '%s'"),eb(h,-1)),en(h,-2)):0!==w.namewhat.length?tQ(h,eI("%s '%s'"),w.namewhat,w.name):w.what&&109===w.what[0]?t0(h,"main chunk"):w.what&&76===w.what[0]?tQ(h,eI("function <%s:%d>"),w.short_src,w.linedefined):t0(h,"?")},ge=function(h){throw Error("PANIC: unprotected error in call to Lua API ("+e_(h,-1)+")")},ye=function(h,w,q){let tr=new tT;return tk(h,0,tr)?(tN(h,eI("n"),tr),eS(tr.namewhat,eI("method"))&&0==--w?D(h,eI("calling '%s' on bad self (%s)"),tr.name,q):(null===tr.name&&(tr.name=Mt(h,tr)?eb(h,-1):eI("?")),D(h,eI("bad argument #%d to '%s' (%s)"),w,tr.name,q))):D(h,eI("bad argument #%d (%s)"),w,q)},nt=function(h,w,q){let tr;tr=Bt(h,w,eU)===tv?eb(h,-1):eT(h,w)===tp?eI("light userdata",!0):fe(h,w);let tn=tQ(h,eI("%s expected, got %s"),q,tr);return ye(h,w,tn)},jt=function(h,w){let q=new tT;tk(h,w,q)&&(tN(h,eI("Sl",!0),q),q.currentline>0)?tQ(h,eI("%s:%d: "),q.short_src,q.currentline):t3(h,eI(""))},D=function(h,w,...q){return jt(h,1),t5(h,w,q),tL(h,2),tP(h)},bt=function(h,w,q,tr){if(w)return tq(h,1),1;{let w,tn;return t2(h),tr?(w=tr.message,tn=-tr.errno):(w="Success",tn=0),q?tQ(h,eI("%s: %s"),q,eI(w)):t3(h,eI(w)),t$(h,tn),3}},it=function(h,w){return tR(h,tu,w)},zt=function(h,w,q){let tr=ex(h,w);return null!==tr&&tM(h,w)?(it(h,q),t6(h,-1,-2)||(tr=null),tW(h,2),tr):null},he=function(h,w,q){nt(h,w,eE(h,q))},fe=function(h,w){return eE(h,eT(h,w))},ae=function(h,w){let q=eg(h,w);return null!=q||he(h,w,tv),q},je=function(h,w,q){return 0>=eT(h,w)?null===q?null:eL(q):ae(h,w)},Oe=function(h,w){let q=ey(h,w);return!1===q&&he(h,w,ty),q},Ee=function(h,w){let q=ed(h,w);return!1===q&&(tB(h,w)?ye(h,w,eI("number has no integer representation",!0)):he(h,w,ty)),q},Ne=function(h,w){let q=h.n+w;if(h.b.length<q){let w=Math.max(2*h.b.length,q),tr=new Uint8Array(w);tr.set(h.b),h.b=tr}return h.b.subarray(h.n,q)},ke=function(h,w){w.L=h,w.b=eD},ir=function(h,w,q){q>0&&(w=eL(w),Ne(h,q).set(w.subarray(0,q)),Ze(h,q))},Be=function(h,w){ir(h,w=eL(w),w.length)},or=function(h){t1(h.L,h.b,h.n),h.n=0,h.b=eD},Ze=function(h,w){h.n+=w},L=function(h,w,q,tr){return 0>=eT(h,q)?tr:w(h,q)},ot=function(h,w){let q=w.string;return w.string=null,q},Gt=function(h,w,q,tr,tn){return tX(h,ot,{string:w},tr,tn)},Ht=function(h,w,q,tr){return Gt(h,w,0,tr,null)},te=function(h,w){return Ht(h,w,w.length,w)},Bt=function(h,w,q){if(tM(h,w)){t3(h,q);let w=t8(h,-2);return w===td?tW(h,2):en(h,-2),w}return td},Xt=function(h,w,q){return w=tE(h,w),Bt(h,w,q)!==td&&(t4(h,w),tO(h,1,1),!0)},eF=eI("%I"),eB=eI("%f"),oe=function(h,w,q){var tr=q>>>0,tn=w.length,ti=h.length+1-tn;t:for(;tr<ti;tr++){for(let q=0;q<tn;q++)if(h[tr+q]!==w[q])continue t;return tr}return -1},m=function(h,w,q){return tR(h,w,q)===tb||(tW(h,1),w=tE(h,w),tz(h),t4(h,-1),ei(h,w,q),!1)},z=function(h,w,q){for(let tr in X(h,q,eI("too many upvalues",!0)),w){for(let w=0;w<q;w++)t4(h,-q);tZ(h,w[tr],q),ei(h,-(q+2),eI(tr))}tW(h,q)},X=function(h,w,q){tw(h,w)||(q?D(h,eI("stack overflow (%s)"),q):D(h,eI("stack overflow",!0)))},ct=function(h,w,q,tr){let tn=tr.message,ti=eb(h,q).subarray(1);return tQ(h,eI("cannot %s %s: %s"),eI(w),ti,eI(tn)),en(h,q),eR},ej=[239,187,191],ie=function(h){let w=function(h){let w;h.n=0;let q=0;do{if(null===(w=tr(h))||w!==ej[q])return w;q++,h.buff[h.n++]=w}while(q<ej.length);return h.n=0,tr(h)}(h);if(35===w){do w=tr(h);while(w&&10!==w);return{skipped:!0,c:tr(h)}}return{skipped:!1,c:w}};{let E=class E{constructor(){this.n=NaN,this.f=null,this.buff=new Uint8Array(1024),this.pos=0,this.err=void 0}};let j=function(h,w){if(null!==w.f&&w.n>0){let h=w.n;return w.n=0,w.f=w.f.subarray(w.pos),w.buff.subarray(0,h)}let q=w.f;return w.f=null,q};tr=function(h){return h.pos<h.f.length?h.f[h.pos++]:null},tn=function(h,w,q){let tr=new E,tn=tU(h)+1;if(null===w)throw Error("Can't read stdin in the browser");{tQ(h,eI("@%s"),w);let q=eP(w),ti=new XMLHttpRequest;if(ti.open("GET",q,!1),typeof window>"u"&&(ti.responseType="arraybuffer"),ti.send(),!(ti.status>=200&&ti.status<=299))return tr.err=ti.status,ct(h,"open",tn,{message:`${ti.status}: ${ti.statusText}`});"string"==typeof ti.response?tr.f=eI(ti.response):tr.f=new Uint8Array(ti.response)}let ti=ie(tr);ti.c===tl[0]&&w||ti.skipped&&(tr.buff[tr.n++]=10),null!==ti.c&&(tr.buff[tr.n++]=ti.c);let to=tX(h,j,tr,eb(h,-1),q),ts=tr.err;return ts?(eu(h,tn),ct(h,"read",tn,ts)):(en(h,tn),to)}}let me=function(h,w){return tn(h,w,null)},Ie=function(h,w,q){let tr=eO(h);72!=q&&D(h,eI("core and library have incompatible numeric types")),tr!=eO(null)?D(h,eI("multiple Lua VMs detected")):tr!==w&&D(h,eI("version mismatch: app. needs %f, Lua core provides %f"),w,tr)};h.exports.LUA_ERRFILE=eR,h.exports.LUA_FILEHANDLE=ek,h.exports.LUA_LOADED_TABLE=eN,h.exports.LUA_NOREF=-2,h.exports.LUA_PRELOAD_TABLE=eM,h.exports.LUA_REFNIL=-1,h.exports.luaL_Buffer=A,h.exports.luaL_addchar=function(h,w){Ne(h,1),h.b[h.n++]=w},h.exports.luaL_addlstring=ir,h.exports.luaL_addsize=Ze,h.exports.luaL_addstring=Be,h.exports.luaL_addvalue=function(h){let w=h.L,q=eb(w,-1);ir(h,q,q.length),tW(w,1)},h.exports.luaL_argcheck=function(h,w,q,tr){w||ye(h,q,tr)},h.exports.luaL_argerror=ye,h.exports.luaL_buffinit=ke,h.exports.luaL_buffinitsize=function(h,w,q){return ke(h,w),Ne(w,q)},h.exports.luaL_callmeta=Xt,h.exports.luaL_checkany=function(h,w){eT(h,w)===tm&&ye(h,w,eI("value expected",!0))},h.exports.luaL_checkinteger=Ee,h.exports.luaL_checklstring=ae,h.exports.luaL_checknumber=Oe,h.exports.luaL_checkoption=function(h,w,q,tr){let tn=null!==q?je(h,w,q):ae(h,w);for(let h=0;tr[h];h++)if(eS(tr[h],tn))return h;return ye(h,w,tQ(h,eI("invalid option '%s'"),tn))},h.exports.luaL_checkstack=X,h.exports.luaL_checkstring=ae,h.exports.luaL_checktype=function(h,w,q){eT(h,w)!==q&&he(h,w,q)},h.exports.luaL_checkudata=function(h,w,q){let tr=zt(h,w,q);return null===tr&&nt(h,w,q),tr},h.exports.luaL_checkversion=function(h){Ie(h,tx,72)},h.exports.luaL_checkversion_=Ie,h.exports.luaL_dofile=function(h,w){return me(h,w)||tY(h,0,ts,0)},h.exports.luaL_dostring=function(h,w){return te(h,w)||tY(h,0,ts,0)},h.exports.luaL_error=D,h.exports.luaL_execresult=function(h,w){let q,tr;if(null===w)return tq(h,1),t0(h,"exit"),t$(h,0),3;if(w.status)q="exit",tr=w.status;else{if(!w.signal)return bt(h,0,null,w);q="signal",tr=w.signal}return t2(h),t0(h,q),t$(h,tr),3},h.exports.luaL_fileresult=bt,h.exports.luaL_getmetafield=Bt,h.exports.luaL_getmetatable=it,h.exports.luaL_getsubtable=m,h.exports.luaL_gsub=function(h,w,q,tr){let tn,ti=new A;for(ke(h,ti);(tn=oe(w,q))>=0;)ir(ti,w,tn),Be(ti,tr),w=w.subarray(tn+q.length);return Be(ti,w),or(ti),eb(h,-1)},h.exports.luaL_len=function(h,w){tV(h,w);let q=ed(h,-1);return!1===q&&D(h,eI("object length is not an integer",!0)),tW(h,1),q},h.exports.luaL_loadbuffer=Ht,h.exports.luaL_loadbufferx=Gt,h.exports.luaL_loadfile=me,h.exports.luaL_loadfilex=tn,h.exports.luaL_loadstring=te,h.exports.luaL_newlib=function(h,w){tI(h),z(h,w,0)},h.exports.luaL_newlibtable=function(h){tI(h)},h.exports.luaL_newmetatable=function(h,w){return it(h,w)!==td?0:(tW(h,1),tI(h,0,2),t3(h,w),ei(h,-2,eU),t4(h,-1),ei(h,tu,w),1)},h.exports.luaL_newstate=function(){let h=tH();return h&&tA(h,ge),h},h.exports.luaL_opt=L,h.exports.luaL_optinteger=function(h,w,q){return L(h,Ee,w,q)},h.exports.luaL_optlstring=je,h.exports.luaL_optnumber=function(h,w,q){return L(h,Oe,w,q)},h.exports.luaL_optstring=je,h.exports.luaL_prepbuffer=function(h){return Ne(h,ti)},h.exports.luaL_prepbuffsize=Ne,h.exports.luaL_pushresult=or,h.exports.luaL_pushresultsize=function(h,w){Ze(h,w),or(h)},h.exports.luaL_ref=function(h,w){let q;return tF(h,-1)?(tW(h,1),-1):(w=tE(h,w),t7(h,w,0),q=ep(h,-1),tW(h,1),0!==q?(t7(h,w,q),er(h,w,0)):q=t9(h,w)+1,er(h,w,q),q)},h.exports.luaL_requiref=function(h,w,q,tr){m(h,tu,eN),tR(h,-1,w),el(h,-1)||(tW(h,1),tJ(h,q),t3(h,w),tO(h,1,1),t4(h,-1),ei(h,-3,w)),en(h,-2),tr&&(t4(h,-1),eo(h,w))},h.exports.luaL_setfuncs=z,h.exports.luaL_setmetatable=function(h,w){it(h,w),es(h,-2)},h.exports.luaL_testudata=zt,h.exports.luaL_tolstring=function(h,w){if(Xt(h,w,eC))tj(h,-1)||D(h,eI("'__tostring' must return a string"));else switch(eT(h,w)){case ty:tD(h,w)?tQ(h,eF,ep(h,w)):tQ(h,eB,em(h,w));break;case tv:t4(h,w);break;case tc:t0(h,el(h,w)?"true":"false");break;case td:t0(h,"nil");break;default:{let q=Bt(h,w,eU),tr=q===tv?eb(h,-1):fe(h,w);tQ(h,eI("%s: %p"),tr,ev(h,w)),q!==td&&en(h,-2)}}return eg(h,-1)},h.exports.luaL_traceback=function(h,w,q,tr){let tn=new tT,ti=tU(h),to=function(h){let w=new tT,q=1,tr=1;for(;tk(h,tr,w);)q=tr,tr*=2;for(;q<tr;){let tn=Math.floor((q+tr)/2);tk(h,tn,w)?q=tn+1:tr=tn}return tr-1}(w),ts=to-tr>21?10:-1;for(q&&tQ(h,eI(`%s
`),q),X(h,10,null),t0(h,"stack traceback:");tk(w,tr++,tn);)0==ts--?(t0(h,`
	...`),tr=to-11+1):(tN(w,eI("Slnt",!0),tn),tQ(h,eI(`
	%s:`),tn.short_src),tn.currentline>0&&t0(h,`${tn.currentline}:`),t0(h," in "),Wt(h,tn),tn.istailcall&&t0(h,`
	(...tail calls..)`),tL(h,tU(h)-ti));tL(h,tU(h)-ti)},h.exports.luaL_typename=fe,h.exports.luaL_unref=function(h,w,q){q>=0&&(w=tE(h,w),t7(h,w,0),er(h,w,q),t$(h,q),er(h,w,0))},h.exports.luaL_where=jt,h.exports.lua_writestringerror=function(){for(let h=0;h<arguments.length;h++){let w=arguments[h];do{let h=/([^\n]*)\n?([\d\D]*)/.exec(w);console.error(h[1]),w=h[2]}while(""!==w)}}},function(h,w,q){let{LUA_HOOKCALL:tr,LUA_HOOKRET:tn,LUA_HOOKTAILCALL:ti,LUA_MASKCALL:to,LUA_MASKLINE:ts,LUA_MASKRET:tu,LUA_MINSTACK:tl,LUA_MULTRET:tc,LUA_SIGNATURE:tp,constant_types:{LUA_TCCL:td,LUA_TLCF:tm,LUA_TLCL:ty,LUA_TNIL:tv},thread_status:{LUA_ERRMEM:tb,LUA_ERRERR:tx,LUA_ERRRUN:tT,LUA_ERRSYNTAX:tE,LUA_OK:tA,LUA_YIELD:tO},lua_Debug:tw,luastring_indexOf:tL,to_luastring:tS}=q(1),tI=q(18),tP=q(11),tR=q(13),{api_check:tN,lua_assert:tM,LUAI_MAXCCALLS:tk}=q(4),tU=q(6),tC=q(16),tD=q(23),tF=q(12),{luaS_newliteral:tB}=q(10),tj=q(14),{LUAI_MAXSTACK:tG}=q(3),tV=q(36),tX=q(15),{MBuffer:tH}=q(19),qt=function(h,w){if(h.top<w)for(;h.top<w;)h.stack[h.top++]=new tU.TValue(tv,null);else for(;h.top>w;)delete h.stack[--h.top]},Ct=function(h,w,q){let tr=h.top;for(;h.top<q+1;)h.stack[h.top++]=new tU.TValue(tv,null);switch(w){case tb:tU.setsvalue2s(h,q,tB(h,"not enough memory"));break;case tx:tU.setsvalue2s(h,q,tB(h,"error in error handling"));break;default:tU.setobjs2s(h,q,tr-1)}for(;h.top>q+1;)delete h.stack[--h.top]},tz=tG+200,Jt=function(h,w){tM(w<=tG||w==tz),tM(h.stack_last==h.stack.length-tF.EXTRA_STACK),h.stack.length=w,h.stack_last=w-tF.EXTRA_STACK},J=function(h,w){let q=h.stack.length;if(q>tG)ht(h,tx);else{let tr=h.top+w+tF.EXTRA_STACK,tn=2*q;tn>tG&&(tn=tG),tn<tr&&(tn=tr),tn>tG?(Jt(h,tz),tP.luaG_runerror(h,tS("stack overflow",!0))):Jt(h,tn)}},Z=function(h,w){h.stack_last-h.top<=w&&J(h,w)},xt=function(h){let w=function(h){let w=h.top;for(let q=h.ci;null!==q;q=q.previous)w<q.top&&(w=q.top);return tM(w<=h.stack_last),w+1}(h),q=w+Math.floor(w/8)+2*tF.EXTRA_STACK;q>tG&&(q=tG),h.stack.length>tG&&tF.luaE_freeCI(h),w<=tG-tF.EXTRA_STACK&&q<h.stack.length&&Jt(h,q)},rt=function(h,w,q){let tn=h.stack[w];switch(tn.type){case td:case tm:{let ti=tn.type===td?tn.value.f:tn.value;Z(h,tl);let ts=tF.luaE_extendCI(h);ts.funcOff=w,ts.nresults=q,ts.func=tn,ts.top=h.top+tl,tM(ts.top<=h.stack_last),ts.callstatus=0,h.hookmask&to&&Zt(h,tr,-1);let tu=ti(h);if("number"!=typeof tu||tu<0||(0|tu)!==tu)throw Error("invalid return value from JS function (expected integer)");return tI.api_checknelems(h,tu),It(h,ts,h.top-tu,tu),!0}case ty:{let tr,ti=tn.value.p,ts=h.top-w-1,tu=ti.maxstacksize;if(Z(h,tu),ti.is_vararg)tr=et(h,ti,ts);else{for(;ts<ti.numparams;ts++)h.stack[h.top++]=new tU.TValue(tv,null);tr=w+1}let tl=tF.luaE_extendCI(h);return tl.funcOff=w,tl.nresults=q,tl.func=tn,tl.l_base=tr,tl.top=tr+tu,qt(h,tl.top),tl.l_code=ti.code,tl.l_savedpc=0,tl.callstatus=tF.CIST_LUA,h.hookmask&to&&Ut(h,tl),!1}default:return Z(h,1),Et(h,w,tn),rt(h,w,q)}},It=function(h,w,q,tr){let ti=w.nresults;h.hookmask&(tu|ts)&&(h.hookmask&tu&&Zt(h,tn,-1),h.oldpc=w.previous.l_savedpc);let to=w.funcOff;return h.ci=w.previous,h.ci.next=null,ee(h,q,to,tr,ti)},ee=function(h,w,q,tr,tn){switch(tn){case 0:break;case 1:0===tr?h.stack[q].setnilvalue():tU.setobjs2s(h,q,w);break;case tc:for(let tn=0;tn<tr;tn++)tU.setobjs2s(h,q+tn,w+tn);for(let w=h.top;w>=q+tr;w--)delete h.stack[w];return h.top=q+tr,!1;default:{let ti;if(tn<=tr)for(ti=0;ti<tn;ti++)tU.setobjs2s(h,q+ti,w+ti);else{for(ti=0;ti<tr;ti++)tU.setobjs2s(h,q+ti,w+ti);for(;ti<tn;ti++)q+ti>=h.top?h.stack[q+ti]=new tU.TValue(tv,null):h.stack[q+ti].setnilvalue()}}}let ti=q+tn;for(let w=h.top;w>=ti;w--)delete h.stack[w];return h.top=ti,!0},Zt=function(h,w,q){let tr=h.hook;if(tr&&h.allowhook){let tn=h.ci,ti=h.top,to=tn.top,ts=new tw;ts.event=w,ts.currentline=q,ts.i_ci=tn,Z(h,tl),tn.top=h.top+tl,tM(tn.top<=h.stack_last),h.allowhook=0,tn.callstatus|=tF.CIST_HOOKED,tr(h,ts),tM(!h.allowhook),h.allowhook=1,tn.top=to,qt(h,ti),tn.callstatus&=~tF.CIST_HOOKED}},Ut=function(h,w){let q=tr;w.l_savedpc++,w.previous.callstatus&tF.CIST_LUA&&w.previous.l_code[w.previous.l_savedpc-1].opcode==tC.OpCodesI.OP_TAILCALL&&(w.callstatus|=tF.CIST_TAIL,q=ti),Zt(h,q,-1),w.l_savedpc--},et=function(h,w,q){let tr,tn=w.numparams,ti=h.top-q,to=h.top;for(tr=0;tr<tn&&tr<q;tr++)tU.pushobj2s(h,h.stack[ti+tr]),h.stack[ti+tr].setnilvalue();for(;tr<tn;tr++)h.stack[h.top++]=new tU.TValue(tv,null);return to},Et=function(h,w,q){let tr=tj.luaT_gettmbyobj(h,q,tj.TMS.TM_CALL);tr.ttisfunction(tr)||tP.luaG_typeerror(h,q,tS("call",!0)),tU.pushobj2s(h,h.stack[h.top-1]);for(let q=h.top-2;q>w;q--)tU.setobjs2s(h,q,q-1);tU.setobj2s(h,w,tr)},k=function(h,w,q){++h.nCcalls>=tk&&(h.nCcalls===tk?tP.luaG_runerror(h,tS("JS stack overflow",!0)):h.nCcalls>=tk+(tk>>3)&&ht(h,tx)),rt(h,w,q)||tX.luaV_execute(h),h.nCcalls--},ht=function(h,w){if(h.errorJmp)throw h.errorJmp.status=w,h.errorJmp;{let q=h.l_G;if(h.status=w,!q.mainthread.errorJmp){let tr=q.panic;throw tr&&(Ct(h,w,h.top),h.ci.top<h.top&&(h.ci.top=h.top),tr(h)),Error(`Aborted ${w}`)}q.mainthread.stack[q.mainthread.top++]=h.stack[h.top-1],ht(q.mainthread,w)}},St=function(h,w,q){let tr=h.nCcalls,tn={status:tA,previous:h.errorJmp};h.errorJmp=tn;try{w(h,q)}catch(w){if(tn.status===tA){let q=h.l_G.atnativeerror;if(q)try{if(tn.status=tA,tI.lua_pushcfunction(h,q),tI.lua_pushlightuserdata(h,w),Re(h,h.top-2,1),0!==h.errfunc){let w=h.errfunc;tU.pushobj2s(h,h.stack[h.top-1]),tU.setobjs2s(h,h.top-2,w),Re(h,h.top-2,1)}tn.status=tT}catch{tn.status===tA&&(tn.status=-1)}else tn.status=-1}}return h.errorJmp=tn.previous,h.nCcalls=tr,tn.status},F=function(h,w){let q=h.ci;tM(null!==q.c_k&&0===h.nny),tM(q.callstatus&tF.CIST_YPCALL||w===tO),q.callstatus&tF.CIST_YPCALL&&(q.callstatus&=~tF.CIST_YPCALL,h.errfunc=q.c_old_errfunc),q.nresults===tc&&h.ci.top<h.top&&(h.ci.top=h.top);let tr=(0,q.c_k)(h,w,q.c_ctx);tI.api_checknelems(h,tr),It(h,q,h.top-tr,tr)},_t=function(h,w){for(null!==w&&F(h,w);h.ci!==h.base_ci;)h.ci.callstatus&tF.CIST_LUA?(tX.luaV_finishOp(h),tX.luaV_execute(h)):F(h,tO)},wt=function(h,w){let q=function(h){for(let w=h.ci;null!==w;w=w.previous)if(w.callstatus&tF.CIST_YPCALL)return w;return null}(h);if(null===q)return 0;let tr=q.extra;return tR.luaF_close(h,tr),Ct(h,w,tr),h.ci=q,h.allowhook=q.callstatus&tF.CIST_OAH,h.nny=0,xt(h),h.errfunc=q.c_old_errfunc,1},ue=function(h,w,q){let tr=tB(h,w);if(0===q)tU.pushsvalue2s(h,tr),tN(h,h.top<=h.ci.top,"stack overflow");else{for(let w=1;w<q;w++)delete h.stack[--h.top];tU.setsvalue2s(h,h.top-1,tr)}return tT},le=function(h,w){let q=h.top-w,tr=h.ci;h.status===tA?rt(h,q-1,tc)||tX.luaV_execute(h):(tM(h.status===tO),h.status=tA,tr.funcOff=tr.extra,tr.func=h.stack[tr.funcOff],tr.callstatus&tF.CIST_LUA?tX.luaV_execute(h):(null!==tr.c_k&&(w=tr.c_k(h,tO,tr.c_ctx),tI.api_checknelems(h,w),q=h.top-w),It(h,tr,q,w)),_t(h,null))},ce=function(h,w,q,tr){let tn=h.ci;return tI.api_checknelems(h,w),h.nny>0&&(h!==h.l_G.mainthread?tP.luaG_runerror(h,tS("attempt to yield across a JS-call boundary",!0)):tP.luaG_runerror(h,tS("attempt to yield from outside a coroutine",!0))),h.status=tO,tn.extra=tn.funcOff,tn.callstatus&tF.CIST_LUA?tN(h,null===tr,"hooks cannot continue after yielding"):(tn.c_k=tr,null!==tr&&(tn.c_ctx=q),tn.funcOff=h.top-w-1,tn.func=h.stack[tn.funcOff],ht(h,tO)),tM(tn.callstatus&tF.CIST_HOOKED),0},Le=function(h,w,q,tr,tn){let ti=h.ci,to=h.allowhook,ts=h.nny,tu=h.errfunc;h.errfunc=tn;let tl=St(h,w,q);return tl!==tA&&(tR.luaF_close(h,tr),Ct(h,tl,tr),h.ci=ti,h.allowhook=to,h.nny=ts,xt(h)),h.errfunc=tu,tl},Re=function(h,w,q){h.nny++,k(h,w,q),h.nny--},Pe=function(h,w,q){w&&-1===tL(w,q[0])&&(tU.luaO_pushfstring(h,tS("attempt to load a %s chunk (mode is '%s')"),q,w),ht(h,tE))},Fe=function(h,w){let q,tr=w.z.zgetc();tr===tp[0]?(Pe(h,w.mode,tS("binary",!0)),q=tV.luaU_undump(h,w.z,w.name)):(Pe(h,w.mode,tS("text",!0)),q=tD.luaY_parser(h,w.z,w.buff,w.dyd,w.name,tr)),tM(q.nupvalues===q.p.upvalues.length),tR.luaF_initupvals(h,q)};h.exports.adjust_top=qt,h.exports.luaD_call=k,h.exports.luaD_callnoyield=Re,h.exports.luaD_checkstack=Z,h.exports.luaD_growstack=J,h.exports.luaD_hook=Zt,h.exports.luaD_inctop=function(h){Z(h,1),h.stack[h.top++]=new tU.TValue(tv,null)},h.exports.luaD_pcall=Le,h.exports.luaD_poscall=It,h.exports.luaD_precall=rt,h.exports.luaD_protectedparser=function(h,w,q,tr){let tn=new class{constructor(h,w,q){this.z=h,this.buff=new tH,this.dyd=new tD.Dyndata,this.mode=q,this.name=w}}(w,q,tr);h.nny++;let ti=Le(h,Fe,tn,h.top,h.errfunc);return h.nny--,ti},h.exports.luaD_rawrunprotected=St,h.exports.luaD_reallocstack=Jt,h.exports.luaD_throw=ht,h.exports.lua_isyieldable=function(h){return 0===h.nny},h.exports.lua_resume=function(h,w,q){let tr=h.nny;if(h.status===tA){if(h.ci!==h.base_ci)return ue(h,"cannot resume non-suspended coroutine",q)}else if(h.status!==tO)return ue(h,"cannot resume dead coroutine",q);if(h.nCcalls=w?w.nCcalls+1:1,h.nCcalls>=tk)return ue(h,"JS stack overflow",q);h.nny=0,tI.api_checknelems(h,h.status===tA?q+1:q);let tn=St(h,le,q);if(-1===tn)tn=tT;else{for(;tn>tO&&wt(h,tn);)tn=St(h,_t,tn);tn>tO?(h.status=tn,Ct(h,tn,h.top),h.ci.top=h.top):tM(tn===h.status)}return h.nny=tr,h.nCcalls--,tM(h.nCcalls===(w?w.nCcalls:0)),tn},h.exports.lua_yield=function(h,w){ce(h,w,0,null)},h.exports.lua_yieldk=ce},function(h,w,q){let{constant_types:{LUA_TBOOLEAN:tr,LUA_TCCL:tn,LUA_TLCF:ti,LUA_TLCL:to,LUA_TLIGHTUSERDATA:ts,LUA_TLNGSTR:tu,LUA_TNIL:tl,LUA_TNUMFLT:tc,LUA_TNUMINT:tp,LUA_TSHRSTR:td,LUA_TTABLE:tm,LUA_TTHREAD:ty,LUA_TUSERDATA:tv},to_luastring:tb}=q(1),{lua_assert:tx}=q(4),tT=q(11),tE=q(6),{luaS_hashlongstr:tA,TString:tO}=q(10),tw=q(12),tL=new WeakMap,G=function(h){let w=tL.get(h);return w||(w={},tL.set(h,w)),w},P=function(h,w){switch(w.type){case tl:return tT.luaG_runerror(h,tb("table index is nil",!0));case tc:if(isNaN(w.value))return tT.luaG_runerror(h,tb("table index is NaN",!0));case tp:case tr:case tm:case to:case ti:case tn:case tv:case ty:return w.value;case td:case tu:return tA(w.tsvalue());case ts:{let q=w.value;switch(typeof q){case"string":return"*"+q;case"number":return"#"+q;case"boolean":return q?"?true":"?false";case"function":return G(q);case"object":if(q instanceof tw.lua_State&&q.l_G===h.l_G||q instanceof M||q instanceof tE.Udata||q instanceof tE.LClosure||q instanceof tE.CClosure)return G(q);default:return q}}default:throw Error("unknown key type: "+w.type)}};let M=class M{constructor(h){this.id=h.l_G.id_counter++,this.strong=new Map,this.dead_strong=new Map,this.dead_weak=void 0,this.f=void 0,this.l=void 0,this.metatable=null,this.flags=-1}};let W=function(h,w,q,tr){h.dead_strong.clear(),h.dead_weak=void 0;let tn=null,ti={key:q,value:tr,p:tn=h.l,n:void 0};h.f||(h.f=ti),tn&&(tn.n=ti),h.strong.set(w,ti),h.l=ti},ft=function(h,w){let q=h.strong.get(w);if(q){q.key.setdeadvalue(),q.value=void 0;let tr=q.n,tn=q.p;q.p=void 0,tn&&(tn.n=tr),tr&&(tr.p=tn),h.f===q&&(h.f=tr),h.l===q&&(h.l=tn),h.strong.delete(w),("object"==typeof w?null!==w:"function"==typeof w)?(h.dead_weak||(h.dead_weak=new WeakMap),h.dead_weak.set(w,q)):h.dead_strong.set(w,q)}},gt=function(h,w){let q=h.strong.get(w);return q?q.value:tE.luaO_nilobject},Ot=function(h,w){return tx("number"==typeof w&&(0|w)===w),gt(h,w)};h.exports.invalidateTMcache=function(h){h.flags=0},h.exports.luaH_get=function(h,w,q){return tx(q instanceof tE.TValue),q.ttisnil()||q.ttisfloat()&&isNaN(q.value)?tE.luaO_nilobject:gt(w,P(h,q))},h.exports.luaH_getint=Ot,h.exports.luaH_getn=function(h){let w=0,q=h.strong.size+1;for(;q-w>1;){let tr=Math.floor((w+q)/2);Ot(h,tr).ttisnil()?q=tr:w=tr}return w},h.exports.luaH_getstr=function(h,w){return tx(w instanceof tO),gt(h,tA(w))},h.exports.luaH_setfrom=function(h,w,q,tr){tx(q instanceof tE.TValue);let tn=P(h,q);if(tr.ttisnil())return void ft(w,tn);let ti=w.strong.get(tn);if(ti)ti.value.setfrom(tr);else{let h=q.value;W(w,tn,q.ttisfloat()&&(0|h)===h?new tE.TValue(tp,h):new tE.TValue(q.type,h),new tE.TValue(tr.type,tr.value))}},h.exports.luaH_setint=function(h,w,q){if(tx("number"==typeof w&&(0|w)===w&&q instanceof tE.TValue),q.ttisnil())return void ft(h,w);let tr=h.strong.get(w);if(tr)tr.value.setfrom(q);else{let tr=new tE.TValue(tp,w);W(h,w,tr,new tE.TValue(q.type,q.value))}},h.exports.luaH_new=function(h){return new M(h)},h.exports.luaH_next=function(h,w,q){let tr,tn=h.stack[q];if(tn.type===tl){if(!(tr=w.f))return!1}else{let q=P(h,tn);if(tr=w.strong.get(q)){if(!(tr=tr.n))return!1}else{if(!(tr=w.dead_weak&&w.dead_weak.get(q)||w.dead_strong.get(q)))return tT.luaG_runerror(h,tb("invalid key to 'next'"));do if(!(tr=tr.n))return!1;while(tr.key.ttisdeadkey())}}return tE.setobj2s(h,q,tr.key),tE.setobj2s(h,q+1,tr.value),!0},h.exports.Table=M},function(h,w,q){let{is_luastring:tr,luastring_eq:tn,luastring_from:ti,to_luastring:to}=q(1),{lua_assert:ts}=q(4);let u=class u{constructor(h,w){this.hash=null,this.realstring=w}getstr(){return this.realstring}tsslen(){return this.realstring.length}};let l=function(h){ts(tr(h));let w=h.length,q="|";for(let tr=0;tr<w;tr++)q+=h[tr].toString(16);return q},f=function(h,w){return ts(w instanceof Uint8Array),new u(h,w)};h.exports.luaS_eqlngstr=function(h,w){return ts(h instanceof u),ts(w instanceof u),h==w||tn(h.realstring,w.realstring)},h.exports.luaS_hash=l,h.exports.luaS_hashlongstr=function(h){return ts(h instanceof u),null===h.hash&&(h.hash=l(h.getstr())),h.hash},h.exports.luaS_bless=f,h.exports.luaS_new=function(h,w){return f(h,ti(w))},h.exports.luaS_newliteral=function(h,w){return f(h,to(w))},h.exports.TString=u},function(h,w,q){let{LUA_HOOKCOUNT:tr,LUA_HOOKLINE:tn,LUA_MASKCOUNT:ti,LUA_MASKLINE:to,constant_types:{LUA_TBOOLEAN:ts,LUA_TNIL:tu,LUA_TTABLE:tl},thread_status:{LUA_ERRRUN:tc,LUA_YIELD:tp},from_userstring:td,luastring_eq:tm,luastring_indexOf:ty,to_luastring:tv}=q(1),{api_check:tb,lua_assert:tx}=q(4),{LUA_IDSIZE:tT}=q(3),tE=q(18),tA=q(8),tO=q(13),tw=q(20),tL=q(6),tS=q(16),tI=q(12),tP=q(9),tR=q(14),tN=q(15),gt=function(h){return tx(h.callstatus&tI.CIST_LUA),h.l_savedpc-1},Ot=function(h){return 0!==h.func.value.p.lineinfo.length?h.func.value.p.lineinfo[gt(h)]:-1},H=function(h){if(h.status===tp){let w=h.ci,q=w.funcOff;w.func=h.stack[w.extra],w.funcOff=w.extra,w.extra=q}},$=function(h,w){tx(w<h.upvalues.length);let q=h.upvalues[w].name;return null===q?tv("?",!0):q.getstr()},lt=function(h,w,q){let tr,tn=null;if(w.callstatus&tI.CIST_LUA){if(q<0){var ti;let h;return ti=-q,h=w.func.value.p.numparams,ti>=w.l_base-w.funcOff-h?null:{pos:w.funcOff+h+ti,name:tv("(*vararg)",!0)}}tr=w.l_base,tn=tO.luaF_getlocalname(w.func.value.p,q,gt(w))}else tr=w.funcOff+1;if(null===tn){if(!((w===h.ci?h.top:w.next.funcOff)-tr>=q&&q>0))return null;tn=tv("(*temporary)",!0)}return{pos:tr+(q-1),name:tn}},dt=function(h,w){if(null===w||w instanceof tL.CClosure)h.source=tv("=[JS]",!0),h.linedefined=-1,h.lastlinedefined=-1,h.what=tv("J",!0);else{let q=w.p;h.source=q.source?q.source.getstr():tv("=?",!0),h.linedefined=q.linedefined,h.lastlinedefined=q.lastlinedefined,h.what=0===h.linedefined?tv("main",!0):tv("Lua",!0)}h.short_src=tL.luaO_chunkid(h.source,tT)},Vt=function(h,w){let q={name:null,funcname:null};return null===w?null:w.callstatus&tI.CIST_FIN?(q.name=tv("__gc",!0),q.funcname=tv("metamethod",!0),q):!(w.callstatus&tI.CIST_TAIL)&&w.previous.callstatus&tI.CIST_LUA?pt(h,w.previous):null},S=function(h,w,q){let tr={name:null,funcname:null};if(tS.ISK(q)){let w=h.k[tS.INDEXK(q)];if(w.ttisstring())return tr.name=w.svalue(),tr}else{let tr=B(h,w,q);if(tr&&99===tr.funcname[0])return tr}return tr.name=tv("?",!0),tr},U=function(h,w){return h<w?-1:h},B=function(h,w,q){let tr={name:tO.luaF_getlocalname(h,q+1,w),funcname:null};if(tr.name)return tr.funcname=tv("local",!0),tr;let tn=function(h,w,q){let tr=-1,tn=0,ti=tS.OpCodesI;for(let to=0;to<w;to++){let ts=h.code[to],tu=ts.A;switch(ts.opcode){case ti.OP_LOADNIL:{let h=ts.B;tu<=q&&q<=tu+h&&(tr=U(to,tn));break}case ti.OP_TFORCALL:q>=tu+2&&(tr=U(to,tn));break;case ti.OP_CALL:case ti.OP_TAILCALL:q>=tu&&(tr=U(to,tn));break;case ti.OP_JMP:{let h=to+1+ts.sBx;to<h&&h<=w&&h>tn&&(tn=h);break}default:tS.testAMode(ts.opcode)&&q===tu&&(tr=U(to,tn))}}return tr}(h,w,q),ti=tS.OpCodesI;if(-1!==tn){let w=h.code[tn];switch(w.opcode){case ti.OP_MOVE:{let q=w.B;if(q<w.A)return B(h,tn,q);break}case ti.OP_GETTABUP:case ti.OP_GETTABLE:{let q=w.C,to=w.B,ts=w.opcode===ti.OP_GETTABLE?tO.luaF_getlocalname(h,to+1,tn):$(h,to);return tr.name=S(h,tn,q).name,tr.funcname=ts&&tm(ts,tw.LUA_ENV)?tv("global",!0):tv("field",!0),tr}case ti.OP_GETUPVAL:return tr.name=$(h,w.B),tr.funcname=tv("upvalue",!0),tr;case ti.OP_LOADK:case ti.OP_LOADKX:{let q=w.opcode===ti.OP_LOADK?w.Bx:h.code[tn+1].Ax;if(h.k[q].ttisstring())return tr.name=h.k[q].svalue(),tr.funcname=tv("constant",!0),tr;break}case ti.OP_SELF:{let q=w.C;return tr.name=S(h,tn,q).name,tr.funcname=tv("method",!0),tr}}}return null},pt=function(h,w){let q={name:null,funcname:null},tr=0,tn=w.func.value.p,ti=gt(w),to=tn.code[ti],ts=tS.OpCodesI;if(w.callstatus&tI.CIST_HOOKED)return q.name=tv("?",!0),q.funcname=tv("hook",!0),q;switch(to.opcode){case ts.OP_CALL:case ts.OP_TAILCALL:return B(tn,ti,to.A);case ts.OP_TFORCALL:return q.name=tv("for iterator",!0),q.funcname=tv("for iterator",!0),q;case ts.OP_SELF:case ts.OP_GETTABUP:case ts.OP_GETTABLE:tr=tR.TMS.TM_INDEX;break;case ts.OP_SETTABUP:case ts.OP_SETTABLE:tr=tR.TMS.TM_NEWINDEX;break;case ts.OP_ADD:tr=tR.TMS.TM_ADD;break;case ts.OP_SUB:tr=tR.TMS.TM_SUB;break;case ts.OP_MUL:tr=tR.TMS.TM_MUL;break;case ts.OP_MOD:tr=tR.TMS.TM_MOD;break;case ts.OP_POW:tr=tR.TMS.TM_POW;break;case ts.OP_DIV:tr=tR.TMS.TM_DIV;break;case ts.OP_IDIV:tr=tR.TMS.TM_IDIV;break;case ts.OP_BAND:tr=tR.TMS.TM_BAND;break;case ts.OP_BOR:tr=tR.TMS.TM_BOR;break;case ts.OP_BXOR:tr=tR.TMS.TM_BXOR;break;case ts.OP_SHL:tr=tR.TMS.TM_SHL;break;case ts.OP_SHR:tr=tR.TMS.TM_SHR;break;case ts.OP_UNM:tr=tR.TMS.TM_UNM;break;case ts.OP_BNOT:tr=tR.TMS.TM_BNOT;break;case ts.OP_LEN:tr=tR.TMS.TM_LEN;break;case ts.OP_CONCAT:tr=tR.TMS.TM_CONCAT;break;case ts.OP_EQ:tr=tR.TMS.TM_EQ;break;case ts.OP_LT:tr=tR.TMS.TM_LT;break;case ts.OP_LE:tr=tR.TMS.TM_LE;break;default:return null}return q.name=h.l_G.tmname[tr].getstr(),q.funcname=tv("metamethod",!0),q},ut=function(h,w){let q=h.ci,tr=null;if(q.callstatus&tI.CIST_LUA){tr=function(h,w,q){let tr=w.func.value;for(let h=0;h<tr.nupvalues;h++)if(tr.upvals[h]===q)return{name:$(tr.p,h),funcname:tv("upvalue",!0)};return null}(0,q,w);let tn=function(h,w,q){for(let tr=w.l_base;tr<w.top;tr++)if(h.stack[tr]===q)return tr;return!1}(h,q,w);!tr&&tn&&(tr=B(q.func.value.p,gt(q),tn-q.l_base))}return tr?tL.luaO_pushfstring(h,tv(" (%s '%s')",!0),tr.funcname,tr.name):tv("",!0)},qt=function(h,w,q){let tr=tR.luaT_objtypename(h,w);kt(h,tv("attempt to %s a %s value%s",!0),q,tr,ut(h,w))},Ct=function(h,w,q,tr){let tn;return tn=q?tL.luaO_chunkid(q.getstr(),tT):tv("?",!0),tL.luaO_pushfstring(h,tv("%s:%d: %s",!0),tn,tr,w)},kt=function(h,w,...q){let tr=h.ci,tn=tL.luaO_pushvfstring(h,w,q);tr.callstatus&tI.CIST_LUA&&Ct(h,tn,tr.func.value.p.source,Ot(tr)),Jt(h)},Jt=function(h){if(0!==h.errfunc){let w=h.errfunc;tL.pushobj2s(h,h.stack[h.top-1]),tL.setobjs2s(h,h.top-2,w),tA.luaD_callnoyield(h,h.top-2,1)}tA.luaD_throw(h,tc)};h.exports.luaG_addinfo=Ct,h.exports.luaG_concaterror=function(h,w,q){(w.ttisstring()||tN.cvt2str(w))&&(w=q),qt(h,w,tv("concatenate",!0))},h.exports.luaG_errormsg=Jt,h.exports.luaG_opinterror=function(h,w,q,tr){!1===tN.tonumber(w)&&(q=w),qt(h,q,tr)},h.exports.luaG_ordererror=function(h,w,q){let tr=tR.luaT_objtypename(h,w),tn=tR.luaT_objtypename(h,q);tm(tr,tn)?kt(h,tv("attempt to compare two %s values",!0),tr):kt(h,tv("attempt to compare %s with %s",!0),tr,tn)},h.exports.luaG_runerror=kt,h.exports.luaG_tointerror=function(h,w,q){!1===tN.tointeger(w)&&(q=w),kt(h,tv("number%s has no integer representation",!0),ut(h,q))},h.exports.luaG_traceexec=function(h){let w=h.ci,q=h.hookmask,ts=0==--h.hookcount&&q&ti;if(ts)h.hookcount=h.basehookcount;else if(!(q&to))return;if(w.callstatus&tI.CIST_HOOKYIELD)w.callstatus&=~tI.CIST_HOOKYIELD;else{if(ts&&tA.luaD_hook(h,tr,-1),q&to){let q=w.func.value.p,tr=w.l_savedpc-1,ti=0!==q.lineinfo.length?q.lineinfo[tr]:-1;(0===tr||w.l_savedpc<=h.oldpc||ti!==(0!==q.lineinfo.length?q.lineinfo[h.oldpc-1]:-1))&&tA.luaD_hook(h,tn,ti)}h.oldpc=w.l_savedpc,h.status===tp&&(ts&&(h.hookcount=1),w.l_savedpc--,w.callstatus|=tI.CIST_HOOKYIELD,w.funcOff=h.top-1,w.func=h.stack[w.funcOff],tA.luaD_throw(h,tp))}},h.exports.luaG_typeerror=qt,h.exports.lua_gethook=function(h){return h.hook},h.exports.lua_gethookcount=function(h){return h.basehookcount},h.exports.lua_gethookmask=function(h){return h.hookmask},h.exports.lua_getinfo=function(h,w,q){let tr,tn,ti,to;return w=td(w),H(h),62===w[0]?(ti=null,to=h.stack[h.top-1],tb(h,to.ttisfunction(),"function expected"),w=w.subarray(1),h.top--):(to=(ti=q.i_ci).func,tx(ti.func.ttisfunction())),tr=function(h,w,q,tr,tn){let ti=1;for(;w.length>0;w=w.subarray(1))switch(w[0]){case 83:dt(q,tr);break;case 108:q.currentline=tn&&tn.callstatus&tI.CIST_LUA?Ot(tn):-1;break;case 117:q.nups=null===tr?0:tr.nupvalues,null===tr||tr instanceof tL.CClosure?(q.isvararg=!0,q.nparams=0):(q.isvararg=tr.p.is_vararg,q.nparams=tr.p.numparams);break;case 116:q.istailcall=tn?tn.callstatus&tI.CIST_TAIL:0;break;case 110:{let w=Vt(h,tn);null===w?(q.namewhat=tv("",!0),q.name=null):(q.namewhat=w.funcname,q.name=w.name);break}case 76:case 102:break;default:ti=0}return ti}(h,w,q,tn=to.ttisclosure()?to.value:null,ti),ty(w,102)>=0&&(tL.pushobj2s(h,to),tb(h,h.top<=h.ci.top,"stack overflow")),H(h),ty(w,76)>=0&&function(h,w){if(null===w||w instanceof tL.CClosure)h.stack[h.top]=new tL.TValue(tu,null),tE.api_incr_top(h);else{let q=w.p.lineinfo,tr=tP.luaH_new(h);h.stack[h.top]=new tL.TValue(tl,tr),tE.api_incr_top(h);let tn=new tL.TValue(ts,!0);for(let h=0;h<q.length;h++)tP.luaH_setint(tr,q[h],tn)}}(h,tn),tr},h.exports.lua_getlocal=function(h,w,q){let tr;if(H(h),null===w)tr=h.stack[h.top-1].ttisLclosure()?tO.luaF_getlocalname(h.stack[h.top-1].value.p,q,0):null;else{let tn=lt(h,w.i_ci,q);tn?(tr=tn.name,tL.pushobj2s(h,h.stack[tn.pos]),tb(h,h.top<=h.ci.top,"stack overflow")):tr=null}return H(h),tr},h.exports.lua_getstack=function(h,w,q){let tr,tn;if(w<0)return 0;for(tr=h.ci;w>0&&tr!==h.base_ci;tr=tr.previous)w--;return 0===w&&tr!==h.base_ci?(tn=1,q.i_ci=tr):tn=0,tn},h.exports.lua_sethook=function(h,w,q,tr){null!==w&&0!==q||(q=0,w=null),h.ci.callstatus&tI.CIST_LUA&&(h.oldpc=h.ci.l_savedpc),h.hook=w,h.basehookcount=tr,h.hookcount=h.basehookcount,h.hookmask=q},h.exports.lua_setlocal=function(h,w,q){let tr;H(h);let tn=lt(h,w.i_ci,q);return tn?(tr=tn.name,tL.setobjs2s(h,tn.pos,h.top-1),delete h.stack[--h.top]):tr=null,H(h),tr}},function(h,w,q){let{LUA_MINSTACK:tr,LUA_RIDX_GLOBALS:tn,LUA_RIDX_MAINTHREAD:ti,constant_types:{LUA_NUMTAGS:to,LUA_TNIL:ts,LUA_TTABLE:tu,LUA_TTHREAD:tl},thread_status:{LUA_OK:tc}}=q(1),tp=q(6),td=q(8),tm=q(18),ty=q(9),tv=q(14),tb=2*tr;let O=class O{constructor(){this.func=null,this.funcOff=NaN,this.top=NaN,this.previous=null,this.next=null,this.l_base=NaN,this.l_code=null,this.l_savedpc=NaN,this.c_k=null,this.c_old_errfunc=null,this.c_ctx=null,this.nresults=NaN,this.callstatus=NaN}};let V=class V{constructor(h){this.id=h.id_counter++,this.base_ci=new O,this.top=NaN,this.stack_last=NaN,this.oldpc=NaN,this.l_G=h,this.stack=null,this.ci=null,this.errorJmp=null,this.nCcalls=0,this.hook=null,this.hookmask=0,this.basehookcount=0,this.allowhook=1,this.hookcount=this.basehookcount,this.nny=1,this.status=tc,this.errfunc=0}};let C=function(h){h.ci.next=null},K=function(h,w){h.stack=Array(tb),h.top=0,h.stack_last=tb-5;let q=h.base_ci;q.next=q.previous=null,q.callstatus=0,q.funcOff=h.top,q.func=h.stack[h.top],h.stack[h.top++]=new tp.TValue(ts,null),q.top=h.top+tr,h.ci=q},Y=function(h){h.ci=h.base_ci,C(h),h.stack=null},tt=function(h){let w,q=h.l_G;K(h),w=ty.luaH_new(h),q.l_registry.sethvalue(w),ty.luaH_setint(w,ti,new tp.TValue(tl,h)),ty.luaH_setint(w,tn,new tp.TValue(tu,ty.luaH_new(h))),tv.luaT_init(h),q.version=tm.lua_version(null)};h.exports.lua_State=V,h.exports.CallInfo=O,h.exports.CIST_OAH=1,h.exports.CIST_LUA=2,h.exports.CIST_HOOKED=4,h.exports.CIST_FRESH=8,h.exports.CIST_YPCALL=16,h.exports.CIST_TAIL=32,h.exports.CIST_HOOKYIELD=64,h.exports.CIST_LEQ=128,h.exports.CIST_FIN=256,h.exports.EXTRA_STACK=5,h.exports.lua_close=function(h){Y(h=h.l_G.mainthread)},h.exports.lua_newstate=function(){let h=new class{constructor(){this.id_counter=1,this.ids=new WeakMap,this.mainthread=null,this.l_registry=new tp.TValue(ts,null),this.panic=null,this.atnativeerror=null,this.version=null,this.tmname=Array(tv.TMS.TM_N),this.mt=Array(to)}},w=new V(h);return h.mainthread=w,td.luaD_rawrunprotected(w,tt,null)!==tc&&(w=null),w},h.exports.lua_newthread=function(h){let w=h.l_G,q=new V(w);return h.stack[h.top]=new tp.TValue(tl,q),tm.api_incr_top(h),q.hookmask=h.hookmask,q.basehookcount=h.basehookcount,q.hook=h.hook,q.hookcount=q.basehookcount,K(q),q},h.exports.luaE_extendCI=function(h){let w=new O;return h.ci.next=w,w.previous=h.ci,w.next=null,h.ci=w,w},h.exports.luaE_freeCI=C,h.exports.luaE_freethread=function(h,w){Y(w)}},function(h,w,q){let{constant_types:{LUA_TNIL:tr}}=q(1),tn=q(6);h.exports.MAXUPVAL=255,h.exports.Proto=class{constructor(h){this.id=h.l_G.id_counter++,this.k=[],this.p=[],this.code=[],this.cache=null,this.lineinfo=[],this.upvalues=[],this.numparams=0,this.is_vararg=!1,this.maxstacksize=0,this.locvars=[],this.linedefined=0,this.lastlinedefined=0,this.source=null}},h.exports.luaF_findupval=function(h,w){return h.stack[w]},h.exports.luaF_close=function(h,w){for(let q=w;q<h.top;q++){let w=h.stack[q];h.stack[q]=new tn.TValue(w.type,w.value)}},h.exports.luaF_getlocalname=function(h,w,q){for(let tr=0;tr<h.locvars.length&&h.locvars[tr].startpc<=q;tr++)if(q<h.locvars[tr].endpc&&0==--w)return h.locvars[tr].varname.getstr();return null},h.exports.luaF_initupvals=function(h,w){for(let h=0;h<w.nupvalues;h++)w.upvals[h]=new tn.TValue(tr,null)},h.exports.luaF_newLclosure=function(h,w){return new tn.LClosure(h,w)}},function(h,w,q){let{constant_types:{LUA_TTABLE:tr,LUA_TUSERDATA:tn},to_luastring:ti}=q(1),{lua_assert:to}=q(4),ts=q(6),tu=q(8),tl=q(12),{luaS_bless:tc,luaS_new:tp}=q(10),td=q(9),tm=q(11),ty=q(15),tv=["no value","nil","boolean","userdata","number","string","table","function","userdata","thread","proto"].map(h=>ti(h)),T=function(h){return tv[h+1]},tb={TM_INDEX:0,TM_NEWINDEX:1,TM_GC:2,TM_MODE:3,TM_LEN:4,TM_EQ:5,TM_ADD:6,TM_SUB:7,TM_MUL:8,TM_MOD:9,TM_POW:10,TM_DIV:11,TM_IDIV:12,TM_BAND:13,TM_BOR:14,TM_BXOR:15,TM_SHL:16,TM_SHR:17,TM_UNM:18,TM_BNOT:19,TM_LT:20,TM_LE:21,TM_CONCAT:22,TM_CALL:23,TM_N:24},tx=ti("__name",!0),C=function(h,w,q,tr,tn,ti){let to=h.top;if(ts.pushobj2s(h,w),ts.pushobj2s(h,q),ts.pushobj2s(h,tr),ti||ts.pushobj2s(h,tn),h.ci.callstatus&tl.CIST_LUA?tu.luaD_call(h,to,ti):tu.luaD_callnoyield(h,to,ti),ti){let w=h.stack[h.top-1];delete h.stack[--h.top],tn.setfrom(w)}},K=function(h,w,q,tr,tn){let ti=tt(h,w,tn);return ti.ttisnil()&&(ti=tt(h,q,tn)),!ti.ttisnil()&&(C(h,ti,w,q,tr,1),!0)},Y=function(h,w,q){let tr=td.luaH_getstr(h,q);return to(w<=tb.TM_EQ),tr.ttisnil()?(h.flags|=1<<w,null):tr},tt=function(h,w,q){let ti;switch(w.ttnov()){case tr:case tn:ti=w.value.metatable;break;default:ti=h.l_G.mt[w.ttnov()]}return ti?td.luaH_getstr(ti,h.l_G.tmname[q]):ts.luaO_nilobject};h.exports.fasttm=function(h,w,q){return null===w||w.flags&1<<q?null:Y(w,q,h.l_G.tmname[q])},h.exports.TMS=tb,h.exports.luaT_callTM=C,h.exports.luaT_callbinTM=K,h.exports.luaT_trybinTM=function(h,w,q,tr,tn){if(!K(h,w,q,tr,tn))switch(tn){case tb.TM_CONCAT:return tm.luaG_concaterror(h,w,q);case tb.TM_BAND:case tb.TM_BOR:case tb.TM_BXOR:case tb.TM_SHL:case tb.TM_SHR:case tb.TM_BNOT:{let tr=ty.tonumber(w),tn=ty.tonumber(q);return!1!==tr&&!1!==tn?tm.luaG_tointerror(h,w,q):tm.luaG_opinterror(h,w,q,ti("perform bitwise operation on",!0))}default:return tm.luaG_opinterror(h,w,q,ti("perform arithmetic on",!0))}},h.exports.luaT_callorderTM=function(h,w,q,tr){let tn=new ts.TValue;return K(h,w,q,tn,tr)?!tn.l_isfalse():null},h.exports.luaT_gettm=Y,h.exports.luaT_gettmbyobj=tt,h.exports.luaT_init=function(h){h.l_G.tmname[tb.TM_INDEX]=new tp(h,ti("__index",!0)),h.l_G.tmname[tb.TM_NEWINDEX]=new tp(h,ti("__newindex",!0)),h.l_G.tmname[tb.TM_GC]=new tp(h,ti("__gc",!0)),h.l_G.tmname[tb.TM_MODE]=new tp(h,ti("__mode",!0)),h.l_G.tmname[tb.TM_LEN]=new tp(h,ti("__len",!0)),h.l_G.tmname[tb.TM_EQ]=new tp(h,ti("__eq",!0)),h.l_G.tmname[tb.TM_ADD]=new tp(h,ti("__add",!0)),h.l_G.tmname[tb.TM_SUB]=new tp(h,ti("__sub",!0)),h.l_G.tmname[tb.TM_MUL]=new tp(h,ti("__mul",!0)),h.l_G.tmname[tb.TM_MOD]=new tp(h,ti("__mod",!0)),h.l_G.tmname[tb.TM_POW]=new tp(h,ti("__pow",!0)),h.l_G.tmname[tb.TM_DIV]=new tp(h,ti("__div",!0)),h.l_G.tmname[tb.TM_IDIV]=new tp(h,ti("__idiv",!0)),h.l_G.tmname[tb.TM_BAND]=new tp(h,ti("__band",!0)),h.l_G.tmname[tb.TM_BOR]=new tp(h,ti("__bor",!0)),h.l_G.tmname[tb.TM_BXOR]=new tp(h,ti("__bxor",!0)),h.l_G.tmname[tb.TM_SHL]=new tp(h,ti("__shl",!0)),h.l_G.tmname[tb.TM_SHR]=new tp(h,ti("__shr",!0)),h.l_G.tmname[tb.TM_UNM]=new tp(h,ti("__unm",!0)),h.l_G.tmname[tb.TM_BNOT]=new tp(h,ti("__bnot",!0)),h.l_G.tmname[tb.TM_LT]=new tp(h,ti("__lt",!0)),h.l_G.tmname[tb.TM_LE]=new tp(h,ti("__le",!0)),h.l_G.tmname[tb.TM_CONCAT]=new tp(h,ti("__concat",!0)),h.l_G.tmname[tb.TM_CALL]=new tp(h,ti("__call",!0))},h.exports.luaT_objtypename=function(h,w){let q;if(w.ttistable()&&null!==(q=w.value.metatable)||w.ttisfulluserdata()&&null!==(q=w.value.metatable)){let w=td.luaH_getstr(q,tc(h,tx));if(w.ttisstring())return w.svalue()}return T(w.ttnov())},h.exports.ttypename=T},function(h,w,q){let{LUA_MASKLINE:tr,LUA_MASKCOUNT:tn,LUA_MULTRET:ti,constant_types:{LUA_TBOOLEAN:to,LUA_TLCF:ts,LUA_TLIGHTUSERDATA:tu,LUA_TLNGSTR:tl,LUA_TNIL:tc,LUA_TNUMBER:tp,LUA_TNUMFLT:td,LUA_TNUMINT:tm,LUA_TSHRSTR:ty,LUA_TTABLE:tv,LUA_TUSERDATA:tb},to_luastring:tx}=q(1),{INDEXK:tT,ISK:tE,LFIELDS_PER_FLUSH:tA,OpCodesI:{OP_ADD:tO,OP_BAND:tw,OP_BNOT:tL,OP_BOR:tS,OP_BXOR:tI,OP_CALL:tP,OP_CLOSURE:tR,OP_CONCAT:tN,OP_DIV:tM,OP_EQ:tk,OP_EXTRAARG:tU,OP_FORLOOP:tC,OP_FORPREP:tD,OP_GETTABLE:tF,OP_GETTABUP:tB,OP_GETUPVAL:tj,OP_IDIV:tG,OP_JMP:tV,OP_LE:tX,OP_LEN:tH,OP_LOADBOOL:tz,OP_LOADK:tK,OP_LOADKX:tY,OP_LOADNIL:tW,OP_LT:tq,OP_MOD:tZ,OP_MOVE:tJ,OP_MUL:tQ,OP_NEWTABLE:t$,OP_NOT:t0,OP_POW:t1,OP_RETURN:t2,OP_SELF:t3,OP_SETLIST:t4,OP_SETTABLE:t5,OP_SETTABUP:t6,OP_SETUPVAL:t8,OP_SHL:t7,OP_SHR:t9,OP_SUB:er,OP_TAILCALL:en,OP_TEST:ei,OP_TESTSET:eo,OP_TFORCALL:es,OP_TFORLOOP:eu,OP_UNM:el,OP_VARARG:ep}}=q(16),{LUA_MAXINTEGER:ed,LUA_MININTEGER:e_,lua_numbertointeger:eg}=q(3),{lua_assert:em,luai_nummod:ey}=q(4),ev=q(6),eb=q(13),ex=q(12),{luaS_bless:eT,luaS_eqlngstr:eE,luaS_hashlongstr:eO}=q(10),eL=q(8),eS=q(14),eI=q(9),eP=q(11),p=function(h,w,q){return w+q.A},b=function(h,w,q){return w+q.B},_=function(h,w,q,tr){return tE(tr.B)?q[tT(tr.B)]:h.stack[w+tr.B]},x=function(h,w,q,tr){return tE(tr.C)?q[tT(tr.C)]:h.stack[w+tr.C]},N=function(h,w,q,tr){let tn=q.A;0!==tn&&eb.luaF_close(h,w.l_base+tn-1),w.l_savedpc+=q.sBx+tr},A=function(h,w){N(h,w,w.l_code[w.l_savedpc],1)},Q=function(h,w,q){if(w.ttisnumber()&&q.ttisnumber())return D(w,q)?1:0;if(w.ttisstring()&&q.ttisstring())return 0>it(w.tsvalue(),q.tsvalue())?1:0;{let tr=eS.luaT_callorderTM(h,w,q,eS.TMS.TM_LT);return null===tr&&eP.luaG_ordererror(h,w,q),tr?1:0}},Mt=function(h,w,q){let tr;return w.ttisnumber()&&q.ttisnumber()?bt(w,q)?1:0:w.ttisstring()&&q.ttisstring()?0>=it(w.tsvalue(),q.tsvalue())?1:0:null!==(tr=eS.luaT_callorderTM(h,w,q,eS.TMS.TM_LE))?tr?1:0:(h.ci.callstatus|=ex.CIST_LEQ,tr=eS.luaT_callorderTM(h,q,w,eS.TMS.TM_LT),h.ci.callstatus^=ex.CIST_LEQ,null===tr&&eP.luaG_ordererror(h,w,q),tr?0:1)},Wt=function(h,w,q){let tr;if(w.ttype()!==q.ttype())return w.ttnov()!==q.ttnov()||w.ttnov()!==tp?0:w.value===q.value?1:0;switch(w.ttype()){case tc:return 1;case to:return w.value==q.value?1:0;case tu:case tm:case td:case ts:return w.value===q.value?1:0;case ty:case tl:return eE(w.tsvalue(),q.tsvalue())?1:0;case tb:case tv:if(w.value===q.value)return 1;if(null===h)return 0;null===(tr=eS.fasttm(h,w.value.metatable,eS.TMS.TM_EQ))&&(tr=eS.fasttm(h,q.value.metatable,eS.TMS.TM_EQ));break;default:return w.value===q.value?1:0}if(null===tr)return 0;let tn=new ev.TValue;return eS.luaT_callTM(h,tr,w,q,tn,1),tn.l_isfalse()?0:1},ge=function(h,w){let q=!1,tr=ye(h,w<0?2:1);if(!1===tr){let tn=jt(h);if(!1===tn)return!1;0<tn?(tr=ed,w<0&&(q=!0)):(tr=e_,w>=0&&(q=!0))}return{stopnow:q,ilimit:tr}},ye=function(h,w){if(h.ttisfloat()){let q=h.value,tr=Math.floor(q);if(q!==tr){if(0===w)return!1;w>1&&(tr+=1)}return eg(tr)}if(h.ttisinteger())return h.value;if(Ee(h)){let q=new ev.TValue;if(ev.luaO_str2num(h.svalue(),q)===h.vslen()+1)return ye(q,w)}return!1},nt=function(h){return h.ttisinteger()?h.value:ye(h,0)},jt=function(h){if(h.ttnov()===tp)return h.value;if(Ee(h)){let w=new ev.TValue;if(ev.luaO_str2num(h.svalue(),w)===h.vslen()+1)return w.value}return!1},D=function(h,w){return h.value<w.value},bt=function(h,w){return h.value<=w.value},it=function(h,w){let q=eO(h),tr=eO(w);return q===tr?0:q<tr?-1:1},zt=function(h,w,q){let tr;switch(q.ttype()){case tv:{let tn=q.value;if(null!==(tr=eS.fasttm(h,tn.metatable,eS.TMS.TM_LEN)))break;return void w.setivalue(eI.luaH_getn(tn))}case ty:case tl:return void w.setivalue(q.vslen());default:(tr=eS.luaT_gettmbyobj(h,q,eS.TMS.TM_LEN)).ttisnil()&&eP.luaG_typeerror(h,q,tx("get length of",!0))}eS.luaT_callTM(h,tr,q,q,w,1)},eR=Math.imul||function(h,w){let q=65535&h,tr=65535&w;return q*tr+((h>>>16&65535)*tr+q*(w>>>16&65535)<<16>>>0)|0},fe=function(h,w,q){return 0===q&&eP.luaG_runerror(h,tx("attempt to divide by zero")),0|Math.floor(w/q)},ae=function(h,w,q){return 0===q&&eP.luaG_runerror(h,tx("attempt to perform 'n%%0'")),w-Math.floor(w/q)*q|0},Ae=function(h,w){return w<0?w<=-32?0:h>>>-w:w>=32?0:h<<w},je=function(h,w,q,tr){let tn=h.cache;if(null!==tn){let ti=h.upvalues,to=ti.length;for(let h=0;h<to;h++){let to=ti[h].instack?q[tr+ti[h].idx]:w[ti[h].idx];if(tn.upvals[h]!==to)return null}}return tn},de=function(h,w,q,tr,tn){let ti=w.upvalues.length,to=w.upvalues,ts=new ev.LClosure(h,ti);ts.p=w,h.stack[tn].setclLvalue(ts);for(let w=0;w<ti;w++)to[w].instack?ts.upvals[w]=eb.luaF_findupval(h,tr+to[w].idx):ts.upvals[w]=q[to[w].idx];w.cache=ts},Oe=function(h){return h.ttisnumber()},Ee=function(h){return h.ttisstring()},Ne=function(h,w){let q=h.stack[w];return!!q.ttisstring()||!!Oe(q)&&(ev.luaO_tostring(h,q),!0)},ke=function(h){return h.ttisstring()&&0===h.vslen()},ir=function(h,w,q,tr){let tn=0;do{let ti=h.stack[w-q],to=ti.vslen(),ts=ti.svalue();tr.set(ts,tn),tn+=to}while(--q>0)},Be=function(h,w){em(w>=2);do{let q=h.top,tr=2;if((h.stack[q-2].ttisstring()||Oe(h.stack[q-2]))&&Ne(h,q-1)){if(ke(h.stack[q-1]))Ne(h,q-2);else if(ke(h.stack[q-2]))ev.setobjs2s(h,q-2,q-1);else{let tn=h.stack[q-1].vslen();for(tr=1;tr<w&&Ne(h,q-tr-1);tr++)tn+=h.stack[q-tr-1].vslen();let ti=new Uint8Array(tn);ir(h,q,tr,ti);let to=eT(h,ti);ev.setsvalue2s(h,q-tr,to)}}else eS.luaT_trybinTM(h,h.stack[q-2],h.stack[q-1],h.stack[q-2],eS.TMS.TM_CONCAT);for(w-=tr-1;h.top>q-(tr-1);)delete h.stack[--h.top]}while(w>1)},or=function(h,w,q,tr){for(let tn=0;tn<2e3;tn++){let tn;if(w.ttistable()){let ti=eI.luaH_get(h,w.value,q);if(!ti.ttisnil())return void ev.setobj2s(h,tr,ti);if(null===(tn=eS.fasttm(h,w.value.metatable,eS.TMS.TM_INDEX)))return void h.stack[tr].setnilvalue()}else(tn=eS.luaT_gettmbyobj(h,w,eS.TMS.TM_INDEX)).ttisnil()&&eP.luaG_typeerror(h,w,tx("index",!0));if(tn.ttisfunction())return void eS.luaT_callTM(h,tn,w,q,h.stack[tr],1);w=tn}eP.luaG_runerror(h,tx("'__index' chain too long; possible loop",!0))},Ze=function(h,w,q,tr){for(let tn=0;tn<2e3;tn++){let tn;if(w.ttistable()){let ti=w.value;if(!eI.luaH_get(h,ti,q).ttisnil()||null===(tn=eS.fasttm(h,ti.metatable,eS.TMS.TM_NEWINDEX)))return eI.luaH_setfrom(h,ti,q,tr),void eI.invalidateTMcache(ti)}else(tn=eS.luaT_gettmbyobj(h,w,eS.TMS.TM_NEWINDEX)).ttisnil()&&eP.luaG_typeerror(h,w,tx("index",!0));if(tn.ttisfunction())return void eS.luaT_callTM(h,tn,w,q,tr,0);w=tn}eP.luaG_runerror(h,tx("'__newindex' chain too long; possible loop",!0))};h.exports.cvt2str=Oe,h.exports.cvt2num=Ee,h.exports.luaV_gettable=or,h.exports.luaV_concat=Be,h.exports.luaV_div=fe,h.exports.luaV_equalobj=Wt,h.exports.luaV_execute=function(h){let w=h.ci;for(w.callstatus|=ex.CIST_FRESH;;){em(w===h.ci);let q=w.func.value,to=q.p.k,ts=w.l_base,tu=w.l_code[w.l_savedpc++];h.hookmask&(tr|tn)&&eP.luaG_traceexec(h);let tl=p(0,ts,tu);switch(tu.opcode){case tJ:ev.setobjs2s(h,tl,b(0,ts,tu));break;case tK:{let w=to[tu.Bx];ev.setobj2s(h,tl,w);break}case tY:{em(w.l_code[w.l_savedpc].opcode===tU);let q=to[w.l_code[w.l_savedpc++].Ax];ev.setobj2s(h,tl,q);break}case tz:h.stack[tl].setbvalue(0!==tu.B),0!==tu.C&&w.l_savedpc++;break;case tW:for(let w=0;w<=tu.B;w++)h.stack[tl+w].setnilvalue();break;case tj:{let w=tu.B;ev.setobj2s(h,tl,q.upvals[w]);break}case tB:{let w=q.upvals[tu.B],tr=x(h,ts,to,tu);or(h,w,tr,tl);break}case tF:{let w=h.stack[b(0,ts,tu)],q=x(h,ts,to,tu);or(h,w,q,tl);break}case t6:{let w=q.upvals[tu.A],tr=_(h,ts,to,tu),tn=x(h,ts,to,tu);Ze(h,w,tr,tn);break}case t8:q.upvals[tu.B].setfrom(h.stack[tl]);break;case t5:{let w=h.stack[tl],q=_(h,ts,to,tu),tr=x(h,ts,to,tu);Ze(h,w,q,tr);break}case t$:h.stack[tl].sethvalue(eI.luaH_new(h));break;case t3:{let w=b(0,ts,tu),q=x(h,ts,to,tu);ev.setobjs2s(h,tl+1,w),or(h,h.stack[w],q,tl);break}case tO:{let w,q,tr=_(h,ts,to,tu),tn=x(h,ts,to,tu);tr.ttisinteger()&&tn.ttisinteger()?h.stack[tl].setivalue(tr.value+tn.value|0):!1!==(w=jt(tr))&&!1!==(q=jt(tn))?h.stack[tl].setfltvalue(w+q):eS.luaT_trybinTM(h,tr,tn,h.stack[tl],eS.TMS.TM_ADD);break}case er:{let w,q,tr=_(h,ts,to,tu),tn=x(h,ts,to,tu);tr.ttisinteger()&&tn.ttisinteger()?h.stack[tl].setivalue(tr.value-tn.value|0):!1!==(w=jt(tr))&&!1!==(q=jt(tn))?h.stack[tl].setfltvalue(w-q):eS.luaT_trybinTM(h,tr,tn,h.stack[tl],eS.TMS.TM_SUB);break}case tQ:{let w,q,tr=_(h,ts,to,tu),tn=x(h,ts,to,tu);tr.ttisinteger()&&tn.ttisinteger()?h.stack[tl].setivalue(eR(tr.value,tn.value)):!1!==(w=jt(tr))&&!1!==(q=jt(tn))?h.stack[tl].setfltvalue(w*q):eS.luaT_trybinTM(h,tr,tn,h.stack[tl],eS.TMS.TM_MUL);break}case tZ:{let w,q,tr=_(h,ts,to,tu),tn=x(h,ts,to,tu);tr.ttisinteger()&&tn.ttisinteger()?h.stack[tl].setivalue(ae(h,tr.value,tn.value)):!1!==(w=jt(tr))&&!1!==(q=jt(tn))?h.stack[tl].setfltvalue(ey(h,w,q)):eS.luaT_trybinTM(h,tr,tn,h.stack[tl],eS.TMS.TM_MOD);break}case t1:{let w,q,tr=_(h,ts,to,tu),tn=x(h,ts,to,tu);!1!==(w=jt(tr))&&!1!==(q=jt(tn))?h.stack[tl].setfltvalue(Math.pow(w,q)):eS.luaT_trybinTM(h,tr,tn,h.stack[tl],eS.TMS.TM_POW);break}case tM:{let w,q,tr=_(h,ts,to,tu),tn=x(h,ts,to,tu);!1!==(w=jt(tr))&&!1!==(q=jt(tn))?h.stack[tl].setfltvalue(w/q):eS.luaT_trybinTM(h,tr,tn,h.stack[tl],eS.TMS.TM_DIV);break}case tG:{let w,q,tr=_(h,ts,to,tu),tn=x(h,ts,to,tu);tr.ttisinteger()&&tn.ttisinteger()?h.stack[tl].setivalue(fe(h,tr.value,tn.value)):!1!==(w=jt(tr))&&!1!==(q=jt(tn))?h.stack[tl].setfltvalue(Math.floor(w/q)):eS.luaT_trybinTM(h,tr,tn,h.stack[tl],eS.TMS.TM_IDIV);break}case tw:{let w,q,tr=_(h,ts,to,tu),tn=x(h,ts,to,tu);!1!==(w=nt(tr))&&!1!==(q=nt(tn))?h.stack[tl].setivalue(w&q):eS.luaT_trybinTM(h,tr,tn,h.stack[tl],eS.TMS.TM_BAND);break}case tS:{let w,q,tr=_(h,ts,to,tu),tn=x(h,ts,to,tu);!1!==(w=nt(tr))&&!1!==(q=nt(tn))?h.stack[tl].setivalue(w|q):eS.luaT_trybinTM(h,tr,tn,h.stack[tl],eS.TMS.TM_BOR);break}case tI:{let w,q,tr=_(h,ts,to,tu),tn=x(h,ts,to,tu);!1!==(w=nt(tr))&&!1!==(q=nt(tn))?h.stack[tl].setivalue(w^q):eS.luaT_trybinTM(h,tr,tn,h.stack[tl],eS.TMS.TM_BXOR);break}case t7:{let w,q,tr=_(h,ts,to,tu),tn=x(h,ts,to,tu);!1!==(w=nt(tr))&&!1!==(q=nt(tn))?h.stack[tl].setivalue(Ae(w,q)):eS.luaT_trybinTM(h,tr,tn,h.stack[tl],eS.TMS.TM_SHL);break}case t9:{let w,q,tr=_(h,ts,to,tu),tn=x(h,ts,to,tu);!1!==(w=nt(tr))&&!1!==(q=nt(tn))?h.stack[tl].setivalue(Ae(w,-q)):eS.luaT_trybinTM(h,tr,tn,h.stack[tl],eS.TMS.TM_SHR);break}case el:{let w,q=h.stack[b(0,ts,tu)];q.ttisinteger()?h.stack[tl].setivalue(0|-q.value):!1!==(w=jt(q))?h.stack[tl].setfltvalue(-w):eS.luaT_trybinTM(h,q,q,h.stack[tl],eS.TMS.TM_UNM);break}case tL:{let w=h.stack[b(0,ts,tu)];w.ttisinteger()?h.stack[tl].setivalue(~w.value):eS.luaT_trybinTM(h,w,w,h.stack[tl],eS.TMS.TM_BNOT);break}case t0:{let w=h.stack[b(0,ts,tu)];h.stack[tl].setbvalue(w.l_isfalse());break}case tH:zt(h,h.stack[tl],h.stack[b(0,ts,tu)]);break;case tN:{let q=tu.B,tr=tu.C;h.top=ts+tr+1,Be(h,tr-q+1);let tn=ts+q;ev.setobjs2s(h,tl,tn),eL.adjust_top(h,w.top);break}case tV:N(h,w,tu,0);break;case tk:Wt(h,_(h,ts,to,tu),x(h,ts,to,tu))!==tu.A?w.l_savedpc++:A(h,w);break;case tq:Q(h,_(h,ts,to,tu),x(h,ts,to,tu))!==tu.A?w.l_savedpc++:A(h,w);break;case tX:Mt(h,_(h,ts,to,tu),x(h,ts,to,tu))!==tu.A?w.l_savedpc++:A(h,w);break;case ei:(tu.C?h.stack[tl].l_isfalse():!h.stack[tl].l_isfalse())?w.l_savedpc++:A(h,w);break;case eo:{let q=b(0,ts,tu),tr=h.stack[q];(tu.C?tr.l_isfalse():!tr.l_isfalse())?w.l_savedpc++:(ev.setobjs2s(h,tl,q),A(h,w));break}case tP:{let q=tu.B,tr=tu.C-1;if(0!==q&&eL.adjust_top(h,tl+q),!eL.luaD_precall(h,tl,tr)){w=h.ci;continue}tr>=0&&eL.adjust_top(h,w.top);break}case en:{let tr=tu.B;if(0!==tr&&eL.adjust_top(h,tl+tr),!eL.luaD_precall(h,tl,ti)){let tr=h.ci,tn=tr.previous,ti=tr.func,to=tr.funcOff,ts=tn.funcOff,tu=tr.l_base+ti.value.p.numparams;q.p.p.length>0&&eb.luaF_close(h,tn.l_base);for(let w=0;to+w<tu;w++)ev.setobjs2s(h,ts+w,to+w);tn.l_base=ts+(tr.l_base-to),tn.top=ts+(h.top-to),eL.adjust_top(h,tn.top),tn.l_code=tr.l_code,tn.l_savedpc=tr.l_savedpc,tn.callstatus|=ex.CIST_TAIL,tn.next=null,w=h.ci=tn,em(h.top===tn.l_base+h.stack[ts].value.p.maxstacksize);continue}break}case t2:{q.p.p.length>0&&eb.luaF_close(h,ts);let tr=eL.luaD_poscall(h,w,tl,0!==tu.B?tu.B-1:h.top-tl);if(w.callstatus&ex.CIST_FRESH)return;w=h.ci,tr&&eL.adjust_top(h,w.top),em(w.callstatus&ex.CIST_LUA),em(w.l_code[w.l_savedpc-1].opcode===tP);continue}case tC:if(h.stack[tl].ttisinteger()){let q=h.stack[tl+2].value,tr=h.stack[tl].value+q|0,tn=h.stack[tl+1].value;(0<q?tr<=tn:tn<=tr)&&(w.l_savedpc+=tu.sBx,h.stack[tl].chgivalue(tr),h.stack[tl+3].setivalue(tr))}else{let q=h.stack[tl+2].value,tr=h.stack[tl].value+q,tn=h.stack[tl+1].value;(0<q?tr<=tn:tn<=tr)&&(w.l_savedpc+=tu.sBx,h.stack[tl].chgfltvalue(tr),h.stack[tl+3].setfltvalue(tr))}break;case tD:{let q,tr=h.stack[tl],tn=h.stack[tl+1],ti=h.stack[tl+2];if(tr.ttisinteger()&&ti.ttisinteger()&&(q=ge(tn,ti.value))){let h=q.stopnow?0:tr.value;tn.value=q.ilimit,tr.value=h-ti.value|0}else{let w,q,to;!1===(w=jt(tn))&&eP.luaG_runerror(h,tx("'for' limit must be a number",!0)),h.stack[tl+1].setfltvalue(w),!1===(q=jt(ti))&&eP.luaG_runerror(h,tx("'for' step must be a number",!0)),h.stack[tl+2].setfltvalue(q),!1===(to=jt(tr))&&eP.luaG_runerror(h,tx("'for' initial value must be a number",!0)),h.stack[tl].setfltvalue(to-q)}w.l_savedpc+=tu.sBx;break}case es:{let q=tl+3;ev.setobjs2s(h,q+2,tl+2),ev.setobjs2s(h,q+1,tl+1),ev.setobjs2s(h,q,tl),eL.adjust_top(h,q+3),eL.luaD_call(h,q,tu.C),eL.adjust_top(h,w.top),tl=p(0,ts,tu=w.l_code[w.l_savedpc++]),em(tu.opcode===eu)}case eu:h.stack[tl+1].ttisnil()||(ev.setobjs2s(h,tl,tl+1),w.l_savedpc+=tu.sBx);break;case t4:{let q=tu.B,tr=tu.C;0===q&&(q=h.top-tl-1),0===tr&&(em(w.l_code[w.l_savedpc].opcode===tU),tr=w.l_code[w.l_savedpc++].Ax);let tn=h.stack[tl].value,ti=(tr-1)*tA+q;for(;q>0;q--)eI.luaH_setint(tn,ti--,h.stack[tl+q]);eL.adjust_top(h,w.top);break}case tR:{let w=q.p.p[tu.Bx],tr=je(w,q.upvals,h.stack,ts);null===tr?de(h,w,q.upvals,ts,tl):h.stack[tl].setclLvalue(tr);break}case ep:{let tr,tn=tu.B-1,ti=ts-w.funcOff-q.p.numparams-1;for(ti<0&&(ti=0),tn<0&&(tn=ti,eL.luaD_checkstack(h,ti),eL.adjust_top(h,tl+ti)),tr=0;tr<tn&&tr<ti;tr++)ev.setobjs2s(h,tl+tr,ts-ti+tr);for(;tr<tn;tr++)h.stack[tl+tr].setnilvalue();break}case tU:throw Error("invalid opcode")}}},h.exports.luaV_finishOp=function(h){let w=h.ci,q=w.l_base,tr=w.l_code[w.l_savedpc-1],tn=tr.opcode;switch(tn){case tO:case er:case tQ:case tM:case tG:case tw:case tS:case tI:case t7:case t9:case tZ:case t1:case el:case tL:case tH:case tB:case tF:case t3:ev.setobjs2s(h,q+tr.A,h.top-1),delete h.stack[--h.top];break;case tX:case tq:case tk:{let q=!h.stack[h.top-1].l_isfalse();delete h.stack[--h.top],w.callstatus&ex.CIST_LEQ&&(em(tn===tX),w.callstatus^=ex.CIST_LEQ,q=!q),em(w.l_code[w.l_savedpc].opcode===tV),!!tr.A!==q&&w.l_savedpc++;break}case tN:{let tn=h.top-1,ti=tn-1-(q+tr.B);ev.setobjs2s(h,tn-2,tn),ti>1&&(h.top=tn-1,Be(h,ti)),ev.setobjs2s(h,w.l_base+tr.A,h.top-1),eL.adjust_top(h,w.top);break}case es:em(w.l_code[w.l_savedpc].opcode===eu),eL.adjust_top(h,w.top);break;case tP:tr.C-1>=0&&eL.adjust_top(h,w.top)}},h.exports.luaV_imul=eR,h.exports.luaV_lessequal=Mt,h.exports.luaV_lessthan=Q,h.exports.luaV_mod=ae,h.exports.luaV_objlen=zt,h.exports.luaV_rawequalobj=function(h,w){return Wt(null,h,w)},h.exports.luaV_shiftl=Ae,h.exports.luaV_tointeger=ye,h.exports.settable=Ze,h.exports.tointeger=nt,h.exports.tonumber=jt},function(h,w,q){let tr=[96,113,65,84,80,80,92,108,60,16,60,84,108,124,124,124,124,124,124,124,124,124,124,124,124,96,96,96,96,104,34,188,188,188,132,228,84,84,16,98,98,4,98,20,81,80,23],i=function(h,w){return~(-1<<h)<<w},o=function(h,w){return~i(h,w)},a=function(h,w,q,tr){return h.code=h.code&o(tr,q)|w<<q&i(tr,q),u(h)},s=function(h,w){return a(h,w,14,18)},u=function(h){if("number"==typeof h)return{code:h,opcode:h>>0&i(6,0),A:h>>6&i(8,0),B:h>>23&i(9,0),C:h>>14&i(9,0),Bx:h>>14&i(18,0),Ax:h>>6&i(26,0),sBx:(h>>14&i(18,0))-131071};{let w=h.code;return h.opcode=w>>0&i(6,0),h.A=w>>6&i(8,0),h.B=w>>23&i(9,0),h.C=w>>14&i(9,0),h.Bx=w>>14&i(18,0),h.Ax=w>>6&i(26,0),h.sBx=(w>>14&i(18,0))-131071,h}};h.exports.BITRK=256,h.exports.CREATE_ABC=function(h,w,q,tr){return u(h<<0|w<<6|q<<23|tr<<14)},h.exports.CREATE_ABx=function(h,w,q){return u(h<<0|w<<6|q<<14)},h.exports.CREATE_Ax=function(h,w){return u(h<<0|w<<6)},h.exports.GET_OPCODE=function(h){return h.opcode},h.exports.GETARG_A=function(h){return h.A},h.exports.GETARG_B=function(h){return h.B},h.exports.GETARG_C=function(h){return h.C},h.exports.GETARG_Bx=function(h){return h.Bx},h.exports.GETARG_Ax=function(h){return h.Ax},h.exports.GETARG_sBx=function(h){return h.sBx},h.exports.INDEXK=function(h){return -257&h},h.exports.ISK=function(h){return 256&h},h.exports.LFIELDS_PER_FLUSH=50,h.exports.MAXARG_A=255,h.exports.MAXARG_Ax=67108863,h.exports.MAXARG_B=511,h.exports.MAXARG_Bx=262143,h.exports.MAXARG_C=511,h.exports.MAXARG_sBx=131071,h.exports.MAXINDEXRK=255,h.exports.NO_REG=255,h.exports.OpArgK=3,h.exports.OpArgN=0,h.exports.OpArgR=2,h.exports.OpArgU=1,h.exports.OpCodes=["MOVE","LOADK","LOADKX","LOADBOOL","LOADNIL","GETUPVAL","GETTABUP","GETTABLE","SETTABUP","SETUPVAL","SETTABLE","NEWTABLE","SELF","ADD","SUB","MUL","MOD","POW","DIV","IDIV","BAND","BOR","BXOR","SHL","SHR","UNM","BNOT","NOT","LEN","CONCAT","JMP","EQ","LT","LE","TEST","TESTSET","CALL","TAILCALL","RETURN","FORLOOP","FORPREP","TFORCALL","TFORLOOP","SETLIST","CLOSURE","VARARG","EXTRAARG"],h.exports.OpCodesI={OP_MOVE:0,OP_LOADK:1,OP_LOADKX:2,OP_LOADBOOL:3,OP_LOADNIL:4,OP_GETUPVAL:5,OP_GETTABUP:6,OP_GETTABLE:7,OP_SETTABUP:8,OP_SETUPVAL:9,OP_SETTABLE:10,OP_NEWTABLE:11,OP_SELF:12,OP_ADD:13,OP_SUB:14,OP_MUL:15,OP_MOD:16,OP_POW:17,OP_DIV:18,OP_IDIV:19,OP_BAND:20,OP_BOR:21,OP_BXOR:22,OP_SHL:23,OP_SHR:24,OP_UNM:25,OP_BNOT:26,OP_NOT:27,OP_LEN:28,OP_CONCAT:29,OP_JMP:30,OP_EQ:31,OP_LT:32,OP_LE:33,OP_TEST:34,OP_TESTSET:35,OP_CALL:36,OP_TAILCALL:37,OP_RETURN:38,OP_FORLOOP:39,OP_FORPREP:40,OP_TFORCALL:41,OP_TFORLOOP:42,OP_SETLIST:43,OP_CLOSURE:44,OP_VARARG:45,OP_EXTRAARG:46},h.exports.POS_A=6,h.exports.POS_Ax=6,h.exports.POS_B=23,h.exports.POS_Bx=14,h.exports.POS_C=14,h.exports.POS_OP=0,h.exports.RKASK=function(h){return 256|h},h.exports.SETARG_A=function(h,w){return a(h,w,6,8)},h.exports.SETARG_Ax=function(h,w){return a(h,w,6,26)},h.exports.SETARG_B=function(h,w){return a(h,w,23,9)},h.exports.SETARG_Bx=s,h.exports.SETARG_C=function(h,w){return a(h,w,14,9)},h.exports.SETARG_sBx=function(h,w){return s(h,w+131071)},h.exports.SET_OPCODE=function(h,w){return h.code=h.code&o(6,0)|w<<0&i(6,0),u(h)},h.exports.SIZE_A=8,h.exports.SIZE_Ax=26,h.exports.SIZE_B=9,h.exports.SIZE_Bx=18,h.exports.SIZE_C=9,h.exports.SIZE_OP=6,h.exports.fullins=u,h.exports.getBMode=function(h){return tr[h]>>4&3},h.exports.getCMode=function(h){return tr[h]>>2&3},h.exports.getOpMode=function(h){return 3&tr[h]},h.exports.iABC=0,h.exports.iABx=1,h.exports.iAsBx=2,h.exports.iAx=3,h.exports.testAMode=function(h){return 64&tr[h]},h.exports.testTMode=function(h){return 128&tr[h]}},function(h,w,q){let{LUA_VERSION_MAJOR:tr,LUA_VERSION_MINOR:tn}=q(2);h.exports.LUA_VERSUFFIX="_"+tr+"_"+tn,h.exports.lua_assert=function(h){},h.exports.luaopen_base=q(24).luaopen_base,h.exports.LUA_COLIBNAME="coroutine",h.exports.luaopen_coroutine=q(25).luaopen_coroutine,h.exports.LUA_TABLIBNAME="table",h.exports.luaopen_table=q(26).luaopen_table,h.exports.LUA_OSLIBNAME="os",h.exports.luaopen_os=q(27).luaopen_os,h.exports.LUA_STRLIBNAME="string",h.exports.luaopen_string=q(28).luaopen_string,h.exports.LUA_UTF8LIBNAME="utf8",h.exports.luaopen_utf8=q(29).luaopen_utf8,h.exports.LUA_BITLIBNAME="bit32",h.exports.LUA_MATHLIBNAME="math",h.exports.luaopen_math=q(30).luaopen_math,h.exports.LUA_DBLIBNAME="debug",h.exports.luaopen_debug=q(31).luaopen_debug,h.exports.LUA_LOADLIBNAME="package",h.exports.luaopen_package=q(32).luaopen_package,h.exports.LUA_FENGARILIBNAME="fengari",h.exports.luaopen_fengari=q(33).luaopen_fengari;let ti=q(39);h.exports.luaL_openlibs=ti.luaL_openlibs},function(h,w,q){let{LUA_MULTRET:tr,LUA_OPBNOT:tn,LUA_OPEQ:ti,LUA_OPLE:to,LUA_OPLT:ts,LUA_OPUNM:tu,LUA_REGISTRYINDEX:tl,LUA_RIDX_GLOBALS:tc,LUA_VERSION_NUM:tp,constant_types:{LUA_NUMTAGS:td,LUA_TBOOLEAN:tm,LUA_TCCL:ty,LUA_TFUNCTION:tv,LUA_TLCF:tb,LUA_TLCL:tx,LUA_TLIGHTUSERDATA:tT,LUA_TLNGSTR:tE,LUA_TNIL:tA,LUA_TNONE:tO,LUA_TNUMFLT:tw,LUA_TNUMINT:tL,LUA_TSHRSTR:tS,LUA_TTABLE:tI,LUA_TTHREAD:tP,LUA_TUSERDATA:tR},thread_status:{LUA_OK:tN},from_userstring:tM,to_luastring:tk}=q(1),{api_check:tU}=q(4),tC=q(11),tD=q(8),{luaU_dump:tF}=q(37),tB=q(13),tj=q(6),tG=q(12),{luaS_bless:tV,luaS_new:tX,luaS_newliteral:tH}=q(10),tz=q(14),{LUAI_MAXSTACK:tK}=q(3),tY=q(15),tW=q(9),{ZIO:tq}=q(19),tZ=tj.TValue,tJ=tj.CClosure,rt=function(h){h.top++,tU(h,h.top<=h.ci.top,"stack overflow")},It=function(h,w){tU(h,w<h.top-h.ci.funcOff,"not enough elements in the stack")},ee=function(h){if(!h)throw TypeError("invalid argument")},Zt=function(h){ee("number"==typeof h&&(0|h)===h)},Ut=function(h){return h!==tj.luaO_nilobject},et=function(h,w){let q=h.ci;if(w>0){let tr=q.funcOff+w;return tU(h,w<=q.top-(q.funcOff+1),"unacceptable index"),tr>=h.top?tj.luaO_nilobject:h.stack[tr]}return w>tl?(tU(h,0!==w&&-w<=h.top,"invalid index"),h.stack[h.top+w]):w===tl?h.l_G.l_registry:(tU(h,(w=tl-w)<=tB.MAXUPVAL+1,"upvalue index too large"),q.func.ttislcf()?tj.luaO_nilobject:w<=q.func.value.nupvalues?q.func.value.upvalue[w-1]:tj.luaO_nilobject)},Et=function(h,w){let q=h.ci;if(w>0){let tr=q.funcOff+w;return tU(h,w<=q.top-(q.funcOff+1),"unacceptable index"),tr>=h.top?null:tr}if(w>tl)return tU(h,0!==w&&-w<=h.top,"invalid index"),h.top+w;throw Error("attempt to use pseudo-index")},k=function(h,w){let q,tr=h.ci.funcOff;w>=0?(tU(h,w<=h.stack_last-(tr+1),"new top too large"),q=tr+1+w):(tU(h,-(w+1)<=h.top-(tr+1),"invalid new top"),q=h.top+w+1),tD.adjust_top(h,q)},ht=function(h,w){k(h,-w-1)},St=function(h,w,q){for(;w<q;w++,q--){let tr=h.stack[w],tn=new tZ(tr.type,tr.value);tj.setobjs2s(h,w,q),tj.setobj2s(h,q,tn)}},F=function(h,w,q){let tr=h.top-1,tn=Et(h,w),ti=h.stack[tn];tU(h,Ut(ti)&&w>tl,"index not in the stack"),tU(h,(q>=0?q:-q)<=tr-tn+1,"invalid 'n'");let to=q>=0?tr-q:tn-q-1;St(h,tn,to),St(h,to+1,h.top-1),St(h,tn,h.top-1)},_t=function(h,w,q){let tr=et(h,w);et(h,q).setfrom(tr)},wt=function(h,w,q){if(ee("function"==typeof w),Zt(q),0===q)h.stack[h.top]=new tZ(tb,w);else{It(h,q),tU(h,q<=tB.MAXUPVAL,"upvalue index too large");let tr=new tJ(h,w,q);for(let w=0;w<q;w++)tr.upvalue[w].setfrom(h.stack[h.top-q+w]);for(let w=1;w<q;w++)delete h.stack[--h.top];q>0&&--h.top,h.stack[h.top].setclCvalue(tr)}rt(h)},le=function(h,w){wt(h,w,0)},Le=function(h,w,q){let tr=tX(h,tM(q));It(h,1),tj.pushsvalue2s(h,tr),tU(h,h.top<=h.ci.top,"stack overflow"),tY.settable(h,w,h.stack[h.top-1],h.stack[h.top-2]),delete h.stack[--h.top],delete h.stack[--h.top]},Re=function(h,w){Le(h,tW.luaH_getint(h.l_G.l_registry.value,tc),w)},Pe=function(h,w,q){let tr=tX(h,tM(q));return tj.pushsvalue2s(h,tr),tU(h,h.top<=h.ci.top,"stack overflow"),tY.luaV_gettable(h,w,h.stack[h.top-1],h.top-1),h.stack[h.top-1].ttnov()},Fe=function(h,w,q){let tr=et(h,w);return Zt(q),tU(h,tr.ttistable(),"table expected"),tj.pushobj2s(h,tW.luaH_getint(tr.value,q)),tU(h,h.top<=h.ci.top,"stack overflow"),h.stack[h.top-1].ttnov()},I=function(h,w,q){let tr=new tj.TValue(tI,tW.luaH_new(h));h.stack[h.top]=tr,rt(h)},Ft=function(h,w,q){switch(Zt(q),w.ttype()){case ty:{let h=w.value;return 1<=q&&q<=h.nupvalues?{name:tk("",!0),val:h.upvalue[q-1]}:null}case tx:{let h=w.value,tr=h.p;if(!(1<=q&&q<=tr.upvalues.length))return null;let tn=tr.upvalues[q-1].name;return{name:tn?tn.getstr():tk("(*no name)",!0),val:h.upvals[q-1]}}default:return null}},Dt=function(h,w){let q=et(h,w);if(!q.ttisstring()){if(!tY.cvt2str(q))return null;tj.luaO_tostring(h,q)}return q.svalue()},Tt=function(h,w){return tY.tointeger(et(h,w))},Lt=function(h,w){return tY.tonumber(et(h,w))},tQ=new WeakMap,_e=function(h,w){tD.luaD_callnoyield(h,w.funcOff,w.nresults)},ve=function(h,w){let q=et(h,w);return Ut(q)?q.ttnov():tO},t$=tk("?"),Ue=function(h,w,q){tU(h,q===tr||h.ci.top-h.top>=q-w,"results from function overflow current stack size")},ne=function(h,w,q,tn,ti){tU(h,null===ti||!(h.ci.callstatus&tG.CIST_LUA),"cannot use continuations inside hooks"),It(h,w+1),tU(h,h.status===tN,"cannot do calls on non-normal thread"),Ue(h,w,q);let to=h.top-(w+1);null!==ti&&0===h.nny?(h.ci.c_k=ti,h.ci.c_ctx=tn,tD.luaD_call(h,to,q)):tD.luaD_callnoyield(h,to,q),q===tr&&h.ci.top<h.top&&(h.ci.top=h.top)},se=function(h,w,q,tn,ti,to){let ts,tu;tU(h,null===to||!(h.ci.callstatus&tG.CIST_LUA),"cannot use continuations inside hooks"),It(h,w+1),tU(h,h.status===tN,"cannot do calls on non-normal thread"),Ue(h,w,q),tu=0===tn?0:Et(h,tn);let tl=h.top-(w+1);if(null===to||h.nny>0)ts=tD.luaD_pcall(h,_e,{funcOff:tl,nresults:q},tl,tu);else{let w=h.ci;w.c_k=to,w.c_ctx=ti,w.extra=tl,w.c_old_errfunc=h.errfunc,h.errfunc=tu,w.callstatus&=~tG.CIST_OAH|h.allowhook,w.callstatus|=tG.CIST_YPCALL,tD.luaD_call(h,tl,q),w.callstatus&=~tG.CIST_YPCALL,h.errfunc=w.c_old_errfunc,ts=tN}return q===tr&&h.ci.top<h.top&&(h.ci.top=h.top),ts},be=function(h,w,q){let tr=et(h,w);tU(h,tr.ttisLclosure(),"Lua function expected");let tn=tr.value;return Zt(q),tU(h,1<=q&&q<=tn.p.upvalues.length,"invalid upvalue index"),{f:tn,i:q-1}};h.exports.api_incr_top=rt,h.exports.api_checknelems=It,h.exports.lua_absindex=function(h,w){return w>0||w<=tl?w:h.top-h.ci.funcOff+w},h.exports.lua_arith=function(h,w){w!==tu&&w!==tn?It(h,2):(It(h,1),tj.pushobj2s(h,h.stack[h.top-1]),tU(h,h.top<=h.ci.top,"stack overflow")),tj.luaO_arith(h,w,h.stack[h.top-2],h.stack[h.top-1],h.stack[h.top-2]),delete h.stack[--h.top]},h.exports.lua_atpanic=function(h,w){let q=h.l_G.panic;return h.l_G.panic=w,q},h.exports.lua_atnativeerror=function(h,w){let q=h.l_G.atnativeerror;return h.l_G.atnativeerror=w,q},h.exports.lua_call=function(h,w,q){ne(h,w,q,0,null)},h.exports.lua_callk=ne,h.exports.lua_checkstack=function(h,w){let q,tr=h.ci;return tU(h,w>=0,"negative 'n'"),h.stack_last-h.top>w?q=!0:h.top+tG.EXTRA_STACK>tK-w?q=!1:(tD.luaD_growstack(h,w),q=!0),q&&tr.top<h.top+w&&(tr.top=h.top+w),q},h.exports.lua_compare=function(h,w,q,tr){let tn=et(h,w),tu=et(h,q),tl=0;if(Ut(tn)&&Ut(tu))switch(tr){case ti:tl=tY.luaV_equalobj(h,tn,tu);break;case ts:tl=tY.luaV_lessthan(h,tn,tu);break;case to:tl=tY.luaV_lessequal(h,tn,tu);break;default:tU(h,!1,"invalid option")}return tl},h.exports.lua_concat=function(h,w){It(h,w),w>=2?tY.luaV_concat(h,w):0===w&&(tj.pushsvalue2s(h,tV(h,tk("",!0))),tU(h,h.top<=h.ci.top,"stack overflow"))},h.exports.lua_copy=_t,h.exports.lua_createtable=I,h.exports.lua_dump=function(h,w,q,tr){It(h,1);let tn=h.stack[h.top-1];return tn.ttisLclosure()?tF(h,tn.value.p,w,q,tr):1},h.exports.lua_error=function(h){It(h,1),tC.luaG_errormsg(h)},h.exports.lua_gc=function(){},h.exports.lua_getallocf=function(){return console.warn("lua_getallocf is not available"),0},h.exports.lua_getextraspace=function(){return console.warn("lua_getextraspace is not available"),0},h.exports.lua_getfield=function(h,w,q){return Pe(h,et(h,w),q)},h.exports.lua_getglobal=function(h,w){return Pe(h,tW.luaH_getint(h.l_G.l_registry.value,tc),w)},h.exports.lua_geti=function(h,w,q){let tr=et(h,w);return Zt(q),h.stack[h.top]=new tZ(tL,q),rt(h),tY.luaV_gettable(h,tr,h.stack[h.top-1],h.top-1),h.stack[h.top-1].ttnov()},h.exports.lua_getmetatable=function(h,w){let q,tr=et(h,w),tn=!1;switch(tr.ttnov()){case tI:case tR:q=tr.value.metatable;break;default:q=h.l_G.mt[tr.ttnov()]}return null!=q&&(h.stack[h.top]=new tZ(tI,q),rt(h),tn=!0),tn},h.exports.lua_gettable=function(h,w){let q=et(h,w);return tY.luaV_gettable(h,q,h.stack[h.top-1],h.top-1),h.stack[h.top-1].ttnov()},h.exports.lua_gettop=function(h){return h.top-(h.ci.funcOff+1)},h.exports.lua_getupvalue=function(h,w,q){let tr=Ft(0,et(h,w),q);if(tr){let w=tr.name,q=tr.val;return tj.pushobj2s(h,q),tU(h,h.top<=h.ci.top,"stack overflow"),w}return null},h.exports.lua_getuservalue=function(h,w){let q=et(h,w);tU(h,q.ttisfulluserdata(),"full userdata expected");let tr=q.value.uservalue;return h.stack[h.top]=new tZ(tr.type,tr.value),rt(h),h.stack[h.top-1].ttnov()},h.exports.lua_insert=function(h,w){F(h,w,1)},h.exports.lua_isboolean=function(h,w){return ve(h,w)===tm},h.exports.lua_iscfunction=function(h,w){let q=et(h,w);return q.ttislcf(q)||q.ttisCclosure()},h.exports.lua_isfunction=function(h,w){return ve(h,w)===tv},h.exports.lua_isinteger=function(h,w){return et(h,w).ttisinteger()},h.exports.lua_islightuserdata=function(h,w){return ve(h,w)===tT},h.exports.lua_isnil=function(h,w){return ve(h,w)===tA},h.exports.lua_isnone=function(h,w){return ve(h,w)===tO},h.exports.lua_isnoneornil=function(h,w){return 0>=ve(h,w)},h.exports.lua_isnumber=function(h,w){return!1!==tY.tonumber(et(h,w))},h.exports.lua_isproxy=function(h,w){let q=tQ.get(h);return!!q&&(null===w||w.l_G===q)},h.exports.lua_isstring=function(h,w){let q=et(h,w);return q.ttisstring()||tY.cvt2str(q)},h.exports.lua_istable=function(h,w){return et(h,w).ttistable()},h.exports.lua_isthread=function(h,w){return ve(h,w)===tP},h.exports.lua_isuserdata=function(h,w){let q=et(h,w);return q.ttisfulluserdata(q)||q.ttislightuserdata()},h.exports.lua_len=function(h,w){let q=et(h,w),tr=new tZ;tY.luaV_objlen(h,tr,q),h.stack[h.top]=tr,rt(h)},h.exports.lua_load=function(h,w,q,tr,tn){tr=tr?tM(tr):t$,null!==tn&&(tn=tM(tn));let ti=new tq(h,w,q),to=tD.luaD_protectedparser(h,ti,tr,tn);if(to===tN){let w=h.stack[h.top-1].value;if(w.nupvalues>=1){let q=tW.luaH_getint(h.l_G.l_registry.value,tc);w.upvals[0].setfrom(q)}}return to},h.exports.lua_newtable=function(h){I(h)},h.exports.lua_newuserdata=function(h,w){let q=new tj.Udata(h,w);return h.stack[h.top]=new tj.TValue(tR,q),rt(h),q.data},h.exports.lua_next=function(h,w){let q=et(h,w);return tU(h,q.ttistable(),"table expected"),h.stack[h.top]=new tZ,tW.luaH_next(h,q.value,h.top-1)?(rt(h),1):(delete h.stack[h.top],delete h.stack[--h.top],0)},h.exports.lua_pcall=function(h,w,q,tr){return se(h,w,q,tr,0,null)},h.exports.lua_pcallk=se,h.exports.lua_pop=ht,h.exports.lua_pushboolean=function(h,w){h.stack[h.top]=new tZ(tm,!!w),rt(h)},h.exports.lua_pushcclosure=wt,h.exports.lua_pushcfunction=le,h.exports.lua_pushfstring=function(h,w,...q){return w=tM(w),tj.luaO_pushvfstring(h,w,q)},h.exports.lua_pushglobaltable=function(h){Fe(h,tl,tc)},h.exports.lua_pushinteger=function(h,w){Zt(w),h.stack[h.top]=new tZ(tL,w),rt(h)},h.exports.lua_pushjsclosure=wt,h.exports.lua_pushjsfunction=le,h.exports.lua_pushlightuserdata=function(h,w){h.stack[h.top]=new tZ(tT,w),rt(h)},h.exports.lua_pushliteral=function(h,w){if(null==w)h.stack[h.top]=new tZ(tA,null),h.top++;else{ee("string"==typeof w);let q=tH(h,w);tj.pushsvalue2s(h,q),w=q.getstr()}return tU(h,h.top<=h.ci.top,"stack overflow"),w},h.exports.lua_pushlstring=function(h,w,q){let tr;return Zt(q),0===q?tr=tV(h,w=tk("",!0)):(tU(h,(w=tM(w)).length>=q,"invalid length to lua_pushlstring"),tr=tX(h,w.subarray(0,q))),tj.pushsvalue2s(h,tr),tU(h,h.top<=h.ci.top,"stack overflow"),tr.value},h.exports.lua_pushnil=function(h){h.stack[h.top]=new tZ(tA,null),rt(h)},h.exports.lua_pushnumber=function(h,w){ee("number"==typeof w),h.stack[h.top]=new tZ(tw,w),rt(h)},h.exports.lua_pushstring=function(h,w){if(null==w)h.stack[h.top]=new tZ(tA,null),h.top++;else{let q=tX(h,tM(w));tj.pushsvalue2s(h,q),w=q.getstr()}return tU(h,h.top<=h.ci.top,"stack overflow"),w},h.exports.lua_pushthread=function(h){return h.stack[h.top]=new tZ(tP,h),rt(h),h.l_G.mainthread===h},h.exports.lua_pushvalue=function(h,w){tj.pushobj2s(h,et(h,w)),tU(h,h.top<=h.ci.top,"stack overflow")},h.exports.lua_pushvfstring=function(h,w,q){return w=tM(w),tj.luaO_pushvfstring(h,w,q)},h.exports.lua_rawequal=function(h,w,q){let tr=et(h,w),tn=et(h,q);return Ut(tr)&&Ut(tn)?tY.luaV_equalobj(null,tr,tn):0},h.exports.lua_rawget=function(h,w){let q=et(h,w);return tU(h,q.ttistable(q),"table expected"),tj.setobj2s(h,h.top-1,tW.luaH_get(h,q.value,h.stack[h.top-1])),h.stack[h.top-1].ttnov()},h.exports.lua_rawgeti=Fe,h.exports.lua_rawgetp=function(h,w,q){let tr=et(h,w);tU(h,tr.ttistable(),"table expected");let tn=new tZ(tT,q);return tj.pushobj2s(h,tW.luaH_get(h,tr.value,tn)),tU(h,h.top<=h.ci.top,"stack overflow"),h.stack[h.top-1].ttnov()},h.exports.lua_rawlen=function(h,w){let q=et(h,w);switch(q.ttype()){case tS:case tE:return q.vslen();case tR:return q.value.len;case tI:return tW.luaH_getn(q.value);default:return 0}},h.exports.lua_rawset=function(h,w){It(h,2);let q=et(h,w);tU(h,q.ttistable(),"table expected");let tr=h.stack[h.top-2],tn=h.stack[h.top-1];tW.luaH_setfrom(h,q.value,tr,tn),tW.invalidateTMcache(q.value),delete h.stack[--h.top],delete h.stack[--h.top]},h.exports.lua_rawseti=function(h,w,q){Zt(q),It(h,1);let tr=et(h,w);tU(h,tr.ttistable(),"table expected"),tW.luaH_setint(tr.value,q,h.stack[h.top-1]),delete h.stack[--h.top]},h.exports.lua_rawsetp=function(h,w,q){It(h,1);let tr=et(h,w);tU(h,tr.ttistable(),"table expected");let tn=new tZ(tT,q),ti=h.stack[h.top-1];tW.luaH_setfrom(h,tr.value,tn,ti),delete h.stack[--h.top]},h.exports.lua_register=function(h,w,q){le(h,q),Re(h,w)},h.exports.lua_remove=function(h,w){F(h,w,-1),ht(h,1)},h.exports.lua_replace=function(h,w){_t(h,-1,w),ht(h,1)},h.exports.lua_rotate=F,h.exports.lua_setallocf=function(){return console.warn("lua_setallocf is not available"),0},h.exports.lua_setfield=function(h,w,q){Le(h,et(h,w),q)},h.exports.lua_setglobal=Re,h.exports.lua_seti=function(h,w,q){Zt(q),It(h,1);let tr=et(h,w);h.stack[h.top]=new tZ(tL,q),rt(h),tY.settable(h,tr,h.stack[h.top-1],h.stack[h.top-2]),delete h.stack[--h.top],delete h.stack[--h.top]},h.exports.lua_setmetatable=function(h,w){let q;It(h,1);let tr=et(h,w);switch(h.stack[h.top-1].ttisnil()?q=null:(tU(h,h.stack[h.top-1].ttistable(),"table expected"),q=h.stack[h.top-1].value),tr.ttnov()){case tR:case tI:tr.value.metatable=q;break;default:h.l_G.mt[tr.ttnov()]=q}return delete h.stack[--h.top],!0},h.exports.lua_settable=function(h,w){It(h,2);let q=et(h,w);tY.settable(h,q,h.stack[h.top-2],h.stack[h.top-1]),delete h.stack[--h.top],delete h.stack[--h.top]},h.exports.lua_settop=k,h.exports.lua_setupvalue=function(h,w,q){let tr=et(h,w);It(h,1);let tn=Ft(0,tr,q);if(tn){let w=tn.name;return tn.val.setfrom(h.stack[h.top-1]),delete h.stack[--h.top],w}return null},h.exports.lua_setuservalue=function(h,w){It(h,1);let q=et(h,w);tU(h,q.ttisfulluserdata(),"full userdata expected"),q.value.uservalue.setfrom(h.stack[h.top-1]),delete h.stack[--h.top]},h.exports.lua_status=function(h){return h.status},h.exports.lua_stringtonumber=function(h,w){let q=new tZ,tr=tj.luaO_str2num(w,q);return 0!==tr&&(h.stack[h.top]=q,rt(h)),tr},h.exports.lua_toboolean=function(h,w){return!et(h,w).l_isfalse()},h.exports.lua_tocfunction=function(h,w){let q=et(h,w);return q.ttislcf()||q.ttisCclosure()?q.value:null},h.exports.lua_todataview=function(h,w){let q=Dt(h,w);return new DataView(q.buffer,q.byteOffset,q.byteLength)},h.exports.lua_tointeger=function(h,w){let q=Tt(h,w);return!1===q?0:q},h.exports.lua_tointegerx=Tt,h.exports.lua_tojsstring=function(h,w){let q=et(h,w);if(!q.ttisstring()){if(!tY.cvt2str(q))return null;tj.luaO_tostring(h,q)}return q.jsstring()},h.exports.lua_tolstring=Dt,h.exports.lua_tonumber=function(h,w){let q=Lt(h,w);return!1===q?0:q},h.exports.lua_tonumberx=Lt,h.exports.lua_topointer=function(h,w){let q=et(h,w);switch(q.ttype()){case tI:case tx:case ty:case tb:case tP:case tR:case tT:return q.value;default:return null}},h.exports.lua_toproxy=function(h,w){var q,tr,tn;let ti,to=et(h,w);return q=h.l_G,tr=to.type,tn=to.value,ti=function(h){tU(h,h instanceof tG.lua_State&&q===h.l_G,"must be from same global state"),h.stack[h.top]=new tZ(tr,tn),rt(h)},tQ.set(ti,q),ti},h.exports.lua_tostring=Dt,h.exports.lua_tothread=function(h,w){let q=et(h,w);return q.ttisthread()?q.value:null},h.exports.lua_touserdata=function(h,w){let q=et(h,w);switch(q.ttnov()){case tR:return q.value.data;case tT:return q.value;default:return null}},h.exports.lua_type=ve,h.exports.lua_typename=function(h,w){return tU(h,tO<=w&&w<td,"invalid tag"),tz.ttypename(w)},h.exports.lua_upvalueid=function(h,w,q){let tr=et(h,w);switch(tr.ttype()){case tx:{let tr=be(h,w,q);return tr.f.upvals[tr.i]}case ty:{let w=tr.value;return tU(h,(0|q)===q&&q>0&&q<=w.nupvalues,"invalid upvalue index"),w.upvalue[q-1]}default:return tU(h,!1,"closure expected"),null}},h.exports.lua_upvaluejoin=function(h,w,q,tr,tn){let ti=be(h,w,q),to=be(h,tr,tn),ts=to.f.upvals[to.i];ti.f.upvals[ti.i]=ts},h.exports.lua_version=function(h){return null===h?tp:h.l_G.version},h.exports.lua_xmove=function(h,w,q){if(h!==w){It(h,q),tU(h,h.l_G===w.l_G,"moving among independent states"),tU(h,w.ci.top-w.top>=q,"stack overflow"),h.top-=q;for(let tr=0;tr<q;tr++)w.stack[w.top]=new tj.TValue,tj.setobj2s(w,w.top,h.stack[h.top+tr]),delete h.stack[h.top+tr],w.top++}}},function(h,w,q){let{lua_assert:tr}=q(4),i=function(h){let w=h.reader(h.L,h.data);if(null===w)return -1;tr(w instanceof Uint8Array,"Should only load binary of array of bytes");let q=w.length;return 0===q?-1:(h.buffer=w,h.off=0,h.n=q-1,h.buffer[h.off++])};h.exports.EOZ=-1,h.exports.luaZ_buffer=function(h){return h.buffer.subarray(0,h.n)},h.exports.luaZ_buffremove=function(h,w){h.n-=w},h.exports.luaZ_fill=i,h.exports.luaZ_read=function(h,w,q,tr){for(;tr;){if(0===h.n){if(-1===i(h))return tr;h.n++,h.off--}let tn=tr<=h.n?tr:h.n;for(let tr=0;tr<tn;tr++)w[q++]=h.buffer[h.off++];h.n-=tn,0===h.n&&(h.buffer=null),tr-=tn}return 0},h.exports.luaZ_resetbuffer=function(h){h.n=0},h.exports.luaZ_resizebuffer=function(h,w,q){let tr=new Uint8Array(q);w.buffer&&tr.set(w.buffer),w.buffer=tr},h.exports.MBuffer=class{constructor(){this.buffer=null,this.n=0}},h.exports.ZIO=class{constructor(h,w,q){this.L=h,tr("function"==typeof w,"ZIO requires a reader"),this.reader=w,this.data=q,this.n=0,this.buffer=null,this.off=0}zgetc(){return this.n-- >0?this.buffer[this.off++]:i(this)}}},function(h,w,q){let{constant_types:{LUA_TBOOLEAN:tr,LUA_TLNGSTR:tn},thread_status:{LUA_ERRSYNTAX:ti},to_luastring:to}=q(1),{LUA_MINBUFFER:ts,MAX_INT:tu,lua_assert:tl}=q(4),tc=q(11),tp=q(8),{lisdigit:td,lislalnum:tm,lislalpha:ty,lisspace:tv,lisxdigit:tb}=q(22),tx=q(6),{luaS_bless:tT,luaS_hash:tE,luaS_hashlongstr:tA,luaS_new:tO}=q(10),tw=q(9),{EOZ:tL,luaZ_buffer:tS,luaZ_buffremove:tI,luaZ_resetbuffer:tP,luaZ_resizebuffer:tR}=q(19),tN=to("_ENV",!0),tM=["and","break","do","else","elseif","end","false","for","function","goto","if","in","local","nil","not","or","repeat","return","then","true","until","while","//","..","...","==",">=","<=","~=","<<",">>","::","<eof>","<number>","<integer>","<name>","<string>"].map((h,w)=>to(h));let H=class H{constructor(){this.r=NaN,this.i=NaN,this.ts=null}};let $=class ${constructor(){this.token=NaN,this.seminfo=new H}};let lt=function(h,w){let q=h.buff;if(q.n+1>q.buffer.length){q.buffer.length>=tu/2&&Jt(h,to("lexical element too long",!0),0);let w=2*q.buffer.length;tR(h.L,q,w)}q.buffer[q.n++]=w<0?255+w+1:w},dt=function(h,w){if(w<257)return tx.luaO_pushfstring(h.L,to("'%c'",!0),w);{let q=tM[w-257];return w<289?tx.luaO_pushfstring(h.L,to("'%s'",!0),q):q}},Vt=function(h){return 10===h.current||13===h.current},S=function(h){h.current=h.z.zgetc()},U=function(h){lt(h,h.current),S(h)},tk=new tx.TValue(tr,!0),pt=function(h,w){let q=h.L,tr=tO(q,w),ti=h.h.strong.get(tA(tr));if(ti)tr=ti.key.tsvalue();else{let w=new tx.TValue(tn,tr);tw.luaH_setfrom(q,h.h,w,tk)}return tr},ut=function(h){let w=h.current;tl(Vt(h)),S(h),Vt(h)&&h.current!==w&&S(h),++h.linenumber>=tu&&Jt(h,to("chunk has too many lines",!0),0)},qt=function(h,w){return h.current===w&&(S(h),!0)},Ct=function(h,w){return(h.current===w[0].charCodeAt(0)||h.current===w[1].charCodeAt(0))&&(U(h),!0)},kt=function(h,w){let q="Ee",tr=h.current;for(tl(td(h.current)),U(h),48===tr&&Ct(h,"xX")&&(q="Pp");;)if(Ct(h,q)&&Ct(h,"-+"),tb(h.current))U(h);else{if(46!==h.current)break;U(h)}let tn=new tx.TValue;return 0===tx.luaO_str2num(tS(h.buff),tn)&&Jt(h,to("malformed number",!0),290),tn.ttisinteger()?(w.i=tn.value,291):(tl(tn.ttisfloat()),w.r=tn.value,290)},Jt=function(h,w,q){w=tc.luaG_addinfo(h.L,w,h.source,h.linenumber),q&&tx.luaO_pushfstring(h.L,to("%s near %s"),w,function(h,w){switch(w){case 292:case 293:case 290:case 291:return tx.luaO_pushfstring(h.L,to("'%s'",!0),tS(h.buff));default:return dt(h,w)}}(h,q)),tp.luaD_throw(h.L,ti)},J=function(h){let w=0,q=h.current;for(tl(91===q||93===q),U(h);61===h.current;)U(h),w++;return h.current===q?w:-w-1},Z=function(h,w,q){let tr=h.linenumber;U(h),Vt(h)&&ut(h);let tn=!1;for(;!tn;)switch(h.current){case tL:Jt(h,to(`unfinished long ${w?"string":"comment"} (starting at line ${tr})`),289);break;case 93:J(h)===q&&(U(h),tn=!0);break;case 10:case 13:lt(h,10),ut(h),w||tP(h.buff);break;default:w?U(h):S(h)}w&&(w.ts=pt(h,h.buff.buffer.subarray(2+q,h.buff.n-(2+q))))},xt=function(h,w,q){w||(h.current!==tL&&U(h),Jt(h,q,293))},rt=function(h){return U(h),xt(h,tb(h.current),to("hexadecimal digit expected",!0)),tx.luaO_hexavalue(h.current)},It=function(h){let w=rt(h);return w=(w<<4)+rt(h),tI(h.buff,2),w},ee=function(h){let w=new Uint8Array(tx.UTF8BUFFSZ),q=tx.luaO_utf8esc(w,function(h){let w=4;U(h),xt(h,123===h.current,to("missing '{'",!0));let q=rt(h);for(U(h);tb(h.current);)w++,q=(q<<4)+tx.luaO_hexavalue(h.current),xt(h,q<=1114111,to("UTF-8 value too large",!0)),U(h);return xt(h,125===h.current,to("missing '}'",!0)),S(h),tI(h.buff,w),q}(h));for(;q>0;q--)lt(h,w[tx.UTF8BUFFSZ-q])},Zt=function(h){let w,q=0;for(w=0;w<3&&td(h.current);w++)q=10*q+h.current-48,U(h);return xt(h,q<=255,to("decimal escape too large",!0)),tI(h.buff,w),q},Ut=function(h,w,q){for(U(h);h.current!==w;)switch(h.current){case tL:Jt(h,to("unfinished string",!0),289);break;case 10:case 13:Jt(h,to("unfinished string",!0),293);break;case 92:{let w,q;switch(U(h),h.current){case 97:q=7,w="read_save";break;case 98:q=8,w="read_save";break;case 102:q=12,w="read_save";break;case 110:q=10,w="read_save";break;case 114:q=13,w="read_save";break;case 116:q=9,w="read_save";break;case 118:q=11,w="read_save";break;case 120:q=It(h),w="read_save";break;case 117:ee(h),w="no_save";break;case 10:case 13:ut(h),q=10,w="only_save";break;case 92:case 34:case 39:q=h.current,w="read_save";break;case tL:w="no_save";break;case 122:for(tI(h.buff,1),S(h);tv(h.current);)Vt(h)?ut(h):S(h);w="no_save";break;default:xt(h,td(h.current),to("invalid escape sequence",!0)),q=Zt(h),w="only_save"}"read_save"===w&&S(h),"read_save"!==w&&"only_save"!==w||(tI(h.buff,1),lt(h,q));break}default:U(h)}U(h),q.ts=pt(h,h.buff.buffer.subarray(1,h.buff.n-1))},tU=Object.create(null);tM.forEach((h,w)=>tU[tE(h)]=w);let Et=function(h,w){for(tP(h.buff);;)switch(tl("number"==typeof h.current),h.current){case 10:case 13:ut(h);break;case 32:case 12:case 9:case 11:S(h);break;case 45:if(S(h),45!==h.current)return 45;if(S(h),91===h.current){let w=J(h);if(tP(h.buff),w>=0){Z(h,null,w),tP(h.buff);break}}for(;!Vt(h)&&h.current!==tL;)S(h);break;case 91:{let q=J(h);return q>=0?(Z(h,w,q),293):(-1!==q&&Jt(h,to("invalid long string delimiter",!0),293),91)}case 61:return S(h),qt(h,61)?282:61;case 60:return S(h),qt(h,61)?284:qt(h,60)?286:60;case 62:return S(h),qt(h,61)?283:qt(h,62)?287:62;case 47:return S(h),qt(h,47)?279:47;case 126:return S(h),qt(h,61)?285:126;case 58:return S(h),qt(h,58)?288:58;case 34:case 39:return Ut(h,h.current,w),293;case 46:return U(h),qt(h,46)?qt(h,46)?281:280:td(h.current)?kt(h,w):46;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return kt(h,w);case tL:return 289;default:if(ty(h.current)){do U(h);while(tm(h.current));let q=pt(h,tS(h.buff));w.ts=q;let tr=tU[tA(q)];return void 0!==tr&&tr<=22?tr+257:292}{let w=h.current;return S(h),w}}};h.exports.FIRST_RESERVED=257,h.exports.LUA_ENV=tN,h.exports.LexState=class{constructor(){this.current=NaN,this.linenumber=NaN,this.lastline=NaN,this.t=new $,this.lookahead=new $,this.fs=null,this.L=null,this.z=null,this.buff=null,this.h=null,this.dyd=null,this.source=null,this.envn=null}},h.exports.RESERVED={TK_AND:257,TK_BREAK:258,TK_DO:259,TK_ELSE:260,TK_ELSEIF:261,TK_END:262,TK_FALSE:263,TK_FOR:264,TK_FUNCTION:265,TK_GOTO:266,TK_IF:267,TK_IN:268,TK_LOCAL:269,TK_NIL:270,TK_NOT:271,TK_OR:272,TK_REPEAT:273,TK_RETURN:274,TK_THEN:275,TK_TRUE:276,TK_UNTIL:277,TK_WHILE:278,TK_IDIV:279,TK_CONCAT:280,TK_DOTS:281,TK_EQ:282,TK_GE:283,TK_LE:284,TK_NE:285,TK_SHL:286,TK_SHR:287,TK_DBCOLON:288,TK_EOS:289,TK_FLT:290,TK_INT:291,TK_NAME:292,TK_STRING:293},h.exports.isreserved=function(h){let w=tU[tA(h)];return void 0!==w&&w<=22},h.exports.luaX_lookahead=function(h){return tl(289===h.lookahead.token),h.lookahead.token=Et(h,h.lookahead.seminfo),h.lookahead.token},h.exports.luaX_newstring=pt,h.exports.luaX_next=function(h){h.lastline=h.linenumber,289!==h.lookahead.token?(h.t.token=h.lookahead.token,h.t.seminfo.i=h.lookahead.seminfo.i,h.t.seminfo.r=h.lookahead.seminfo.r,h.t.seminfo.ts=h.lookahead.seminfo.ts,h.lookahead.token=289):h.t.token=Et(h,h.t.seminfo)},h.exports.luaX_setinput=function(h,w,q,tr,tn){w.t={token:0,seminfo:new H},w.L=h,w.current=tn,w.lookahead={token:289,seminfo:new H},w.z=q,w.fs=null,w.linenumber=1,w.lastline=1,w.source=tr,w.envn=tT(h,tN),tR(h,w.buff,ts)},h.exports.luaX_syntaxerror=function(h,w){Jt(h,w,h.t.token)},h.exports.luaX_token2str=dt,h.exports.luaX_tokens=tM},function(h,w,q){let tr,tn,ti;let{lua:to,lauxlib:ts,lualib:tu,to_luastring:tl}=q(0),{LUA_MULTRET:tc,LUA_OK:tp,LUA_REGISTRYINDEX:td,LUA_RIDX_MAINTHREAD:tm,LUA_TBOOLEAN:ty,LUA_TFUNCTION:tv,LUA_TLIGHTUSERDATA:tb,LUA_TNIL:tx,LUA_TNONE:tT,LUA_TNUMBER:tE,LUA_TSTRING:tA,LUA_TTABLE:tO,LUA_TTHREAD:tw,LUA_TUSERDATA:tL,lua_atnativeerror:tS,lua_call:tI,lua_getfield:tP,lua_gettable:tR,lua_gettop:tN,lua_isnil:tM,lua_isproxy:tk,lua_newuserdata:tU,lua_pcall:tC,lua_pop:tD,lua_pushboolean:tF,lua_pushcfunction:tB,lua_pushinteger:tj,lua_pushlightuserdata:tG,lua_pushliteral:tV,lua_pushnil:tX,lua_pushnumber:tH,lua_pushstring:tz,lua_pushvalue:tK,lua_rawgeti:tY,lua_rawgetp:tW,lua_rawsetp:tq,lua_rotate:tZ,lua_setfield:tJ,lua_settable:tQ,lua_settop:t$,lua_toboolean:t0,lua_tojsstring:t1,lua_tonumber:t2,lua_toproxy:t3,lua_tothread:t4,lua_touserdata:t5,lua_type:t6}=to,{luaL_argerror:t8,luaL_checkany:t7,luaL_checkoption:t9,luaL_checkstack:er,luaL_checkudata:en,luaL_error:ei,luaL_getmetafield:eo,luaL_newlib:es,luaL_newmetatable:eu,luaL_requiref:el,luaL_setfuncs:ep,luaL_setmetatable:ed,luaL_testudata:e_,luaL_tolstring:eg}=ts,{luaopen_base:em}=tu,ey="u">typeof window?window:"u">typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:(0,eval)("this");if("u">typeof Reflect)tr=Reflect.apply,tn=Reflect.construct,ti=Reflect.deleteProperty;else{let h=Function.apply,w=Function.bind;tr=function(w,q,tr){return h.call(w,q,tr)},tn=function(h,q){switch(q.length){case 0:return new h;case 1:return new h(q[0]);case 2:return new h(q[0],q[1]);case 3:return new h(q[0],q[1],q[2]);case 4:return new h(q[0],q[1],q[2],q[3])}let tr=[null];return tr.push.apply(tr,q),new(w.apply(h,tr))},ti=Function("t","k","delete t[k]")}let ev=String.prototype.concat.bind(""),Kt=function(h){return"object"==typeof h?null!==h:"function"==typeof h},eb=tl("js object"),ve=function(h,w){let q=e_(h,w,eb);return q?q.data:void 0},xe=function(h,w){return en(h,w,eb).data},Ue=function(h,w){tU(h).data=w,ed(h,eb)},ne=function(h){tY(h,td,tm);let w=t4(h,-1);return tD(h,1),w},ex=new WeakMap,be=function(h,w){switch(typeof w){case"undefined":tX(h);break;case"number":tH(h,w);break;case"string":tz(h,tl(w));break;case"boolean":tF(h,w);break;case"symbol":tG(h,w);break;case"function":if(tk(w,h)){w(h);break}case"object":if(null===w){if(tW(h,td,null)!==tL)throw Error("js library not loaded into lua_State");break}default:{let q=ex.get(ne(h));if(!q)throw Error("js library not loaded into lua_State");let tr=q.get(w);tr?tr(h):(Ue(h,w),tr=t3(h,-1),q.set(w,tr))}}},c=function(h){let w=t5(h,1);return be(h,w),1},p=function(h,w){switch(t6(h,w)){case tT:case tx:return;case ty:return t0(h,w);case tb:return t5(h,w);case tE:return t2(h,w);case tA:return t1(h,w);case tL:{let q=ve(h,w);if(void 0!==q)return q}default:return ye(h,t3(h,w))}},b=function(h,w){let q=tC(h,w,1,0),tr=p(h,-1);if(tD(h,1),q===tp)return tr;throw tr},_=function(h,w,q,tr,tn){if(!Kt(tr))throw TypeError("`args` argument must be an object");let ti=+tr.length;ti>=0||(ti=0),er(h,2+ti,null);let to=tN(h);w(h),be(h,q);for(let w=0;w<ti;w++)be(h,tr[w]);if(tC(h,1+ti,tn,0)===tp){let w=tN(h)-to,q=Array(w);for(let tr=0;tr<w;tr++)q[tr]=p(h,to+tr+1);return t$(h,to),q}{let w=p(h,-1);throw t$(h,to),w}},x=function(h){return tR(h,1),1},N=function(h,w,q){return er(h,3,null),tB(h,x),w(h),be(h,q),b(h,2)},A=function(h,w,q){if(er(h,3,null),tB(h,x),w(h),be(h,q),tC(h,2,1,0)===tp){let w=tM(h,-1);return tD(h,1),!w}{let w=p(h,-1);throw tD(h,1),w}},Q=function(h,w,q,tr){if(er(h,4,null),tB(h,function(h){return tQ(h,1),0}),w(h),be(h,q),be(h,tr),tC(h,3,0,0)!==tp){let w=p(h,-1);throw tD(h,1),w}},Mt=function(h,w,q){if(er(h,4,null),tB(h,function(h){return tQ(h,1),0}),w(h),be(h,q),tX(h),tC(h,3,0,0)!==tp){let w=p(h,-1);throw tD(h,1),w}},Wt=function(h,w){return er(h,2,null),tB(h,function(h){return eg(h,1),1}),w(h),b(h,1)},ge=function(){let h=this.L;er(h,3,null);let w=tN(h);if(this.iter(h),this.state(h),this.last(h),tC(h,2,tc,0)===tp){let q;if(this.last=t3(h,w+1),tM(h,-1))q={done:!0,value:void 0};else{let tr=tN(h)-w,tn=Array(tr);for(let q=0;q<tr;q++)tn[q]=p(h,w+q+1);q={done:!1,value:tn}}return t$(h,w),q}{let w=p(h,-1);throw tD(h,1),w}},ye=function(h,w){let q=ne(h),zt=function(){return _(q,w,this,arguments,1)[0]};zt.apply=function(h,tr){return _(q,w,h,tr,1)[0]},zt.invoke=function(h,tr){return _(q,w,h,tr,tc)},zt.get=function(h){return N(q,w,h)},zt.has=function(h){return A(q,w,h)},zt.set=function(h,tr){return Q(q,w,h,tr)},zt.delete=function(h){return Mt(q,w,h)},zt.toString=function(){return Wt(q,w)},"function"==typeof Symbol&&(zt[Symbol.toStringTag]="Fengari object",zt[Symbol.iterator]=function(){return function(h,w){if(er(h,1,null),tB(h,function(h){return el(h,tl("_G"),em,0),tP(h,-1,tl("pairs")),w(h),tI(h,1,3),3}),tC(h,0,3,0)===tp){let w=t3(h,-3),q=t3(h,-2),tr=t3(h,-1);return tD(h,3),{L:h,iter:w,state:q,last:tr,next:ge}}{let w=p(h,-1);throw tD(h,1),w}}(q,w)},Symbol.toPrimitive&&(zt[Symbol.toPrimitive]=function(h){if("string"===h)return Wt(q,w)}));let tr=ex.get(q);if(!tr)throw Error("js library not loaded into lua_State");return tr.set(zt,w),zt},eT={new:function(h){let w=p(h,1),q=tN(h)-1,tr=Array(q);for(let w=0;w<q;w++)tr[w]=p(h,w+2);return be(h,tn(w,tr)),1},tonumber:function(h){let w=p(h,1);return tH(h,+w),1},tostring:function(h){let w=p(h,1);return tV(h,ev(w)),1},instanceof:function(h){let w=p(h,1),q=p(h,2);return tF(h,w instanceof q),1},typeof:function(h){let w=p(h,1);return tV(h,typeof w),1}};if("function"==typeof Symbol&&Symbol.iterator){let D=function(h,w){let q=xe(h,w),tn=q[Symbol.iterator];tn||t8(h,w,tl("object not iterable"));let ti=tr(tn,q,[]);return Kt(ti)||t8(h,w,tl("Result of the Symbol.iterator method is not an object")),ti},bt=function(h){let w=p(h,1).next();return w.done?0:(be(h,w.value),1)};eT.of=function(h){let w=D(h,1);return tB(h,bt),be(h,w),2}}if("function"==typeof Proxy&&"function"==typeof Symbol){let h=Symbol("lua_State"),w=Symbol("fengari-proxy"),q={apply:function(q,tr,tn){return _(q[h],q[w],tr,tn,1)[0]},construct:function(q,tr){let tn=q[h],ti=q[w],to=tr.length;er(tn,2+to,null),ti(tn);let ts=tN(tn);if(eo(tn,ts,tl("construct"))===tx)throw tD(tn,1),TypeError("not a constructor");tZ(tn,ts,1);for(let h=0;h<to;h++)be(tn,tr[h]);return b(tn,1+to)},defineProperty:function(q,tr,tn){let ti=q[h],to=q[w];return er(ti,4,null),to(ti),eo(ti,-1,tl("defineProperty"))===tx?(tD(ti,1),!1):(tZ(ti,-2,1),be(ti,tr),be(ti,tn),b(ti,3))},deleteProperty:function(q,tr){return Mt(q[h],q[w],tr)},get:function(q,tr){return N(q[h],q[w],tr)},getOwnPropertyDescriptor:function(q,tr){let tn=q[h],ti=q[w];if(er(tn,3,null),ti(tn),eo(tn,-1,tl("getOwnPropertyDescriptor"))!==tx)return tZ(tn,-2,1),be(tn,tr),b(tn,2);tD(tn,1)},getPrototypeOf:function(q){let tr=q[h],tn=q[w];return er(tr,2,null),tn(tr),eo(tr,-1,tl("getPrototypeOf"))===tx?(tD(tr,1),null):(tZ(tr,-2,1),b(tr,1))},has:function(q,tr){return A(q[h],q[w],tr)},ownKeys:function(q){let tr=q[h],tn=q[w];if(er(tr,2,null),tn(tr),eo(tr,-1,tl("ownKeys"))===tx)throw tD(tr,1),Error("ownKeys unknown for fengari object");return tZ(tr,-2,1),b(tr,1)},set:function(q,tr,tn){return Q(q[h],q[w],tr,tn),!0},setPrototypeOf:function(q,tr){let tn=q[h],ti=q[w];return er(tn,3,null),ti(tn),eo(tn,-1,tl("setPrototypeOf"))===tx?(tD(tn,1),!1):(tZ(tn,-2,1),be(tn,tr),b(tn,2))}},zt=function(){let h=(function(){}).bind();return delete h.length,delete h.name,h},tr=Function("return ()=>void 0;"),fe=function(){let h=tr();return delete h.length,delete h.name,h},ae=function(tr,tn,ti){let to;let ts=ne(tr);switch(ti){case"function":to=zt();break;case"arrow_function":to=fe();break;case"object":to={};break;default:throw TypeError("invalid type to createproxy")}return to[w]=tn,to[h]=ts,new Proxy(to,q)},tn=["function","arrow_function","object"],ti=tn.map(h=>tl(h));eT.createproxy=function(h){t7(h,1);let w=tn[t9(h,2,ti[0],ti)],q=ae(h,t3(h,1),w);return be(h,q),1}}let eE={__index:function(h){let w=xe(h,1),q=p(h,2);return be(h,w[q]),1},__newindex:function(h){let w=xe(h,1),q=p(h,2),tr=p(h,3);return void 0===tr?ti(w,q):w[q]=tr,0},__tostring:function(h){let w=ev(xe(h,1));return tz(h,tl(w)),1},__call:function(h){let w,q=xe(h,1),tn=tN(h)-1,ti=Array(Math.max(0,tn-1));if(tn>0&&(w=p(h,2),tn-- >0))for(let w=0;w<tn;w++)ti[w]=p(h,w+3);return be(h,tr(q,w,ti)),1},__pairs:function(h){let w,q,tn,ti,to=xe(h,1);if("function"!=typeof Symbol||void 0===(w=to[Symbol.for("__pairs")]))q=function(h){if(this.index>=this.keys.length)return;let w=this.keys[this.index++];return[w,this.object[w]]},tn={object:to,keys:Object.keys(to),index:0};else{let ts=tr(w,to,[]);void 0===ts&&ei(h,tl("bad '__pairs' result (object with keys 'iter', 'state', 'first' expected)")),void 0===(q=ts.iter)&&ei(h,tl("bad '__pairs' result (object.iter is missing)")),tn=ts.state,ti=ts.first}return tB(h,function(){let w=p(h,1),tn=p(h,2),ti=tr(q,w,[tn]);if(void 0===ti)return 0;Array.isArray(ti)||ei(h,tl("bad iterator result (Array or undefined expected)")),er(h,ti.length,null);for(let w=0;w<ti.length;w++)be(h,ti[w]);return ti.length}),be(h,tn),be(h,ti),3},__len:function(h){let w,q=xe(h,1);return be(h,"function"!=typeof Symbol||void 0===(w=q[Symbol.for("__len")])?q.length:tr(w,q,[])),1}};h.exports.FENGARI_INTEROP_VERSION="0.1",h.exports.FENGARI_INTEROP_VERSION_NUM=1,h.exports.FENGARI_INTEROP_RELEASE="0.1.2",h.exports.checkjs=xe,h.exports.testjs=ve,h.exports.pushjs=Ue,h.exports.push=be,h.exports.tojs=p,h.exports.luaopen_js=function(h){return ex.set(ne(h),new WeakMap),tS(h,c),es(h,eT),tV(h,"0.1"),tJ(h,-2,tl("_VERSION")),tj(h,1),tJ(h,-2,tl("_VERSION_NUM")),tV(h,"0.1.2"),tJ(h,-2,tl("_RELEASE")),eu(h,eb),ep(h,eE,0),tD(h,1),Ue(h,null),tK(h,-1),tq(h,td,null),tJ(h,-2,tl("null")),be(h,ey),tJ(h,-2,tl("global")),1}},function(h,w,q){let{luastring_of:tr}=q(1),tn=tr(0,0,0,0,0,0,0,0,0,0,8,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,22,22,22,22,22,22,22,22,22,22,4,4,4,4,4,4,4,21,21,21,21,21,21,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,4,4,4,5,4,21,21,21,21,21,21,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);h.exports.lisdigit=function(h){return(2&tn[h+1])!=0},h.exports.lislalnum=function(h){return(3&tn[h+1])!=0},h.exports.lislalpha=function(h){return(1&tn[h+1])!=0},h.exports.lisprint=function(h){return(4&tn[h+1])!=0},h.exports.lisspace=function(h){return(8&tn[h+1])!=0},h.exports.lisxdigit=function(h){return(16&tn[h+1])!=0}},function(h,w,q){let{LUA_MULTRET:tr,to_luastring:tn}=q(1),{BinOpr:{OPR_ADD:ti,OPR_AND:to,OPR_BAND:ts,OPR_BOR:tu,OPR_BXOR:tl,OPR_CONCAT:tc,OPR_DIV:tp,OPR_EQ:td,OPR_GE:tm,OPR_GT:ty,OPR_IDIV:tv,OPR_LE:tb,OPR_LT:tx,OPR_MOD:tT,OPR_MUL:tE,OPR_NE:tA,OPR_NOBINOPR:tO,OPR_OR:tw,OPR_POW:tL,OPR_SHL:tS,OPR_SHR:tI,OPR_SUB:tP},UnOpr:{OPR_BNOT:tR,OPR_LEN:tN,OPR_MINUS:tM,OPR_NOT:tk,OPR_NOUNOPR:tU},NO_JUMP:tC,getinstruction:tD,luaK_checkstack:tF,luaK_codeABC:tB,luaK_codeABx:tj,luaK_codeAsBx:tG,luaK_codek:tV,luaK_concat:tX,luaK_dischargevars:tH,luaK_exp2RK:tz,luaK_exp2anyreg:tK,luaK_exp2anyregup:tY,luaK_exp2nextreg:tW,luaK_exp2val:tq,luaK_fixline:tZ,luaK_getlabel:tJ,luaK_goiffalse:tQ,luaK_goiftrue:t$,luaK_indexed:t0,luaK_infix:t1,luaK_intK:t2,luaK_jump:t3,luaK_jumpto:t4,luaK_nil:t5,luaK_patchclose:t6,luaK_patchlist:t8,luaK_patchtohere:t7,luaK_posfix:t9,luaK_prefix:er,luaK_reserveregs:en,luaK_ret:ei,luaK_self:eo,luaK_setlist:es,luaK_setmultret:eu,luaK_setoneret:el,luaK_setreturns:ep,luaK_storevar:ed,luaK_stringK:e_}=q(35),eg=q(8),em=q(13),ey=q(20),{LUAI_MAXCCALLS:ev,MAX_INT:eb,lua_assert:ex}=q(4),eT=q(6),{OpCodesI:{OP_CALL:eE,OP_CLOSURE:eO,OP_FORLOOP:eL,OP_FORPREP:eS,OP_GETUPVAL:eI,OP_MOVE:eP,OP_NEWTABLE:eR,OP_SETTABLE:eN,OP_TAILCALL:eM,OP_TFORCALL:ek,OP_TFORLOOP:eU,OP_VARARG:eC},LFIELDS_PER_FLUSH:eD,SETARG_B:eF,SETARG_C:eB,SET_OPCODE:ej}=q(16),{luaS_eqlngstr:eG,luaS_new:eV,luaS_newliteral:eX}=q(10),eH=q(9),ez=em.Proto,eK=ey.RESERVED,zt=function(h){return h===eY.VCALL||h===eY.VVARARG},he=function(h,w){return eG(h,w)};let fe=class fe{constructor(){this.previous=null,this.firstlabel=NaN,this.firstgoto=NaN,this.nactvar=NaN,this.upval=NaN,this.isloop=NaN}};let eY={VVOID:0,VNIL:1,VTRUE:2,VFALSE:3,VK:4,VKFLT:5,VKINT:6,VNONRELOC:7,VLOCAL:8,VUPVAL:9,VINDEXED:10,VJMP:11,VRELOCABLE:12,VCALL:13,VVARARG:14};let Ae=class Ae{constructor(){this.k=NaN,this.u={ival:NaN,nval:NaN,info:NaN,ind:{idx:NaN,t:NaN,vt:NaN}},this.t=NaN,this.f=NaN}to(h){this.k=h.k,this.u=h.u,this.t=h.t,this.f=h.f}};let je=class je{constructor(){this.f=null,this.prev=null,this.ls=null,this.bl=null,this.pc=NaN,this.lasttarget=NaN,this.jpc=NaN,this.nk=NaN,this.np=NaN,this.firstlocal=NaN,this.nlocvars=NaN,this.nactvar=NaN,this.nups=NaN,this.freereg=NaN}};let de=class de{constructor(){this.arr=[],this.n=NaN,this.size=NaN}};let Oe=function(h,w){h.t.token=0,ey.luaX_syntaxerror(h,w)},Ee=function(h,w){ey.luaX_syntaxerror(h,eT.luaO_pushfstring(h.L,tn("%s expected",!0),ey.luaX_token2str(h,w)))},Ne=function(h,w,q,tr){let ti,to,ts,tu;w>q&&(ti=h.ls.L,ts=0===(to=h.f.linedefined)?tn("main function",!0):eT.luaO_pushfstring(ti,tn("function at line %d",!0),to),tu=eT.luaO_pushfstring(ti,tn("too many %s (limit is %d) in %s",!0),tr,q,ts),ey.luaX_syntaxerror(h.ls,tu))},ke=function(h,w){return h.t.token===w&&(ey.luaX_next(h),!0)},ir=function(h,w){h.t.token!==w&&Ee(h,w)},Be=function(h,w){ir(h,w),ey.luaX_next(h)},or=function(h,w,q){w||ey.luaX_syntaxerror(h,q)},Ze=function(h,w,q,tr){ke(h,w)||(tr===h.linenumber?Ee(h,w):ey.luaX_syntaxerror(h,eT.luaO_pushfstring(h.L,tn("%s expected (to close %s at line %d)"),ey.luaX_token2str(h,w),ey.luaX_token2str(h,q),tr)))},L=function(h){ir(h,eK.TK_NAME);let w=h.t.seminfo.ts;return ey.luaX_next(h),w},ot=function(h,w,q){h.f=h.t=tC,h.k=w,h.u.info=q},Gt=function(h,w,q){ot(w,eY.VK,e_(h.fs,q))},Ht=function(h,w){Gt(h,w,L(h))},te=function(h,w){let q,tr;let ti=h.fs,to=h.dyd,ts=((tr=(q=h.fs).f).locvars[q.nlocvars]=new eT.LocVar,tr.locvars[q.nlocvars].varname=w,q.nlocvars++);Ne(ti,to.actvar.n+1-ti.firstlocal,200,tn("local variables",!0)),to.actvar.arr[to.actvar.n]=new class{constructor(){this.idx=NaN}},to.actvar.arr[to.actvar.n].idx=ts,to.actvar.n++},Bt=function(h,w){te(h,ey.luaX_newstring(h,tn(w,!0)))},Xt=function(h,w){let q=h.ls.dyd.actvar.arr[h.firstlocal+w].idx;return ex(q<h.nlocvars),h.f.locvars[q]},Pt=function(h,w){let q=h.fs;for(q.nactvar=q.nactvar+w;w;w--)Xt(q,q.nactvar-w).startpc=q.pc},$t=function(h,w,q){let tr=h.f;return Ne(h,h.nups+1,em.MAXUPVAL,tn("upvalues",!0)),tr.upvalues[h.nups]={instack:q.k===eY.VLOCAL,idx:q.u.info,name:w},h.nups++},oe=function(h,w,q,tr){if(null===h)ot(q,eY.VVOID,0);else{let tn=function(h,w){for(let q=h.nactvar-1;q>=0;q--)if(he(w,Xt(h,q).varname))return q;return -1}(h,w);if(tn>=0)ot(q,eY.VLOCAL,tn),tr||function(h,w){let q=h.bl;for(;q.nactvar>w;)q=q.previous;q.upval=1}(h,tn);else{let tr=function(h,w){let q=h.f.upvalues;for(let tr=0;tr<h.nups;tr++)if(he(q[tr].name,w))return tr;return -1}(h,w);if(tr<0){if(oe(h.prev,w,q,0),q.k===eY.VVOID)return;tr=$t(h,w,q)}ot(q,eY.VUPVAL,tr)}}},m=function(h,w){let q=L(h),tr=h.fs;if(oe(tr,q,w,1),w.k===eY.VVOID){let tn=new Ae;oe(tr,h.envn,w,1),ex(w.k!==eY.VVOID),Gt(h,tn,q),t0(tr,w,tn)}},z=function(h,w,q,tr){let tn=h.fs,ti=w-q;if(zt(tr.k))++ti<0&&(ti=0),ep(tn,tr,ti),ti>1&&en(tn,ti-1);else if(tr.k!==eY.VVOID&&tW(tn,tr),ti>0){let h=tn.freereg;en(tn,ti),t5(tn,h,ti)}q>w&&(h.fs.freereg-=q-w)},X=function(h){let w=h.L;++w.nCcalls,Ne(h.fs,w.nCcalls,ev,tn("JS levels",!0))},ct=function(h){return h.L.nCcalls--},at=function(h,w,q){let tr=h.fs,ti=h.dyd.gt,to=ti.arr[w];if(ex(he(to.name,q.name)),to.nactvar<q.nactvar){let w=Xt(tr,to.nactvar).varname,q=eT.luaO_pushfstring(h.L,tn("<goto %s> at line %d jumps into the scope of local '%s'"),to.name.getstr(),to.line,w.getstr());Oe(h,q)}t8(tr,to.pc,q.pc);for(let h=w;h<ti.n-1;h++)ti.arr[h]=ti.arr[h+1];ti.n--},st=function(h,w){let q=h.fs.bl,tr=h.dyd,tn=tr.gt.arr[w];for(let ti=q.firstlabel;ti<tr.label.n;ti++){let to=tr.label.arr[ti];if(he(to.name,tn.name))return tn.nactvar>to.nactvar&&(q.upval||tr.label.n>q.firstlabel)&&t6(h.fs,tn.pc,to.nactvar),at(h,w,to),!0}return!1},ie=function(h,w,q,tr,tn){let ti=w.n;return w.arr[ti]=new class{constructor(){this.name=null,this.pc=NaN,this.line=NaN,this.nactvar=NaN}},w.arr[ti].name=q,w.arr[ti].line=tr,w.arr[ti].nactvar=h.fs.nactvar,w.arr[ti].pc=tn,w.n=ti+1,ti},pe=function(h,w){let q=h.dyd.gt,tr=h.fs.bl.firstgoto;for(;tr<q.n;)he(q.arr[tr].name,w.name)?at(h,tr,w):tr++},me=function(h,w,q){w.isloop=q,w.nactvar=h.nactvar,w.firstlabel=h.ls.dyd.label.n,w.firstgoto=h.ls.dyd.gt.n,w.upval=0,w.previous=h.bl,h.bl=w,ex(h.freereg===h.nactvar)},Ie=function(h,w,q){w.prev=h.fs,w.ls=h,h.fs=w,w.pc=0,w.lasttarget=0,w.jpc=tC,w.freereg=0,w.nk=0,w.np=0,w.nups=0,w.nlocvars=0,w.nactvar=0,w.firstlocal=h.dyd.actvar.n,w.bl=null;let tr=w.f;tr.source=h.source,tr.maxstacksize=2,me(w,q,!1)},E=function(h){var w;let q,tr,ti,to=h.bl,ts=h.ls;if(to.previous&&to.upval){let w=t3(h);t6(h,w,to.nactvar),t7(h,w)}to.isloop&&(q=eX(ts.L,"break"),tr=ie(ts,ts.dyd.label,q,0,ts.fs.pc),pe(ts,ts.dyd.label.arr[tr])),h.bl=to.previous,function(h,w){for(h.ls.dyd.actvar.n-=h.nactvar-w;h.nactvar>w;)Xt(h,--h.nactvar).endpc=h.pc}(h,to.nactvar),ex(to.nactvar===h.nactvar),h.freereg=h.nactvar,ts.dyd.label.n=to.firstlabel,to.previous?function(h,w){let q=w.firstgoto,tr=h.ls.dyd.gt;for(;q<tr.n;){let tn=tr.arr[q];tn.nactvar>w.nactvar&&(w.upval&&t6(h,tn.pc,w.nactvar),tn.nactvar=w.nactvar),st(h.ls,q)||q++}}(h,to):to.firstgoto<ts.dyd.gt.n&&(w=ts.dyd.gt.arr[to.firstgoto],ti=ey.isreserved(w.name)?"<%s> at line %d not inside a loop":"no visible label '%s' for <goto> at line %d",ti=eT.luaO_pushfstring(ts.L,tn(ti),w.name.getstr(),w.line),Oe(ts,ti))},j=function(h){let w=h.fs;ei(w,0,0),E(w),ex(null===w.bl),h.fs=w.prev},mt=function(h,w){switch(h.t.token){case eK.TK_ELSE:case eK.TK_ELSEIF:case eK.TK_END:case eK.TK_EOS:return!0;case eK.TK_UNTIL:return w;default:return!1}},Qt=function(h){for(;!mt(h,1);){if(h.t.token===eK.TK_RETURN)return void fi(h);fi(h)}},Te=function(h,w){let q=h.fs,tr=new Ae;tY(q,w),ey.luaX_next(h),Ht(h,tr),t0(q,w,tr)},Ce=function(h,w){ey.luaX_next(h),Ar(h,w),tq(h.fs,w),Be(h,93)},rr=function(h,w){let q=h.fs,tr=h.fs.freereg,ti=new Ae,to=new Ae;h.t.token===eK.TK_NAME?(Ne(q,w.nh,eb,tn("items in a constructor",!0)),Ht(h,ti)):Ce(h,ti),w.nh++,Be(h,61);let ts=tz(q,ti);Ar(h,to),tB(q,eN,w.t.u.info,ts,tz(q,to)),q.freereg=tr},Ur=function(h,w){w.v.k!==eY.VVOID&&(tW(h,w.v),w.v.k=eY.VVOID,w.tostore===eD&&(es(h,w.t.u.info,w.na,w.tostore),w.tostore=0))},Kr=function(h,w){Ar(h,w.v),Ne(h.fs,w.na,eb,tn("items in a constructor",!0)),w.na++,w.tostore++},Yr=function(h,w){switch(h.t.token){case eK.TK_NAME:61!==ey.luaX_lookahead(h)?Kr(h,w):rr(h,w);break;case 91:rr(h,w);break;default:Kr(h,w)}},br=function(h,w){let q=h.fs,tn=h.linenumber,ti=tB(q,eR,0,0,0),to=new class{constructor(){this.v=new Ae,this.t=new Ae,this.nh=NaN,this.na=NaN,this.tostore=NaN}};to.na=to.nh=to.tostore=0,to.t=w,ot(w,eY.VRELOCABLE,ti),ot(to.v,eY.VVOID,0),tW(h.fs,w),Be(h,123);do{if(ex(to.v.k===eY.VVOID||to.tostore>0),125===h.t.token)break;Ur(q,to),Yr(h,to)}while(ke(h,44)||ke(h,59));Ze(h,125,123,tn),0!==to.tostore&&(zt(to.v.k)?(eu(q,to.v),es(q,to.t.u.info,to.na,tr),to.na--):(to.v.k!==eY.VVOID&&tW(q,to.v),es(q,to.t.u.info,to.na,to.tostore))),eF(q.f.code[ti],eT.luaO_int2fb(to.na)),eB(q.f.code[ti],eT.luaO_int2fb(to.nh))},We=function(h,w,q,tr){let ti,to,ts,tu,tl=new je,tc=new fe;tl.f=(ti=h.L,to=new ez(ti),(ts=h.fs).f.p[ts.np++]=to,to),tl.f.linedefined=tr,Ie(h,tl,tc),Be(h,40),q&&(Bt(h,"self"),Pt(h,1)),function(h){let w=h.fs,q=w.f,tr=0;if(q.is_vararg=!1,41!==h.t.token)do switch(h.t.token){case eK.TK_NAME:te(h,L(h)),tr++;break;case eK.TK_DOTS:ey.luaX_next(h),q.is_vararg=!0;break;default:ey.luaX_syntaxerror(h,tn("<name> or '...' expected",!0))}while(!q.is_vararg&&ke(h,44));Pt(h,tr),q.numparams=w.nactvar,en(w,w.nactvar)}(h),Be(h,41),Qt(h),tl.f.lastlinedefined=h.linenumber,Ze(h,eK.TK_END,eK.TK_FUNCTION,tr),tu=h.fs.prev,ot(w,eY.VRELOCABLE,tj(tu,eO,0,tu.np-1)),tW(tu,w),j(h)},Tr=function(h,w){let q=1;for(Ar(h,w);ke(h,44);)tW(h.fs,w),Ar(h,w),q++;return q},qo=function(h,w,q){let ti,to=h.fs,ts=new Ae;switch(h.t.token){case 40:ey.luaX_next(h),41===h.t.token?ts.k=eY.VVOID:(Tr(h,ts),eu(to,ts)),Ze(h,41,40,q);break;case 123:br(h,ts);break;case eK.TK_STRING:Gt(h,ts,h.t.seminfo.ts),ey.luaX_next(h);break;default:ey.luaX_syntaxerror(h,tn("function arguments expected",!0))}ex(w.k===eY.VNONRELOC);let tu=w.u.info;zt(ts.k)?ti=tr:(ts.k!==eY.VVOID&&tW(to,ts),ti=to.freereg-(tu+1)),ot(w,eY.VCALL,tB(to,eE,tu,ti+1,2)),tZ(to,q),to.freereg=tu+1},li=function(h,w){let q=h.fs,tr=h.linenumber;for(!function(h,w){switch(h.t.token){case 40:{let q=h.linenumber;return ey.luaX_next(h),Ar(h,w),Ze(h,41,40,q),void tH(h.fs,w)}case eK.TK_NAME:return void m(h,w);default:ey.luaX_syntaxerror(h,tn("unexpected symbol",!0))}}(h,w);;)switch(h.t.token){case 46:Te(h,w);break;case 91:{let tr=new Ae;tY(q,w),Ce(h,tr),t0(q,w,tr);break}case 58:{let tn=new Ae;ey.luaX_next(h),Ht(h,tn),eo(q,w,tn),qo(h,w,tr);break}case 40:case eK.TK_STRING:case 123:tW(q,w),qo(h,w,tr);break;default:return}},eW=[{left:10,right:10},{left:10,right:10},{left:11,right:11},{left:11,right:11},{left:14,right:13},{left:11,right:11},{left:11,right:11},{left:6,right:6},{left:4,right:4},{left:5,right:5},{left:7,right:7},{left:7,right:7},{left:9,right:8},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:2,right:2},{left:1,right:1}],ci=function(h,w,q){X(h);let tr=function(h){switch(h){case eK.TK_NOT:return tk;case 45:return tM;case 126:return tR;case 35:return tN;default:return tU}}(h.t.token);if(tr!==tU){let q=h.linenumber;ey.luaX_next(h),ci(h,w,12),er(h.fs,tr,w,q)}else!function(h,w){switch(h.t.token){case eK.TK_FLT:ot(w,eY.VKFLT,0),w.u.nval=h.t.seminfo.r;break;case eK.TK_INT:ot(w,eY.VKINT,0),w.u.ival=h.t.seminfo.i;break;case eK.TK_STRING:Gt(h,w,h.t.seminfo.ts);break;case eK.TK_NIL:ot(w,eY.VNIL,0);break;case eK.TK_TRUE:ot(w,eY.VTRUE,0);break;case eK.TK_FALSE:ot(w,eY.VFALSE,0);break;case eK.TK_DOTS:{let q=h.fs;or(h,q.f.is_vararg,tn("cannot use '...' outside a vararg function",!0)),ot(w,eY.VVARARG,tB(q,eC,0,1,0));break}case 123:return void br(h,w);case eK.TK_FUNCTION:return ey.luaX_next(h),void We(h,w,0,h.linenumber);default:return void li(h,w)}ey.luaX_next(h)}(h,w);let tC=function(h){switch(h){case 43:return ti;case 45:return tP;case 42:return tE;case 37:return tT;case 94:return tL;case 47:return tp;case eK.TK_IDIV:return tv;case 38:return ts;case 124:return tu;case 126:return tl;case eK.TK_SHL:return tS;case eK.TK_SHR:return tI;case eK.TK_CONCAT:return tc;case eK.TK_NE:return tA;case eK.TK_EQ:return td;case 60:return tx;case eK.TK_LE:return tb;case 62:return ty;case eK.TK_GE:return tm;case eK.TK_AND:return to;case eK.TK_OR:return tw;default:return tO}}(h.t.token);for(;tC!==tO&&eW[tC].left>q;){let q=new Ae,tr=h.linenumber;ey.luaX_next(h),t1(h.fs,tC,w);let tn=ci(h,q,eW[tC].right);t9(h.fs,tC,w,q,tr),tC=tn}return ct(h),tC},Ar=function(h,w){ci(h,w,0)},An=function(h){let w=h.fs;me(w,new fe,0),Qt(h),E(w)};let Zo=class Zo{constructor(){this.prev=null,this.v=new Ae}};let Jo=function(h,w,q){var tr;let ti=new Ae;if(or(h,(tr=w.v.k,eY.VLOCAL<=tr&&tr<=eY.VINDEXED),tn("syntax error",!0)),ke(h,44)){let tr=new Zo;tr.prev=w,li(h,tr.v),tr.v.k!==eY.VINDEXED&&function(h,w,q){let tr=h.fs,tn=tr.freereg,ti=!1;for(;w;w=w.prev)w.v.k===eY.VINDEXED&&(w.v.u.ind.vt===q.k&&w.v.u.ind.t===q.u.info&&(ti=!0,w.v.u.ind.vt=eY.VLOCAL,w.v.u.ind.t=tn),q.k===eY.VLOCAL&&w.v.u.ind.idx===q.u.info&&(ti=!0,w.v.u.ind.idx=tn));ti&&(tB(tr,q.k===eY.VLOCAL?eP:eI,tn,q.u.info,0),en(tr,1))}(h,w,tr.v),Ne(h.fs,q+h.L.nCcalls,ev,tn("JS levels",!0)),Jo(h,tr,q+1)}else{Be(h,61);let tr=Tr(h,ti);if(tr===q)return el(h.fs,ti),void ed(h.fs,w.v,ti);z(h,q,tr,ti)}ot(ti,eY.VNONRELOC,h.fs.freereg-1),ed(h.fs,w.v,ti)},Qo=function(h){let w=new Ae;return Ar(h,w),w.k===eY.VNIL&&(w.k=eY.VFALSE),t$(h.fs,w),w.f},ta=function(h,w){let q,tr=h.linenumber;ke(h,eK.TK_GOTO)?q=L(h):(ey.luaX_next(h),q=eX(h.L,"break"));let tn=ie(h,h.dyd.gt,q,tr,w);st(h,tn)},Xu=function(h,w,q){let tr,ti=h.fs,to=h.dyd.label;(function(h,w,q){for(let tr=h.bl.firstlabel;tr<w.n;tr++)if(he(q,w.arr[tr].name)){let ti=eT.luaO_pushfstring(h.ls.L,tn("label '%s' already defined on line %d",!0),q.getstr(),w.arr[tr].line);Oe(h.ls,ti)}})(ti,to,w),Be(h,eK.TK_DBCOLON),tr=ie(h,to,w,q,tJ(ti)),function(h){for(;59===h.t.token||h.t.token===eK.TK_DBCOLON;)fi(h)}(h),mt(h,0)&&(to.arr[tr].nactvar=ti.bl.nactvar),pe(h,to.arr[tr])},hi=function(h){let w=new Ae;return Ar(h,w),tW(h.fs,w),ex(w.k===eY.VNONRELOC),w.u.info},ea=function(h,w,q,tr,tn){let ti,to=new fe,ts=h.fs;Pt(h,3),Be(h,eK.TK_DO);let tu=tn?tG(ts,eS,w,tC):t3(ts);me(ts,to,0),Pt(h,tr),en(ts,tr),An(h),E(ts),t7(ts,tu),tn?ti=tG(ts,eL,w,tC):(tB(ts,ek,w,0,tr),tZ(ts,q),ti=tG(ts,eU,w+2,tC)),t8(ts,ti,tu+1),tZ(ts,q)},Hu=function(h,w){let q=h.fs;me(q,new fe,1),ey.luaX_next(h);let tr=L(h);switch(h.t.token){case 61:let ti,to;to=(ti=h.fs).freereg,Bt(h,"(for index)"),Bt(h,"(for limit)"),Bt(h,"(for step)"),te(h,tr),Be(h,61),hi(h),Be(h,44),hi(h),ke(h,44)?hi(h):(tV(ti,ti.freereg,t2(ti,1)),en(ti,1)),ea(h,to,w,1,1);break;case 44:case eK.TK_IN:!function(h,w){let q=h.fs,tr=new Ae,tn=4,ti=q.freereg;for(Bt(h,"(for generator)"),Bt(h,"(for state)"),Bt(h,"(for control)"),te(h,w);ke(h,44);)te(h,L(h)),tn++;Be(h,eK.TK_IN);let to=h.linenumber;z(h,3,Tr(h,tr),tr),tF(q,3),ea(h,ti,to,tn-3,0)}(h,tr);break;default:ey.luaX_syntaxerror(h,tn("'=' or 'in' expected",!0))}Ze(h,eK.TK_END,eK.TK_FOR,w),E(q)},ra=function(h,w){let q,tr=new fe,tn=h.fs,ti=new Ae;if(ey.luaX_next(h),Ar(h,ti),Be(h,eK.TK_THEN),h.t.token===eK.TK_GOTO||h.t.token===eK.TK_BREAK){for(tQ(h.fs,ti),me(tn,tr,!1),ta(h,ti.t);ke(h,59););if(mt(h,0))return E(tn),w;q=t3(tn)}else t$(h.fs,ti),me(tn,tr,!1),q=ti.f;return Qt(h),E(tn),h.t.token!==eK.TK_ELSE&&h.t.token!==eK.TK_ELSEIF||(w=tX(tn,w,t3(tn))),t7(tn,q),w},zu=function(h,w){let q=new Ae,tr=new Ae;ey.luaX_next(h);let tn=function(h,w){let q=0;for(m(h,w);46===h.t.token;)Te(h,w);return 58===h.t.token&&(q=1,Te(h,w)),q}(h,q);We(h,tr,tn,w),ed(h.fs,q,tr),tZ(h.fs,w)},fi=function(h){let w=h.linenumber;switch(X(h),h.t.token){case 59:ey.luaX_next(h);break;case eK.TK_IF:!function(h,w){let q=h.fs,tr=tC;for(tr=ra(h,tr);h.t.token===eK.TK_ELSEIF;)tr=ra(h,tr);ke(h,eK.TK_ELSE)&&An(h),Ze(h,eK.TK_END,eK.TK_IF,w),t7(q,tr)}(h,w);break;case eK.TK_WHILE:let q,ti,to,ts;q=h.fs,ti=new fe,ey.luaX_next(h),to=tJ(q),ts=Qo(h),me(q,ti,1),Be(h,eK.TK_DO),An(h),t4(q,to),Ze(h,eK.TK_END,eK.TK_WHILE,w),E(q),t7(q,ts);break;case eK.TK_DO:ey.luaX_next(h),An(h),Ze(h,eK.TK_END,eK.TK_DO,w);break;case eK.TK_FOR:Hu(h,w);break;case eK.TK_REPEAT:let tu,tl,tc,tp,td;tl=tJ(tu=h.fs),tc=new fe,tp=new fe,me(tu,tc,1),me(tu,tp,0),ey.luaX_next(h),Qt(h),Ze(h,eK.TK_UNTIL,eK.TK_REPEAT,w),td=Qo(h),tp.upval&&t6(tu,td,tp.nactvar),E(tu),t8(tu,td,tl),E(tu);break;case eK.TK_FUNCTION:zu(h,w);break;case eK.TK_LOCAL:let tm,ty;ey.luaX_next(h),ke(h,eK.TK_FUNCTION)?(tm=new Ae,ty=h.fs,te(h,L(h)),Pt(h,1),We(h,tm,0,h.linenumber),Xt(ty,tm.u.info).startpc=ty.pc):function(h){let w,q=0,tr=new Ae;do te(h,L(h)),q++;while(ke(h,44));ke(h,61)?w=Tr(h,tr):(tr.k=eY.VVOID,w=0),z(h,q,w,tr),Pt(h,q)}(h);break;case eK.TK_DBCOLON:ey.luaX_next(h),Xu(h,L(h),w);break;case eK.TK_RETURN:let tv,tb,tx,tT;ey.luaX_next(h),tx=h.fs,tT=new Ae,mt(h,1)||59===h.t.token?tv=tb=0:(tb=Tr(h,tT),zt(tT.k)?(eu(tx,tT),tT.k===eY.VCALL&&1===tb&&(ej(tD(tx,tT),eM),ex(tD(tx,tT).A===tx.nactvar)),tv=tx.nactvar,tb=tr):1===tb?tv=tK(tx,tT):(tW(tx,tT),tv=tx.nactvar,ex(tb===tx.freereg-tv))),ei(tx,tv,tb),ke(h,59);break;case eK.TK_BREAK:case eK.TK_GOTO:ta(h,t3(h.fs));break;default:let tE,tA;tE=h.fs,li(h,(tA=new Zo).v),61===h.t.token||44===h.t.token?(tA.prev=null,Jo(h,tA,1)):(or(h,tA.v.k===eY.VCALL,tn("syntax error",!0)),eB(tD(tE,tA.v),1))}ex(h.fs.f.maxstacksize>=h.fs.freereg&&h.fs.freereg>=h.fs.nactvar),h.fs.freereg=h.fs.nactvar,ct(h)};h.exports.Dyndata=class{constructor(){this.actvar={arr:[],n:NaN,size:NaN},this.gt=new de,this.label=new de}},h.exports.expkind=eY,h.exports.expdesc=Ae,h.exports.luaY_parser=function(h,w,q,tr,tn,ti){let to,ts,tu=new ey.LexState,tl=new je,tc=em.luaF_newLclosure(h,1);return eg.luaD_inctop(h),h.stack[h.top-1].setclLvalue(tc),tu.h=eH.luaH_new(h),eg.luaD_inctop(h),h.stack[h.top-1].sethvalue(tu.h),tl.f=tc.p=new ez(h),tl.f.source=eV(h,tn),tu.buff=q,tu.dyd=tr,tr.actvar.n=tr.gt.n=tr.label.n=0,ey.luaX_setinput(h,tu,w,tl.f.source,ti),to=new fe,ts=new Ae,Ie(tu,tl,to),tl.f.is_vararg=!0,ot(ts,eY.VLOCAL,0),$t(tl,tu.envn,ts),ey.luaX_next(tu),Qt(tu),ir(tu,eK.TK_EOS),j(tu),ex(!tl.prev&&1===tl.nups&&!tu.fs),ex(0===tr.actvar.n&&0===tr.gt.n&&0===tr.label.n),delete h.stack[--h.top],tc},h.exports.vkisinreg=function(h){return h===eY.VNONRELOC||h===eY.VLOCAL}},function(h,w,q){let tr,tn;let{LUA_MULTRET:ti,LUA_OK:to,LUA_TFUNCTION:ts,LUA_TNIL:tu,LUA_TNONE:tl,LUA_TNUMBER:tc,LUA_TSTRING:tp,LUA_TTABLE:td,LUA_VERSION:tm,LUA_YIELD:ty,lua_call:tv,lua_callk:tb,lua_concat:tx,lua_error:tT,lua_getglobal:tE,lua_geti:tA,lua_getmetatable:tO,lua_gettop:tw,lua_insert:tL,lua_isnil:tS,lua_isnone:tI,lua_isstring:tP,lua_load:tR,lua_next:tN,lua_pcallk:tM,lua_pop:tk,lua_pushboolean:tU,lua_pushcfunction:tC,lua_pushglobaltable:tD,lua_pushinteger:tF,lua_pushliteral:tB,lua_pushnil:tj,lua_pushstring:tG,lua_pushvalue:tV,lua_rawequal:tX,lua_rawget:tH,lua_rawlen:tz,lua_rawset:tK,lua_remove:tY,lua_replace:tW,lua_rotate:tq,lua_setfield:tZ,lua_setmetatable:tJ,lua_settop:tQ,lua_setupvalue:t$,lua_stringtonumber:t0,lua_toboolean:t1,lua_tolstring:t2,lua_tostring:t3,lua_type:t4,lua_typename:t5}=q(2),{luaL_argcheck:t6,luaL_checkany:t8,luaL_checkinteger:t7,luaL_checkoption:t9,luaL_checkstack:er,luaL_checktype:en,luaL_error:ei,luaL_getmetafield:eo,luaL_loadbufferx:es,luaL_loadfile:eu,luaL_loadfilex:el,luaL_optinteger:ep,luaL_optstring:ed,luaL_setfuncs:e_,luaL_tolstring:eg,luaL_where:em}=q(7),{to_jsstring:ey,to_luastring:ev}=q(5);if("function"==typeof TextDecoder){let h="",w=new TextDecoder("utf-8");tr=function(q){h+=w.decode(q,{stream:!0})};let q=new Uint8Array(0);tn=function(){console.log(h+=w.decode(q)),h=""}}else{let h=[];tr=function(w){try{w=ey(w)}catch{let h=new Uint8Array(w.length);h.set(w),w=h}h.push(w)},tn=function(){console.log.apply(console.log,h),h=[]}}let eb=["stop","restart","collect","count","step","setpause","setstepmul","isrunning"].map(h=>ev(h)),_e=function(h){return en(h,1,td),tQ(h,2),tN(h,1)?2:(tj(h),1)},ve=function(h){let w=t7(h,2)+1;return tF(h,w),tA(h,1,w)===tu?1:2},xe=function(h){let w=ep(h,2,1);return tQ(h,1),t4(h,1)===tp&&w>0&&(em(h,w),tV(h,1),tx(h,2)),tT(h)},Ue=function(h,w,q){return w!==to&&w!==ty?(tU(h,0),tV(h,-2),2):tw(h)-q},ne=function(h,w,q){return w===to?(0!==q&&(tV(h,q),t$(h,-2,1)||tk(h,1)),1):(tj(h),tL(h,-2),2)},se=function(h,w){return er(h,2,"too many nested functions"),tV(h,1),tv(h,0,1),tS(h,-1)?(tk(h,1),null):(tP(h,-1)||ei(h,ev("reader function must return a string")),tW(h,5),t3(h,5))},be=function(h,w,q){return tw(h)-1},ex={assert:function(h){return t1(h,1)?tw(h):(t8(h,1),tY(h,1),tB(h,"assertion failed!"),tQ(h,1),xe(h))},collectgarbage:function(h){t9(h,1,"collect",eb),ep(h,2,0),ei(h,ev("lua_gc not implemented"))},dofile:function(h){let w=ed(h,1,null);return tQ(h,1),eu(h,w)!==to?tT(h):(tb(h,0,ti,0,be),be(h))},error:xe,getmetatable:function(h){return t8(h,1),tO(h,1)?eo(h,1,ev("__metatable",!0)):tj(h),1},ipairs:function(h){return t8(h,1),tC(h,ve),tV(h,1),tF(h,0),3},load:function(h){let w,q=t3(h,1),tr=ed(h,3,"bt"),tn=tI(h,4)?0:4;if(null!==q){let tn=ed(h,2,q);w=es(h,q,q.length,tn,tr)}else{let q=ed(h,2,"=(load)");en(h,1,ts),tQ(h,5),w=tR(h,se,null,q,tr)}return ne(h,w,tn)},loadfile:function(h){let w=ed(h,1,null),q=ed(h,2,null),tr=tI(h,3)?0:3,tn=el(h,w,q);return ne(h,tn,tr)},next:_e,pairs:function(h){var w;return w=ev("__pairs",!0),t8(h,1),eo(h,1,w)===tu?(tC(h,_e),tV(h,1),tj(h)):(tV(h,1),tv(h,1,3)),3},pcall:function(h){t8(h,1),tU(h,1),tL(h,1);let w=tM(h,tw(h)-2,ti,0,0,Ue);return Ue(h,w,0)},print:function(h){let w=tw(h);tE(h,ev("tostring",!0));for(let q=1;q<=w;q++){tV(h,-1),tV(h,q),tv(h,1,1);let w=t2(h,-1);if(null===w)return ei(h,ev("'tostring' must return a string to 'print'"));q>1&&tr(ev("	")),tr(w),tk(h,1)}return tn(),0},rawequal:function(h){return t8(h,1),t8(h,2),tU(h,tX(h,1,2)),1},rawget:function(h){return en(h,1,td),t8(h,2),tQ(h,2),tH(h,1),1},rawlen:function(h){let w=t4(h,1);return t6(h,w===td||w===tp,1,"table or string expected"),tF(h,tz(h,1)),1},rawset:function(h){return en(h,1,td),t8(h,2),t8(h,3),tQ(h,3),tK(h,1),1},select:function(h){let w=tw(h);if(t4(h,1)===tp&&35===t3(h,1)[0])return tF(h,w-1),1;{let q=t7(h,1);return q<0?q=w+q:q>w&&(q=w),t6(h,1<=q,1,"index out of range"),w-q}},setmetatable:function(h){let w=t4(h,2);return en(h,1,td),t6(h,w===tu||w===td,2,"nil or table expected"),eo(h,1,ev("__metatable",!0))!==tu?ei(h,ev("cannot change a protected metatable")):(tQ(h,2),tJ(h,1),1)},tonumber:function(h){if(0>=t4(h,2)){if(t8(h,1),t4(h,1)===tc)return tQ(h,1),1;{let w=t3(h,1);if(null!==w&&t0(h,w)===w.length+1)return 1}}else{let w=t7(h,2);en(h,1,tp);let q=t3(h,1);t6(h,2<=w&&w<=36,2,"base out of range");let tr=function(h,w){try{h=ey(h)}catch{return null}let q=/^[\t\v\f \n\r]*([+-]?)0*([0-9A-Za-z]+)[\t\v\f \n\r]*$/.exec(h);if(!q)return null;let tr=parseInt(q[1]+q[2],w);return isNaN(tr)?null:0|tr}(q,w);if(null!==tr)return tF(h,tr),1}return tj(h),1},tostring:function(h){return t8(h,1),eg(h,1),1},type:function(h){let w=t4(h,1);return t6(h,w!==tl,1,"value expected"),tG(h,t5(h,w)),1},xpcall:function(h){let w=tw(h);en(h,2,ts),tU(h,1),tV(h,1),tq(h,3,2);let q=tM(h,w-2,ti,2,2,Ue);return Ue(h,q,2)}};h.exports.luaopen_base=function(h){return tD(h),e_(h,ex,0),tV(h,-1),tZ(h,-2,ev("_G")),tB(h,tm),tZ(h,-2,ev("_VERSION")),1}},function(h,w,q){let{LUA_OK:tr,LUA_TFUNCTION:tn,LUA_TSTRING:ti,LUA_YIELD:to,lua_Debug:ts,lua_checkstack:tu,lua_concat:tl,lua_error:tc,lua_getstack:tp,lua_gettop:td,lua_insert:tm,lua_isyieldable:ty,lua_newthread:tv,lua_pop:tb,lua_pushboolean:tx,lua_pushcclosure:tT,lua_pushliteral:tE,lua_pushthread:tA,lua_pushvalue:tO,lua_resume:tw,lua_status:tL,lua_tothread:tS,lua_type:tI,lua_upvalueindex:tP,lua_xmove:tR,lua_yield:tN}=q(2),{luaL_argcheck:tM,luaL_checktype:tk,luaL_newlib:tU,luaL_where:tC}=q(7),lt=function(h){let w=tS(h,1);return tM(h,w,1,"thread expected"),w},dt=function(h,w,q){if(!tu(w,q))return tE(h,"too many arguments to resume"),-1;if(tL(w)===tr&&0===td(w))return tE(h,"cannot resume dead coroutine"),-1;tR(h,w,q);let tn=tw(w,h,q);if(tn===tr||tn===to){let q=td(w);return tu(h,q+1)?(tR(w,h,q),q):(tb(w,q),tE(h,"too many results to resume"),-1)}return tR(w,h,1),-1},Vt=function(h){let w=tS(h,tP(1)),q=dt(h,w,td(h));return q<0?(tI(h,-1)===ti&&(tC(h,1),tm(h,-2),tl(h,2)),tc(h)):q},S=function(h){tk(h,1,tn);let w=tv(h);return tO(h,1),tR(h,w,1),1},tD={create:S,isyieldable:function(h){return tx(h,ty(h)),1},resume:function(h){let w=lt(h),q=dt(h,w,td(h)-1);return q<0?(tx(h,0),tm(h,-2),2):(tx(h,1),tm(h,-(q+1)),q+1)},running:function(h){return tx(h,tA(h)),2},status:function(h){let w=lt(h);if(h===w)tE(h,"running");else switch(tL(w)){case to:tE(h,"suspended");break;case tr:tp(w,0,new ts)>0?tE(h,"normal"):0===td(w)?tE(h,"dead"):tE(h,"suspended");break;default:tE(h,"dead")}return 1},wrap:function(h){return S(h),tT(h,Vt,1),1},yield:function(h){return tN(h,td(h))}};h.exports.luaopen_coroutine=function(h){return tU(h,tD),1}},function(h,w,q){let{LUA_MAXINTEGER:tr}=q(3),{LUA_OPEQ:tn,LUA_OPLT:ti,LUA_TFUNCTION:to,LUA_TNIL:ts,LUA_TTABLE:tu,lua_call:tl,lua_checkstack:tc,lua_compare:tp,lua_createtable:td,lua_geti:tm,lua_getmetatable:ty,lua_gettop:tv,lua_insert:tb,lua_isnil:tx,lua_isnoneornil:tT,lua_isstring:tE,lua_pop:tA,lua_pushinteger:tO,lua_pushnil:tw,lua_pushstring:tL,lua_pushvalue:tS,lua_rawget:tI,lua_setfield:tP,lua_seti:tR,lua_settop:tN,lua_toboolean:tM,lua_type:tk}=q(2),{luaL_Buffer:tU,luaL_addlstring:tC,luaL_addvalue:tD,luaL_argcheck:tF,luaL_buffinit:tB,luaL_checkinteger:tj,luaL_checktype:tG,luaL_error:tV,luaL_len:tX,luaL_newlib:tH,luaL_opt:tz,luaL_optinteger:tK,luaL_optlstring:tY,luaL_pushresult:tW,luaL_typename:tq}=q(7),tZ=q(17),{to_luastring:tJ}=q(5),rt=function(h,w,q){return tL(h,w),tI(h,-q)!==ts},It=function(h,w,q){if(tk(h,w)!==tu){let tr=1;ty(h,w)&&(!(1&q)||rt(h,tJ("__index",!0),++tr))&&(!(2&q)||rt(h,tJ("__newindex",!0),++tr))&&(!(4&q)||rt(h,tJ("__len",!0),++tr))?tA(h,tr):tG(h,w,tu)}},ee=function(h,w,q){return It(h,w,4|q),tX(h,w)},Zt=function(h,w,q){tm(h,1,q),tE(h,-1)||tV(h,tJ("invalid value (%s) at index %d in table for 'concat'"),tq(h,-1),q),tD(w)},Ut=function(h,w,q){tR(h,1,w),tR(h,1,q)},et=function(h,w,q){if(tx(h,2))return tp(h,w,q,ti);{tS(h,2),tS(h,w-1),tS(h,q-2),tl(h,2,1);let tr=tM(h,-1);return tA(h,1),tr}},Et=function(h,w,q){let tr=w,tn=q-1;for(;;){for(;tm(h,1,++tr),et(h,-1,-2);)tr==q-1&&tV(h,tJ("invalid order function for sorting")),tA(h,1);for(;tm(h,1,--tn),et(h,-3,-1);)tn<tr&&tV(h,tJ("invalid order function for sorting")),tA(h,1);if(tn<tr)return tA(h,1),Ut(h,q-1,tr),tr;Ut(h,tr,tn)}},k=function(h,w,q){let tr=Math.floor((w-h)/4),tn=q%(2*tr)+(h+tr);return tZ.lua_assert(h+tr<=tn&&tn<=w-tr),tn},ht=function(h,w,q,tr){for(;w<q;){let tn,ti;if(tm(h,1,w),tm(h,1,q),et(h,-1,-2)?Ut(h,w,q):tA(h,2),q-w==1||(tm(h,1,tn=q-w<100||0===tr?Math.floor((w+q)/2):k(w,q,tr)),tm(h,1,w),et(h,-2,-1)?Ut(h,tn,w):(tA(h,1),tm(h,1,q),et(h,-1,-2)?Ut(h,tn,q):tA(h,2)),q-w==2))return;tm(h,1,tn),tS(h,-1),tm(h,1,q-1),Ut(h,tn,q-1),(tn=Et(h,w,q))-w<q-tn?(ht(h,w,tn-1,tr),ti=tn-w,w=tn+1):(ht(h,tn+1,q,tr),ti=q-tn,q=tn-1),(q-w)/128>ti&&(tr=Math.floor(4294967296*Math.random()))}},tQ={concat:function(h){let w=ee(h,1,1),q=tY(h,2,""),tr=q.length,tn=tK(h,3,1);w=tK(h,4,w);let ti=new tU;for(tB(h,ti);tn<w;tn++)Zt(h,ti,tn),tC(ti,q,tr);return tn===w&&Zt(h,ti,tn),tW(ti),1},insert:function(h){let w,q=ee(h,1,3)+1;switch(tv(h)){case 2:w=q;break;case 3:w=tj(h,2),tF(h,1<=w&&w<=q,2,"position out of bounds");for(let tr=q;tr>w;tr--)tm(h,1,tr-1),tR(h,1,tr);break;default:return tV(h,"wrong number of arguments to 'insert'")}return tR(h,1,w),0},move:function(h){let w=tj(h,2),q=tj(h,3),ti=tj(h,4),to=tT(h,5)?1:5;if(It(h,1,1),It(h,to,2),q>=w){tF(h,w>0||q<tr+w,3,"too many elements to move");let ts=q-w+1;if(tF(h,ti<=tr-ts+1,4,"destination wrap around"),ti>q||ti<=w||1!==to&&1!==tp(h,1,to,tn))for(let q=0;q<ts;q++)tm(h,1,w+q),tR(h,to,ti+q);else for(let q=ts-1;q>=0;q--)tm(h,1,w+q),tR(h,to,ti+q)}return tS(h,to),1},pack:function(h){let w=tv(h);td(h,w,1),tb(h,1);for(let q=w;q>=1;q--)tR(h,1,q);return tO(h,w),tP(h,1,tJ("n")),1},remove:function(h){let w=ee(h,1,3),q=tK(h,2,w);for(q!==w&&tF(h,1<=q&&q<=w+1,1,"position out of bounds"),tm(h,1,q);q<w;q++)tm(h,1,q+1),tR(h,1,q);return tw(h),tR(h,1,q),1},sort:function(h){let w=ee(h,1,3);return w>1&&(tF(h,w<tr,1,"array too big"),tT(h,2)||tG(h,2,to),tN(h,2),ht(h,1,w,0)),0},unpack:function(h){let w=tK(h,2,1),q=tz(h,tj,3,tX(h,1));if(w>q)return 0;let tr=q-w;if(tr>=Number.MAX_SAFE_INTEGER||!tc(h,++tr))return tV(h,tJ("too many results to unpack"));for(;w<q;w++)tm(h,1,w);return tm(h,1,q),tr}};h.exports.luaopen_table=function(h){return tH(h,tQ),1}},function(h,w,q){let{LUA_TNIL:tr,LUA_TTABLE:tn,lua_close:ti,lua_createtable:to,lua_getfield:ts,lua_isboolean:tu,lua_isnoneornil:tl,lua_pop:tc,lua_pushboolean:tp,lua_pushfstring:td,lua_pushinteger:tm,lua_pushliteral:ty,lua_pushnil:tv,lua_pushnumber:tb,lua_pushstring:tx,lua_setfield:tT,lua_settop:tE,lua_toboolean:tA,lua_tointegerx:tO}=q(2),{luaL_Buffer:tw,luaL_addchar:tL,luaL_addstring:tS,luaL_argerror:tI,luaL_buffinit:tP,luaL_checkinteger:tR,luaL_checkstring:tN,luaL_checktype:tM,luaL_error:tk,luaL_execresult:tU,luaL_fileresult:tC,luaL_newlib:tD,luaL_optinteger:tF,luaL_optlstring:tB,luaL_optstring:tj,luaL_pushresult:tG}=q(7),{luastring_eq:tV,to_jsstring:tX,to_luastring:tH}=q(5),tz=tH("aAbBcCdDeFhHIjklmMnpPrRStTuUwWxXyYzZ%"),Ct=function(h,w,q){tm(h,q),tT(h,-2,tH(w,!0))},kt=function(h,w,q){Ct(h,"sec",q?w.getUTCSeconds():w.getSeconds()),Ct(h,"min",q?w.getUTCMinutes():w.getMinutes()),Ct(h,"hour",q?w.getUTCHours():w.getHours()),Ct(h,"day",q?w.getUTCDate():w.getDate()),Ct(h,"month",(q?w.getUTCMonth():w.getMonth())+1),Ct(h,"year",q?w.getUTCFullYear():w.getFullYear()),Ct(h,"wday",(q?w.getUTCDay():w.getDay())+1),Ct(h,"yday",Math.floor((w-new Date(w.getFullYear(),0,0))/864e5))},tK=Number.MAX_SAFE_INTEGER/2,J=function(h,w,q,tn){let ti=ts(h,-1,tH(w,!0)),to=tO(h,-1);if(!1===to){if(ti!==tr)return tk(h,tH("field '%s' is not an integer"),w);if(q<0)return tk(h,tH("field '%s' missing in date table"),w);to=q}else{if(!(-tK<=to&&to<=tK))return tk(h,tH("field '%s' is out-of-bound"),w);to-=tn}return tc(h,1),to},tY={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map(h=>tH(h)),shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(h=>tH(h)),months:["January","February","March","April","May","June","July","August","September","October","November","December"].map(h=>tH(h)),shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map(h=>tH(h)),AM:tH("AM"),PM:tH("PM"),am:tH("am"),pm:tH("pm"),formats:{c:tH("%a %b %e %H:%M:%S %Y"),D:tH("%m/%d/%y"),F:tH("%Y-%m-%d"),R:tH("%H:%M"),r:tH("%I:%M:%S %p"),T:tH("%H:%M:%S"),X:tH("%T"),x:tH("%D")}},xt=function(h,w){let q=h.getDay();return"monday"===w&&(0===q?q=6:q--),Math.floor(((h-new Date(h.getFullYear(),0,1))/864e5+7-q)/7)},rt=function(h,w,q){w<10&&tL(h,q),tS(h,tH(String(w)))},It=function(h,w,q,tr){let tn=0;for(;tn<q.length;)if(37!==q[tn])tL(w,q[tn++]);else{let ti=ee(h,q,++tn);switch(q[tn]){case 37:tL(w,37);break;case 65:tS(w,tY.days[tr.getDay()]);break;case 66:tS(w,tY.months[tr.getMonth()]);break;case 67:rt(w,Math.floor(tr.getFullYear()/100),48);break;case 68:It(h,w,tY.formats.D,tr);break;case 70:It(h,w,tY.formats.F,tr);break;case 72:rt(w,tr.getHours(),48);break;case 73:rt(w,(tr.getHours()+11)%12+1,48);break;case 77:rt(w,tr.getMinutes(),48);break;case 80:tS(w,12>tr.getHours()?tY.am:tY.pm);break;case 82:It(h,w,tY.formats.R,tr);break;case 83:rt(w,tr.getSeconds(),48);break;case 84:It(h,w,tY.formats.T,tr);break;case 85:rt(w,xt(tr,"sunday"),48);break;case 87:rt(w,xt(tr,"monday"),48);break;case 88:It(h,w,tY.formats.X,tr);break;case 89:tS(w,tH(String(tr.getFullYear())));break;case 90:{let h=tr.toString().match(/\(([\w\s]+)\)/);h&&tS(w,tH(h[1]));break}case 97:tS(w,tY.shortDays[tr.getDay()]);break;case 98:case 104:tS(w,tY.shortMonths[tr.getMonth()]);break;case 99:It(h,w,tY.formats.c,tr);break;case 100:rt(w,tr.getDate(),48);break;case 101:rt(w,tr.getDate(),32);break;case 106:{let h=Math.floor((tr-new Date(tr.getFullYear(),0,1))/864e5);h<100&&(h<10&&tL(w,48),tL(w,48)),tS(w,tH(String(h)));break}case 107:rt(w,tr.getHours(),32);break;case 108:rt(w,(tr.getHours()+11)%12+1,32);break;case 109:rt(w,tr.getMonth()+1,48);break;case 110:tL(w,10);break;case 112:tS(w,12>tr.getHours()?tY.AM:tY.PM);break;case 114:It(h,w,tY.formats.r,tr);break;case 115:tS(w,tH(String(Math.floor(tr/1e3))));break;case 116:tL(w,8);break;case 117:{let h=tr.getDay();tS(w,tH(String(0===h?7:h)));break}case 119:tS(w,tH(String(tr.getDay())));break;case 120:It(h,w,tY.formats.x,tr);break;case 121:rt(w,tr.getFullYear()%100,48);break;case 122:{let h=tr.getTimezoneOffset();h>0?tL(w,45):(h=-h,tL(w,43)),rt(w,Math.floor(h/60),48),rt(w,h%60,48)}}tn+=ti}},ee=function(h,w,q){let tr=0,tn=1;for(;tr<tz.length&&tn<=w.length-q;tr+=tn)if(124===tz[tr])tn++;else if(tV(w.subarray(q,q+tn),tz.subarray(tr,tr+tn)))return tn;tI(h,1,td(h,tH("invalid conversion specifier '%%%s'"),w))},Zt=function(h,w){return tR(h,w)},tW={date:function(h){let w=tB(h,1,"%c"),q=tl(h,2)?new Date:new Date(1e3*Zt(h,2)),tr=!1,tn=0;if(33===w[0]&&(tr=!0,tn++),42===w[tn]&&116===w[tn+1])to(h,0,9),kt(h,q,tr);else{new Uint8Array(4)[0]=37;let tr=new tw;tP(h,tr),It(h,tr,w,q),tG(tr)}return 1},difftime:function(h){let w=Zt(h,1),q=Zt(h,2);return tb(h,w-q),1},time:function(h){let w;return tl(h,1)?w=new Date:(tM(h,1,tn),tE(h,1),w=new Date(J(h,"year",-1,0),J(h,"month",-1,1),J(h,"day",-1,0),J(h,"hour",12,0),J(h,"min",0,0),J(h,"sec",0,0)),kt(h,w)),tm(h,Math.floor(w/1e3)),1},clock:function(h){return tb(h,performance.now()/1e3),1}};h.exports.luaopen_os=function(h){return tD(h,tW),1}},function(h,w,q){let{sprintf:tr}=q(38),{LUA_INTEGER_FMT:tn,LUA_INTEGER_FRMLEN:ti,LUA_MININTEGER:to,LUA_NUMBER_FMT:ts,LUA_NUMBER_FRMLEN:tu,frexp:tl,lua_getlocaledecpoint:tc}=q(3),{LUA_TBOOLEAN:tp,LUA_TFUNCTION:td,LUA_TNIL:tm,LUA_TNUMBER:ty,LUA_TSTRING:tv,LUA_TTABLE:tb,lua_call:tx,lua_createtable:tT,lua_dump:tE,lua_gettable:tA,lua_gettop:tO,lua_isinteger:tw,lua_isstring:tL,lua_pop:tS,lua_pushcclosure:tI,lua_pushinteger:tP,lua_pushlightuserdata:tR,lua_pushliteral:tN,lua_pushlstring:tM,lua_pushnil:tk,lua_pushnumber:tU,lua_pushstring:tC,lua_pushvalue:tD,lua_remove:tF,lua_setfield:tB,lua_setmetatable:tj,lua_settop:tG,lua_toboolean:tV,lua_tointeger:tX,lua_tonumber:tH,lua_tostring:tz,lua_touserdata:tK,lua_type:tY,lua_upvalueindex:tW}=q(2),{luaL_Buffer:tq,luaL_addchar:tZ,luaL_addlstring:tJ,luaL_addsize:tQ,luaL_addstring:t$,luaL_addvalue:t0,luaL_argcheck:t1,luaL_argerror:t2,luaL_buffinit:t3,luaL_buffinitsize:t4,luaL_checkinteger:t5,luaL_checknumber:t6,luaL_checkstack:t8,luaL_checkstring:t7,luaL_checktype:t9,luaL_error:er,luaL_newlib:en,luaL_optinteger:ei,luaL_optstring:eo,luaL_prepbuffsize:es,luaL_pushresult:eu,luaL_pushresultsize:el,luaL_tolstring:ep,luaL_typename:ed}=q(7),e_=q(17),{luastring_eq:eg,luastring_indexOf:em,to_jsstring:ey,to_luastring:ev}=q(5),_e=function(h){let w=em(h,0);return w>-1?w:h.length},ve=function(h,w){return h>=0?h:0-h>w?0:w+h+1},xe=function(h,w,q,tr){return tJ(tr,w,q),0},eb=tu.length+1,ne=function(h,w,q){let tn=function(h){if(Object.is(h,1/0))return ev("inf");if(Object.is(h,-1/0))return ev("-inf");if(Number.isNaN(h))return ev("nan");if(0===h){let w=tr(ts+"x0p+0",h);return Object.is(h,-0)&&(w="-"+w),ev(w)}{let w="",q=tl(h),tn=q[0],ti=q[1];return tn<0&&(w+="-",tn=-tn),ev(w+="0x"+(2*tn).toString(16)+tr("p%+d",ti-=1))}}(q);if(65===w[eb])for(let h=0;h<tn.length;h++){let w=tn[h];w>=97&&(tn[h]=223&w)}else 97!==w[eb]&&er(h,ev("modifiers for format '%%a'/'%%A' not implemented"));return tn},ex=ev("-+ #0"),be=h=>97<=h&&h<=122||65<=h&&h<=90,c=h=>48<=h&&h<=57,p=h=>0<=h&&h<=31||127===h,b=h=>33<=h&&h<=126,_=h=>97<=h&&h<=122,x=h=>65<=h&&h<=90,N=h=>97<=h&&h<=122||65<=h&&h<=90||48<=h&&h<=57,A=h=>b(h)&&!N(h),Q=h=>32===h||h>=9&&h<=13,Mt=h=>48<=h&&h<=57||65<=h&&h<=70||97<=h&&h<=102,Wt=function(h,w,q){switch(tY(h,q)){case tv:{let tr=tz(h,q);!function(h,w,q){tZ(h,34);let tr=0;for(;q--;){if(34===w[tr]||92===w[tr]||10===w[tr])tZ(h,92),tZ(h,w[tr]);else if(p(w[tr])){let q=""+w[tr];c(w[tr+1])&&(q="0".repeat(3-q.length)+q),t$(h,ev("\\"+q))}else tZ(h,w[tr]);tr++}tZ(h,34)}(w,tr,tr.length);break}case ty:{let ts;if(tw(h,q)){let w=tX(h,q);ts=ev(tr(w===to?"0x%"+ti+"x":tn,w))}else{let w=tH(h,q);!function(h){if(0>em(h,46)){let w=em(h,tc());w&&(h[w]=46)}}(ts=ne(h,ev(`%${ti}a`),w))}t$(w,ts);break}case tm:case tp:ep(h,q),t0(w);break;default:t2(h,q,ev("value has no literal form"))}},ge=function(h,w,q,tr){let tn=q;for(;0!==w[tn]&&em(ex,w[tn])>=0;)tn++;tn-q>=ex.length&&er(h,ev("invalid format (repeated flags)")),c(w[tn])&&tn++,c(w[tn])&&tn++,46===w[tn]&&(c(w[++tn])&&tn++,c(w[tn])&&tn++),c(w[tn])&&er(h,ev("invalid format (width or precision too long)")),tr[0]=37;for(let h=0;h<tn-q+1;h++)tr[h+1]=w[q+h];return tn},ye=function(h,w){let q=h.length,tr=w.length,tn=h[q-1];for(let tn=0;tn<tr;tn++)h[tn+q-1]=w[tn];h[q+tr-1]=tn};let nt=class nt{constructor(h){this.L=h,this.islittle=!0,this.maxalign=1}};let D=function(h,w){if(h.off>=h.s.length||!c(h.s[h.off]))return w;{let w=0;do w=10*w+(h.s[h.off++]-48);while(h.off<h.s.length&&c(h.s[h.off])&&w<=214748363.8);return w}},bt=function(h,w,q){let tr=D(w,q);return(tr>16||tr<=0)&&er(h.L,ev("integral size (%d) out of limits [1,%d]"),tr,16),tr},it=function(h,w){let q={opt:w.s[w.off++],size:0};switch(q.opt){case 98:return q.size=1,q.opt=0,q;case 66:return q.size=1,q.opt=1,q;case 104:return q.size=2,q.opt=0,q;case 72:return q.size=2,q.opt=1,q;case 108:case 106:return q.size=4,q.opt=0,q;case 76:case 74:case 84:return q.size=4,q.opt=1,q;case 102:return q.size=4,q.opt=2,q;case 100:case 110:return q.size=8,q.opt=2,q;case 105:return q.size=bt(h,w,4),q.opt=0,q;case 73:return q.size=bt(h,w,4),q.opt=1,q;case 115:return q.size=bt(h,w,4),q.opt=4,q;case 99:return q.size=D(w,-1),-1===q.size&&er(h.L,ev("missing size for format option 'c'")),q.opt=3,q;case 122:return q.opt=5,q;case 120:return q.size=1,q.opt=6,q;case 88:return q.opt=7,q;case 32:break;case 60:case 61:h.islittle=!0;break;case 62:h.islittle=!1;break;case 33:h.maxalign=bt(h,w,8);break;default:er(h.L,ev("invalid format option '%c'"),q.opt)}return q.opt=8,q},zt=function(h,w,q){let tr={opt:NaN,size:NaN,ntoalign:NaN},tn=it(h,q);tr.size=tn.size,tr.opt=tn.opt;let ti=tr.size;if(7===tr.opt){if(q.off>=q.s.length||0===q.s[q.off])t2(h.L,1,ev("invalid next option for option 'X'"));else{let w=it(h,q);ti=w.size,3!==(w=w.opt)&&0!==ti||t2(h.L,1,ev("invalid next option for option 'X'"))}}return ti<=1||3===tr.opt?tr.ntoalign=0:(ti>h.maxalign&&(ti=h.maxalign),ti&ti-1&&t2(h.L,1,ev("format asks for alignment not power of 2")),tr.ntoalign=ti-(w&ti-1)&ti-1),tr},he=function(h,w,q,tr,tn){let ti=es(h,tr);ti[q?0:tr-1]=255&w;for(let h=1;h<tr;h++)w>>=8,ti[q?h:tr-1-h]=255&w;if(tn&&tr>4)for(let h=4;h<tr;h++)ti[q?h:tr-1-h]=255;tQ(h,tr)},fe=function(h,w,q,tr,tn){let ti=0,to=tr<=4?tr:4;for(let h=to-1;h>=0;h--)ti<<=8,ti|=w[q?h:tr-1-h];if(tr<4){if(tn){let h=1<<8*tr-1;ti=(ti^h)-h}}else if(tr>4){let ts=!tn||ti>=0?0:255;for(let tn=to;tn<tr;tn++)w[q?tn:tr-1-tn]!==ts&&er(h,ev("%d-byte integer does not fit into Lua Integer"),tr)}return ti},ae=function(h,w,q,tr){e_.lua_assert(w.length>=tr);let tn=new DataView(new ArrayBuffer(tr));for(let h=0;h<tr;h++)tn.setUint8(h,w[h],q);return 4==tr?tn.getFloat32(0,q):tn.getFloat64(0,q)},eT=ev("^$*+?.([%-");let je=class je{constructor(h){this.src=null,this.src_init=null,this.src_end=null,this.p=null,this.p_end=null,this.L=h,this.matchdepth=NaN,this.level=NaN,this.capture=[]}};let de=function(h,w){switch(h.p[w++]){case 37:return w===h.p_end&&er(h.L,ev("malformed pattern (ends with '%%')")),w+1;case 91:94===h.p[w]&&w++;do w===h.p_end&&er(h.L,ev("malformed pattern (missing ']')")),37===h.p[w++]&&w<h.p_end&&w++;while(93!==h.p[w]);return w+1;default:return w}},Oe=function(h,w){switch(w){case 97:return be(h);case 65:return!be(h);case 99:return p(h);case 67:return!p(h);case 100:return c(h);case 68:return!c(h);case 103:return b(h);case 71:return!b(h);case 108:return _(h);case 76:return!_(h);case 112:return A(h);case 80:return!A(h);case 115:return Q(h);case 83:return!Q(h);case 117:return x(h);case 85:return!x(h);case 119:return N(h);case 87:return!N(h);case 120:return Mt(h);case 88:return!Mt(h);case 122:return 0===h;case 90:return 0!==h;default:return w===h}},Ee=function(h,w,q,tr){let tn=!0;for(94===h.p[q+1]&&(tn=!1,q++);++q<tr;)if(37===h.p[q]){if(q++,Oe(w,h.p[q]))return tn}else if(45===h.p[q+1]&&q+2<tr){if(q+=2,h.p[q-2]<=w&&w<=h.p[q])return tn}else if(h.p[q]===w)return tn;return!tn},Ne=function(h,w,q,tr){if(w>=h.src_end)return!1;{let tn=h.src[w];switch(h.p[q]){case 46:return!0;case 37:return Oe(tn,h.p[q+1]);case 91:return Ee(h,tn,q,tr-1);default:return h.p[q]===tn}}},ke=function(h,w,q){if(q>=h.p_end-1&&er(h.L,ev("malformed pattern (missing arguments to '%%b'")),h.src[w]!==h.p[q])return null;{let tr=h.p[q],tn=h.p[q+1],ti=1;for(;++w<h.src_end;)if(h.src[w]===tn){if(0==--ti)return w+1}else h.src[w]===tr&&ti++}return null},ir=function(h,w,q,tr){let tn=0;for(;Ne(h,w+tn,q,tr);)tn++;for(;tn>=0;){let q=ot(h,w+tn,tr+1);if(q)return q;tn--}return null},Be=function(h,w,q,tr){for(;;){let tn=ot(h,w,tr+1);if(null!==tn)return tn;if(!Ne(h,w,q,tr))return null;w++}},or=function(h,w,q,tr){let tn,ti=h.level;return ti>=32&&er(h.L,ev("too many captures")),h.capture[ti]=h.capture[ti]?h.capture[ti]:{},h.capture[ti].init=w,h.capture[ti].len=tr,h.level=ti+1,null===(tn=ot(h,w,q))&&h.level--,tn},Ze=function(h,w,q){let tr,tn=function(h){let w=h.level;for(w--;w>=0;w--)if(-1===h.capture[w].len)return w;return er(h.L,ev("invalid pattern capture"))}(h);return h.capture[tn].len=w-h.capture[tn].init,null===(tr=ot(h,w,q))&&(h.capture[tn].len=-1),tr},L=function(h,w,q){var tr,tn,ti,to;q=(tr=q-49)<0||tr>=h.level||-1===h.capture[tr].len?er(h.L,ev("invalid capture index %%%d"),tr+1):tr;let ts=h.capture[q].len;return h.src_end-w>=ts&&(tn=h.src,ti=h.capture[q].init,to=h.src,eg(tn.subarray(ti,ti+ts),to.subarray(w,w+ts)))?w+ts:null},ot=function(h,w,q){let tr=!1,tn=!0;for(0==h.matchdepth--&&er(h.L,ev("pattern too complex"));tn||tr;)if(tn=!1,q!==h.p_end)switch(tr?void 0:h.p[q]){case 40:w=41===h.p[q+1]?or(h,w,q+2,-2):or(h,w,q+1,-1);break;case 41:w=Ze(h,w,q+1);break;case 36:if(q+1!==h.p_end){tr=!0;break}w=h.src.length-w==0?w:null;break;case 37:switch(h.p[q+1]){case 98:null!==(w=ke(h,w,q+2))&&(q+=4,tn=!0);break;case 102:{q+=2,91!==h.p[q]&&er(h.L,ev("missing '[' after '%%f' in pattern"));let tr=de(h,q),ti=w===h.src_init?0:h.src[w-1];if(!Ee(h,ti,q,tr-1)&&Ee(h,w===h.src_end?0:h.src[w],q,tr-1)){q=tr,tn=!0;break}w=null;break}case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:null!==(w=L(h,w,h.p[q+1]))&&(q+=2,tn=!0);break;default:tr=!0}break;default:{tr=!1;let ti=de(h,q);if(Ne(h,w,q,ti))switch(h.p[ti]){case 63:{let tr;null!==(tr=ot(h,w+1,ti+1))?w=tr:(q=ti+1,tn=!0);break}case 43:w++;case 42:w=ir(h,w,q,ti);break;case 45:w=Be(h,w,q,ti);break;default:w++,q=ti,tn=!0}else{if(42===h.p[ti]||63===h.p[ti]||45===h.p[ti]){q=ti+1,tn=!0;break}w=null}}}return h.matchdepth++,w},Gt=function(h,w,q,tr){if(w>=h.level)0===w?tM(h.L,h.src.subarray(q,tr),tr-q):er(h.L,ev("invalid capture index %%%d"),w+1);else{let q=h.capture[w].len;-1===q&&er(h.L,ev("unfinished capture")),-2===q?tP(h.L,h.capture[w].init-h.src_init+1):tM(h.L,h.src.subarray(h.capture[w].init),q)}},Ht=function(h,w,q){let tr=0===h.level&&h.src.subarray(w)?1:h.level;t8(h.L,tr,"too many captures");for(let tn=0;tn<tr;tn++)Gt(h,tn,w,q);return tr},te=function(h,w,q,tr,tn,ti){h.L=w,h.matchdepth=200,h.src=q,h.src_init=0,h.src_end=tr,h.p=tn,h.p_end=ti},Bt=function(h){h.level=0,e_.lua_assert(200===h.matchdepth)},Xt=function(h,w){let q=t7(h,1),tr=t7(h,2),tn=q.length,ti=tr.length,to=ve(ei(h,3,1),tn);if(to<1)to=1;else if(to>tn+1)return tk(h),1;if(w&&(tV(h,4)||function(h,w){for(let q=0;q<w;q++)if(-1!==em(eT,h[q]))return!1;return!0}(tr,ti))){let w=function(h,w,q){var tr=0,tn=w.length;if(0===tn)return tr;for(;-1!==(tr=h.indexOf(w[0],tr));tr++)if(eg(h.subarray(tr,tr+tn),w))return tr;return -1}(q.subarray(to-1),tr,0);if(w>-1)return tP(h,to+w),tP(h,to+w+ti-1),2}else{let ts=new je(h),tu=to-1,tl=94===tr[0];tl&&(tr=tr.subarray(1),ti--),te(ts,h,q,tn,tr,ti);do{let q;if(Bt(ts),null!==(q=ot(ts,tu,0)))return w?(tP(h,tu+1),tP(h,q),Ht(ts,null,0)+2):Ht(ts,tu,q)}while(tu++<ts.src_end&&!tl)}return tk(h),1},Pt=function(h){let w=tK(h,tW(3));w.ms.L=h;for(let h=w.src;h<=w.ms.src_end;h++){let q;if(Bt(w.ms),null!==(q=ot(w.ms,h,w.p))&&q!==w.lastmatch)return w.src=w.lastmatch=q,Ht(w.ms,h,q)}return 0},$t=function(h,w,q,tr,tn){let ti=h.L;switch(tn){case td:tD(ti,3),tx(ti,Ht(h,q,tr),1);break;case tb:Gt(h,0,q,tr),tA(ti,3);break;default:return void function(h,w,q,tr){let tn=h.L,ti=tz(tn,3),to=ti.length;for(let ts=0;ts<to;ts++)37!==ti[ts]?tZ(w,ti[ts]):c(ti[++ts])?48===ti[ts]?tJ(w,h.src.subarray(q,tr),tr-q):(Gt(h,ti[ts]-49,q,tr),ep(tn,-1),tF(tn,-2),t0(w)):(37!==ti[ts]&&er(tn,ev("invalid use of '%c' in replacement string"),37),tZ(w,ti[ts]))}(h,w,q,tr)}tV(ti,-1)?tL(ti,-1)||er(ti,ev("invalid replacement value (a %s)"),ed(ti,-1)):(tS(ti,1),tM(ti,h.src.subarray(q,tr),tr-q)),t0(w)},eE={byte:function(h){let w=t7(h,1),q=w.length,tr=ve(ei(h,2,1),q),tn=ve(ei(h,3,tr),q);if(tr<1&&(tr=1),tn>q&&(tn=q),tr>tn)return 0;if(tn-tr>=Number.MAX_SAFE_INTEGER)return er(h,"string slice too long");let ti=tn-tr+1;t8(h,ti,"string slice too long");for(let q=0;q<ti;q++)tP(h,w[tr+q-1]);return ti},char:function(h){let w=tO(h),q=new tq,tr=t4(h,q,w);for(let q=1;q<=w;q++){let w=t5(h,q);t1(h,w>=0&&w<=255,"value out of range"),tr[q-1]=w}return el(q,w),1},dump:function(h){let w=new tq,q=tV(h,2);return t9(h,1,td),tG(h,1),t3(h,w),0!==tE(h,xe,w,q)?er(h,ev("unable to dump given function")):(eu(w),1)},find:function(h){return Xt(h,1)},format:function(h){let w=tO(h),q=1,tn=t7(h,1),to=0,ts=new tq;for(t3(h,ts);to<tn.length;)if(37!==tn[to])tZ(ts,tn[to++]);else if(37===tn[++to])tZ(ts,tn[to++]);else{let tu=[];switch(++q>w&&t2(h,q,ev("no value")),to=ge(h,tn,to,tu),String.fromCharCode(tn[to++])){case"c":tZ(ts,t5(h,q));break;case"d":case"i":case"o":case"u":case"x":case"X":{let w=t5(h,q);ye(tu,ev(ti,!0)),t$(ts,ev(tr(String.fromCharCode(...tu),w)));break}case"a":case"A":ye(tu,ev(ti,!0)),t$(ts,ne(h,tu,t6(h,q)));break;case"e":case"E":case"f":case"g":case"G":{let w=t6(h,q);ye(tu,ev(ti,!0)),t$(ts,ev(tr(String.fromCharCode(...tu),w)));break}case"q":Wt(h,ts,q);break;case"s":{let w=ep(h,q);tu.length<=2||0===tu[2]?t0(ts):(t1(h,w.length===_e(w),q,"string contains zeros"),0>em(tu,46)&&w.length>=100?t0(ts):(t$(ts,ev(tr(String.fromCharCode(...tu),ey(w)))),tS(h,1)));break}default:return er(h,ev("invalid option '%%%c' to 'format'"),tn[to-1])}}return eu(ts),1},gmatch:function(h){let w=t7(h,1),q=t7(h,2),tr=w.length,tn=q.length;tG(h,2);let ti=new class{constructor(){this.src=NaN,this.p=NaN,this.lastmatch=NaN,this.ms=new je}};return tR(h,ti),te(ti.ms,h,w,tr,q,tn),ti.src=0,ti.p=0,ti.lastmatch=null,tI(h,Pt,3),1},gsub:function(h){let w=t7(h,1),q=w.length,tr=t7(h,2),tn=tr.length,ti=null,to=tY(h,3),ts=ei(h,4,q+1),tu=94===tr[0],tl=0,tc=new je(h),tp=new tq;for(t1(h,to===ty||to===tv||to===td||to===tb,3,"string/function/table expected"),t3(h,tp),tu&&(tr=tr.subarray(1),tn--),te(tc,h,w,q,tr,tn),w=0,tr=0;tl<ts;){let h;if(Bt(tc),null!==(h=ot(tc,w,tr))&&h!==ti)tl++,$t(tc,tp,w,h,to),w=ti=h;else{if(!(w<tc.src_end))break;tZ(tp,tc.src[w++])}if(tu)break}return tJ(tp,tc.src.subarray(w,tc.src_end),tc.src_end-w),eu(tp),tP(h,tl),2},len:function(h){return tP(h,t7(h,1).length),1},lower:function(h){let w=t7(h,1),q=w.length,tr=new Uint8Array(q);for(let h=0;h<q;h++){let q=w[h];x(q)&&(q|=32),tr[h]=q}return tC(h,tr),1},match:function(h){return Xt(h,0)},pack:function(h){let w=new tq,q=new nt(h),tr={s:t7(h,1),off:0},tn=1,ti=0;for(tk(h),t3(h,w);tr.off<tr.s.length;){let to=zt(q,ti,tr),ts=to.opt,tu=to.size,tl=to.ntoalign;for(ti+=tl+tu;tl-- >0;)tZ(w,0);switch(tn++,ts){case 0:{let tr=t5(h,tn);if(tu<4){let w=1<<8*tu-1;t1(h,-w<=tr&&tr<w,tn,"integer overflow")}he(w,tr,q.islittle,tu,tr<0);break}case 1:{let tr=t5(h,tn);tu<4&&t1(h,tr>>>0<1<<8*tu,tn,"unsigned overflow"),he(w,tr>>>0,q.islittle,tu,!1);break}case 2:{let tr=es(w,tu),ti=t6(h,tn),to=new DataView(tr.buffer,tr.byteOffset,tr.byteLength);4===tu?to.setFloat32(0,ti,q.islittle):to.setFloat64(0,ti,q.islittle),tQ(w,tu);break}case 3:{let q=t7(h,tn),tr=q.length;for(t1(h,tr<=tu,tn,"string longer than given size"),tJ(w,q,tr);tr++<tu;)tZ(w,0);break}case 4:{let tr=t7(h,tn),to=tr.length;t1(h,tu>=4||to<1<<8*tu,tn,"string length does not fit in given size"),he(w,to,q.islittle,tu,0),tJ(w,tr,to),ti+=to;break}case 5:{let q=t7(h,tn),tr=q.length;t1(h,0>em(q,0),tn,"strings contains zeros"),tJ(w,q,tr),tZ(w,0),ti+=tr+1;break}case 6:tZ(w,0);case 7:case 8:tn--}}return eu(w),1},packsize:function(h){let w=new nt(h),q={s:t7(h,1),off:0},tr=0;for(;q.off<q.s.length;){let tn=zt(w,tr,q),ti=tn.opt,to=tn.size;switch(t1(h,tr<=2147483647-(to+=tn.ntoalign),1,"format result too large"),tr+=to,ti){case 4:case 5:t2(h,1,"variable-length format")}}return tP(h,tr),1},rep:function(h){let w=t7(h,1),q=w.length,tr=t5(h,2),tn=eo(h,3,""),ti=tn.length;if(tr<=0)tN(h,"");else{if(q+ti<q||q+ti>2147483647/tr)return er(h,ev("resulting string too large"));{let to=tr*q+(tr-1)*ti,ts=new tq,tu=t4(h,ts,to),tl=0;for(;tr-- >1;)tu.set(w,tl),tl+=q,ti>0&&(tu.set(tn,tl),tl+=ti);tu.set(w,tl),el(ts,to)}}return 1},reverse:function(h){let w=t7(h,1),q=w.length,tr=new Uint8Array(q);for(let h=0;h<q;h++)tr[h]=w[q-1-h];return tC(h,tr),1},sub:function(h){let w=t7(h,1),q=w.length,tr=ve(t5(h,2),q),tn=ve(ei(h,3,-1),q);return tr<1&&(tr=1),tn>q&&(tn=q),tr<=tn?tC(h,w.subarray(tr-1,tr-1+(tn-tr+1))):tN(h,""),1},unpack:function(h){let w=new nt(h),q={s:t7(h,1),off:0},tr=t7(h,2),tn=tr.length,ti=ve(ei(h,3,1),tn)-1,to=0;for(t1(h,ti<=tn&&ti>=0,3,"initial position out of string");q.off<q.s.length;){let ts=zt(w,ti,q),tu=ts.opt,tl=ts.size,tc=ts.ntoalign;switch(ti+tc+tl>tn&&t2(h,2,ev("data string too short")),ti+=tc,t8(h,2,"too many results"),to++,tu){case 0:case 1:{let q=fe(h,tr.subarray(ti),w.islittle,tl,0===tu);tP(h,q);break}case 2:tU(h,ae(0,tr.subarray(ti),w.islittle,tl));break;case 3:tC(h,tr.subarray(ti,ti+tl));break;case 4:{let q=fe(h,tr.subarray(ti),w.islittle,tl,0);t1(h,ti+q+tl<=tn,2,"data string too short"),tC(h,tr.subarray(ti+tl,ti+tl+q)),ti+=q;break}case 5:{let w=em(tr,0,ti);-1===w&&(w=tr.length-ti),tC(h,tr.subarray(ti,w)),ti=w+1;break}case 7:case 6:case 8:to--}ti+=tl}return tP(h,ti+1),to+1},upper:function(h){let w=t7(h,1),q=w.length,tr=new Uint8Array(q);for(let h=0;h<q;h++){let q=w[h];_(q)&&(q&=223),tr[h]=q}return tC(h,tr),1}};h.exports.luaopen_string=function(h){return en(h,eE),tT(h,0,1),tN(h,""),tD(h,-2),tj(h,-2),tS(h,1),tD(h,-2),tB(h,-2,ev("__index",!0)),tS(h,1),1}},function(h,w,q){let{lua_gettop:tr,lua_pushcfunction:tn,lua_pushfstring:ti,lua_pushinteger:to,lua_pushnil:ts,lua_pushstring:tu,lua_pushvalue:tl,lua_setfield:tc,lua_tointeger:tp}=q(2),{luaL_Buffer:td,luaL_addvalue:tm,luaL_argcheck:ty,luaL_buffinit:tv,luaL_checkinteger:tb,luaL_checkstack:tx,luaL_checkstring:tT,luaL_error:tE,luaL_newlib:tA,luaL_optinteger:tO,luaL_pushresult:tw}=q(7),{luastring_of:tL,to_luastring:tS}=q(5),P=function(h){return(192&h)==128},M=function(h,w){return h>=0?h:0-h>w?0:w+h+1},tI=[255,127,2047,65535],ft=function(h,w){let q=h[w],tr=0;if(q<128)tr=q;else{let tn=0;for(;64&q;){let ti=h[w+ ++tn];if((192&ti)!=128)return null;tr=tr<<6|63&ti,q<<=1}if(tr|=(127&q)<<5*tn,tn>3||tr>1114111||tr<=tI[tn])return null;w+=tn}return{code:tr,pos:w+1}},tP=tS("%U"),Ot=function(h,w){let q=tb(h,w);ty(h,0<=q&&q<=1114111,w,"value out of range"),ti(h,tP,q)},H=function(h){let w=tT(h,1),q=w.length,tr=tp(h,2)-1;if(tr<0)tr=0;else if(tr<q)for(tr++;P(w[tr]);)tr++;if(tr>=q)return 0;{let q=ft(w,tr);return null===q||P(w[q.pos])?tE(h,tS("invalid UTF-8 code")):(to(h,tr+1),to(h,q.code),2)}},tR={char:function(h){let w=tr(h);if(1===w)Ot(h,1);else{let q=new td;tv(h,q);for(let tr=1;tr<=w;tr++)Ot(h,tr),tm(q);tw(q)}return 1},codepoint:function(h){let w=tT(h,1),q=M(tO(h,2,1),w.length),tr=M(tO(h,3,q),w.length);if(ty(h,q>=1,2,"out of range"),ty(h,tr<=w.length,3,"out of range"),q>tr)return 0;if(tr-q>=Number.MAX_SAFE_INTEGER)return tE(h,"string slice too long");let tn=tr-q+1;for(tx(h,tn,"string slice too long"),tn=0,q-=1;q<tr;){let tr=ft(w,q);if(null===tr)return tE(h,"invalid UTF-8 code");to(h,tr.code),q=tr.pos,tn++}return tn},codes:function(h){return tT(h,1),tn(h,H),tl(h,1),to(h,0),3},len:function(h){let w=0,q=tT(h,1),tr=q.length,tn=M(tO(h,2,1),tr),ti=M(tO(h,3,-1),tr);for(ty(h,1<=tn&&--tn<=tr,2,"initial position out of string"),ty(h,--ti<tr,3,"final position out of string");tn<=ti;){let tr=ft(q,tn);if(null===tr)return ts(h),to(h,tn+1),2;tn=tr.pos,w++}return to(h,w),1},offset:function(h){let w=tT(h,1),q=tb(h,2),tr=q>=0?1:w.length+1;if(tr=M(tO(h,3,tr),w.length),ty(h,1<=tr&&--tr<=w.length,3,"position out of range"),0===q)for(;tr>0&&P(w[tr]);)tr--;else if(P(w[tr])&&tE(h,"initial position is a continuation byte"),q<0)for(;q<0&&tr>0;){do tr--;while(tr>0&&P(w[tr]));q++}else for(q--;q>0&&tr<w.length;){do tr++;while(P(w[tr]));q--}return 0===q?to(h,tr+1):ts(h),1}},tN=tL(91,0,45,127,194,45,244,93,91,128,45,191,93,42);h.exports.luaopen_utf8=function(h){return tA(h,tR),tu(h,tN),tc(h,-2,tS("charpattern",!0)),1}},function(h,w,q){let tr;let{LUA_OPLT:tn,LUA_TNUMBER:ti,lua_compare:to,lua_gettop:ts,lua_isinteger:tu,lua_isnoneornil:tl,lua_pushboolean:tc,lua_pushinteger:tp,lua_pushliteral:td,lua_pushnil:tm,lua_pushnumber:ty,lua_pushvalue:tv,lua_setfield:tb,lua_settop:tx,lua_tointeger:tT,lua_tointegerx:tE,lua_type:tA}=q(2),{luaL_argcheck:tO,luaL_argerror:tw,luaL_checkany:tL,luaL_checkinteger:tS,luaL_checknumber:tI,luaL_error:tP,luaL_newlib:tR,luaL_optnumber:tN}=q(7),{LUA_MAXINTEGER:tM,LUA_MININTEGER:tk,lua_numbertointeger:tU}=q(3),{to_luastring:tC}=q(5),lt=function(){return tr=1103515245*tr+12345&2147483647},dt=function(h,w){let q=tU(w);!1!==q?tp(h,q):ty(h,w)},tD={abs:function(h){if(tu(h,1)){let w=tT(h,1);w<0&&(w=0|-w),tp(h,w)}else ty(h,Math.abs(tI(h,1)));return 1},acos:function(h){return ty(h,Math.acos(tI(h,1))),1},asin:function(h){return ty(h,Math.asin(tI(h,1))),1},atan:function(h){let w=tI(h,1),q=tN(h,2,1);return ty(h,Math.atan2(w,q)),1},ceil:function(h){return tu(h,1)?tx(h,1):dt(h,Math.ceil(tI(h,1))),1},cos:function(h){return ty(h,Math.cos(tI(h,1))),1},deg:function(h){return ty(h,tI(h,1)*(180/Math.PI)),1},exp:function(h){return ty(h,Math.exp(tI(h,1))),1},floor:function(h){return tu(h,1)?tx(h,1):dt(h,Math.floor(tI(h,1))),1},fmod:function(h){if(tu(h,1)&&tu(h,2)){let w=tT(h,2);0===w?tw(h,2,"zero"):tp(h,tT(h,1)%w|0)}else{let w=tI(h,1),q=tI(h,2);ty(h,w%q)}return 1},log:function(h){let w,q=tI(h,1);if(tl(h,2))w=Math.log(q);else{let tr=tI(h,2);w=2===tr?Math.log2(q):10===tr?Math.log10(q):Math.log(q)/Math.log(tr)}return ty(h,w),1},max:function(h){let w=ts(h),q=1;tO(h,w>=1,1,"value expected");for(let tr=2;tr<=w;tr++)to(h,q,tr,tn)&&(q=tr);return tv(h,q),1},min:function(h){let w=ts(h),q=1;tO(h,w>=1,1,"value expected");for(let tr=2;tr<=w;tr++)to(h,tr,q,tn)&&(q=tr);return tv(h,q),1},modf:function(h){if(tu(h,1))tx(h,1),ty(h,0);else{let w=tI(h,1),q=w<0?Math.ceil(w):Math.floor(w);dt(h,q),ty(h,w===q?0:w-q)}return 2},rad:function(h){return ty(h,tI(h,1)*(Math.PI/180)),1},random:function(h){let w,q,tn=void 0===tr?Math.random():lt()/2147483648;switch(ts(h)){case 0:return ty(h,tn),1;case 1:w=1,q=tS(h,1);break;case 2:w=tS(h,1),q=tS(h,2);break;default:return tP(h,"wrong number of arguments")}return tO(h,w<=q,1,"interval is empty"),tO(h,w>=0||q<=tM+w,1,"interval too large"),tp(h,Math.floor(tn*=q-w+1)+w),1},randomseed:function(h){return 0==(tr=0|tI(h,1))&&(tr=1),lt(),0},sin:function(h){return ty(h,Math.sin(tI(h,1))),1},sqrt:function(h){return ty(h,Math.sqrt(tI(h,1))),1},tan:function(h){return ty(h,Math.tan(tI(h,1))),1},tointeger:function(h){let w=tE(h,1);return!1!==w?tp(h,w):(tL(h,1),tm(h)),1},type:function(h){return tA(h,1)===ti?tu(h,1)?td(h,"integer"):td(h,"float"):(tL(h,1),tm(h)),1},ult:function(h){let w=tS(h,1),q=tS(h,2);return tc(h,w>=0?q<0||w<q:q<0&&w<q),1}};h.exports.luaopen_math=function(h){return tR(h,tD),ty(h,Math.PI),tb(h,-2,tC("pi",!0)),ty(h,1/0),tb(h,-2,tC("huge",!0)),tp(h,tM),tb(h,-2,tC("maxinteger",!0)),tp(h,tk),tb(h,-2,tC("mininteger",!0)),1}},function(h,w,q){let tr;let{LUA_MASKCALL:tn,LUA_MASKCOUNT:ti,LUA_MASKLINE:to,LUA_MASKRET:ts,LUA_REGISTRYINDEX:tu,LUA_TFUNCTION:tl,LUA_TNIL:tc,LUA_TTABLE:tp,LUA_TUSERDATA:td,lua_Debug:tm,lua_call:ty,lua_checkstack:tv,lua_gethook:tb,lua_gethookcount:tx,lua_gethookmask:tT,lua_getinfo:tE,lua_getlocal:tA,lua_getmetatable:tO,lua_getstack:tw,lua_getupvalue:tL,lua_getuservalue:tS,lua_insert:tI,lua_iscfunction:tP,lua_isfunction:tR,lua_isnoneornil:tN,lua_isthread:tM,lua_newtable:tk,lua_pcall:tU,lua_pop:tC,lua_pushboolean:tD,lua_pushfstring:tF,lua_pushinteger:tB,lua_pushlightuserdata:tj,lua_pushliteral:tG,lua_pushnil:tV,lua_pushstring:tX,lua_pushvalue:tH,lua_rawgetp:tz,lua_rawsetp:tK,lua_rotate:tY,lua_setfield:tW,lua_sethook:tq,lua_setlocal:tZ,lua_setmetatable:tJ,lua_settop:tQ,lua_setupvalue:t$,lua_setuservalue:t0,lua_tojsstring:t1,lua_toproxy:t2,lua_tostring:t3,lua_tothread:t4,lua_touserdata:t5,lua_type:t6,lua_upvalueid:t8,lua_upvaluejoin:t7,lua_xmove:t9}=q(2),{luaL_argcheck:er,luaL_argerror:en,luaL_checkany:ei,luaL_checkinteger:eo,luaL_checkstring:es,luaL_checktype:eu,luaL_error:el,luaL_loadbuffer:ep,luaL_newlib:ed,luaL_optinteger:e_,luaL_optstring:eg,luaL_traceback:em,lua_writestringerror:ey}=q(7),ev=q(17),{luastring_indexOf:eb,to_luastring:ex}=q(5),_e=function(h,w,q){h===w||tv(w,q)||el(h,ex("stack overflow",!0))},ve=function(h){return tM(h,1)?{arg:1,thread:t4(h,1)}:{arg:0,thread:h}},xe=function(h,w,q){tX(h,q),tW(h,-2,w)},Ue=function(h,w,q){tB(h,q),tW(h,-2,w)},ne=function(h,w,q){tD(h,q),tW(h,-2,w)},se=function(h,w,q){h==w?tY(h,-2,1):t9(w,h,1),tW(h,-2,q)},be=function(h,w){let q=eo(h,2);eu(h,1,tl);let tr=w?tL(h,1,q):t$(h,1,q);return null===tr?0:(tX(h,tr),tI(h,-(w+1)),w+1)},c=function(h,w,q){let tr=eo(h,q);return eu(h,w,tl),er(h,null!==tL(h,w,tr),q,"invalid upvalue index"),tr},eT=ex("__hooks__",!0),eE=["call","return","line","count","tail call"].map(h=>ex(h)),_=function(h,w){tz(h,tu,eT);let q=t5(h,-1).get(h);q&&(q(h),tX(h,eE[w.event]),w.currentline>=0?tB(h,w.currentline):tV(h),ev.lua_assert(tE(h,ex("lS"),w)),ty(h,2,0))},eO={gethook:function(h){let w,q=ve(h).thread,tr=new Uint8Array(5),ti=tT(q),tl=tb(q);return null===tl?tV(h):tl!==_?tG(h,"external hook"):(tz(h,tu,eT),t5(h,-1).get(q)(h)),tX(h,(w=0,ti&tn&&(tr[w++]=99),ti&ts&&(tr[w++]=114),ti&to&&(tr[w++]=108),tr.subarray(0,w))),tB(h,tx(q)),3},getinfo:function(h){let w=new tm,q=ve(h),tr=q.arg,tn=q.thread,ti=eg(h,tr+2,"flnStu");if(_e(h,tn,3),tR(h,tr+1))ti=tF(h,ex(">%s"),ti),tH(h,tr+1),t9(h,tn,1);else if(!tw(tn,eo(h,tr+1),w))return tV(h),1;return tE(tn,ti,w)||en(h,tr+2,"invalid option"),tk(h),eb(ti,83)>-1&&(xe(h,ex("source",!0),w.source),xe(h,ex("short_src",!0),w.short_src),Ue(h,ex("linedefined",!0),w.linedefined),Ue(h,ex("lastlinedefined",!0),w.lastlinedefined),xe(h,ex("what",!0),w.what)),eb(ti,108)>-1&&Ue(h,ex("currentline",!0),w.currentline),eb(ti,117)>-1&&(Ue(h,ex("nups",!0),w.nups),Ue(h,ex("nparams",!0),w.nparams),ne(h,ex("isvararg",!0),w.isvararg)),eb(ti,110)>-1&&(xe(h,ex("name",!0),w.name),xe(h,ex("namewhat",!0),w.namewhat)),eb(ti,116)>-1&&ne(h,ex("istailcall",!0),w.istailcall),eb(ti,76)>-1&&se(h,tn,ex("activelines",!0)),eb(ti,102)>-1&&se(h,tn,ex("func",!0)),1},getlocal:function(h){let w=ve(h),q=w.thread,tr=w.arg,tn=new tm,ti=eo(h,tr+2);if(tR(h,tr+1))return tH(h,tr+1),tX(h,tA(h,null,ti)),1;{if(!tw(q,eo(h,tr+1),tn))return en(h,tr+1,"level out of range");_e(h,q,1);let w=tA(q,tn,ti);return w?(t9(q,h,1),tX(h,w),tY(h,-2,1),2):(tV(h),1)}},getmetatable:function(h){return ei(h,1),tO(h,1)||tV(h),1},getregistry:function(h){return tH(h,tu),1},getupvalue:function(h){return be(h,1)},getuservalue:function(h){return t6(h,1)!==td?tV(h):tS(h,1),1},sethook:function(h){let w,q,tr,tp,td=ve(h),tm=td.thread,ty=td.arg;if(tN(h,ty+1))tQ(h,ty+1),tr=null,w=0,q=0;else{var tv;let tu;let tc=es(h,ty+2);eu(h,ty+1,tl),q=e_(h,ty+3,0),tr=_,tv=q,tu=0,eb(tc,99)>-1&&(tu|=tn),eb(tc,114)>-1&&(tu|=ts),eb(tc,108)>-1&&(tu|=to),tv>0&&(tu|=ti),w=tu}tz(h,tu,eT)===tc?(tj(h,tp=new WeakMap),tK(h,tu,eT)):tp=t5(h,-1);let tb=t2(h,ty+1);return tp.set(tm,tb),tq(tm,tr,w,q),0},setlocal:function(h){let w=ve(h),q=w.thread,tr=w.arg,tn=new tm,ti=eo(h,tr+1),to=eo(h,tr+2);if(!tw(q,ti,tn))return en(h,tr+1,"level out of range");ei(h,tr+3),tQ(h,tr+3),_e(h,q,1),t9(h,q,1);let ts=tZ(q,tn,to);return null===ts&&tC(q,1),tX(h,ts),1},setmetatable:function(h){let w=t6(h,2);return er(h,w==tc||w==tp,2,"nil or table expected"),tQ(h,2),tJ(h,1),1},setupvalue:function(h){return ei(h,3),be(h,0)},setuservalue:function(h){return eu(h,1,td),ei(h,2),tQ(h,2),t0(h,1),1},traceback:function(h){let w=ve(h),q=w.thread,tr=w.arg,tn=t3(h,tr+1);if(null!==tn||tN(h,tr+1)){let w=e_(h,tr+2,h===q?1:0);em(h,q,tn,w)}else tH(h,tr+1);return 1},upvalueid:function(h){let w=c(h,1,2);return tj(h,t8(h,1,w)),1},upvaluejoin:function(h){let w=c(h,1,2),q=c(h,3,4);return er(h,!tP(h,1),1,"Lua function expected"),er(h,!tP(h,3),3,"Lua function expected"),t7(h,1,w,3,q),0}};"u">typeof window&&(tr=function(){let h=prompt("lua_debug>","");return null!==h?h:""}),tr&&(eO.debug=function(h){for(;;){let w=tr();if("cont"===w)return 0;if(0===w.length)continue;let q=ex(w);(ep(h,q,q.length,ex("=(debug command)",!0))||tU(h,0,0,0))&&ey(t1(h,-1),`
`),tQ(h,0)}}),h.exports.luaopen_debug=function(h){return ed(h,eO),1}},function(h,w,q){let tr,tn;let{LUA_DIRSEP:ti,LUA_EXEC_DIR:to,LUA_JSPATH_DEFAULT:ts,LUA_PATH_DEFAULT:tu,LUA_PATH_MARK:tl,LUA_PATH_SEP:tc}=q(3),{LUA_OK:tp,LUA_REGISTRYINDEX:td,LUA_TNIL:tm,LUA_TTABLE:ty,lua_callk:tv,lua_createtable:tb,lua_getfield:tx,lua_insert:tT,lua_isfunction:tE,lua_isnil:tA,lua_isstring:tO,lua_newtable:tw,lua_pop:tL,lua_pushboolean:tS,lua_pushcclosure:tI,lua_pushcfunction:tP,lua_pushfstring:tR,lua_pushglobaltable:tN,lua_pushlightuserdata:tM,lua_pushliteral:tk,lua_pushlstring:tU,lua_pushnil:tC,lua_pushstring:tD,lua_pushvalue:tF,lua_rawgeti:tB,lua_rawgetp:tj,lua_rawseti:tG,lua_rawsetp:tV,lua_remove:tX,lua_setfield:tH,lua_setmetatable:tz,lua_settop:tK,lua_toboolean:tY,lua_tostring:tW,lua_touserdata:tq,lua_upvalueindex:tZ}=q(2),{LUA_LOADED_TABLE:tJ,LUA_PRELOAD_TABLE:tQ,luaL_Buffer:t$,luaL_addvalue:t0,luaL_buffinit:t1,luaL_checkstring:t2,luaL_error:t3,luaL_getsubtable:t4,luaL_gsub:t5,luaL_len:t6,luaL_loadfile:t8,luaL_newlib:t7,luaL_optstring:t9,luaL_pushresult:er,luaL_setfuncs:en}=q(7),ei=q(17),{luastring_indexOf:eo,to_jsstring:es,to_luastring:eu,to_uristring:el}=q(5),ep=q(0),ed="u">typeof window?window:"u">typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:(0,eval)("this"),e_=eu("__JSLIBS__"),eg=eu("luaopen_"),em=eu("_"),ey=eu("\x01");tr=function(h,w,q){w=el(w);let tr=new XMLHttpRequest;if(tr.open("GET",w,!1),tr.send(),tr.status<200||tr.status>=300)return tD(h,eu(`${tr.status}: ${tr.statusText}`)),null;let tn,ti=tr.response;/\/\/[#@] sourceURL=/.test(ti)||(ti+=" //# sourceURL="+w);try{tn=Function("fengari",ti)}catch(w){return tD(h,eu(`${w.name}: ${w.message}`)),null}let to=tn(ep);return"function"==typeof to||"object"==typeof to&&null!==to?to:void 0===to?ed:(tD(h,eu(`library returned unexpected type (${typeof to})`)),null)},tn=function(h){h=el(h);let w=new XMLHttpRequest;return w.open("GET",h,!1),w.send(),w.status>=200&&w.status<=299};let _e=function(h,w,q){let tn=Ue(h,w);if(null===tn){if(null===(tn=tr(h,w,42===q[0])))return 1;ne(h,w,tn)}if(42===q[0])return tS(h,1),0;{let w;let tr=(w=tn[es(q)])&&"function"==typeof w?w:(tR(h,eu("undefined symbol: %s"),q),null);return null===tr?2:(tP(h,tr),0)}},xe=function(h,w,q,tr){let tn,ti=`${q}${ei.LUA_VERSUFFIX}`;tD(h,eu(ti));let to=ed[ti];void 0===to&&(to=ed[q]),void 0===to||(tx(h,td,eu("LUA_NOENV")),tn=tY(h,-1),tL(h,1),tn)?tD(h,tr):(to=t5(h,eu(to),eu(tc+tc,!0),eu(tc+es(ey)+tc,!0)),t5(h,to,ey,tr),tX(h,-2)),tH(h,-3,w),tL(h,1)},Ue=function(h,w){tj(h,td,e_),tx(h,-1,w);let q=tq(h,-1);return tL(h,2),q},ne=function(h,w,q){tj(h,td,e_),tM(h,q),tF(h,-1),tH(h,-3,w),tG(h,-2,t6(h,-2)+1),tL(h,1)},se=function(h,w){for(;w[0]===tc.charCodeAt(0);)w=w.subarray(1);if(0===w.length)return null;let q=eo(w,tc.charCodeAt(0));return q<0&&(q=w.length),tU(h,w,q),w.subarray(q)},be=function(h,w,q,tr,ti){let to=new t$;for(t1(h,to),0!==tr[0]&&(w=t5(h,w,tr,ti));null!==(q=se(h,q));){let q=t5(h,tW(h,-1),eu(tl,!0),w);if(tX(h,-2),tn(q))return q;tR(h,eu(`
	no file '%s'`),q),tX(h,-2),t0(to)}return er(to),null},c=function(h,w,q,tr){tx(h,tZ(1),q);let tn=tW(h,-1);return null===tn&&t3(h,eu("'package.%s' must be a string"),q),be(h,w,tn,eu("."),tr)},p=function(h,w,q){return w?(tD(h,q),2):t3(h,eu(`error loading module '%s' from file '%s':
	%s`),tW(h,1),q,tW(h,-1))},b=function(h){let w=t2(h,1),q=c(h,w,eu("path",!0),eu(ti,!0));return null===q?1:p(h,t8(h,q)===tp,q)},_=function(h,w,q){let tr;let tn=eo(q=t5(h,q,eu("."),em),45);if(tn>=0){tr=tU(h,q,tn),tr=tR(h,eu("%s%s"),eg,tr);let ti=_e(h,w,tr);if(2!==ti)return ti;q=tn+1}return tr=tR(h,eu("%s%s"),eg,q),_e(h,w,tr)},x=function(h){let w=t2(h,1),q=c(h,w,eu("jspath",!0),eu(ti,!0));return null===q?1:p(h,0===_(h,q,w),q)},N=function(h){let w,q=t2(h,1),tr=eo(q,46);if(tr<0)return 0;tU(h,q,tr);let tn=c(h,tW(h,-1),eu("jspath",!0),eu(ti,!0));return null===tn?1:0!==(w=_(h,tn,q))?2!=w?p(h,0,tn):(tD(h,eu(`
	no module '%s' in file '%s'`),q,tn),1):(tD(h,tn),2)},A=function(h){let w=t2(h,1);return tx(h,td,tQ),tx(h,-1,w)===tm&&tR(h,eu(`
	no field package.preload['%s']`),w),1},Q=function(h,w,q){for(;w===tp?(tB(h,3,q.i)===tm&&(tL(h,1),er(q.msg),t3(h,eu("module '%s' not found:%s"),q.name,tW(h,-1))),tD(h,q.name),tv(h,1,2,q,Q)):w=tp,!tE(h,-2);q.i++)tO(h,-2)?(tL(h,1),t0(q.msg)):tL(h,2);return q.k(h,tp,q.ctx)},Mt=function(h,w,q){return tD(h,q),tT(h,-2),tv(h,2,1,q,Wt),Wt(h,tp,q)},Wt=function(h,w,q){return tA(h,-1)||tH(h,2,q),tx(h,2,q)==tm&&(tS(h,1),tF(h,-1),tH(h,2,q)),1},ev={loadlib:function(h){let w=t2(h,1),q=t2(h,2),tr=_e(h,w,q);return 0===tr?1:(tC(h),tT(h,-2),tk(h,1===tr?"open":"init"),3)},searchpath:function(h){return null!==be(h,t2(h,1),t2(h,2),t9(h,3,"."),t9(h,4,ti))?1:(tC(h),tT(h,-2),2)}},eb={require:function(h){let w,q=t2(h,1);return tK(h,1),tx(h,td,tJ),tx(h,2,q),tY(h,-1)?1:(tL(h,1),t1(h,w=new t$),tx(h,tZ(1),eu("searchers",!0))!==ty&&t3(h,eu("'package.searchers' must be a table")),Q(h,tp,{name:q,i:1,msg:w,ctx:q,k:Mt}))}};h.exports.luaopen_package=function(h){return tw(h),tb(h,0,1),tz(h,-2),tV(h,td,e_),t7(h,ev),function(h){let w=[A,b,x,N,null];tb(h);for(let q=0;w[q];q++)tF(h,-2),tI(h,w[q],1),tG(h,-2,q+1);tH(h,-2,eu("searchers",!0))}(h),xe(h,eu("path",!0),"LUA_PATH",tu),xe(h,eu("jspath",!0),"LUA_JSPATH",ts),tk(h,ti+`
`+tc+`
`+tl+`
`+to+`
-
`),tH(h,-2,eu("config",!0)),t4(h,td,tJ),tH(h,-2,eu("loaded",!0)),t4(h,td,tQ),tH(h,-2,eu("preload",!0)),tN(h),tF(h,-2),en(h,eb,1),tL(h,1),1}},function(h,w,q){let{lua_pushinteger:tr,lua_pushliteral:tn,lua_setfield:ti}=q(2),{luaL_newlib:to}=q(7),{FENGARI_AUTHORS:ts,FENGARI_COPYRIGHT:tu,FENGARI_RELEASE:tl,FENGARI_VERSION:tc,FENGARI_VERSION_MAJOR:tp,FENGARI_VERSION_MINOR:td,FENGARI_VERSION_NUM:tm,FENGARI_VERSION_RELEASE:ty,to_luastring:tv}=q(5);h.exports.luaopen_fengari=function(h){return to(h,{}),tn(h,ts),ti(h,-2,tv("AUTHORS")),tn(h,tu),ti(h,-2,tv("COPYRIGHT")),tn(h,tl),ti(h,-2,tv("RELEASE")),tn(h,tc),ti(h,-2,tv("VERSION")),tn(h,tp),ti(h,-2,tv("VERSION_MAJOR")),tn(h,td),ti(h,-2,tv("VERSION_MINOR")),tr(h,tm),ti(h,-2,tv("VERSION_NUM")),tn(h,ty),ti(h,-2,tv("VERSION_RELEASE")),1}},function(h,w,q){q.r(w),q.d(w,"L",function(){return tM}),q.d(w,"load",function(){return Ot});var tr=q(0);q.d(w,"FENGARI_AUTHORS",function(){return tr.FENGARI_AUTHORS}),q.d(w,"FENGARI_COPYRIGHT",function(){return tr.FENGARI_COPYRIGHT}),q.d(w,"FENGARI_RELEASE",function(){return tr.FENGARI_RELEASE}),q.d(w,"FENGARI_VERSION",function(){return tr.FENGARI_VERSION}),q.d(w,"FENGARI_VERSION_MAJOR",function(){return tr.FENGARI_VERSION_MAJOR}),q.d(w,"FENGARI_VERSION_MINOR",function(){return tr.FENGARI_VERSION_MINOR}),q.d(w,"FENGARI_VERSION_NUM",function(){return tr.FENGARI_VERSION_NUM}),q.d(w,"FENGARI_VERSION_RELEASE",function(){return tr.FENGARI_VERSION_RELEASE}),q.d(w,"luastring_eq",function(){return tr.luastring_eq}),q.d(w,"luastring_indexOf",function(){return tr.luastring_indexOf}),q.d(w,"luastring_of",function(){return tr.luastring_of}),q.d(w,"to_jsstring",function(){return tr.to_jsstring}),q.d(w,"to_luastring",function(){return tr.to_luastring}),q.d(w,"to_uristring",function(){return tr.to_uristring}),q.d(w,"lua",function(){return tr.lua}),q.d(w,"lauxlib",function(){return tr.lauxlib}),q.d(w,"lualib",function(){return tr.lualib});var tn=q(21);q.d(w,"interop",function(){return tn});let{LUA_ERRRUN:ti,LUA_ERRSYNTAX:to,LUA_OK:ts,LUA_VERSION_MAJOR:tu,LUA_VERSION_MINOR:tl,lua_Debug:tc,lua_getinfo:tp,lua_getstack:td,lua_gettop:tm,lua_insert:ty,lua_pcall:tv,lua_pop:tb,lua_pushcfunction:tx,lua_pushstring:tT,lua_remove:tE,lua_setglobal:tA,lua_tojsstring:tO}=tr.lua,{luaL_loadbuffer:tw,luaL_newstate:tL,luaL_requiref:tS}=tr.lauxlib,{checkjs:tI,luaopen_js:tP,push:tR,tojs:tN}=tn,tM=tL();function Ot(h,w){if("string"==typeof h)h=Object(tr.to_luastring)(h);else if(!(h instanceof Uint8Array))throw TypeError("expects an array of bytes or javascript string");let q,tn=tw(tM,h,null,w=w?Object(tr.to_luastring)(w):null);if(q=tn===to?SyntaxError(tO(tM,-1)):tN(tM,-1),tb(tM,1),tn!==ts)throw q;return q}if(tr.lualib.luaL_openlibs(tM),tS(tM,Object(tr.to_luastring)("js"),tP,1),tb(tM,1),tT(tM,Object(tr.to_luastring)(tr.FENGARI_COPYRIGHT)),tA(tM,Object(tr.to_luastring)("_COPYRIGHT")),"u">typeof document&&document instanceof HTMLDocument){let H=function(h){switch(h){case"anonymous":return"omit";case"use-credentials":return"include";default:return"same-origin"}},$=function(h){let w=new tc;return td(h,2,w)&&tp(h,Object(tr.to_luastring)("Sl"),w),tR(h,new ErrorEvent("error",{bubbles:!0,cancelable:!0,message:tO(h,1),error:tN(h,1),filename:w.short_src?Object(tr.to_jsstring)(w.short_src):void 0,lineno:w.currentline>0?w.currentline:void 0})),1},lt=function(h,w,q){let tr,tn=tw(tM,w,null,q);if(tn===to){let w=tO(tM,-1),q=h.src?h.src:document.location,tn,ti=SyntaxError(w,q,tn);tr=new ErrorEvent("error",{message:w,error:ti,filename:q,lineno:tn})}else if(tn===ts){let w=tm(tM);tx(tM,$),ty(tM,w),Object.defineProperty(document,"currentScript",{value:h,configurable:!0}),tn=tv(tM,0,0,w),delete document.currentScript,tE(tM,w),tn===ti&&(tr=tI(tM,-1))}tn!==ts&&(void 0===tr&&(tr=new ErrorEvent("error",{message:tO(tM,-1),error:tN(tM,-1)})),tb(tM,1),window.dispatchEvent(tr)&&console.error("uncaught exception",tr.error))},dt=function(h,w,q){if(h.status>=200&&h.status<300){let tn=h.response;lt(w,tn="string"==typeof tn?Object(tr.to_luastring)(h.response):new Uint8Array(tn),q)}else w.dispatchEvent(new Event("error"))},Vt=function(h){if(h.src){let w=Object(tr.to_luastring)("@"+h.src);if("complete"===document.readyState||h.async){if("function"==typeof fetch)fetch(h.src,{method:"GET",credentials:H(h.crossorigin),redirect:"follow",integrity:h.integrity}).then(function(h){if(h.ok)return h.arrayBuffer();throw Error("unable to fetch")}).then(function(q){lt(h,new Uint8Array(q),w)}).catch(function(w){h.dispatchEvent(new Event("error"))});else{let q=new XMLHttpRequest;q.open("GET",h.src,!0),q.responseType="arraybuffer",q.onreadystatechange=function(){4===q.readyState&&dt(q,h,w)},q.send()}}else{let q=new XMLHttpRequest;q.open("GET",h.src,!1),q.send(),dt(q,h,w)}}else{let w=Object(tr.to_luastring)(h.innerHTML),q=h.id?Object(tr.to_luastring)("="+h.id):w;lt(h,w,q)}},h=/^(.*?\/.*?)([\t ]*;.*)?$/,w=/^(\d+)\.(\d+)$/,B=function(q){if("SCRIPT"!==q.tagName)return;let tr=h.exec(q.type);if(!tr)return;let tn=tr[1];if("application/lua"===tn||"text/lua"===tn){if(q.hasAttribute("lua-version")){let h=w.exec(q.getAttribute("lua-version"));if(!h||h[1]!==tu||h[2]!==tl)return}Vt(q)}};"u">typeof MutationObserver?new MutationObserver(function(h,w){for(let w=0;w<h.length;w++){let q=h[w];for(let h=0;h<q.addedNodes.length;h++)B(q.addedNodes[h])}}).observe(document,{childList:!0,subtree:!0}):console.warn&&console.warn("fengari-web: MutationObserver not found; lua script tags will not be run when inserted"),Array.prototype.forEach.call(document.querySelectorAll('script[type^="application/lua"], script[type^="text/lua"]'),B)}},function(h,w,q){let{LUA_MULTRET:tr,LUA_OPADD:tn,LUA_OPBAND:ti,LUA_OPBNOT:to,LUA_OPBOR:ts,LUA_OPBXOR:tu,LUA_OPDIV:tl,LUA_OPIDIV:tc,LUA_OPMOD:tp,LUA_OPSHL:td,LUA_OPSHR:tm,LUA_OPUNM:ty,constant_types:{LUA_TBOOLEAN:tv,LUA_TLIGHTUSERDATA:tb,LUA_TLNGSTR:tx,LUA_TNIL:tT,LUA_TNUMFLT:tE,LUA_TNUMINT:tA,LUA_TTABLE:tO},to_luastring:tw}=q(1),{lua_assert:tL}=q(4),tS=q(20),tI=q(6),tP=q(16),tR=q(23),tN=q(9),tM=q(15),tk=tP.OpCodesI,tU=tI.TValue,tC={OPR_ADD:0,OPR_SUB:1,OPR_MUL:2,OPR_MOD:3,OPR_POW:4,OPR_DIV:5,OPR_IDIV:6,OPR_BAND:7,OPR_BOR:8,OPR_BXOR:9,OPR_SHL:10,OPR_SHR:11,OPR_CONCAT:12,OPR_EQ:13,OPR_LT:14,OPR_LE:15,OPR_NE:16,OPR_GT:17,OPR_GE:18,OPR_AND:19,OPR_OR:20,OPR_NOBINOPR:21},tD={OPR_MINUS:0,OPR_BNOT:1,OPR_NOT:2,OPR_LEN:3,OPR_NOUNOPR:4},dt=function(h){return h.t!==h.f},Vt=function(h,w){let q=tR.expkind;if(dt(h))return!1;switch(h.k){case q.VKINT:return!w||new tU(tA,h.u.ival);case q.VKFLT:return!w||new tU(tE,h.u.nval);default:return!1}},S=function(h,w,q){let tr,tn=w+q-1;if(h.pc>h.lasttarget&&(tr=h.f.code[h.pc-1]).opcode===tk.OP_LOADNIL){let h=tr.A,q=h+tr.B;if(h<=w&&w<=q+1||w<=h&&h<=tn+1)return h<w&&(w=h),q>tn&&(tn=q),tP.SETARG_A(tr,w),void tP.SETARG_B(tr,tn-w)}Ut(h,tk.OP_LOADNIL,w,q-1,0)},U=function(h,w){return h.f.code[w.u.info]},B=function(h,w){let q=h.f.code[w].sBx;return -1===q?-1:w+1+q},pt=function(h,w,q){let tr=h.f.code[w],tn=q-(w+1);tL(-1!==q),Math.abs(tn)>tP.MAXARG_sBx&&tS.luaX_syntaxerror(h.ls,tw("control structure too long",!0)),tP.SETARG_sBx(tr,tn)},ut=function(h,w,q){if(-1===q)return w;if(-1===w)w=q;else{let tr=w,tn=B(h,tr);for(;-1!==tn;)tn=B(h,tr=tn);pt(h,tr,q)}return w},qt=function(h){let w=h.jpc;h.jpc=-1;let q=Et(h,tk.OP_JMP,0,-1);return ut(h,q,w)},Ct=function(h,w,q,tr,tn){return Ut(h,w,q,tr,tn),qt(h)},kt=function(h){return h.lasttarget=h.pc,h.pc},Jt=function(h,w){return w>=1&&tP.testTMode(h.f.code[w-1].opcode)?w-1:w},J=function(h,w){return h.f.code[Jt(h,w)]},Z=function(h,w,q){let tr=Jt(h,w),tn=h.f.code[tr];return tn.opcode===tk.OP_TESTSET&&(q!==tP.NO_REG&&q!==tn.B?tP.SETARG_A(tn,q):h.f.code[tr]=tP.CREATE_ABC(tk.OP_TEST,tn.B,0,tn.C),!0)},xt=function(h,w){for(;-1!==w;w=B(h,w))Z(h,w,tP.NO_REG)},rt=function(h,w,q,tr,tn){for(;-1!==w;){let ti=B(h,w);Z(h,w,tr)?pt(h,w,q):pt(h,w,tn),w=ti}},It=function(h,w){kt(h),h.jpc=ut(h,h.jpc,w)},ee=function(h,w,q){q===h.pc?It(h,w):(tL(q<h.pc),rt(h,w,q,tP.NO_REG,q))},Zt=function(h,w){let q=h.f;return rt(h,h.jpc,h.pc,tP.NO_REG,h.pc),h.jpc=-1,q.code[h.pc]=w,q.lineinfo[h.pc]=h.ls.lastline,h.pc++},Ut=function(h,w,q,tr,tn){return tL(tP.getOpMode(w)===tP.iABC),tL(tP.getBMode(w)!==tP.OpArgN||0===tr),tL(tP.getCMode(w)!==tP.OpArgN||0===tn),tL(q<=tP.MAXARG_A&&tr<=tP.MAXARG_B&&tn<=tP.MAXARG_C),Zt(h,tP.CREATE_ABC(w,q,tr,tn))},et=function(h,w,q,tr){return tL(tP.getOpMode(w)===tP.iABx||tP.getOpMode(w)===tP.iAsBx),tL(tP.getCMode(w)===tP.OpArgN),tL(q<=tP.MAXARG_A&&tr<=tP.MAXARG_Bx),Zt(h,tP.CREATE_ABx(w,q,tr))},Et=function(h,w,q,tr){return et(h,w,q,tr+tP.MAXARG_sBx)},k=function(h,w){return tL(w<=tP.MAXARG_Ax),Zt(h,tP.CREATE_Ax(tk.OP_EXTRAARG,w))},ht=function(h,w,q){if(q<=tP.MAXARG_Bx)return et(h,tk.OP_LOADK,w,q);{let tr=et(h,tk.OP_LOADKX,w,0);return k(h,q),tr}},St=function(h,w){let q=h.freereg+w;q>h.f.maxstacksize&&(q>=255&&tS.luaX_syntaxerror(h.ls,tw("function or expression needs too many registers",!0)),h.f.maxstacksize=q)},F=function(h,w){St(h,w),h.freereg+=w},_t=function(h,w){!tP.ISK(w)&&w>=h.nactvar&&(h.freereg--,tL(w===h.freereg))},wt=function(h,w){w.k===tR.expkind.VNONRELOC&&_t(h,w.u.info)},ue=function(h,w,q){let tr=w.k===tR.expkind.VNONRELOC?w.u.info:-1,tn=q.k===tR.expkind.VNONRELOC?q.u.info:-1;tr>tn?(_t(h,tr),_t(h,tn)):(_t(h,tn),_t(h,tr))},le=function(h,w,q){let tr=h.f,tn=tN.luaH_get(h.L,h.ls.h,w);if(tn.ttisinteger()){let w=tn.value;if(w<h.nk&&tr.k[w].ttype()===q.ttype()&&tr.k[w].value===q.value)return w}let ti=h.nk;return tN.luaH_setfrom(h.L,h.ls.h,w,new tI.TValue(tA,ti)),tr.k[ti]=q,h.nk++,ti},ce=function(h,w){return le(h,new tU(tb,w),new tU(tA,w))},Le=function(h,w){let q=new tU(tE,w);return le(h,q,q)},Re=function(h,w){let q=new tU(tv,w);return le(h,q,q)},Pe=function(h,w,q){let tn=tR.expkind;if(w.k===tn.VCALL)tP.SETARG_C(U(h,w),q+1);else if(w.k===tn.VVARARG){let tr=U(h,w);tP.SETARG_B(tr,q+1),tP.SETARG_A(tr,h.freereg),F(h,1)}else tL(q===tr)},Fe=function(h,w){let q=tR.expkind;w.k===q.VCALL?(tL(2===U(h,w).C),w.k=q.VNONRELOC,w.u.info=U(h,w).A):w.k===q.VVARARG&&(tP.SETARG_B(U(h,w),2),w.k=q.VRELOCABLE)},I=function(h,w){let q=tR.expkind;switch(w.k){case q.VLOCAL:w.k=q.VNONRELOC;break;case q.VUPVAL:w.u.info=Ut(h,tk.OP_GETUPVAL,0,w.u.info,0),w.k=q.VRELOCABLE;break;case q.VINDEXED:{let tr;_t(h,w.u.ind.idx),w.u.ind.vt===q.VLOCAL?(_t(h,w.u.ind.t),tr=tk.OP_GETTABLE):(tL(w.u.ind.vt===q.VUPVAL),tr=tk.OP_GETTABUP),w.u.info=Ut(h,tr,0,w.u.ind.t,w.u.ind.idx),w.k=q.VRELOCABLE;break}case q.VVARARG:case q.VCALL:Fe(h,w)}},Ft=function(h,w,q,tr){return kt(h),Ut(h,tk.OP_LOADBOOL,w,q,tr)},Dt=function(h,w,q){let tr=tR.expkind;switch(I(h,w),w.k){case tr.VNIL:S(h,q,1);break;case tr.VFALSE:case tr.VTRUE:Ut(h,tk.OP_LOADBOOL,q,w.k===tr.VTRUE,0);break;case tr.VK:ht(h,q,w.u.info);break;case tr.VKFLT:ht(h,q,Le(h,w.u.nval));break;case tr.VKINT:ht(h,q,ce(h,w.u.ival));break;case tr.VRELOCABLE:{let tr=U(h,w);tP.SETARG_A(tr,q);break}case tr.VNONRELOC:q!==w.u.info&&Ut(h,tk.OP_MOVE,q,w.u.info,0);break;default:return void tL(w.k===tr.VJMP)}w.u.info=q,w.k=tr.VNONRELOC},Rt=function(h,w){w.k!==tR.expkind.VNONRELOC&&(F(h,1),Dt(h,w,h.freereg-1))},Tt=function(h,w){for(;-1!==w;w=B(h,w))if(J(h,w).opcode!==tk.OP_TESTSET)return!0;return!1},Lt=function(h,w,q){let tr=tR.expkind;if(Dt(h,w,q),w.k===tr.VJMP&&(w.t=ut(h,w.t,w.u.info)),dt(w)){let tn,ti=-1,to=-1;if(Tt(h,w.t)||Tt(h,w.f)){let tn=w.k===tr.VJMP?-1:qt(h);ti=Ft(h,q,0,1),to=Ft(h,q,1,0),It(h,tn)}tn=kt(h),rt(h,w.f,tn,q,ti),rt(h,w.t,tn,q,to)}w.f=w.t=-1,w.u.info=q,w.k=tr.VNONRELOC},Kt=function(h,w){I(h,w),wt(h,w),F(h,1),Lt(h,w,h.freereg-1)},_e=function(h,w){if(I(h,w),w.k===tR.expkind.VNONRELOC){if(!dt(w))return w.u.info;if(w.u.info>=h.nactvar)return Lt(h,w,w.u.info),w.u.info}return Kt(h,w),w.u.info},ve=function(h,w){dt(w)?_e(h,w):I(h,w)},xe=function(h,w){let q=tR.expkind,tr=!1;switch(ve(h,w),w.k){case q.VTRUE:w.u.info=Re(h,!0),tr=!0;break;case q.VFALSE:w.u.info=Re(h,!1),tr=!0;break;case q.VNIL:let tn,ti;w.u.info=(tn=new tU(tT,null),ti=new tU(tO,h.ls.h),le(h,ti,tn)),tr=!0;break;case q.VKINT:w.u.info=ce(h,w.u.ival),tr=!0;break;case q.VKFLT:w.u.info=Le(h,w.u.nval),tr=!0;break;case q.VK:tr=!0}return tr&&(w.k=q.VK,w.u.info<=tP.MAXINDEXRK)?tP.RKASK(w.u.info):_e(h,w)},Ue=function(h,w){let q=J(h,w.u.info);tL(tP.testTMode(q.opcode)&&q.opcode!==tk.OP_TESTSET&&q.opcode!==tk.OP_TEST),tP.SETARG_A(q,!q.A)},ne=function(h,w,q){if(w.k===tR.expkind.VRELOCABLE){let tr=U(h,w);if(tr.opcode===tk.OP_NOT)return h.pc--,Ct(h,tk.OP_TEST,tr.B,0,!q)}return Rt(h,w),wt(h,w),Ct(h,tk.OP_TESTSET,tP.NO_REG,w.u.info,q)},se=function(h,w){let q,tr=tR.expkind;switch(I(h,w),w.k){case tr.VJMP:Ue(h,w),q=w.u.info;break;case tr.VK:case tr.VKFLT:case tr.VKINT:case tr.VTRUE:q=-1;break;default:q=ne(h,w,0)}w.f=ut(h,w.f,q),It(h,w.t),w.t=-1},be=function(h,w){let q,tr=tR.expkind;switch(I(h,w),w.k){case tr.VJMP:q=w.u.info;break;case tr.VNIL:case tr.VFALSE:q=-1;break;default:q=ne(h,w,1)}w.t=ut(h,w.t,q),It(h,w.f),w.f=-1},c=function(h,w,q){let tr,tn,ty=tR.expkind;if(!(tr=Vt(w,!0))||!(tn=Vt(q,!0))||!function(h,w,q){switch(h){case ti:case ts:case tu:case td:case tm:case to:return!1!==tM.tointeger(w)&&!1!==tM.tointeger(q);case tl:case tc:case tp:return 0!==q.value;default:return 1}}(h,tr,tn))return 0;let tv=new tU;if(tI.luaO_arith(null,h,tr,tn,tv),tv.ttisinteger())w.k=ty.VKINT,w.u.ival=tv.value;else{let h=tv.value;if(isNaN(h)||0===h)return!1;w.k=ty.VKFLT,w.u.nval=h}return!0},p=function(h,w,q,tr,tn){let ti=xe(h,tr),to=xe(h,q);ue(h,q,tr),q.u.info=Ut(h,w,0,to,ti),q.k=tR.expkind.VRELOCABLE,b(h,tn)},b=function(h,w){h.f.lineinfo[h.pc-1]=w};h.exports.BinOpr=tC,h.exports.NO_JUMP=-1,h.exports.UnOpr=tD,h.exports.getinstruction=U,h.exports.luaK_checkstack=St,h.exports.luaK_code=Zt,h.exports.luaK_codeABC=Ut,h.exports.luaK_codeABx=et,h.exports.luaK_codeAsBx=Et,h.exports.luaK_codek=ht,h.exports.luaK_concat=ut,h.exports.luaK_dischargevars=I,h.exports.luaK_exp2RK=xe,h.exports.luaK_exp2anyreg=_e,h.exports.luaK_exp2anyregup=function(h,w){(w.k!==tR.expkind.VUPVAL||dt(w))&&_e(h,w)},h.exports.luaK_exp2nextreg=Kt,h.exports.luaK_exp2val=ve,h.exports.luaK_fixline=b,h.exports.luaK_getlabel=kt,h.exports.luaK_goiffalse=be,h.exports.luaK_goiftrue=se,h.exports.luaK_indexed=function(h,w,q){let tr=tR.expkind;tL(!dt(w)&&(tR.vkisinreg(w.k)||w.k===tr.VUPVAL)),w.u.ind.t=w.u.info,w.u.ind.idx=xe(h,q),w.u.ind.vt=w.k===tr.VUPVAL?tr.VUPVAL:tr.VLOCAL,w.k=tr.VINDEXED},h.exports.luaK_infix=function(h,w,q){switch(w){case tC.OPR_AND:se(h,q);break;case tC.OPR_OR:be(h,q);break;case tC.OPR_CONCAT:Kt(h,q);break;case tC.OPR_ADD:case tC.OPR_SUB:case tC.OPR_MUL:case tC.OPR_DIV:case tC.OPR_IDIV:case tC.OPR_MOD:case tC.OPR_POW:case tC.OPR_BAND:case tC.OPR_BOR:case tC.OPR_BXOR:case tC.OPR_SHL:case tC.OPR_SHR:Vt(q,!1)||xe(h,q);break;default:xe(h,q)}},h.exports.luaK_intK=ce,h.exports.luaK_jump=qt,h.exports.luaK_jumpto=function(h,w){return ee(h,qt(h),w)},h.exports.luaK_nil=S,h.exports.luaK_numberK=Le,h.exports.luaK_patchclose=function(h,w,q){for(q++;-1!==w;w=B(h,w)){let tr=h.f.code[w];tL(tr.opcode===tk.OP_JMP&&(0===tr.A||tr.A>=q)),tP.SETARG_A(tr,q)}},h.exports.luaK_patchlist=ee,h.exports.luaK_patchtohere=It,h.exports.luaK_posfix=function(h,w,q,tr,ti){let to=tR.expkind;switch(w){case tC.OPR_AND:tL(-1===q.t),I(h,tr),tr.f=ut(h,tr.f,q.f),q.to(tr);break;case tC.OPR_OR:tL(-1===q.f),I(h,tr),tr.t=ut(h,tr.t,q.t),q.to(tr);break;case tC.OPR_CONCAT:{ve(h,tr);let w=U(h,tr);tr.k===to.VRELOCABLE&&w.opcode===tk.OP_CONCAT?(tL(q.u.info===w.B-1),wt(h,q),tP.SETARG_B(w,q.u.info),q.k=to.VRELOCABLE,q.u.info=tr.u.info):(Kt(h,tr),p(h,tk.OP_CONCAT,q,tr,ti));break}case tC.OPR_ADD:case tC.OPR_SUB:case tC.OPR_MUL:case tC.OPR_DIV:case tC.OPR_IDIV:case tC.OPR_MOD:case tC.OPR_POW:case tC.OPR_BAND:case tC.OPR_BOR:case tC.OPR_BXOR:case tC.OPR_SHL:case tC.OPR_SHR:c(w+tn,q,tr)||p(h,w+tk.OP_ADD,q,tr,ti);break;case tC.OPR_EQ:case tC.OPR_LT:case tC.OPR_LE:case tC.OPR_NE:case tC.OPR_GT:case tC.OPR_GE:(function(h,w,q,tr){let tn,ti=tR.expkind;q.k===ti.VK?tn=tP.RKASK(q.u.info):(tL(q.k===ti.VNONRELOC),tn=q.u.info);let to=xe(h,tr);switch(ue(h,q,tr),w){case tC.OPR_NE:q.u.info=Ct(h,tk.OP_EQ,0,tn,to);break;case tC.OPR_GT:case tC.OPR_GE:{let tr=w-tC.OPR_NE+tk.OP_EQ;q.u.info=Ct(h,tr,1,to,tn);break}default:{let tr=w-tC.OPR_EQ+tk.OP_EQ;q.u.info=Ct(h,tr,1,tn,to)}}q.k=ti.VJMP})(h,w,q,tr)}return q},h.exports.luaK_prefix=function(h,w,q,tr){let tn=new tR.expdesc;switch(tn.k=tR.expkind.VKINT,tn.u.ival=tn.u.nval=tn.u.info=0,tn.t=-1,tn.f=-1,w){case tD.OPR_MINUS:case tD.OPR_BNOT:if(c(w+ty,q,tn))break;case tD.OPR_LEN:var ti;let to;ti=w+tk.OP_UNM,to=_e(h,q),wt(h,q),q.u.info=Ut(h,ti,0,to,0),q.k=tR.expkind.VRELOCABLE,b(h,tr);break;case tD.OPR_NOT:(function(h,w){let q=tR.expkind;switch(I(h,w),w.k){case q.VNIL:case q.VFALSE:w.k=q.VTRUE;break;case q.VK:case q.VKFLT:case q.VKINT:case q.VTRUE:w.k=q.VFALSE;break;case q.VJMP:Ue(h,w);break;case q.VRELOCABLE:case q.VNONRELOC:Rt(h,w),wt(h,w),w.u.info=Ut(h,tk.OP_NOT,0,w.u.info,0),w.k=q.VRELOCABLE}{let h=w.f;w.f=w.t,w.t=h}xt(h,w.f),xt(h,w.t)})(h,q)}},h.exports.luaK_reserveregs=F,h.exports.luaK_ret=function(h,w,q){Ut(h,tk.OP_RETURN,w,q+1,0)},h.exports.luaK_self=function(h,w,q){_e(h,w);let tr=w.u.info;wt(h,w),w.u.info=h.freereg,w.k=tR.expkind.VNONRELOC,F(h,2),Ut(h,tk.OP_SELF,w.u.info,tr,xe(h,q)),wt(h,q)},h.exports.luaK_setlist=function(h,w,q,tn){let ti=(q-1)/tP.LFIELDS_PER_FLUSH+1,to=tn===tr?0:tn;tL(0!==tn&&tn<=tP.LFIELDS_PER_FLUSH),ti<=tP.MAXARG_C?Ut(h,tk.OP_SETLIST,w,to,ti):ti<=tP.MAXARG_Ax?(Ut(h,tk.OP_SETLIST,w,to,0),k(h,ti)):tS.luaX_syntaxerror(h.ls,tw("constructor too long",!0)),h.freereg=w+1},h.exports.luaK_setmultret=function(h,w){Pe(h,w,tr)},h.exports.luaK_setoneret=Fe,h.exports.luaK_setreturns=Pe,h.exports.luaK_storevar=function(h,w,q){let tr=tR.expkind;switch(w.k){case tr.VLOCAL:return wt(h,q),void Lt(h,q,w.u.info);case tr.VUPVAL:{let tr=_e(h,q);Ut(h,tk.OP_SETUPVAL,tr,w.u.info,0);break}case tr.VINDEXED:{let tn=w.u.ind.vt===tr.VLOCAL?tk.OP_SETTABLE:tk.OP_SETTABUP,ti=xe(h,q);Ut(h,tn,w.u.ind.t,w.u.ind.idx,ti)}}wt(h,q)},h.exports.luaK_stringK=function(h,w){let q=new tU(tx,w);return le(h,q,q)}},function(h,w,q){let{LUA_SIGNATURE:tr,constant_types:{LUA_TBOOLEAN:tn,LUA_TLNGSTR:ti,LUA_TNIL:to,LUA_TNUMFLT:ts,LUA_TNUMINT:tu,LUA_TSHRSTR:tl},thread_status:{LUA_ERRSYNTAX:tc},is_luastring:tp,luastring_eq:td,to_luastring:tm}=q(1),ty=q(8),tv=q(13),tb=q(6),{MAXARG_sBx:tx,POS_A:tT,POS_Ax:tE,POS_B:tA,POS_Bx:tO,POS_C:tw,POS_OP:tL,SIZE_A:tS,SIZE_Ax:tI,SIZE_B:tP,SIZE_Bx:tR,SIZE_C:tN,SIZE_OP:tM}=q(16),{lua_assert:tk}=q(4),{luaS_bless:tU}=q(10),{luaZ_read:tC,ZIO:tD}=q(19),tF=[25,147,13,10,26,10];let Vt=class Vt{constructor(h,w,q){this.intSize=4,this.size_tSize=4,this.instructionSize=4,this.integerSize=4,this.numberSize=8,tk(w instanceof tD,"BytecodeParser only operates on a ZIO"),tk(tp(q)),64===q[0]||61===q[0]?this.name=q.subarray(1):q[0]==tr[0]?this.name=tm("binary string",!0):this.name=q,this.L=h,this.Z=w,this.arraybuffer=new ArrayBuffer(Math.max(this.intSize,this.size_tSize,this.instructionSize,this.integerSize,this.numberSize)),this.dv=new DataView(this.arraybuffer),this.u8=new Uint8Array(this.arraybuffer)}read(h){let w=new Uint8Array(h);return 0!==tC(this.Z,w,0,h)&&this.error("truncated"),w}LoadByte(){return 0!==tC(this.Z,this.u8,0,1)&&this.error("truncated"),this.u8[0]}LoadInt(){return 0!==tC(this.Z,this.u8,0,this.intSize)&&this.error("truncated"),this.dv.getInt32(0,!0)}LoadNumber(){return 0!==tC(this.Z,this.u8,0,this.numberSize)&&this.error("truncated"),this.dv.getFloat64(0,!0)}LoadInteger(){return 0!==tC(this.Z,this.u8,0,this.integerSize)&&this.error("truncated"),this.dv.getInt32(0,!0)}LoadSize_t(){return this.LoadInteger()}LoadString(){let h=this.LoadByte();return 255===h&&(h=this.LoadSize_t()),0===h?null:tU(this.L,this.read(h-1))}static MASK1(h,w){return~(-1<<h)<<w}LoadCode(h){let w=this.LoadInt();for(let q=0;q<w;q++){0!==tC(this.Z,this.u8,0,this.instructionSize)&&this.error("truncated");let w=this.dv.getUint32(0,!0);h.code[q]={code:w,opcode:w>>tL&Vt.MASK1(tM,0),A:w>>tT&Vt.MASK1(tS,0),B:w>>tA&Vt.MASK1(tP,0),C:w>>tw&Vt.MASK1(tN,0),Bx:w>>tO&Vt.MASK1(tR,0),Ax:w>>tE&Vt.MASK1(tI,0),sBx:(w>>tO&Vt.MASK1(tR,0))-tx}}}LoadConstants(h){let w=this.LoadInt();for(let q=0;q<w;q++){let w=this.LoadByte();switch(w){case to:h.k.push(new tb.TValue(to,null));break;case tn:h.k.push(new tb.TValue(tn,0!==this.LoadByte()));break;case ts:h.k.push(new tb.TValue(ts,this.LoadNumber()));break;case tu:h.k.push(new tb.TValue(tu,this.LoadInteger()));break;case tl:case ti:h.k.push(new tb.TValue(ti,this.LoadString()));break;default:this.error(`unrecognized constant '${w}'`)}}}LoadProtos(h){let w=this.LoadInt();for(let q=0;q<w;q++)h.p[q]=new tv.Proto(this.L),this.LoadFunction(h.p[q],h.source)}LoadUpvalues(h){let w=this.LoadInt();for(let q=0;q<w;q++)h.upvalues[q]={name:null,instack:this.LoadByte(),idx:this.LoadByte()}}LoadDebug(h){let w=this.LoadInt();for(let q=0;q<w;q++)h.lineinfo[q]=this.LoadInt();w=this.LoadInt();for(let q=0;q<w;q++)h.locvars[q]={varname:this.LoadString(),startpc:this.LoadInt(),endpc:this.LoadInt()};w=this.LoadInt();for(let q=0;q<w;q++)h.upvalues[q].name=this.LoadString()}LoadFunction(h,w){h.source=this.LoadString(),null===h.source&&(h.source=w),h.linedefined=this.LoadInt(),h.lastlinedefined=this.LoadInt(),h.numparams=this.LoadByte(),h.is_vararg=0!==this.LoadByte(),h.maxstacksize=this.LoadByte(),this.LoadCode(h),this.LoadConstants(h),this.LoadUpvalues(h),this.LoadProtos(h),this.LoadDebug(h)}checkliteral(h,w){td(this.read(h.length),h)||this.error(w)}checkHeader(){this.checkliteral(tr.subarray(1),"not a"),83!==this.LoadByte()&&this.error("version mismatch in"),0!==this.LoadByte()&&this.error("format mismatch in"),this.checkliteral(tF,"corrupted"),this.intSize=this.LoadByte(),this.size_tSize=this.LoadByte(),this.instructionSize=this.LoadByte(),this.integerSize=this.LoadByte(),this.numberSize=this.LoadByte(),this.checksize(this.intSize,4,"int"),this.checksize(this.size_tSize,4,"size_t"),this.checksize(this.instructionSize,4,"instruction"),this.checksize(this.integerSize,4,"integer"),this.checksize(this.numberSize,8,"number"),22136!==this.LoadInteger()&&this.error("endianness mismatch in"),370.5!==this.LoadNumber()&&this.error("float format mismatch in")}error(h){tb.luaO_pushfstring(this.L,tm("%s: %s precompiled chunk"),this.name,tm(h)),ty.luaD_throw(this.L,tc)}checksize(h,w,q){h!==w&&this.error(`${q} size mismatch in`)}};h.exports.luaU_undump=function(h,w,q){let tr=new Vt(h,w,q);tr.checkHeader();let tn=tv.luaF_newLclosure(h,tr.LoadByte());return ty.luaD_inctop(h),h.stack[h.top-1].setclLvalue(tn),tn.p=new tv.Proto(h),tr.LoadFunction(tn.p,null),tk(tn.nupvalues===tn.p.upvalues.length),tn}},function(h,w,q){let{LUA_SIGNATURE:tr,LUA_VERSION_MAJOR:tn,LUA_VERSION_MINOR:ti,constant_types:{LUA_TBOOLEAN:to,LUA_TLNGSTR:ts,LUA_TNIL:tu,LUA_TNUMFLT:tl,LUA_TNUMINT:tc,LUA_TSHRSTR:tp},luastring_of:td}=q(1),tm=td(25,147,13,10,26,10),ty=16*Number(tn)+Number(ti),y=function(h,w,q){0===q.status&&w>0&&(q.status=q.writer(q.L,h,w,q.data))},T=function(h,w){y(td(h),1,w)},O=function(h,w){let q=new ArrayBuffer(4);new DataView(q).setInt32(0,h,!0),y(new Uint8Array(q),4,w)},V=function(h,w){let q=new ArrayBuffer(4);new DataView(q).setInt32(0,h,!0),y(new Uint8Array(q),4,w)},C=function(h,w){let q=new ArrayBuffer(8);new DataView(q).setFloat64(0,h,!0),y(new Uint8Array(q),8,w)},K=function(h,w){if(null===h)T(0,w);else{let q=h.tsslen()+1,tr=h.getstr();q<255?T(q,w):(T(255,w),V(q,w)),y(tr,q-1,w)}},Y=function(h,w,q){q.strip||h.source===w?K(null,q):K(h.source,q),O(h.linedefined,q),O(h.lastlinedefined,q),T(h.numparams,q),T(h.is_vararg?1:0,q),T(h.maxstacksize,q),function(h,w){let q=h.code.map(h=>h.code);O(q.length,w);for(let h=0;h<q.length;h++)O(q[h],w)}(h,q),function(h,w){let q=h.k.length;O(q,w);for(let tr=0;tr<q;tr++){let q=h.k[tr];switch(T(q.ttype(),w),q.ttype()){case tu:break;case to:T(q.value?1:0,w);break;case tl:C(q.value,w);break;case tc:V(q.value,w);break;case tp:case ts:K(q.tsvalue(),w)}}}(h,q),function(h,w){let q=h.upvalues.length;O(q,w);for(let tr=0;tr<q;tr++)T(h.upvalues[tr].instack?1:0,w),T(h.upvalues[tr].idx,w)}(h,q),function(h,w){let q=h.p.length;O(q,w);for(let tr=0;tr<q;tr++)Y(h.p[tr],h.source,w)}(h,q),function(h,w){let q=w.strip?0:h.lineinfo.length;O(q,w);for(let tr=0;tr<q;tr++)O(h.lineinfo[tr],w);O(q=w.strip?0:h.locvars.length,w);for(let tr=0;tr<q;tr++)K(h.locvars[tr].varname,w),O(h.locvars[tr].startpc,w),O(h.locvars[tr].endpc,w);O(q=w.strip?0:h.upvalues.length,w);for(let tr=0;tr<q;tr++)K(h.upvalues[tr].name,w)}(h,q)};h.exports.luaU_dump=function(h,w,q,tn,ti){let to=new class{constructor(){this.L=null,this.write=null,this.data=null,this.strip=NaN,this.status=NaN}};return to.L=h,to.writer=q,to.data=tn,to.strip=ti,to.status=0,y(tr,tr.length,to),T(ty,to),T(0,to),y(tm,tm.length,to),T(4,to),T(4,to),T(4,to),T(4,to),T(8,to),V(22136,to),C(370.5,to),T(w.upvalues.length,to),Y(w,null,to),to.status}},function(h,w,q){var tr;!function(){var tn={not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};function o(h){return function(h,w){var q,tr,ti,to,ts,tu,tl,tc,tp,td=1,tm=h.length,ty="";for(tr=0;tr<tm;tr++)if("string"==typeof h[tr])ty+=h[tr];else if(Array.isArray(h[tr])){if((to=h[tr])[2])for(q=w[td],ti=0;ti<to[2].length;ti++){if(!q.hasOwnProperty(to[2][ti]))throw Error(o('[sprintf] property "%s" does not exist',to[2][ti]));q=q[to[2][ti]]}else q=to[1]?w[to[1]]:w[td++];if(tn.not_type.test(to[8])&&tn.not_primitive.test(to[8])&&q instanceof Function&&(q=q()),tn.numeric_arg.test(to[8])&&"number"!=typeof q&&isNaN(q))throw TypeError(o("[sprintf] expecting number but found %T",q));switch(tn.number.test(to[8])&&(tc=q>=0),to[8]){case"b":q=parseInt(q,10).toString(2);break;case"c":q=String.fromCharCode(parseInt(q,10));break;case"d":case"i":q=parseInt(q,10);break;case"j":q=JSON.stringify(q,null,to[6]?parseInt(to[6]):0);break;case"e":q=to[7]?parseFloat(q).toExponential(to[7]):parseFloat(q).toExponential();break;case"f":q=to[7]?parseFloat(q).toFixed(to[7]):parseFloat(q);break;case"g":q=to[7]?String(Number(q.toPrecision(to[7]))):parseFloat(q);break;case"o":q=(parseInt(q,10)>>>0).toString(8);break;case"s":q=String(q),q=to[7]?q.substring(0,to[7]):q;break;case"t":q=String(!!q),q=to[7]?q.substring(0,to[7]):q;break;case"T":q=Object.prototype.toString.call(q).slice(8,-1).toLowerCase(),q=to[7]?q.substring(0,to[7]):q;break;case"u":q=parseInt(q,10)>>>0;break;case"v":q=q.valueOf(),q=to[7]?q.substring(0,to[7]):q;break;case"x":q=(parseInt(q,10)>>>0).toString(16);break;case"X":q=(parseInt(q,10)>>>0).toString(16).toUpperCase()}tn.json.test(to[8])?ty+=q:(tn.number.test(to[8])&&(!tc||to[3])?(tp=tc?"+":"-",q=q.toString().replace(tn.sign,"")):tp="",tu=to[4]?"0"===to[4]?"0":to[4].charAt(1):" ",tl=to[6]-(tp+q).length,ts=to[6]&&tl>0?tu.repeat(tl):"",ty+=to[5]?tp+q+ts:"0"===tu?tp+ts+q:ts+tp+q)}return ty}(function(h){if(ti[h])return ti[h];for(var w,q=h,tr=[],to=0;q;){if(null!==(w=tn.text.exec(q)))tr.push(w[0]);else if(null!==(w=tn.modulo.exec(q)))tr.push("%");else{if(null===(w=tn.placeholder.exec(q)))throw SyntaxError("[sprintf] unexpected placeholder");if(w[2]){to|=1;var ts=[],tu=w[2],tl=[];if(null===(tl=tn.key.exec(tu)))throw SyntaxError("[sprintf] failed to parse named argument key");for(ts.push(tl[1]);""!==(tu=tu.substring(tl[0].length));)if(null!==(tl=tn.key_access.exec(tu)))ts.push(tl[1]);else{if(null===(tl=tn.index_access.exec(tu)))throw SyntaxError("[sprintf] failed to parse named argument key");ts.push(tl[1])}w[2]=ts}else to|=2;if(3===to)throw Error("[sprintf] mixing positional and named placeholders is not (yet) supported");tr.push(w)}q=q.substring(w[0].length)}return ti[h]=tr}(h),arguments)}function a(h,w){return o.apply(null,[h].concat(w||[]))}var ti=Object.create(null);w.sprintf=o,w.vsprintf=a,"u">typeof window&&(window.sprintf=o,window.vsprintf=a,void 0===(tr=(function(){return{sprintf:o,vsprintf:a}}).call(w,q,w,h))||(h.exports=tr))}()},function(h,w,q){let{lua_pop:tr}=q(2),{luaL_requiref:tn}=q(7),{to_luastring:ti}=q(5),to={};h.exports.luaL_openlibs=function(h){for(let w in to)tn(h,ti(w),to[w],1),tr(h,1)};let ts=q(17),{luaopen_base:tu}=q(24),{luaopen_coroutine:tl}=q(25),{luaopen_debug:tc}=q(31),{luaopen_math:tp}=q(30),{luaopen_package:td}=q(32),{luaopen_os:tm}=q(27),{luaopen_string:ty}=q(28),{luaopen_table:tv}=q(26),{luaopen_utf8:tb}=q(29);to._G=tu,to[ts.LUA_LOADLIBNAME]=td,to[ts.LUA_COLIBNAME]=tl,to[ts.LUA_TABLIBNAME]=tv,to[ts.LUA_OSLIBNAME]=tm,to[ts.LUA_STRLIBNAME]=ty,to[ts.LUA_MATHLIBNAME]=tp,to[ts.LUA_UTF8LIBNAME]=tb,to[ts.LUA_DBLIBNAME]=tc;let{luaopen_fengari:tx}=q(33);to[ts.LUA_FENGARILIBNAME]=tx}]);let eA=class eA{get luaState(){return this._instance.luaState}constructor(h){this._instance=h}saveState(){if(u6.lua.lua_getglobal(this.luaState,u6.to_luastring("saveState",!0)),u6.lua.lua_call(this.luaState,1,0)!==u6.lua.LUA_OK){let h=Nn(this.luaState,-1);if(h)throw Error(h)}return Fa(this.luaState)}loadState(h){if(u6.lua.lua_getglobal(this.luaState,u6.to_luastring("loadState",!0)),Er(this.luaState,h),u6.lua.lua_call(this.luaState,1,0)!==u6.lua.LUA_OK){let h=Nn(this.luaState,-1);if(h)throw Error(h)}}getStateForAgent(){if(u6.lua.lua_getglobal(this.luaState,u6.to_luastring("getStateForAgent",!0)),u6.lua.lua_call(this.luaState,1,0)!==u6.lua.LUA_OK){let h=Nn(this.luaState,-1);if(h)throw Error(h)}return Fa(this.luaState)}tick(h){if(u6.lua.lua_getglobal(this.luaState,u6.to_luastring("tick",!0)),Er(this.luaState,h),u6.lua.lua_call(this.luaState,1,0)!==u6.lua.LUA_OK){let h=Nn(this.luaState,-1);if(h)throw Error(h)}}};var u8={};!function(h){var w=h.Promise,q=w&&"resolve"in w&&"reject"in w&&"all"in w&&"race"in w&&(new w(function(h){ts=h}),"function"==typeof ts);u8?(u8.Promise=q?w:G,u8.Polyfill=G):q||(h.Promise=G);var tr="pending",tn="sealed",ti="fulfilled",to="rejected",u=function(){};function l(h){return"[object Array]"===Object.prototype.toString.call(h)}var ts,tu,tl="u">typeof setImmediate?setImmediate:setTimeout,tc=[];function v(){for(var h=0;h<tc.length;h++)tc[h][0](tc[h][1]);tc=[],tu=!1}function g(h,w){tc.push([h,w]),tu||(tu=!0,tl(v,0))}function T(h){var w=h.owner,q=w.state_,tr=w.data_,tn=h[q],ts=h.then;if("function"==typeof tn){q=ti;try{tr=tn(tr)}catch(h){K(ts,h)}}O(ts,tr)||(q===ti&&V(ts,tr),q===to&&K(ts,tr))}function O(h,w){var q;try{if(h===w)throw TypeError("A promises callback cannot return that same promise.");if(w&&("function"==typeof w||"object"==typeof w)){var tr=w.then;if("function"==typeof tr)return tr.call(w,function(tr){q||(q=!0,w!==tr?V(h,tr):C(h,tr))},function(w){q||(q=!0,K(h,w))}),!0}}catch(w){return q||K(h,w),!0}return!1}function V(h,w){h!==w&&O(h,w)||C(h,w)}function C(h,w){h.state_===tr&&(h.state_=tn,h.data_=w,g(tt,h))}function K(h,w){h.state_===tr&&(h.state_=tn,h.data_=w,g(R,h))}function Y(h){var w=h.then_;h.then_=void 0;for(var q=0;q<w.length;q++)T(w[q])}function tt(h){h.state_=ti,Y(h)}function R(h){h.state_=to,Y(h)}function G(h){if("function"!=typeof h)throw TypeError("Promise constructor takes a function argument");if(!(this instanceof G))throw TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],function(h,w){function ft(h){K(w,h)}try{h(function(h){V(w,h)},ft)}catch(h){ft(h)}}(h,this)}G.prototype={constructor:G,state_:tr,then_:null,data_:void 0,then:function(h,w){var q={owner:this,then:new this.constructor(u),fulfilled:h,rejected:w};return this.state_===ti||this.state_===to?g(T,q):this.then_.push(q),q.then},catch:function(h){return this.then(null,h)}},G.all=function(h){if(!l(h))throw TypeError("You must pass an array to Promise.all().");return new this(function(w,q){for(var tr,tn=[],ti=0,to=0;to<h.length;to++)(tr=h[to])&&"function"==typeof tr.then?tr.then(function(h){return ti++,function(q){tn[h]=q,--ti||w(tn)}}(to),q):tn[to]=tr;ti||w(tn)})},G.race=function(h){if(!l(h))throw TypeError("You must pass an array to Promise.race().");return new this(function(w,q){for(var tr,tn=0;tn<h.length;tn++)(tr=h[tn])&&"function"==typeof tr.then?tr.then(w,q):w(tr)})},G.resolve=function(h){return h&&"object"==typeof h&&h.constructor===this?h:new this(function(w){w(h)})},G.reject=function(h){return new this(function(w,q){q(h)})}}("u">typeof window?window:"u">typeof u5?u5:"u">typeof self?self:u5);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var u7=Object.getOwnPropertySymbols,u9=Object.prototype.hasOwnProperty,lr=Object.prototype.propertyIsEnumerable,ln=!function(){try{if(!Object.assign)return!1;var h=new String("abc");if(h[5]="de","5"===Object.getOwnPropertyNames(h)[0])return!1;for(var w={},q=0;q<10;q++)w["_"+String.fromCharCode(q)]=q;var tr=Object.getOwnPropertyNames(w).map(function(h){return w[h]});if("0123456789"!==tr.join(""))return!1;var tn={};return"abcdefghijklmnopqrst".split("").forEach(function(h){tn[h]=h}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},tn)).join("")}catch{return!1}}()?function(h,w){for(var q,tr,tn=function(h){if(null==h)throw TypeError("Object.assign cannot be called with null or undefined");return Object(h)}(h),ti=1;ti<arguments.length;ti++){for(var to in q=Object(arguments[ti]))u9.call(q,to)&&(tn[to]=q[to]);if(u7){tr=u7(q);for(var ts=0;ts<tr.length;ts++)lr.call(q,tr[ts])&&(tn[tr[ts]]=q[tr[ts]])}}return tn}:Object.assign;let la=ku(ln);if(/*!
 * @pixi/polyfill - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */window.Promise||(window.Promise=u8.Polyfill),Object.assign||(Object.assign=la),Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()}),!(window.performance&&window.performance.now)){var lu=Date.now();window.performance||(window.performance={}),window.performance.now=function(){return Date.now()-lu}}for(var ll=Date.now(),lc=["ms","moz","webkit","o"],lh=0;lh<lc.length&&!window.requestAnimationFrame;++lh){var ld=lc[lh];window.requestAnimationFrame=window[ld+"RequestAnimationFrame"],window.cancelAnimationFrame=window[ld+"CancelAnimationFrame"]||window[ld+"CancelRequestAnimationFrame"]}window.requestAnimationFrame||(window.requestAnimationFrame=function(h){if("function"!=typeof h)throw TypeError(h+"is not a function");var w=Date.now(),q=16+ll-w;return q<0&&(q=0),ll=w,window.setTimeout(function(){ll=Date.now(),h(performance.now())},q)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(h){return clearTimeout(h)}),Math.sign||(Math.sign=function(h){return 0===(h=Number(h))||isNaN(h)?h:h>0?1:-1}),Number.isInteger||(Number.isInteger=function(h){return"number"==typeof h&&isFinite(h)&&Math.floor(h)===h}),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array),window.Uint8Array||(window.Uint8Array=Array),window.Int32Array||(window.Int32Array=Array);var l_=/iPhone/i,lg=/iPod/i,lm=/iPad/i,ly=/\biOS-universal(?:.+)Mac\b/i,lb=/\bAndroid(?:.+)Mobile\b/i,lx=/Android/i,lT=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,lE=/Silk/i,lA=/Windows Phone/i,lO=/\bWindows(?:.+)ARM\b/i,lw=/BlackBerry/i,lL=/BB10/i,lS=/Opera Mini/i,lI=/\b(CriOS|Chrome)(?:.+)Mobile/i,lP=/Mobile(?:.+)Firefox\b/i,Od=function(h){return"u">typeof h&&"MacIntel"===h.platform&&"number"==typeof h.maxTouchPoints&&h.maxTouchPoints>1&&typeof MSStream>"u"},lR=(l5=window.navigator,l6={userAgent:"",platform:"",maxTouchPoints:0},!l5&&"u">typeof navigator?l6={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:"string"==typeof l5?l6.userAgent=l5:l5&&l5.userAgent&&(l6={userAgent:l5.userAgent,platform:l5.platform,maxTouchPoints:l5.maxTouchPoints||0}),"u">typeof(l7=(l8=l6.userAgent).split("[FBAN"))[1]&&(l8=l7[0]),"u">typeof(l7=l8.split("Twitter"))[1]&&(l8=l7[0]),(cn={apple:{phone:(l9=l8,cr=function(h){return h.test(l9)})(l_)&&!cr(lA),ipod:cr(lg),tablet:!cr(l_)&&(cr(lm)||Od(l6))&&!cr(lA),universal:cr(ly),device:(cr(l_)||cr(lg)||cr(lm)||cr(ly)||Od(l6))&&!cr(lA)},amazon:{phone:cr(lT),tablet:!cr(lT)&&cr(lE),device:cr(lT)||cr(lE)},android:{phone:!cr(lA)&&cr(lT)||!cr(lA)&&cr(lb),tablet:!cr(lA)&&!cr(lT)&&!cr(lb)&&(cr(lE)||cr(lx)),device:!cr(lA)&&(cr(lT)||cr(lE)||cr(lb)||cr(lx))||cr(/\bokhttp\b/i)},windows:{phone:cr(lA),tablet:cr(lO),device:cr(lA)||cr(lO)},other:{blackberry:cr(lw),blackberry10:cr(lL),opera:cr(lS),firefox:cr(lP),chrome:cr(lI),device:cr(lw)||cr(lL)||cr(lS)||cr(lP)||cr(lI)},any:!1,phone:!1,tablet:!1}).any=cn.apple.device||cn.android.device||cn.windows.device||cn.other.device,cn.phone=cn.apple.phone||cn.android.phone||cn.windows.phone,cn.tablet=cn.apple.tablet||cn.android.tablet||cn.windows.tablet,cn),lN={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:function(h){var w=!0;if(lR.tablet||lR.phone){if(lR.apple.device){var q=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(q){var tr=parseInt(q[1],10);tr<11&&(w=!1)}}if(lR.android.device){var q=navigator.userAgent.match(/Android\s([0-9.]*)/);if(q){var tr=parseInt(q[1],10);tr<7&&(w=!1)}}}return w?32:4}(0),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:lR.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:!lR.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},lM={exports:{}};!function(h){var w=Object.prototype.hasOwnProperty,q="~";function r(){}function i(h,w,q){this.fn=h,this.context=w,this.once=q||!1}function o(h,w,tr,tn,ti){if("function"!=typeof tr)throw TypeError("The listener must be a function");var to=new i(tr,tn||h,ti),ts=q?q+w:w;return h._events[ts]?h._events[ts].fn?h._events[ts]=[h._events[ts],to]:h._events[ts].push(to):(h._events[ts]=to,h._eventsCount++),h}function a(h,w){0==--h._eventsCount?h._events=new r:delete h._events[w]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(q=!1)),s.prototype.eventNames=function(){var h,tr,tn=[];if(0===this._eventsCount)return tn;for(tr in h=this._events)w.call(h,tr)&&tn.push(q?tr.slice(1):tr);return Object.getOwnPropertySymbols?tn.concat(Object.getOwnPropertySymbols(h)):tn},s.prototype.listeners=function(h){var w=q?q+h:h,tr=this._events[w];if(!tr)return[];if(tr.fn)return[tr.fn];for(var tn=0,ti=tr.length,to=Array(ti);tn<ti;tn++)to[tn]=tr[tn].fn;return to},s.prototype.listenerCount=function(h){var w=q?q+h:h,tr=this._events[w];return tr?tr.fn?1:tr.length:0},s.prototype.emit=function(h,w,tr,tn,ti,to){var ts=q?q+h:h;if(!this._events[ts])return!1;var tu,tl,tc=this._events[ts],tp=arguments.length;if(tc.fn){switch(tc.once&&this.removeListener(h,tc.fn,void 0,!0),tp){case 1:return tc.fn.call(tc.context),!0;case 2:return tc.fn.call(tc.context,w),!0;case 3:return tc.fn.call(tc.context,w,tr),!0;case 4:return tc.fn.call(tc.context,w,tr,tn),!0;case 5:return tc.fn.call(tc.context,w,tr,tn,ti),!0;case 6:return tc.fn.call(tc.context,w,tr,tn,ti,to),!0}for(tl=1,tu=Array(tp-1);tl<tp;tl++)tu[tl-1]=arguments[tl];tc.fn.apply(tc.context,tu)}else{var td,tm=tc.length;for(tl=0;tl<tm;tl++)switch(tc[tl].once&&this.removeListener(h,tc[tl].fn,void 0,!0),tp){case 1:tc[tl].fn.call(tc[tl].context);break;case 2:tc[tl].fn.call(tc[tl].context,w);break;case 3:tc[tl].fn.call(tc[tl].context,w,tr);break;case 4:tc[tl].fn.call(tc[tl].context,w,tr,tn);break;default:if(!tu)for(td=1,tu=Array(tp-1);td<tp;td++)tu[td-1]=arguments[td];tc[tl].fn.apply(tc[tl].context,tu)}}return!0},s.prototype.on=function(h,w,q){return o(this,h,w,q,!1)},s.prototype.once=function(h,w,q){return o(this,h,w,q,!0)},s.prototype.removeListener=function(h,w,tr,tn){var ti=q?q+h:h;if(!this._events[ti])return this;if(!w)return a(this,ti),this;var to=this._events[ti];if(to.fn)to.fn!==w||tn&&!to.once||tr&&to.context!==tr||a(this,ti);else{for(var ts=0,tu=[],tl=to.length;ts<tl;ts++)(to[ts].fn!==w||tn&&!to[ts].once||tr&&to[ts].context!==tr)&&tu.push(to[ts]);tu.length?this._events[ti]=1===tu.length?tu[0]:tu:a(this,ti)}return this},s.prototype.removeAllListeners=function(h){var w;return h?(w=q?q+h:h,this._events[w]&&a(this,w)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=q,s.EventEmitter=s,h.exports=s}(lM);var lk=lM.exports;let lU=ku(lk);var lC={exports:{}};function Cu(h,w,q){q=q||2;var tr,tn,ti,to,ts,tu,tl,tc=w&&w.length,tp=tc?w[0]*q:h.length,td=_m(h,0,tp,q,!0),tm=[];if(!td||td.next===td.prev)return tm;if(tc&&(td=function(h,w,q,tr){var tn,ti,to,ts,tu,tl=[];for(tn=0,ti=w.length;tn<ti;tn++)to=w[tn]*tr,ts=tn<ti-1?w[tn+1]*tr:h.length,(tu=_m(h,to,ts,tr,!1))===tu.next&&(tu.steiner=!0),tl.push(function(h){var w=h,q=h;do(w.x<q.x||w.x===q.x&&w.y<q.y)&&(q=w),w=w.next;while(w!==h);return q}(tu));for(tl.sort(TA),tn=0;tn<tl.length;tn++)q=function(h,w){var q=function(h,w){var q,tr,tn,ti=w,to=h.x,ts=h.y,tu=-1/0;do{if(ts<=ti.y&&ts>=ti.next.y&&ti.next.y!==ti.y){var tl=ti.x+(ts-ti.y)*(ti.next.x-ti.x)/(ti.next.y-ti.y);if(tl<=to&&tl>tu&&(tu=tl,tn=ti.x<ti.next.x?ti:ti.next,tl===to))return tn}ti=ti.next}while(ti!==w);if(!tn)return null;var tc,tp=tn,td=tn.x,tm=tn.y,ty=1/0;ti=tn;do to>=ti.x&&ti.x>=td&&to!==ti.x&&uo(ts<tm?to:tu,ts,td,tm,ts<tm?tu:to,ts,ti.x,ti.y)&&(tc=Math.abs(ts-ti.y)/(to-ti.x),Ga(ti,h)&&(tc<ty||tc===ty&&(ti.x>tn.x||ti.x===tn.x&&(q=tn,tr=ti,0>_r(q.prev,q,tr.prev)&&0>_r(tr.next,q,q.next))))&&(tn=ti,ty=tc)),ti=ti.next;while(ti!==tp);return tn}(h,w);if(!q)return w;var tr=gm(q,h);return Yi(tr,tr.next),Yi(q,q.next)}(tl[tn],q);return q}(h,w,td,q)),h.length>80*q){tr=ti=h[0],tn=to=h[1];for(var ty=q;ty<tp;ty+=q)ts=h[ty],tu=h[ty+1],ts<tr&&(tr=ts),tu<tn&&(tn=tu),ts>ti&&(ti=ts),tu>to&&(to=tu);tl=0!==(tl=Math.max(ti-tr,to-tn))?32767/tl:0}return function Ba(h,w,q,tr,tn,ti,to){if(h){!to&&ti&&function(h,w,q,tr){var tn=h;do 0===tn.z&&(tn.z=ah(tn.x,tn.y,w,q,tr)),tn.prevZ=tn.prev,tn.nextZ=tn.next,tn=tn.next;while(tn!==h);tn.prevZ.nextZ=null,tn.prevZ=null,function(h){var w,q,tr,tn,ti,to,ts,tu,tl=1;do{for(q=h,h=null,ti=null,to=0;q;){for(to++,tr=q,ts=0,w=0;w<tl&&(ts++,tr=tr.nextZ);w++);for(tu=tl;ts>0||tu>0&&tr;)0!==ts&&(0===tu||!tr||q.z<=tr.z)?(tn=q,q=q.nextZ,ts--):(tn=tr,tr=tr.nextZ,tu--),ti?ti.nextZ=tn:h=tn,tn.prevZ=ti,ti=tn;q=tr}ti.nextZ=null,tl*=2}while(to>1)}(tn)}(h,tr,tn,ti);for(var ts,tu,tl=h;h.prev!==h.next;){if(ts=h.prev,tu=h.next,ti?function(h,w,q,tr){var tn=h.prev,ti=h.next;if(_r(tn,h,ti)>=0)return!1;for(var to=tn.x,ts=h.x,tu=ti.x,tl=tn.y,tc=h.y,tp=ti.y,td=to<ts?to<tu?to:tu:ts<tu?ts:tu,tm=tl<tc?tl<tp?tl:tp:tc<tp?tc:tp,ty=to>ts?to>tu?to:tu:ts>tu?ts:tu,tv=tl>tc?tl>tp?tl:tp:tc>tp?tc:tp,tb=ah(td,tm,w,q,tr),tx=ah(ty,tv,w,q,tr),tT=h.prevZ,tE=h.nextZ;tT&&tT.z>=tb&&tE&&tE.z<=tx;){if(tT.x>=td&&tT.x<=ty&&tT.y>=tm&&tT.y<=tv&&tT!==tn&&tT!==ti&&uo(to,tl,ts,tc,tu,tp,tT.x,tT.y)&&_r(tT.prev,tT,tT.next)>=0||(tT=tT.prevZ,tE.x>=td&&tE.x<=ty&&tE.y>=tm&&tE.y<=tv&&tE!==tn&&tE!==ti&&uo(to,tl,ts,tc,tu,tp,tE.x,tE.y)&&_r(tE.prev,tE,tE.next)>=0))return!1;tE=tE.nextZ}for(;tT&&tT.z>=tb;){if(tT.x>=td&&tT.x<=ty&&tT.y>=tm&&tT.y<=tv&&tT!==tn&&tT!==ti&&uo(to,tl,ts,tc,tu,tp,tT.x,tT.y)&&_r(tT.prev,tT,tT.next)>=0)return!1;tT=tT.prevZ}for(;tE&&tE.z<=tx;){if(tE.x>=td&&tE.x<=ty&&tE.y>=tm&&tE.y<=tv&&tE!==tn&&tE!==ti&&uo(to,tl,ts,tc,tu,tp,tE.x,tE.y)&&_r(tE.prev,tE,tE.next)>=0)return!1;tE=tE.nextZ}return!0}(h,tr,tn,ti):function(h){var w=h.prev,q=h.next;if(_r(w,h,q)>=0)return!1;for(var tr=w.x,tn=h.x,ti=q.x,to=w.y,ts=h.y,tu=q.y,tl=tr<tn?tr<ti?tr:ti:tn<ti?tn:ti,tc=to<ts?to<tu?to:tu:ts<tu?ts:tu,tp=tr>tn?tr>ti?tr:ti:tn>ti?tn:ti,td=to>ts?to>tu?to:tu:ts>tu?ts:tu,tm=q.next;tm!==w;){if(tm.x>=tl&&tm.x<=tp&&tm.y>=tc&&tm.y<=td&&uo(tr,to,tn,ts,ti,tu,tm.x,tm.y)&&_r(tm.prev,tm,tm.next)>=0)return!1;tm=tm.next}return!0}(h)){w.push(ts.i/q|0),w.push(h.i/q|0),w.push(tu.i/q|0),ja(h),h=tu.next,tl=tu.next;continue}if((h=tu)===tl){to?1===to?Ba(h=function(h,w,q){var tr=h;do{var tn=tr.prev,ti=tr.next.next;!Uu(tn,ti)&&vm(tn,tr,tr.next,ti)&&Ga(tn,ti)&&Ga(ti,tn)&&(w.push(tn.i/q|0),w.push(tr.i/q|0),w.push(ti.i/q|0),ja(tr),ja(tr.next),tr=h=ti),tr=tr.next}while(tr!==h);return Yi(tr)}(Yi(h),w,q),w,q,tr,tn,ti,2):2===to&&function(h,w,q,tr,tn,ti){var to=h;do{for(var ts,tu,tl=to.next.next;tl!==to.prev;){if(to.i!==tl.i&&(ts=to,tu=tl,ts.next.i!==tu.i&&ts.prev.i!==tu.i&&!function(h,w){var q=h;do{if(q.i!==h.i&&q.next.i!==h.i&&q.i!==w.i&&q.next.i!==w.i&&vm(q,q.next,h,w))return!0;q=q.next}while(q!==h);return!1}(ts,tu)&&(Ga(ts,tu)&&Ga(tu,ts)&&function(h,w){var q=h,tr=!1,tn=(h.x+w.x)/2,ti=(h.y+w.y)/2;do q.y>ti!=q.next.y>ti&&q.next.y!==q.y&&tn<(q.next.x-q.x)*(ti-q.y)/(q.next.y-q.y)+q.x&&(tr=!tr),q=q.next;while(q!==h);return tr}(ts,tu)&&(_r(ts.prev,ts,tu.prev)||_r(ts,tu.prev,tu))||Uu(ts,tu)&&_r(ts.prev,ts,ts.next)>0&&_r(tu.prev,tu,tu.next)>0))){var tc=gm(to,tl);to=Yi(to,to.next),tc=Yi(tc,tc.next),Ba(to,w,q,tr,tn,ti,0),Ba(tc,w,q,tr,tn,ti,0);return}tl=tl.next}to=to.next}while(to!==h)}(h,w,q,tr,tn,ti):Ba(Yi(h),w,q,tr,tn,ti,1);break}}}}(td,tm,q,tr,tn,tl,0),tm}function _m(h,w,q,tr,tn){var ti,to;if(tn===uh(h,w,q,tr)>0)for(ti=w;ti<q;ti+=tr)to=Ld(ti,h[ti],h[ti+1],to);else for(ti=q-tr;ti>=w;ti-=tr)to=Ld(ti,h[ti],h[ti+1],to);return to&&Uu(to,to.next)&&(ja(to),to=to.next),to}function Yi(h,w){if(!h)return h;w||(w=h);var q,tr=h;do if(q=!1,!tr.steiner&&(Uu(tr,tr.next)||0===_r(tr.prev,tr,tr.next))){if(ja(tr),(tr=w=tr.prev)===tr.next)break;q=!0}else tr=tr.next;while(q||tr!==w);return w}function TA(h,w){return h.x-w.x}function ah(h,w,q,tr,tn){return(h=((h=((h=((h=((h=(h-q)*tn|0)|h<<8)&16711935)|h<<4)&252645135)|h<<2)&858993459)|h<<1)&1431655765)|(w=((w=((w=((w=((w=(w-tr)*tn|0)|w<<8)&16711935)|w<<4)&252645135)|w<<2)&858993459)|w<<1)&1431655765)<<1}function uo(h,w,q,tr,tn,ti,to,ts){return(tn-to)*(w-ts)>=(h-to)*(ti-ts)&&(h-to)*(tr-ts)>=(q-to)*(w-ts)&&(q-to)*(ti-ts)>=(tn-to)*(tr-ts)}function _r(h,w,q){return(w.y-h.y)*(q.x-w.x)-(w.x-h.x)*(q.y-w.y)}function Uu(h,w){return h.x===w.x&&h.y===w.y}function vm(h,w,q,tr){var tn=Ps(_r(h,w,q)),ti=Ps(_r(h,w,tr)),to=Ps(_r(q,tr,h)),ts=Ps(_r(q,tr,w));return!!(tn!==ti&&to!==ts||0===tn&&Is(h,q,w)||0===ti&&Is(h,tr,w)||0===to&&Is(q,h,tr)||0===ts&&Is(q,w,tr))}function Is(h,w,q){return w.x<=Math.max(h.x,q.x)&&w.x>=Math.min(h.x,q.x)&&w.y<=Math.max(h.y,q.y)&&w.y>=Math.min(h.y,q.y)}function Ps(h){return h>0?1:h<0?-1:0}function Ga(h,w){return 0>_r(h.prev,h,h.next)?_r(h,w,h.next)>=0&&_r(h,h.prev,w)>=0:0>_r(h,w,h.prev)||0>_r(h,h.next,w)}function gm(h,w){var q=new sh(h.i,h.x,h.y),tr=new sh(w.i,w.x,w.y),tn=h.next,ti=w.prev;return h.next=w,w.prev=h,q.next=tn,tn.prev=q,tr.next=q,q.prev=tr,ti.next=tr,tr.prev=ti,tr}function Ld(h,w,q,tr){var tn=new sh(h,w,q);return tr?(tn.next=tr.next,tn.prev=tr,tr.next.prev=tn,tr.next=tn):(tn.prev=tn,tn.next=tn),tn}function ja(h){h.next.prev=h.prev,h.prev.next=h.next,h.prevZ&&(h.prevZ.nextZ=h.nextZ),h.nextZ&&(h.nextZ.prevZ=h.prevZ)}function sh(h,w,q){this.i=h,this.x=w,this.y=q,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function uh(h,w,q,tr){for(var tn=0,ti=w,to=q-tr;ti<q;ti+=tr)tn+=(h[to]-h[ti])*(h[ti+1]+h[to+1]),to=ti;return tn}lC.exports=Cu,lC.exports.default=Cu,Cu.deviation=function(h,w,q,tr){var tn=w&&w.length,ti=tn?w[0]*q:h.length,to=Math.abs(uh(h,0,ti,q));if(tn)for(var ts=0,tu=w.length;ts<tu;ts++){var tl=w[ts]*q,tc=ts<tu-1?w[ts+1]*q:h.length;to-=Math.abs(uh(h,tl,tc,q))}var tp=0;for(ts=0;ts<tr.length;ts+=3){var td=tr[ts]*q,tm=tr[ts+1]*q,ty=tr[ts+2]*q;tp+=Math.abs((h[td]-h[ty])*(h[tm+1]-h[td+1])-(h[td]-h[tm])*(h[ty+1]-h[td+1]))}return 0===to&&0===tp?0:Math.abs((tp-to)/to)},Cu.flatten=function(h){for(var w=h[0][0].length,q={vertices:[],holes:[],dimensions:w},tr=0,tn=0;tn<h.length;tn++){for(var ti=0;ti<h[tn].length;ti++)for(var to=0;to<w;to++)q.vertices.push(h[tn][ti][to]);tn>0&&(tr+=h[tn-1].length,q.holes.push(tr))}return q};var lD=lC.exports;let lF=ku(lD);var lB={},lj={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */lj.exports,co=lj.exports,function(h){var w=co&&!co.nodeType&&co,q=lj&&!lj.nodeType&&lj,tr="object"==typeof u5&&u5;(tr.global===tr||tr.window===tr||tr.self===tr)&&(h=tr);var tn,ti,to=/^xn--/,ts=/[^\x20-\x7E]/,tu=/[\x2E\u3002\uFF0E\uFF61]/g,tl={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},tc=Math.floor,tp=String.fromCharCode;function G(h){throw RangeError(tl[h])}function P(h,w){for(var q=h.length,tr=[];q--;)tr[q]=w(h[q]);return tr}function M(h,w){var q=h.split("@"),tr="";return q.length>1&&(tr=q[0]+"@",h=q[1]),tr+P((h=h.replace(tu,".")).split("."),w).join(".")}function W(h){for(var w,q,tr=[],tn=0,ti=h.length;tn<ti;)(w=h.charCodeAt(tn++))>=55296&&w<=56319&&tn<ti?(64512&(q=h.charCodeAt(tn++)))==56320?tr.push(((1023&w)<<10)+(1023&q)+65536):(tr.push(w),tn--):tr.push(w);return tr}function ft(h){return P(h,function(h){var w="";return h>65535&&(h-=65536,w+=tp(h>>>10&1023|55296),h=56320|1023&h),w+=tp(h)}).join("")}function Ot(h,w){return h+22+75*(h<26)-((0!=w)<<5)}function H(h,w,q){var tr=0;for(h=q?tc(h/700):h>>1,h+=tc(h/w);h>455;tr+=36)h=tc(h/35);return tc(tr+36*h/(h+38))}function $(h){var w,q,tr,tn,ti,to,ts,tu,tl,tp,td,tm=[],ty=h.length,tv=0,tb=128,tx=72;for((tr=h.lastIndexOf("-"))<0&&(tr=0),tn=0;tn<tr;++tn)h.charCodeAt(tn)>=128&&G("not-basic"),tm.push(h.charCodeAt(tn));for(ti=tr>0?tr+1:0;ti<ty;){for(to=tv,ts=1,tu=36;ti>=ty&&G("invalid-input"),((tl=(w=h.charCodeAt(ti++))-48<10?w-22:w-65<26?w-65:w-97<26?w-97:36)>=36||tl>tc((2147483647-tv)/ts))&&G("overflow"),tv+=tl*ts,!(tl<(tp=tu<=tx?1:tu>=tx+26?26:tu-tx));tu+=36)ts>tc(2147483647/(td=36-tp))&&G("overflow"),ts*=td;tx=H(tv-to,q=tm.length+1,0==to),tc(tv/q)>2147483647-tb&&G("overflow"),tb+=tc(tv/q),tv%=q,tm.splice(tv++,0,tb)}return ft(tm)}function lt(h){var w,q,tr,tn,ti,to,ts,tu,tl,td,tm,ty,tv,tb,tx,tT=[];for(ty=(h=W(h)).length,w=128,q=0,ti=72,to=0;to<ty;++to)(tm=h[to])<128&&tT.push(tp(tm));for(tr=tn=tT.length,tn&&tT.push("-");tr<ty;){for(ts=2147483647,to=0;to<ty;++to)(tm=h[to])>=w&&tm<ts&&(ts=tm);for(ts-w>tc((2147483647-q)/(tv=tr+1))&&G("overflow"),q+=(ts-w)*tv,w=ts,to=0;to<ty;++to)if((tm=h[to])<w&&++q>2147483647&&G("overflow"),tm==w){for(tu=q,tl=36;!(tu<(td=tl<=ti?1:tl>=ti+26?26:tl-ti));tl+=36)tx=tu-td,tb=36-td,tT.push(tp(Ot(td+tx%tb,0))),tu=tc(tx/tb);tT.push(tp(Ot(tu,0))),ti=H(q,tv,tr==tn),q=0,++tr}++q,++w}return tT.join("")}if(tn={version:"1.4.1",ucs2:{decode:W,encode:ft},decode:$,encode:lt,toASCII:function(h){return M(h,function(h){return ts.test(h)?"xn--"+lt(h):h})},toUnicode:function(h){return M(h,function(h){return to.test(h)?$(h.slice(4).toLowerCase()):h})}},w&&q){if(lj.exports==w)q.exports=tn;else for(ti in tn)tn.hasOwnProperty(ti)&&(w[ti]=tn[ti])}else h.punycode=tn}(u5);var lG,lV,lX,lH,lz,lK,lY,lW,lq,lZ,lJ,lQ,l$,l0,l1,l2,l3,l4,l5,l6,l8,l7,l9,cr,cn,co,ca,cu,cc,ch,cp,cf,cd,c_,cm,cy,cb,cx,cT,cE,cA,cO,cw,cL,cS,cI=lj.exports,cP="u">typeof Symbol&&Symbol,cR={foo:{}},cN=Object,cM=Object.prototype.toString,ck=Math.max,Pd=function(h,w){for(var q=[],tr=0;tr<h.length;tr+=1)q[tr]=h[tr];for(var tn=0;tn<w.length;tn+=1)q[tn+h.length]=w[tn];return q},XA=function(h,w){for(var q=[],tr=w||0,tn=0;tr<h.length;tr+=1,tn+=1)q[tn]=h[tr];return q},HA=function(h,w){for(var q="",tr=0;tr<h.length;tr+=1)q+=h[tr],tr+1<h.length&&(q+=w);return q},cU=Function.prototype.bind||function(h){var w=this;if("function"!=typeof w||"[object Function]"!==cM.apply(w))throw TypeError("Function.prototype.bind called on incompatible "+w);for(var q,tr=XA(arguments,1),tn=ck(0,w.length-tr.length),ti=[],to=0;to<tn;to++)ti[to]="$"+to;if(q=Function("binder","return function ("+HA(ti,",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof q){var tn=w.apply(this,Pd(tr,arguments));return Object(tn)===tn?tn:this}return w.apply(h,Pd(tr,arguments))}),w.prototype){var l=function(){};l.prototype=w.prototype,q.prototype=new l,l.prototype=null}return q},cC={}.hasOwnProperty,cD=Function.prototype.call,cF=cD.bind?cD.bind(cC):function(h,w){return cD.call(cC,h,w)},cB=SyntaxError,cj=Function,cG=TypeError,Nl=function(h){try{return cj('"use strict"; return ('+h+").constructor;")()}catch{}},cV=Object.getOwnPropertyDescriptor;if(cV)try{cV({},"")}catch{cV=null}var kl=function(){throw new cG},cX=cV?function(){try{return arguments.callee,kl}catch{try{return cV(arguments,"callee").get}catch{return kl}}}():kl,cH="function"==typeof cP&&"function"==typeof Symbol&&"symbol"==typeof cP("foo")&&"symbol"==typeof Symbol("bar")&&function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var h={},w=Symbol("test"),q=Object(w);if("string"==typeof w||"[object Symbol]"!==Object.prototype.toString.call(w)||"[object Symbol]"!==Object.prototype.toString.call(q))return!1;for(w in h[w]=42,h)return!1;if("function"==typeof Object.keys&&0!==Object.keys(h).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(h).length)return!1;var tr=Object.getOwnPropertySymbols(h);if(1!==tr.length||tr[0]!==w||!Object.prototype.propertyIsEnumerable.call(h,w))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var tn=Object.getOwnPropertyDescriptor(h,w);if(42!==tn.value||!0!==tn.enumerable)return!1}return!0}(),cz={__proto__:cR}.foo===cR.foo&&!(({__proto__:null})instanceof cN),cK=Object.getPrototypeOf||(cz?function(h){return h.__proto__}:null),cY={},cW=typeof Uint8Array>"u"||!cK?cS:cK(Uint8Array),cq={"%AggregateError%":typeof AggregateError>"u"?cS:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?cS:ArrayBuffer,"%ArrayIteratorPrototype%":cH&&cK?cK([][Symbol.iterator]()):cS,"%AsyncFromSyncIteratorPrototype%":cS,"%AsyncFunction%":cY,"%AsyncGenerator%":cY,"%AsyncGeneratorFunction%":cY,"%AsyncIteratorPrototype%":cY,"%Atomics%":typeof Atomics>"u"?cS:Atomics,"%BigInt%":typeof BigInt>"u"?cS:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?cS:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?cS:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?cS:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?cS:Float32Array,"%Float64Array%":typeof Float64Array>"u"?cS:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?cS:FinalizationRegistry,"%Function%":cj,"%GeneratorFunction%":cY,"%Int8Array%":typeof Int8Array>"u"?cS:Int8Array,"%Int16Array%":typeof Int16Array>"u"?cS:Int16Array,"%Int32Array%":typeof Int32Array>"u"?cS:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":cH&&cK?cK(cK([][Symbol.iterator]())):cS,"%JSON%":"object"==typeof JSON?JSON:cS,"%Map%":typeof Map>"u"?cS:Map,"%MapIteratorPrototype%":!(typeof Map>"u")&&cH&&cK?cK(new Map()[Symbol.iterator]()):cS,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?cS:Promise,"%Proxy%":typeof Proxy>"u"?cS:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?cS:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?cS:Set,"%SetIteratorPrototype%":!(typeof Set>"u")&&cH&&cK?cK(new Set()[Symbol.iterator]()):cS,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?cS:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":cH&&cK?cK(""[Symbol.iterator]()):cS,"%Symbol%":cH?Symbol:cS,"%SyntaxError%":cB,"%ThrowTypeError%":cX,"%TypedArray%":cW,"%TypeError%":cG,"%Uint8Array%":typeof Uint8Array>"u"?cS:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?cS:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?cS:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?cS:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?cS:WeakMap,"%WeakRef%":typeof WeakRef>"u"?cS:WeakRef,"%WeakSet%":typeof WeakSet>"u"?cS:WeakSet};if(cK)try{null.error}catch(h){var cZ=cK(cK(h));cq["%Error.prototype%"]=cZ}var JA=function e(h){var w;if("%AsyncFunction%"===h)w=Nl("async function () {}");else if("%GeneratorFunction%"===h)w=Nl("function* () {}");else if("%AsyncGeneratorFunction%"===h)w=Nl("async function* () {}");else if("%AsyncGenerator%"===h){var q=e("%AsyncGeneratorFunction%");q&&(w=q.prototype)}else if("%AsyncIteratorPrototype%"===h){var tr=e("%AsyncGenerator%");tr&&cK&&(w=cK(tr.prototype))}return cq[h]=w,w},cJ={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},cQ=cU.call(Function.call,Array.prototype.concat),c$=cU.call(Function.apply,Array.prototype.splice),c1=cU.call(Function.call,String.prototype.replace),c2=cU.call(Function.call,String.prototype.slice),c3=cU.call(Function.call,RegExp.prototype.exec),c4=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,c5=/\\(\\)?/g,iE=function(h){var w=c2(h,0,1),q=c2(h,-1);if("%"===w&&"%"!==q)throw new cB("invalid intrinsic syntax, expected closing `%`");if("%"===q&&"%"!==w)throw new cB("invalid intrinsic syntax, expected opening `%`");var tr=[];return c1(h,c4,function(h,w,q,tn){tr[tr.length]=q?c1(tn,c5,"$1"):w||h}),tr},oE=function(h,w){var q,tr=h;if(cF(cJ,tr)&&(tr="%"+(q=cJ[tr])[0]+"%"),cF(cq,tr)){var tn=cq[tr];if(tn===cY&&(tn=JA(tr)),typeof tn>"u"&&!w)throw new cG("intrinsic "+h+" exists, but is not available. Please file an issue!");return{alias:q,name:tr,value:tn}}throw new cB("intrinsic "+h+" does not exist!")},Af=function(h,w){if("string"!=typeof h||0===h.length)throw new cG("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof w)throw new cG('"allowMissing" argument must be a boolean');if(null===c3(/^%?[^%]*%?$/,h))throw new cB("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var q=iE(h),tr=q.length>0?q[0]:"",tn=oE("%"+tr+"%",w),ti=tn.name,to=tn.value,ts=!1,tu=tn.alias;tu&&(tr=tu[0],c$(q,cQ([0,1],tu)));for(var tl=1,tc=!0;tl<q.length;tl+=1){var tp=q[tl],td=c2(tp,0,1),tm=c2(tp,-1);if(('"'===td||"'"===td||"`"===td||'"'===tm||"'"===tm||"`"===tm)&&td!==tm)throw new cB("property names with quotes must have matching quotes");if("constructor"!==tp&&tc||(ts=!0),tr+="."+tp,cF(cq,ti="%"+tr+"%"))to=cq[ti];else if(null!=to){if(!(tp in to)){if(!w)throw new cG("base intrinsic for "+h+" exists, but the property is not available.");return}if(cV&&tl+1>=q.length){var ty=cV(to,tp);to=(tc=!!ty)&&"get"in ty&&!("originalValue"in ty.get)?ty.get:to[tp]}else tc=cF(to,tp),to=to[tp];tc&&!ts&&(cq[ti]=to)}}return to},c6={exports:{}};!function(h){var w=Af("%Function.prototype.apply%"),q=Af("%Function.prototype.call%"),tr=Af("%Reflect.apply%",!0)||cU.call(q,w),tn=Af("%Object.getOwnPropertyDescriptor%",!0),ti=Af("%Object.defineProperty%",!0),to=Af("%Math.max%");if(ti)try{ti({},"a",{value:1})}catch{ti=null}h.exports=function(h){var w=tr(cU,q,arguments);return tn&&ti&&tn(w,"length").configurable&&ti(w,"length",{value:1+to(0,h.length-(arguments.length-1))}),w};var l=function(){return tr(cU,w,arguments)};ti?ti(h.exports,"apply",{value:l}):h.exports.apply=l}(c6);var c8=c6.exports,c7=c8(Af("String.prototype.indexOf"));let c9=Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})),hr=function(h){if(h.__esModule)return h;var w=h.default;if("function"==typeof w){var t=function r(){return this instanceof r?Reflect.construct(w,arguments,this.constructor):w.apply(this,arguments)};t.prototype=w.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(h).forEach(function(w){var q=Object.getOwnPropertyDescriptor(h,w);Object.defineProperty(t,w,q.get?q:{enumerable:!0,get:function(){return h[w]}})}),t}(c9);var hn="function"==typeof Map&&Map.prototype,ho=Object.getOwnPropertyDescriptor&&hn?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,hl=hn&&ho&&"function"==typeof ho.get?ho.get:null,hh=hn&&Map.prototype.forEach,hp="function"==typeof Set&&Set.prototype,hf=Object.getOwnPropertyDescriptor&&hp?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,hd=hp&&hf&&"function"==typeof hf.get?hf.get:null,hm=hp&&Set.prototype.forEach,hb="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,hx="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,hT="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,hE=Boolean.prototype.valueOf,hA=Object.prototype.toString,hO=Function.prototype.toString,hw=String.prototype.match,hL=String.prototype.slice,hS=String.prototype.replace,hP=String.prototype.toUpperCase,hR=String.prototype.toLowerCase,hN=RegExp.prototype.test,hM=Array.prototype.concat,hk=Array.prototype.join,hU=Array.prototype.slice,hC=Math.floor,hD="function"==typeof BigInt?BigInt.prototype.valueOf:null,hF=Object.getOwnPropertySymbols,hB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,hj="function"==typeof Symbol&&"object"==typeof Symbol.iterator,hG="function"==typeof Symbol&&Symbol.toStringTag?Symbol.toStringTag:null,hV=Object.prototype.propertyIsEnumerable,hX=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(h){return h.__proto__}:null);function jd(h,w){if(h===1/0||h===-1/0||h!=h||h&&h>-1e3&&h<1e3||hN.call(/e/,w))return w;var q=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof h){var tr=h<0?-hC(-h):hC(h);if(tr!==h){var tn=String(tr),ti=hL.call(w,tn.length+1);return hS.call(tn,q,"$&_")+"."+hS.call(hS.call(ti,/([0-9]{3})/g,"$&_"),/_$/,"")}}return hS.call(w,q,"$&_")}var hH=hr.custom,hz=Lm(hH)?hH:null;function Om(h,w,q){var tr="double"===(q.quoteStyle||w)?'"':"'";return tr+h+tr}function fh(h){return"[object Array]"===si(h)&&(!hG||!("object"==typeof h&&hG in h))}function Hd(h){return"[object RegExp]"===si(h)&&(!hG||!("object"==typeof h&&hG in h))}function Lm(h){if(hj)return h&&"object"==typeof h&&h instanceof Symbol;if("symbol"==typeof h)return!0;if(!h||"object"!=typeof h||!hB)return!1;try{return hB.call(h),!0}catch{}return!1}var hK=Object.prototype.hasOwnProperty||function(h){return h in this};function Kn(h,w){return hK.call(h,w)}function si(h){return hA.call(h)}function Sm(h,w){if(h.indexOf)return h.indexOf(w);for(var q=0,tr=h.length;q<tr;q++)if(h[q]===w)return q;return -1}function DE(h){var w=h.charCodeAt(0),q={8:"b",9:"t",10:"n",12:"f",13:"r"}[w];return q?"\\"+q:"\\x"+(w<16?"0":"")+hP.call(w.toString(16))}function ha(h){return"Object("+h+")"}function Dl(h){return h+" { ? }"}function zd(h,w,q,tr){return h+" ("+w+") {"+(tr?ph(q,tr):hk.call(q,", "))+"}"}function ph(h,w){if(0===h.length)return"";var q=`
`+w.prev+w.base;return q+hk.call(h,","+q)+`
`+w.prev}function Rs(h,w){var q=fh(h),tr=[];if(q){tr.length=h.length;for(var tn=0;tn<h.length;tn++)tr[tn]=Kn(h,tn)?w(h[tn],h):""}var ti,to="function"==typeof hF?hF(h):[];if(hj){ti={};for(var ts=0;ts<to.length;ts++)ti["$"+to[ts]]=to[ts]}for(var tu in h)Kn(h,tu)&&(q&&String(Number(tu))===tu&&tu<h.length||hj&&ti["$"+tu]instanceof Symbol||(hN.call(/[^\w$]/,tu)?tr.push(w(tu,h)+": "+w(h[tu],h)):tr.push(tu+": "+w(h[tu],h))));if("function"==typeof hF)for(var tl=0;tl<to.length;tl++)hV.call(h,to[tl])&&tr.push("["+w(to[tl])+"]: "+w(h[to[tl]],h));return tr}var Yo=function(h,w){var q=Af(h,!!w);return"function"==typeof q&&c7(h,".prototype.")>-1?c8(q):q},GE=function e(h,w,q,tr){var tn=w||{};if(Kn(tn,"quoteStyle")&&"single"!==tn.quoteStyle&&"double"!==tn.quoteStyle)throw TypeError('option "quoteStyle" must be "single" or "double"');if(Kn(tn,"maxStringLength")&&("number"==typeof tn.maxStringLength?tn.maxStringLength<0&&tn.maxStringLength!==1/0:null!==tn.maxStringLength))throw TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var ti=!Kn(tn,"customInspect")||tn.customInspect;if("boolean"!=typeof ti&&"symbol"!==ti)throw TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Kn(tn,"indent")&&null!==tn.indent&&"	"!==tn.indent&&!(parseInt(tn.indent,10)===tn.indent&&tn.indent>0))throw TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Kn(tn,"numericSeparator")&&"boolean"!=typeof tn.numericSeparator)throw TypeError('option "numericSeparator", if provided, must be `true` or `false`');var to=tn.numericSeparator;if(typeof h>"u")return"undefined";if(null===h)return"null";if("boolean"==typeof h)return h?"true":"false";if("string"==typeof h)return function Im(h,w){if(h.length>w.maxStringLength){var q=h.length-w.maxStringLength;return Im(hL.call(h,0,w.maxStringLength),w)+"... "+q+" more character"+(q>1?"s":"")}return Om(hS.call(hS.call(h,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,DE),"single",w)}(h,tn);if("number"==typeof h){if(0===h)return 1/0/h>0?"0":"-0";var ts=String(h);return to?jd(h,ts):ts}if("bigint"==typeof h){var tu=String(h)+"n";return to?jd(h,tu):tu}var tl=typeof tn.depth>"u"?5:tn.depth;if(typeof q>"u"&&(q=0),q>=tl&&tl>0&&"object"==typeof h)return fh(h)?"[Array]":"[Object]";var tc=function(h,w){var q;if("	"===h.indent)q="	";else{if("number"!=typeof h.indent||!(h.indent>0))return null;q=hk.call(Array(h.indent+1)," ")}return{base:q,prev:hk.call(Array(w+1),q)}}(tn,q);if(typeof tr>"u")tr=[];else if(Sm(tr,h)>=0)return"[Circular]";function d(h,w,ti){if(w&&(tr=hU.call(tr)).push(w),ti){var to={depth:tn.depth};return Kn(tn,"quoteStyle")&&(to.quoteStyle=tn.quoteStyle),e(h,to,q+1,tr)}return e(h,tn,q+1,tr)}if("function"==typeof h&&!Hd(h)){var tp=function(h){if(h.name)return h.name;var w=hw.call(hO.call(h),/^function\s*([\w$]+)/);return w?w[1]:null}(h),td=Rs(h,d);return"[Function"+(tp?": "+tp:" (anonymous)")+"]"+(td.length>0?" { "+hk.call(td,", ")+" }":"")}if(Lm(h)){var tm=hj?hS.call(String(h),/^(Symbol\(.*\))_[^)]*$/,"$1"):hB.call(h);return"object"!=typeof h||hj?tm:ha(tm)}if(h&&"object"==typeof h&&("u">typeof HTMLElement&&h instanceof HTMLElement||"string"==typeof h.nodeName&&"function"==typeof h.getAttribute)){for(var ty,tv="<"+hR.call(String(h.nodeName)),tb=h.attributes||[],tx=0;tx<tb.length;tx++)tv+=" "+tb[tx].name+"="+Om((ty=tb[tx].value,hS.call(String(ty),/"/g,"&quot;")),"double",tn);return tv+=">",h.childNodes&&h.childNodes.length&&(tv+="..."),tv+="</"+hR.call(String(h.nodeName))+">"}if(fh(h)){if(0===h.length)return"[]";var tT=Rs(h,d);return tc&&!function(h){for(var w=0;w<h.length;w++)if(Sm(h[w],`
`)>=0)return!1;return!0}(tT)?"["+ph(tT,tc)+"]":"[ "+hk.call(tT,", ")+" ]"}if("[object Error]"===si(h)&&(!hG||!("object"==typeof h&&hG in h))){var tE=Rs(h,d);return"cause"in Error.prototype||!("cause"in h)||hV.call(h,"cause")?0===tE.length?"["+String(h)+"]":"{ ["+String(h)+"] "+hk.call(tE,", ")+" }":"{ ["+String(h)+"] "+hk.call(hM.call("[cause]: "+d(h.cause),tE),", ")+" }"}if("object"==typeof h&&ti){if(hz&&"function"==typeof h[hz]&&hr)return hr(h,{depth:tl-q});if("symbol"!==ti&&"function"==typeof h.inspect)return h.inspect()}if(function(h){if(!hl||!h||"object"!=typeof h)return!1;try{hl.call(h);try{hd.call(h)}catch{return!0}return h instanceof Map}catch{}return!1}(h)){var tA=[];return hh&&hh.call(h,function(w,q){tA.push(d(q,h,!0)+" => "+d(w,h))}),zd("Map",hl.call(h),tA,tc)}if(function(h){if(!hd||!h||"object"!=typeof h)return!1;try{hd.call(h);try{hl.call(h)}catch{return!0}return h instanceof Set}catch{}return!1}(h)){var tO=[];return hm&&hm.call(h,function(w){tO.push(d(w,h))}),zd("Set",hd.call(h),tO,tc)}if(function(h){if(!hb||!h||"object"!=typeof h)return!1;try{hb.call(h,hb);try{hx.call(h,hx)}catch{return!0}return h instanceof WeakMap}catch{}return!1}(h))return Dl("WeakMap");if(function(h){if(!hx||!h||"object"!=typeof h)return!1;try{hx.call(h,hx);try{hb.call(h,hb)}catch{return!0}return h instanceof WeakSet}catch{}return!1}(h))return Dl("WeakSet");if(function(h){if(!hT||!h||"object"!=typeof h)return!1;try{return hT.call(h),!0}catch{}return!1}(h))return Dl("WeakRef");if("[object Number]"===si(h)&&(!hG||!("object"==typeof h&&hG in h)))return ha(d(Number(h)));if(function(h){if(!h||"object"!=typeof h||!hD)return!1;try{return hD.call(h),!0}catch{}return!1}(h))return ha(d(hD.call(h)));if("[object Boolean]"===si(h)&&(!hG||!("object"==typeof h&&hG in h)))return ha(hE.call(h));if("[object String]"===si(h)&&(!hG||!("object"==typeof h&&hG in h)))return ha(d(String(h)));if(!("[object Date]"===si(h)&&(!hG||!("object"==typeof h&&hG in h)))&&!Hd(h)){var tw=Rs(h,d),tL=hX?hX(h)===Object.prototype:h instanceof Object||h.constructor===Object,tS=h instanceof Object?"":"null prototype",tI=!tL&&hG&&Object(h)===h&&hG in h?hL.call(si(h),8,-1):tS?"Object":"",tP=(tL||"function"!=typeof h.constructor?"":h.constructor.name?h.constructor.name+" ":"")+(tI||tS?"["+hk.call(hM.call([],tI||[],tS||[]),": ")+"] ":"");return 0===tw.length?tP+"{}":tc?tP+"{"+ph(tw,tc)+"}":tP+"{ "+hk.call(tw,", ")+" }"}return String(h)},hY=Af("%TypeError%"),hW=Af("%WeakMap%",!0),hq=Af("%Map%",!0),hZ=Yo("WeakMap.prototype.get",!0),hJ=Yo("WeakMap.prototype.set",!0),hQ=Yo("WeakMap.prototype.has",!0),h$=Yo("Map.prototype.get",!0),h1=Yo("Map.prototype.set",!0),h2=Yo("Map.prototype.has",!0),Sf=function(h,w){for(var q,tr=h;null!==(q=tr.next);tr=q)if(q.key===w)return tr.next=q.next,q.next=h.next,h.next=q,q},WE=function(h,w){var q=Sf(h,w);return q&&q.value},qE=function(h,w,q){var tr=Sf(h,w);tr?tr.value=q:h.next={key:w,next:h.next,value:q}},h3=String.prototype.replace,h4=/%20/g,h5={RFC1738:"RFC1738",RFC3986:"RFC3986"},h6={default:h5.RFC3986,formatters:{RFC1738:function(h){return h3.call(h,h4,"+")},RFC3986:function(h){return String(h)}},RFC1738:h5.RFC1738,RFC3986:h5.RFC3986},h8=Object.prototype.hasOwnProperty,h7=Array.isArray,h9=function(){for(var h=[],w=0;w<256;++w)h.push("%"+((w<16?"0":"")+w.toString(16)).toUpperCase());return h}(),ew=function(h){for(;h.length>1;){var w=h.pop(),q=w.obj[w.prop];if(h7(q)){for(var tr=[],tn=0;tn<q.length;++tn)"u">typeof q[tn]&&tr.push(q[tn]);w.obj[w.prop]=tr}}},Pm=function(h,w){for(var q=w&&w.plainObjects?Object.create(null):{},tr=0;tr<h.length;++tr)"u">typeof h[tr]&&(q[tr]=h[tr]);return q},pr={arrayToObject:Pm,assign:function(h,w){return Object.keys(w).reduce(function(h,q){return h[q]=w[q],h},h)},combine:function(h,w){return[].concat(h,w)},compact:function(h){for(var w=[{obj:{o:h},prop:"o"}],q=[],tr=0;tr<w.length;++tr)for(var tn=w[tr],ti=tn.obj[tn.prop],to=Object.keys(ti),ts=0;ts<to.length;++ts){var tu=to[ts],tl=ti[tu];"object"==typeof tl&&null!==tl&&-1===q.indexOf(tl)&&(w.push({obj:ti,prop:tu}),q.push(tl))}return ew(w),h},decode:function(h,w,q){var tr=h.replace(/\+/g," ");if("iso-8859-1"===q)return tr.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(tr)}catch{return tr}},encode:function(h,w,q,tr,tn){if(0===h.length)return h;var ti=h;if("symbol"==typeof h?ti=Symbol.prototype.toString.call(h):"string"!=typeof h&&(ti=String(h)),"iso-8859-1"===q)return escape(ti).replace(/%u[0-9a-f]{4}/gi,function(h){return"%26%23"+parseInt(h.slice(2),16)+"%3B"});for(var to="",ts=0;ts<ti.length;++ts){var tu=ti.charCodeAt(ts);if(45===tu||46===tu||95===tu||126===tu||tu>=48&&tu<=57||tu>=65&&tu<=90||tu>=97&&tu<=122||tn===h6.RFC1738&&(40===tu||41===tu)){to+=ti.charAt(ts);continue}if(tu<128){to+=h9[tu];continue}if(tu<2048){to+=h9[192|tu>>6]+h9[128|63&tu];continue}if(tu<55296||tu>=57344){to+=h9[224|tu>>12]+h9[128|tu>>6&63]+h9[128|63&tu];continue}ts+=1,to+=h9[240|(tu=65536+((1023&tu)<<10|1023&ti.charCodeAt(ts)))>>18]+h9[128|tu>>12&63]+h9[128|tu>>6&63]+h9[128|63&tu]}return to},isBuffer:function(h){return!!h&&"object"==typeof h&&!!(h.constructor&&h.constructor.isBuffer&&h.constructor.isBuffer(h))},isRegExp:function(h){return"[object RegExp]"===Object.prototype.toString.call(h)},maybeMap:function(h,w){if(h7(h)){for(var q=[],tr=0;tr<h.length;tr+=1)q.push(w(h[tr]));return q}return w(h)},merge:function e(h,w,q){if(!w)return h;if("object"!=typeof w){if(h7(h))h.push(w);else{if(!h||"object"!=typeof h)return[h,w];(q&&(q.plainObjects||q.allowPrototypes)||!h8.call(Object.prototype,w))&&(h[w]=!0)}return h}if(!h||"object"!=typeof h)return[h].concat(w);var tr=h;return h7(h)&&!h7(w)&&(tr=Pm(h,q)),h7(h)&&h7(w)?(w.forEach(function(w,tr){if(h8.call(h,tr)){var tn=h[tr];tn&&"object"==typeof tn&&w&&"object"==typeof w?h[tr]=e(tn,w,q):h.push(w)}else h[tr]=w}),h):Object.keys(w).reduce(function(h,tr){var tn=w[tr];return h8.call(h,tr)?h[tr]=e(h[tr],tn,q):h[tr]=tn,h},tr)}},Nm=function(){var h,w,q,tr={assert:function(h){if(!tr.has(h))throw new hY("Side channel does not contain "+GE(h))},get:function(tr){if(hW&&tr&&("object"==typeof tr||"function"==typeof tr)){if(h)return hZ(h,tr)}else if(hq){if(w)return h$(w,tr)}else if(q)return WE(q,tr)},has:function(tr){if(hW&&tr&&("object"==typeof tr||"function"==typeof tr)){if(h)return hQ(h,tr)}else if(hq){if(w)return h2(w,tr)}else if(q)return!!Sf(q,tr);return!1},set:function(tr,tn){hW&&tr&&("object"==typeof tr||"function"==typeof tr)?(h||(h=new hW),hJ(h,tr,tn)):hq?(w||(w=new hq),h1(w,tr,tn)):(q||(q={key:{},next:null}),qE(q,tr,tn))}};return tr},pn=Object.prototype.hasOwnProperty,pi={brackets:function(h){return h+"[]"},comma:"comma",indices:function(h,w){return h+"["+w+"]"},repeat:function(h){return h}},po=Array.isArray,ps=Array.prototype.push,km=function(h,w){ps.apply(h,po(w)?w:[w])},pa=Date.prototype.toISOString,pu=h6.default,pl={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:pr.encode,encodeValuesOnly:!1,format:pu,formatter:h6.formatters[pu],indices:!1,serializeDate:function(h){return pa.call(h)},skipNulls:!1,strictNullHandling:!1},pf={},_w=function e(h,w,q,tr,tn,ti,to,ts,tu,tl,tc,tp,td,tm,ty,tv){for(var tb,tx,tT=h,tE=tv,tA=0,tO=!1;void 0!==(tE=tE.get(pf))&&!tO;){var tw=tE.get(h);if(tA+=1,"u">typeof tw){if(tw===tA)throw RangeError("Cyclic object value");tO=!0}typeof tE.get(pf)>"u"&&(tA=0)}if("function"==typeof ts?tT=ts(w,tT):tT instanceof Date?tT=tc(tT):"comma"===q&&po(tT)&&(tT=pr.maybeMap(tT,function(h){return h instanceof Date?tc(h):h})),null===tT){if(tn)return to&&!tm?to(w,pl.encoder,ty,"key",tp):w;tT=""}if("string"==typeof(tb=tT)||"number"==typeof tb||"boolean"==typeof tb||"symbol"==typeof tb||"bigint"==typeof tb||pr.isBuffer(tT))return to?[td(tm?w:to(w,pl.encoder,ty,"key",tp))+"="+td(to(tT,pl.encoder,ty,"value",tp))]:[td(w)+"="+td(String(tT))];var tL=[];if(typeof tT>"u")return tL;if("comma"===q&&po(tT))tm&&to&&(tT=pr.maybeMap(tT,to)),tx=[{value:tT.length>0?tT.join(",")||null:void 0}];else if(po(ts))tx=ts;else{var tS=Object.keys(tT);tx=tu?tS.sort(tu):tS}for(var tI=tr&&po(tT)&&1===tT.length?w+"[]":w,tP=0;tP<tx.length;++tP){var tR=tx[tP],tN="object"==typeof tR&&"u">typeof tR.value?tR.value:tT[tR];if(!(ti&&null===tN)){var tM=po(tT)?"function"==typeof q?q(tI,tR):tI:tI+(tl?"."+tR:"["+tR+"]");tv.set(h,tA);var tk=Nm();tk.set(pf,tv),km(tL,e(tN,tM,q,tr,tn,ti,"comma"===q&&tm&&po(tT)?null:to,ts,tu,tl,tc,tp,td,tm,ty,tk))}}return tL},vw=function(h){if(!h)return pl;if(null!==h.encoder&&"u">typeof h.encoder&&"function"!=typeof h.encoder)throw TypeError("Encoder has to be a function.");var w=h.charset||pl.charset;if("u">typeof h.charset&&"utf-8"!==h.charset&&"iso-8859-1"!==h.charset)throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var q=h6.default;if("u">typeof h.format){if(!pn.call(h6.formatters,h.format))throw TypeError("Unknown format option provided.");q=h.format}var tr=h6.formatters[q],tn=pl.filter;return("function"==typeof h.filter||po(h.filter))&&(tn=h.filter),{addQueryPrefix:"boolean"==typeof h.addQueryPrefix?h.addQueryPrefix:pl.addQueryPrefix,allowDots:typeof h.allowDots>"u"?pl.allowDots:!!h.allowDots,charset:w,charsetSentinel:"boolean"==typeof h.charsetSentinel?h.charsetSentinel:pl.charsetSentinel,delimiter:typeof h.delimiter>"u"?pl.delimiter:h.delimiter,encode:"boolean"==typeof h.encode?h.encode:pl.encode,encoder:"function"==typeof h.encoder?h.encoder:pl.encoder,encodeValuesOnly:"boolean"==typeof h.encodeValuesOnly?h.encodeValuesOnly:pl.encodeValuesOnly,filter:tn,format:q,formatter:tr,serializeDate:"function"==typeof h.serializeDate?h.serializeDate:pl.serializeDate,skipNulls:"boolean"==typeof h.skipNulls?h.skipNulls:pl.skipNulls,sort:"function"==typeof h.sort?h.sort:null,strictNullHandling:"boolean"==typeof h.strictNullHandling?h.strictNullHandling:pl.strictNullHandling}},pd=Object.prototype.hasOwnProperty,p_=Array.isArray,pm={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:pr.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},Cm=function(h,w){return h&&"string"==typeof h&&w.comma&&h.indexOf(",")>-1?h.split(","):h},Tw=function(h,w){var q,tr={__proto__:null},tn=w.ignoreQueryPrefix?h.replace(/^\?/,""):h,ti=w.parameterLimit===1/0?void 0:w.parameterLimit,to=tn.split(w.delimiter,ti),ts=-1,tu=w.charset;if(w.charsetSentinel)for(q=0;q<to.length;++q)0===to[q].indexOf("utf8=")&&("utf8=%E2%9C%93"===to[q]?tu="utf-8":"utf8=%26%2310003%3B"===to[q]&&(tu="iso-8859-1"),ts=q,q=to.length);for(q=0;q<to.length;++q)if(q!==ts){var tl,tc,tp=to[q],td=tp.indexOf("]="),tm=-1===td?tp.indexOf("="):td+1;-1===tm?(tl=w.decoder(tp,pm.decoder,tu,"key"),tc=w.strictNullHandling?null:""):(tl=w.decoder(tp.slice(0,tm),pm.decoder,tu,"key"),tc=pr.maybeMap(Cm(tp.slice(tm+1),w),function(h){return w.decoder(h,pm.decoder,tu,"value")})),tc&&w.interpretNumericEntities&&"iso-8859-1"===tu&&(tc=tc.replace(/&#(\d+);/g,function(h,w){return String.fromCharCode(parseInt(w,10))})),tp.indexOf("[]=")>-1&&(tc=p_(tc)?[tc]:tc),pd.call(tr,tl)?tr[tl]=pr.combine(tr[tl],tc):tr[tl]=tc}return tr},Aw=function(h,w,q,tr){for(var tn=tr?w:Cm(w,q),ti=h.length-1;ti>=0;--ti){var to,ts=h[ti];if("[]"===ts&&q.parseArrays)to=[].concat(tn);else{to=q.plainObjects?Object.create(null):{};var tu="["===ts.charAt(0)&&"]"===ts.charAt(ts.length-1)?ts.slice(1,-1):ts,tl=parseInt(tu,10);q.parseArrays||""!==tu?!isNaN(tl)&&ts!==tu&&String(tl)===tu&&tl>=0&&q.parseArrays&&tl<=q.arrayLimit?(to=[])[tl]=tn:"__proto__"!==tu&&(to[tu]=tn):to={0:tn}}tn=to}return tn},Ew=function(h,w,q,tr){if(h){var tn=q.allowDots?h.replace(/\.([^.[]+)/g,"[$1]"):h,ti=/(\[[^[\]]*])/g,to=q.depth>0&&/(\[[^[\]]*])/.exec(tn),ts=to?tn.slice(0,to.index):tn,tu=[];if(ts){if(!q.plainObjects&&pd.call(Object.prototype,ts)&&!q.allowPrototypes)return;tu.push(ts)}for(var tl=0;q.depth>0&&null!==(to=ti.exec(tn))&&tl<q.depth;){if(tl+=1,!q.plainObjects&&pd.call(Object.prototype,to[1].slice(1,-1))&&!q.allowPrototypes)return;tu.push(to[1])}return to&&tu.push("["+tn.slice(to.index)+"]"),Aw(tu,w,q,tr)}},ww=function(h){if(!h)return pm;if(null!==h.decoder&&void 0!==h.decoder&&"function"!=typeof h.decoder)throw TypeError("Decoder has to be a function.");if("u">typeof h.charset&&"utf-8"!==h.charset&&"iso-8859-1"!==h.charset)throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var w=typeof h.charset>"u"?pm.charset:h.charset;return{allowDots:typeof h.allowDots>"u"?pm.allowDots:!!h.allowDots,allowPrototypes:"boolean"==typeof h.allowPrototypes?h.allowPrototypes:pm.allowPrototypes,allowSparse:"boolean"==typeof h.allowSparse?h.allowSparse:pm.allowSparse,arrayLimit:"number"==typeof h.arrayLimit?h.arrayLimit:pm.arrayLimit,charset:w,charsetSentinel:"boolean"==typeof h.charsetSentinel?h.charsetSentinel:pm.charsetSentinel,comma:"boolean"==typeof h.comma?h.comma:pm.comma,decoder:"function"==typeof h.decoder?h.decoder:pm.decoder,delimiter:"string"==typeof h.delimiter||pr.isRegExp(h.delimiter)?h.delimiter:pm.delimiter,depth:"number"==typeof h.depth||!1===h.depth?+h.depth:pm.depth,ignoreQueryPrefix:!0===h.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof h.interpretNumericEntities?h.interpretNumericEntities:pm.interpretNumericEntities,parameterLimit:"number"==typeof h.parameterLimit?h.parameterLimit:pm.parameterLimit,parseArrays:!1!==h.parseArrays,plainObjects:"boolean"==typeof h.plainObjects?h.plainObjects:pm.plainObjects,strictNullHandling:"boolean"==typeof h.strictNullHandling?h.strictNullHandling:pm.strictNullHandling}};function nn(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var py=/^([a-z0-9.+-]+:)/i,pv=/:[0-9]*$/,pb=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,px=["'"].concat(["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"])),pT=["%","/","?",";","#"].concat(px),pE=["/","?","#"],pA=/^[+a-z0-9A-Z_-]{0,63}$/,pO=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,pw={javascript:!0,"javascript:":!0},pL={javascript:!0,"javascript:":!0},pS={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},pI={formats:h6,parse:function(h,w){var q=ww(w);if(""===h||null===h||typeof h>"u")return q.plainObjects?Object.create(null):{};for(var tr="string"==typeof h?Tw(h,q):h,tn=q.plainObjects?Object.create(null):{},ti=Object.keys(tr),to=0;to<ti.length;++to){var ts=ti[to],tu=Ew(ts,tr[ts],q,"string"==typeof h);tn=pr.merge(tn,tu,q)}return!0===q.allowSparse?tn:pr.compact(tn)},stringify:function(h,w){var q,tr,tn=h,ti=vw(w);"function"==typeof ti.filter?tn=(0,ti.filter)("",tn):po(ti.filter)&&(tr=ti.filter);var to=[];if("object"!=typeof tn||null===tn)return"";q=w&&w.arrayFormat in pi?w.arrayFormat:w&&"indices"in w?w.indices?"indices":"repeat":"indices";var ts=pi[q];if(w&&"commaRoundTrip"in w&&"boolean"!=typeof w.commaRoundTrip)throw TypeError("`commaRoundTrip` must be a boolean, or absent");var tu="comma"===ts&&w&&w.commaRoundTrip;tr||(tr=Object.keys(tn)),ti.sort&&tr.sort(ti.sort);for(var tl=Nm(),tc=0;tc<tr.length;++tc){var tp=tr[tc];ti.skipNulls&&null===tn[tp]||km(to,_w(tn[tp],tp,ts,tu,ti.strictNullHandling,ti.skipNulls,ti.encode?ti.encoder:null,ti.filter,ti.sort,ti.allowDots,ti.serializeDate,ti.format,ti.formatter,ti.encodeValuesOnly,ti.charset,tl))}var td=to.join(ti.delimiter),tm=!0===ti.addQueryPrefix?"?":"";return ti.charsetSentinel&&("iso-8859-1"===ti.charset?tm+="utf8=%26%2310003%3B&":tm+="utf8=%E2%9C%93&"),td.length>0?tm+td:""}};function os(h,w,q){if(h&&"object"==typeof h&&h instanceof nn)return h;var tr=new nn;return tr.parse(h,w,q),tr}nn.prototype.parse=function(h,w,q){if("string"!=typeof h)throw TypeError("Parameter 'url' must be a string, not "+typeof h);var tr=h.indexOf("?"),tn=-1!==tr&&tr<h.indexOf("#")?"?":"#",ti=h.split(tn);ti[0]=ti[0].replace(/\\/g,"/");var to=h=ti.join(tn);if(to=to.trim(),!q&&1===h.split("#").length){var ts=pb.exec(to);if(ts)return this.path=to,this.href=to,this.pathname=ts[1],ts[2]?(this.search=ts[2],w?this.query=pI.parse(this.search.substr(1)):this.query=this.search.substr(1)):w&&(this.search="",this.query={}),this}var tu=py.exec(to);if(tu){var tl=(tu=tu[0]).toLowerCase();this.protocol=tl,to=to.substr(tu.length)}if(q||tu||to.match(/^\/\/[^@/]+@[^@/]+/)){var tc="//"===to.substr(0,2);tc&&!(tu&&pL[tu])&&(to=to.substr(2),this.slashes=!0)}if(!pL[tu]&&(tc||tu&&!pS[tu])){for(var tp,td,tm=-1,ty=0;ty<pE.length;ty++){var tv=to.indexOf(pE[ty]);-1!==tv&&(-1===tm||tv<tm)&&(tm=tv)}-1!==(td=-1===tm?to.lastIndexOf("@"):to.lastIndexOf("@",tm))&&(tp=to.slice(0,td),to=to.slice(td+1),this.auth=decodeURIComponent(tp)),tm=-1;for(var ty=0;ty<pT.length;ty++){var tv=to.indexOf(pT[ty]);-1!==tv&&(-1===tm||tv<tm)&&(tm=tv)}-1===tm&&(tm=to.length),this.host=to.slice(0,tm),to=to.slice(tm),this.parseHost(),this.hostname=this.hostname||"";var tb="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!tb)for(var tx=this.hostname.split(/\./),ty=0,tT=tx.length;ty<tT;ty++){var tE=tx[ty];if(tE&&!tE.match(pA)){for(var tA="",tO=0,tw=tE.length;tO<tw;tO++)tE.charCodeAt(tO)>127?tA+="x":tA+=tE[tO];if(!tA.match(pA)){var tL=tx.slice(0,ty),tS=tx.slice(ty+1),tI=tE.match(pO);tI&&(tL.push(tI[1]),tS.unshift(tI[2])),tS.length&&(to="/"+tS.join(".")+to),this.hostname=tL.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),tb||(this.hostname=cI.toASCII(this.hostname));var tP=this.port?":"+this.port:"",tR=this.hostname||"";this.host=tR+tP,this.href+=this.host,tb&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==to[0]&&(to="/"+to))}if(!pw[tl])for(var ty=0,tT=px.length;ty<tT;ty++){var tN=px[ty];if(-1!==to.indexOf(tN)){var tM=encodeURIComponent(tN);tM===tN&&(tM=escape(tN)),to=to.split(tN).join(tM)}}var tk=to.indexOf("#");-1!==tk&&(this.hash=to.substr(tk),to=to.slice(0,tk));var tU=to.indexOf("?");if(-1!==tU?(this.search=to.substr(tU),this.query=to.substr(tU+1),w&&(this.query=pI.parse(this.query)),to=to.slice(0,tU)):w&&(this.search="",this.query={}),to&&(this.pathname=to),pS[tl]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var tP=this.pathname||"",tC=this.search||"";this.path=tP+tC}return this.href=this.format(),this},nn.prototype.format=function(){var h=this.auth||"";h&&(h=(h=encodeURIComponent(h)).replace(/%3A/i,":")+"@");var w=this.protocol||"",q=this.pathname||"",tr=this.hash||"",tn=!1,ti="";this.host?tn=h+this.host:this.hostname&&(tn=h+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(tn+=":"+this.port)),this.query&&"object"==typeof this.query&&Object.keys(this.query).length&&(ti=pI.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var to=this.search||ti&&"?"+ti||"";return w&&":"!==w.substr(-1)&&(w+=":"),this.slashes||(!w||pS[w])&&!1!==tn?(tn="//"+(tn||""),q&&"/"!==q.charAt(0)&&(q="/"+q)):tn||(tn=""),tr&&"#"!==tr.charAt(0)&&(tr="#"+tr),to&&"?"!==to.charAt(0)&&(to="?"+to),w+tn+(q=q.replace(/[?#]/g,function(h){return encodeURIComponent(h)}))+(to=to.replace("#","%23"))+tr},nn.prototype.resolve=function(h){return this.resolveObject(os(h,!1,!0)).format()},nn.prototype.resolveObject=function(h){if("string"==typeof h){var w=new nn;w.parse(h,!1,!0),h=w}for(var q=new nn,tr=Object.keys(this),tn=0;tn<tr.length;tn++){var ti=tr[tn];q[ti]=this[ti]}if(q.hash=h.hash,""===h.href)return q.href=q.format(),q;if(h.slashes&&!h.protocol){for(var to=Object.keys(h),ts=0;ts<to.length;ts++){var tu=to[ts];"protocol"!==tu&&(q[tu]=h[tu])}return pS[q.protocol]&&q.hostname&&!q.pathname&&(q.pathname="/",q.path=q.pathname),q.href=q.format(),q}if(h.protocol&&h.protocol!==q.protocol){if(!pS[h.protocol]){for(var tl=Object.keys(h),tc=0;tc<tl.length;tc++){var tp=tl[tc];q[tp]=h[tp]}return q.href=q.format(),q}if(q.protocol=h.protocol,h.host||pL[h.protocol])q.pathname=h.pathname;else{for(var td=(h.pathname||"").split("/");td.length&&!(h.host=td.shift()););h.host||(h.host=""),h.hostname||(h.hostname=""),""!==td[0]&&td.unshift(""),td.length<2&&td.unshift(""),q.pathname=td.join("/")}if(q.search=h.search,q.query=h.query,q.host=h.host||"",q.auth=h.auth,q.hostname=h.hostname||h.host,q.port=h.port,q.pathname||q.search){var tm=q.pathname||"",ty=q.search||"";q.path=tm+ty}return q.slashes=q.slashes||h.slashes,q.href=q.format(),q}var tv=q.pathname&&"/"===q.pathname.charAt(0),tb=h.host||h.pathname&&"/"===h.pathname.charAt(0),tx=tb||tv||q.host&&h.pathname,tT=tx,tE=q.pathname&&q.pathname.split("/")||[],td=h.pathname&&h.pathname.split("/")||[],tA=q.protocol&&!pS[q.protocol];if(tA&&(q.hostname="",q.port=null,q.host&&(""===tE[0]?tE[0]=q.host:tE.unshift(q.host)),q.host="",h.protocol&&(h.hostname=null,h.port=null,h.host&&(""===td[0]?td[0]=h.host:td.unshift(h.host)),h.host=null),tx=tx&&(""===td[0]||""===tE[0])),tb)q.host=h.host||""===h.host?h.host:q.host,q.hostname=h.hostname||""===h.hostname?h.hostname:q.hostname,q.search=h.search,q.query=h.query,tE=td;else if(td.length)tE||(tE=[]),tE.pop(),tE=tE.concat(td),q.search=h.search,q.query=h.query;else if(null!=h.search){if(tA){q.host=tE.shift(),q.hostname=q.host;var tO=!!(q.host&&q.host.indexOf("@")>0)&&q.host.split("@");tO&&(q.auth=tO.shift(),q.hostname=tO.shift(),q.host=q.hostname)}return q.search=h.search,q.query=h.query,(null!==q.pathname||null!==q.search)&&(q.path=(q.pathname?q.pathname:"")+(q.search?q.search:"")),q.href=q.format(),q}if(!tE.length)return q.pathname=null,q.search?q.path="/"+q.search:q.path=null,q.href=q.format(),q;for(var tw=tE.slice(-1)[0],tL=(q.host||h.host||tE.length>1)&&("."===tw||".."===tw)||""===tw,tS=0,tI=tE.length;tI>=0;tI--)"."===(tw=tE[tI])?tE.splice(tI,1):".."===tw?(tE.splice(tI,1),tS++):tS&&(tE.splice(tI,1),tS--);if(!tx&&!tT)for(;tS--;tS)tE.unshift("..");tx&&""!==tE[0]&&(!tE[0]||"/"!==tE[0].charAt(0))&&tE.unshift(""),tL&&"/"!==tE.join("/").substr(-1)&&tE.push("");var tP=""===tE[0]||tE[0]&&"/"===tE[0].charAt(0);if(tA){q.hostname=tP?"":tE.length?tE.shift():"",q.host=q.hostname;var tO=!!(q.host&&q.host.indexOf("@")>0)&&q.host.split("@");tO&&(q.auth=tO.shift(),q.hostname=tO.shift(),q.host=q.hostname)}return(tx=tx||q.host&&tE.length)&&!tP&&tE.unshift(""),tE.length>0?q.pathname=tE.join("/"):(q.pathname=null,q.path=null),(null!==q.pathname||null!==q.search)&&(q.path=(q.pathname?q.pathname:"")+(q.search?q.search:"")),q.auth=h.auth||q.auth,q.slashes=q.slashes||h.slashes,q.href=q.format(),q},nn.prototype.parseHost=function(){var h=this.host,w=pv.exec(h);w&&(":"!==(w=w[0])&&(this.port=w.substr(1)),h=h.substr(0,h.length-w.length)),h&&(this.hostname=h)};var pP=lB.parse=os;lB.resolve=function(h,w){return os(h,!1,!0).resolve(w)},lB.resolveObject=function(h,w){return h?os(h,!1,!0).resolveObject(w):w},lB.format=function(h){return"string"==typeof h&&(h=os(h)),h instanceof nn?h.format():nn.prototype.format.call(h)},lB.Url=nn,(pj=p4||(p4={}))[pj.WEBGL_LEGACY=0]="WEBGL_LEGACY",pj[pj.WEBGL=1]="WEBGL",pj[pj.WEBGL2=2]="WEBGL2",(pG=p5||(p5={}))[pG.UNKNOWN=0]="UNKNOWN",pG[pG.WEBGL=1]="WEBGL",pG[pG.CANVAS=2]="CANVAS",(pV=p6||(p6={}))[pV.COLOR=16384]="COLOR",pV[pV.DEPTH=256]="DEPTH",pV[pV.STENCIL=1024]="STENCIL",(pX=p8||(p8={}))[pX.NORMAL=0]="NORMAL",pX[pX.ADD=1]="ADD",pX[pX.MULTIPLY=2]="MULTIPLY",pX[pX.SCREEN=3]="SCREEN",pX[pX.OVERLAY=4]="OVERLAY",pX[pX.DARKEN=5]="DARKEN",pX[pX.LIGHTEN=6]="LIGHTEN",pX[pX.COLOR_DODGE=7]="COLOR_DODGE",pX[pX.COLOR_BURN=8]="COLOR_BURN",pX[pX.HARD_LIGHT=9]="HARD_LIGHT",pX[pX.SOFT_LIGHT=10]="SOFT_LIGHT",pX[pX.DIFFERENCE=11]="DIFFERENCE",pX[pX.EXCLUSION=12]="EXCLUSION",pX[pX.HUE=13]="HUE",pX[pX.SATURATION=14]="SATURATION",pX[pX.COLOR=15]="COLOR",pX[pX.LUMINOSITY=16]="LUMINOSITY",pX[pX.NORMAL_NPM=17]="NORMAL_NPM",pX[pX.ADD_NPM=18]="ADD_NPM",pX[pX.SCREEN_NPM=19]="SCREEN_NPM",pX[pX.NONE=20]="NONE",pX[pX.SRC_OVER=0]="SRC_OVER",pX[pX.SRC_IN=21]="SRC_IN",pX[pX.SRC_OUT=22]="SRC_OUT",pX[pX.SRC_ATOP=23]="SRC_ATOP",pX[pX.DST_OVER=24]="DST_OVER",pX[pX.DST_IN=25]="DST_IN",pX[pX.DST_OUT=26]="DST_OUT",pX[pX.DST_ATOP=27]="DST_ATOP",pX[pX.ERASE=26]="ERASE",pX[pX.SUBTRACT=28]="SUBTRACT",pX[pX.XOR=29]="XOR",(pH=p7||(p7={}))[pH.POINTS=0]="POINTS",pH[pH.LINES=1]="LINES",pH[pH.LINE_LOOP=2]="LINE_LOOP",pH[pH.LINE_STRIP=3]="LINE_STRIP",pH[pH.TRIANGLES=4]="TRIANGLES",pH[pH.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",pH[pH.TRIANGLE_FAN=6]="TRIANGLE_FAN",(pz=p9||(p9={}))[pz.RGBA=6408]="RGBA",pz[pz.RGB=6407]="RGB",pz[pz.ALPHA=6406]="ALPHA",pz[pz.LUMINANCE=6409]="LUMINANCE",pz[pz.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",pz[pz.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",pz[pz.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(pK=fr||(fr={}))[pK.TEXTURE_2D=3553]="TEXTURE_2D",pK[pK.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",pK[pK.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",pK[pK.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",pK[pK.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",pK[pK.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",pK[pK.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",pK[pK.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",pK[pK.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(pY=fn||(fn={}))[pY.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",pY[pY.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",pY[pY.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",pY[pY.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",pY[pY.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",pY[pY.FLOAT=5126]="FLOAT",pY[pY.HALF_FLOAT=36193]="HALF_FLOAT",(pW=fo||(fo={}))[pW.NEAREST=0]="NEAREST",pW[pW.LINEAR=1]="LINEAR",(pq=fs||(fs={}))[pq.CLAMP=33071]="CLAMP",pq[pq.REPEAT=10497]="REPEAT",pq[pq.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(pZ=fa||(fa={}))[pZ.OFF=0]="OFF",pZ[pZ.POW2=1]="POW2",pZ[pZ.ON=2]="ON",(pJ=fu||(fu={}))[pJ.NPM=0]="NPM",pJ[pJ.UNPACK=1]="UNPACK",pJ[pJ.PMA=2]="PMA",pJ[pJ.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",pJ[pJ.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",pJ[pJ.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(pQ=fl||(fl={}))[pQ.NO=0]="NO",pQ[pQ.YES=1]="YES",pQ[pQ.AUTO=2]="AUTO",pQ[pQ.BLEND=0]="BLEND",pQ[pQ.CLEAR=1]="CLEAR",pQ[pQ.BLIT=2]="BLIT",(p$=ff||(ff={}))[p$.AUTO=0]="AUTO",p$[p$.MANUAL=1]="MANUAL",(p1=fg||(fg={})).LOW="lowp",p1.MEDIUM="mediump",p1.HIGH="highp",(p2=fy||(fy={}))[p2.NONE=0]="NONE",p2[p2.SCISSOR=1]="SCISSOR",p2[p2.STENCIL=2]="STENCIL",p2[p2.SPRITE=3]="SPRITE",(p3=fv||(fv={}))[p3.NONE=0]="NONE",p3[p3.LOW=2]="LOW",p3[p3.MEDIUM=4]="MEDIUM",p3[p3.HIGH=8]="HIGH",/*!
 * @pixi/utils - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */lN.RETINA_PREFIX=/@([0-9\.]+)x/,lN.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0;var pR=!1,pN="5.3.3";function Uo(h,w){return void 0===w&&(w=[]),w[0]=(h>>16&255)/255,w[1]=(h>>8&255)/255,w[2]=(255&h)/255,w}function Um(h){var w=h.toString(16);return"#"+(w="000000".substr(0,6-w.length)+w)}function Mm(h){return"string"==typeof h&&"#"===h[0]&&(h=h.substr(1)),parseInt(h,16)}var pM=function(){for(var h=[],w=[],q=0;q<32;q++)h[q]=q,w[q]=q;h[p8.NORMAL_NPM]=p8.NORMAL,h[p8.ADD_NPM]=p8.ADD,h[p8.SCREEN_NPM]=p8.SCREEN,w[p8.NORMAL]=p8.NORMAL_NPM,w[p8.ADD]=p8.ADD_NPM,w[p8.SCREEN]=p8.SCREEN_NPM;var tr=[];return tr.push(w),tr.push(h),tr}();function Pf(h,w){if(1===w)return(255*w<<24)+h;if(0===w)return 0;var q=h>>16&255,tr=h>>8&255,tn=255&h;return q=q*w+.5|0,tr=tr*w+.5|0,tn=tn*w+.5|0,(255*w<<24)+(q<<16)+(tr<<8)+tn}function Bm(h,w,q,tr){return(q=q||new Float32Array(4))[0]=(h>>16&255)/255,q[1]=(h>>8&255)/255,q[2]=(255&h)/255,(tr||void 0===tr)&&(q[0]*=w,q[1]*=w,q[2]*=w),q[3]=w,q}function xu(h){return h+=0===h?1:0,--h,h|=h>>>1,h|=h>>>2,h|=h>>>4,h|=h>>>8,(h|=h>>>16)+1}function t_(h){var w=(h>65535?1:0)<<4,q=((h>>>=w)>255?1:0)<<3;return h>>>=q,w|=q,q=(h>15?1:0)<<2,h>>>=q,w|=q,q=(h>3?1:0)<<1,h>>>=q,(w|=q)|h>>1}function yo(h,w,q){var tr,tn=h.length;if(!(w>=tn||0===q)){q=w+q>tn?tn-w:q;var ti=tn-q;for(tr=w;tr<ti;++tr)h[tr]=h[tr+q];h.length=ti}}function lo(h){return 0===h?0:h<0?-1:1}var pk=0,pU={};function Qn(h,w,q){if(void 0===q&&(q=3),!pU[w]){var tr=Error().stack;typeof tr>"u"?console.warn("PixiJS Deprecation Warning: ",w+`
Deprecated since v`+h):(tr=tr.split(`
`).splice(q).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",w+`
Deprecated since v`+h),console.warn(tr),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",w+`
Deprecated since v`+h),console.warn(tr))),pU[w]=!0}}var pC={},pD=Object.create(null),pF=Object.create(null),pB=function(){function e(h,w,q){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=q||lN.RESOLUTION,this.resize(h,w)}return e.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},e.prototype.resize=function(h,w){this.canvas.width=h*this.resolution,this.canvas.height=w*this.resolution},e.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.canvas.width},set:function(h){this.canvas.width=h},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.canvas.height},set:function(h){this.canvas.height=h},enumerable:!1,configurable:!0}),e}();function bu(h,w){var q=lN.RETINA_PREFIX.exec(h);return q?parseFloat(q[1]):void 0!==w?w:1}/*!
 * @pixi/math - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var pj,pG,pV,pX,pH,pz,pK,pY,pW,pq,pZ,pJ,pQ,p$,p1,p2,p3,p4,p5,p6,p8,p7,p9,fr,fn,fo,fs,fa,fu,fl,ff,fg,fy,fv,fb,fx,fT,fE=2*Math.PI,fA=180/Math.PI,fO=Math.PI/180;(go=fT||(fT={}))[go.POLY=0]="POLY",go[go.RECT=1]="RECT",go[go.CIRC=2]="CIRC",go[go.ELIP=3]="ELIP",go[go.RREC=4]="RREC";var fw=function(){function e(h,w,q,tr){void 0===h&&(h=0),void 0===w&&(w=0),void 0===q&&(q=0),void 0===tr&&(tr=0),this.x=Number(h),this.y=Number(w),this.width=Number(q),this.height=Number(tr),this.type=fT.RECT}return Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(e,"EMPTY",{get:function(){return new e(0,0,0,0)},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copyFrom=function(h){return this.x=h.x,this.y=h.y,this.width=h.width,this.height=h.height,this},e.prototype.copyTo=function(h){return h.x=this.x,h.y=this.y,h.width=this.width,h.height=this.height,h},e.prototype.contains=function(h,w){return!(this.width<=0)&&!(this.height<=0)&&h>=this.x&&h<this.x+this.width&&w>=this.y&&w<this.y+this.height},e.prototype.pad=function(h,w){return void 0===h&&(h=0),void 0===w&&(w=h),this.x-=h,this.y-=w,this.width+=2*h,this.height+=2*w,this},e.prototype.fit=function(h){var w=Math.max(this.x,h.x),q=Math.min(this.x+this.width,h.x+h.width),tr=Math.max(this.y,h.y),tn=Math.min(this.y+this.height,h.y+h.height);return this.x=w,this.width=Math.max(q-w,0),this.y=tr,this.height=Math.max(tn-tr,0),this},e.prototype.ceil=function(h,w){void 0===h&&(h=1),void 0===w&&(w=.001);var q=Math.ceil((this.x+this.width-w)*h)/h,tr=Math.ceil((this.y+this.height-w)*h)/h;return this.x=Math.floor((this.x+w)*h)/h,this.y=Math.floor((this.y+w)*h)/h,this.width=q-this.x,this.height=tr-this.y,this},e.prototype.enlarge=function(h){var w=Math.min(this.x,h.x),q=Math.max(this.x+this.width,h.x+h.width),tr=Math.min(this.y,h.y),tn=Math.max(this.y+this.height,h.y+h.height);return this.x=w,this.width=q-w,this.y=tr,this.height=tn-tr,this},e}(),fL=function(){function e(h,w,q){void 0===h&&(h=0),void 0===w&&(w=0),void 0===q&&(q=0),this.x=h,this.y=w,this.radius=q,this.type=fT.CIRC}return e.prototype.clone=function(){return new e(this.x,this.y,this.radius)},e.prototype.contains=function(h,w){if(this.radius<=0)return!1;var q=this.radius*this.radius,tr=this.x-h,tn=this.y-w;return tr*=tr,tn*=tn,tr+tn<=q},e.prototype.getBounds=function(){return new fw(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},e}(),fS=function(){function e(h,w,q,tr){void 0===h&&(h=0),void 0===w&&(w=0),void 0===q&&(q=0),void 0===tr&&(tr=0),this.x=h,this.y=w,this.width=q,this.height=tr,this.type=fT.ELIP}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.contains=function(h,w){if(this.width<=0||this.height<=0)return!1;var q=(h-this.x)/this.width,tr=(w-this.y)/this.height;return q*=q,tr*=tr,q+tr<=1},e.prototype.getBounds=function(){return new fw(this.x-this.width,this.y-this.height,this.width,this.height)},e}(),fI=function(){function e(){for(var h=arguments,w=[],q=0;q<arguments.length;q++)w[q]=h[q];var tr=Array.isArray(w[0])?w[0]:w;if("number"!=typeof tr[0]){for(var tn=[],ti=0,to=tr.length;ti<to;ti++)tn.push(tr[ti].x,tr[ti].y);tr=tn}this.points=tr,this.type=fT.POLY,this.closeStroke=!0}return e.prototype.clone=function(){var h=this.points.slice(),w=new e(h);return w.closeStroke=this.closeStroke,w},e.prototype.contains=function(h,w){for(var q=!1,tr=this.points.length/2,tn=0,ti=tr-1;tn<tr;ti=tn++){var to=this.points[2*tn],ts=this.points[2*tn+1],tu=this.points[2*ti],tl=this.points[2*ti+1];ts>w!=tl>w&&h<(tu-to)*((w-ts)/(tl-ts))+to&&(q=!q)}return q},e}(),fP=function(){function e(h,w,q,tr,tn){void 0===h&&(h=0),void 0===w&&(w=0),void 0===q&&(q=0),void 0===tr&&(tr=0),void 0===tn&&(tn=20),this.x=h,this.y=w,this.width=q,this.height=tr,this.radius=tn,this.type=fT.RREC}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height,this.radius)},e.prototype.contains=function(h,w){if(this.width<=0||this.height<=0)return!1;if(h>=this.x&&h<=this.x+this.width&&w>=this.y&&w<=this.y+this.height){if(w>=this.y+this.radius&&w<=this.y+this.height-this.radius||h>=this.x+this.radius&&h<=this.x+this.width-this.radius)return!0;var q=h-(this.x+this.radius),tr=w-(this.y+this.radius),tn=this.radius*this.radius;if(q*q+tr*tr<=tn||(q=h-(this.x+this.width-this.radius))*q+tr*tr<=tn||q*q+(tr=w-(this.y+this.height-this.radius))*tr<=tn||(q=h-(this.x+this.radius))*q+tr*tr<=tn)return!0}return!1},e}(),fR=function(){function e(h,w){void 0===h&&(h=0),void 0===w&&(w=0),this.x=h,this.y=w}return e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.copyFrom=function(h){return this.set(h.x,h.y),this},e.prototype.copyTo=function(h){return h.set(this.x,this.y),h},e.prototype.equals=function(h){return h.x===this.x&&h.y===this.y},e.prototype.set=function(h,w){return void 0===h&&(h=0),void 0===w&&(w=h),this.x=h,this.y=w,this},e}(),fN=function(){function e(h,w,q,tr){void 0===q&&(q=0),void 0===tr&&(tr=0),this._x=q,this._y=tr,this.cb=h,this.scope=w}return e.prototype.clone=function(h,w){return void 0===h&&(h=this.cb),void 0===w&&(w=this.scope),new e(h,w,this._x,this._y)},e.prototype.set=function(h,w){return void 0===h&&(h=0),void 0===w&&(w=h),(this._x!==h||this._y!==w)&&(this._x=h,this._y=w,this.cb.call(this.scope)),this},e.prototype.copyFrom=function(h){return(this._x!==h.x||this._y!==h.y)&&(this._x=h.x,this._y=h.y,this.cb.call(this.scope)),this},e.prototype.copyTo=function(h){return h.set(this._x,this._y),h},e.prototype.equals=function(h){return h.x===this._x&&h.y===this._y},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(h){this._x!==h&&(this._x=h,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(h){this._y!==h&&(this._y=h,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),e}(),fM=function(){function e(h,w,q,tr,tn,ti){void 0===h&&(h=1),void 0===w&&(w=0),void 0===q&&(q=0),void 0===tr&&(tr=1),void 0===tn&&(tn=0),void 0===ti&&(ti=0),this.array=null,this.a=h,this.b=w,this.c=q,this.d=tr,this.tx=tn,this.ty=ti}return e.prototype.fromArray=function(h){this.a=h[0],this.b=h[1],this.c=h[3],this.d=h[4],this.tx=h[2],this.ty=h[5]},e.prototype.set=function(h,w,q,tr,tn,ti){return this.a=h,this.b=w,this.c=q,this.d=tr,this.tx=tn,this.ty=ti,this},e.prototype.toArray=function(h,w){this.array||(this.array=new Float32Array(9));var q=w||this.array;return h?(q[0]=this.a,q[1]=this.b,q[2]=0,q[3]=this.c,q[4]=this.d,q[5]=0,q[6]=this.tx,q[7]=this.ty):(q[0]=this.a,q[1]=this.c,q[2]=this.tx,q[3]=this.b,q[4]=this.d,q[5]=this.ty,q[6]=0,q[7]=0),q[8]=1,q},e.prototype.apply=function(h,w){w=w||new fR;var q=h.x,tr=h.y;return w.x=this.a*q+this.c*tr+this.tx,w.y=this.b*q+this.d*tr+this.ty,w},e.prototype.applyInverse=function(h,w){w=w||new fR;var q=1/(this.a*this.d+-(this.c*this.b)),tr=h.x,tn=h.y;return w.x=this.d*q*tr+-this.c*q*tn+(this.ty*this.c-this.tx*this.d)*q,w.y=this.a*q*tn+-this.b*q*tr+(-this.ty*this.a+this.tx*this.b)*q,w},e.prototype.translate=function(h,w){return this.tx+=h,this.ty+=w,this},e.prototype.scale=function(h,w){return this.a*=h,this.d*=w,this.c*=h,this.b*=w,this.tx*=h,this.ty*=w,this},e.prototype.rotate=function(h){var w=Math.cos(h),q=Math.sin(h),tr=this.a,tn=this.c,ti=this.tx;return this.a=tr*w-this.b*q,this.b=tr*q+this.b*w,this.c=tn*w-this.d*q,this.d=tn*q+this.d*w,this.tx=ti*w-this.ty*q,this.ty=ti*q+this.ty*w,this},e.prototype.append=function(h){var w=this.a,q=this.b,tr=this.c,tn=this.d;return this.a=h.a*w+h.b*tr,this.b=h.a*q+h.b*tn,this.c=h.c*w+h.d*tr,this.d=h.c*q+h.d*tn,this.tx=h.tx*w+h.ty*tr+this.tx,this.ty=h.tx*q+h.ty*tn+this.ty,this},e.prototype.setTransform=function(h,w,q,tr,tn,ti,to,ts,tu){return this.a=Math.cos(to+tu)*tn,this.b=Math.sin(to+tu)*tn,this.c=-Math.sin(to-ts)*ti,this.d=Math.cos(to-ts)*ti,this.tx=h-(q*this.a+tr*this.c),this.ty=w-(q*this.b+tr*this.d),this},e.prototype.prepend=function(h){var w=this.tx;if(1!==h.a||0!==h.b||0!==h.c||1!==h.d){var q=this.a,tr=this.c;this.a=q*h.a+this.b*h.c,this.b=q*h.b+this.b*h.d,this.c=tr*h.a+this.d*h.c,this.d=tr*h.b+this.d*h.d}return this.tx=w*h.a+this.ty*h.c+h.tx,this.ty=w*h.b+this.ty*h.d+h.ty,this},e.prototype.decompose=function(h){var w=this.a,q=this.b,tr=this.c,tn=this.d,ti=-Math.atan2(-tr,tn),to=Math.atan2(q,w),ts=Math.abs(ti+to);return ts<1e-5||1e-5>Math.abs(fE-ts)?(h.rotation=to,h.skew.x=h.skew.y=0):(h.rotation=0,h.skew.x=ti,h.skew.y=to),h.scale.x=Math.sqrt(w*w+q*q),h.scale.y=Math.sqrt(tr*tr+tn*tn),h.position.x=this.tx,h.position.y=this.ty,h},e.prototype.invert=function(){var h=this.a,w=this.b,q=this.c,tr=this.d,tn=this.tx,ti=h*tr-w*q;return this.a=tr/ti,this.b=-w/ti,this.c=-q/ti,this.d=h/ti,this.tx=(q*this.ty-tr*tn)/ti,this.ty=-(h*this.ty-w*tn)/ti,this},e.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},e.prototype.clone=function(){var h=new e;return h.a=this.a,h.b=this.b,h.c=this.c,h.d=this.d,h.tx=this.tx,h.ty=this.ty,h},e.prototype.copyTo=function(h){return h.a=this.a,h.b=this.b,h.c=this.c,h.d=this.d,h.tx=this.tx,h.ty=this.ty,h},e.prototype.copyFrom=function(h){return this.a=h.a,this.b=h.b,this.c=h.c,this.d=h.d,this.tx=h.tx,this.ty=h.ty,this},Object.defineProperty(e,"IDENTITY",{get:function(){return new e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"TEMP_MATRIX",{get:function(){return new e},enumerable:!1,configurable:!0}),e}(),fk=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],fU=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],fC=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],fD=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],fF=[],fB=[],fj=Math.sign;!function(){for(var h=0;h<16;h++){var w=[];fF.push(w);for(var q=0;q<16;q++)for(var tr=fj(fk[h]*fk[q]+fC[h]*fU[q]),tn=fj(fU[h]*fk[q]+fD[h]*fU[q]),ti=fj(fk[h]*fC[q]+fC[h]*fD[q]),to=fj(fU[h]*fC[q]+fD[h]*fD[q]),ts=0;ts<16;ts++)if(fk[ts]===tr&&fU[ts]===tn&&fC[ts]===ti&&fD[ts]===to){w.push(ts);break}}for(var h=0;h<16;h++){var tu=new fM;tu.set(fk[h],fU[h],fC[h],fD[h],0,0),fB.push(tu)}}();var fG={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(h){return fk[h]},uY:function(h){return fU[h]},vX:function(h){return fC[h]},vY:function(h){return fD[h]},inv:function(h){return 8&h?15&h:7&-h},add:function(h,w){return fF[h][w]},sub:function(h,w){return fF[h][fG.inv(w)]},rotate180:function(h){return 4^h},isVertical:function(h){return(3&h)==2},byDirection:function(h,w){return 2*Math.abs(h)<=Math.abs(w)?w>=0?fG.S:fG.N:2*Math.abs(w)<=Math.abs(h)?h>0?fG.E:fG.W:w>0?h>0?fG.SE:fG.SW:h>0?fG.NE:fG.NW},matrixAppendRotationInv:function(h,w,q,tr){void 0===q&&(q=0),void 0===tr&&(tr=0);var tn=fB[fG.inv(w)];tn.tx=q,tn.ty=tr,h.append(tn)}},fV=function(){function e(){this.worldTransform=new fM,this.localTransform=new fM,this.position=new fN(this.onChange,this,0,0),this.scale=new fN(this.onChange,this,1,1),this.pivot=new fN(this.onChange,this,0,0),this.skew=new fN(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return e.prototype.onChange=function(){this._localID++},e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},e.prototype.updateLocalTransform=function(){var h=this.localTransform;this._localID!==this._currentLocalID&&(h.a=this._cx*this.scale.x,h.b=this._sx*this.scale.x,h.c=this._cy*this.scale.y,h.d=this._sy*this.scale.y,h.tx=this.position.x-(this.pivot.x*h.a+this.pivot.y*h.c),h.ty=this.position.y-(this.pivot.x*h.b+this.pivot.y*h.d),this._currentLocalID=this._localID,this._parentID=-1)},e.prototype.updateTransform=function(h){var w=this.localTransform;if(this._localID!==this._currentLocalID&&(w.a=this._cx*this.scale.x,w.b=this._sx*this.scale.x,w.c=this._cy*this.scale.y,w.d=this._sy*this.scale.y,w.tx=this.position.x-(this.pivot.x*w.a+this.pivot.y*w.c),w.ty=this.position.y-(this.pivot.x*w.b+this.pivot.y*w.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==h._worldID){var q=h.worldTransform,tr=this.worldTransform;tr.a=w.a*q.a+w.b*q.c,tr.b=w.a*q.b+w.b*q.d,tr.c=w.c*q.a+w.d*q.c,tr.d=w.c*q.b+w.d*q.d,tr.tx=w.tx*q.a+w.ty*q.c+q.tx,tr.ty=w.tx*q.b+w.ty*q.d+q.ty,this._parentID=h._worldID,this._worldID++}},e.prototype.setFromMatrix=function(h){h.decompose(this),this._localID++},Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(h){this._rotation!==h&&(this._rotation=h,this.updateSkew())},enumerable:!1,configurable:!0}),e.IDENTITY=new e,e}();/*!
 * @pixi/display - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */lN.SORTABLE_CHILDREN=!1;var fX=function(){function e(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return e.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},e.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},e.prototype.getRectangle=function(h){return this.minX>this.maxX||this.minY>this.maxY?fw.EMPTY:((h=h||new fw(0,0,1,1)).x=this.minX,h.y=this.minY,h.width=this.maxX-this.minX,h.height=this.maxY-this.minY,h)},e.prototype.addPoint=function(h){this.minX=Math.min(this.minX,h.x),this.maxX=Math.max(this.maxX,h.x),this.minY=Math.min(this.minY,h.y),this.maxY=Math.max(this.maxY,h.y)},e.prototype.addQuad=function(h){var w=this.minX,q=this.minY,tr=this.maxX,tn=this.maxY,ti=h[0],to=h[1];w=ti<w?ti:w,q=to<q?to:q,tr=ti>tr?ti:tr,tn=to>tn?to:tn,ti=h[2],to=h[3],w=ti<w?ti:w,q=to<q?to:q,tr=ti>tr?ti:tr,tn=to>tn?to:tn,ti=h[4],to=h[5],w=ti<w?ti:w,q=to<q?to:q,tr=ti>tr?ti:tr,tn=to>tn?to:tn,ti=h[6],to=h[7],w=ti<w?ti:w,q=to<q?to:q,tr=ti>tr?ti:tr,tn=to>tn?to:tn,this.minX=w,this.minY=q,this.maxX=tr,this.maxY=tn},e.prototype.addFrame=function(h,w,q,tr,tn){this.addFrameMatrix(h.worldTransform,w,q,tr,tn)},e.prototype.addFrameMatrix=function(h,w,q,tr,tn){var ti=h.a,to=h.b,ts=h.c,tu=h.d,tl=h.tx,tc=h.ty,tp=this.minX,td=this.minY,tm=this.maxX,ty=this.maxY,tv=ti*w+ts*q+tl,tb=to*w+tu*q+tc;tp=tv<tp?tv:tp,td=tb<td?tb:td,tm=tv>tm?tv:tm,ty=tb>ty?tb:ty,tv=ti*tr+ts*q+tl,tb=to*tr+tu*q+tc,tp=tv<tp?tv:tp,td=tb<td?tb:td,tm=tv>tm?tv:tm,ty=tb>ty?tb:ty,tv=ti*w+ts*tn+tl,tb=to*w+tu*tn+tc,tp=tv<tp?tv:tp,td=tb<td?tb:td,tm=tv>tm?tv:tm,ty=tb>ty?tb:ty,tv=ti*tr+ts*tn+tl,tb=to*tr+tu*tn+tc,tp=tv<tp?tv:tp,td=tb<td?tb:td,tm=tv>tm?tv:tm,ty=tb>ty?tb:ty,this.minX=tp,this.minY=td,this.maxX=tm,this.maxY=ty},e.prototype.addVertexData=function(h,w,q){for(var tr=this.minX,tn=this.minY,ti=this.maxX,to=this.maxY,ts=w;ts<q;ts+=2){var tu=h[ts],tl=h[ts+1];tr=tu<tr?tu:tr,tn=tl<tn?tl:tn,ti=tu>ti?tu:ti,to=tl>to?tl:to}this.minX=tr,this.minY=tn,this.maxX=ti,this.maxY=to},e.prototype.addVertices=function(h,w,q,tr){this.addVerticesMatrix(h.worldTransform,w,q,tr)},e.prototype.addVerticesMatrix=function(h,w,q,tr,tn,ti){void 0===tn&&(tn=0),void 0===ti&&(ti=tn);for(var to=h.a,ts=h.b,tu=h.c,tl=h.d,tc=h.tx,tp=h.ty,td=this.minX,tm=this.minY,ty=this.maxX,tv=this.maxY,tb=q;tb<tr;tb+=2){var tx=w[tb],tT=w[tb+1],tE=to*tx+tu*tT+tc,tA=tl*tT+ts*tx+tp;td=Math.min(td,tE-tn),ty=Math.max(ty,tE+tn),tm=Math.min(tm,tA-ti),tv=Math.max(tv,tA+ti)}this.minX=td,this.minY=tm,this.maxX=ty,this.maxY=tv},e.prototype.addBounds=function(h){var w=this.minX,q=this.minY,tr=this.maxX,tn=this.maxY;this.minX=h.minX<w?h.minX:w,this.minY=h.minY<q?h.minY:q,this.maxX=h.maxX>tr?h.maxX:tr,this.maxY=h.maxY>tn?h.maxY:tn},e.prototype.addBoundsMask=function(h,w){var q=h.minX>w.minX?h.minX:w.minX,tr=h.minY>w.minY?h.minY:w.minY,tn=h.maxX<w.maxX?h.maxX:w.maxX,ti=h.maxY<w.maxY?h.maxY:w.maxY;if(q<=tn&&tr<=ti){var to=this.minX,ts=this.minY,tu=this.maxX,tl=this.maxY;this.minX=q<to?q:to,this.minY=tr<ts?tr:ts,this.maxX=tn>tu?tn:tu,this.maxY=ti>tl?ti:tl}},e.prototype.addBoundsMatrix=function(h,w){this.addFrameMatrix(w,h.minX,h.minY,h.maxX,h.maxY)},e.prototype.addBoundsArea=function(h,w){var q=h.minX>w.x?h.minX:w.x,tr=h.minY>w.y?h.minY:w.y,tn=h.maxX<w.x+w.width?h.maxX:w.x+w.width,ti=h.maxY<w.y+w.height?h.maxY:w.y+w.height;if(q<=tn&&tr<=ti){var to=this.minX,ts=this.minY,tu=this.maxX,tl=this.maxY;this.minX=q<to?q:to,this.minY=tr<ts?tr:ts,this.maxX=tn>tu?tn:tu,this.maxY=ti>tl?ti:tl}},e.prototype.pad=function(h,w){void 0===h&&(h=0),void 0===w&&(w=h),this.isEmpty()||(this.minX-=h,this.maxX+=h,this.minY-=w,this.maxY+=w)},e.prototype.addFramePad=function(h,w,q,tr,tn,ti){h-=tn,w-=ti,q+=tn,tr+=ti,this.minX=this.minX<h?this.minX:h,this.maxX=this.maxX>q?this.maxX:q,this.minY=this.minY<w?this.minY:w,this.maxY=this.maxY>tr?this.maxY:tr},e}(),xh=function(h,w){return(xh=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,w){h.__proto__=w}||function(h,w){for(var q in w)w.hasOwnProperty(q)&&(h[q]=w[q])})(h,w)};function Rf(h,w){function t(){this.constructor=h}xh(h,w),h.prototype=null===w?Object.create(w):(t.prototype=w.prototype,new t)}var fH=function(h){function n(){var w=h.call(this)||this;return w.tempDisplayObjectParent=null,w.transform=new fV,w.alpha=1,w.visible=!0,w.renderable=!0,w.parent=null,w.worldAlpha=1,w._lastSortedIndex=0,w._zIndex=0,w.filterArea=null,w.filters=null,w._enabledFilters=null,w._bounds=new fX,w._localBounds=null,w._boundsID=0,w._boundsRect=null,w._localBoundsRect=null,w._mask=null,w._destroyed=!1,w.isSprite=!1,w.isMask=!1,w}return Rf(n,h),n.mixin=function(h){for(var w=Object.keys(h),q=0;q<w.length;++q){var tr=w[q];Object.defineProperty(n.prototype,tr,Object.getOwnPropertyDescriptor(h,tr))}},n.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},n.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},n.prototype.getBounds=function(h,w){return h||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),w||(this._boundsRect||(this._boundsRect=new fw),w=this._boundsRect),this._bounds.getRectangle(w)},n.prototype.getLocalBounds=function(h){h||(this._localBoundsRect||(this._localBoundsRect=new fw),h=this._localBoundsRect),this._localBounds||(this._localBounds=new fX);var w=this.transform,q=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var tr=this._bounds,tn=this._boundsID;this._bounds=this._localBounds;var ti=this.getBounds(!1,h);return this.parent=q,this.transform=w,this._bounds=tr,this._bounds.updateID+=this._boundsID-tn,ti},n.prototype.toGlobal=function(h,w,q){return void 0===q&&(q=!1),q||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(h,w)},n.prototype.toLocal=function(h,w,q,tr){return w&&(h=w.toGlobal(h,q,tr)),tr||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(h,q)},n.prototype.setParent=function(h){if(!h||!h.addChild)throw Error("setParent: Argument must be a Container");return h.addChild(this),h},n.prototype.setTransform=function(h,w,q,tr,tn,ti,to,ts,tu){return void 0===h&&(h=0),void 0===w&&(w=0),void 0===q&&(q=1),void 0===tr&&(tr=1),void 0===tn&&(tn=0),void 0===ti&&(ti=0),void 0===to&&(to=0),void 0===ts&&(ts=0),void 0===tu&&(tu=0),this.position.x=h,this.position.y=w,this.scale.x=q||1,this.scale.y=tr||1,this.rotation=tn,this.skew.x=ti,this.skew.y=to,this.pivot.x=ts,this.pivot.y=tu,this},n.prototype.destroy=function(h){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(n.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new fz),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),n.prototype.enableTempParent=function(){var h=this.parent;return this.parent=this._tempDisplayObjectParent,h},n.prototype.disableTempParent=function(h){this.parent=h},Object.defineProperty(n.prototype,"x",{get:function(){return this.position.x},set:function(h){this.transform.position.x=h},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this.position.y},set:function(h){this.transform.position.y=h},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"position",{get:function(){return this.transform.position},set:function(h){this.transform.position.copyFrom(h)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"scale",{get:function(){return this.transform.scale},set:function(h){this.transform.scale.copyFrom(h)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(h){this.transform.pivot.copyFrom(h)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"skew",{get:function(){return this.transform.skew},set:function(h){this.transform.skew.copyFrom(h)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(h){this.transform.rotation=h},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"angle",{get:function(){return this.transform.rotation*fA},set:function(h){this.transform.rotation=h*fO},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"zIndex",{get:function(){return this._zIndex},set:function(h){this._zIndex=h,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"worldVisible",{get:function(){var h=this;do{if(!h.visible)return!1;h=h.parent}while(h);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"mask",{get:function(){return this._mask},set:function(h){if(this._mask){var w=this._mask.maskObject||this._mask;w.renderable=!0,w.isMask=!1}if(this._mask=h,this._mask){var w=this._mask.maskObject||this._mask;w.renderable=!1,w.isMask=!0}},enumerable:!1,configurable:!0}),n}(lU),fz=function(h){function n(){var w=null!==h&&h.apply(this,arguments)||this;return w.sortDirty=null,w}return Rf(n,h),n}(fH);function iO(h,w){return h.zIndex===w.zIndex?h._lastSortedIndex-w._lastSortedIndex:h.zIndex-w.zIndex}fH.prototype.displayObjectUpdateTransform=fH.prototype.updateTransform;var fK=function(h){function n(){var w=h.call(this)||this;return w.children=[],w.sortableChildren=lN.SORTABLE_CHILDREN,w.sortDirty=!1,w}return Rf(n,h),n.prototype.onChildrenChange=function(h){},n.prototype.addChild=function(){for(var h=arguments,w=[],q=0;q<arguments.length;q++)w[q]=h[q];if(w.length>1)for(var tr=0;tr<w.length;tr++)this.addChild(w[tr]);else{var tn=w[0];tn.parent&&tn.parent.removeChild(tn),tn.parent=this,this.sortDirty=!0,tn.transform._parentID=-1,this.children.push(tn),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",tn,this,this.children.length-1),tn.emit("added",this)}return w[0]},n.prototype.addChildAt=function(h,w){if(w<0||w>this.children.length)throw Error(h+"addChildAt: The index "+w+" supplied is out of bounds "+this.children.length);return h.parent&&h.parent.removeChild(h),h.parent=this,this.sortDirty=!0,h.transform._parentID=-1,this.children.splice(w,0,h),this._boundsID++,this.onChildrenChange(w),h.emit("added",this),this.emit("childAdded",h,this,w),h},n.prototype.swapChildren=function(h,w){if(h!==w){var q=this.getChildIndex(h),tr=this.getChildIndex(w);this.children[q]=w,this.children[tr]=h,this.onChildrenChange(q<tr?q:tr)}},n.prototype.getChildIndex=function(h){var w=this.children.indexOf(h);if(-1===w)throw Error("The supplied DisplayObject must be a child of the caller");return w},n.prototype.setChildIndex=function(h,w){if(w<0||w>=this.children.length)throw Error("The index "+w+" supplied is out of bounds "+this.children.length);var q=this.getChildIndex(h);yo(this.children,q,1),this.children.splice(w,0,h),this.onChildrenChange(w)},n.prototype.getChildAt=function(h){if(h<0||h>=this.children.length)throw Error("getChildAt: Index ("+h+") does not exist.");return this.children[h]},n.prototype.removeChild=function(){for(var h=arguments,w=[],q=0;q<arguments.length;q++)w[q]=h[q];if(w.length>1)for(var tr=0;tr<w.length;tr++)this.removeChild(w[tr]);else{var tn=w[0],ti=this.children.indexOf(tn);if(-1===ti)return null;tn.parent=null,tn.transform._parentID=-1,yo(this.children,ti,1),this._boundsID++,this.onChildrenChange(ti),tn.emit("removed",this),this.emit("childRemoved",tn,this,ti)}return w[0]},n.prototype.removeChildAt=function(h){var w=this.getChildAt(h);return w.parent=null,w.transform._parentID=-1,yo(this.children,h,1),this._boundsID++,this.onChildrenChange(h),w.emit("removed",this),this.emit("childRemoved",w,this,h),w},n.prototype.removeChildren=function(h,w){void 0===h&&(h=0),void 0===w&&(w=this.children.length);var q,tr=h,tn=w,ti=tn-tr;if(ti>0&&ti<=tn){q=this.children.splice(tr,ti);for(var to=0;to<q.length;++to)q[to].parent=null,q[to].transform&&(q[to].transform._parentID=-1);this._boundsID++,this.onChildrenChange(h);for(var to=0;to<q.length;++to)q[to].emit("removed",this),this.emit("childRemoved",q[to],this,to);return q}if(0===ti&&0===this.children.length)return[];throw RangeError("removeChildren: numeric values are outside the acceptable range.")},n.prototype.sortChildren=function(){for(var h=!1,w=0,q=this.children.length;w<q;++w){var tr=this.children[w];tr._lastSortedIndex=w,h||0===tr.zIndex||(h=!0)}h&&this.children.length>1&&this.children.sort(iO),this.sortDirty=!1},n.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var h=0,w=this.children.length;h<w;++h){var q=this.children[h];q.visible&&q.updateTransform()}},n.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var h=0;h<this.children.length;h++){var w=this.children[h];if(!(!w.visible||!w.renderable)){if(w.calculateBounds(),w._mask){var q=w._mask.maskObject||w._mask;q.calculateBounds(),this._bounds.addBoundsMask(w._bounds,q._bounds)}else w.filterArea?this._bounds.addBoundsArea(w._bounds,w.filterArea):this._bounds.addBounds(w._bounds)}}this._bounds.updateID=this._boundsID},n.prototype.getLocalBounds=function(w,q){void 0===q&&(q=!1);var tr=h.prototype.getLocalBounds.call(this,w);if(!q)for(var tn=0,ti=this.children.length;tn<ti;++tn){var to=this.children[tn];to.visible&&to.updateTransform()}return tr},n.prototype._calculateBounds=function(){},n.prototype.render=function(h){if(!(!this.visible||this.worldAlpha<=0||!this.renderable)){if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(h);else{this._render(h);for(var w=0,q=this.children.length;w<q;++w)this.children[w].render(h)}}},n.prototype.renderAdvanced=function(h){h.batch.flush();var w=this.filters,q=this._mask;if(w){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var tr=0;tr<w.length;tr++)w[tr].enabled&&this._enabledFilters.push(w[tr]);this._enabledFilters.length&&h.filter.push(this,this._enabledFilters)}q&&h.mask.push(this,this._mask),this._render(h);for(var tr=0,tn=this.children.length;tr<tn;tr++)this.children[tr].render(h);h.batch.flush(),q&&h.mask.pop(this),w&&this._enabledFilters&&this._enabledFilters.length&&h.filter.pop()},n.prototype._render=function(h){},n.prototype.destroy=function(w){h.prototype.destroy.call(this),this.sortDirty=!1;var q="boolean"==typeof w?w:w&&w.children,tr=this.removeChildren(0,this.children.length);if(q)for(var tn=0;tn<tr.length;++tn)tr[tn].destroy(w)},Object.defineProperty(n.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(h){var w=this.getLocalBounds().width;0!==w?this.scale.x=h/w:this.scale.x=1,this._width=h},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(h){var w=this.getLocalBounds().height;0!==w?this.scale.y=h/w:this.scale.y=1,this._height=h},enumerable:!1,configurable:!0}),n}(fH);fK.prototype.containerUpdateTransform=fK.prototype.updateTransform,fH.mixin({accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1});var fY=function(){function e(h){this._hookDiv=null,(lR.tablet||lR.phone)&&this.createTouchHook();var w=document.createElement("div");w.style.width="100px",w.style.height="100px",w.style.position="absolute",w.style.top="0px",w.style.left="0px",w.style.zIndex="2",this.div=w,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=h,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._isActive=!1,this._isMobileAccessibility=!1,this.androidUpdateCount=0,this.androidUpdateFrequency=500,window.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(e.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),e.prototype.createTouchHook=function(){var h=this,w=document.createElement("button");w.style.width="1px",w.style.height="1px",w.style.position="absolute",w.style.top="-1000px",w.style.left="-1000px",w.style.zIndex="2",w.style.backgroundColor="#FF0000",w.title="select to enable accessability for this content",w.addEventListener("focus",function(){h._isMobileAccessibility=!0,h.activate(),h.destroyTouchHook()}),document.body.appendChild(w),this._hookDiv=w},e.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},e.prototype.activate=function(){this._isActive||(this._isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},e.prototype.deactivate=function(){!this._isActive||this._isMobileAccessibility||(this._isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},e.prototype.updateAccessibleObjects=function(h){if(!(!h.visible||!h.accessibleChildren)){h.accessible&&h.interactive&&(h._accessibleActive||this.addChild(h),h.renderId=this.renderId);for(var w=h.children,q=0;q<w.length;q++)this.updateAccessibleObjects(w[q])}},e.prototype.update=function(){var h=performance.now();if(!(lR.android.device&&h<this.androidUpdateCount)&&(this.androidUpdateCount=h+this.androidUpdateFrequency,this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var w=this.renderer.view.getBoundingClientRect(),q=this.renderer.resolution,tr=w.width/this.renderer.width*q,tn=w.height/this.renderer.height*q,ti=this.div;ti.style.left=w.left+"px",ti.style.top=w.top+"px",ti.style.width=this.renderer.width+"px",ti.style.height=this.renderer.height+"px";for(var to=0;to<this.children.length;to++){var ts=this.children[to];if(ts.renderId!==this.renderId)ts._accessibleActive=!1,yo(this.children,to,1),this.div.removeChild(ts._accessibleDiv),this.pool.push(ts._accessibleDiv),ts._accessibleDiv=null,to--;else{ti=ts._accessibleDiv;var tu=ts.hitArea,tl=ts.worldTransform;ts.hitArea?(ti.style.left=(tl.tx+tu.x*tl.a)*tr+"px",ti.style.top=(tl.ty+tu.y*tl.d)*tn+"px",ti.style.width=tu.width*tl.a*tr+"px",ti.style.height=tu.height*tl.d*tn+"px"):(tu=ts.getBounds(),this.capHitArea(tu),ti.style.left=tu.x*tr+"px",ti.style.top=tu.y*tn+"px",ti.style.width=tu.width*tr+"px",ti.style.height=tu.height*tn+"px",ti.title!==ts.accessibleTitle&&null!==ts.accessibleTitle&&(ti.title=ts.accessibleTitle),ti.getAttribute("aria-label")!==ts.accessibleHint&&null!==ts.accessibleHint&&ti.setAttribute("aria-label",ts.accessibleHint)),(ts.accessibleTitle!==ti.title||ts.tabIndex!==ti.tabIndex)&&(ti.title=ts.accessibleTitle,ti.tabIndex=ts.tabIndex,this.debug&&this.updateDebugHTML(ti))}}this.renderId++}},e.prototype.updateDebugHTML=function(h){h.innerHTML="type: "+h.type+"</br> title : "+h.title+"</br> tabIndex: "+h.tabIndex},e.prototype.capHitArea=function(h){h.x<0&&(h.width+=h.x,h.x=0),h.y<0&&(h.height+=h.y,h.y=0),h.x+h.width>this.renderer.width&&(h.width=this.renderer.width-h.x),h.y+h.height>this.renderer.height&&(h.height=this.renderer.height-h.y)},e.prototype.addChild=function(h){var w=this.pool.pop();w||((w=document.createElement("button")).style.width="100px",w.style.height="100px",w.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",w.style.position="absolute",w.style.zIndex="2",w.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?w.setAttribute("aria-live","off"):w.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?w.setAttribute("aria-relevant","additions"):w.setAttribute("aria-relevant","text"),w.addEventListener("click",this._onClick.bind(this)),w.addEventListener("focus",this._onFocus.bind(this)),w.addEventListener("focusout",this._onFocusOut.bind(this))),w.style.pointerEvents=h.accessiblePointerEvents,w.type=h.accessibleType,h.accessibleTitle&&null!==h.accessibleTitle?w.title=h.accessibleTitle:h.accessibleHint&&null!==h.accessibleHint||(w.title="displayObject "+h.tabIndex),h.accessibleHint&&null!==h.accessibleHint&&w.setAttribute("aria-label",h.accessibleHint),this.debug&&this.updateDebugHTML(w),h._accessibleActive=!0,h._accessibleDiv=w,w.displayObject=h,this.children.push(h),this.div.appendChild(h._accessibleDiv),h._accessibleDiv.tabIndex=h.tabIndex},e.prototype._onClick=function(h){var w=this.renderer.plugins.interaction;w.dispatchEvent(h.target.displayObject,"click",w.eventData),w.dispatchEvent(h.target.displayObject,"pointertap",w.eventData),w.dispatchEvent(h.target.displayObject,"tap",w.eventData)},e.prototype._onFocus=function(h){h.target.getAttribute("aria-live")||h.target.setAttribute("aria-live","assertive");var w=this.renderer.plugins.interaction;w.dispatchEvent(h.target.displayObject,"mouseover",w.eventData)},e.prototype._onFocusOut=function(h){h.target.getAttribute("aria-live")||h.target.setAttribute("aria-live","polite");var w=this.renderer.plugins.interaction;w.dispatchEvent(h.target.displayObject,"mouseout",w.eventData)},e.prototype._onKeyDown=function(h){9===h.keyCode&&this.activate()},e.prototype._onMouseMove=function(h){0===h.movementX&&0===h.movementY||this.deactivate()},e.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},e}();/*!
 * @pixi/ticker - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */lN.TARGET_FPMS=.06,(gs=gp||(gp={}))[gs.INTERACTION=50]="INTERACTION",gs[gs.HIGH=25]="HIGH",gs[gs.NORMAL=0]="NORMAL",gs[gs.LOW=-25]="LOW",gs[gs.UTILITY=-50]="UTILITY";var fW=function(){function e(h,w,q,tr){void 0===w&&(w=null),void 0===q&&(q=0),void 0===tr&&(tr=!1),this.fn=h,this.context=w,this.priority=q,this.once=tr,this.next=null,this.previous=null,this._destroyed=!1}return e.prototype.match=function(h,w){return void 0===w&&(w=null),this.fn===h&&this.context===w},e.prototype.emit=function(h){this.fn&&(this.context?this.fn.call(this.context,h):this.fn(h));var w=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),w},e.prototype.connect=function(h){this.previous=h,h.next&&(h.next.previous=this),this.next=h.next,h.next=this},e.prototype.destroy=function(h){void 0===h&&(h=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var w=this.next;return this.next=h?null:w,this.previous=null,w},e}(),fq=function(){function e(){var h=this;this._head=new fW(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this.autoStart=!1,this.deltaTime=1,this.deltaMS=1/lN.TARGET_FPMS,this.elapsedMS=1/lN.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._protected=!1,this._lastFrame=-1,this._tick=function(w){h._requestId=null,h.started&&(h.update(w),h.started&&null===h._requestId&&h._head.next&&(h._requestId=requestAnimationFrame(h._tick)))}}return e.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},e.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},e.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},e.prototype.add=function(h,w,q){return void 0===q&&(q=gp.NORMAL),this._addListener(new fW(h,w,q))},e.prototype.addOnce=function(h,w,q){return void 0===q&&(q=gp.NORMAL),this._addListener(new fW(h,w,q,!0))},e.prototype._addListener=function(h){var w=this._head.next,q=this._head;if(w){for(;w;){if(h.priority>w.priority){h.connect(q);break}q=w,w=w.next}h.previous||h.connect(q)}else h.connect(q);return this._startIfPossible(),this},e.prototype.remove=function(h,w){for(var q=this._head.next;q;)q=q.match(h,w)?q.destroy():q.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(e.prototype,"count",{get:function(){if(!this._head)return 0;for(var h=0,w=this._head;w=w.next;)h++;return h},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},e.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},e.prototype.destroy=function(){if(!this._protected){this.stop();for(var h=this._head.next;h;)h=h.destroy(!0);this._head.destroy(),this._head=null}},e.prototype.update=function(h){if(void 0===h&&(h=performance.now()),h>this.lastTime){if((w=this.elapsedMS=h-this.lastTime)>this._maxElapsedMS&&(w=this._maxElapsedMS),w*=this.speed,this._minElapsedMS){var w,q=h-this._lastFrame|0;if(q<this._minElapsedMS)return;this._lastFrame=h-q%this._minElapsedMS}this.deltaMS=w,this.deltaTime=this.deltaMS*lN.TARGET_FPMS;for(var tr=this._head,tn=tr.next;tn;)tn=tn.emit(this.deltaTime);tr.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=h},Object.defineProperty(e.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(h){var w=Math.min(Math.max(0,Math.min(this.maxFPS,h))/1e3,lN.TARGET_FPMS);this._maxElapsedMS=1/w},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(h){if(0===h)this._minElapsedMS=0;else{var w=Math.max(this.minFPS,h);this._minElapsedMS=1/(w/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"shared",{get:function(){if(!e._shared){var h=e._shared=new e;h.autoStart=!0,h._protected=!0}return e._shared},enumerable:!1,configurable:!0}),Object.defineProperty(e,"system",{get:function(){if(!e._system){var h=e._system=new e;h.autoStart=!0,h._protected=!0}return e._system},enumerable:!1,configurable:!0}),e}(),fZ=function(){function e(){}return e.init=function(h){var w=this;h=Object.assign({autoStart:!0,sharedTicker:!1},h),Object.defineProperty(this,"ticker",{set:function(h){this._ticker&&this._ticker.remove(this.render,this),this._ticker=h,h&&h.add(this.render,this,gp.LOW)},get:function(){return this._ticker}}),this.stop=function(){w._ticker.stop()},this.start=function(){w._ticker.start()},this._ticker=null,this.ticker=h.sharedTicker?fq.shared:new fq,h.autoStart&&this.start()},e.destroy=function(){if(this._ticker){var h=this._ticker;this.ticker=null,h.destroy()}},e}(),fJ=function(){function e(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new fR,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(e.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),e.prototype.getLocalPosition=function(h,w,q){return h.worldTransform.applyInverse(q||this.global,w)},e.prototype.copyEvent=function(h){"isPrimary"in h&&h.isPrimary&&(this.isPrimary=!0),this.button="button"in h&&h.button;var w="buttons"in h&&h.buttons;this.buttons=Number.isInteger(w)?w:"which"in h&&h.which,this.width="width"in h&&h.width,this.height="height"in h&&h.height,this.tiltX="tiltX"in h&&h.tiltX,this.tiltY="tiltY"in h&&h.tiltY,this.pointerType="pointerType"in h&&h.pointerType,this.pressure="pressure"in h&&h.pressure,this.rotationAngle="rotationAngle"in h&&h.rotationAngle,this.twist="twist"in h&&h.twist||0,this.tangentialPressure="tangentialPressure"in h&&h.tangentialPressure||0},e.prototype.reset=function(){this.isPrimary=!1},e}(),bh=function(h,w){return(bh=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,w){h.__proto__=w}||function(h,w){for(var q in w)w.hasOwnProperty(q)&&(h[q]=w[q])})(h,w)},fQ=function(){function e(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return e.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},e.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},e}(),f$=function(){function e(h){this._pointerId=h,this._flags=e.FLAGS.NONE}return e.prototype._doSet=function(h,w){w?this._flags=this._flags|h:this._flags=this._flags&~h},Object.defineProperty(e.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flags",{get:function(){return this._flags},set:function(h){this._flags=h},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"none",{get:function(){return this._flags===e.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"over",{get:function(){return(this._flags&e.FLAGS.OVER)!=0},set:function(h){this._doSet(e.FLAGS.OVER,h)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightDown",{get:function(){return(this._flags&e.FLAGS.RIGHT_DOWN)!=0},set:function(h){this._doSet(e.FLAGS.RIGHT_DOWN,h)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftDown",{get:function(){return(this._flags&e.FLAGS.LEFT_DOWN)!=0},set:function(h){this._doSet(e.FLAGS.LEFT_DOWN,h)},enumerable:!1,configurable:!0}),e.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),e}(),f1=function(){function e(){this._tempPoint=new fR}return e.prototype.recursiveFindHit=function(h,w,q,tr,tn){if(!w||!w.visible)return!1;var ti=h.data.global;tn=w.interactive||tn;var to=!1,ts=tn,tu=!0;if(w.hitArea?(tr&&(w.worldTransform.applyInverse(ti,this._tempPoint),w.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?to=!0:(tr=!1,tu=!1)),ts=!1):w._mask&&tr&&(w._mask.containsPoint&&w._mask.containsPoint(ti)||(tr=!1)),tu&&w.interactiveChildren&&w.children)for(var tl=w.children,tc=tl.length-1;tc>=0;tc--){var tp=tl[tc],td=this.recursiveFindHit(h,tp,q,tr,ts);if(td){if(!tp.parent)continue;ts=!1,td&&(h.target&&(tr=!1),to=!0)}}return tn&&(tr&&!h.target&&!w.hitArea&&w.containsPoint&&w.containsPoint(ti)&&(to=!0),w.interactive&&(to&&!h.target&&(h.target=w),q&&q(h,w,!!to))),to},e.prototype.findHit=function(h,w,q,tr){this.recursiveFindHit(h,w,q,tr,!1)},e}();fH.mixin({interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(e){e?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0});var f2={target:null,data:{global:null}},f3=function(h){function n(w,q){var tr=h.call(this)||this;return q=q||{},tr.renderer=w,tr.autoPreventDefault=void 0===q.autoPreventDefault||q.autoPreventDefault,tr.interactionFrequency=q.interactionFrequency||10,tr.mouse=new fJ,tr.mouse.identifier=1,tr.mouse.global.set(-999999),tr.activeInteractionData={},tr.activeInteractionData[1]=tr.mouse,tr.interactionDataPool=[],tr.eventData=new fQ,tr.interactionDOMElement=null,tr.moveWhenInside=!1,tr.eventsAdded=!1,tr.tickerAdded=!1,tr.mouseOverRenderer=!1,tr.supportsTouchEvents="ontouchstart"in window,tr.supportsPointerEvents=!!window.PointerEvent,tr.onPointerUp=tr.onPointerUp.bind(tr),tr.processPointerUp=tr.processPointerUp.bind(tr),tr.onPointerCancel=tr.onPointerCancel.bind(tr),tr.processPointerCancel=tr.processPointerCancel.bind(tr),tr.onPointerDown=tr.onPointerDown.bind(tr),tr.processPointerDown=tr.processPointerDown.bind(tr),tr.onPointerMove=tr.onPointerMove.bind(tr),tr.processPointerMove=tr.processPointerMove.bind(tr),tr.onPointerOut=tr.onPointerOut.bind(tr),tr.processPointerOverOut=tr.processPointerOverOut.bind(tr),tr.onPointerOver=tr.onPointerOver.bind(tr),tr.cursorStyles={default:"inherit",pointer:"pointer"},tr.currentCursorMode=null,tr.cursor=null,tr.resolution=1,tr.delayedEvents=[],tr.search=new f1,tr._tempDisplayObject=new fz,tr._useSystemTicker=void 0===q.useSystemTicker||q.useSystemTicker,tr.setTargetElement(tr.renderer.view,tr.renderer.resolution),tr}return!function(h,w){function t(){this.constructor=h}bh(h,w),h.prototype=null===w?Object.create(w):(t.prototype=w.prototype,new t)}(n,h),Object.defineProperty(n.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(h){this._useSystemTicker=h,h?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),n.prototype.hitTest=function(h,w){return f2.target=null,f2.data.global=h,w||(w=this.lastObjectRendered),this.processInteractive(f2,w,null,!0),f2.target},n.prototype.setTargetElement=function(h,w){void 0===w&&(w=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=h,this.resolution=w,this.addEvents(),this.addTickerListener()},n.prototype.addTickerListener=function(){!this.tickerAdded&&this.interactionDOMElement&&this._useSystemTicker&&(fq.system.add(this.tickerUpdate,this,gp.INTERACTION),this.tickerAdded=!0)},n.prototype.removeTickerListener=function(){this.tickerAdded&&(fq.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},n.prototype.addEvents=function(){if(!(this.eventsAdded||!this.interactionDOMElement)){var h=this.interactionDOMElement.style;window.navigator.msPointerEnabled?(h.msContentZooming="none",h.msTouchAction="none"):this.supportsPointerEvents&&(h.touchAction="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0}},n.prototype.removeEvents=function(){if(!(!this.eventsAdded||!this.interactionDOMElement)){var h=this.interactionDOMElement.style;window.navigator.msPointerEnabled?(h.msContentZooming="",h.msTouchAction=""):this.supportsPointerEvents&&(h.touchAction=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1}},n.prototype.tickerUpdate=function(h){this._deltaTime+=h,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.update())},n.prototype.update=function(){if(this.interactionDOMElement){if(this._didMove){this._didMove=!1;return}for(var h in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(h)){var w=this.activeInteractionData[h];if(w.originalEvent&&"touch"!==w.pointerType){var q=this.configureInteractionEventForDOMEvent(this.eventData,w.originalEvent,w);this.processInteractive(q,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},n.prototype.setCursorMode=function(h){if(h=h||"default",this.currentCursorMode!==h){this.currentCursorMode=h;var w=this.cursorStyles[h];if(w)switch(typeof w){case"string":this.interactionDOMElement.style.cursor=w;break;case"function":w(h);break;case"object":Object.assign(this.interactionDOMElement.style,w)}else"string"!=typeof h||Object.prototype.hasOwnProperty.call(this.cursorStyles,h)||(this.interactionDOMElement.style.cursor=h)}},n.prototype.dispatchEvent=function(h,w,q){(!q.stopPropagationHint||h===q.stopsPropagatingAt)&&(q.currentTarget=h,q.type=w,h.emit(w,q),h[w]&&h[w](q))},n.prototype.delayDispatchEvent=function(h,w,q){this.delayedEvents.push({displayObject:h,eventString:w,eventData:q})},n.prototype.mapPositionToPoint=function(h,w,q){tr=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var tr,tn=1/this.resolution;h.x=(w-tr.left)*(this.interactionDOMElement.width/tr.width)*tn,h.y=(q-tr.top)*(this.interactionDOMElement.height/tr.height)*tn},n.prototype.processInteractive=function(h,w,q,tr){var tn=this.search.findHit(h,w,q,tr),ti=this.delayedEvents;if(!ti.length)return tn;h.stopPropagationHint=!1;var to=ti.length;this.delayedEvents=[];for(var ts=0;ts<to;ts++){var tu=ti[ts],tl=tu.displayObject,tc=tu.eventString,tp=tu.eventData;tp.stopsPropagatingAt===tl&&(tp.stopPropagationHint=!0),this.dispatchEvent(tl,tc,tp)}return tn},n.prototype.onPointerDown=function(h){if(!(this.supportsTouchEvents&&"touch"===h.pointerType)){var w=this.normalizeToPointerData(h);this.autoPreventDefault&&w[0].isNormalized&&(h.cancelable||!("cancelable"in h))&&h.preventDefault();for(var q=w.length,tr=0;tr<q;tr++){var tn=w[tr],ti=this.getInteractionDataForPointerId(tn),to=this.configureInteractionEventForDOMEvent(this.eventData,tn,ti);if(to.data.originalEvent=h,this.processInteractive(to,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",to),"touch"===tn.pointerType)this.emit("touchstart",to);else if("mouse"===tn.pointerType||"pen"===tn.pointerType){var ts=2===tn.button;this.emit(ts?"rightdown":"mousedown",this.eventData)}}}},n.prototype.processPointerDown=function(h,w,q){var tr=h.data,tn=h.data.identifier;if(q){if(w.trackedPointers[tn]||(w.trackedPointers[tn]=new f$(tn)),this.dispatchEvent(w,"pointerdown",h),"touch"===tr.pointerType)this.dispatchEvent(w,"touchstart",h);else if("mouse"===tr.pointerType||"pen"===tr.pointerType){var ti=2===tr.button;ti?w.trackedPointers[tn].rightDown=!0:w.trackedPointers[tn].leftDown=!0,this.dispatchEvent(w,ti?"rightdown":"mousedown",h)}}},n.prototype.onPointerComplete=function(h,w,q){for(var tr=this.normalizeToPointerData(h),tn=tr.length,ti=h.target!==this.interactionDOMElement?"outside":"",to=0;to<tn;to++){var ts=tr[to],tu=this.getInteractionDataForPointerId(ts),tl=this.configureInteractionEventForDOMEvent(this.eventData,ts,tu);if(tl.data.originalEvent=h,this.processInteractive(tl,this.lastObjectRendered,q,w||!ti),this.emit(w?"pointercancel":"pointerup"+ti,tl),"mouse"===ts.pointerType||"pen"===ts.pointerType){var tc=2===ts.button;this.emit(tc?"rightup"+ti:"mouseup"+ti,tl)}else"touch"===ts.pointerType&&(this.emit(w?"touchcancel":"touchend"+ti,tl),this.releaseInteractionDataForPointerId(ts.pointerId))}},n.prototype.onPointerCancel=function(h){this.supportsTouchEvents&&"touch"===h.pointerType||this.onPointerComplete(h,!0,this.processPointerCancel)},n.prototype.processPointerCancel=function(h,w){var q=h.data,tr=h.data.identifier;void 0!==w.trackedPointers[tr]&&(delete w.trackedPointers[tr],this.dispatchEvent(w,"pointercancel",h),"touch"===q.pointerType&&this.dispatchEvent(w,"touchcancel",h))},n.prototype.onPointerUp=function(h){this.supportsTouchEvents&&"touch"===h.pointerType||this.onPointerComplete(h,!1,this.processPointerUp)},n.prototype.processPointerUp=function(h,w,q){var tr=h.data,tn=h.data.identifier,ti=w.trackedPointers[tn],to="touch"===tr.pointerType,ts="mouse"===tr.pointerType||"pen"===tr.pointerType,tu=!1;if(ts){var tl=2===tr.button,tc=f$.FLAGS,tp=tl?tc.RIGHT_DOWN:tc.LEFT_DOWN,td=void 0!==ti&&ti.flags&tp;q?(this.dispatchEvent(w,tl?"rightup":"mouseup",h),td&&(this.dispatchEvent(w,tl?"rightclick":"click",h),tu=!0)):td&&this.dispatchEvent(w,tl?"rightupoutside":"mouseupoutside",h),ti&&(tl?ti.rightDown=!1:ti.leftDown=!1)}q?(this.dispatchEvent(w,"pointerup",h),to&&this.dispatchEvent(w,"touchend",h),ti&&((!ts||tu)&&this.dispatchEvent(w,"pointertap",h),to&&(this.dispatchEvent(w,"tap",h),ti.over=!1))):ti&&(this.dispatchEvent(w,"pointerupoutside",h),to&&this.dispatchEvent(w,"touchendoutside",h)),ti&&ti.none&&delete w.trackedPointers[tn]},n.prototype.onPointerMove=function(h){if(!(this.supportsTouchEvents&&"touch"===h.pointerType)){var w=this.normalizeToPointerData(h);("mouse"===w[0].pointerType||"pen"===w[0].pointerType)&&(this._didMove=!0,this.cursor=null);for(var q=w.length,tr=0;tr<q;tr++){var tn=w[tr],ti=this.getInteractionDataForPointerId(tn),to=this.configureInteractionEventForDOMEvent(this.eventData,tn,ti);to.data.originalEvent=h,this.processInteractive(to,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",to),"touch"===tn.pointerType&&this.emit("touchmove",to),("mouse"===tn.pointerType||"pen"===tn.pointerType)&&this.emit("mousemove",to)}"mouse"===w[0].pointerType&&this.setCursorMode(this.cursor)}},n.prototype.processPointerMove=function(h,w,q){var tr=h.data,tn="touch"===tr.pointerType,ti="mouse"===tr.pointerType||"pen"===tr.pointerType;ti&&this.processPointerOverOut(h,w,q),(!this.moveWhenInside||q)&&(this.dispatchEvent(w,"pointermove",h),tn&&this.dispatchEvent(w,"touchmove",h),ti&&this.dispatchEvent(w,"mousemove",h))},n.prototype.onPointerOut=function(h){if(!(this.supportsTouchEvents&&"touch"===h.pointerType)){var w=this.normalizeToPointerData(h)[0];"mouse"===w.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var q=this.getInteractionDataForPointerId(w),tr=this.configureInteractionEventForDOMEvent(this.eventData,w,q);tr.data.originalEvent=w,this.processInteractive(tr,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",tr),"mouse"===w.pointerType||"pen"===w.pointerType?this.emit("mouseout",tr):this.releaseInteractionDataForPointerId(q.identifier)}},n.prototype.processPointerOverOut=function(h,w,q){var tr=h.data,tn=h.data.identifier,ti="mouse"===tr.pointerType||"pen"===tr.pointerType,to=w.trackedPointers[tn];q&&!to&&(to=w.trackedPointers[tn]=new f$(tn)),void 0!==to&&(q&&this.mouseOverRenderer?(to.over||(to.over=!0,this.delayDispatchEvent(w,"pointerover",h),ti&&this.delayDispatchEvent(w,"mouseover",h)),ti&&null===this.cursor&&(this.cursor=w.cursor)):to.over&&(to.over=!1,this.dispatchEvent(w,"pointerout",this.eventData),ti&&this.dispatchEvent(w,"mouseout",h),to.none&&delete w.trackedPointers[tn]))},n.prototype.onPointerOver=function(h){var w=this.normalizeToPointerData(h)[0],q=this.getInteractionDataForPointerId(w),tr=this.configureInteractionEventForDOMEvent(this.eventData,w,q);tr.data.originalEvent=w,"mouse"===w.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",tr),("mouse"===w.pointerType||"pen"===w.pointerType)&&this.emit("mouseover",tr)},n.prototype.getInteractionDataForPointerId=function(h){var w,q=h.pointerId;return 1===q||"mouse"===h.pointerType?w=this.mouse:this.activeInteractionData[q]?w=this.activeInteractionData[q]:((w=this.interactionDataPool.pop()||new fJ).identifier=q,this.activeInteractionData[q]=w),w.copyEvent(h),w},n.prototype.releaseInteractionDataForPointerId=function(h){var w=this.activeInteractionData[h];w&&(delete this.activeInteractionData[h],w.reset(),this.interactionDataPool.push(w))},n.prototype.configureInteractionEventForDOMEvent=function(h,w,q){return h.data=q,this.mapPositionToPoint(q.global,w.clientX,w.clientY),"touch"===w.pointerType&&(w.globalX=q.global.x,w.globalY=q.global.y),q.originalEvent=w,h.reset(),h},n.prototype.normalizeToPointerData=function(h){var w=[];if(this.supportsTouchEvents&&h instanceof TouchEvent)for(var q=0,tr=h.changedTouches.length;q<tr;q++){var tn=h.changedTouches[q];typeof tn.button>"u"&&(tn.button=h.touches.length?1:0),typeof tn.buttons>"u"&&(tn.buttons=h.touches.length?1:0),typeof tn.isPrimary>"u"&&(tn.isPrimary=1===h.touches.length&&"touchstart"===h.type),typeof tn.width>"u"&&(tn.width=tn.radiusX||1),typeof tn.height>"u"&&(tn.height=tn.radiusY||1),typeof tn.tiltX>"u"&&(tn.tiltX=0),typeof tn.tiltY>"u"&&(tn.tiltY=0),typeof tn.pointerType>"u"&&(tn.pointerType="touch"),typeof tn.pointerId>"u"&&(tn.pointerId=tn.identifier||0),typeof tn.pressure>"u"&&(tn.pressure=tn.force||.5),typeof tn.twist>"u"&&(tn.twist=0),typeof tn.tangentialPressure>"u"&&(tn.tangentialPressure=0),typeof tn.layerX>"u"&&(tn.layerX=tn.offsetX=tn.clientX),typeof tn.layerY>"u"&&(tn.layerY=tn.offsetY=tn.clientY),tn.isNormalized=!0,w.push(tn)}else!(h instanceof MouseEvent)||this.supportsPointerEvents&&h instanceof window.PointerEvent||(typeof h.isPrimary>"u"&&(h.isPrimary=!0),typeof h.width>"u"&&(h.width=1),typeof h.height>"u"&&(h.height=1),typeof h.tiltX>"u"&&(h.tiltX=0),typeof h.tiltY>"u"&&(h.tiltY=0),typeof h.pointerType>"u"&&(h.pointerType="mouse"),typeof h.pointerId>"u"&&(h.pointerId=1),typeof h.pressure>"u"&&(h.pressure=.5),typeof h.twist>"u"&&(h.twist=0),typeof h.tangentialPressure>"u"&&(h.tangentialPressure=0),h.isNormalized=!0),w.push(h);return w},n.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},n}(lU),f4=function(){function e(h){this.items=[],this._name=h,this._aliasCount=0}return e.prototype.emit=function(h,w,q,tr,tn,ti,to,ts){if(arguments.length>8)throw Error("max arguments reached");var tu=this.name,tl=this.items;this._aliasCount++;for(var tc=0,tp=tl.length;tc<tp;tc++)tl[tc][tu](h,w,q,tr,tn,ti,to,ts);return tl===this.items&&this._aliasCount--,this},e.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},e.prototype.add=function(h){return h[this._name]&&(this.ensureNonAliasedItems(),this.remove(h),this.items.push(h)),this},e.prototype.remove=function(h){var w=this.items.indexOf(h);return -1!==w&&(this.ensureNonAliasedItems(),this.items.splice(w,1)),this},e.prototype.contains=function(h){return -1!==this.items.indexOf(h)},e.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},e.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(e.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),e}();Object.defineProperties(f4.prototype,{dispatch:{value:f4.prototype.emit},run:{value:f4.prototype.emit}}),/*!
 * @pixi/core - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */lN.PREFER_ENV=lR.any?p4.WEBGL:p4.WEBGL2,lN.STRICT_TEXTURE_CACHE=!1;var f5=[];function Xm(h,w){if(!h)return null;var q="";if("string"==typeof h){var tr=/\.(\w{3,4})(?:$|\?|#)/i.exec(h);tr&&(q=tr[1].toLowerCase())}for(var tn=f5.length-1;tn>=0;--tn){var ti=f5[tn];if(ti.test&&ti.test(h,q))return new ti(h,w)}throw Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Ah=function(h,w){return(Ah=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,w){h.__proto__=w}||function(h,w){for(var q in w)w.hasOwnProperty(q)&&(h[q]=w[q])})(h,w)};function Qe(h,w){function t(){this.constructor=h}Ah(h,w),h.prototype=null===w?Object.create(w):(t.prototype=w.prototype,new t)}var f6=function(){function e(h,w){void 0===h&&(h=0),void 0===w&&(w=0),this._width=h,this._height=w,this.destroyed=!1,this.internal=!1,this.onResize=new f4("setRealSize"),this.onUpdate=new f4("update"),this.onError=new f4("onError")}return e.prototype.bind=function(h){this.onResize.add(h),this.onUpdate.add(h),this.onError.add(h),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},e.prototype.unbind=function(h){this.onResize.remove(h),this.onUpdate.remove(h),this.onError.remove(h)},e.prototype.resize=function(h,w){(h!==this._width||w!==this._height)&&(this._width=h,this._height=w,this.onResize.emit(h,w))},Object.defineProperty(e.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),e.prototype.update=function(){this.destroyed||this.onUpdate.emit()},e.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),e.prototype.style=function(h,w,q){return!1},e.prototype.dispose=function(){},e.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},e.test=function(h,w){return!1},e}(),f8=function(h){function n(w,q){var tr=this,tn=q||{},ti=tn.width,to=tn.height;if(!ti||!to)throw Error("BufferResource width or height invalid");return(tr=h.call(this,ti,to)||this).data=w,tr}return Qe(n,h),n.prototype.upload=function(h,w,q){var tr=h.gl;return tr.pixelStorei(tr.UNPACK_PREMULTIPLY_ALPHA_WEBGL,w.alphaMode===fu.UNPACK),q.width===w.width&&q.height===w.height?tr.texSubImage2D(w.target,0,0,0,w.width,w.height,w.format,w.type,this.data):(q.width=w.width,q.height=w.height,tr.texImage2D(w.target,0,q.internalFormat,w.width,w.height,0,w.format,q.type,this.data)),!0},n.prototype.dispose=function(){this.data=null},n.test=function(h){return h instanceof Float32Array||h instanceof Uint8Array||h instanceof Uint32Array},n}(f6),f7={scaleMode:fo.NEAREST,format:p9.RGBA,alphaMode:fu.NPM},f9=function(h){function n(w,q){void 0===w&&(w=null),void 0===q&&(q=null);var tr=h.call(this)||this,tn=(q=q||{}).alphaMode,ti=q.mipmap,to=q.anisotropicLevel,ts=q.scaleMode,tu=q.width,tl=q.height,tc=q.wrapMode,tp=q.format,td=q.type,tm=q.target,ty=q.resolution,tv=q.resourceOptions;return!w||w instanceof f6||((w=Xm(w,tv)).internal=!0),tr.width=tu||0,tr.height=tl||0,tr.resolution=ty||lN.RESOLUTION,tr.mipmap=void 0!==ti?ti:lN.MIPMAP_TEXTURES,tr.anisotropicLevel=void 0!==to?to:lN.ANISOTROPIC_LEVEL,tr.wrapMode=tc||lN.WRAP_MODE,tr.scaleMode=void 0!==ts?ts:lN.SCALE_MODE,tr.format=tp||p9.RGBA,tr.type=td||fn.UNSIGNED_BYTE,tr.target=tm||fr.TEXTURE_2D,tr.alphaMode=void 0!==tn?tn:fu.UNPACK,void 0!==q.premultiplyAlpha&&(tr.premultiplyAlpha=q.premultiplyAlpha),tr.uid=++pk,tr.touched=0,tr.isPowerOfTwo=!1,tr._refreshPOT(),tr._glTextures={},tr.dirtyId=0,tr.dirtyStyleId=0,tr.cacheId=null,tr.valid=tu>0&&tl>0,tr.textureCacheIds=[],tr.destroyed=!1,tr.resource=null,tr._batchEnabled=0,tr._batchLocation=0,tr.parentTextureArray=null,tr.setResource(w),tr}return Qe(n,h),Object.defineProperty(n.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),n.prototype.setStyle=function(h,w){var q;return void 0!==h&&h!==this.scaleMode&&(this.scaleMode=h,q=!0),void 0!==w&&w!==this.mipmap&&(this.mipmap=w,q=!0),q&&this.dirtyStyleId++,this},n.prototype.setSize=function(h,w,q){return this.resolution=q||this.resolution,this.width=h,this.height=w,this._refreshPOT(),this.update(),this},n.prototype.setRealSize=function(h,w,q){return this.resolution=q||this.resolution,this.width=h/this.resolution,this.height=w/this.resolution,this._refreshPOT(),this.update(),this},n.prototype._refreshPOT=function(){var h,w;this.isPowerOfTwo=!((h=this.realWidth)&h-1)&&!!h&&!((w=this.realHeight)&w-1)&&!!w},n.prototype.setResolution=function(h){var w=this.resolution;return w===h||(this.resolution=h,this.valid&&(this.width=this.width*w/h,this.height=this.height*w/h,this.emit("update",this)),this._refreshPOT()),this},n.prototype.setResource=function(h){if(this.resource===h)return this;if(this.resource)throw Error("Resource can be set only once");return h.bind(this),this.resource=h,this},n.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},n.prototype.onError=function(h){this.emit("error",this,h)},n.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete pF[this.cacheId],delete pD[this.cacheId],this.cacheId=null),this.dispose(),n.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},n.prototype.dispose=function(){this.emit("dispose",this)},n.prototype.castToBaseTexture=function(){return this},n.from=function(h,w,q){void 0===q&&(q=lN.STRICT_TEXTURE_CACHE);var tr="string"==typeof h,tn=null;tr?tn=h:(h._pixiId||(h._pixiId="pixiid_"+ ++pk),tn=h._pixiId);var ti=pF[tn];if(tr&&q&&!ti)throw Error('The cacheId "'+tn+'" does not exist in BaseTextureCache.');return ti||((ti=new n(h,w)).cacheId=tn,n.addToCache(ti,tn)),ti},n.fromBuffer=function(h,w,q,tr){h=h||new Float32Array(w*q*4);var tn=new f8(h,{width:w,height:q}),ti=h instanceof Float32Array?fn.FLOAT:fn.UNSIGNED_BYTE;return new n(tn,Object.assign(f7,tr||{width:w,height:q,type:ti}))},n.addToCache=function(h,w){w&&(-1===h.textureCacheIds.indexOf(w)&&h.textureCacheIds.push(w),pF[w]&&console.warn("BaseTexture added to the cache with an id ["+w+"] that already had an entry"),pF[w]=h)},n.removeFromCache=function(h){if("string"==typeof h){var w=pF[h];if(w){var q=w.textureCacheIds.indexOf(h);return q>-1&&w.textureCacheIds.splice(q,1),delete pF[h],w}}else if(h&&h.textureCacheIds){for(var tr=0;tr<h.textureCacheIds.length;++tr)delete pF[h.textureCacheIds[tr]];return h.textureCacheIds.length=0,h}return null},n._globalBatch=0,n}(lU),dn=function(h){function n(w,q){var tr=this,tn=q||{},ti=tn.width,to=tn.height;(tr=h.call(this,ti,to)||this).items=[],tr.itemDirtyIds=[];for(var ts=0;ts<w;ts++){var tu=new f9;tr.items.push(tu),tr.itemDirtyIds.push(-2)}return tr.length=w,tr._load=null,tr.baseTexture=null,tr}return Qe(n,h),n.prototype.initFromArray=function(h,w){for(var q=0;q<this.length;q++)h[q]&&(h[q].castToBaseTexture?this.addBaseTextureAt(h[q].castToBaseTexture(),q):h[q]instanceof f6?this.addResourceAt(h[q],q):this.addResourceAt(Xm(h[q],w),q))},n.prototype.dispose=function(){for(var h=0,w=this.length;h<w;h++)this.items[h].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},n.prototype.addResourceAt=function(h,w){if(!this.items[w])throw Error("Index "+w+" is out of bounds");return h.valid&&!this.valid&&this.resize(h.width,h.height),this.items[w].setResource(h),this},n.prototype.bind=function(w){if(null!==this.baseTexture)throw Error("Only one base texture per TextureArray is allowed");h.prototype.bind.call(this,w);for(var q=0;q<this.length;q++)this.items[q].parentTextureArray=w,this.items[q].on("update",w.update,w)},n.prototype.unbind=function(w){h.prototype.unbind.call(this,w);for(var q=0;q<this.length;q++)this.items[q].parentTextureArray=null,this.items[q].off("update",w.update,w)},n.prototype.load=function(){var h=this;if(this._load)return this._load;var w=this.items.map(function(h){return h.resource}).filter(function(h){return h}).map(function(h){return h.load()});return this._load=Promise.all(w).then(function(){var w=h.items[0],q=w.realWidth,tr=w.realHeight;return h.resize(q,tr),Promise.resolve(h)}),this._load},n}(f6),ds=function(h){function n(w,q){var tr,tn,ti=this,to=q||{},ts=to.width,tu=to.height;return Array.isArray(w)?(tr=w,tn=w.length):tn=w,ti=h.call(this,tn,{width:ts,height:tu})||this,tr&&ti.initFromArray(tr,q),ti}return Qe(n,h),n.prototype.addBaseTextureAt=function(h,w){if(h.resource)this.addResourceAt(h.resource,w);else throw Error("ArrayResource does not support RenderTexture");return this},n.prototype.bind=function(w){h.prototype.bind.call(this,w),w.target=fr.TEXTURE_2D_ARRAY},n.prototype.upload=function(h,w,q){var tr=this.length,tn=this.itemDirtyIds,ti=this.items,to=h.gl;q.dirtyId<0&&to.texImage3D(to.TEXTURE_2D_ARRAY,0,w.format,this._width,this._height,tr,0,w.format,w.type,null);for(var ts=0;ts<tr;ts++){var tu=ti[ts];tn[ts]<tu.dirtyId&&(tn[ts]=tu.dirtyId,tu.valid&&to.texSubImage3D(to.TEXTURE_2D_ARRAY,0,0,0,ts,tu.resource.width,tu.resource.height,1,w.format,w.type,tu.resource.source))}return!0},n}(dn),da=function(h){function n(w){var q=this,tr=w.naturalWidth||w.videoWidth||w.width,tn=w.naturalHeight||w.videoHeight||w.height;return(q=h.call(this,tr,tn)||this).source=w,q.noSubImage=!1,q}return Qe(n,h),n.crossOrigin=function(h,w,q){void 0===q&&0!==w.indexOf("data:")?h.crossOrigin=function(h,w){if(void 0===w&&(w=window.location),0===h.indexOf("data:"))return"";w=w||window.location,fx||(fx=document.createElement("a")),fx.href=h;var q=pP(fx.href),tr=!q.port&&""===w.port||q.port===w.port;return q.hostname===w.hostname&&tr&&q.protocol===w.protocol?"":"anonymous"}(w):!1!==q&&(h.crossOrigin="string"==typeof q?q:"anonymous")},n.prototype.upload=function(h,w,q,tr){var tn=h.gl,ti=w.realWidth,to=w.realHeight;return tr=tr||this.source,tn.pixelStorei(tn.UNPACK_PREMULTIPLY_ALPHA_WEBGL,w.alphaMode===fu.UNPACK),this.noSubImage||w.target!==tn.TEXTURE_2D||q.width!==ti||q.height!==to?(q.width=ti,q.height=to,tn.texImage2D(w.target,0,w.format,w.format,w.type,tr)):tn.texSubImage2D(tn.TEXTURE_2D,0,0,0,w.format,w.type,tr),!0},n.prototype.update=function(){if(!this.destroyed){var w=this.source,q=w.naturalWidth||w.videoWidth||w.width,tr=w.naturalHeight||w.videoHeight||w.height;this.resize(q,tr),h.prototype.update.call(this)}},n.prototype.dispose=function(){this.source=null},n}(f6),du=function(h){function n(){return null!==h&&h.apply(this,arguments)||this}return Qe(n,h),n.test=function(h){var w=window.OffscreenCanvas;return!!w&&h instanceof w||h instanceof HTMLCanvasElement},n}(da),dl=function(h){function n(w,q){var tr=this,tn=q||{},ti=tn.width,to=tn.height,ts=tn.autoLoad,tu=tn.linkBaseTexture;if(w&&w.length!==n.SIDES)throw Error("Invalid length. Got "+w.length+", expected 6");tr=h.call(this,6,{width:ti,height:to})||this;for(var tl=0;tl<n.SIDES;tl++)tr.items[tl].target=fr.TEXTURE_CUBE_MAP_POSITIVE_X+tl;return tr.linkBaseTexture=!1!==tu,w&&tr.initFromArray(w,q),!1!==ts&&tr.load(),tr}return Qe(n,h),n.prototype.bind=function(w){h.prototype.bind.call(this,w),w.target=fr.TEXTURE_CUBE_MAP},n.prototype.addBaseTextureAt=function(h,w,q){if(void 0===q&&(q=this.linkBaseTexture),!this.items[w])throw Error("Index "+w+" is out of bounds");if(!this.linkBaseTexture||h.parentTextureArray||Object.keys(h._glTextures).length>0){if(h.resource)this.addResourceAt(h.resource,w);else throw Error("CubeResource does not support copying of renderTexture.")}else h.target=fr.TEXTURE_CUBE_MAP_POSITIVE_X+w,h.parentTextureArray=this.baseTexture,this.items[w]=h;return h.valid&&!this.valid&&this.resize(h.realWidth,h.realHeight),this.items[w]=h,this},n.prototype.upload=function(h,w,q){for(var tr=this.itemDirtyIds,tn=0;tn<n.SIDES;tn++){var ti=this.items[tn];tr[tn]<ti.dirtyId&&(ti.valid&&ti.resource?(ti.resource.upload(h,ti,q),tr[tn]=ti.dirtyId):tr[tn]<-1&&(h.gl.texImage2D(ti.target,0,q.internalFormat,w.realWidth,w.realHeight,0,w.format,q.type,null),tr[tn]=-1))}return!0},n.test=function(h){return Array.isArray(h)&&h.length===n.SIDES},n.SIDES=6,n}(dn),dc=function(h){function n(w,q){var tr=this;if(q=q||{},!(w instanceof HTMLImageElement)){var tn=new Image;da.crossOrigin(tn,w,q.crossorigin),tn.src=w,w=tn}return tr=h.call(this,w)||this,!w.complete&&tr._width&&tr._height&&(tr._width=0,tr._height=0),tr.url=w.src,tr._process=null,tr.preserveBitmap=!1,tr.createBitmap=(void 0!==q.createBitmap?q.createBitmap:lN.CREATE_IMAGE_BITMAP)&&!!window.createImageBitmap,tr.alphaMode="number"==typeof q.alphaMode?q.alphaMode:null,void 0!==q.premultiplyAlpha&&(tr.premultiplyAlpha=q.premultiplyAlpha),tr.bitmap=null,tr._load=null,!1!==q.autoLoad&&tr.load(),tr}return Qe(n,h),n.prototype.load=function(h){var w=this;return this._load||(void 0!==h&&(this.createBitmap=h),this._load=new Promise(function(h,q){var tr=w.source;w.url=tr.src;var s=function(){w.destroyed||(tr.onload=null,tr.onerror=null,w.resize(tr.width,tr.height),w._load=null,w.createBitmap?h(w.process()):h(w))};tr.complete&&tr.src?s():(tr.onload=s,tr.onerror=function(h){q(h),w.onError.emit(h)})})),this._load},n.prototype.process=function(){var h=this,w=this.source;return null!==this._process?this._process:null===this.bitmap&&window.createImageBitmap?(this._process=window.createImageBitmap(w,0,0,w.width,w.height,{premultiplyAlpha:this.alphaMode===fu.UNPACK?"premultiply":"none"}).then(function(w){return h.destroyed?Promise.reject():(h.bitmap=w,h.update(),h._process=null,Promise.resolve(h))}),this._process):Promise.resolve(this)},n.prototype.upload=function(w,q,tr){if("number"==typeof this.alphaMode&&(q.alphaMode=this.alphaMode),!this.createBitmap)return h.prototype.upload.call(this,w,q,tr);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(h.prototype.upload.call(this,w,q,tr,this.bitmap),!this.preserveBitmap){var tn=!0,ti=q._glTextures;for(var to in ti){var ts=ti[to];if(ts!==tr&&ts.dirtyId!==q.dirtyId){tn=!1;break}}tn&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},n.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,h.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},n.test=function(h){return"string"==typeof h||h instanceof HTMLImageElement},n}(da),dh=function(h){function n(w,q){var tr=this;return q=q||{},(tr=h.call(this,document.createElement("canvas"))||this)._width=0,tr._height=0,tr.svg=w,tr.scale=q.scale||1,tr._overrideWidth=q.width,tr._overrideHeight=q.height,tr._resolve=null,tr._crossorigin=q.crossorigin,tr._load=null,!1!==q.autoLoad&&tr.load(),tr}return Qe(n,h),n.prototype.load=function(){var h=this;return this._load||(this._load=new Promise(function(w){if(h._resolve=function(){h.resize(h.source.width,h.source.height),w(h)},/^\<svg/.test(h.svg.trim())){if(!btoa)throw Error("Your browser doesn't support base64 conversions.");h.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(h.svg)))}h._loadSvg()})),this._load},n.prototype._loadSvg=function(){var h=this,w=new Image;da.crossOrigin(w,this.svg,this._crossorigin),w.src=this.svg,w.onerror=function(q){h._resolve&&(w.onerror=null,h.onError.emit(q))},w.onload=function(){if(h._resolve){var q=w.width,tr=w.height;if(!q||!tr)throw Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var tn=q*h.scale,ti=tr*h.scale;(h._overrideWidth||h._overrideHeight)&&(tn=h._overrideWidth||h._overrideHeight/tr*q,ti=h._overrideHeight||h._overrideWidth/q*tr),tn=Math.round(tn),ti=Math.round(ti);var to=h.source;to.width=tn,to.height=ti,to._pixiId="canvas_"+ ++pk,to.getContext("2d").drawImage(w,0,0,q,tr,0,0,tn,ti),h._resolve(),h._resolve=null}}},n.getSize=function(h){var w=n.SVG_SIZE.exec(h),q={};return w&&(q[w[1]]=Math.round(parseFloat(w[3])),q[w[5]]=Math.round(parseFloat(w[7]))),q},n.prototype.dispose=function(){h.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},n.test=function(h,w){return"svg"===w||"string"==typeof h&&0===h.indexOf("data:image/svg+xml;base64")||"string"==typeof h&&0===h.indexOf("<svg")},n.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,n}(da),dp=function(h){function n(w,q){var tr=this;if(q=q||{},!(w instanceof HTMLVideoElement)){var tn=document.createElement("video");tn.setAttribute("preload","auto"),tn.setAttribute("webkit-playsinline",""),tn.setAttribute("playsinline",""),"string"==typeof w&&(w=[w]);var ti=w[0].src||w[0];da.crossOrigin(tn,ti,q.crossorigin);for(var to=0;to<w.length;++to){var ts=document.createElement("source"),tu=w[to],tl=tu.src,tc=tu.mime,tp=(tl=tl||w[to]).split("?").shift().toLowerCase(),td=tp.substr(tp.lastIndexOf(".")+1);tc=tc||n.MIME_TYPES[td]||"video/"+td,ts.src=tl,ts.type=tc,tn.appendChild(ts)}w=tn}return(tr=h.call(this,w)||this).noSubImage=!0,tr._autoUpdate=!0,tr._isConnectedToTicker=!1,tr._updateFPS=q.updateFPS||0,tr._msToNextUpdate=0,tr.autoPlay=!1!==q.autoPlay,tr._load=null,tr._resolve=null,tr._onCanPlay=tr._onCanPlay.bind(tr),tr._onError=tr._onError.bind(tr),!1!==q.autoLoad&&tr.load(),tr}return Qe(n,h),n.prototype.update=function(w){if(!this.destroyed){var q=fq.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-q),(!this._updateFPS||this._msToNextUpdate<=0)&&(h.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},n.prototype.load=function(){var h=this;if(this._load)return this._load;var w=this.source;return(w.readyState===w.HAVE_ENOUGH_DATA||w.readyState===w.HAVE_FUTURE_DATA)&&w.width&&w.height&&(w.complete=!0),w.addEventListener("play",this._onPlayStart.bind(this)),w.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(w.addEventListener("canplay",this._onCanPlay),w.addEventListener("canplaythrough",this._onCanPlay),w.addEventListener("error",this._onError,!0)),this._load=new Promise(function(q){h.valid?q(h):(h._resolve=q,w.load())}),this._load},n.prototype._onError=function(h){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(h)},n.prototype._isSourcePlaying=function(){var h=this.source;return h.currentTime>0&&!1===h.paused&&!1===h.ended&&h.readyState>2},n.prototype._isSourceReady=function(){var h=this.source;return 3===h.readyState||4===h.readyState},n.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(fq.shared.add(this.update,this),this._isConnectedToTicker=!0)},n.prototype._onPlayStop=function(){this._isConnectedToTicker&&(fq.shared.remove(this.update,this),this._isConnectedToTicker=!1)},n.prototype._onCanPlay=function(){var h=this.source;h.removeEventListener("canplay",this._onCanPlay),h.removeEventListener("canplaythrough",this._onCanPlay);var w=this.valid;this.resize(h.videoWidth,h.videoHeight),!w&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&h.play()},n.prototype.dispose=function(){this._isConnectedToTicker&&fq.shared.remove(this.update,this);var w=this.source;w&&(w.removeEventListener("error",this._onError,!0),w.pause(),w.src="",w.load()),h.prototype.dispose.call(this)},Object.defineProperty(n.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(h){h!==this._autoUpdate&&(this._autoUpdate=h,!this._autoUpdate&&this._isConnectedToTicker?(fq.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(fq.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(h){h!==this._updateFPS&&(this._updateFPS=h)},enumerable:!1,configurable:!0}),n.test=function(h,w){return h instanceof HTMLVideoElement||n.TYPES.indexOf(w)>-1},n.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],n.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},n}(da),df=function(h){function n(){return null!==h&&h.apply(this,arguments)||this}return Qe(n,h),n.test=function(h){return!!window.createImageBitmap&&h instanceof ImageBitmap},n}(da);f5.push(dc,df,du,dp,dh,f8,dl,ds);var dd=function(){function e(h){this.renderer=h}return e.prototype.destroy=function(){this.renderer=null},e}(),dm=function(h){function n(){return null!==h&&h.apply(this,arguments)||this}return Qe(n,h),n.prototype.upload=function(h,w,q){var tr=h.gl;return tr.pixelStorei(tr.UNPACK_PREMULTIPLY_ALPHA_WEBGL,w.alphaMode===fu.UNPACK),q.width===w.width&&q.height===w.height?tr.texSubImage2D(w.target,0,0,0,w.width,w.height,w.format,w.type,this.data):(q.width=w.width,q.height=w.height,tr.texImage2D(w.target,0,1===h.context.webGLVersion?tr.DEPTH_COMPONENT:tr.DEPTH_COMPONENT16,w.width,w.height,0,w.format,w.type,this.data)),!0},n}(f8),dy=function(){function e(h,w){this.width=Math.ceil(h||100),this.height=Math.ceil(w||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new f4("disposeFramebuffer"),this.multisample=fv.NONE}return Object.defineProperty(e.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),e.prototype.addColorTexture=function(h,w){return void 0===h&&(h=0),this.colorTextures[h]=w||new f9(null,{scaleMode:fo.NEAREST,resolution:1,mipmap:fa.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},e.prototype.addDepthTexture=function(h){return this.depthTexture=h||new f9(new dm(null,{width:this.width,height:this.height}),{scaleMode:fo.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:fa.OFF,format:p9.DEPTH_COMPONENT,type:fn.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},e.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},e.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},e.prototype.resize=function(h,w){if(h=Math.ceil(h),w=Math.ceil(w),!(h===this.width&&w===this.height)){this.width=h,this.height=w,this.dirtyId++,this.dirtySize++;for(var q=0;q<this.colorTextures.length;q++){var tr=this.colorTextures[q],tn=tr.resolution;tr.setSize(h/tn,w/tn)}if(this.depthTexture){var tn=this.depthTexture.resolution;this.depthTexture.setSize(h/tn,w/tn)}}},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},e}(),dv=function(h){function n(w){var q=this;if("number"==typeof w){var tr=arguments[0],tn=arguments[1],ti=arguments[2],to=arguments[3];w={width:tr,height:tn,scaleMode:ti,resolution:to}}q=h.call(this,null,w)||this;var ts=w||{},tu=ts.width,tl=ts.height;return q.mipmap=0,q.width=Math.ceil(tu)||100,q.height=Math.ceil(tl)||100,q.valid=!0,q.clearColor=[0,0,0,0],q.framebuffer=new dy(q.width*q.resolution,q.height*q.resolution).addColorTexture(0,q),q.maskStack=[],q.filterStack=[{}],q}return Qe(n,h),n.prototype.resize=function(h,w){h=Math.ceil(h),w=Math.ceil(w),this.framebuffer.resize(h*this.resolution,w*this.resolution)},n.prototype.dispose=function(){this.framebuffer.dispose(),h.prototype.dispose.call(this)},n.prototype.destroy=function(){h.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},n}(f9),db=function(){function e(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return e.prototype.set=function(h,w,q){var tr=w.width,tn=w.height;if(q){var ti=h.width/2/tr,to=h.height/2/tn,ts=h.x/tr+ti,tu=h.y/tn+to;q=fG.add(q,fG.NW),this.x0=ts+ti*fG.uX(q),this.y0=tu+to*fG.uY(q),q=fG.add(q,2),this.x1=ts+ti*fG.uX(q),this.y1=tu+to*fG.uY(q),q=fG.add(q,2),this.x2=ts+ti*fG.uX(q),this.y2=tu+to*fG.uY(q),q=fG.add(q,2),this.x3=ts+ti*fG.uX(q),this.y3=tu+to*fG.uY(q)}else this.x0=h.x/tr,this.y0=h.y/tn,this.x1=(h.x+h.width)/tr,this.y1=h.y/tn,this.x2=(h.x+h.width)/tr,this.y2=(h.y+h.height)/tn,this.x3=h.x/tr,this.y3=(h.y+h.height)/tn;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},e}(),dT=new db,dE=function(h){function n(w,q,tr,tn,ti,to){var ts=h.call(this)||this;if(ts.noFrame=!1,q||(ts.noFrame=!0,q=new fw(0,0,1,1)),w instanceof n&&(w=w.baseTexture),ts.baseTexture=w,ts._frame=q,ts.trim=tn,ts.valid=!1,ts._uvs=dT,ts.uvMatrix=null,ts.orig=tr||q,ts._rotate=Number(ti||0),!0===ti)ts._rotate=2;else if(ts._rotate%2!=0)throw Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return ts.defaultAnchor=to?new fR(to.x,to.y):new fR(0,0),ts._updateID=0,ts.textureCacheIds=[],w.valid?ts.noFrame?w.valid&&ts.onBaseTextureUpdated(w):ts.frame=q:w.once("loaded",ts.onBaseTextureUpdated,ts),ts.noFrame&&w.on("update",ts.onBaseTextureUpdated,ts),ts}return Qe(n,h),n.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},n.prototype.onBaseTextureUpdated=function(h){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=h.width,this._frame.height=h.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},n.prototype.destroy=function(h){if(this.baseTexture){if(h){var w=this.baseTexture;w&&w.url&&pD[w.url]&&n.removeFromCache(w.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,n.removeFromCache(this),this.textureCacheIds=null},n.prototype.clone=function(){return new n(this.baseTexture,this.frame.clone(),this.orig.clone(),this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor)},n.prototype.updateUvs=function(){this._uvs===dT&&(this._uvs=new db),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},n.from=function(h,w,q){void 0===w&&(w={}),void 0===q&&(q=lN.STRICT_TEXTURE_CACHE);var tr="string"==typeof h,tn=null;tr?tn=h:(h._pixiId||(h._pixiId="pixiid_"+ ++pk),tn=h._pixiId);var ti=pD[tn];if(tr&&q&&!ti)throw Error('The cacheId "'+tn+'" does not exist in TextureCache.');return ti||(w.resolution||(w.resolution=bu(h)),(ti=new n(new f9(h,w))).baseTexture.cacheId=tn,f9.addToCache(ti.baseTexture,tn),n.addToCache(ti,tn)),ti},n.fromURL=function(h,w){var q=Object.assign({autoLoad:!1},null==w?void 0:w.resourceOptions),tr=n.from(h,Object.assign({resourceOptions:q},w),!1),tn=tr.baseTexture.resource;return tr.baseTexture.valid?Promise.resolve(tr):tn.load().then(function(){return Promise.resolve(tr)})},n.fromBuffer=function(h,w,q,tr){return new n(f9.fromBuffer(h,w,q,tr))},n.fromLoader=function(h,w,q){var tr=new dc(h);tr.url=w;var tn=new f9(tr,{scaleMode:lN.SCALE_MODE,resolution:bu(w)}),ti=new n(tn);return q||(q=w),f9.addToCache(ti.baseTexture,q),n.addToCache(ti,q),q!==w&&(f9.addToCache(ti.baseTexture,w),n.addToCache(ti,w)),ti},n.addToCache=function(h,w){w&&(-1===h.textureCacheIds.indexOf(w)&&h.textureCacheIds.push(w),pD[w]&&console.warn("Texture added to the cache with an id ["+w+"] that already had an entry"),pD[w]=h)},n.removeFromCache=function(h){if("string"==typeof h){var w=pD[h];if(w){var q=w.textureCacheIds.indexOf(h);return q>-1&&w.textureCacheIds.splice(q,1),delete pD[h],w}}else if(h&&h.textureCacheIds){for(var tr=0;tr<h.textureCacheIds.length;++tr)pD[h.textureCacheIds[tr]]===h&&delete pD[h.textureCacheIds[tr]];return h.textureCacheIds.length=0,h}return null},Object.defineProperty(n.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"frame",{get:function(){return this._frame},set:function(h){this._frame=h,this.noFrame=!1;var w=h.x,q=h.y,tr=h.width,tn=h.height,ti=w+tr>this.baseTexture.width,to=q+tn>this.baseTexture.height;if(ti||to)throw Error("Texture Error: frame does not fit inside the base Texture dimensions: "+("X: "+w+" + "+tr+" = "+(w+tr)+" > "+this.baseTexture.width+" ")+(ti&&to?"and":"or")+" "+("Y: "+q+" + "+tn+" = "+(q+tn))+" > "+this.baseTexture.height);this.valid=tr&&tn&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=h),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rotate",{get:function(){return this._rotate},set:function(h){this._rotate=h,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),n.prototype.castToBaseTexture=function(){return this.baseTexture},n}(lU);function Mu(h){h.destroy=function(){},h.on=function(){},h.once=function(){},h.emit=function(){}}dE.EMPTY=new dE(new f9),Mu(dE.EMPTY),Mu(dE.EMPTY.baseTexture),dE.WHITE=((ga=document.createElement("canvas")).width=16,ga.height=16,(gu=ga.getContext("2d")).fillStyle="white",gu.fillRect(0,0,16,16),new dE(new f9(new du(ga)))),Mu(dE.WHITE),Mu(dE.WHITE.baseTexture);var dA=function(h){function n(w,q){var tr=this,tn=null;if(!(w instanceof dv)){var ti=arguments[1],to=arguments[2],ts=arguments[3],tu=arguments[4];console.warn("Please use RenderTexture.create("+ti+", "+to+") instead of the ctor directly."),tn=arguments[0],q=null,w=new dv({width:ti,height:to,scaleMode:ts,resolution:tu})}return(tr=h.call(this,w,q)||this).legacyRenderer=tn,tr.valid=!0,tr.filterFrame=null,tr.filterPoolKey=null,tr.updateUvs(),tr}return Qe(n,h),Object.defineProperty(n.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),n.prototype.resize=function(h,w,q){void 0===q&&(q=!0),h=Math.ceil(h),w=Math.ceil(w),this.valid=h>0&&w>0,this._frame.width=this.orig.width=h,this._frame.height=this.orig.height=w,q&&this.baseTexture.resize(h,w),this.updateUvs()},n.prototype.setResolution=function(h){var w=this.baseTexture;w.resolution!==h&&(w.setResolution(h),this.resize(w.width,w.height,!1))},n.create=function(h){return"number"==typeof h&&(h={width:h,height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),new n(new dv(h))},n}(dE),dO=function(){function e(h){this.texturePool={},this.textureOptions=h||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return e.prototype.createTexture=function(h,w){var q=new dv(Object.assign({width:h,height:w,resolution:1},this.textureOptions));return new dA(q)},e.prototype.getOptimalTexture=function(h,w,q){void 0===q&&(q=1);var tr=e.SCREEN_KEY;h*=q,w*=q,this.enableFullScreen&&h===this._pixelsWidth&&w===this._pixelsHeight||(tr=(65535&(h=xu(h)))<<16|65535&(w=xu(w))),this.texturePool[tr]||(this.texturePool[tr]=[]);var tn=this.texturePool[tr].pop();return tn||(tn=this.createTexture(h,w)),tn.filterPoolKey=tr,tn.setResolution(q),tn},e.prototype.getFilterTexture=function(h,w){var q=this.getOptimalTexture(h.width,h.height,w||h.resolution);return q.filterFrame=h.filterFrame,q},e.prototype.returnTexture=function(h){var w=h.filterPoolKey;h.filterFrame=null,this.texturePool[w].push(h)},e.prototype.returnFilterTexture=function(h){this.returnTexture(h)},e.prototype.clear=function(h){if(h=!1!==h)for(var w in this.texturePool){var q=this.texturePool[w];if(q)for(var tr=0;tr<q.length;tr++)q[tr].destroy(!0)}this.texturePool={}},e.prototype.setScreenSize=function(h){if(!(h.width===this._pixelsWidth&&h.height===this._pixelsHeight)){var w=e.SCREEN_KEY,q=this.texturePool[w];if(this.enableFullScreen=h.width>0&&h.height>0,q)for(var tr=0;tr<q.length;tr++)q[tr].destroy(!0);this.texturePool[w]=[],this._pixelsWidth=h.width,this._pixelsHeight=h.height}},e.SCREEN_KEY="screen",e}(),dw=function(){function e(h,w,q,tr,tn,ti,to){void 0===w&&(w=0),void 0===q&&(q=!1),void 0===tr&&(tr=5126),this.buffer=h,this.size=w,this.normalized=q,this.type=tr,this.stride=tn,this.start=ti,this.instance=to}return e.prototype.destroy=function(){this.buffer=null},e.from=function(h,w,q,tr,tn){return new e(h,w,q,tr,tn)},e}(),dL=0,dS=function(){function e(h,w,q){void 0===w&&(w=!0),void 0===q&&(q=!1),this.data=h||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=q,this.static=w,this.id=dL++,this.disposeRunner=new f4("disposeBuffer")}return e.prototype.update=function(h){this.data=h||this.data,this._updateID++},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroy=function(){this.dispose(),this.data=null},e.from=function(h){return h instanceof Array&&(h=new Float32Array(h)),new e(h)},e}();function Wm(h){if(4===h.BYTES_PER_ELEMENT)return h instanceof Float32Array?"Float32Array":h instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===h.BYTES_PER_ELEMENT){if(h instanceof Uint16Array)return"Uint16Array"}else if(1===h.BYTES_PER_ELEMENT&&h instanceof Uint8Array)return"Uint8Array";return null}var dI={Float32Array,Uint32Array,Int32Array,Uint8Array},dP={5126:4,5123:2,5121:1},dR=0,dN={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},dM=function(){function e(h,w){void 0===h&&(h=[]),void 0===w&&(w={}),this.buffers=h,this.indexBuffer=null,this.attributes=w,this.glVertexArrayObjects={},this.id=dR++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new f4("disposeGeometry"),this.refCount=0}return e.prototype.addAttribute=function(h,w,q,tr,tn,ti,to,ts){if(void 0===q&&(q=0),void 0===tr&&(tr=!1),void 0===ts&&(ts=!1),!w)throw Error("You must pass a buffer when creating an attribute");w instanceof dS||(w instanceof Array&&(w=new Float32Array(w)),w=new dS(w));var tu=h.split("|");if(tu.length>1){for(var tl=0;tl<tu.length;tl++)this.addAttribute(tu[tl],w,q,tr,tn);return this}var tc=this.buffers.indexOf(w);return -1===tc&&(this.buffers.push(w),tc=this.buffers.length-1),this.attributes[h]=new dw(tc,q,tr,tn,ti,to,ts),this.instanced=this.instanced||ts,this},e.prototype.getAttribute=function(h){return this.attributes[h]},e.prototype.getBuffer=function(h){return this.buffers[this.getAttribute(h).buffer]},e.prototype.addIndex=function(h){return h instanceof dS||(h instanceof Array&&(h=new Uint16Array(h)),h=new dS(h)),h.index=!0,this.indexBuffer=h,-1===this.buffers.indexOf(h)&&this.buffers.push(h),this},e.prototype.getIndex=function(){return this.indexBuffer},e.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var h,w=[],q=[],tr=new dS;for(h in this.attributes){var tn=this.attributes[h],ti=this.buffers[tn.buffer];w.push(ti.data),q.push(tn.size*dP[tn.type]/4),tn.buffer=0}for(tr.data=function(h,w){for(var q=0,tr=0,tn={},ti=0;ti<h.length;ti++)tr+=w[ti],q+=h[ti].length;for(var to=new ArrayBuffer(4*q),ts=null,tu=0,ti=0;ti<h.length;ti++){var tl=w[ti],tc=h[ti],tp=Wm(tc);tn[tp]||(tn[tp]=new dI[tp](to)),ts=tn[tp];for(var td=0;td<tc.length;td++)ts[(td/tl|0)*tr+tu+td%tl]=tc[td];tu+=tl}return new Float32Array(to)}(w,q),h=0;h<this.buffers.length;h++)this.buffers[h]!==this.indexBuffer&&this.buffers[h].destroy();return this.buffers=[tr],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},e.prototype.getSize=function(){for(var h in this.attributes){var w=this.attributes[h];return this.buffers[w.buffer].data.length/(w.stride/4||w.size)}return 0},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},e.prototype.clone=function(){for(var h=new e,w=0;w<this.buffers.length;w++)h.buffers[w]=new dS(this.buffers[w].data.slice(0));for(var w in this.attributes){var q=this.attributes[w];h.attributes[w]=new dw(q.buffer,q.size,q.normalized,q.type,q.stride,q.start,q.instance)}return this.indexBuffer&&(h.indexBuffer=h.buffers[this.buffers.indexOf(this.indexBuffer)],h.indexBuffer.index=!0),h},e.merge=function(h){for(var w,q=new e,tr=[],tn=[],ti=[],to=0;to<h.length;to++){w=h[to];for(var ts=0;ts<w.buffers.length;ts++)tn[ts]=tn[ts]||0,tn[ts]+=w.buffers[ts].data.length,ti[ts]=0}for(var to=0;to<w.buffers.length;to++)tr[to]=new dN[Wm(w.buffers[to].data)](tn[to]),q.buffers[to]=new dS(tr[to]);for(var to=0;to<h.length;to++){w=h[to];for(var ts=0;ts<w.buffers.length;ts++)tr[ts].set(w.buffers[ts].data,ti[ts]),ti[ts]+=w.buffers[ts].data.length}if(q.attributes=w.attributes,w.indexBuffer){q.indexBuffer=q.buffers[w.buffers.indexOf(w.indexBuffer)],q.indexBuffer.index=!0;for(var tu=0,tl=0,tc=0,tp=0,to=0;to<w.buffers.length;to++)if(w.buffers[to]!==w.indexBuffer){tp=to;break}for(var to in w.attributes){var td=w.attributes[to];(0|td.buffer)===tp&&(tl+=td.size*dP[td.type]/4)}for(var to=0;to<h.length;to++){for(var tm=h[to].indexBuffer.data,ts=0;ts<tm.length;ts++)q.indexBuffer.data[ts+tc]+=tu;tu+=w.buffers[tp].data.length/tl,tc+=tm.length}}return q},e}(),dk=function(h){function n(){var w=h.call(this)||this;return w.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),w}return Qe(n,h),n}(dM),dU=function(h){function n(){var w=h.call(this)||this;return w.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),w.uvs=new Float32Array([0,0,1,0,1,1,0,1]),w.vertexBuffer=new dS(w.vertices),w.uvBuffer=new dS(w.uvs),w.addAttribute("aVertexPosition",w.vertexBuffer).addAttribute("aTextureCoord",w.uvBuffer).addIndex([0,1,2,0,2,3]),w}return Qe(n,h),n.prototype.map=function(h,w){var q=0,tr=0;return this.uvs[0]=q,this.uvs[1]=tr,this.uvs[2]=q+w.width/h.width,this.uvs[3]=tr,this.uvs[4]=q+w.width/h.width,this.uvs[5]=tr+w.height/h.height,this.uvs[6]=q,this.uvs[7]=tr+w.height/h.height,q=w.x,tr=w.y,this.vertices[0]=q,this.vertices[1]=tr,this.vertices[2]=q+w.width,this.vertices[3]=tr,this.vertices[4]=q+w.width,this.vertices[5]=tr+w.height,this.vertices[6]=q,this.vertices[7]=tr+w.height,this.invalidate(),this},n.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},n}(dM),dC=0,dD=function(){function e(h,w){this.uniforms=h,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=dC++,this.static=!!w}return e.prototype.update=function(){this.dirtyId++},e.prototype.add=function(h,w,q){this.uniforms[h]=new e(w,q)},e.from=function(h,w){return new e(h,w)},e}(),dF=function(){function e(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new fw,this.destinationFrame=new fw,this.filters=[]}return e.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},e}(),dB=function(h){function n(w){var q=h.call(this,w)||this;return q.defaultFilterStack=[{}],q.texturePool=new dO,q.texturePool.setScreenSize(w.view),q.statePool=[],q.quad=new dk,q.quadUv=new dU,q.tempRect=new fw,q.activeState={},q.globalUniforms=new dD({outputFrame:q.tempRect,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),q.forceClear=!1,q.useMaxPadding=!1,q}return Qe(n,h),n.prototype.push=function(h,w){for(var q=this.renderer,tr=this.defaultFilterStack,tn=this.statePool.pop()||new dF,ti=w[0].resolution,to=w[0].padding,ts=w[0].autoFit,tu=w[0].legacy,tl=1;tl<w.length;tl++){var tc=w[tl];ti=Math.min(ti,tc.resolution),to=this.useMaxPadding?Math.max(to,tc.padding):to+tc.padding,ts=ts||tc.autoFit,tu=tu||tc.legacy}1===tr.length&&(this.defaultFilterStack[0].renderTexture=q.renderTexture.current),tr.push(tn),tn.resolution=ti,tn.legacy=tu,tn.target=h,tn.sourceFrame.copyFrom(h.filterArea||h.getBounds(!0)),tn.sourceFrame.pad(to),ts&&tn.sourceFrame.fit(this.renderer.renderTexture.sourceFrame),tn.sourceFrame.ceil(ti),tn.renderTexture=this.getOptimalFilterTexture(tn.sourceFrame.width,tn.sourceFrame.height,ti),tn.filters=w,tn.destinationFrame.width=tn.renderTexture.width,tn.destinationFrame.height=tn.renderTexture.height;var tp=this.tempRect;tp.width=tn.sourceFrame.width,tp.height=tn.sourceFrame.height,tn.renderTexture.filterFrame=tn.sourceFrame,q.renderTexture.bind(tn.renderTexture,tn.sourceFrame,tp),q.renderTexture.clear()},n.prototype.pop=function(){var h=this.defaultFilterStack,w=h.pop(),q=w.filters;this.activeState=w;var tr=this.globalUniforms.uniforms;tr.outputFrame=w.sourceFrame,tr.resolution=w.resolution;var tn=tr.inputSize,ti=tr.inputPixel,to=tr.inputClamp;if(tn[0]=w.destinationFrame.width,tn[1]=w.destinationFrame.height,tn[2]=1/tn[0],tn[3]=1/tn[1],ti[0]=tn[0]*w.resolution,ti[1]=tn[1]*w.resolution,ti[2]=1/ti[0],ti[3]=1/ti[1],to[0]=.5*ti[2],to[1]=.5*ti[3],to[2]=w.sourceFrame.width*tn[2]-.5*ti[2],to[3]=w.sourceFrame.height*tn[3]-.5*ti[3],w.legacy){var ts=tr.filterArea;ts[0]=w.destinationFrame.width,ts[1]=w.destinationFrame.height,ts[2]=w.sourceFrame.x,ts[3]=w.sourceFrame.y,tr.filterClamp=tr.inputClamp}this.globalUniforms.update();var tu=h[h.length-1];if(w.renderTexture.framebuffer.multisample>1&&this.renderer.framebuffer.blit(),1===q.length)q[0].apply(this,w.renderTexture,tu.renderTexture,fl.BLEND,w),this.returnFilterTexture(w.renderTexture);else{var tl=w.renderTexture,tc=this.getOptimalFilterTexture(tl.width,tl.height,w.resolution);tc.filterFrame=tl.filterFrame;var tp=0;for(tp=0;tp<q.length-1;++tp){q[tp].apply(this,tl,tc,fl.CLEAR,w);var td=tl;tl=tc,tc=td}q[tp].apply(this,tl,tu.renderTexture,fl.BLEND,w),this.returnFilterTexture(tl),this.returnFilterTexture(tc)}w.clear(),this.statePool.push(w)},n.prototype.bindAndClear=function(h,w){if(void 0===w&&(w=fl.CLEAR),h&&h.filterFrame){var q=this.tempRect;q.width=h.filterFrame.width,q.height=h.filterFrame.height,this.renderer.renderTexture.bind(h,h.filterFrame,q)}else this.renderer.renderTexture.bind(h);"boolean"==typeof w&&(w=w?fl.CLEAR:fl.BLEND,Qn("5.2.1","Use CLEAR_MODES when using clear applyFilter option")),(w===fl.CLEAR||w===fl.BLIT&&this.forceClear)&&this.renderer.renderTexture.clear()},n.prototype.applyFilter=function(h,w,q,tr){var tn=this.renderer;this.bindAndClear(q,tr),h.uniforms.uSampler=w,h.uniforms.filterGlobals=this.globalUniforms,tn.state.set(h.state),tn.shader.bind(h),h.legacy?(this.quadUv.map(w._frame,w.filterFrame),tn.geometry.bind(this.quadUv),tn.geometry.draw(p7.TRIANGLES)):(tn.geometry.bind(this.quad),tn.geometry.draw(p7.TRIANGLE_STRIP))},n.prototype.calculateSpriteMatrix=function(h,w){var q=this.activeState,tr=q.sourceFrame,tn=q.destinationFrame,ti=w._texture.orig,to=h.set(tn.width,0,0,tn.height,tr.x,tr.y),ts=w.worldTransform.copyTo(fM.TEMP_MATRIX);return ts.invert(),to.prepend(ts),to.scale(1/ti.width,1/ti.height),to.translate(w.anchor.x,w.anchor.y),to},n.prototype.destroy=function(){this.texturePool.clear(!1)},n.prototype.getOptimalFilterTexture=function(h,w,q){return void 0===q&&(q=1),this.texturePool.getOptimalTexture(h,w,q)},n.prototype.getFilterTexture=function(h,w){if("number"==typeof h){var q=h;h=w,w=q}h=h||this.activeState.renderTexture;var tr=this.texturePool.getOptimalTexture(h.width,h.height,w||h.resolution);return tr.filterFrame=h.filterFrame,tr},n.prototype.returnFilterTexture=function(h){this.texturePool.returnTexture(h)},n.prototype.emptyPool=function(){this.texturePool.clear(!0)},n.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},n}(dd),dj=function(){function e(h){this.renderer=h}return e.prototype.flush=function(){},e.prototype.destroy=function(){this.renderer=null},e.prototype.start=function(){},e.prototype.stop=function(){this.flush()},e.prototype.render=function(h){},e}(),dG=function(h){function n(w){var q=h.call(this,w)||this;return q.emptyRenderer=new dj(w),q.currentRenderer=q.emptyRenderer,q}return Qe(n,h),n.prototype.setObjectRenderer=function(h){this.currentRenderer!==h&&(this.currentRenderer.stop(),this.currentRenderer=h,this.currentRenderer.start())},n.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},n.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},n.prototype.copyBoundTextures=function(h,w){for(var q=this.renderer.texture.boundTextures,tr=w-1;tr>=0;--tr)h[tr]=q[tr]||null,h[tr]&&(h[tr]._batchLocation=tr)},n.prototype.boundArray=function(h,w,q,tr){for(var tn=h.elements,ti=h.ids,to=h.count,ts=0,tu=0;tu<to;tu++){var tl=tn[tu],tc=tl._batchLocation;if(tc>=0&&tc<tr&&w[tc]===tl){ti[tu]=tc;continue}for(;ts<tr;){var tp=w[ts];if(tp&&tp._batchEnabled===q&&tp._batchLocation===ts){ts++;continue}ti[tu]=ts,tl._batchLocation=ts,w[ts]=tl;break}}},n}(dd),dV=0,dX=function(h){function n(w){var q=h.call(this,w)||this;return q.webGLVersion=1,q.extensions={},q.supports={uint32Indices:!1},q.handleContextLost=q.handleContextLost.bind(q),q.handleContextRestored=q.handleContextRestored.bind(q),w.view.addEventListener("webglcontextlost",q.handleContextLost,!1),w.view.addEventListener("webglcontextrestored",q.handleContextRestored,!1),q}return Qe(n,h),Object.defineProperty(n.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),n.prototype.contextChange=function(h){this.gl=h,this.renderer.gl=h,this.renderer.CONTEXT_UID=dV++,h.isContextLost()&&h.getExtension("WEBGL_lose_context")&&h.getExtension("WEBGL_lose_context").restoreContext()},n.prototype.initFromContext=function(h){this.gl=h,this.validateContext(h),this.renderer.gl=h,this.renderer.CONTEXT_UID=dV++,this.renderer.runners.contextChange.emit(h)},n.prototype.initFromOptions=function(h){var w=this.createContext(this.renderer.view,h);this.initFromContext(w)},n.prototype.createContext=function(h,w){var q;if(lN.PREFER_ENV>=p4.WEBGL2&&(q=h.getContext("webgl2",w)),q)this.webGLVersion=2;else if(this.webGLVersion=1,!(q=h.getContext("webgl",w)||h.getContext("experimental-webgl",w)))throw Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=q,this.getExtensions(),this.gl},n.prototype.getExtensions=function(){var h=this.gl;1===this.webGLVersion?Object.assign(this.extensions,{drawBuffers:h.getExtension("WEBGL_draw_buffers"),depthTexture:h.getExtension("WEBGL_depth_texture"),loseContext:h.getExtension("WEBGL_lose_context"),vertexArrayObject:h.getExtension("OES_vertex_array_object")||h.getExtension("MOZ_OES_vertex_array_object")||h.getExtension("WEBKIT_OES_vertex_array_object"),anisotropicFiltering:h.getExtension("EXT_texture_filter_anisotropic"),uint32ElementIndex:h.getExtension("OES_element_index_uint"),floatTexture:h.getExtension("OES_texture_float"),floatTextureLinear:h.getExtension("OES_texture_float_linear"),textureHalfFloat:h.getExtension("OES_texture_half_float"),textureHalfFloatLinear:h.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,{anisotropicFiltering:h.getExtension("EXT_texture_filter_anisotropic"),colorBufferFloat:h.getExtension("EXT_color_buffer_float"),floatTextureLinear:h.getExtension("OES_texture_float_linear")})},n.prototype.handleContextLost=function(h){h.preventDefault()},n.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},n.prototype.destroy=function(){var h=this.renderer.view;h.removeEventListener("webglcontextlost",this.handleContextLost),h.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},n.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},n.prototype.validateContext=function(h){h.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var w="WebGL2RenderingContext"in window&&h instanceof window.WebGL2RenderingContext||!!h.getExtension("OES_element_index_uint");this.supports.uint32Indices=w,w||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},n}(dd),BO=function(h){this.framebuffer=h,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=fv.NONE,this.msaaBuffer=null,this.blitFramebuffer=null},dH=new fw,dz=function(h){function n(w){var q=h.call(this,w)||this;return q.managedFramebuffers=[],q.unknownFramebuffer=new dy(10,10),q.msaaSamples=null,q}return Qe(n,h),n.prototype.contextChange=function(){var h=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new fw,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var w=this.renderer.context.extensions.drawBuffers,q=this.renderer.context.extensions.depthTexture;lN.PREFER_ENV===p4.WEBGL_LEGACY&&(w=null,q=null),w?h.drawBuffers=function(h){return w.drawBuffersWEBGL(h)}:(this.hasMRT=!1,h.drawBuffers=function(){}),q||(this.writeDepthTexture=!1)}else this.msaaSamples=h.getInternalformatParameter(h.RENDERBUFFER,h.RGBA8,h.SAMPLES)},n.prototype.bind=function(h,w){var q=this.gl;if(h){var tr=h.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(h);this.current!==h&&(this.current=h,q.bindFramebuffer(q.FRAMEBUFFER,tr.framebuffer)),tr.dirtyId!==h.dirtyId&&(tr.dirtyId=h.dirtyId,tr.dirtyFormat!==h.dirtyFormat?(tr.dirtyFormat=h.dirtyFormat,this.updateFramebuffer(h)):tr.dirtySize!==h.dirtySize&&(tr.dirtySize=h.dirtySize,this.resizeFramebuffer(h)));for(var tn=0;tn<h.colorTextures.length;tn++){var ti=h.colorTextures[tn];this.renderer.texture.unbind(ti.parentTextureArray||ti)}h.depthTexture&&this.renderer.texture.unbind(h.depthTexture),w?this.setViewport(w.x,w.y,w.width,w.height):this.setViewport(0,0,h.width,h.height)}else this.current&&(this.current=null,q.bindFramebuffer(q.FRAMEBUFFER,null)),w?this.setViewport(w.x,w.y,w.width,w.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},n.prototype.setViewport=function(h,w,q,tr){var tn=this.viewport;(tn.width!==q||tn.height!==tr||tn.x!==h||tn.y!==w)&&(tn.x=h,tn.y=w,tn.width=q,tn.height=tr,this.gl.viewport(h,w,q,tr))},Object.defineProperty(n.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),n.prototype.clear=function(h,w,q,tr,tn){void 0===tn&&(tn=p6.COLOR|p6.DEPTH);var ti=this.gl;ti.clearColor(h,w,q,tr),ti.clear(tn)},n.prototype.initFramebuffer=function(h){var w=this.gl,q=new BO(w.createFramebuffer());return q.multisample=this.detectSamples(h.multisample),h.glFramebuffers[this.CONTEXT_UID]=q,this.managedFramebuffers.push(h),h.disposeRunner.add(this),q},n.prototype.resizeFramebuffer=function(h){var w=this.gl,q=h.glFramebuffers[this.CONTEXT_UID];q.stencil&&(w.bindRenderbuffer(w.RENDERBUFFER,q.stencil),w.renderbufferStorage(w.RENDERBUFFER,w.DEPTH_STENCIL,h.width,h.height));for(var tr=h.colorTextures,tn=0;tn<tr.length;tn++)this.renderer.texture.bind(tr[tn],0);h.depthTexture&&this.renderer.texture.bind(h.depthTexture,0)},n.prototype.updateFramebuffer=function(h){var w=this.gl,q=h.glFramebuffers[this.CONTEXT_UID],tr=h.colorTextures.length;w.drawBuffers||(tr=Math.min(tr,1)),q.multisample>1&&(q.msaaBuffer=w.createRenderbuffer(),w.bindRenderbuffer(w.RENDERBUFFER,q.msaaBuffer),w.renderbufferStorageMultisample(w.RENDERBUFFER,q.multisample,w.RGBA8,h.width,h.height),w.framebufferRenderbuffer(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.RENDERBUFFER,q.msaaBuffer));for(var tn=[],ti=0;ti<tr;ti++)if(!(0===ti&&q.multisample>1)){var to=h.colorTextures[ti],ts=to.parentTextureArray||to;this.renderer.texture.bind(ts,0),w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0+ti,to.target,ts._glTextures[this.CONTEXT_UID].texture,0),tn.push(w.COLOR_ATTACHMENT0+ti)}if(tn.length>1&&w.drawBuffers(tn),h.depthTexture&&this.writeDepthTexture){var tu=h.depthTexture;this.renderer.texture.bind(tu,0),w.framebufferTexture2D(w.FRAMEBUFFER,w.DEPTH_ATTACHMENT,w.TEXTURE_2D,tu._glTextures[this.CONTEXT_UID].texture,0)}!q.stencil&&(h.stencil||h.depth)&&(q.stencil=w.createRenderbuffer(),w.bindRenderbuffer(w.RENDERBUFFER,q.stencil),w.renderbufferStorage(w.RENDERBUFFER,w.DEPTH_STENCIL,h.width,h.height),h.depthTexture||w.framebufferRenderbuffer(w.FRAMEBUFFER,w.DEPTH_STENCIL_ATTACHMENT,w.RENDERBUFFER,q.stencil))},n.prototype.detectSamples=function(h){var w=this.msaaSamples,q=fv.NONE;if(h<=1||null===w)return q;for(var tr=0;tr<w.length;tr++)if(w[tr]<=h){q=w[tr];break}return 1===q&&(q=fv.NONE),q},n.prototype.blit=function(h,w,q){var tr=this.current,tn=this.renderer,ti=this.gl,to=this.CONTEXT_UID;if(2===tn.context.webGLVersion&&tr){var ts=tr.glFramebuffers[to];if(ts){if(!h){if(ts.multisample<=1)return;ts.blitFramebuffer||(ts.blitFramebuffer=new dy(tr.width,tr.height),ts.blitFramebuffer.addColorTexture(0,tr.colorTextures[0])),(h=ts.blitFramebuffer).width=tr.width,h.height=tr.height}w||((w=dH).width=tr.width,w.height=tr.height),q||(q=w);var tu=w.width===q.width&&w.height===q.height;this.bind(h),ti.bindFramebuffer(ti.READ_FRAMEBUFFER,ts.framebuffer),ti.blitFramebuffer(w.x,w.y,w.width,w.height,q.x,q.y,q.width,q.height,ti.COLOR_BUFFER_BIT,tu?ti.NEAREST:ti.LINEAR)}}},n.prototype.disposeFramebuffer=function(h,w){var q=h.glFramebuffers[this.CONTEXT_UID],tr=this.gl;if(q){delete h.glFramebuffers[this.CONTEXT_UID];var tn=this.managedFramebuffers.indexOf(h);tn>=0&&this.managedFramebuffers.splice(tn,1),h.disposeRunner.remove(this),w||(tr.deleteFramebuffer(q.framebuffer),q.stencil&&tr.deleteRenderbuffer(q.stencil))}},n.prototype.disposeAll=function(h){var w=this.managedFramebuffers;this.managedFramebuffers=[];for(var q=0;q<w.length;q++)this.disposeFramebuffer(w[q],h)},n.prototype.forceStencil=function(){var h=this.current;if(h){var w=h.glFramebuffers[this.CONTEXT_UID];if(!(!w||w.stencil)){h.enableStencil();var q=h.width,tr=h.height,tn=this.gl,ti=tn.createRenderbuffer();tn.bindRenderbuffer(tn.RENDERBUFFER,ti),tn.renderbufferStorage(tn.RENDERBUFFER,tn.DEPTH_STENCIL,q,tr),w.stencil=ti,tn.framebufferRenderbuffer(tn.FRAMEBUFFER,tn.DEPTH_STENCIL_ATTACHMENT,tn.RENDERBUFFER,ti)}}},n.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new fw},n}(dd),VO=function(h){this.buffer=h||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},dK={5126:4,5123:2,5121:1},dY=function(h){function n(w){var q=h.call(this,w)||this;return q._activeGeometry=null,q._activeVao=null,q.hasVao=!0,q.hasInstance=!0,q.canUseUInt32ElementIndex=!1,q.managedGeometries={},q.managedBuffers={},q}return Qe(n,h),n.prototype.contextChange=function(){this.disposeAll(!0);var h=this.gl=this.renderer.gl,w=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,!h.createVertexArray){var q=this.renderer.context.extensions.vertexArrayObject;lN.PREFER_ENV===p4.WEBGL_LEGACY&&(q=null),q?(h.createVertexArray=function(){return q.createVertexArrayOES()},h.bindVertexArray=function(h){return q.bindVertexArrayOES(h)},h.deleteVertexArray=function(h){return q.deleteVertexArrayOES(h)}):(this.hasVao=!1,h.createVertexArray=function(){return null},h.bindVertexArray=function(){return null},h.deleteVertexArray=function(){return null})}if(!h.vertexAttribDivisor){var tr=h.getExtension("ANGLE_instanced_arrays");tr?(h.vertexAttribDivisor=function(h,w){return tr.vertexAttribDivisorANGLE(h,w)},h.drawElementsInstanced=function(h,w,q,tn,ti){return tr.drawElementsInstancedANGLE(h,w,q,tn,ti)},h.drawArraysInstanced=function(h,w,q,tn){return tr.drawArraysInstancedANGLE(h,w,q,tn)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===w.webGLVersion||!!w.extensions.uint32ElementIndex},n.prototype.bind=function(h,w){w=w||this.renderer.shader.shader;var q=this.gl,tr=h.glVertexArrayObjects[this.CONTEXT_UID];tr||(this.managedGeometries[h.id]=h,h.disposeRunner.add(this),h.glVertexArrayObjects[this.CONTEXT_UID]=tr={});var tn=tr[w.program.id]||this.initGeometryVao(h,w.program);this._activeGeometry=h,this._activeVao!==tn&&(this._activeVao=tn,this.hasVao?q.bindVertexArray(tn):this.activateVao(h,w.program)),this.updateBuffers()},n.prototype.reset=function(){this.unbind()},n.prototype.updateBuffers=function(){for(var h=this._activeGeometry,w=this.gl,q=0;q<h.buffers.length;q++){var tr=h.buffers[q],tn=tr._glBuffers[this.CONTEXT_UID];if(tr._updateID!==tn.updateID){tn.updateID=tr._updateID;var ti=tr.index?w.ELEMENT_ARRAY_BUFFER:w.ARRAY_BUFFER;if(w.bindBuffer(ti,tn.buffer),this._boundBuffer=tn,tn.byteLength>=tr.data.byteLength)w.bufferSubData(ti,0,tr.data);else{var to=tr.static?w.STATIC_DRAW:w.DYNAMIC_DRAW;tn.byteLength=tr.data.byteLength,w.bufferData(ti,tr.data,to)}}}},n.prototype.checkCompatibility=function(h,w){var q=h.attributes,tr=w.attributeData;for(var tn in tr)if(!q[tn])throw Error('shader and geometry incompatible, geometry missing the "'+tn+'" attribute')},n.prototype.getSignature=function(h,w){var q=h.attributes,tr=w.attributeData,tn=["g",h.id];for(var ti in q)tr[ti]&&tn.push(ti);return tn.join("-")},n.prototype.initGeometryVao=function(h,w){this.checkCompatibility(h,w);var q=this.gl,tr=this.CONTEXT_UID,tn=this.getSignature(h,w),ti=h.glVertexArrayObjects[this.CONTEXT_UID],to=ti[tn];if(to)return ti[w.id]=to,to;var ts=h.buffers,tu=h.attributes,tl={},tc={};for(var tp in ts)tl[tp]=0,tc[tp]=0;for(var tp in tu)!tu[tp].size&&w.attributeData[tp]?tu[tp].size=w.attributeData[tp].size:tu[tp].size||console.warn("PIXI Geometry attribute '"+tp+"' size cannot be determined (likely the bound shader does not have the attribute)"),tl[tu[tp].buffer]+=tu[tp].size*dK[tu[tp].type];for(var tp in tu){var td=tu[tp],tm=td.size;void 0===td.stride&&(tl[td.buffer]===tm*dK[td.type]?td.stride=0:td.stride=tl[td.buffer]),void 0===td.start&&(td.start=tc[td.buffer],tc[td.buffer]+=tm*dK[td.type])}to=q.createVertexArray(),q.bindVertexArray(to);for(var ty=0;ty<ts.length;ty++){var tv=ts[ty];tv._glBuffers[tr]||(tv._glBuffers[tr]=new VO(q.createBuffer()),this.managedBuffers[tv.id]=tv,tv.disposeRunner.add(this)),tv._glBuffers[tr].refCount++}return this.activateVao(h,w),this._activeVao=to,ti[w.id]=to,ti[tn]=to,to},n.prototype.disposeBuffer=function(h,w){if(this.managedBuffers[h.id]){delete this.managedBuffers[h.id];var q=h._glBuffers[this.CONTEXT_UID],tr=this.gl;h.disposeRunner.remove(this),q&&(w||tr.deleteBuffer(q.buffer),delete h._glBuffers[this.CONTEXT_UID])}},n.prototype.disposeGeometry=function(h,w){if(this.managedGeometries[h.id]){delete this.managedGeometries[h.id];var q=h.glVertexArrayObjects[this.CONTEXT_UID],tr=this.gl,tn=h.buffers;if(h.disposeRunner.remove(this),q){for(var ti=0;ti<tn.length;ti++){var to=tn[ti]._glBuffers[this.CONTEXT_UID];to.refCount--,0!==to.refCount||w||this.disposeBuffer(tn[ti],w)}if(!w){for(var ts in q)if("g"===ts[0]){var tu=q[ts];this._activeVao===tu&&this.unbind(),tr.deleteVertexArray(tu)}}delete h.glVertexArrayObjects[this.CONTEXT_UID]}}},n.prototype.disposeAll=function(h){for(var w=Object.keys(this.managedGeometries),q=0;q<w.length;q++)this.disposeGeometry(this.managedGeometries[w[q]],h);w=Object.keys(this.managedBuffers);for(var q=0;q<w.length;q++)this.disposeBuffer(this.managedBuffers[w[q]],h)},n.prototype.activateVao=function(h,w){var q=this.gl,tr=this.CONTEXT_UID,tn=h.buffers,ti=h.attributes;h.indexBuffer&&q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,h.indexBuffer._glBuffers[tr].buffer);var to=null;for(var ts in ti){var tu=ti[ts],tl=tn[tu.buffer]._glBuffers[tr];if(w.attributeData[ts]){to!==tl&&(q.bindBuffer(q.ARRAY_BUFFER,tl.buffer),to=tl);var tc=w.attributeData[ts].location;if(q.enableVertexAttribArray(tc),q.vertexAttribPointer(tc,tu.size,tu.type||q.FLOAT,tu.normalized,tu.stride,tu.start),tu.instance){if(this.hasInstance)q.vertexAttribDivisor(tc,1);else throw Error("geometry error, GPU Instancing is not supported on this device")}}}},n.prototype.draw=function(h,w,q,tr){var tn=this.gl,ti=this._activeGeometry;if(ti.indexBuffer){var to=ti.indexBuffer.data.BYTES_PER_ELEMENT,ts=2===to?tn.UNSIGNED_SHORT:tn.UNSIGNED_INT;2===to||4===to&&this.canUseUInt32ElementIndex?ti.instanced?tn.drawElementsInstanced(h,w||ti.indexBuffer.data.length,ts,(q||0)*to,tr||1):tn.drawElements(h,w||ti.indexBuffer.data.length,ts,(q||0)*to):console.warn("unsupported index buffer type: uint32")}else ti.instanced?tn.drawArraysInstanced(h,q,w||ti.getSize(),tr||1):tn.drawArrays(h,q,w||ti.getSize());return this},n.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},n}(dd),dW=function(){function e(h){void 0===h&&(h=null),this.type=fy.NONE,this.autoDetect=!0,this.maskObject=h||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}return e.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=fy.NONE,this.autoDetect=!0),this._target=null},e.prototype.copyCountersOrReset=function(h){h?(this._stencilCounter=h._stencilCounter,this._scissorCounter=h._scissorCounter,this._scissorRect=h._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},e}();function h_(h,w,q){var tr=h.createShader(w);return h.shaderSource(tr,q),h.compileShader(tr),tr}function $m(h,w,q,tr){var tn=h_(h,h.VERTEX_SHADER,w),ti=h_(h,h.FRAGMENT_SHADER,q),to=h.createProgram();if(h.attachShader(to,tn),h.attachShader(to,ti),tr)for(var ts in tr)h.bindAttribLocation(to,tr[ts],ts);return h.linkProgram(to),h.getProgramParameter(to,h.LINK_STATUS)||(h.getShaderParameter(tn,h.COMPILE_STATUS)||(console.warn(w),console.error(h.getShaderInfoLog(tn))),h.getShaderParameter(ti,h.COMPILE_STATUS)||(console.warn(q),console.error(h.getShaderInfoLog(ti))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",h.getProgramParameter(to,h.VALIDATE_STATUS)),console.error("gl.getError()",h.getError()),""!==h.getProgramInfoLog(to)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",h.getProgramInfoLog(to)),h.deleteProgram(to),to=null),h.deleteShader(tn),h.deleteShader(ti),to}function zl(h){for(var w=Array(h),q=0;q<w.length;q++)w[q]=!1;return w}function Zm(h,w){switch(h){case"float":case"int":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*w);case"vec3":return new Float32Array(3*w);case"vec4":return new Float32Array(4*w);case"ivec2":return new Int32Array(2*w);case"ivec3":return new Int32Array(3*w);case"ivec4":return new Int32Array(4*w);case"bool":return!1;case"bvec2":return zl(2*w);case"bvec3":return zl(3*w);case"bvec4":return zl(4*w);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var dq={},dZ=dq;function Qm(){if(dZ===dq||dZ&&dZ.isContextLost()){var h=document.createElement("canvas"),w=void 0;lN.PREFER_ENV>=p4.WEBGL2&&(w=h.getContext("webgl2",{})),w||((w=h.getContext("webgl",{})||h.getContext("experimental-webgl",{}))?w.getExtension("WEBGL_draw_buffers"):w=null),dZ=w}return dZ}function f_(h,w,q){if("precision"!==h.substring(0,9)){var tr=w;return w===fg.HIGH&&q!==fg.HIGH&&(tr=fg.MEDIUM),"precision "+tr+` float;
`+h}return q!==fg.HIGH&&"precision highp"===h.substring(0,15)?h.replace("precision highp","precision mediump"):h}var dJ={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1},dQ=null,d$={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function d_(h,w){if(!dQ){var q=Object.keys(d$);dQ={};for(var tr=0;tr<q.length;++tr){var tn=q[tr];dQ[h[tn]]=d$[tn]}}return dQ[w]}var d0=[{test:function(h){return"float"===h.type&&1===h.size},code:function(h){return`
            if(uv["`+h+'"] !== ud["'+h+`"].value)
            {
                ud["`+h+'"].value = uv["'+h+`"]
                gl.uniform1f(ud["`+h+'"].location, uv["'+h+`"])
            }
            `}},{test:function(h){return("sampler2D"===h.type||"samplerCube"===h.type||"sampler2DArray"===h.type)&&1===h.size&&!h.isArray},code:function(h){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+h+`"], t);

            if(ud["`+h+`"].value !== t)
            {
                ud["`+h+`"].value = t;
                gl.uniform1i(ud["`+h+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(h,w){return"mat3"===h.type&&1===h.size&&void 0!==w.a},code:function(h){return`
            gl.uniformMatrix3fv(ud["`+h+'"].location, false, uv["'+h+`"].toArray(true));
            `}},{test:function(h,w){return"vec2"===h.type&&1===h.size&&void 0!==w.x},code:function(h){return`
                cv = ud["`+h+`"].value;
                v = uv["`+h+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+h+`"].location, v.x, v.y);
                }`}},{test:function(h){return"vec2"===h.type&&1===h.size},code:function(h){return`
                cv = ud["`+h+`"].value;
                v = uv["`+h+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+h+`"].location, v[0], v[1]);
                }
            `}},{test:function(h,w){return"vec4"===h.type&&1===h.size&&void 0!==w.width},code:function(h){return`
                cv = ud["`+h+`"].value;
                v = uv["`+h+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+h+`"].location, v.x, v.y, v.width, v.height)
                }`}},{test:function(h){return"vec4"===h.type&&1===h.size},code:function(h){return`
                cv = ud["`+h+`"].value;
                v = uv["`+h+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+h+`"].location, v[0], v[1], v[2], v[3])
                }`}}],d2={float:`
    if(cv !== v)
    {
        cv.v = v;
        gl.uniform1f(location, v)
    }`,vec2:`
    if(cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},d3={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"},d4=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`),d5=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,d6=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,d8=0,d7={},d9=function(){function e(h,w,q){void 0===q&&(q="pixi-shader"),this.id=d8++,this.vertexSrc=h||e.defaultVertexSrc,this.fragmentSrc=w||e.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(d7[q=q.replace(/\s+/g,"-")]?(d7[q]++,q+="-"+d7[q]):d7[q]=1,this.vertexSrc="#define SHADER_NAME "+q+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+q+`
`+this.fragmentSrc,this.vertexSrc=f_(this.vertexSrc,lN.PRECISION_VERTEX,fg.HIGH),this.fragmentSrc=f_(this.fragmentSrc,lN.PRECISION_FRAGMENT,function(){if(!gf){gf=fg.MEDIUM;var h=Qm();h&&h.getShaderPrecisionFormat&&(gf=h.getShaderPrecisionFormat(h.FRAGMENT_SHADER,h.HIGH_FLOAT).precision?fg.HIGH:fg.MEDIUM)}return gf}())),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}return e.prototype.extractData=function(h,w){var q=Qm();if(q){var tr=$m(q,h,w);this.attributeData=this.getAttributeData(tr,q),this.uniformData=this.getUniformData(tr,q),q.deleteProgram(tr)}else this.uniformData={},this.attributeData={}},e.prototype.getAttributeData=function(h,w){for(var q={},tr=[],tn=w.getProgramParameter(h,w.ACTIVE_ATTRIBUTES),ti=0;ti<tn;ti++){var to=w.getActiveAttrib(h,ti),ts=d_(w,to.type),tu={type:ts,name:to.name,size:dJ[ts],location:0};q[to.name]=tu,tr.push(tu)}tr.sort(function(h,w){return h.name>w.name?1:-1});for(var ti=0;ti<tr.length;ti++)tr[ti].location=ti;return q},e.prototype.getUniformData=function(h,w){for(var q={},tr=w.getProgramParameter(h,w.ACTIVE_UNIFORMS),tn=0;tn<tr;tn++){var ti=w.getActiveUniform(h,tn),to=ti.name.replace(/\[.*?\]$/,""),ts=ti.name.match(/\[.*?\]$/),tu=d_(w,ti.type);q[to]={type:tu,size:ti.size,isArray:ts,value:Zm(tu,ti.size)}}return q},Object.defineProperty(e,"defaultVertexSrc",{get:function(){return d6},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return d5},enumerable:!1,configurable:!0}),e.from=function(h,w,q){var tr=h+w,tn=pC[tr];return tn||(pC[tr]=tn=new e(h,w,q)),tn},e}(),_n=function(){function e(h,w){for(var q in this.program=h,w?w instanceof dD?this.uniformGroup=w:this.uniformGroup=new dD(w):this.uniformGroup=new dD({}),h.uniformData)this.uniformGroup.uniforms[q]instanceof Array&&(this.uniformGroup.uniforms[q]=new Float32Array(this.uniformGroup.uniforms[q]))}return e.prototype.checkUniformExists=function(h,w){if(w.uniforms[h])return!0;for(var q in w.uniforms){var tr=w.uniforms[q];if(tr.group&&this.checkUniformExists(h,tr))return!0}return!1},e.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(e.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),e.from=function(h,w,q){var tr=d9.from(h,w);return new e(tr,q)},e}(),_i=function(){function e(){this.data=0,this.blendMode=p8.NORMAL,this.polygonOffset=0,this.blend=!0}return Object.defineProperty(e.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(h){!!(1&this.data)!==h&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(h){!!(2&this.data)!==h&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(h){!!(4&this.data)!==h&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(h){!!(8&this.data)!==h&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(h){!!(16&this.data)!==h&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this._blendMode},set:function(h){this.blend=h!==p8.NONE,this._blendMode=h},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(h){this.offsets=!!h,this._polygonOffset=h},enumerable:!1,configurable:!0}),e.for2d=function(){var h=new e;return h.depthTest=!1,h.blend=!0,h},e}(),_o=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,_s=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,_a=function(h){function n(w,q,tr){var tn=this,ti=d9.from(w||n.defaultVertexSrc,q||n.defaultFragmentSrc);return(tn=h.call(this,ti,tr)||this).padding=0,tn.resolution=lN.FILTER_RESOLUTION,tn.enabled=!0,tn.autoFit=!0,tn.legacy=!!tn.program.attributeData.aTextureCoord,tn.state=new _i,tn}return Qe(n,h),n.prototype.apply=function(h,w,q,tr,tn){h.applyFilter(this,w,q,tr)},Object.defineProperty(n.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(h){this.state.blendMode=h},enumerable:!1,configurable:!0}),Object.defineProperty(n,"defaultVertexSrc",{get:function(){return _o},enumerable:!1,configurable:!0}),Object.defineProperty(n,"defaultFragmentSrc",{get:function(){return _s},enumerable:!1,configurable:!0}),n}(_n),_u=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,_l=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,_c=new fM,_h=function(){function e(h,w){this._texture=h,this.mapCoord=new fM,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof w>"u"?.5:w,this.isSimple=!1}return Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(h){this._texture=h,this._textureID=-1},enumerable:!1,configurable:!0}),e.prototype.multiplyUvs=function(h,w){void 0===w&&(w=h);for(var q=this.mapCoord,tr=0;tr<h.length;tr+=2){var tn=h[tr],ti=h[tr+1];w[tr]=tn*q.a+ti*q.c+q.tx,w[tr+1]=tn*q.b+ti*q.d+q.ty}return w},e.prototype.update=function(h){var w=this._texture;if(!w||!w.valid||!h&&this._textureID===w._updateID)return!1;this._textureID=w._updateID,this._updateID++;var q=w._uvs;this.mapCoord.set(q.x1-q.x0,q.y1-q.y0,q.x3-q.x0,q.y3-q.y0,q.x0,q.y0);var tr=w.orig,tn=w.trim;tn&&(_c.set(tr.width/tn.width,0,0,tr.height/tn.height,-tn.x/tn.width,-tn.y/tn.height),this.mapCoord.append(_c));var ti=w.baseTexture,to=this.uClampFrame,ts=this.clampMargin/ti.resolution,tu=this.clampOffset;return to[0]=(w._frame.x+ts+tu)/ti.width,to[1]=(w._frame.y+ts+tu)/ti.height,to[2]=(w._frame.x+w._frame.width-ts+tu)/ti.width,to[3]=(w._frame.y+w._frame.height-ts+tu)/ti.height,this.uClampOffset[0]=tu/ti.realWidth,this.uClampOffset[1]=tu/ti.realHeight,this.isSimple=w._frame.width===ti.width&&w._frame.height===ti.height&&0===w.rotate,!0},e}(),_p=function(h){function n(w){var q=this,tr=new fM;return q=h.call(this,_u,_l)||this,w.renderable=!1,q.maskSprite=w,q.maskMatrix=tr,q}return Qe(n,h),n.prototype.apply=function(h,w,q,tr){var tn=this.maskSprite,ti=tn._texture;ti.valid&&(ti.uvMatrix||(ti.uvMatrix=new _h(ti,0)),ti.uvMatrix.update(),this.uniforms.npmAlpha=ti.baseTexture.alphaMode?0:1,this.uniforms.mask=ti,this.uniforms.otherMatrix=h.calculateSpriteMatrix(this.maskMatrix,tn).prepend(ti.uvMatrix.mapCoord),this.uniforms.alpha=tn.worldAlpha,this.uniforms.maskClamp=ti.uvMatrix.uClampFrame,h.applyFilter(this,w,q,tr))},n}(_a),_f=function(h){function n(w){var q=h.call(this,w)||this;return q.enableScissor=!1,q.alphaMaskPool=[],q.maskDataPool=[],q.maskStack=[],q.alphaMaskIndex=0,q}return Qe(n,h),n.prototype.setMaskStack=function(h){this.maskStack=h,this.renderer.scissor.setMaskStack(h),this.renderer.stencil.setMaskStack(h)},n.prototype.push=function(h,w){var q=w;if(!q.isMaskData){var tr=this.maskDataPool.pop()||new dW;tr.pooled=!0,tr.maskObject=w,q=tr}switch(q.autoDetect&&this.detect(q),q.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),q._target=h,q.type){case fy.SCISSOR:this.maskStack.push(q),this.renderer.scissor.push(q);break;case fy.STENCIL:this.maskStack.push(q),this.renderer.stencil.push(q);break;case fy.SPRITE:q.copyCountersOrReset(null),this.pushSpriteMask(q),this.maskStack.push(q)}},n.prototype.pop=function(h){var w=this.maskStack.pop();if(!(!w||w._target!==h)){switch(w.type){case fy.SCISSOR:this.renderer.scissor.pop();break;case fy.STENCIL:this.renderer.stencil.pop(w.maskObject);break;case fy.SPRITE:this.popSpriteMask()}w.reset(),w.pooled&&this.maskDataPool.push(w)}},n.prototype.detect=function(h){var w=h.maskObject;if(w.isSprite){h.type=fy.SPRITE;return}if(h.type=fy.STENCIL,this.enableScissor&&w.isFastRect&&w.isFastRect()){var q=w.worldTransform,tr=Math.atan2(q.b,q.a),tn=Math.atan2(q.d,q.c);tn=((tn=Math.round(tn*(180/Math.PI)*100)-(tr=Math.round(tr*(180/Math.PI)*100)))%18e3+18e3)%18e3,0==(tr=(tr%9e3+9e3)%9e3)&&9e3===tn&&(h.type=fy.SCISSOR)}},n.prototype.pushSpriteMask=function(h){var w=h.maskObject,q=h._target,tr=this.alphaMaskPool[this.alphaMaskIndex];tr||(tr=this.alphaMaskPool[this.alphaMaskIndex]=[new _p(w)]),tr[0].resolution=this.renderer.resolution,tr[0].maskSprite=w;var tn=q.filterArea;q.filterArea=w.getBounds(!0),this.renderer.filter.push(q,tr),q.filterArea=tn,this.alphaMaskIndex++},n.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},n}(dd),_d=function(h){function n(w){var q=h.call(this,w)||this;return q.maskStack=[],q.glConst=0,q}return Qe(n,h),n.prototype.getStackLength=function(){return this.maskStack.length},n.prototype.setMaskStack=function(h){var w=this.renderer.gl,q=this.getStackLength();this.maskStack=h;var tr=this.getStackLength();tr!==q&&(0===tr?w.disable(this.glConst):(w.enable(this.glConst),this._useCurrent()))},n.prototype._useCurrent=function(){},n.prototype.destroy=function(){h.prototype.destroy.call(this),this.maskStack=null},n}(dd),__=function(h){function n(w){var q=h.call(this,w)||this;return q.glConst=WebGLRenderingContext.SCISSOR_TEST,q}return Qe(n,h),n.prototype.getStackLength=function(){var h=this.maskStack[this.maskStack.length-1];return h?h._scissorCounter:0},n.prototype.push=function(h){var w=h.maskObject;w.renderable=!0;var q=h._scissorRect,tr=w.getBounds(!0),tn=this.renderer.gl;w.renderable=!1,q?tr.fit(q):tn.enable(tn.SCISSOR_TEST),h._scissorCounter++,h._scissorRect=tr,this._useCurrent()},n.prototype.pop=function(){var h=this.renderer.gl;this.getStackLength()>0?this._useCurrent():h.disable(h.SCISSOR_TEST)},n.prototype._useCurrent=function(){var h=this.maskStack[this.maskStack.length-1]._scissorRect,w=this.renderer.renderTexture.current,q=this.renderer.projection,tr=q.transform,tn=q.sourceFrame,ti=q.destinationFrame,to=w?w.resolution:this.renderer.resolution,ts=(h.x-tn.x)*to+ti.x,tu=(h.y-tn.y)*to+ti.y,tl=h.width*to,tc=h.height*to;tr&&(ts+=tr.tx*to,tu+=tr.ty*to),w||(tu=this.renderer.height-tc-tu),this.renderer.gl.scissor(ts,tu,tl,tc)},n}(_d),_g=function(h){function n(w){var q=h.call(this,w)||this;return q.glConst=WebGLRenderingContext.STENCIL_TEST,q}return Qe(n,h),n.prototype.getStackLength=function(){var h=this.maskStack[this.maskStack.length-1];return h?h._stencilCounter:0},n.prototype.push=function(h){var w=h.maskObject,q=this.renderer.gl,tr=h._stencilCounter;0===tr&&(this.renderer.framebuffer.forceStencil(),q.enable(q.STENCIL_TEST)),h._stencilCounter++,q.colorMask(!1,!1,!1,!1),q.stencilFunc(q.EQUAL,tr,this._getBitwiseMask()),q.stencilOp(q.KEEP,q.KEEP,q.INCR),w.renderable=!0,w.render(this.renderer),this.renderer.batch.flush(),w.renderable=!1,this._useCurrent()},n.prototype.pop=function(h){var w=this.renderer.gl;0===this.getStackLength()?(w.disable(w.STENCIL_TEST),w.clear(w.STENCIL_BUFFER_BIT),w.clearStencil(0)):(w.colorMask(!1,!1,!1,!1),w.stencilOp(w.KEEP,w.KEEP,w.DECR),h.renderable=!0,h.render(this.renderer),this.renderer.batch.flush(),h.renderable=!1,this._useCurrent())},n.prototype._useCurrent=function(){var h=this.renderer.gl;h.colorMask(!0,!0,!0,!0),h.stencilFunc(h.EQUAL,this.getStackLength(),this._getBitwiseMask()),h.stencilOp(h.KEEP,h.KEEP,h.KEEP)},n.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},n}(_d),_y=function(h){function n(w){var q=h.call(this,w)||this;return q.destinationFrame=null,q.sourceFrame=null,q.defaultFrame=null,q.projectionMatrix=new fM,q.transform=null,q}return Qe(n,h),n.prototype.update=function(h,w,q,tr){this.destinationFrame=h||this.destinationFrame||this.defaultFrame,this.sourceFrame=w||this.sourceFrame||h,this.calculateProjection(this.destinationFrame,this.sourceFrame,q,tr),this.transform&&this.projectionMatrix.append(this.transform);var tn=this.renderer;tn.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,tn.globalUniforms.update(),tn.shader.shader&&tn.shader.syncUniformGroup(tn.shader.shader.uniforms.globals)},n.prototype.calculateProjection=function(h,w,q,tr){var tn=this.projectionMatrix,ti=tr?-1:1;tn.identity(),tn.a=1/w.width*2,tn.d=ti*(1/w.height*2),tn.tx=-1-w.x*tn.a,tn.ty=-ti-w.y*tn.d},n.prototype.setTransform=function(h){},n}(dd),_v=new fw,_b=new fw,_x=new fw,_T=function(h){function n(w){var q=h.call(this,w)||this;return q.clearColor=w._backgroundColorRgba,q.defaultMaskStack=[],q.current=null,q.sourceFrame=new fw,q.destinationFrame=new fw,q}return Qe(n,h),n.prototype.bind=function(h,w,q){void 0===h&&(h=null);var tr,tn,ti,to=this.renderer;this.current=h,h?(ti=(tr=h.baseTexture).resolution,w||(_v.width=h.frame.width,_v.height=h.frame.height,w=_v),q||(_b.x=h.frame.x,_b.y=h.frame.y,_b.width=w.width,_b.height=w.height,q=_b),tn=tr.framebuffer):(ti=to.resolution,w||(_v.width=to.screen.width,_v.height=to.screen.height,w=_v),q||((q=_v).width=w.width,q.height=w.height)),_x.x=q.x*ti,_x.y=q.y*ti,_x.width=q.width*ti,_x.height=q.height*ti,this.renderer.framebuffer.bind(tn,_x),this.renderer.projection.update(q,w,ti,!tn),h?this.renderer.mask.setMaskStack(tr.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(w),this.destinationFrame.copyFrom(q)},n.prototype.clear=function(h,w){h=this.current?h||this.current.baseTexture.clearColor:h||this.clearColor,this.renderer.framebuffer.clear(h[0],h[1],h[2],h[3],w)},n.prototype.resize=function(){this.bind(null)},n.prototype.reset=function(){this.bind(null)},n}(dd),_E=function(){function e(h,w){this.program=h,this.uniformData=w,this.uniformGroups={}}return e.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},e}(),_A=0,_O={textureCount:0},_L=function(h){function n(w){var q=h.call(this,w)||this;return q.destroyed=!1,q.systemCheck(),q.gl=null,q.shader=null,q.program=null,q.cache={},q.id=_A++,q}return Qe(n,h),n.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof gd)return gd;try{var h=Function("param1","param2","param3","return param1[param2] === param3;");gd=!0===h({a:"b"},"a","b")}catch{gd=!1}return gd}())throw Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},n.prototype.contextChange=function(h){this.gl=h,this.reset()},n.prototype.bind=function(h,w){h.uniforms.globals=this.renderer.globalUniforms;var q=h.program,tr=q.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(h);return this.shader=h,this.program!==q&&(this.program=q,this.gl.useProgram(tr.program)),w||(_O.textureCount=0,this.syncUniformGroup(h.uniformGroup,_O)),tr},n.prototype.setUniforms=function(h){var w=this.shader.program,q=w.glPrograms[this.renderer.CONTEXT_UID];w.syncUniforms(q.uniformData,h,this.renderer)},n.prototype.syncUniformGroup=function(h,w){var q=this.getglProgram();h.static&&h.dirtyId===q.uniformGroups[h.id]||(q.uniformGroups[h.id]=h.dirtyId,this.syncUniforms(h,q,w))},n.prototype.syncUniforms=function(h,w,q){(h.syncUniforms[this.shader.program.id]||this.createSyncGroups(h))(w.uniformData,h.uniforms,this.renderer,q)},n.prototype.createSyncGroups=function(h){var w=this.getSignature(h,this.shader.program.uniformData);return this.cache[w]||(this.cache[w]=function(h,w){var q=[`
        var v = null;
        var cv = null
        var t = 0;
        var gl = renderer.gl
    `];for(var tr in h.uniforms){var tn=w[tr];if(!tn){h.uniforms[tr].group&&q.push(`
                    renderer.shader.syncUniformGroup(uv["`+tr+`"], syncData);
                `);continue}for(var ti=h.uniforms[tr],to=!1,ts=0;ts<d0.length;ts++)if(d0[ts].test(tn,ti)){q.push(d0[ts].code(tr,ti)),to=!0;break}if(!to){var tu=(1===tn.size?d2:d3)[tn.type].replace("location",'ud["'+tr+'"].location');q.push(`
            cv = ud["`+tr+`"].value;
            v = uv["`+tr+`"];
            `+tu+";")}}return Function("ud","uv","renderer","syncData",q.join(`
`))}(h,this.shader.program.uniformData)),h.syncUniforms[this.shader.program.id]=this.cache[w],h.syncUniforms[this.shader.program.id]},n.prototype.getSignature=function(h,w){var q=h.uniforms,tr=[];for(var tn in q)tr.push(tn),w[tn]&&tr.push(w[tn].type);return tr.join("-")},n.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},n.prototype.generateShader=function(h){var w=this.gl,q=h.program,tr={};for(var tn in q.attributeData)tr[tn]=q.attributeData[tn].location;var ti=$m(w,q.vertexSrc,q.fragmentSrc,tr),to={};for(var tn in q.uniformData){var ts=q.uniformData[tn];to[tn]={location:w.getUniformLocation(ti,tn),value:Zm(ts.type,ts.size)}}var tu=new _E(ti,to);return q.glPrograms[this.renderer.CONTEXT_UID]=tu,tu},n.prototype.reset=function(){this.program=null,this.shader=null},n.prototype.destroy=function(){this.destroyed=!0},n}(dd),_S=function(h){function n(w){var q=h.call(this,w)||this;return q.gl=null,q.stateId=0,q.polygonOffset=0,q.blendMode=p8.NONE,q._blendEq=!1,q.map=[],q.map[0]=q.setBlend,q.map[1]=q.setOffset,q.map[2]=q.setCullFace,q.map[3]=q.setDepthTest,q.map[4]=q.setFrontFace,q.checks=[],q.defaultState=new _i,q.defaultState.blend=!0,q}return Qe(n,h),n.prototype.contextChange=function(h){var w;this.gl=h,this.blendModes=(void 0===w&&(w=[]),w[p8.NORMAL]=[h.ONE,h.ONE_MINUS_SRC_ALPHA],w[p8.ADD]=[h.ONE,h.ONE],w[p8.MULTIPLY]=[h.DST_COLOR,h.ONE_MINUS_SRC_ALPHA,h.ONE,h.ONE_MINUS_SRC_ALPHA],w[p8.SCREEN]=[h.ONE,h.ONE_MINUS_SRC_COLOR,h.ONE,h.ONE_MINUS_SRC_ALPHA],w[p8.OVERLAY]=[h.ONE,h.ONE_MINUS_SRC_ALPHA],w[p8.DARKEN]=[h.ONE,h.ONE_MINUS_SRC_ALPHA],w[p8.LIGHTEN]=[h.ONE,h.ONE_MINUS_SRC_ALPHA],w[p8.COLOR_DODGE]=[h.ONE,h.ONE_MINUS_SRC_ALPHA],w[p8.COLOR_BURN]=[h.ONE,h.ONE_MINUS_SRC_ALPHA],w[p8.HARD_LIGHT]=[h.ONE,h.ONE_MINUS_SRC_ALPHA],w[p8.SOFT_LIGHT]=[h.ONE,h.ONE_MINUS_SRC_ALPHA],w[p8.DIFFERENCE]=[h.ONE,h.ONE_MINUS_SRC_ALPHA],w[p8.EXCLUSION]=[h.ONE,h.ONE_MINUS_SRC_ALPHA],w[p8.HUE]=[h.ONE,h.ONE_MINUS_SRC_ALPHA],w[p8.SATURATION]=[h.ONE,h.ONE_MINUS_SRC_ALPHA],w[p8.COLOR]=[h.ONE,h.ONE_MINUS_SRC_ALPHA],w[p8.LUMINOSITY]=[h.ONE,h.ONE_MINUS_SRC_ALPHA],w[p8.NONE]=[0,0],w[p8.NORMAL_NPM]=[h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA,h.ONE,h.ONE_MINUS_SRC_ALPHA],w[p8.ADD_NPM]=[h.SRC_ALPHA,h.ONE,h.ONE,h.ONE],w[p8.SCREEN_NPM]=[h.SRC_ALPHA,h.ONE_MINUS_SRC_COLOR,h.ONE,h.ONE_MINUS_SRC_ALPHA],w[p8.SRC_IN]=[h.DST_ALPHA,h.ZERO],w[p8.SRC_OUT]=[h.ONE_MINUS_DST_ALPHA,h.ZERO],w[p8.SRC_ATOP]=[h.DST_ALPHA,h.ONE_MINUS_SRC_ALPHA],w[p8.DST_OVER]=[h.ONE_MINUS_DST_ALPHA,h.ONE],w[p8.DST_IN]=[h.ZERO,h.SRC_ALPHA],w[p8.DST_OUT]=[h.ZERO,h.ONE_MINUS_SRC_ALPHA],w[p8.DST_ATOP]=[h.ONE_MINUS_DST_ALPHA,h.SRC_ALPHA],w[p8.XOR]=[h.ONE_MINUS_DST_ALPHA,h.ONE_MINUS_SRC_ALPHA],w[p8.SUBTRACT]=[h.ONE,h.ONE,h.ONE,h.ONE,h.FUNC_REVERSE_SUBTRACT,h.FUNC_ADD],w),this.set(this.defaultState),this.reset()},n.prototype.set=function(h){if(h=h||this.defaultState,this.stateId!==h.data){for(var w=this.stateId^h.data,q=0;w;)1&w&&this.map[q].call(this,!!(h.data&1<<q)),w>>=1,q++;this.stateId=h.data}for(var q=0;q<this.checks.length;q++)this.checks[q](this,h)},n.prototype.forceState=function(h){h=h||this.defaultState;for(var w=0;w<this.map.length;w++)this.map[w].call(this,!!(h.data&1<<w));for(var w=0;w<this.checks.length;w++)this.checks[w](this,h);this.stateId=h.data},n.prototype.setBlend=function(h){this.updateCheck(n.checkBlendMode,h),this.gl[h?"enable":"disable"](this.gl.BLEND)},n.prototype.setOffset=function(h){this.updateCheck(n.checkPolygonOffset,h),this.gl[h?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},n.prototype.setDepthTest=function(h){this.gl[h?"enable":"disable"](this.gl.DEPTH_TEST)},n.prototype.setCullFace=function(h){this.gl[h?"enable":"disable"](this.gl.CULL_FACE)},n.prototype.setFrontFace=function(h){this.gl.frontFace(this.gl[h?"CW":"CCW"])},n.prototype.setBlendMode=function(h){if(h!==this.blendMode){this.blendMode=h;var w=this.blendModes[h],q=this.gl;2===w.length?q.blendFunc(w[0],w[1]):q.blendFuncSeparate(w[0],w[1],w[2],w[3]),6===w.length?(this._blendEq=!0,q.blendEquationSeparate(w[4],w[5])):this._blendEq&&(this._blendEq=!1,q.blendEquationSeparate(q.FUNC_ADD,q.FUNC_ADD))}},n.prototype.setPolygonOffset=function(h,w){this.gl.polygonOffset(h,w)},n.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},n.prototype.updateCheck=function(h,w){var q=this.checks.indexOf(h);w&&-1===q?this.checks.push(h):w||-1===q||this.checks.splice(q,1)},n.checkBlendMode=function(h,w){h.setBlendMode(w.blendMode)},n.checkPolygonOffset=function(h,w){h.setPolygonOffset(1,w.polygonOffset)},n}(dd),_I=function(h){function n(w){var q=h.call(this,w)||this;return q.count=0,q.checkCount=0,q.maxIdle=lN.GC_MAX_IDLE,q.checkCountMax=lN.GC_MAX_CHECK_COUNT,q.mode=lN.GC_MODE,q}return Qe(n,h),n.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==ff.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},n.prototype.run=function(){for(var h=this.renderer.texture,w=h.managedTextures,q=!1,tr=0;tr<w.length;tr++){var tn=w[tr];!tn.framebuffer&&this.count-tn.touched>this.maxIdle&&(h.destroyTexture(tn,!0),w[tr]=null,q=!0)}if(q){for(var ti=0,tr=0;tr<w.length;tr++)null!==w[tr]&&(w[ti++]=w[tr]);w.length=ti}},n.prototype.unload=function(h){var w,q=this.renderer.texture;!(null===(w=h._texture)||void 0===w)&&w.framebuffer&&q.destroyTexture(h._texture);for(var tr=h.children.length-1;tr>=0;tr--)this.unload(h.children[tr])},n}(dd),Jl=function(h){this.texture=h,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121},_P=function(h){function n(w){var q=h.call(this,w)||this;return q.boundTextures=[],q.currentLocation=-1,q.managedTextures=[],q._unknownBoundTextures=!1,q.unknownTexture=new f9,q}return Qe(n,h),n.prototype.contextChange=function(){var h=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var w=h.getParameter(h.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=w;for(var q=0;q<w;q++)this.boundTextures[q]=null;this.emptyTextures={};var tr=new Jl(h.createTexture());h.bindTexture(h.TEXTURE_2D,tr.texture),h.texImage2D(h.TEXTURE_2D,0,h.RGBA,1,1,0,h.RGBA,h.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[h.TEXTURE_2D]=tr,this.emptyTextures[h.TEXTURE_CUBE_MAP]=new Jl(h.createTexture()),h.bindTexture(h.TEXTURE_CUBE_MAP,this.emptyTextures[h.TEXTURE_CUBE_MAP].texture);for(var q=0;q<6;q++)h.texImage2D(h.TEXTURE_CUBE_MAP_POSITIVE_X+q,0,h.RGBA,1,1,0,h.RGBA,h.UNSIGNED_BYTE,null);h.texParameteri(h.TEXTURE_CUBE_MAP,h.TEXTURE_MAG_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_CUBE_MAP,h.TEXTURE_MIN_FILTER,h.LINEAR);for(var q=0;q<this.boundTextures.length;q++)this.bind(null,q)},n.prototype.bind=function(h,w){void 0===w&&(w=0);var q=this.gl;if(h){if((h=h.castToBaseTexture()).parentTextureArray)return;if(h.valid){h.touched=this.renderer.textureGC.count;var tr=h._glTextures[this.CONTEXT_UID]||this.initTexture(h);this.boundTextures[w]!==h&&(this.currentLocation!==w&&(this.currentLocation=w,q.activeTexture(q.TEXTURE0+w)),q.bindTexture(h.target,tr.texture)),tr.dirtyId!==h.dirtyId&&(this.currentLocation!==w&&(this.currentLocation=w,q.activeTexture(q.TEXTURE0+w)),this.updateTexture(h)),this.boundTextures[w]=h}}else this.currentLocation!==w&&(this.currentLocation=w,q.activeTexture(q.TEXTURE0+w)),q.bindTexture(q.TEXTURE_2D,this.emptyTextures[q.TEXTURE_2D].texture),this.boundTextures[w]=null},n.prototype.reset=function(){this._unknownBoundTextures=!0,this.currentLocation=-1;for(var h=0;h<this.boundTextures.length;h++)this.boundTextures[h]=this.unknownTexture},n.prototype.unbind=function(h){var w=this.gl,q=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var tr=0;tr<q.length;tr++)q[tr]===this.unknownTexture&&this.bind(null,tr)}for(var tr=0;tr<q.length;tr++)q[tr]===h&&(this.currentLocation!==tr&&(w.activeTexture(w.TEXTURE0+tr),this.currentLocation=tr),w.bindTexture(w.TEXTURE_2D,this.emptyTextures[h.target].texture),q[tr]=null)},n.prototype.initTexture=function(h){var w=new Jl(this.gl.createTexture());return w.dirtyId=-1,h._glTextures[this.CONTEXT_UID]=w,this.managedTextures.push(h),h.on("dispose",this.destroyTexture,this),w},n.prototype.initTextureType=function(h,w){if(w.internalFormat=h.format,w.type=h.type,2===this.webGLVersion){var q=this.renderer.gl;h.type===q.FLOAT&&h.format===q.RGBA&&(w.internalFormat=q.RGBA32F),h.type===fn.HALF_FLOAT&&(w.type=q.HALF_FLOAT),w.type===q.HALF_FLOAT&&h.format===q.RGBA&&(w.internalFormat=q.RGBA16F)}},n.prototype.updateTexture=function(h){var w=h._glTextures[this.CONTEXT_UID];if(w){var q=this.renderer;if(this.initTextureType(h,w),!(h.resource&&h.resource.upload(q,h,w))){var tr=h.realWidth,tn=h.realHeight,ti=q.gl;(w.width!==tr||w.height!==tn||w.dirtyId<0)&&(w.width=tr,w.height=tn,ti.texImage2D(h.target,0,w.internalFormat,tr,tn,0,h.format,w.type,null))}h.dirtyStyleId!==w.dirtyStyleId&&this.updateTextureStyle(h),w.dirtyId=h.dirtyId}},n.prototype.destroyTexture=function(h,w){var q=this.gl;if((h=h.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(h),q.deleteTexture(h._glTextures[this.CONTEXT_UID].texture),h.off("dispose",this.destroyTexture,this),delete h._glTextures[this.CONTEXT_UID],!w)){var tr=this.managedTextures.indexOf(h);-1!==tr&&yo(this.managedTextures,tr,1)}},n.prototype.updateTextureStyle=function(h){var w=h._glTextures[this.CONTEXT_UID];w&&(h.mipmap!==fa.POW2&&2===this.webGLVersion||h.isPowerOfTwo?w.mipmap=h.mipmap>=1:w.mipmap=!1,2===this.webGLVersion||h.isPowerOfTwo?w.wrapMode=h.wrapMode:w.wrapMode=fs.CLAMP,h.resource&&h.resource.style(this.renderer,h,w)||this.setStyle(h,w),w.dirtyStyleId=h.dirtyStyleId)},n.prototype.setStyle=function(h,w){var q=this.gl;if(w.mipmap&&q.generateMipmap(h.target),q.texParameteri(h.target,q.TEXTURE_WRAP_S,w.wrapMode),q.texParameteri(h.target,q.TEXTURE_WRAP_T,w.wrapMode),w.mipmap){q.texParameteri(h.target,q.TEXTURE_MIN_FILTER,h.scaleMode===fo.LINEAR?q.LINEAR_MIPMAP_LINEAR:q.NEAREST_MIPMAP_NEAREST);var tr=this.renderer.context.extensions.anisotropicFiltering;if(tr&&h.anisotropicLevel>0&&h.scaleMode===fo.LINEAR){var tn=Math.min(h.anisotropicLevel,q.getParameter(tr.MAX_TEXTURE_MAX_ANISOTROPY_EXT));q.texParameterf(h.target,tr.TEXTURE_MAX_ANISOTROPY_EXT,tn)}}else q.texParameteri(h.target,q.TEXTURE_MIN_FILTER,h.scaleMode===fo.LINEAR?q.LINEAR:q.NEAREST);q.texParameteri(h.target,q.TEXTURE_MAG_FILTER,h.scaleMode===fo.LINEAR?q.LINEAR:q.NEAREST)},n}(dd),_R=new fM,_N=function(h){function n(w){var q=h.call(this,p5.WEBGL,w)||this;return w=q.options,q.gl=null,q.CONTEXT_UID=0,q.runners={destroy:new f4("destroy"),contextChange:new f4("contextChange"),reset:new f4("reset"),update:new f4("update"),postrender:new f4("postrender"),prerender:new f4("prerender"),resize:new f4("resize")},q.globalUniforms=new dD({projectionMatrix:new fM},!0),q.addSystem(_f,"mask").addSystem(dX,"context").addSystem(_S,"state").addSystem(_L,"shader").addSystem(_P,"texture").addSystem(dY,"geometry").addSystem(dz,"framebuffer").addSystem(__,"scissor").addSystem(_g,"stencil").addSystem(_y,"projection").addSystem(_I,"textureGC").addSystem(dB,"filter").addSystem(_T,"renderTexture").addSystem(dG,"batch"),q.initPlugins(n.__plugins),w.context?q.context.initFromContext(w.context):q.context.initFromOptions({alpha:!!q.transparent,antialias:w.antialias,premultipliedAlpha:q.transparent&&"notMultiplied"!==q.transparent,stencil:!0,preserveDrawingBuffer:w.preserveDrawingBuffer,powerPreference:q.options.powerPreference}),q.renderingToScreen=!0,function(h){var w;if(!pR){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var q=[`
 %c %c %c PixiJS `+pN+" - ✰ "+h+` ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(w=window.console).log.apply(w,q)}else window.console&&window.console.log("PixiJS "+pN+" - "+h+" - http://www.pixijs.com/");pR=!0}}(2===q.context.webGLVersion?"WebGL 2":"WebGL 1"),q.resize(q.options.width,q.options.height),q}return Qe(n,h),n.create=function(h){if(typeof fb>"u"&&(fb=function(){var h={stencil:!0,failIfMajorPerformanceCaveat:lN.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!window.WebGLRenderingContext)return!1;var w=document.createElement("canvas"),q=w.getContext("webgl",h)||w.getContext("experimental-webgl",h),tr=!!(q&&q.getContextAttributes().stencil);if(q){var tn=q.getExtension("WEBGL_lose_context");tn&&tn.loseContext()}return q=null,tr}catch{return!1}}()),fb)return new n(h);throw Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},n.prototype.addSystem=function(h,w){w||(w=h.name);var q=new h(this);if(this[w])throw Error('Whoops! The name "'+w+'" is already in use');for(var tr in this[w]=q,this.runners)this.runners[tr].add(q);return this},n.prototype.render=function(h,w,q,tr,tn){if(this.renderingToScreen=!w,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=tr,!this.context.isLost){if(w||(this._lastObjectRendered=h),!tn){var ti=h.enableTempParent();h.updateTransform(),h.disableTempParent(ti)}this.renderTexture.bind(w),this.batch.currentRenderer.start(),(void 0!==q?q:this.clearBeforeRender)&&this.renderTexture.clear(),h.render(this),this.batch.currentRenderer.flush(),w&&w.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},n.prototype.resize=function(w,q){h.prototype.resize.call(this,w,q),this.runners.resize.emit(w,q)},n.prototype.reset=function(){return this.runners.reset.emit(),this},n.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},n.prototype.destroy=function(w){for(var q in this.runners.destroy.emit(),this.runners)this.runners[q].destroy();h.prototype.destroy.call(this,w),this.gl=null},n.registerPlugin=function(h,w){n.__plugins=n.__plugins||{},n.__plugins[h]=w},n}(function(h){function n(w,q){void 0===w&&(w=p5.UNKNOWN);var tr=h.call(this)||this;return(q=Object.assign({},lN.RENDER_OPTIONS,q)).roundPixels&&(lN.ROUND_PIXELS=q.roundPixels,Qn("5.0.0","Renderer roundPixels option is deprecated, please use PIXI.settings.ROUND_PIXELS",2)),tr.options=q,tr.type=w,tr.screen=new fw(0,0,q.width,q.height),tr.view=q.view||document.createElement("canvas"),tr.resolution=q.resolution||lN.RESOLUTION,tr.transparent=q.transparent,tr.autoDensity=q.autoDensity||q.autoResize||!1,tr.preserveDrawingBuffer=q.preserveDrawingBuffer,tr.clearBeforeRender=q.clearBeforeRender,tr._backgroundColor=0,tr._backgroundColorRgba=[0,0,0,0],tr._backgroundColorString="#000000",tr.backgroundColor=q.backgroundColor||tr._backgroundColor,tr._lastObjectRendered=null,tr.plugins={},tr}return Qe(n,h),n.prototype.initPlugins=function(h){for(var w in h)this.plugins[w]=new h[w](this)},Object.defineProperty(n.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),n.prototype.resize=function(h,w){this.screen.width=h,this.screen.height=w,this.view.width=h*this.resolution,this.view.height=w*this.resolution,this.autoDensity&&(this.view.style.width=h+"px",this.view.style.height=w+"px"),this.emit("resize",h,w)},n.prototype.generateTexture=function(h,w,q,tr){0===(tr=tr||h.getLocalBounds(null,!0)).width&&(tr.width=1),0===tr.height&&(tr.height=1);var tn=dA.create({width:0|tr.width,height:0|tr.height,scaleMode:w,resolution:q});return _R.tx=-tr.x,_R.ty=-tr.y,this.render(h,tn,!1,_R,!!h.parent),tn},n.prototype.destroy=function(h){for(var w in this.plugins)this.plugins[w].destroy(),this.plugins[w]=null;h&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.plugins=null,this.type=p5.UNKNOWN,this.view=null,this.screen=null,this._tempDisplayObjectParent=null,this.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(n.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(h){this._backgroundColor=h,this._backgroundColorString=Um(h),Uo(h,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),n}(lU)),_M=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,_k=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,wh=function(){this.texArray=null,this.blend=0,this.type=p7.TRIANGLES,this.start=0,this.size=0,this.data=null},_U=function(){function e(){this.elements=[],this.ids=[],this.count=0}return e.prototype.clear=function(){for(var h=0;h<this.count;h++)this.elements[h]=null;this.count=0},e}(),_C=function(){function e(h){this.rawBinaryData=new ArrayBuffer(h),this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(e.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),e.prototype.view=function(h){return this[h+"View"]},e.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},e.sizeOf=function(h){switch(h){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw Error(h+" isn't a valid view type")}},e}(),_D=function(h){function n(w){var q=h.call(this,w)||this;return q.shaderGenerator=null,q.geometryClass=null,q.vertexSize=null,q.state=_i.for2d(),q.size=4*lN.SPRITE_BATCH_SIZE,q._vertexCount=0,q._indexCount=0,q._bufferedElements=[],q._bufferedTextures=[],q._bufferSize=0,q._shader=null,q._packedGeometries=[],q._packedGeometryPoolSize=2,q._flushId=0,q._aBuffers={},q._iBuffers={},q.MAX_TEXTURES=1,q.renderer.on("prerender",q.onPrerender,q),w.runners.contextChange.add(q),q._dcIndex=0,q._aIndex=0,q._iIndex=0,q._attributeBuffer=null,q._indexBuffer=null,q._tempBoundTextures=[],q}return Qe(n,h),n.prototype.contextChange=function(){var h=this.renderer.gl;lN.PREFER_ENV===p4.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(h.getParameter(h.MAX_TEXTURE_IMAGE_UNITS),lN.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=function(h,w){if(0===h)throw Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var q=w.createShader(w.FRAGMENT_SHADER);;){var tr=d4.replace(/%forloop%/gi,function(h){for(var w="",q=0;q<h;++q)q>0&&(w+=`
else `),q<h-1&&(w+="if(test == "+q+".0){}");return w}(h));if(w.shaderSource(q,tr),w.compileShader(q),w.getShaderParameter(q,w.COMPILE_STATUS))break;h=h/2|0}return h}(this.MAX_TEXTURES,h)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var w=0;w<this._packedGeometryPoolSize;w++)this._packedGeometries[w]=new this.geometryClass;this.initFlushBuffers()},n.prototype.initFlushBuffers=function(){for(var h=n._drawCallPool,w=n._textureArrayPool,q=this.size/4,tr=Math.floor(q/this.MAX_TEXTURES)+1;h.length<q;)h.push(new wh);for(;w.length<tr;)w.push(new _U);for(var tn=0;tn<this.MAX_TEXTURES;tn++)this._tempBoundTextures[tn]=null},n.prototype.onPrerender=function(){this._flushId=0},n.prototype.render=function(h){h._texture.valid&&(this._vertexCount+h.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=h.vertexData.length/2,this._indexCount+=h.indices.length,this._bufferedTextures[this._bufferSize]=h._texture.baseTexture,this._bufferedElements[this._bufferSize++]=h)},n.prototype.buildTexturesAndDrawCalls=function(){var h=this._bufferedTextures,w=this.MAX_TEXTURES,q=n._textureArrayPool,tr=this.renderer.batch,tn=this._tempBoundTextures,ti=this.renderer.textureGC.count,to=++f9._globalBatch,ts=0,tu=q[0],tl=0;tr.copyBoundTextures(tn,w);for(var tc=0;tc<this._bufferSize;++tc){var tp=h[tc];h[tc]=null,tp._batchEnabled!==to&&(tu.count>=w&&(tr.boundArray(tu,tn,to,w),this.buildDrawCalls(tu,tl,tc),tl=tc,tu=q[++ts],++to),tp._batchEnabled=to,tp.touched=ti,tu.elements[tu.count++]=tp)}tu.count>0&&(tr.boundArray(tu,tn,to,w),this.buildDrawCalls(tu,tl,this._bufferSize),++ts,++to);for(var tc=0;tc<tn.length;tc++)tn[tc]=null;f9._globalBatch=to},n.prototype.buildDrawCalls=function(h,w,q){var tr=this._bufferedElements,tn=this._attributeBuffer,ti=this._indexBuffer,to=this.vertexSize,ts=n._drawCallPool,tu=this._dcIndex,tl=this._aIndex,tc=this._iIndex,tp=ts[tu];tp.start=this._iIndex,tp.texArray=h;for(var td=w;td<q;++td){var tm=tr[td],ty=pM[tm._texture.baseTexture.alphaMode?1:0][tm.blendMode];tr[td]=null,w<td&&tp.blend!==ty&&(tp.size=tc-tp.start,w=td,(tp=ts[++tu]).texArray=h,tp.start=tc),this.packInterleavedGeometry(tm,tn,ti,tl,tc),tl+=tm.vertexData.length/2*to,tc+=tm.indices.length,tp.blend=ty}w<q&&(tp.size=tc-tp.start,++tu),this._dcIndex=tu,this._aIndex=tl,this._iIndex=tc},n.prototype.bindAndClearTexArray=function(h){for(var w=this.renderer.texture,q=0;q<h.count;q++)w.bind(h.elements[q],h.ids[q]),h.elements[q]=null;h.count=0},n.prototype.updateGeometry=function(){var h=this._packedGeometries,w=this._attributeBuffer,q=this._indexBuffer;lN.CAN_UPLOAD_SAME_BUFFER?(h[this._flushId]._buffer.update(w.rawBinaryData),h[this._flushId]._indexBuffer.update(q),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,h[this._flushId]=new this.geometryClass),h[this._flushId]._buffer.update(w.rawBinaryData),h[this._flushId]._indexBuffer.update(q),this.renderer.geometry.bind(h[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},n.prototype.drawBatches=function(){for(var h=this._dcIndex,w=this.renderer,q=w.gl,tr=w.state,tn=n._drawCallPool,ti=null,to=0;to<h;to++){var ts=tn[to],tu=ts.texArray,tl=ts.type,tc=ts.size,tp=ts.start,td=ts.blend;ti!==tu&&(ti=tu,this.bindAndClearTexArray(tu)),this.state.blendMode=td,tr.set(this.state),q.drawElements(tl,tc,q.UNSIGNED_SHORT,2*tp)}},n.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},n.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.shader.bind(this._shader),lN.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},n.prototype.stop=function(){this.flush()},n.prototype.destroy=function(){for(var w=0;w<this._packedGeometryPoolSize;w++)this._packedGeometries[w]&&this._packedGeometries[w].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),h.prototype.destroy.call(this)},n.prototype.getAttributeBuffer=function(h){var w=xu(Math.ceil(h/8)),q=t_(w),tr=8*w;this._aBuffers.length<=q&&(this._iBuffers.length=q+1);var tn=this._aBuffers[tr];return tn||(this._aBuffers[tr]=tn=new _C(tr*this.vertexSize*4)),tn},n.prototype.getIndexBuffer=function(h){var w=xu(Math.ceil(h/12)),q=t_(w),tr=12*w;this._iBuffers.length<=q&&(this._iBuffers.length=q+1);var tn=this._iBuffers[q];return tn||(this._iBuffers[q]=tn=new Uint16Array(tr)),tn},n.prototype.packInterleavedGeometry=function(h,w,q,tr,tn){for(var ti=w.uint32View,to=w.float32View,ts=tr/this.vertexSize,tu=h.uvs,tl=h.indices,tc=h.vertexData,tp=h._texture.baseTexture._batchLocation,td=Math.min(h.worldAlpha,1),tm=td<1&&h._texture.baseTexture.alphaMode?Pf(h._tintRGB,td):h._tintRGB+(255*td<<24),ty=0;ty<tc.length;ty+=2)to[tr++]=tc[ty],to[tr++]=tc[ty+1],to[tr++]=tu[ty],to[tr++]=tu[ty+1],ti[tr++]=tm,to[tr++]=tp;for(var ty=0;ty<tl.length;ty++)q[tn++]=ts+tl[ty]},n._drawCallPool=[],n._textureArrayPool=[],n}(dj),_F=function(){function e(h,w){if(this.vertexSrc=h,this.fragTemplate=w,this.programCache={},this.defaultGroupCache={},0>w.indexOf("%count%"))throw Error('Fragment template must contain "%count%".');if(0>w.indexOf("%forloop%"))throw Error('Fragment template must contain "%forloop%".')}return e.prototype.generateShader=function(h){if(!this.programCache[h]){for(var w=new Int32Array(h),q=0;q<h;q++)w[q]=q;this.defaultGroupCache[h]=dD.from({uSamplers:w},!0);var tr=this.fragTemplate;tr=(tr=tr.replace(/%count%/gi,""+h)).replace(/%forloop%/gi,this.generateSampleSrc(h)),this.programCache[h]=new d9(this.vertexSrc,tr)}var tn={tint:new Float32Array([1,1,1,1]),translationMatrix:new fM,default:this.defaultGroupCache[h]};return new _n(this.programCache[h],tn)},e.prototype.generateSampleSrc=function(h){var w="";w+=`

`;for(var q=0;q<h;q++)q>0&&(w+=`
else `),q<h-1&&(w+="if(vTextureId < "+q+".5)"),w+=`
{
	color = texture2D(uSamplers[`+q+"], vTextureCoord);"+`
}`;return w+`

`},e}(),_B=function(h){function n(w){void 0===w&&(w=!1);var q=h.call(this)||this;return q._buffer=new dS(null,w,!1),q._indexBuffer=new dS(null,w,!0),q.addAttribute("aVertexPosition",q._buffer,2,!1,fn.FLOAT).addAttribute("aTextureCoord",q._buffer,2,!1,fn.FLOAT).addAttribute("aColor",q._buffer,4,!0,fn.UNSIGNED_BYTE).addAttribute("aTextureId",q._buffer,1,!0,fn.FLOAT).addIndex(q._indexBuffer),q}return Qe(n,h),n}(dM),_j=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,_G=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,_V=(function(){function e(){}return e.create=function(h){var w=Object.assign({vertex:_j,fragment:_G,geometryClass:_B,vertexSize:6},h),q=w.vertex,tr=w.fragment,tn=w.vertexSize,ti=w.geometryClass;return function(h){function u(w){var to=h.call(this,w)||this;return to.shaderGenerator=new _F(q,tr),to.geometryClass=ti,to.vertexSize=tn,to}return Qe(u,h),u}(_D)},Object.defineProperty(e,"defaultVertexSrc",{get:function(){return _j},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentTemplate",{get:function(){return _G},enumerable:!1,configurable:!0}),e})().create(),_X=function(){function e(h){var w,q=this;h=Object.assign({forceCanvas:!1},h),this.renderer=(w=h,_N.create(w)),this.stage=new fK,e._plugins.forEach(function(w){w.init.call(q,h)})}return e.registerPlugin=function(h){e._plugins.push(h)},e.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(e.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),e.prototype.destroy=function(h,w){var q=this,tr=e._plugins.slice(0);tr.reverse(),tr.forEach(function(h){h.destroy.call(q)}),this.stage.destroy(w),this.stage=null,this.renderer.destroy(h),this.renderer=null},e}();_X._plugins=[];var _H=function(){function e(){}return e.init=function(h){var w=this;Object.defineProperty(this,"resizeTo",{set:function(h){window.removeEventListener("resize",this.queueResize),this._resizeTo=h,h&&(window.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){w._resizeTo&&(w.cancelResize(),w._resizeId=requestAnimationFrame(function(){return w.resize()}))},this.cancelResize=function(){w._resizeId&&(cancelAnimationFrame(w._resizeId),w._resizeId=null)},this.resize=function(){if(w._resizeTo){if(w.cancelResize(),w._resizeTo===window)h=window.innerWidth,q=window.innerHeight;else{var h,q,tr=w._resizeTo,tn=tr.clientWidth,ti=tr.clientHeight;h=tn,q=ti}w.renderer.resize(h,q)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=h.resizeTo||null},e.destroy=function(){this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},e}();_X.registerPlugin(_H);/*!
 * @pixi/extract - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var _z=new fw,_K=function(){function e(h){this.renderer=h,h.extract=this}return e.prototype.image=function(h,w,q){var tr=new Image;return tr.src=this.base64(h,w,q),tr},e.prototype.base64=function(h,w,q){return this.canvas(h).toDataURL(w,q)},e.prototype.canvas=function(h){var w,q,tr,tn=this.renderer,ti=!1,to=!1;h&&(h instanceof dA?tr=h:(tr=this.renderer.generateTexture(h),to=!0)),tr?(w=tr.baseTexture.resolution,q=tr.frame,ti=!1,tn.renderTexture.bind(tr)):(w=this.renderer.resolution,ti=!0,(q=_z).width=this.renderer.width,q.height=this.renderer.height,tn.renderTexture.bind(null));var ts=Math.floor(q.width*w+1e-4),tu=Math.floor(q.height*w+1e-4),tl=new pB(ts,tu,1),tc=new Uint8Array(4*ts*tu),tp=tn.gl;tp.readPixels(q.x*w,q.y*w,ts,tu,tp.RGBA,tp.UNSIGNED_BYTE,tc);var td=tl.context.getImageData(0,0,ts,tu);if(e.arrayPostDivide(tc,td.data),tl.context.putImageData(td,0,0),ti){var tm=new pB(tl.width,tl.height,1);tm.context.scale(1,-1),tm.context.drawImage(tl.canvas,0,-tu),tl.destroy(),tl=tm}return to&&tr.destroy(!0),tl.canvas},e.prototype.pixels=function(h){var w,q,tr,tn=this.renderer,ti=!1;h&&(h instanceof dA?tr=h:(tr=this.renderer.generateTexture(h),ti=!0)),tr?(w=tr.baseTexture.resolution,q=tr.frame,tn.renderTexture.bind(tr)):(w=tn.resolution,(q=_z).width=tn.width,q.height=tn.height,tn.renderTexture.bind(null));var to=q.width*w,ts=q.height*w,tu=new Uint8Array(4*to*ts),tl=tn.gl;return tl.readPixels(q.x*w,q.y*w,to,ts,tl.RGBA,tl.UNSIGNED_BYTE,tu),ti&&tr.destroy(!0),e.arrayPostDivide(tu,tu),tu},e.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},e.arrayPostDivide=function(h,w){for(var q=0;q<h.length;q+=4){var tr=w[q+3]=h[q+3];0!==tr?(w[q]=Math.round(Math.min(255*h[q]/tr,255)),w[q+1]=Math.round(Math.min(255*h[q+1]/tr,255)),w[q+2]=Math.round(Math.min(255*h[q+2]/tr,255))):(w[q]=h[q],w[q+1]=h[q+1],w[q+2]=h[q+2])}},e}();let _Y=ku((h,w={})=>{if(!h)return;let q={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?))?((((?:[^?#/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@/]*@)([^:/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#/]*\.[^?#/.]+(?:[?#]|$)))*\/?)?([^?#/]*))(?:\?([^#]*))?(?:#(.*))?)/}},tr=q.parser[w.strictMode?"strict":"loose"].exec(h),tn={},ti=14;for(;ti--;)tn[q.key[ti]]=tr[ti]||"";return tn[q.q.name]={},tn[q.key[12]].replace(q.q.parser,function(h,w,tr){w&&(tn[q.q.name][w]=tr)}),tn});let Vs=class Vs{constructor(h,w=!1,q){this._fn=h,this._once=w,this._thisArg=q,this._next=this._prev=this._owner=null}detach(){return null!==this._owner&&(this._owner.detach(this),!0)}};function b_(h,w){return h._head?(h._tail._next=w,w._prev=h._tail):h._head=w,h._tail=w,w._owner=h,w}let Pn=class Pn{constructor(){this._head=this._tail=void 0}handlers(h=!1){let w=this._head;if(h)return!!w;let q=[];for(;w;)q.push(w),w=w._next;return q}has(h){if(!(h instanceof Vs))throw Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return h._owner===this}dispatch(){let h=this._head;if(!h)return!1;for(;h;)h._once&&this.detach(h),h._fn.apply(h._thisArg,arguments),h=h._next;return!0}add(h,w=null){if("function"!=typeof h)throw Error("MiniSignal#add(): First arg must be a Function.");return b_(this,new Vs(h,!1,w))}once(h,w=null){if("function"!=typeof h)throw Error("MiniSignal#once(): First arg must be a Function.");return b_(this,new Vs(h,!0,w))}detach(h){if(!(h instanceof Vs))throw Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return h._owner!==this||(h._prev&&(h._prev._next=h._next),h._next&&(h._next._prev=h._prev),h===this._head?(this._head=h._next,null===h._next&&(this._tail=null)):h===this._tail&&(this._tail=h._prev,this._tail._next=null),h._owner=null),this}detachAll(){let h=this._head;if(!h)return this;for(this._head=this._tail=null;h;)h._owner=null,h=h._next;return this}};/*!
 * resource-loader - v3.0.1
 * https://github.com/pixijs/pixi-sound
 * Compiled Tue, 02 Jul 2019 14:06:18 UTC
 *
 * resource-loader is licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license
 */function mi(){}function T_(h,w,q,tr){var tn=0,ti=h.length;!function a(to){if(to||tn===ti){q&&q(to);return}tr?setTimeout(function(){w(h[tn++],a)},1):w(h[tn++],a)}()}var _W={};function A_(h,w){for(var q=0;q<w.length;q++){var tr=w[q];tr.enumerable=tr.enumerable||!1,tr.configurable=!0,"value"in tr&&(tr.writable=!0),Object.defineProperty(h,tr.key,tr)}}function i0(h,w,q){return w&&A_(h.prototype,w),q&&A_(h,q),h}var _q=!!(window.XDomainRequest&&!("withCredentials"in new XMLHttpRequest)),_Z=null;function zL(){}var _J=function(){function e(h,w,q){if("string"!=typeof h||"string"!=typeof w)throw Error("Both name and url are required for constructing a resource.");q=q||{},this._flags=0,this._setFlag(e.STATUS_FLAGS.DATA_URL,0===w.indexOf("data:")),this.name=h,this.url=w,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===q.crossOrigin?"anonymous":q.crossOrigin,this.timeout=q.timeout||0,this.loadType=q.loadType||this._determineLoadType(),this.xhrType=q.xhrType,this.metadata=q.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=e.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=zL,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new Pn,this.onProgress=new Pn,this.onComplete=new Pn,this.onAfterMiddleware=new Pn}e.setExtensionLoadType=function(h,w){w_(e._loadTypeMap,h,w)},e.setExtensionXhrType=function(h,w){w_(e._xhrTypeMap,h,w)};var h=e.prototype;return h.complete=function(){this._clearEvents(),this._finish()},h.abort=function(h){if(!this.error){if(this.error=Error(h),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data){if(this.data.src)this.data.src=e.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild)}this._finish()}},h.load=function(h){var w=this;if(!this.isLoading){if(this.isComplete){h&&setTimeout(function(){return h(w)},1);return}switch(h&&this.onComplete.once(h),this._setFlag(e.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(!1===this.crossOrigin||"string"!=typeof this.crossOrigin)&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case e.LOAD_TYPE.IMAGE:this.type=e.TYPE.IMAGE,this._loadElement("image");break;case e.LOAD_TYPE.AUDIO:this.type=e.TYPE.AUDIO,this._loadSourceElement("audio");break;case e.LOAD_TYPE.VIDEO:this.type=e.TYPE.VIDEO,this._loadSourceElement("video");break;case e.LOAD_TYPE.XHR:default:_q&&this.crossOrigin?this._loadXdr():this._loadXhr()}}},h._hasFlag=function(h){return(this._flags&h)!=0},h._setFlag=function(h,w){this._flags=w?this._flags|h:this._flags&~h},h._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},h._finish=function(){if(this.isComplete)throw Error("Complete called again for an already completed resource.");this._setFlag(e.STATUS_FLAGS.COMPLETE,!0),this._setFlag(e.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},h._loadElement=function(h){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===h&&"u">typeof window.Image?this.data=new Image:this.data=document.createElement(h),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},h._loadSourceElement=function(h){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===h&&"u">typeof window.Audio?this.data=new Audio:this.data=document.createElement(h),null===this.data){this.abort("Unsupported element: "+h);return}if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource){if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var w=this.metadata.mimeType,q=0;q<this.url.length;++q)this.data.appendChild(this._createSource(h,this.url[q],Array.isArray(w)?w[q]:w));else{var tr=this.metadata.mimeType;this.data.appendChild(this._createSource(h,this.url,Array.isArray(tr)?tr[0]:tr))}}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},h._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var h=this.xhr=new XMLHttpRequest;h.open("GET",this.url,!0),h.timeout=this.timeout,this.xhrType===e.XHR_RESPONSE_TYPE.JSON||this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT?h.responseType=e.XHR_RESPONSE_TYPE.TEXT:h.responseType=this.xhrType,h.addEventListener("error",this._boundXhrOnError,!1),h.addEventListener("timeout",this._boundXhrOnTimeout,!1),h.addEventListener("abort",this._boundXhrOnAbort,!1),h.addEventListener("progress",this._boundOnProgress,!1),h.addEventListener("load",this._boundXhrOnLoad,!1),h.send()},h._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var h=this.xhr=new XDomainRequest;h.timeout=this.timeout||5e3,h.onerror=this._boundXhrOnError,h.ontimeout=this._boundXhrOnTimeout,h.onprogress=this._boundOnProgress,h.onload=this._boundXhrOnLoad,h.open("GET",this.url,!0),setTimeout(function(){return h.send()},1)},h._createSource=function(h,w,q){q||(q=h+"/"+this._getExtension(w));var tr=document.createElement("source");return tr.src=w,tr.type=q,tr},h._onError=function(h){this.abort("Failed to load element using: "+h.target.nodeName)},h._onProgress=function(h){h&&h.lengthComputable&&this.onProgress.dispatch(this,h.loaded/h.total)},h._onTimeout=function(){this.abort("Load timed out.")},h._xhrOnError=function(){var h=this.xhr;this.abort(ec(h)+" Request failed. Status: "+h.status+', text: "'+h.statusText+'"')},h._xhrOnTimeout=function(){var h=this.xhr;this.abort(ec(h)+" Request timed out.")},h._xhrOnAbort=function(){var h=this.xhr;this.abort(ec(h)+" Request was aborted by the user.")},h._xhrOnLoad=function(){var h=this.xhr,w="",q=typeof h.status>"u"?200:h.status;if((""===h.responseType||"text"===h.responseType||typeof h.responseType>"u")&&(w=h.responseText),0===q&&(w.length>0||h.responseType===e.XHR_RESPONSE_TYPE.BUFFER)?q=200:1223===q&&(q=204),(q/100|0)==2){if(this.xhrType===e.XHR_RESPONSE_TYPE.TEXT)this.data=w,this.type=e.TYPE.TEXT;else if(this.xhrType===e.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(w),this.type=e.TYPE.JSON}catch(h){this.abort("Error trying to parse loaded json: "+h);return}else if(this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var tr=new DOMParser;this.data=tr.parseFromString(w,"text/xml")}else{var tn=document.createElement("div");tn.innerHTML=w,this.data=tn}this.type=e.TYPE.XML}catch(h){this.abort("Error trying to parse loaded xml: "+h);return}else this.data=h.response||w}else{this.abort("["+h.status+"] "+h.statusText+": "+h.responseURL);return}this.complete()},h._determineCrossOrigin=function(h,w){if(0===h.indexOf("data:"))return"";if(window.origin!==window.location.origin)return"anonymous";w=w||window.location,_Z||(_Z=document.createElement("a")),_Z.href=h;var q=!(h=_Y(_Z.href,{strictMode:!0})).port&&""===w.port||h.port===w.port,tr=h.protocol?h.protocol+":":"";return h.host===w.hostname&&q&&tr===w.protocol?"":"anonymous"},h._determineXhrType=function(){return e._xhrTypeMap[this.extension]||e.XHR_RESPONSE_TYPE.TEXT},h._determineLoadType=function(){return e._loadTypeMap[this.extension]||e.LOAD_TYPE.XHR},h._getExtension=function(){var h=this.url,w="";if(this.isDataUrl){var q=h.indexOf("/");w=h.substring(q+1,h.indexOf(";",q))}else{var tr=h.indexOf("?"),tn=h.indexOf("#"),ti=Math.min(tr>-1?tr:h.length,tn>-1?tn:h.length);w=(h=h.substring(0,ti)).substring(h.lastIndexOf(".")+1)}return w.toLowerCase()},h._getMimeFromXhrType=function(h){switch(h){case e.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case e.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case e.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case e.XHR_RESPONSE_TYPE.JSON:return"application/json";case e.XHR_RESPONSE_TYPE.DEFAULT:case e.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},i0(e,[{key:"isDataUrl",get:function(){return this._hasFlag(e.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(e.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(e.STATUS_FLAGS.LOADING)}}]),e}();function w_(h,w,q){w&&0===w.indexOf(".")&&(w=w.substring(1)),w&&(h[w]=q)}function ec(h){return h.toString().replace("object ","")}_J.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},_J.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},_J.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},_J.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},_J._loadTypeMap={gif:_J.LOAD_TYPE.IMAGE,png:_J.LOAD_TYPE.IMAGE,bmp:_J.LOAD_TYPE.IMAGE,jpg:_J.LOAD_TYPE.IMAGE,jpeg:_J.LOAD_TYPE.IMAGE,tif:_J.LOAD_TYPE.IMAGE,tiff:_J.LOAD_TYPE.IMAGE,webp:_J.LOAD_TYPE.IMAGE,tga:_J.LOAD_TYPE.IMAGE,svg:_J.LOAD_TYPE.IMAGE,"svg+xml":_J.LOAD_TYPE.IMAGE,mp3:_J.LOAD_TYPE.AUDIO,ogg:_J.LOAD_TYPE.AUDIO,wav:_J.LOAD_TYPE.AUDIO,mp4:_J.LOAD_TYPE.VIDEO,webm:_J.LOAD_TYPE.VIDEO},_J._xhrTypeMap={xhtml:_J.XHR_RESPONSE_TYPE.DOCUMENT,html:_J.XHR_RESPONSE_TYPE.DOCUMENT,htm:_J.XHR_RESPONSE_TYPE.DOCUMENT,xml:_J.XHR_RESPONSE_TYPE.DOCUMENT,tmx:_J.XHR_RESPONSE_TYPE.DOCUMENT,svg:_J.XHR_RESPONSE_TYPE.DOCUMENT,tsx:_J.XHR_RESPONSE_TYPE.DOCUMENT,gif:_J.XHR_RESPONSE_TYPE.BLOB,png:_J.XHR_RESPONSE_TYPE.BLOB,bmp:_J.XHR_RESPONSE_TYPE.BLOB,jpg:_J.XHR_RESPONSE_TYPE.BLOB,jpeg:_J.XHR_RESPONSE_TYPE.BLOB,tif:_J.XHR_RESPONSE_TYPE.BLOB,tiff:_J.XHR_RESPONSE_TYPE.BLOB,webp:_J.XHR_RESPONSE_TYPE.BLOB,tga:_J.XHR_RESPONSE_TYPE.BLOB,json:_J.XHR_RESPONSE_TYPE.JSON,text:_J.XHR_RESPONSE_TYPE.TEXT,txt:_J.XHR_RESPONSE_TYPE.TEXT,ttf:_J.XHR_RESPONSE_TYPE.BUFFER,otf:_J.XHR_RESPONSE_TYPE.BUFFER},_J.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";var _Q=window.URL||window.webkitURL,_$=/(#[\w-]+)?$/,_1=function(){function e(h,w){var q=this;void 0===h&&(h=""),void 0===w&&(w=10),this.baseUrl=h,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(h,w){return q._loadResource(h,w)},this._queue=function(h,w){if(null==w)w=1;else if(0===w)throw Error("Concurrency must not be zero");var q=0,tr={_tasks:[],concurrency:w,saturated:mi,unsaturated:mi,buffer:w/4,empty:mi,drain:mi,error:mi,started:!1,paused:!1,push:function(h,w){i(h,!1,w)},kill:function(){q=0,tr.drain=mi,tr.started=!1,tr._tasks=[]},unshift:function(h,w){i(h,!0,w)},process:function(){for(;!tr.paused&&q<tr.concurrency&&tr._tasks.length;){var w=tr._tasks.shift();0===tr._tasks.length&&tr.empty(),(q+=1)===tr.concurrency&&tr.saturated(),h(w.data,function(h){return function(){if(null===h)throw Error("Callback was already called.");var w=h;h=null,w.apply(this,arguments)}}(function(h){return function(){q-=1,h.callback.apply(h,arguments),null!=arguments[0]&&tr.error(arguments[0],h.data),q<=tr.concurrency-tr.buffer&&tr.unsaturated(),tr.idle()&&tr.drain(),tr.process()}}(w)))}},length:function(){return tr._tasks.length},running:function(){return q},idle:function(){return tr._tasks.length+q===0},pause:function(){!0!==tr.paused&&(tr.paused=!0)},resume:function(){if(!1!==tr.paused){tr.paused=!1;for(var h=1;h<=tr.concurrency;h++)tr.process()}}};function i(h,w,q){if(null!=q&&"function"!=typeof q)throw Error("task callback must be a function");if(tr.started=!0,null==h&&tr.idle()){setTimeout(function(){return tr.drain()},1);return}var tn={data:h,callback:"function"==typeof q?q:mi};w?tr._tasks.unshift(tn):tr._tasks.push(tn),setTimeout(function(){return tr.process()},1)}return tr}(this._boundLoadResource,w),this._queue.pause(),this.resources={},this.onProgress=new Pn,this.onError=new Pn,this.onLoad=new Pn,this.onStart=new Pn,this.onComplete=new Pn;for(var tr=0;tr<e._defaultBeforeMiddleware.length;++tr)this.pre(e._defaultBeforeMiddleware[tr]);for(var tn=0;tn<e._defaultAfterMiddleware.length;++tn)this.use(e._defaultAfterMiddleware[tn])}var h=e.prototype;return h.add=function(h,w,q,tr){if(Array.isArray(h)){for(var tn=0;tn<h.length;++tn)this.add(h[tn]);return this}if("object"==typeof h&&(tr=w||h.callback||h.onComplete,q=h,w=h.url,h=h.name||h.key||h.url),"string"!=typeof w&&(tr=q,q=w,w=h),"string"!=typeof w)throw Error("No url passed to add resource to loader.");if("function"==typeof q&&(tr=q,q=null),this.loading&&(!q||!q.parentResource))throw Error("Cannot add resources while the loader is running.");if(this.resources[h])throw Error('Resource named "'+h+'" already exists.');if(w=this._prepareUrl(w),this.resources[h]=new _J(h,w,q),"function"==typeof tr&&this.resources[h].onAfterMiddleware.once(tr),this.loading){for(var ti=q.parentResource,to=[],ts=0;ts<ti.children.length;++ts)ti.children[ts].isComplete||to.push(ti.children[ts]);var tu=ti.progressChunk*(to.length+1)/(to.length+2);ti.children.push(this.resources[h]),ti.progressChunk=tu;for(var tl=0;tl<to.length;++tl)to[tl].progressChunk=tu;this.resources[h].progressChunk=tu}return this._queue.push(this.resources[h]),this},h.pre=function(h){return this._beforeMiddleware.push(h),this},h.use=function(h){return this._afterMiddleware.push(h),this},h.reset=function(){for(var h in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var w=this.resources[h];w._onLoadBinding&&w._onLoadBinding.detach(),w.isLoading&&w.abort()}return this.resources={},this},h.load=function(h){if("function"==typeof h&&this.onComplete.once(h),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var w=this._queue._tasks.length,q=100/w,tr=0;tr<this._queue._tasks.length;++tr)this._queue._tasks[tr].data.progressChunk=q;this._onStart(),this._queue.resume()}return this},h._prepareUrl=function(h){var w,q=_Y(h,{strictMode:!0});if(w=q.protocol||!q.path||0===h.indexOf("//")?h:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==h.charAt(0)?this.baseUrl+"/"+h:this.baseUrl+h,this.defaultQueryString){var tr=_$.exec(w)[0];-1!==(w=w.substr(0,w.length-tr.length)).indexOf("?")?w+="&"+this.defaultQueryString:w+="?"+this.defaultQueryString,w+=tr}return w},h._loadResource=function(h,w){var q=this;h._dequeue=w,T_(this._beforeMiddleware,function(w,tr){w.call(q,h,function(){tr(h.isComplete?{}:null)})},function(){h.isComplete?q._onLoad(h):(h._onLoadBinding=h.onComplete.once(q._onLoad,q),h.load())},!0)},h._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},h._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},h._onLoad=function(h){var w=this;h._onLoadBinding=null,this._resourcesParsing.push(h),h._dequeue(),T_(this._afterMiddleware,function(q,tr){q.call(w,h,tr)},function(){h.onAfterMiddleware.dispatch(h),w.progress=Math.min(100,w.progress+h.progressChunk),w.onProgress.dispatch(w,h),h.error?w.onError.dispatch(h.error,w,h):w.onLoad.dispatch(w,h),w._resourcesParsing.splice(w._resourcesParsing.indexOf(h),1),w._queue.idle()&&0===w._resourcesParsing.length&&w._onComplete()},!0)},i0(e,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(h){this._queue.concurrency=h}}]),e}();_1._defaultBeforeMiddleware=[],_1._defaultAfterMiddleware=[],_1.pre=function(h){return _1._defaultBeforeMiddleware.push(h),_1},_1.use=function(h){return _1._defaultAfterMiddleware.push(h),_1};/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Lh=function(h,w){return(Lh=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,w){h.__proto__=w}||function(h,w){for(var q in w)w.hasOwnProperty(q)&&(h[q]=w[q])})(h,w)},_2=function(){function e(){}return e.use=function(h,w){h.data&&h.type===_J.TYPE.IMAGE&&(h.texture=dE.fromLoader(h.data,h.url,h.name)),w()},e}(),_3=function(h){function n(w,q){for(var tr=h.call(this,w,q)||this,tn=0;tn<n._plugins.length;++tn){var ti=n._plugins[tn],to=ti.pre,ts=ti.use;to&&tr.pre(to),ts&&tr.use(ts)}return tr._protected=!1,tr}return!function(h,w){function t(){this.constructor=h}Lh(h,w),h.prototype=null===w?Object.create(w):(t.prototype=w.prototype,new t)}(n,h),n.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(n,"shared",{get:function(){var h=n._shared;return h||((h=new n)._protected=!0,n._shared=h),h},enumerable:!1,configurable:!0}),n.registerPlugin=function(h){return n._plugins.push(h),h.add&&h.add(),n},n._plugins=[],n}(_1);_3.registerPlugin({use:{caching:function(h,w){var q=this;_W[h.url]?(h.data=_W[h.url],h.complete()):h.onComplete.once(function(){return _W[q.url]=q.data}),w()},parsing:function(h,w){if(!h.data){w();return}if(h.xhr&&h.xhrType===_J.XHR_RESPONSE_TYPE.BLOB){if(window.Blob&&"string"!=typeof h.data){if(0===h.data.type.indexOf("image")){var q=_Q.createObjectURL(h.data);h.blob=h.data,h.data=new Image,h.data.src=q,h.type=_J.TYPE.IMAGE,h.data.onload=function(){_Q.revokeObjectURL(q),h.data.onload=null,w()};return}}else{var tr=h.xhr.getResponseHeader("content-type");if(tr&&0===tr.indexOf("image")){h.data=new Image,h.data.src="data:"+tr+";base64,"+function(h){for(var w="",q=0;q<h.length;){for(var tr=[0,0,0],tn=[0,0,0,0],ti=0;ti<tr.length;++ti)q<h.length?tr[ti]=255&h.charCodeAt(q++):tr[ti]=0;switch(tn[0]=tr[0]>>2,tn[1]=(3&tr[0])<<4|tr[1]>>4,tn[2]=(15&tr[1])<<2|tr[2]>>6,tn[3]=63&tr[2],q-(h.length-1)){case 2:tn[3]=64,tn[2]=64;break;case 1:tn[3]=64}for(var to=0;to<tn.length;++to)w+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(tn[to])}return w}(h.xhr.responseText),h.type=_J.TYPE.IMAGE,h.data.onload=function(){h.data.onload=null,w()};return}}}w()}}.parsing}),_3.registerPlugin(_2);var _4=function(){function e(){}return e.init=function(h){h=Object.assign({sharedLoader:!1},h),this.loader=h.sharedLoader?_3.shared:new _3},e.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},e}(),Sh=function(h,w){return(Sh=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,w){h.__proto__=w}||function(h,w){for(var q in w)w.hasOwnProperty(q)&&(h[q]=w[q])})(h,w)};function o0(h,w){function t(){this.constructor=h}Sh(h,w),h.prototype=null===w?Object.create(w):(t.prototype=w.prototype,new t)}!function(h){function n(w,q,tr,tn){void 0===w&&(w=1500),void 0===tr&&(tr=16384),void 0===tn&&(tn=!1);var ti=h.call(this)||this;return tr>16384&&(tr=16384),ti._properties=[!1,!0,!1,!1,!1],ti._maxSize=w,ti._batchSize=tr,ti._buffers=null,ti._bufferUpdateIDs=[],ti._updateID=0,ti.interactiveChildren=!1,ti.blendMode=p8.NORMAL,ti.autoResize=tn,ti.roundPixels=!0,ti.baseTexture=null,ti.setProperties(q),ti._tint=0,ti.tintRgb=new Float32Array(4),ti.tint=16777215,ti}o0(n,h),n.prototype.setProperties=function(h){h&&(this._properties[0]="vertices"in h||"scale"in h?!!h.vertices||!!h.scale:this._properties[0],this._properties[1]="position"in h?!!h.position:this._properties[1],this._properties[2]="rotation"in h?!!h.rotation:this._properties[2],this._properties[3]="uvs"in h?!!h.uvs:this._properties[3],this._properties[4]="tint"in h||"alpha"in h?!!h.tint||!!h.alpha:this._properties[4])},n.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(n.prototype,"tint",{get:function(){return this._tint},set:function(h){this._tint=h,Uo(h,this.tintRgb)},enumerable:!1,configurable:!0}),n.prototype.render=function(h){var w=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return w.onChildrenChange(0)})),h.batch.setObjectRenderer(h.plugins.particle),h.plugins.particle.render(this))},n.prototype.onChildrenChange=function(h){for(var w=Math.floor(h/this._batchSize);this._bufferUpdateIDs.length<w;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[w]=++this._updateID},n.prototype.dispose=function(){if(this._buffers){for(var h=0;h<this._buffers.length;++h)this._buffers[h].destroy();this._buffers=null}},n.prototype.destroy=function(w){h.prototype.destroy.call(this,w),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}(fK);var _5=function(){function e(h,w,q){this.geometry=new dM,this.indexBuffer=null,this.size=q,this.dynamicProperties=[],this.staticProperties=[];for(var tr=0;tr<h.length;++tr){var tn=h[tr];tn={attributeName:tn.attributeName,size:tn.size,uploadFunction:tn.uploadFunction,type:tn.type||fn.FLOAT,offset:tn.offset},w[tr]?this.dynamicProperties.push(tn):this.staticProperties.push(tn)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return e.prototype.initBuffers=function(){var h=this.geometry,w=0;this.indexBuffer=new dS(function(h,w){void 0===w&&(w=null);var q=6*h;if((w=w||new Uint16Array(q)).length!==q)throw Error("Out buffer length is incorrect, got "+w.length+" and expected "+q);for(var tr=0,tn=0;tr<q;tr+=6,tn+=4)w[tr+0]=tn+0,w[tr+1]=tn+1,w[tr+2]=tn+2,w[tr+3]=tn+0,w[tr+4]=tn+2,w[tr+5]=tn+3;return w}(this.size),!0,!0),h.addIndex(this.indexBuffer),this.dynamicStride=0;for(var q=0;q<this.dynamicProperties.length;++q){var tr=this.dynamicProperties[q];tr.offset=w,w+=tr.size,this.dynamicStride+=tr.size}var tn=new ArrayBuffer(this.size*this.dynamicStride*16);this.dynamicData=new Float32Array(tn),this.dynamicDataUint32=new Uint32Array(tn),this.dynamicBuffer=new dS(this.dynamicData,!1,!1);var ti=0;this.staticStride=0;for(var q=0;q<this.staticProperties.length;++q){var tr=this.staticProperties[q];tr.offset=ti,ti+=tr.size,this.staticStride+=tr.size}var to=new ArrayBuffer(this.size*this.staticStride*16);this.staticData=new Float32Array(to),this.staticDataUint32=new Uint32Array(to),this.staticBuffer=new dS(this.staticData,!0,!1);for(var q=0;q<this.dynamicProperties.length;++q){var tr=this.dynamicProperties[q];h.addAttribute(tr.attributeName,this.dynamicBuffer,0,tr.type===fn.UNSIGNED_BYTE,tr.type,4*this.dynamicStride,4*tr.offset)}for(var q=0;q<this.staticProperties.length;++q){var tr=this.staticProperties[q];h.addAttribute(tr.attributeName,this.staticBuffer,0,tr.type===fn.UNSIGNED_BYTE,tr.type,4*this.staticStride,4*tr.offset)}},e.prototype.uploadDynamic=function(h,w,q){for(var tr=0;tr<this.dynamicProperties.length;tr++){var tn=this.dynamicProperties[tr];tn.uploadFunction(h,w,q,tn.type===fn.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,tn.offset)}this.dynamicBuffer._updateID++},e.prototype.uploadStatic=function(h,w,q){for(var tr=0;tr<this.staticProperties.length;tr++){var tn=this.staticProperties[tr];tn.uploadFunction(h,w,q,tn.type===fn.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,tn.offset)}this.staticBuffer._updateID++},e.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},e}(),_6=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,_8=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`,_7=function(h){function n(w){var q=h.call(this,w)||this;return q.shader=null,q.properties=null,q.tempMatrix=new fM,q.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:q.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:q.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:q.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:q.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:fn.UNSIGNED_BYTE,uploadFunction:q.uploadTint,offset:0}],q.shader=_n.from(_8,_6,{}),q.state=_i.for2d(),q}return o0(n,h),n.prototype.render=function(h){var w=h.children,q=h._maxSize,tr=h._batchSize,tn=this.renderer,ti=w.length;if(0!==ti){ti>q&&!h.autoResize&&(ti=q);var to,ts,tu,tl,tc,tp=h._buffers;tp||(tp=h._buffers=this.generateBuffers(h));var td=w[0]._texture.baseTexture;this.state.blendMode=(to=h.blendMode,pM[td.alphaMode?1:0][to]),tn.state.set(this.state);var tm=tn.gl,ty=h.worldTransform.copyTo(this.tempMatrix);ty.prepend(tn.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=ty.toArray(!0),this.shader.uniforms.uColor=(ts=h.tintRgb,tu=h.worldAlpha,tl=this.shader.uniforms.uColor,tc=td.alphaMode,tl=tl||new Float32Array(4),tc||void 0===tc?(tl[0]=ts[0]*tu,tl[1]=ts[1]*tu,tl[2]=ts[2]*tu):(tl[0]=ts[0],tl[1]=ts[1],tl[2]=ts[2]),tl[3]=tu,tl),this.shader.uniforms.uSampler=td,this.renderer.shader.bind(this.shader);for(var tv=!1,tb=0,tx=0;tb<ti;tb+=tr,tx+=1){var tT=ti-tb;tT>tr&&(tT=tr),tx>=tp.length&&tp.push(this._generateOneMoreBuffer(h));var tE=tp[tx];tE.uploadDynamic(w,tb,tT);var tA=h._bufferUpdateIDs[tx]||0;(tv=tv||tE._updateID<tA)&&(tE._updateID=h._updateID,tE.uploadStatic(w,tb,tT)),tn.geometry.bind(tE.geometry),tm.drawElements(tm.TRIANGLES,6*tT,tm.UNSIGNED_SHORT,0)}}},n.prototype.generateBuffers=function(h){for(var w=[],q=h._maxSize,tr=h._batchSize,tn=h._properties,ti=0;ti<q;ti+=tr)w.push(new _5(this.properties,tn,tr));return w},n.prototype._generateOneMoreBuffer=function(h){var w=h._batchSize,q=h._properties;return new _5(this.properties,q,w)},n.prototype.uploadVertices=function(h,w,q,tr,tn,ti){for(var to=0,ts=0,tu=0,tl=0,tc=0;tc<q;++tc){var tp=h[w+tc],td=tp._texture,tm=tp.scale.x,ty=tp.scale.y,tv=td.trim,tb=td.orig;tv?(to=(ts=tv.x-tp.anchor.x*tb.width)+tv.width,tu=(tl=tv.y-tp.anchor.y*tb.height)+tv.height):(to=tb.width*(1-tp.anchor.x),ts=-(tb.width*tp.anchor.x),tu=tb.height*(1-tp.anchor.y),tl=-(tb.height*tp.anchor.y)),tr[ti]=ts*tm,tr[ti+1]=tl*ty,tr[ti+tn]=to*tm,tr[ti+tn+1]=tl*ty,tr[ti+2*tn]=to*tm,tr[ti+2*tn+1]=tu*ty,tr[ti+3*tn]=ts*tm,tr[ti+3*tn+1]=tu*ty,ti+=4*tn}},n.prototype.uploadPosition=function(h,w,q,tr,tn,ti){for(var to=0;to<q;to++){var ts=h[w+to].position;tr[ti]=ts.x,tr[ti+1]=ts.y,tr[ti+tn]=ts.x,tr[ti+tn+1]=ts.y,tr[ti+2*tn]=ts.x,tr[ti+2*tn+1]=ts.y,tr[ti+3*tn]=ts.x,tr[ti+3*tn+1]=ts.y,ti+=4*tn}},n.prototype.uploadRotation=function(h,w,q,tr,tn,ti){for(var to=0;to<q;to++){var ts=h[w+to].rotation;tr[ti]=ts,tr[ti+tn]=ts,tr[ti+2*tn]=ts,tr[ti+3*tn]=ts,ti+=4*tn}},n.prototype.uploadUvs=function(h,w,q,tr,tn,ti){for(var to=0;to<q;++to){var ts=h[w+to]._texture._uvs;ts?(tr[ti]=ts.x0,tr[ti+1]=ts.y0,tr[ti+tn]=ts.x1,tr[ti+tn+1]=ts.y1,tr[ti+2*tn]=ts.x2,tr[ti+2*tn+1]=ts.y2,tr[ti+3*tn]=ts.x3,tr[ti+3*tn+1]=ts.y3):(tr[ti]=0,tr[ti+1]=0,tr[ti+tn]=0,tr[ti+tn+1]=0,tr[ti+2*tn]=0,tr[ti+2*tn+1]=0,tr[ti+3*tn]=0,tr[ti+3*tn+1]=0),ti+=4*tn}},n.prototype.uploadTint=function(h,w,q,tr,tn,ti){for(var to=0;to<q;++to){var ts=h[w+to],tu=ts._texture.baseTexture.alphaMode>0,tl=ts.alpha,tc=tl<1&&tu?Pf(ts._tintRGB,tl):ts._tintRGB+(255*tl<<24);tr[ti]=tc,tr[ti+tn]=tc,tr[ti+2*tn]=tc,tr[ti+3*tn]=tc,ti+=4*tn}},n.prototype.destroy=function(){h.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},n}(dj);(gl=g_||(g_={})).MITER="miter",gl.BEVEL="bevel",gl.ROUND="round",(gh=gg||(gg={})).BUTT="butt",gh.ROUND="round",gh.SQUARE="square";var _9={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(h,w){if(void 0===w&&(w=20),!this.adaptive||!h||isNaN(h))return w;var q=Math.ceil(h/this.maxLength);return q<this.minSegments?q=this.minSegments:q>this.maxSegments&&(q=this.maxSegments),q}},gr=function(){function e(){this.color=16777215,this.alpha=1,this.texture=dE.WHITE,this.matrix=null,this.visible=!1,this.reset()}return e.prototype.clone=function(){var h=new e;return h.color=this.color,h.alpha=this.alpha,h.texture=this.texture,h.matrix=this.matrix,h.visible=this.visible,h},e.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=dE.WHITE,this.matrix=null,this.visible=!1},e.prototype.destroy=function(){this.texture=null,this.matrix=null},e}(),Ih=function(h,w){return(Ih=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,w){h.__proto__=w}||function(h,w){for(var q in w)w.hasOwnProperty(q)&&(h[q]=w[q])})(h,w)};function Gu(h,w){function t(){this.constructor=h}Ih(h,w),h.prototype=null===w?Object.create(w):(t.prototype=w.prototype,new t)}var gn={build:function(h){h.points=h.shape.points.slice()},triangulate:function(h,w){var q=h.points,tr=h.holes,tn=w.points,ti=w.indices;if(q.length>=6){for(var to=[],ts=0;ts<tr.length;ts++){var tu=tr[ts];to.push(q.length/2),q=q.concat(tu.points)}var tl=lF(q,to,2);if(!tl)return;for(var tc=tn.length/2,ts=0;ts<tl.length;ts+=3)ti.push(tl[ts]+tc),ti.push(tl[ts+1]+tc),ti.push(tl[ts+2]+tc);for(var ts=0;ts<q.length;ts++)tn.push(q[ts])}}},gi={build:function(h){var w,q,tr=h.shape,tn=h.points,ti=tr.x,to=tr.y;if(tn.length=0,h.type===fT.CIRC)w=tr.radius,q=tr.radius;else{var ts=h.shape;w=ts.width,q=ts.height}if(!(0===w||0===q)){var tu=Math.floor(30*Math.sqrt(tr.radius))||Math.floor(15*Math.sqrt(w+q));tu/=2.3;for(var tl=2*Math.PI/tu,tc=0;tc<tu-.5;tc++)tn.push(ti+Math.sin(-tl*tc)*w,to+Math.cos(-tl*tc)*q);tn.push(tn[0],tn[1])}},triangulate:function(h,w){var q=h.points,tr=w.points,tn=w.indices,ti=tr.length/2,to=ti,ts=h.shape,tu=h.matrix,tl=ts.x,tc=ts.y;tr.push(h.matrix?tu.a*tl+tu.c*tc+tu.tx:tl,h.matrix?tu.b*tl+tu.d*tc+tu.ty:tc);for(var tp=0;tp<q.length;tp+=2)tr.push(q[tp],q[tp+1]),tn.push(ti++,to,ti)}};function Hs(h,w,q,tr,tn,ti,to){void 0===to&&(to=[]);for(var ts,tu,tl=to,tc=0,tp=0,td=0,tm=0,ty=0,tv=0,tb=0,tx=0;tb<=20;++tb)tc=h+(q-h)*(tx=tb/20),tp=w+(tr-w)*tx,td=q+(tn-q)*tx,tm=tr+(ti-tr)*tx,ty=(ts=tc)+(td-ts)*tx,tv=(tu=tp)+(tm-tu)*tx,tl.push(ty,tv);return tl}function I_(h,w,q,tr,tn,ti,to,ts){to?(tu=tr,tl=-q):(tu=-tr,tl=q);var tu,tl,tc=h-q*tn+tu,tp=w-tr*tn+tl,td=h+q*ti+tu,tm=w+tr*ti+tl;return ts.push(tc,tp),ts.push(td,tm),2}function zs(h,w,q,tr,tn,ti,to,ts){var tu=q-h,tl=tr-w,tc=Math.atan2(tu,tl),tp=Math.atan2(tn-h,ti-w);ts&&tc<tp?tc+=2*Math.PI:!ts&&tc>tp&&(tp+=2*Math.PI);var td=tc,tm=tp-tc,ty=Math.sqrt(tu*tu+tl*tl),tv=(15*Math.abs(tm)*Math.sqrt(ty)/Math.PI>>0)+1,tb=tm/tv;if(td+=tb,ts){to.push(h,w),to.push(q,tr);for(var tx=1,tT=td;tx<tv;tx++,tT+=tb)to.push(h,w),to.push(h+Math.sin(tT)*ty,w+Math.cos(tT)*ty);to.push(h,w),to.push(tn,ti)}else{to.push(q,tr),to.push(h,w);for(var tx=1,tT=td;tx<tv;tx++,tT+=tb)to.push(h+Math.sin(tT)*ty,w+Math.cos(tT)*ty),to.push(h,w);to.push(tn,ti),to.push(h,w)}return 2*tv}function P_(h,w){h.lineStyle.native?function(h,w){var q=0,tr=h.shape,tn=h.points||tr.points,ti=tr.type!==fT.POLY||tr.closeStroke;if(0!==tn.length){var to=w.points,ts=w.indices,tu=tn.length/2,tl=to.length/2,tc=tl;for(to.push(tn[0],tn[1]),q=1;q<tu;q++)to.push(tn[2*q],tn[2*q+1]),ts.push(tc,tc+1),tc++;ti&&ts.push(tc,tl)}}(h,w):function(h,w){var q=h.shape,tr=h.points||q.points.slice(),tn=w.closePointEps;if(0!==tr.length){var ti=h.lineStyle,to=new fR(tr[0],tr[1]),ts=new fR(tr[tr.length-2],tr[tr.length-1]),tu=q.type!==fT.POLY||q.closeStroke,tl=Math.abs(to.x-ts.x)<tn&&Math.abs(to.y-ts.y)<tn;if(tu){tr=tr.slice(),tl&&(tr.pop(),tr.pop(),ts.set(tr[tr.length-2],tr[tr.length-1]));var tc=(to.x+ts.x)*.5,tp=(ts.y+to.y)*.5;tr.unshift(tc,tp),tr.push(tc,tp)}var td=w.points,tm=tr.length/2,ty=tr.length,tv=td.length/2,tb=ti.width/2,tx=tb*tb,tT=ti.miterLimit*ti.miterLimit,tE=tr[0],tA=tr[1],tO=tr[2],tw=tr[3],tL=0,tS=0,tI=-(tA-tw),tP=tE-tO,tR=0,tN=0,tM=Math.sqrt(tI*tI+tP*tP);tI/=tM,tP/=tM,tI*=tb,tP*=tb;var tk=ti.alignment,tU=(1-tk)*2,tC=2*tk;tu||(ti.cap===gg.ROUND?ty+=zs(tE-tI*(tU-tC)*.5,tA-tP*(tU-tC)*.5,tE-tI*tU,tA-tP*tU,tE+tI*tC,tA+tP*tC,td,!0)+2:ti.cap===gg.SQUARE&&(ty+=I_(tE,tA,tI,tP,tU,tC,!0,td))),td.push(tE-tI*tU,tA-tP*tU),td.push(tE+tI*tC,tA+tP*tC);for(var tD=1;tD<tm-1;++tD){tE=tr[(tD-1)*2],tA=tr[(tD-1)*2+1],tO=tr[2*tD],tw=tr[2*tD+1],tL=tr[(tD+1)*2],tS=tr[(tD+1)*2+1],tM=Math.sqrt((tI=-(tA-tw))*tI+(tP=tE-tO)*tP),tI/=tM,tP/=tM,tI*=tb,tP*=tb,tM=Math.sqrt((tR=-(tw-tS))*tR+(tN=tO-tL)*tN),tR/=tM,tN/=tM,tR*=tb,tN*=tb;var tF=tO-tE,tB=tA-tw,tj=tO-tL,tG=tS-tw,tV=tB*tj-tG*tF,tX=tV<0;if(.1>Math.abs(tV)){td.push(tO-tI*tU,tw-tP*tU),td.push(tO+tI*tC,tw+tP*tC);continue}var tH=(-tI+tE)*(-tP+tw)-(-tI+tO)*(-tP+tA),tz=(-tR+tL)*(-tN+tw)-(-tR+tO)*(-tN+tS),tK=(tF*tz-tj*tH)/tV,tY=(tG*tH-tB*tz)/tV,tW=(tK-tO)*(tK-tO)+(tY-tw)*(tY-tw),tq=tO+(tK-tO)*tU,tZ=tw+(tY-tw)*tU,tJ=tO-(tK-tO)*tC,tQ=tw-(tY-tw)*tC;ti.join===g_.BEVEL||tW/tx>tT?(tX?(td.push(tq,tZ),td.push(tO+tI*tC,tw+tP*tC),td.push(tq,tZ),td.push(tO+tR*tC,tw+tN*tC)):(td.push(tO-tI*tU,tw-tP*tU),td.push(tJ,tQ),td.push(tO-tR*tU,tw-tN*tU),td.push(tJ,tQ)),ty+=2):ti.join===g_.ROUND?tX?(td.push(tq,tZ),td.push(tO+tI*tC,tw+tP*tC),ty+=zs(tO,tw,tO+tI*tC,tw+tP*tC,tO+tR*tC,tw+tN*tC,td,!0)+4,td.push(tq,tZ),td.push(tO+tR*tC,tw+tN*tC)):(td.push(tO-tI*tU,tw-tP*tU),td.push(tJ,tQ),ty+=zs(tO,tw,tO-tI*tU,tw-tP*tU,tO-tR*tU,tw-tN*tU,td,!1)+4,td.push(tO-tR*tU,tw-tN*tU),td.push(tJ,tQ)):(td.push(tq,tZ),td.push(tJ,tQ))}tE=tr[(tm-2)*2],tA=tr[(tm-2)*2+1],tO=tr[(tm-1)*2],tM=Math.sqrt((tI=-(tA-(tw=tr[(tm-1)*2+1])))*tI+(tP=tE-tO)*tP),tI/=tM,tP/=tM,tI*=tb,tP*=tb,td.push(tO-tI*tU,tw-tP*tU),td.push(tO+tI*tC,tw+tP*tC),tu||(ti.cap===gg.ROUND?ty+=zs(tO-tI*(tU-tC)*.5,tw-tP*(tU-tC)*.5,tO-tI*tU,tw-tP*tU,tO+tI*tC,tw+tP*tC,td,!1)+2:ti.cap===gg.SQUARE&&(ty+=I_(tO,tw,tI,tP,tU,tC,!1,td)));for(var t$=w.indices,t0=_9.epsilon*_9.epsilon,tD=tv;tD<ty+tv-2;++tD)tE=td[2*tD],tA=td[2*tD+1],tO=td[(tD+1)*2],tw=td[(tD+1)*2+1],tL=td[(tD+2)*2],Math.abs(tE*(tw-(tS=td[(tD+2)*2+1]))+tO*(tS-tA)+tL*(tA-tw))<t0||t$.push(tD,tD+1,tD+2)}}(h,w)}var go,gs,ga,gu,gl,gh,gp,gf,gd,g_,gg,gv,gb=function(h){function n(w,q,tr,tn,ti,to){void 0===to&&(to=0),ti=ti||tn/2;for(var ts=-1*Math.PI/2+to,tu=2*tr,tl=fE/tu,tc=[],tp=0;tp<tu;tp++){var td=tp%2?ti:tn,tm=tp*tl+ts;tc.push(w+td*Math.cos(tm),q+td*Math.sin(tm))}return h.call(this,tc)||this}return Gu(n,h),n}(fI),gx=function(){function e(){}return e.curveTo=function(h,w,q,tr,tn,ti){var to=ti[ti.length-2],ts=ti[ti.length-1]-w,tu=to-h,tl=tr-w,tc=q-h,tp=Math.abs(ts*tc-tu*tl);if(tp<1e-8||0===tn)return(ti[ti.length-2]!==h||ti[ti.length-1]!==w)&&ti.push(h,w),null;var td=ts*ts+tu*tu,tm=tl*tl+tc*tc,ty=ts*tl+tu*tc,tv=tn*Math.sqrt(td)/tp,tb=tn*Math.sqrt(tm)/tp,tx=tv*ty/td,tT=tb*ty/tm,tE=tv*tc+tb*tu,tA=tv*tl+tb*ts,tO=Math.atan2(ts*(tb+tx)-tA,tu*(tb+tx)-tE),tw=Math.atan2(tl*(tv+tT)-tA,tc*(tv+tT)-tE);return{cx:tE+h,cy:tA+w,radius:tn,startAngle:tO,endAngle:tw,anticlockwise:tu*tl>tc*ts}},e.arc=function(h,w,q,tr,tn,ti,to,ts,tu){for(var tl=to-ti,tc=_9._segmentsCount(Math.abs(tl)*tn,40*Math.ceil(Math.abs(tl)/fE)),tp=tl/(2*tc),td=2*tp,tm=Math.cos(tp),ty=Math.sin(tp),tv=tc-1,tb=tv%1/tv,tx=0;tx<=tv;++tx){var tT=tp+ti+td*(tx+tb*tx),tE=Math.cos(tT),tA=-Math.sin(tT);tu.push((tm*tE+ty*tA)*tn+q,(-(tm*tA)+ty*tE)*tn+tr)}},e}(),gT=function(){function e(){}return e.curveLength=function(h,w,q,tr,tn,ti,to,ts){for(var tu=0,tl=0,tc=0,tp=0,td=0,tm=0,ty=0,tv=0,tb=0,tx=0,tT=0,tE=h,tA=w,tO=1;tO<=10;++tO)tp=(tc=(tl=tO/10)*tl)*tl,tv=(ty=(tm=(td=1-tl)*td)*td)*h+3*tm*tl*q+3*td*tc*tn+tp*to,tb=ty*w+3*tm*tl*tr+3*td*tc*ti+tp*ts,tx=tE-tv,tT=tA-tb,tE=tv,tA=tb,tu+=Math.sqrt(tx*tx+tT*tT);return tu},e.curveTo=function(h,w,q,tr,tn,ti,to){var ts=to[to.length-2],tu=to[to.length-1];to.length-=2;var tl=_9._segmentsCount(e.curveLength(ts,tu,h,w,q,tr,tn,ti)),tc=0,tp=0,td=0,tm=0,ty=0;to.push(ts,tu);for(var tv=1,tb=0;tv<=tl;++tv)td=(tp=(tc=1-(tb=tv/tl))*tc)*tc,ty=(tm=tb*tb)*tb,to.push(td*ts+3*tp*tb*h+3*tc*tm*q+ty*tn,td*tu+3*tp*tb*w+3*tc*tm*tr+ty*ti)},e}(),gE=function(){function e(){}return e.curveLength=function(h,w,q,tr,tn,ti){var to=h-2*q+tn,ts=w-2*tr+ti,tu=2*q-2*h,tl=2*tr-2*w,tc=4*(to*to+ts*ts),tp=4*(to*tu+ts*tl),td=tu*tu+tl*tl,tm=2*Math.sqrt(tc+tp+td),ty=Math.sqrt(tc),tv=2*tc*ty,tb=2*Math.sqrt(td),tx=tp/ty;return(tv*tm+ty*tp*(tm-tb)+(4*td*tc-tp*tp)*Math.log((2*ty+tx+tm)/(tx+tb)))/(4*tv)},e.curveTo=function(h,w,q,tr,tn){for(var ti=tn[tn.length-2],to=tn[tn.length-1],ts=_9._segmentsCount(e.curveLength(ti,to,h,w,q,tr)),tu=0,tl=0,tc=1;tc<=ts;++tc){var tp=tc/ts;tu=ti+(h-ti)*tp,tl=to+(w-to)*tp,tn.push(tu+(h+(q-h)*tp-tu)*tp,tl+(w+(tr-w)*tp-tl)*tp)}},e}(),gA=function(){function e(){this.reset()}return e.prototype.begin=function(h,w,q){this.reset(),this.style=h,this.start=w,this.attribStart=q},e.prototype.end=function(h,w){this.attribSize=w-this.attribStart,this.size=h-this.start},e.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},e}(),gO=((gv={})[fT.POLY]=gn,gv[fT.CIRC]=gi,gv[fT.ELIP]=gi,gv[fT.RECT]={build:function(h){var w=h.shape,q=w.x,tr=w.y,tn=w.width,ti=w.height,to=h.points;to.length=0,to.push(q,tr,q+tn,tr,q+tn,tr+ti,q,tr+ti)},triangulate:function(h,w){var q=h.points,tr=w.points,tn=tr.length/2;tr.push(q[0],q[1],q[2],q[3],q[6],q[7],q[4],q[5]),w.indices.push(tn,tn+1,tn+2,tn+1,tn+2,tn+3)}},gv[fT.RREC]={build:function(h){var w=h.shape,q=h.points,tr=w.x,tn=w.y,ti=w.width,to=w.height,ts=Math.max(0,Math.min(w.radius,Math.min(ti,to)/2));q.length=0,ts?(Hs(tr,tn+ts,tr,tn,tr+ts,tn,q),Hs(tr+ti-ts,tn,tr+ti,tn,tr+ti,tn+ts,q),Hs(tr+ti,tn+to-ts,tr+ti,tn+to,tr+ti-ts,tn+to,q),Hs(tr+ts,tn+to,tr,tn+to,tr,tn+to-ts,q)):q.push(tr,tn,tr+ti,tn,tr+ti,tn+to,tr,tn+to)},triangulate:function(h,w){for(var q=h.points,tr=w.points,tn=w.indices,ti=tr.length/2,to=lF(q,null,2),ts=0,tu=to.length;ts<tu;ts+=3)tn.push(to[ts]+ti),tn.push(to[ts+1]+ti),tn.push(to[ts+2]+ti);for(var ts=0,tu=q.length;ts<tu;ts++)tr.push(q[ts],q[++ts])}},gv),gw=[],gL=[],gS=function(){function e(h,w,q,tr){void 0===w&&(w=null),void 0===q&&(q=null),void 0===tr&&(tr=null),this.shape=h,this.lineStyle=q,this.fillStyle=w,this.matrix=tr,this.type=h.type,this.points=[],this.holes=[]}return e.prototype.clone=function(){return new e(this.shape,this.fillStyle,this.lineStyle,this.matrix)},e.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},e}(),gP=new fR,gR=new fX,gN=function(h){function n(){var w=h.call(this)||this;return w.uvsFloat32=null,w.indicesUint16=null,w.points=[],w.colors=[],w.uvs=[],w.indices=[],w.textureIds=[],w.graphicsData=[],w.dirty=0,w.batchDirty=-1,w.cacheDirty=-1,w.clearDirty=0,w.drawCalls=[],w.batches=[],w.shapeIndex=0,w._bounds=new fX,w.boundsDirty=-1,w.boundsPadding=0,w.batchable=!1,w.indicesUint16=null,w.uvsFloat32=null,w.closePointEps=1e-4,w}return Gu(n,h),Object.defineProperty(n.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),n.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var h=0;h<this.drawCalls.length;h++)this.drawCalls[h].texArray.clear(),gL.push(this.drawCalls[h]);this.drawCalls.length=0;for(var h=0;h<this.batches.length;h++){var w=this.batches[h];w.reset(),gw.push(w)}this.batches.length=0},n.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},n.prototype.drawShape=function(h,w,q,tr){void 0===w&&(w=null),void 0===q&&(q=null),void 0===tr&&(tr=null);var tn=new gS(h,w,q,tr);return this.graphicsData.push(tn),this.dirty++,this},n.prototype.drawHole=function(h,w){if(void 0===w&&(w=null),!this.graphicsData.length)return null;var q=new gS(h,null,null,w),tr=this.graphicsData[this.graphicsData.length-1];return q.lineStyle=tr.lineStyle,tr.holes.push(q),this.dirty++,this},n.prototype.destroy=function(){h.prototype.destroy.call(this);for(var w=0;w<this.graphicsData.length;++w)this.graphicsData[w].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},n.prototype.containsPoint=function(h){for(var w=this.graphicsData,q=0;q<w.length;++q){var tr=w[q];if(tr.fillStyle.visible&&tr.shape&&(tr.matrix?tr.matrix.applyInverse(h,gP):gP.copyFrom(h),tr.shape.contains(gP.x,gP.y))){var tn=!1;if(tr.holes){for(var ti=0;ti<tr.holes.length;ti++)if(tr.holes[ti].shape.contains(gP.x,gP.y)){tn=!0;break}}if(!tn)return!0}}return!1},n.prototype.updateBatches=function(h){if(!this.graphicsData.length){this.batchable=!0;return}if(this.validateBatching()){this.cacheDirty=this.dirty;var w=this.uvs,q=this.graphicsData,tr=null,tn=null;this.batches.length>0&&(tn=(tr=this.batches[this.batches.length-1]).style);for(var ti=this.shapeIndex;ti<q.length;ti++){this.shapeIndex++;var to=q[ti],ts=to.fillStyle,tu=to.lineStyle;gO[to.type].build(to),to.matrix&&this.transformPoints(to.points,to.matrix);for(var tl=0;tl<2;tl++){var tc=0===tl?ts:tu;if(tc.visible){var tp=tc.texture.baseTexture,td=this.indices.length,tm=this.points.length/2;tp.wrapMode=fs.REPEAT,0===tl?this.processFill(to):this.processLine(to);var ty=this.points.length/2-tm;0!==ty&&(tr&&!this._compareStyles(tn,tc)&&(tr.end(td,tm),tr=null),tr||((tr=gw.pop()||new gA).begin(tc,td,tm),this.batches.push(tr),tn=tc),this.addUvs(this.points,w,tc.texture,tm,ty,tc.matrix))}}}var tv=this.indices.length,tb=this.points.length/2;if(tr&&tr.end(tv,tb),0===this.batches.length){this.batchable=!0;return}if(this.indicesUint16&&this.indices.length===this.indicesUint16.length)this.indicesUint16.set(this.indices);else{var tx=tb>65535&&h;this.indicesUint16=tx?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}},n.prototype._compareStyles=function(h,w){return!(!h||!w||h.texture.baseTexture!==w.texture.baseTexture||h.color+h.alpha!==w.color+w.alpha||!!h.native!=!!w.native)},n.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var h=0,w=this.graphicsData.length;h<w;h++){var q=this.graphicsData[h],tr=q.fillStyle,tn=q.lineStyle;if(tr&&!tr.texture.baseTexture.valid||tn&&!tn.texture.baseTexture.valid)return!1}return!0},n.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var h=this.batches,w=0,q=h.length;w<q;w++)for(var tr=h[w],tn=0;tn<tr.size;tn++){var ti=tr.start+tn;this.indicesUint16[ti]=this.indicesUint16[ti]-tr.attribStart}},n.prototype.isBatchable=function(){if(this.points.length>131070)return!1;for(var h=this.batches,w=0;w<h.length;w++)if(h[w].style.native)return!1;return this.points.length<2*n.BATCHABLE_SIZE},n.prototype.buildDrawCalls=function(){for(var h=++f9._globalBatch,w=0;w<this.drawCalls.length;w++)this.drawCalls[w].texArray.clear(),gL.push(this.drawCalls[w]);this.drawCalls.length=0;var q=this.colors,tr=this.textureIds,tn=gL.pop();tn||((tn=new wh).texArray=new _U),tn.texArray.count=0,tn.start=0,tn.size=0,tn.type=p7.TRIANGLES;var ti=0,to=null,ts=0,tu=!1,tl=p7.TRIANGLES,tc=0;this.drawCalls.push(tn);for(var w=0;w<this.batches.length;w++){var tp=this.batches[w],td=tp.style,tm=td.texture.baseTexture;!!td.native!==tu&&(tl=(tu=!!td.native)?p7.LINES:p7.TRIANGLES,to=null,ti=8,h++),to!==tm&&(to=tm,tm._batchEnabled!==h&&(8===ti&&(h++,ti=0,tn.size>0&&((tn=gL.pop())||((tn=new wh).texArray=new _U),this.drawCalls.push(tn)),tn.start=tc,tn.size=0,tn.texArray.count=0,tn.type=tl),tm.touched=1,tm._batchEnabled=h,tm._batchLocation=ti,tm.wrapMode=10497,tn.texArray.elements[tn.texArray.count++]=tm,ti++)),tn.size+=tp.size,tc+=tp.size,ts=tm._batchLocation,this.addColors(q,td.color,td.alpha,tp.attribSize),this.addTextureIds(tr,ts,tp.attribSize)}f9._globalBatch=h,this.packAttributes()},n.prototype.packAttributes=function(){for(var h=this.points,w=this.uvs,q=this.colors,tr=this.textureIds,tn=new ArrayBuffer(12*h.length),ti=new Float32Array(tn),to=new Uint32Array(tn),ts=0,tu=0;tu<h.length/2;tu++)ti[ts++]=h[2*tu],ti[ts++]=h[2*tu+1],ti[ts++]=w[2*tu],ti[ts++]=w[2*tu+1],to[ts++]=q[tu],ti[ts++]=tr[tu];this._buffer.update(tn),this._indexBuffer.update(this.indicesUint16)},n.prototype.processFill=function(h){h.holes.length?(this.processHoles(h.holes),gn.triangulate(h,this)):gO[h.type].triangulate(h,this)},n.prototype.processLine=function(h){P_(h,this);for(var w=0;w<h.holes.length;w++)P_(h.holes[w],this)},n.prototype.processHoles=function(h){for(var w=0;w<h.length;w++){var q=h[w];gO[q.type].build(q),q.matrix&&this.transformPoints(q.points,q.matrix)}},n.prototype.calculateBounds=function(){var h=this._bounds,w=fM.IDENTITY;this._bounds.clear(),gR.clear();for(var q=0;q<this.graphicsData.length;q++){var tr=this.graphicsData[q],tn=tr.shape,ti=tr.type,to=tr.lineStyle,ts=tr.matrix||fM.IDENTITY,tu=0;if(to&&to.visible){var tl=to.alignment;tu=to.width,ti===fT.POLY?tu*=.5+Math.abs(.5-tl):tu*=Math.max(0,tl)}(w!==ts&&(gR.isEmpty()||(h.addBoundsMatrix(gR,w),gR.clear()),w=ts),ti===fT.RECT||ti===fT.RREC)?gR.addFramePad(tn.x,tn.y,tn.x+tn.width,tn.y+tn.height,tu,tu):ti===fT.CIRC?gR.addFramePad(tn.x,tn.y,tn.x,tn.y,tn.radius+tu,tn.radius+tu):ti===fT.ELIP?gR.addFramePad(tn.x,tn.y,tn.x,tn.y,tn.width+tu,tn.height+tu):h.addVerticesMatrix(w,tn.points,0,tn.points.length,tu,tu)}gR.isEmpty()||h.addBoundsMatrix(gR,w),h.pad(this.boundsPadding,this.boundsPadding)},n.prototype.transformPoints=function(h,w){for(var q=0;q<h.length/2;q++){var tr=h[2*q],tn=h[2*q+1];h[2*q]=w.a*tr+w.c*tn+w.tx,h[2*q+1]=w.b*tr+w.d*tn+w.ty}},n.prototype.addColors=function(h,w,q,tr){for(var tn=Pf((w>>16)+(65280&w)+((255&w)<<16),q);tr-- >0;)h.push(tn)},n.prototype.addTextureIds=function(h,w,q){for(;q-- >0;)h.push(w)},n.prototype.addUvs=function(h,w,q,tr,tn,ti){void 0===ti&&(ti=null);for(var to=0,ts=w.length,tu=q.frame;to<tn;){var tl=h[(tr+to)*2],tc=h[(tr+to)*2+1];if(ti){var tp=ti.a*tl+ti.c*tc+ti.tx;tc=ti.b*tl+ti.d*tc+ti.ty,tl=tp}to++,w.push(tl/tu.width,tc/tu.height)}var td=q.baseTexture;(tu.width<td.width||tu.height<td.height)&&this.adjustUvs(w,q,ts,tn)},n.prototype.adjustUvs=function(h,w,q,tr){for(var tn=w.baseTexture,ti=q+2*tr,to=w.frame,ts=to.width/tn.width,tu=to.height/tn.height,tl=to.x/to.width,tc=to.y/to.height,tp=Math.floor(h[q]+1e-6),td=Math.floor(h[q+1]+1e-6),tm=q+2;tm<ti;tm+=2)tp=Math.min(tp,Math.floor(h[tm]+1e-6)),td=Math.min(td,Math.floor(h[tm+1]+1e-6));tl-=tp,tc-=td;for(var tm=q;tm<ti;tm+=2)h[tm]=(h[tm]+tl)*ts,h[tm+1]=(h[tm+1]+tc)*tu},n.BATCHABLE_SIZE=100,n}(_B),gM=function(h){function n(){var w=null!==h&&h.apply(this,arguments)||this;return w.width=0,w.alignment=.5,w.native=!1,w.cap=gg.BUTT,w.join=g_.MITER,w.miterLimit=10,w}return Gu(n,h),n.prototype.clone=function(){var h=new n;return h.color=this.color,h.alpha=this.alpha,h.texture=this.texture,h.matrix=this.matrix,h.visible=this.visible,h.width=this.width,h.alignment=this.alignment,h.native=this.native,h.cap=this.cap,h.join=this.join,h.miterLimit=this.miterLimit,h},n.prototype.reset=function(){h.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},n}(gr),gk=new Float32Array(3),gU={},gC=function(h){function n(w){void 0===w&&(w=null);var q=h.call(this)||this;return q._geometry=w||new gN,q._geometry.refCount++,q.shader=null,q.state=_i.for2d(),q._fillStyle=new gr,q._lineStyle=new gM,q._matrix=null,q._holeMode=!1,q.currentPath=null,q.batches=[],q.batchTint=-1,q.batchDirty=-1,q.vertexData=null,q.pluginName="batch",q._transformID=-1,q.tint=16777215,q.blendMode=p8.NORMAL,q}return Gu(n,h),Object.defineProperty(n.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),n.prototype.clone=function(){return this.finishPoly(),new n(this._geometry)},Object.defineProperty(n.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(h){this.state.blendMode=h},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"tint",{get:function(){return this._tint},set:function(h){this._tint=h},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),n.prototype.lineStyle=function(h){if(void 0===h&&(h=null),"number"==typeof h){var w=arguments;h={width:w[0]||0,color:w[1]||0,alpha:void 0!==w[2]?w[2]:1,alignment:void 0!==w[3]?w[3]:.5,native:!!w[4]}}return this.lineTextureStyle(h)},n.prototype.lineTextureStyle=function(h){if("number"==typeof h){Qn("v5.2.0","Please use object-based options for Graphics#lineTextureStyle");var w=arguments;Object.keys(h={width:w[0],texture:w[1],color:w[2],alpha:w[3],matrix:w[4],alignment:w[5],native:w[6]}).forEach(function(w){return void 0===h[w]&&delete h[w]})}h=Object.assign({width:0,texture:dE.WHITE,color:h&&h.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:gg.BUTT,join:g_.MITER,miterLimit:10},h),this.currentPath&&this.startPoly();var q=h.width>0&&h.alpha>0;return q?(h.matrix&&(h.matrix=h.matrix.clone(),h.matrix.invert()),Object.assign(this._lineStyle,{visible:q},h)):this._lineStyle.reset(),this},n.prototype.startPoly=function(){if(this.currentPath){var h=this.currentPath.points,w=this.currentPath.points.length;w>2&&(this.drawShape(this.currentPath),this.currentPath=new fI,this.currentPath.closeStroke=!1,this.currentPath.points.push(h[w-2],h[w-1]))}else this.currentPath=new fI,this.currentPath.closeStroke=!1},n.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},n.prototype.moveTo=function(h,w){return this.startPoly(),this.currentPath.points[0]=h,this.currentPath.points[1]=w,this},n.prototype.lineTo=function(h,w){this.currentPath||this.moveTo(0,0);var q=this.currentPath.points,tr=q[q.length-2],tn=q[q.length-1];return(tr!==h||tn!==w)&&q.push(h,w),this},n.prototype._initCurve=function(h,w){void 0===h&&(h=0),void 0===w&&(w=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[h,w]):this.moveTo(h,w)},n.prototype.quadraticCurveTo=function(h,w,q,tr){this._initCurve();var tn=this.currentPath.points;return 0===tn.length&&this.moveTo(0,0),gE.curveTo(h,w,q,tr,tn),this},n.prototype.bezierCurveTo=function(h,w,q,tr,tn,ti){return this._initCurve(),gT.curveTo(h,w,q,tr,tn,ti,this.currentPath.points),this},n.prototype.arcTo=function(h,w,q,tr,tn){this._initCurve(h,w);var ti=this.currentPath.points,to=gx.curveTo(h,w,q,tr,tn,ti);if(to){var ts=to.cx,tu=to.cy,tl=to.radius,tc=to.startAngle,tp=to.endAngle,td=to.anticlockwise;this.arc(ts,tu,tl,tc,tp,td)}return this},n.prototype.arc=function(h,w,q,tr,tn,ti){if(void 0===ti&&(ti=!1),tr===tn||(!ti&&tn<=tr?tn+=fE:ti&&tr<=tn&&(tr+=fE),0==tn-tr))return this;var to=h+Math.cos(tr)*q,ts=w+Math.sin(tr)*q,tu=this._geometry.closePointEps,tl=this.currentPath?this.currentPath.points:null;if(tl){var tc=Math.abs(tl[tl.length-2]-to),tp=Math.abs(tl[tl.length-1]-ts);tc<tu&&tp<tu||tl.push(to,ts)}else this.moveTo(to,ts),tl=this.currentPath.points;return gx.arc(to,ts,h,w,q,tr,tn,ti,tl),this},n.prototype.beginFill=function(h,w){return void 0===h&&(h=0),void 0===w&&(w=1),this.beginTextureFill({texture:dE.WHITE,color:h,alpha:w})},n.prototype.beginTextureFill=function(h){if(h instanceof dE){Qn("v5.2.0","Please use object-based options for Graphics#beginTextureFill");var w=arguments;Object.keys(h={texture:w[0],color:w[1],alpha:w[2],matrix:w[3]}).forEach(function(w){return void 0===h[w]&&delete h[w]})}h=Object.assign({texture:dE.WHITE,color:16777215,alpha:1,matrix:null},h),this.currentPath&&this.startPoly();var q=h.alpha>0;return q?(h.matrix&&(h.matrix=h.matrix.clone(),h.matrix.invert()),Object.assign(this._fillStyle,{visible:q},h)):this._fillStyle.reset(),this},n.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},n.prototype.drawRect=function(h,w,q,tr){return this.drawShape(new fw(h,w,q,tr))},n.prototype.drawRoundedRect=function(h,w,q,tr,tn){return this.drawShape(new fP(h,w,q,tr,tn))},n.prototype.drawCircle=function(h,w,q){return this.drawShape(new fL(h,w,q))},n.prototype.drawEllipse=function(h,w,q,tr){return this.drawShape(new fS(h,w,q,tr))},n.prototype.drawPolygon=function(){for(var h=arguments,w=[],q=0;q<arguments.length;q++)w[q]=h[q];var tr,tn=!0,ti=w[0];ti.points?(tn=ti.closeStroke,tr=ti.points):tr=Array.isArray(w[0])?w[0]:w;var to=new fI(tr);return to.closeStroke=tn,this.drawShape(to),this},n.prototype.drawShape=function(h){return this._holeMode?this._geometry.drawHole(h,this._matrix):this._geometry.drawShape(h,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},n.prototype.drawStar=function(h,w,q,tr,tn,ti){return void 0===ti&&(ti=0),this.drawPolygon(new gb(h,w,q,tr,tn,ti))},n.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},n.prototype.isFastRect=function(){var h=this._geometry.graphicsData;return 1===h.length&&h[0].shape.type===fT.RECT&&!(h[0].lineStyle.visible&&h[0].lineStyle.width)},n.prototype._render=function(h){this.finishPoly();var w=this._geometry,q=h.context.supports.uint32Indices;w.updateBatches(q),w.batchable?(this.batchDirty!==w.batchDirty&&this._populateBatches(),this._renderBatched(h)):(h.batch.flush(),this._renderDirect(h))},n.prototype._populateBatches=function(){var h=this._geometry,w=this.blendMode,q=h.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=h.batchDirty,this.batches.length=q,this.vertexData=new Float32Array(h.points);for(var tr=0;tr<q;tr++){var tn=h.batches[tr],ti=tn.style.color,to=new Float32Array(this.vertexData.buffer,8*tn.attribStart,2*tn.attribSize),ts=new Float32Array(h.uvsFloat32.buffer,8*tn.attribStart,2*tn.attribSize),tu={vertexData:to,blendMode:w,indices:new Uint16Array(h.indicesUint16.buffer,2*tn.start,tn.size),uvs:ts,_batchRGB:Uo(ti),_tintRGB:ti,_texture:tn.style.texture,alpha:tn.style.alpha,worldAlpha:1};this.batches[tr]=tu}},n.prototype._renderBatched=function(h){if(this.batches.length){h.batch.setObjectRenderer(h.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var w=0,q=this.batches.length;w<q;w++){var tr=this.batches[w];tr.worldAlpha=this.worldAlpha*tr.alpha,h.plugins[this.pluginName].render(tr)}}},n.prototype._renderDirect=function(h){var w=this._resolveDirectShader(h),q=this._geometry,tr=this.tint,tn=this.worldAlpha,ti=w.uniforms,to=q.drawCalls;ti.translationMatrix=this.transform.worldTransform,ti.tint[0]=(tr>>16&255)/255*tn,ti.tint[1]=(tr>>8&255)/255*tn,ti.tint[2]=(255&tr)/255*tn,ti.tint[3]=tn,h.shader.bind(w),h.geometry.bind(q,w),h.state.set(this.state);for(var ts=0,tu=to.length;ts<tu;ts++)this._renderDrawCallDirect(h,q.drawCalls[ts])},n.prototype._renderDrawCallDirect=function(h,w){for(var q=w.texArray,tr=w.type,tn=w.size,ti=w.start,to=q.count,ts=0;ts<to;ts++)h.texture.bind(q.elements[ts],ts);h.geometry.draw(tr,tn,ti)},n.prototype._resolveDirectShader=function(h){var w=this.shader,q=this.pluginName;if(!w){if(!gU[q]){for(var tr=new Int32Array(16),tn=0;tn<16;tn++)tr[tn]=tn;var ti={tint:new Float32Array([1,1,1,1]),translationMatrix:new fM,default:dD.from({uSamplers:tr},!0)},to=h.plugins[q]._shader.program;gU[q]=new _n(to,ti)}w=gU[q]}return w},n.prototype._calculateBounds=function(){this.finishPoly();var h=this._geometry;if(h.graphicsData.length){var w=h.bounds,q=w.minX,tr=w.minY,tn=w.maxX,ti=w.maxY;this._bounds.addFrame(this.transform,q,tr,tn,ti)}},n.prototype.containsPoint=function(h){return this.worldTransform.applyInverse(h,n._TEMP_POINT),this._geometry.containsPoint(n._TEMP_POINT)},n.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var h=Uo(this.tint,gk),w=0;w<this.batches.length;w++){var q=this.batches[w],tr=q._batchRGB,tn=(h[0]*tr[0]*255<<16)+(h[1]*tr[1]*255<<8)+(0|h[2]*tr[2]*255);q._tintRGB=(tn>>16)+(65280&tn)+((255&tn)<<16)}}},n.prototype.calculateVertices=function(){var h=this.transform._worldID;if(this._transformID!==h){this._transformID=h;for(var w=this.transform.worldTransform,q=w.a,tr=w.b,tn=w.c,ti=w.d,to=w.tx,ts=w.ty,tu=this._geometry.points,tl=this.vertexData,tc=0,tp=0;tp<tu.length;tp+=2){var td=tu[tp],tm=tu[tp+1];tl[tc++]=q*td+tn*tm+to,tl[tc++]=ti*tm+tr*td+ts}}},n.prototype.closePath=function(){var h=this.currentPath;return h&&(h.closeStroke=!0),this},n.prototype.setMatrix=function(h){return this._matrix=h,this},n.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},n.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},n.prototype.destroy=function(w){h.prototype.destroy.call(this,w),this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,h.prototype.destroy.call(this,w)},n._TEMP_POINT=new fR,n}(fK),Ph=function(h,w){return(Ph=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,w){h.__proto__=w}||function(h,w){for(var q in w)w.hasOwnProperty(q)&&(h[q]=w[q])})(h,w)},gD=new fR,gF=new Uint16Array([0,1,2,0,2,3]),gB=function(h){function n(w){var q=h.call(this)||this;return q._anchor=new fN(q._onAnchorUpdate,q,w?w.defaultAnchor.x:0,w?w.defaultAnchor.y:0),q._texture=null,q._width=0,q._height=0,q._tint=null,q._tintRGB=null,q.tint=16777215,q.blendMode=p8.NORMAL,q._cachedTint=16777215,q.uvs=null,q.texture=w||dE.EMPTY,q.vertexData=new Float32Array(8),q.vertexTrimmedData=null,q._transformID=-1,q._textureID=-1,q._transformTrimmedID=-1,q._textureTrimmedID=-1,q.indices=gF,q.pluginName="batch",q.isSprite=!0,q._roundPixels=lN.ROUND_PIXELS,q}return!function(h,w){function t(){this.constructor=h}Ph(h,w),h.prototype=null===w?Object.create(w):(t.prototype=w.prototype,new t)}(n,h),n.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=lo(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=lo(this.scale.y)*this._height/this._texture.orig.height)},n.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},n.prototype.calculateVertices=function(){var h=this._texture;if(!(this._transformID===this.transform._worldID&&this._textureID===h._updateID)){this._textureID!==h._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=h._updateID;var w=this.transform.worldTransform,q=w.a,tr=w.b,tn=w.c,ti=w.d,to=w.tx,ts=w.ty,tu=this.vertexData,tl=h.trim,tc=h.orig,tp=this._anchor,td=0,tm=0,ty=0,tv=0;if(tl?(td=(tm=tl.x-tp._x*tc.width)+tl.width,ty=(tv=tl.y-tp._y*tc.height)+tl.height):(td=(tm=-tp._x*tc.width)+tc.width,ty=(tv=-tp._y*tc.height)+tc.height),tu[0]=q*tm+tn*tv+to,tu[1]=ti*tv+tr*tm+ts,tu[2]=q*td+tn*tv+to,tu[3]=ti*tv+tr*td+ts,tu[4]=q*td+tn*ty+to,tu[5]=ti*ty+tr*td+ts,tu[6]=q*tm+tn*ty+to,tu[7]=ti*ty+tr*tm+ts,this._roundPixels)for(var tb=lN.RESOLUTION,tx=0;tx<tu.length;++tx)tu[tx]=Math.round((tu[tx]*tb|0)/tb)}},n.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var h=this._texture,w=this.vertexTrimmedData,q=h.orig,tr=this._anchor,tn=this.transform.worldTransform,ti=tn.a,to=tn.b,ts=tn.c,tu=tn.d,tl=tn.tx,tc=tn.ty,tp=-tr._x*q.width,td=tp+q.width,tm=-tr._y*q.height,ty=tm+q.height;w[0]=ti*tp+ts*tm+tl,w[1]=tu*tm+to*tp+tc,w[2]=ti*td+ts*tm+tl,w[3]=tu*tm+to*td+tc,w[4]=ti*td+ts*ty+tl,w[5]=tu*ty+to*td+tc,w[6]=ti*tp+ts*ty+tl,w[7]=tu*ty+to*tp+tc},n.prototype._render=function(h){this.calculateVertices(),h.batch.setObjectRenderer(h.plugins[this.pluginName]),h.plugins[this.pluginName].render(this)},n.prototype._calculateBounds=function(){var h=this._texture.trim,w=this._texture.orig;h&&(h.width!==w.width||h.height!==w.height)?(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData)):(this.calculateVertices(),this._bounds.addQuad(this.vertexData))},n.prototype.getLocalBounds=function(w){return 0===this.children.length?(this._bounds.minX=-(this._texture.orig.width*this._anchor._x),this._bounds.minY=-(this._texture.orig.height*this._anchor._y),this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),w||(this._localBoundsRect||(this._localBoundsRect=new fw),w=this._localBoundsRect),this._bounds.getRectangle(w)):h.prototype.getLocalBounds.call(this,w)},n.prototype.containsPoint=function(h){this.worldTransform.applyInverse(h,gD);var w=this._texture.orig.width,q=this._texture.orig.height,tr=-w*this.anchor.x,tn=0;return gD.x>=tr&&gD.x<tr+w&&(tn=-q*this.anchor.y,gD.y>=tn&&gD.y<tn+q)},n.prototype.destroy=function(w){if(h.prototype.destroy.call(this,w),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof w?w:w&&w.texture){var q="boolean"==typeof w?w:w&&w.baseTexture;this._texture.destroy(!!q)}this._texture=null},n.from=function(h,w){var q=h instanceof dE?h:dE.from(h,w);return new n(q)},Object.defineProperty(n.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(h){this._roundPixels!==h&&(this._transformID=-1),this._roundPixels=h},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(h){var w=lo(this.scale.x)||1;this.scale.x=w*h/this._texture.orig.width,this._width=h},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(h){var w=lo(this.scale.y)||1;this.scale.y=w*h/this._texture.orig.height,this._height=h},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"anchor",{get:function(){return this._anchor},set:function(h){this._anchor.copyFrom(h)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"tint",{get:function(){return this._tint},set:function(h){this._tint=h,this._tintRGB=(h>>16)+(65280&h)+((255&h)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"texture",{get:function(){return this._texture},set:function(h){this._texture!==h&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=h||dE.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,h&&(h.baseTexture.valid?this._onTextureUpdate():h.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),n}(fK),Rh=function(h,w){return(Rh=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,w){h.__proto__=w}||function(h,w){for(var q in w)w.hasOwnProperty(q)&&(h[q]=w[q])})(h,w)};(tr=tw||(tw={}))[tr.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",tr[tr.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL";var gj={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:tw.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},gG=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],gV=function(){function e(h){this.styleID=0,this.reset(),sc(this,h,h)}return e.prototype.clone=function(){var h={};return sc(h,this,gj),new e(h)},e.prototype.reset=function(){sc(this,gj,gj)},Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(h){this._align!==h&&(this._align=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"breakWords",{get:function(){return this._breakWords},set:function(h){this._breakWords!==h&&(this._breakWords=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(h){this._dropShadow!==h&&(this._dropShadow=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(h){this._dropShadowAlpha!==h&&(this._dropShadowAlpha=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(h){this._dropShadowAngle!==h&&(this._dropShadowAngle=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(h){this._dropShadowBlur!==h&&(this._dropShadowBlur=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(h){var w=ac(h);this._dropShadowColor!==w&&(this._dropShadowColor=w,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(h){this._dropShadowDistance!==h&&(this._dropShadowDistance=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fill},set:function(h){var w=ac(h);this._fill!==w&&(this._fill=w,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(h){this._fillGradientType!==h&&(this._fillGradientType=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(h){(function(h,w){if(!Array.isArray(h)||!Array.isArray(w)||h.length!==w.length)return!1;for(var q=0;q<h.length;++q)if(h[q]!==w[q])return!1;return!0})(this._fillGradientStops,h)||(this._fillGradientStops=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(h){this.fontFamily!==h&&(this._fontFamily=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(h){this._fontSize!==h&&(this._fontSize=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(h){this._fontStyle!==h&&(this._fontStyle=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(h){this._fontVariant!==h&&(this._fontVariant=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(h){this._fontWeight!==h&&(this._fontWeight=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(h){this._letterSpacing!==h&&(this._letterSpacing=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(h){this._lineHeight!==h&&(this._lineHeight=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leading",{get:function(){return this._leading},set:function(h){this._leading!==h&&(this._leading=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(h){this._lineJoin!==h&&(this._lineJoin=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(h){this._miterLimit!==h&&(this._miterLimit=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"padding",{get:function(){return this._padding},set:function(h){this._padding!==h&&(this._padding=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stroke",{get:function(){return this._stroke},set:function(h){var w=ac(h);this._stroke!==w&&(this._stroke=w,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(h){this._strokeThickness!==h&&(this._strokeThickness=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(h){this._textBaseline!==h&&(this._textBaseline=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trim",{get:function(){return this._trim},set:function(h){this._trim!==h&&(this._trim=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(h){this._whiteSpace!==h&&(this._whiteSpace=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(h){this._wordWrap!==h&&(this._wordWrap=h,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(h){this._wordWrapWidth!==h&&(this._wordWrapWidth=h,this.styleID++)},enumerable:!1,configurable:!0}),e.prototype.toFontString=function(){var h="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,w=this.fontFamily;Array.isArray(this.fontFamily)||(w=this.fontFamily.split(","));for(var q=w.length-1;q>=0;q--){var tr=w[q].trim();!/([\"\'])[^\'\"]+\1/.test(tr)&&0>gG.indexOf(tr)&&(tr='"'+tr+'"'),w[q]=tr}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+h+" "+w.join(",")},e}();function C_(h){return"number"==typeof h?Um(h):("string"==typeof h&&0===h.indexOf("0x")&&(h=h.replace("0x","#")),h)}function ac(h){if(!Array.isArray(h))return C_(h);for(var w=0;w<h.length;++w)h[w]=C_(h[w]);return h}function sc(h,w,q){for(var tr in q)Array.isArray(w[tr])?h[tr]=w[tr].slice():h[tr]=w[tr]}var gX=function(){function e(h,w,q,tr,tn,ti,to,ts,tu){this.text=h,this.style=w,this.width=q,this.height=tr,this.lines=tn,this.lineWidths=ti,this.lineHeight=to,this.maxLineWidth=ts,this.fontProperties=tu}return e.measureText=function(h,w,q,tr){void 0===tr&&(tr=e._canvas),q=q??w.wordWrap;var tn=w.toFontString(),ti=e.measureFont(tn);0===ti.fontSize&&(ti.fontSize=w.fontSize,ti.ascent=w.fontSize);var to=tr.getContext("2d");to.font=tn;for(var ts=q?e.wordWrap(h,w,tr):h,tu=ts.split(/(?:\r\n|\r|\n)/),tl=Array(tu.length),tc=0,tp=0;tp<tu.length;tp++){var td=to.measureText(tu[tp]).width+(tu[tp].length-1)*w.letterSpacing;tl[tp]=td,tc=Math.max(tc,td)}var tm=tc+w.strokeThickness;w.dropShadow&&(tm+=w.dropShadowDistance);var ty=w.lineHeight||ti.fontSize+w.strokeThickness,tv=Math.max(ty,ti.fontSize+w.strokeThickness)+(tu.length-1)*(ty+w.leading);return w.dropShadow&&(tv+=w.dropShadowDistance),new e(h,w,tm,tv,tu,tl,ty+w.leading,tc,ti)},e.wordWrap=function(h,w,q){void 0===q&&(q=e._canvas);for(var tr=q.getContext("2d"),tn=0,ti="",to="",ts={},tu=w.letterSpacing,tl=w.whiteSpace,tc=e.collapseSpaces(tl),tp=e.collapseNewlines(tl),td=!tc,tm=w.wordWrapWidth+tu,ty=e.tokenize(h),tv=0;tv<ty.length;tv++){var tb=ty[tv];if(e.isNewline(tb)){if(!tp){to+=e.addLine(ti),td=!tc,ti="",tn=0;continue}tb=" "}if(tc){var tx=e.isBreakingSpace(tb),tT=e.isBreakingSpace(ti[ti.length-1]);if(tx&&tT)continue}var tE=e.getFromCache(tb,tu,ts,tr);if(tE>tm){if(""!==ti&&(to+=e.addLine(ti),ti="",tn=0),e.canBreakWords(tb,w.breakWords))for(var tA=e.wordWrapSplit(tb),tO=0;tO<tA.length;tO++){for(var tw=tA[tO],tL=1;tA[tO+tL];){var tS=tA[tO+tL],tI=tw[tw.length-1];if(e.canBreakChars(tI,tS,tb,tO,w.breakWords))break;tw+=tS,tL++}tO+=tw.length-1;var tP=e.getFromCache(tw,tu,ts,tr);tP+tn>tm&&(to+=e.addLine(ti),td=!1,ti="",tn=0),ti+=tw,tn+=tP}else{ti.length>0&&(to+=e.addLine(ti),ti="",tn=0);var tR=tv===ty.length-1;to+=e.addLine(tb,!tR),td=!1,ti="",tn=0}}else tE+tn>tm&&(td=!1,to+=e.addLine(ti),ti="",tn=0),(ti.length>0||!e.isBreakingSpace(tb)||td)&&(ti+=tb,tn+=tE)}return to+e.addLine(ti,!1)},e.addLine=function(h,w){return void 0===w&&(w=!0),h=e.trimRight(h),h=w?h+`
`:h},e.getFromCache=function(h,w,q,tr){var tn=q[h];if(void 0===tn){var ti=h.length*w;tn=tr.measureText(h).width+ti,q[h]=tn}return tn},e.collapseSpaces=function(h){return"normal"===h||"pre-line"===h},e.collapseNewlines=function(h){return"normal"===h},e.trimRight=function(h){if("string"!=typeof h)return"";for(var w=h.length-1;w>=0;w--){var q=h[w];if(!e.isBreakingSpace(q))break;h=h.slice(0,-1)}return h},e.isNewline=function(h){return"string"==typeof h&&e._newlines.indexOf(h.charCodeAt(0))>=0},e.isBreakingSpace=function(h){return"string"==typeof h&&e._breakingSpaces.indexOf(h.charCodeAt(0))>=0},e.tokenize=function(h){var w=[],q="";if("string"!=typeof h)return w;for(var tr=0;tr<h.length;tr++){var tn=h[tr];if(e.isBreakingSpace(tn)||e.isNewline(tn)){""!==q&&(w.push(q),q=""),w.push(tn);continue}q+=tn}return""!==q&&w.push(q),w},e.canBreakWords=function(h,w){return w},e.canBreakChars=function(h,w,q,tr,tn){return!0},e.wordWrapSplit=function(h){return h.split("")},e.measureFont=function(h){if(e._fonts[h])return e._fonts[h];var w={ascent:0,descent:0,fontSize:0},q=e._canvas,tr=e._context;tr.font=h;var tn=e.METRICS_STRING+e.BASELINE_SYMBOL,ti=Math.ceil(tr.measureText(tn).width),to=Math.ceil(tr.measureText(e.BASELINE_SYMBOL).width),ts=2*to;to=to*e.BASELINE_MULTIPLIER|0,q.width=ti,q.height=ts,tr.fillStyle="#f00",tr.fillRect(0,0,ti,ts),tr.font=h,tr.textBaseline="alphabetic",tr.fillStyle="#000",tr.fillText(tn,0,to);var tu=tr.getImageData(0,0,ti,ts).data,tl=tu.length,tc=4*ti,tp=0,td=0,tm=!1;for(tp=0;tp<to;++tp){for(var ty=0;ty<tc;ty+=4)if(255!==tu[td+ty]){tm=!0;break}if(tm)break;td+=tc}for(w.ascent=to-tp,td=tl-tc,tm=!1,tp=ts;tp>to;--tp){for(var ty=0;ty<tc;ty+=4)if(255!==tu[td+ty]){tm=!0;break}if(tm)break;td-=tc}return w.descent=tp-to,w.fontSize=w.ascent+w.descent,e._fonts[h]=w,w},e.clearMetrics=function(h){void 0===h&&(h=""),h?delete e._fonts[h]:e._fonts={}},e}(),gH=function(){try{var h=new OffscreenCanvas(0,0),w=h.getContext("2d");return w&&w.measureText?h:document.createElement("canvas")}catch{return document.createElement("canvas")}}();gH.width=gH.height=10,gX._canvas=gH,gX._context=gH.getContext("2d"),gX._fonts={},gX.METRICS_STRING="|\xc9q\xc5",gX.BASELINE_SYMBOL="M",gX.BASELINE_MULTIPLIER=1.4,gX._newlines=[10,13],gX._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var gz={texture:!0,children:!1,baseTexture:!0},gK=function(h){function n(w,q,tr){var tn=this,ti=!1;tr||(tr=document.createElement("canvas"),ti=!0),tr.width=3,tr.height=3;var to=dE.from(tr);return to.orig=new fw,to.trim=new fw,(tn=h.call(this,to)||this)._ownCanvas=ti,tn.canvas=tr,tn.context=tn.canvas.getContext("2d"),tn._resolution=lN.RESOLUTION,tn._autoResolution=!0,tn._text=null,tn._style=null,tn._styleListener=null,tn._font="",tn.text=w,tn.style=q,tn.localStyleID=-1,tn}return!function(h,w){function t(){this.constructor=h}Rh(h,w),h.prototype=null===w?Object.create(w):(t.prototype=w.prototype,new t)}(n,h),n.prototype.updateText=function(h){var w=this._style;if(this.localStyleID!==w.styleID&&(this.dirty=!0,this.localStyleID=w.styleID),!(!this.dirty&&h)){this._font=this._style.toFontString();var q=this.context,tr=gX.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),tn=tr.width,ti=tr.height,to=tr.lines,ts=tr.lineHeight,tu=tr.lineWidths,tl=tr.maxLineWidth,tc=tr.fontProperties;this.canvas.width=Math.ceil((Math.max(1,tn)+2*w.padding)*this._resolution),this.canvas.height=Math.ceil((Math.max(1,ti)+2*w.padding)*this._resolution),q.scale(this._resolution,this._resolution),q.clearRect(0,0,this.canvas.width,this.canvas.height),q.font=this._font,q.lineWidth=w.strokeThickness,q.textBaseline=w.textBaseline,q.lineJoin=w.lineJoin,q.miterLimit=w.miterLimit;for(var tp,td,tm=w.dropShadow?2:1,ty=0;ty<tm;++ty){var tv=w.dropShadow&&0===ty,tb=tv?2*ti:0,tx=tb*this.resolution;if(tv){q.fillStyle="black",q.strokeStyle="black";var tT=w.dropShadowColor,tE=Uo("number"==typeof tT?tT:Mm(tT));q.shadowColor="rgba("+255*tE[0]+","+255*tE[1]+","+255*tE[2]+","+w.dropShadowAlpha+")",q.shadowBlur=w.dropShadowBlur,q.shadowOffsetX=Math.cos(w.dropShadowAngle)*w.dropShadowDistance,q.shadowOffsetY=Math.sin(w.dropShadowAngle)*w.dropShadowDistance+tx}else q.fillStyle=this._generateFillStyle(w,to,tr),q.strokeStyle=w.stroke,q.shadowColor="0",q.shadowBlur=0,q.shadowOffsetX=0,q.shadowOffsetY=0;for(var tA=0;tA<to.length;tA++)tp=w.strokeThickness/2,td=w.strokeThickness/2+tA*ts+tc.ascent,"right"===w.align?tp+=tl-tu[tA]:"center"===w.align&&(tp+=(tl-tu[tA])/2),w.stroke&&w.strokeThickness&&this.drawLetterSpacing(to[tA],tp+w.padding,td+w.padding-tb,!0),w.fill&&this.drawLetterSpacing(to[tA],tp+w.padding,td+w.padding-tb)}this.updateTexture()}},n.prototype.drawLetterSpacing=function(h,w,q,tr){void 0===tr&&(tr=!1);var tn=this._style.letterSpacing;if(0===tn){tr?this.context.strokeText(h,w,q):this.context.fillText(h,w,q);return}for(var ti=w,to=Array.from?Array.from(h):h.split(""),ts=this.context.measureText(h).width,tu=0,tl=0;tl<to.length;++tl){var tc=to[tl];tr?this.context.strokeText(tc,ti,q):this.context.fillText(tc,ti,q),ti+=ts-(tu=this.context.measureText(h.substring(tl+1)).width)+tn,ts=tu}},n.prototype.updateTexture=function(){var h=this.canvas;if(this._style.trim){var w=function(h){var w,q,tr,tn=h.width,ti=h.height,to=h.getContext("2d"),ts=to.getImageData(0,0,tn,ti).data,tu=ts.length,tl={top:null,left:null,right:null,bottom:null},tc=null;for(w=0;w<tu;w+=4)0!==ts[w+3]&&(q=w/4%tn,tr=~~(w/4/tn),null===tl.top&&(tl.top=tr),(null===tl.left||q<tl.left)&&(tl.left=q),(null===tl.right||tl.right<q)&&(tl.right=q+1),(null===tl.bottom||tl.bottom<tr)&&(tl.bottom=tr));return null!==tl.top&&(tn=tl.right-tl.left,ti=tl.bottom-tl.top+1,tc=to.getImageData(tl.left,tl.top,tn,ti)),{height:ti,width:tn,data:tc}}(h);w.data&&(h.width=w.width,h.height=w.height,this.context.putImageData(w.data,0,0))}var q=this._texture,tr=this._style,tn=tr.trim?0:tr.padding,ti=q.baseTexture;q.trim.width=q._frame.width=Math.ceil(h.width/this._resolution),q.trim.height=q._frame.height=Math.ceil(h.height/this._resolution),q.trim.x=-tn,q.trim.y=-tn,q.orig.width=q._frame.width-2*tn,q.orig.height=q._frame.height-2*tn,this._onTextureUpdate(),ti.setRealSize(h.width,h.height,this._resolution),this._recursivePostUpdateTransform(),this.dirty=!1},n.prototype._render=function(w){this._autoResolution&&this._resolution!==w.resolution&&(this._resolution=w.resolution,this.dirty=!0),this.updateText(!0),h.prototype._render.call(this,w)},n.prototype.getLocalBounds=function(w){return this.updateText(!0),h.prototype.getLocalBounds.call(this,w)},n.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},n.prototype._generateFillStyle=function(h,w,q){var tr=h.fill;if(!Array.isArray(tr))return tr;if(1===tr.length)return tr[0];var tn,ti=h.dropShadow?h.dropShadowDistance:0,to=h.padding||0,ts=Math.ceil(this.canvas.width/this._resolution)-ti-2*to,tu=Math.ceil(this.canvas.height/this._resolution)-ti-2*to,tl=tr.slice(),tc=h.fillGradientStops.slice();if(!tc.length)for(var tp=tl.length+1,td=1;td<tp;++td)tc.push(td/tp);if(tl.unshift(tr[0]),tc.unshift(0),tl.push(tr[tr.length-1]),tc.push(1),h.fillGradientType===tw.LINEAR_VERTICAL){tn=this.context.createLinearGradient(ts/2,to,ts/2,tu+to);for(var tm=0,ty=q.fontProperties.fontSize+h.strokeThickness,tv=ty/tu,td=0;td<w.length;td++)for(var tb=q.lineHeight*td,tx=0;tx<tl.length;tx++){var tT=Math.max(tm,tb/tu+("number"==typeof tc[tx]?tc[tx]:tx/tl.length)*tv);tT=Math.min(tT,1),tn.addColorStop(tT,tl[tx]),tm=tT}}else{tn=this.context.createLinearGradient(to,tu/2,ts+to,tu/2);for(var tE=tl.length+1,tA=1,td=0;td<tl.length;td++){var tO=void 0;tO="number"==typeof tc[td]?tc[td]:tA/tE,tn.addColorStop(tO,tl[td]),tA++}}return tn},n.prototype.destroy=function(w){"boolean"==typeof w&&(w={children:w}),w=Object.assign({},gz,w),h.prototype.destroy.call(this,w),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(n.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(h){this.updateText(!0);var w=lo(this.scale.x)||1;this.scale.x=w*h/this._texture.orig.width,this._width=h},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(h){this.updateText(!0);var w=lo(this.scale.y)||1;this.scale.y=w*h/this._texture.orig.height,this._height=h},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"style",{get:function(){return this._style},set:function(h){(h=h||{})instanceof gV?this._style=h:this._style=new gV(h),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"text",{get:function(){return this._text},set:function(h){h=String(h??""),this._text!==h&&(this._text=h,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"resolution",{get:function(){return this._resolution},set:function(h){this._autoResolution=!1,this._resolution!==h&&(this._resolution=h,this.dirty=!0)},enumerable:!1,configurable:!0}),n}(gB);/*!
 * @pixi/prepare - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */lN.UPLOADS_PER_FRAME=4;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Nh=function(h,w){return(Nh=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,w){h.__proto__=w}||function(h,w){for(var q in w)w.hasOwnProperty(q)&&(h[q]=w[q])})(h,w)},gY=function(){function e(h){this.maxItemsPerFrame=h,this.itemsLeft=0}return e.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},e.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},e}();function AS(h,w){var q=!1;if(h&&h._textures&&h._textures.length){for(var tr=0;tr<h._textures.length;tr++)if(h._textures[tr]instanceof dE){var tn=h._textures[tr].baseTexture;-1===w.indexOf(tn)&&(w.push(tn),q=!0)}}return q}function ES(h,w){if(h.baseTexture instanceof f9){var q=h.baseTexture;return -1===w.indexOf(q)&&w.push(q),!0}return!1}function wS(h,w){if(h._texture&&h._texture instanceof dE){var q=h._texture.baseTexture;return -1===w.indexOf(q)&&w.push(q),!0}return!1}function OS(h,w){return w instanceof gK&&(w.updateText(!0),!0)}function LS(h,w){if(w instanceof gV){var q=w.toFontString();return gX.measureFont(q),!0}return!1}function SS(h,w){if(h instanceof gK){-1===w.indexOf(h.style)&&w.push(h.style),-1===w.indexOf(h)&&w.push(h);var q=h._texture.baseTexture;return -1===w.indexOf(q)&&w.push(q),!0}return!1}function IS(h,w){return h instanceof gV&&(-1===w.indexOf(h)&&w.push(h),!0)}function c0(h,w){return w instanceof f9&&(w._glTextures[h.CONTEXT_UID]||h.texture.bind(w),!0)}function RS(h,w){if(!(w instanceof gC))return!1;var q=w.geometry;w.finishPoly(),q.updateBatches();for(var tr=q.batches,tn=0;tn<tr.length;tn++){var ti=tr[tn].style.texture;ti&&c0(h,ti.baseTexture)}return q.batchable||h.geometry.bind(q,w._resolveDirectShader(h)),!0}function NS(h,w){return h instanceof gC&&(w.push(h),!0)}var gW=function(h){function n(w){var q=h.call(this,w)||this;return q.uploadHookHelper=q.renderer,q.registerFindHook(NS),q.registerUploadHook(c0),q.registerUploadHook(RS),q}return!function(h,w){function t(){this.constructor=h}Nh(h,w),h.prototype=null===w?Object.create(w):(t.prototype=w.prototype,new t)}(n,h),n}(function(){function e(h){var w=this;this.limiter=new gY(lN.UPLOADS_PER_FRAME),this.renderer=h,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){w.queue&&w.prepareItems()},this.registerFindHook(SS),this.registerFindHook(IS),this.registerFindHook(AS),this.registerFindHook(ES),this.registerFindHook(wS),this.registerUploadHook(OS),this.registerUploadHook(LS)}return e.prototype.upload=function(h,w){"function"==typeof h&&(w=h,h=null),h&&this.add(h),this.queue.length?(w&&this.completes.push(w),this.ticking||(this.ticking=!0,fq.system.addOnce(this.tick,this,gp.UTILITY))):w&&w()},e.prototype.tick=function(){setTimeout(this.delayedTick,0)},e.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var h=this.queue[0],w=!1;if(h&&!h._destroyed){for(var q=0,tr=this.uploadHooks.length;q<tr;q++)if(this.uploadHooks[q](this.uploadHookHelper,h)){this.queue.shift(),w=!0;break}}w||this.queue.shift()}if(this.queue.length)fq.system.addOnce(this.tick,this,gp.UTILITY);else{this.ticking=!1;var tn=this.completes.slice(0);this.completes.length=0;for(var q=0,tr=tn.length;q<tr;q++)tn[q]()}},e.prototype.registerFindHook=function(h){return h&&this.addHooks.push(h),this},e.prototype.registerUploadHook=function(h){return h&&this.uploadHooks.push(h),this},e.prototype.add=function(h){for(var w=0,q=this.addHooks.length;w<q&&!this.addHooks[w](h,this.queue);w++);if(h instanceof fK)for(var w=h.children.length-1;w>=0;w--)this.add(h.children[w]);return this},e.prototype.destroy=function(){this.ticking&&fq.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},e}()),gq=function(){function e(h,w,q){void 0===q&&(q=null),this._texture=h instanceof dE?h:null,this.baseTexture=h instanceof f9?h:this._texture.baseTexture,this.textures={},this.animations={},this.data=w;var tr=this.baseTexture.resource;this.resolution=this._updateResolution(q||(tr?tr.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return e.prototype._updateResolution=function(h){void 0===h&&(h=null);var w=this.data.meta.scale,q=bu(h,null);return null===q&&(q=void 0!==w?parseFloat(w):1),1!==q&&this.baseTexture.setResolution(q),q},e.prototype.parse=function(h){this._batchIndex=0,this._callback=h,this._frameKeys.length<=e.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},e.prototype._processFrames=function(h){for(var w=h,q=e.BATCH_SIZE;w-h<q&&w<this._frameKeys.length;){var tr=this._frameKeys[w],tn=this._frames[tr],ti=tn.frame;if(ti){var to=null,ts=null,tu=!1!==tn.trimmed&&tn.sourceSize?tn.sourceSize:tn.frame,tl=new fw(0,0,Math.floor(tu.w)/this.resolution,Math.floor(tu.h)/this.resolution);to=tn.rotated?new fw(Math.floor(ti.x)/this.resolution,Math.floor(ti.y)/this.resolution,Math.floor(ti.h)/this.resolution,Math.floor(ti.w)/this.resolution):new fw(Math.floor(ti.x)/this.resolution,Math.floor(ti.y)/this.resolution,Math.floor(ti.w)/this.resolution,Math.floor(ti.h)/this.resolution),!1!==tn.trimmed&&tn.spriteSourceSize&&(ts=new fw(Math.floor(tn.spriteSourceSize.x)/this.resolution,Math.floor(tn.spriteSourceSize.y)/this.resolution,Math.floor(ti.w)/this.resolution,Math.floor(ti.h)/this.resolution)),this.textures[tr]=new dE(this.baseTexture,to,tl,ts,tn.rotated?2:0,tn.anchor),dE.addToCache(this.textures[tr],tr)}w++}},e.prototype._processAnimations=function(){var h=this.data.animations||{};for(var w in h){this.animations[w]=[];for(var q=0;q<h[w].length;q++){var tr=h[w][q];this.animations[w].push(this.textures[tr])}}},e.prototype._parseComplete=function(){var h=this._callback;this._callback=null,this._batchIndex=0,h.call(this,this.textures)},e.prototype._nextBatch=function(){var h=this;this._processFrames(this._batchIndex*e.BATCH_SIZE),this._batchIndex++,setTimeout(function(){h._batchIndex*e.BATCH_SIZE<h._frameKeys.length?h._nextBatch():(h._processAnimations(),h._parseComplete())},0)},e.prototype.destroy=function(h){var w;for(var q in void 0===h&&(h=!1),this.textures)this.textures[q].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,h&&(null===(w=this._texture)||void 0===w||w.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},e.BATCH_SIZE=1e3,e}(),gZ=function(){function e(){}return e.use=function(h,w){var q=h.name+"_image";if(!h.data||h.type!==_J.TYPE.JSON||!h.data.frames||this.resources[q]){w();return}var tr={crossOrigin:h.crossOrigin,metadata:h.metadata.imageMetadata,parentResource:h},tn=e.getResourcePath(h,this.baseUrl);this.add(q,tn,tr,function(q){if(q.error){w(q.error);return}var tr=new gq(q.texture,h.data,h.url);tr.parse(function(){h.spritesheet=tr,h.textures=tr.textures,w()})})},e.getResourcePath=function(h,w){return h.isDataUrl?h.data.meta.image:lB.resolve(h.url.replace(w,""),h.data.meta.image)},e}(),kh=function(h,w){return(kh=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,w){h.__proto__=w}||function(h,w){for(var q in w)w.hasOwnProperty(q)&&(h[q]=w[q])})(h,w)};function h0(h,w){function t(){this.constructor=h}kh(h,w),h.prototype=null===w?Object.create(w):(t.prototype=w.prototype,new t)}var gJ=new fR;!function(h){function n(w,q,tr){void 0===q&&(q=100),void 0===tr&&(tr=100);var tn=h.call(this,w)||this;return tn.tileTransform=new fV,tn._width=q,tn._height=tr,tn.uvMatrix=w.uvMatrix||new _h(w),tn.pluginName="tilingSprite",tn.uvRespectAnchor=!1,tn}h0(n,h),Object.defineProperty(n.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(h){this.uvMatrix.clampMargin=h,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(h){this.tileTransform.scale.copyFrom(h)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(h){this.tileTransform.position.copyFrom(h)},enumerable:!1,configurable:!0}),n.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},n.prototype._render=function(h){var w=this._texture;w&&w.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),h.batch.setObjectRenderer(h.plugins[this.pluginName]),h.plugins[this.pluginName].render(this))},n.prototype._calculateBounds=function(){var h=-(this._width*this._anchor._x),w=-(this._height*this._anchor._y),q=this._width*(1-this._anchor._x),tr=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,h,w,q,tr)},n.prototype.getLocalBounds=function(w){return 0===this.children.length?(this._bounds.minX=-(this._width*this._anchor._x),this._bounds.minY=-(this._height*this._anchor._y),this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),w||(this._localBoundsRect||(this._localBoundsRect=new fw),w=this._localBoundsRect),this._bounds.getRectangle(w)):h.prototype.getLocalBounds.call(this,w)},n.prototype.containsPoint=function(h){this.worldTransform.applyInverse(h,gJ);var w=this._width,q=this._height,tr=-w*this.anchor._x;if(gJ.x>=tr&&gJ.x<tr+w){var tn=-q*this.anchor._y;if(gJ.y>=tn&&gJ.y<tn+q)return!0}return!1},n.prototype.destroy=function(w){h.prototype.destroy.call(this,w),this.tileTransform=null,this.uvMatrix=null},n.from=function(h,w){return"number"==typeof w&&(Qn("5.3.0","TilingSprite.from use options instead of width and height args"),w={width:w,height:arguments[2]}),new n(dE.from(h,w),w.width,w.height)},Object.defineProperty(n.prototype,"width",{get:function(){return this._width},set:function(h){this._width=h},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this._height},set:function(h){this._height=h},enumerable:!1,configurable:!0})}(gB);var gQ=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,g$=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord - floor(vTextureCoord - uClampOffset);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture2D(uSampler, coord);
    gl_FragColor = texSample * uColor;
}
`,g0=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 sample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = sample * uColor;
}
`,g1=new fM,g2=function(h){function n(w){var q=h.call(this,w)||this,tr={globals:q.renderer.globalUniforms};return q.shader=_n.from(gQ,g$,tr),q.simpleShader=_n.from(gQ,g0,tr),q.quad=new dU,q.state=_i.for2d(),q}return h0(n,h),n.prototype.render=function(h){var w,q=this.renderer,tr=this.quad,tn=tr.vertices;tn[0]=tn[6]=-(h._width*h.anchor.x),tn[1]=tn[3]=-(h._height*h.anchor.y),tn[2]=tn[4]=h._width*(1-h.anchor.x),tn[5]=tn[7]=h._height*(1-h.anchor.y),h.uvRespectAnchor&&((tn=tr.uvs)[0]=tn[6]=-h.anchor.x,tn[1]=tn[3]=-h.anchor.y,tn[2]=tn[4]=1-h.anchor.x,tn[5]=tn[7]=1-h.anchor.y),tr.invalidate();var ti=h._texture,to=ti.baseTexture,ts=h.tileTransform.localTransform,tu=h.uvMatrix,tl=to.isPowerOfTwo&&ti.frame.width===to.width&&ti.frame.height===to.height;tl&&(to._glTextures[q.CONTEXT_UID]?tl=to.wrapMode!==fs.CLAMP:to.wrapMode===fs.CLAMP&&(to.wrapMode=fs.REPEAT));var tc=tl?this.simpleShader:this.shader,tp=ti.width,td=ti.height,tm=h._width,ty=h._height;g1.set(ts.a*tp/tm,ts.b*tp/ty,ts.c*td/tm,ts.d*td/ty,ts.tx/tm,ts.ty/ty),g1.invert(),tl?g1.prepend(tu.mapCoord):(tc.uniforms.uMapCoord=tu.mapCoord.toArray(!0),tc.uniforms.uClampFrame=tu.uClampFrame,tc.uniforms.uClampOffset=tu.uClampOffset),tc.uniforms.uTransform=g1.toArray(!0),tc.uniforms.uColor=Bm(h.tint,h.worldAlpha,tc.uniforms.uColor,to.alphaMode),tc.uniforms.translationMatrix=h.transform.worldTransform.toArray(!0),tc.uniforms.uSampler=ti,q.shader.bind(tc),q.geometry.bind(tr),this.state.blendMode=(w=h.blendMode,pM[to.alphaMode?1:0][w]),q.state.set(this.state),q.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},n}(dj),Ch=function(h,w){return(Ch=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,w){h.__proto__=w}||function(h,w){for(var q in w)w.hasOwnProperty(q)&&(h[q]=w[q])})(h,w)};function Cf(h,w){function t(){this.constructor=h}Ch(h,w),h.prototype=null===w?Object.create(w):(t.prototype=w.prototype,new t)}var g3=function(){function e(h,w){this.uvBuffer=h,this.uvMatrix=w,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return e.prototype.update=function(h){if(!(!h&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var w=this.uvBuffer.data;this.data&&this.data.length===w.length||(this.data=new Float32Array(w.length)),this.uvMatrix.multiplyUvs(w,this.data),this._updateID++}},e}(),g4=new fR,g5=new fI,g6=function(h){function n(w,q,tr,tn){void 0===tn&&(tn=p7.TRIANGLES);var ti=h.call(this)||this;return ti.geometry=w,w.refCount++,ti.shader=q,ti.state=tr||_i.for2d(),ti.drawMode=tn,ti.start=0,ti.size=0,ti.uvs=null,ti.indices=null,ti.vertexData=new Float32Array(1),ti.vertexDirty=0,ti._transformID=-1,ti.tint=16777215,ti.blendMode=p8.NORMAL,ti._roundPixels=lN.ROUND_PIXELS,ti.batchUvs=null,ti}return Cf(n,h),Object.defineProperty(n.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"material",{get:function(){return this.shader},set:function(h){this.shader=h},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(h){this.state.blendMode=h},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(h){this._roundPixels!==h&&(this._transformID=-1),this._roundPixels=h},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"tint",{get:function(){return this.shader.tint},set:function(h){this.shader.tint=h},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"texture",{get:function(){return this.shader.texture},set:function(h){this.shader.texture=h},enumerable:!1,configurable:!0}),n.prototype._render=function(h){var w=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===p7.TRIANGLES&&w.length<2*n.BATCHABLE_SIZE?this._renderToBatch(h):this._renderDefault(h)},n.prototype._renderDefault=function(h){var w=this.shader;w.alpha=this.worldAlpha,w.update&&w.update(),h.batch.flush(),w.program.uniformData.translationMatrix&&(w.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0)),h.shader.bind(w),h.state.set(this.state),h.geometry.bind(this.geometry,w),h.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},n.prototype._renderToBatch=function(h){var w=this.geometry;this.shader.uvMatrix&&(this.shader.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=w.indexBuffer.data,this._tintRGB=this.shader._tintRGB,this._texture=this.shader.texture;var q=this.material.pluginName;h.batch.setObjectRenderer(h.plugins[q]),h.plugins[q].render(this)},n.prototype.calculateVertices=function(){var h=this.geometry,w=h.buffers[0].data;if(!(h.vertexDirtyId===this.vertexDirty&&this._transformID===this.transform._worldID)){this._transformID=this.transform._worldID,this.vertexData.length!==w.length&&(this.vertexData=new Float32Array(w.length));for(var q=this.transform.worldTransform,tr=q.a,tn=q.b,ti=q.c,to=q.d,ts=q.tx,tu=q.ty,tl=this.vertexData,tc=0;tc<tl.length/2;tc++){var tp=w[2*tc],td=w[2*tc+1];tl[2*tc]=tr*tp+ti*td+ts,tl[2*tc+1]=tn*tp+to*td+tu}if(this._roundPixels)for(var tm=lN.RESOLUTION,tc=0;tc<tl.length;++tc)tl[tc]=Math.round((tl[tc]*tm|0)/tm);this.vertexDirty=h.vertexDirtyId}},n.prototype.calculateUvs=function(){var h=this.geometry.buffers[1];this.shader.uvMatrix.isSimple?this.uvs=h.data:(this.batchUvs||(this.batchUvs=new g3(h,this.shader.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},n.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},n.prototype.containsPoint=function(h){if(!this.getBounds().contains(h.x,h.y))return!1;this.worldTransform.applyInverse(h,g4);for(var w=this.geometry.getBuffer("aVertexPosition").data,q=g5.points,tr=this.geometry.getIndex().data,tn=tr.length,ti=4===this.drawMode?3:1,to=0;to+2<tn;to+=ti){var ts=2*tr[to],tu=2*tr[to+1],tl=2*tr[to+2];if(q[0]=w[ts],q[1]=w[ts+1],q[2]=w[tu],q[3]=w[tu+1],q[4]=w[tl],q[5]=w[tl+1],g5.contains(g4.x,g4.y))return!0}return!1},n.prototype.destroy=function(w){h.prototype.destroy.call(this,w),this.geometry.refCount--,0===this.geometry.refCount&&this.geometry.dispose(),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},n.BATCHABLE_SIZE=100,n}(fK),g8=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,g7=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`,g9=function(h){function n(w,q){var tr=this,tn={uSampler:w,alpha:1,uTextureMatrix:fM.IDENTITY,uColor:new Float32Array([1,1,1,1])};return(q=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},q)).uniforms&&Object.assign(tn,q.uniforms),(tr=h.call(this,q.program||d9.from(g7,g8),tn)||this)._colorDirty=!1,tr.uvMatrix=new _h(w),tr.batchable=void 0===q.program,tr.pluginName=q.pluginName,tr.tint=q.tint,tr.alpha=q.alpha,tr}return Cf(n,h),Object.defineProperty(n.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(h){this.uniforms.uSampler!==h&&(this.uniforms.uSampler=h,this.uvMatrix.texture=h)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"alpha",{get:function(){return this._alpha},set:function(h){h!==this._alpha&&(this._alpha=h,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"tint",{get:function(){return this._tint},set:function(h){h!==this._tint&&(this._tint=h,this._tintRGB=(h>>16)+(65280&h)+((255&h)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),n.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var h=this.texture.baseTexture;Bm(this._tint,this._alpha,this.uniforms.uColor,h.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},n}(_n),mr=function(h){function n(w,q,tr){var tn=h.call(this)||this,ti=new dS(w),to=new dS(q,!0),ts=new dS(tr,!0,!0);return tn.addAttribute("aVertexPosition",ti,2,!1,fn.FLOAT).addAttribute("aTextureCoord",to,2,!1,fn.FLOAT).addIndex(ts),tn._updateId=-1,tn}return Cf(n,h),Object.defineProperty(n.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),n}(dM),Uh=function(h,w){return(Uh=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,w){h.__proto__=w}||function(h,w){for(var q in w)w.hasOwnProperty(q)&&(h[q]=w[q])})(h,w)},Eu=function(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[]},mn=[function(){function e(){}return e.test=function(h){return"string"==typeof h&&0===h.indexOf("info face=")},e.parse=function(h){var w=h.match(/^[a-z]+\s+.+$/gm),q={info:[],common:[],page:[],char:[],chars:[],kerning:[]};for(var tr in w){var tn=w[tr].match(/^[a-z]+/gm)[0],ti=w[tr].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),to={};for(var ts in ti){var tu=ti[ts].split("="),tl=tu[0],tc=tu[1].replace(/"/gm,""),tp=parseFloat(tc),td=isNaN(tp)?tc:tp;to[tl]=td}q[tn].push(to)}var tm=new Eu;return q.info.forEach(function(h){return tm.info.push({face:h.face,size:parseInt(h.size,10)})}),q.common.forEach(function(h){return tm.common.push({lineHeight:parseInt(h.lineHeight,10)})}),q.page.forEach(function(h){return tm.page.push({id:parseInt(h.id,10),file:h.file})}),q.char.forEach(function(h){return tm.char.push({id:parseInt(h.id,10),page:parseInt(h.page,10),x:parseInt(h.x,10),y:parseInt(h.y,10),width:parseInt(h.width,10),height:parseInt(h.height,10),xoffset:parseInt(h.xoffset,10),yoffset:parseInt(h.yoffset,10),xadvance:parseInt(h.xadvance,10)})}),q.kerning.forEach(function(h){return tm.kerning.push({first:parseInt(h.first,10),second:parseInt(h.second,10),amount:parseInt(h.amount,10)})}),tm},e}(),function(){function e(){}return e.test=function(h){return h instanceof XMLDocument&&h.getElementsByTagName("page").length&&null!==h.getElementsByTagName("info")[0].getAttribute("face")},e.parse=function(h){for(var w=new Eu,q=h.getElementsByTagName("info"),tr=h.getElementsByTagName("common"),tn=h.getElementsByTagName("page"),ti=h.getElementsByTagName("char"),to=h.getElementsByTagName("kerning"),ts=0;ts<q.length;ts++)w.info.push({face:q[ts].getAttribute("face"),size:parseInt(q[ts].getAttribute("size"),10)});for(var ts=0;ts<tr.length;ts++)w.common.push({lineHeight:parseInt(tr[ts].getAttribute("lineHeight"),10)});for(var ts=0;ts<tn.length;ts++)w.page.push({id:parseInt(tn[ts].getAttribute("id"),10)||0,file:tn[ts].getAttribute("file")});for(var ts=0;ts<ti.length;ts++){var tu=ti[ts];w.char.push({id:parseInt(tu.getAttribute("id"),10),page:parseInt(tu.getAttribute("page"),10)||0,x:parseInt(tu.getAttribute("x"),10),y:parseInt(tu.getAttribute("y"),10),width:parseInt(tu.getAttribute("width"),10),height:parseInt(tu.getAttribute("height"),10),xoffset:parseInt(tu.getAttribute("xoffset"),10),yoffset:parseInt(tu.getAttribute("yoffset"),10),xadvance:parseInt(tu.getAttribute("xadvance"),10)})}for(var ts=0;ts<to.length;ts++)w.kerning.push({first:parseInt(to[ts].getAttribute("first"),10),second:parseInt(to[ts].getAttribute("second"),10),amount:parseInt(to[ts].getAttribute("amount"),10)});return w},e}()];function f0(h){for(var w=0;w<mn.length;w++)if(mn[w].test(h))return mn[w];return null}function D_(h,w,q,tr,tn,ti){var to=q.fill;if(!Array.isArray(to))return to;if(1===to.length)return to[0];var ts,tu=q.dropShadow?q.dropShadowDistance:0,tl=q.padding||0,tc=Math.ceil(h.width/tr)-tu-2*tl,tp=Math.ceil(h.height/tr)-tu-2*tl,td=to.slice(),tm=q.fillGradientStops.slice();if(!tm.length)for(var ty=td.length+1,tv=1;tv<ty;++tv)tm.push(tv/ty);if(td.unshift(to[0]),tm.unshift(0),td.push(to[to.length-1]),tm.push(1),q.fillGradientType===tw.LINEAR_VERTICAL){ts=w.createLinearGradient(tc/2,tl,tc/2,tp+tl);for(var tb=0,tx=ti.fontProperties.fontSize+q.strokeThickness,tT=tx/tp,tv=0;tv<tn.length;tv++)for(var tE=ti.lineHeight*tv,tA=0;tA<td.length;tA++){var tO=Math.max(tb,tE/tp+("number"==typeof tm[tA]?tm[tA]:tA/td.length)*tT);tO=Math.min(tO,1),ts.addColorStop(tO,td[tA]),tb=tO}}else{ts=w.createLinearGradient(tl,tp/2,tc+tl,tp/2);for(var tL=td.length+1,tS=1,tv=0;tv<td.length;tv++){var tI=void 0;tI="number"==typeof tm[tv]?tm[tv]:tS/tL,ts.addColorStop(tI,td[tv]),tS++}}return ts}var mo=function(){function e(h,w){var q=h.info[0],tr=h.common[0],tn=bu(h.page[0].file),ti={};this.font=q.face,this.size=q.size,this.lineHeight=tr.lineHeight/tn,this.chars={},this.pageTextures=ti;for(var to=0;to<h.page.length;to++){var ts=h.page[to],tu=ts.id,tl=ts.file;ti[tu]=w instanceof Array?w[to]:w[tl]}for(var to=0;to<h.char.length;to++){var tc=h.char[to],tu=tc.id,tp=tc.page,td=h.char[to],tm=td.x,ty=td.y,tv=td.width,tb=td.height,tx=td.xoffset,tT=td.yoffset,tE=td.xadvance;tm/=tn,ty/=tn,tv/=tn,tb/=tn,tx/=tn,tT/=tn,tE/=tn;var tA=new fw(tm+ti[tp].frame.x/tn,ty+ti[tp].frame.y/tn,tv,tb);this.chars[tu]={xOffset:tx,yOffset:tT,xAdvance:tE,kerning:{},texture:new dE(ti[tp].baseTexture,tA),page:tp}}for(var to=0;to<h.kerning.length;to++){var tO=h.kerning[to],tw=tO.first,tL=tO.second,tS=tO.amount;tw/=tn,tL/=tn,tS/=tn,this.chars[tL]&&(this.chars[tL].kerning[tw]=tS)}}return e.prototype.destroy=function(){for(var h in this.chars)this.chars[h].texture.destroy(),this.chars[h].texture=null;for(var h in this.pageTextures)this.pageTextures[h].destroy(!0),this.pageTextures[h]=null;this.chars=null,this.pageTextures=null},e.install=function(h,w){if(h instanceof Eu)q=h;else{var q,tr=f0(h);if(!tr)throw Error("Unrecognized data format for font.");q=tr.parse(h)}w instanceof dE&&(w=[w]);var tn=new e(q,w);return e.available[tn.font]=tn,tn},e.uninstall=function(h){var w=e.available[h];if(!w)throw Error("No font found named '"+h+"'");w.destroy(),delete e.available[h]},e.from=function(h,w,q){if(!h)throw Error("[BitmapFont] Property `name` is required.");var tr=Object.assign({},e.defaultOptions,q),tn=tr.chars,ti=tr.padding,to=tr.resolution,ts=tr.textureWidth,tu=tr.textureHeight,tl=function(h){"string"==typeof h&&(h=[h]);for(var w=[],q=0,tr=h.length;q<tr;q++){var tn=h[q];if(Array.isArray(tn)){if(2!==tn.length)throw Error("[BitmapFont]: Invalid character range length, expecting 2 got "+tn.length+".");var ti=tn[0].charCodeAt(0),to=tn[1].charCodeAt(0);if(to<ti)throw Error("[BitmapFont]: Invalid character range.");for(var ts=ti;ts<=to;ts++)w.push(String.fromCharCode(ts))}else w.push.apply(w,tn.split(""))}if(0===w.length)throw Error("[BitmapFont]: Empty set when resolving characters.");return w}(tn),tc=w instanceof gV?w:new gV(w),tp=new Eu;tp.info[0]={face:tc.fontFamily,size:tc.fontSize},tp.common[0]={lineHeight:tc.fontSize};for(var td,tm,ty,tv=0,tb=0,tx=0,tT=[],tE=0;tE<tl.length;tE++){td||((td=document.createElement("canvas")).width=ts,td.height=tu,tm=td.getContext("2d"),ty=new f9(td,{resolution:to}),tT.push(new dE(ty)),tp.page.push({id:tT.length-1,file:""}));var tA=gX.measureText(tl[tE],tc,!1,td),tO=tA.width,tw=Math.ceil(tA.height),tL=Math.ceil(("italic"===tc.fontStyle?2:1)*tO);if(tb>=tu-tw*to){if(0===tb)throw Error("[BitmapFont] textureHeight "+tu+"px is too small for "+tc.fontSize+"px fonts");--tE,td=null,tm=null,ty=null,tb=0,tv=0,tx=0;continue}if(tx=Math.max(tw+tA.fontProperties.descent,tx),tL*to+tv>=ts){--tE,tb+=tx*to,tb=Math.ceil(tb),tv=0,tx=0;continue}(function(h,w,q,tr,tn,ti,to){var ts=q.text,tu=q.fontProperties;w.translate(tr,tn),w.scale(ti,ti);var tl=to.strokeThickness/2,tc=-(to.strokeThickness/2);w.font=to.toFontString(),w.lineWidth=to.strokeThickness,w.textBaseline=to.textBaseline,w.lineJoin=to.lineJoin,w.miterLimit=to.miterLimit,w.fillStyle=D_(h,w,to,ti,[ts],q),w.strokeStyle=to.stroke,w.font=to.toFontString(),w.lineWidth=to.strokeThickness,w.textBaseline=to.textBaseline,w.lineJoin=to.lineJoin,w.miterLimit=to.miterLimit,w.fillStyle=D_(h,w,to,ti,[ts],q),w.strokeStyle=to.stroke;var tp=to.dropShadowColor,td=Uo("number"==typeof tp?tp:Mm(tp));to.dropShadow?(w.shadowColor="rgba("+255*td[0]+","+255*td[1]+","+255*td[2]+","+to.dropShadowAlpha+")",w.shadowBlur=to.dropShadowBlur,w.shadowOffsetX=Math.cos(to.dropShadowAngle)*to.dropShadowDistance,w.shadowOffsetY=Math.sin(to.dropShadowAngle)*to.dropShadowDistance):(w.shadowColor="0",w.shadowBlur=0,w.shadowOffsetX=0,w.shadowOffsetY=0),to.stroke&&to.strokeThickness&&w.strokeText(ts,tl,tc+q.lineHeight-tu.descent),to.fill&&w.fillText(ts,tl,tc+q.lineHeight-tu.descent),w.setTransform(),w.fillStyle="rgba(0, 0, 0, 0)"})(td,tm,tA,tv,tb,to,tc);var tS=tA.text.charCodeAt(0);tp.char.push({id:tS,page:tT.length-1,x:tv/to,y:tb/to,width:tL,height:tw,xoffset:0,yoffset:0,xadvance:Math.ceil(tO-(tc.dropShadow?tc.dropShadowDistance:0)-(tc.stroke?tc.strokeThickness:0))}),tv+=(tL+2*ti)*to,tv=Math.ceil(tv)}var tI=new e(tp,tT);return void 0!==e.available[h]&&e.uninstall(h),e.available[h]=tI,tI},e.ALPHA=[["a","z"],["A","Z"]," "],e.NUMERIC=[["0","9"]],e.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],e.ASCII=[[" ","~"]],e.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:e.ALPHANUMERIC},e.available={},e}(),ms=[],ma=[];!function(h){function n(w,q){void 0===q&&(q={});var tr=h.call(this)||this;tr._tint=16777215,q.font&&(Qn("5.3.0","PIXI.BitmapText constructor style.font property is deprecated."),tr._upgradeStyle(q));var tn=Object.assign({},n.styleDefaults,q),ti=tn.align,to=tn.tint,ts=tn.maxWidth,tu=tn.letterSpacing,tl=tn.fontName,tc=tn.fontSize;if(!mo.available[tl])throw Error('Missing BitmapFont "'+tl+'"');return tr._activePagesMeshData=[],tr._textWidth=0,tr._textHeight=0,tr._align=ti,tr._tint=to,tr._fontName=tl,tr._fontSize=tc||mo.available[tl].size,tr._text=w,tr._maxWidth=ts,tr._maxLineHeight=0,tr._letterSpacing=tu,tr._anchor=new fN(function(){tr.dirty=!0},tr,0,0),tr.roundPixels=lN.ROUND_PIXELS,tr.dirty=!0,tr}!function(h,w){function t(){this.constructor=h}Uh(h,w),h.prototype=null===w?Object.create(w):(t.prototype=w.prototype,new t)}(n,h),n.prototype.updateText=function(){for(var h,w=mo.available[this._fontName],q=this._fontSize/w.size,tr=new fR,tn=[],ti=[],to=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",ts=to.length,tu=this._maxWidth*w.size/this._fontSize,tl=null,tc=0,tp=0,td=0,tm=-1,ty=0,tv=0,tb=0,tx=0;tx<ts;tx++){var tT=to.charCodeAt(tx),tE=to.charAt(tx);if(/(?:\s)/.test(tE)&&(tm=tx,ty=tc),"\r"===tE||tE===`
`){ti.push(tc),tp=Math.max(tp,tc),++td,++tv,tr.x=0,tr.y+=w.lineHeight,tl=null;continue}var tA=w.chars[tT];if(tA){tl&&tA.kerning[tl]&&(tr.x+=tA.kerning[tl]);var tO=ma.pop()||{texture:dE.EMPTY,line:0,charCode:0,position:new fR};tO.texture=tA.texture,tO.line=td,tO.charCode=tT,tO.position.x=tr.x+tA.xOffset+this._letterSpacing/2,tO.position.y=tr.y+tA.yOffset,tn.push(tO),tr.x+=tA.xAdvance+this._letterSpacing,tc=tr.x,tb=Math.max(tb,tA.yOffset+tA.texture.height),tl=tT,-1!==tm&&tu>0&&tr.x>tu&&(yo(tn,1+tm-++tv,1+tx-tm),tx=tm,tm=-1,ti.push(ty),tp=Math.max(tp,ty),td++,tr.x=0,tr.y+=w.lineHeight,tl=null)}}var tw=to.charAt(to.length-1);"\r"!==tw&&tw!==`
`&&(/(?:\s)/.test(tw)&&(tc=ty),ti.push(tc),tp=Math.max(tp,tc));for(var tL=[],tx=0;tx<=td;tx++){var tS=0;"right"===this._align?tS=tp-ti[tx]:"center"===this._align&&(tS=(tp-ti[tx])/2),tL.push(tS)}for(var tI=tn.length,tP={},tR=[],tN=this._activePagesMeshData,tx=0;tx<tN.length;tx++)ms.push(tN[tx]);for(var tx=0;tx<tI;tx++){var tM=tn[tx].texture,tk=tM.baseTexture.uid;if(!tP[tk]){var tU=ms.pop();if(!tU){var tC=new mr,tD=new g9(dE.EMPTY);tU={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:new g6(tC,tD),vertices:null,uvs:null,indices:null}}tU.index=0,tU.indexCount=0,tU.vertexCount=0,tU.uvsCount=0,tU.total=0,tU.mesh.texture=new dE(tM.baseTexture),tU.mesh.tint=this._tint,tR.push(tU),tP[tk]=tU}tP[tk].total++}for(var tx=0;tx<tN.length;tx++)-1===tR.indexOf(tN[tx])&&this.removeChild(tN[tx].mesh);for(var tx=0;tx<tR.length;tx++)tR[tx].mesh.parent!==this&&this.addChild(tR[tx].mesh);for(var tx in this._activePagesMeshData=tR,tP){var tU=tP[tx],tF=tU.total;(!((null===(h=tU.indices)||void 0===h?void 0:h.length)>6*tF)||tU.vertices.length<2*g6.BATCHABLE_SIZE)&&(tU.vertices=new Float32Array(8*tF),tU.uvs=new Float32Array(8*tF),tU.indices=new Uint16Array(6*tF)),tU.mesh.size=6*tF}for(var tx=0;tx<tI;tx++){var tE=tn[tx],tB=(tE.position.x+tL[tE.line])*q,tj=tE.position.y*q,tM=tE.texture,tG=tP[tM.baseTexture.uid],tV=tM.frame,tX=tM._uvs,tH=tG.index++;tG.indices[6*tH+0]=0+4*tH,tG.indices[6*tH+1]=1+4*tH,tG.indices[6*tH+2]=2+4*tH,tG.indices[6*tH+3]=0+4*tH,tG.indices[6*tH+4]=2+4*tH,tG.indices[6*tH+5]=3+4*tH,tG.vertices[8*tH+0]=tB,tG.vertices[8*tH+1]=tj,tG.vertices[8*tH+2]=tB+tV.width*q,tG.vertices[8*tH+3]=tj,tG.vertices[8*tH+4]=tB+tV.width*q,tG.vertices[8*tH+5]=tj+tV.height*q,tG.vertices[8*tH+6]=tB,tG.vertices[8*tH+7]=tj+tV.height*q,tG.uvs[8*tH+0]=tX.x0,tG.uvs[8*tH+1]=tX.y0,tG.uvs[8*tH+2]=tX.x1,tG.uvs[8*tH+3]=tX.y1,tG.uvs[8*tH+4]=tX.x2,tG.uvs[8*tH+5]=tX.y2,tG.uvs[8*tH+6]=tX.x3,tG.uvs[8*tH+7]=tX.y3}for(var tx in this._textWidth=tp*q,this._textHeight=(tr.y+w.lineHeight)*q,tP){var tU=tP[tx];if(0!==this.anchor.x||0!==this.anchor.y)for(var tz=0,tK=this._textWidth*this.anchor.x,tY=this._textHeight*this.anchor.y,tW=0;tW<tU.total;tW++)tU.vertices[tz++]-=tK,tU.vertices[tz++]-=tY,tU.vertices[tz++]-=tK,tU.vertices[tz++]-=tY,tU.vertices[tz++]-=tK,tU.vertices[tz++]-=tY,tU.vertices[tz++]-=tK,tU.vertices[tz++]-=tY;this._maxLineHeight=tb*q;var tq=tU.mesh.geometry.getBuffer("aVertexPosition"),tZ=tU.mesh.geometry.getBuffer("aTextureCoord"),tJ=tU.mesh.geometry.getIndex();tq.data=tU.vertices,tZ.data=tU.uvs,tJ.data=tU.indices,tq.update(),tZ.update(),tJ.update()}for(var tx=0;tx<tn.length;tx++)ma.push(tn[tx])},n.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},n.prototype.getLocalBounds=function(){return this.validate(),h.prototype.getLocalBounds.call(this)},n.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(n.prototype,"tint",{get:function(){return this._tint},set:function(h){if(this._tint!==h){this._tint=h;for(var w=0;w<this._activePagesMeshData.length;w++)this._activePagesMeshData[w].mesh.tint=h}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"align",{get:function(){return this._align},set:function(h){this._align!==h&&(this._align=h,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fontName",{get:function(){return this._fontName},set:function(h){if(!mo.available[h])throw Error('Missing BitmapFont "'+h+'"');this._fontName!==h&&(this._fontName=h,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fontSize",{get:function(){return this._fontSize},set:function(h){this._fontSize!==h&&(this._fontSize=h,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"anchor",{get:function(){return this._anchor},set:function(h){"number"==typeof h?this._anchor.set(h):this._anchor.copyFrom(h)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"text",{get:function(){return this._text},set:function(h){h=String(h??""),this._text!==h&&(this._text=h,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(h){this._maxWidth!==h&&(this._maxWidth=h,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(h){this._letterSpacing!==h&&(this._letterSpacing=h,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),n.prototype._upgradeStyle=function(h){if("string"==typeof h.font){var w=h.font.split(" ");h.fontName=1===w.length?w[0]:w.slice(1).join(" "),w.length>=2&&(h.fontSize=parseInt(w[0],10))}else h.fontName=h.font.name,h.fontSize="number"==typeof h.font.size?h.font.size:parseInt(h.font.size,10)},n.registerFont=function(h,w){return Qn("5.3.0","PIXI.BitmapText.registerFont is deprecated, use PIXI.BitmapFont.install"),mo.install(h,w)},Object.defineProperty(n,"fonts",{get:function(){return Qn("5.3.0","PIXI.BitmapText.fonts is deprecated, use PIXI.BitmapFont.available"),mo.available},enumerable:!1,configurable:!0}),n.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0}}(fK);var mu=function(){function e(){}return e.add=function(){_J.setExtensionXhrType("fnt",_J.XHR_RESPONSE_TYPE.DOCUMENT)},e.use=function(h,w){var q=f0(h.data);if(!q){w();return}for(var tr=e.getBaseUrl(this,h),tn=q.parse(h.data),ti={},s=function(q){ti[q.metadata.pageFile]=q.texture,Object.keys(ti).length===tn.page.length&&(h.bitmapFont=mo.install(tn,ti),w())},to=0;to<tn.page.length;++to){var ts=tn.page[to].file,tu=tr+ts,tl=!1;for(var tc in this.resources){var tp=this.resources[tc];if(tp.url===tu){tp.metadata.pageFile=ts,tp.texture?s(tp):tp.onAfterMiddleware.add(s),tl=!0;break}}if(!tl){var td={crossOrigin:h.crossOrigin,loadType:_J.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:ts},h.metadata.imageMetadata),parentResource:h};this.add(tu,td,s)}}},e.getBaseUrl=function(h,w){var q=w.isDataUrl?"":e.dirname(w.url);return w.isDataUrl&&("."===q&&(q=""),h.baseUrl&&q&&"/"===h.baseUrl.charAt(h.baseUrl.length-1)&&(q+="/")),(q=q.replace(h.baseUrl,""))&&"/"!==q.charAt(q.length-1)&&(q+="/"),q},e.dirname=function(h){var w=h.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return w===h?".":""===w?"/":w},e}(),Mh=function(h,w){return(Mh=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,w){h.__proto__=w}||function(h,w){for(var q in w)w.hasOwnProperty(q)&&(h[q]=w[q])})(h,w)},mh=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;!function(h){function n(w){void 0===w&&(w=1);var q=h.call(this,_M,mh,{uAlpha:1})||this;return q.alpha=w,q}!function(h,w){function t(){this.constructor=h}Mh(h,w),h.prototype=null===w?Object.create(w):(t.prototype=w.prototype,new t)}(n,h),Object.defineProperty(n.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(h){this.uniforms.uAlpha=h},enumerable:!1,configurable:!0})}(_a);/*!
 * @pixi/filter-blur - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/filter-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Dh=function(h,w){return(Dh=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,w){h.__proto__=w}||function(h,w){for(var q in w)w.hasOwnProperty(q)&&(h[q]=w[q])})(h,w)};function p0(h,w){function t(){this.constructor=h}Dh(h,w),h.prototype=null===w?Object.create(w):(t.prototype=w.prototype,new t)}var mp=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`,mf={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},md=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);(tn=tL||(tL={}))[tn.WEBGL_LEGACY=0]="WEBGL_LEGACY",tn[tn.WEBGL=1]="WEBGL",tn[tn.WEBGL2=2]="WEBGL2",(ti=tS||(tS={}))[ti.UNKNOWN=0]="UNKNOWN",ti[ti.WEBGL=1]="WEBGL",ti[ti.CANVAS=2]="CANVAS",(to=tI||(tI={}))[to.COLOR=16384]="COLOR",to[to.DEPTH=256]="DEPTH",to[to.STENCIL=1024]="STENCIL",(ts=tP||(tP={}))[ts.NORMAL=0]="NORMAL",ts[ts.ADD=1]="ADD",ts[ts.MULTIPLY=2]="MULTIPLY",ts[ts.SCREEN=3]="SCREEN",ts[ts.OVERLAY=4]="OVERLAY",ts[ts.DARKEN=5]="DARKEN",ts[ts.LIGHTEN=6]="LIGHTEN",ts[ts.COLOR_DODGE=7]="COLOR_DODGE",ts[ts.COLOR_BURN=8]="COLOR_BURN",ts[ts.HARD_LIGHT=9]="HARD_LIGHT",ts[ts.SOFT_LIGHT=10]="SOFT_LIGHT",ts[ts.DIFFERENCE=11]="DIFFERENCE",ts[ts.EXCLUSION=12]="EXCLUSION",ts[ts.HUE=13]="HUE",ts[ts.SATURATION=14]="SATURATION",ts[ts.COLOR=15]="COLOR",ts[ts.LUMINOSITY=16]="LUMINOSITY",ts[ts.NORMAL_NPM=17]="NORMAL_NPM",ts[ts.ADD_NPM=18]="ADD_NPM",ts[ts.SCREEN_NPM=19]="SCREEN_NPM",ts[ts.NONE=20]="NONE",ts[ts.SRC_OVER=0]="SRC_OVER",ts[ts.SRC_IN=21]="SRC_IN",ts[ts.SRC_OUT=22]="SRC_OUT",ts[ts.SRC_ATOP=23]="SRC_ATOP",ts[ts.DST_OVER=24]="DST_OVER",ts[ts.DST_IN=25]="DST_IN",ts[ts.DST_OUT=26]="DST_OUT",ts[ts.DST_ATOP=27]="DST_ATOP",ts[ts.ERASE=26]="ERASE",ts[ts.SUBTRACT=28]="SUBTRACT",ts[ts.XOR=29]="XOR",(tu=tR||(tR={}))[tu.POINTS=0]="POINTS",tu[tu.LINES=1]="LINES",tu[tu.LINE_LOOP=2]="LINE_LOOP",tu[tu.LINE_STRIP=3]="LINE_STRIP",tu[tu.TRIANGLES=4]="TRIANGLES",tu[tu.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",tu[tu.TRIANGLE_FAN=6]="TRIANGLE_FAN",(tl=tN||(tN={}))[tl.RGBA=6408]="RGBA",tl[tl.RGB=6407]="RGB",tl[tl.ALPHA=6406]="ALPHA",tl[tl.LUMINANCE=6409]="LUMINANCE",tl[tl.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",tl[tl.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",tl[tl.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(tc=tM||(tM={}))[tc.TEXTURE_2D=3553]="TEXTURE_2D",tc[tc.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",tc[tc.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",tc[tc.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",tc[tc.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",tc[tc.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",tc[tc.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",tc[tc.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",tc[tc.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(tp=tk||(tk={}))[tp.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",tp[tp.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",tp[tp.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",tp[tp.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",tp[tp.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",tp[tp.FLOAT=5126]="FLOAT",tp[tp.HALF_FLOAT=36193]="HALF_FLOAT",(td=tU||(tU={}))[td.NEAREST=0]="NEAREST",td[td.LINEAR=1]="LINEAR",(tm=tC||(tC={}))[tm.CLAMP=33071]="CLAMP",tm[tm.REPEAT=10497]="REPEAT",tm[tm.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(ty=tD||(tD={}))[ty.OFF=0]="OFF",ty[ty.POW2=1]="POW2",ty[ty.ON=2]="ON",(tv=tF||(tF={}))[tv.NPM=0]="NPM",tv[tv.UNPACK=1]="UNPACK",tv[tv.PMA=2]="PMA",tv[tv.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",tv[tv.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",tv[tv.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(tb=tB||(tB={}))[tb.NO=0]="NO",tb[tb.YES=1]="YES",tb[tb.AUTO=2]="AUTO",tb[tb.BLEND=0]="BLEND",tb[tb.CLEAR=1]="CLEAR",tb[tb.BLIT=2]="BLIT",(tx=tj||(tj={}))[tx.AUTO=0]="AUTO",tx[tx.MANUAL=1]="MANUAL",(tT=tG||(tG={})).LOW="lowp",tT.MEDIUM="mediump",tT.HIGH="highp",(tE=tV||(tV={}))[tE.NONE=0]="NONE",tE[tE.SCISSOR=1]="SCISSOR",tE[tE.STENCIL=2]="STENCIL",tE[tE.SPRITE=3]="SPRITE",(tA=tX||(tX={}))[tA.NONE=0]="NONE",tA[tA.LOW=2]="LOW",tA[tA.MEDIUM=4]="MEDIUM",tA[tA.HIGH=8]="HIGH";var m_=function(h){function n(w,q,tr,tn,ti){void 0===q&&(q=8),void 0===tr&&(tr=4),void 0===tn&&(tn=lN.RESOLUTION),void 0===ti&&(ti=5);var to=this,ts=function(h,w){var q,tr=Math.ceil(h/2),tn=mp,ti="";q=w?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var to=0;to<h;to++){var ts=q.replace("%index%",to.toString());ti+=(ts=ts.replace("%sampleIndex%",to-(tr-1)+".0"))+`
`}return(tn=tn.replace("%blur%",ti)).replace("%size%",h.toString())}(ti,w),tu=function(h){for(var w,q=mf[h],tr=q.length,tn=md,ti="",to=0;to<h;to++){var ts="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",to.toString());w=to,to>=tr&&(w=h-to-1),ti+=(ts=ts.replace("%value%",q[w].toString()))+`
`}return(tn=tn.replace("%blur%",ti)).replace("%size%",h.toString())}(ti);return(to=h.call(this,ts,tu)||this).horizontal=w,to.resolution=tn,to._quality=0,to.quality=tr,to.blur=q,to}return p0(n,h),n.prototype.apply=function(h,w,q,tr){if(q?this.horizontal?this.uniforms.strength=1/q.width*(q.width/w.width):this.uniforms.strength=1/q.height*(q.height/w.height):this.horizontal?this.uniforms.strength=1/h.renderer.width*(h.renderer.width/w.width):this.uniforms.strength=1/h.renderer.height*(h.renderer.height/w.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)h.applyFilter(this,w,q,tr);else{var tn=h.getFilterTexture(),ti=h.renderer,to=w,ts=tn;this.state.blend=!1,h.applyFilter(this,to,ts,tB.CLEAR);for(var tu=1;tu<this.passes-1;tu++){h.bindAndClear(to,tB.BLIT),this.uniforms.uSampler=ts;var tl=ts;ts=to,to=tl,ti.shader.bind(this),ti.geometry.draw(5)}this.state.blend=!0,h.applyFilter(this,ts,q,tr),h.returnFilterTexture(tn)}},Object.defineProperty(n.prototype,"blur",{get:function(){return this.strength},set:function(h){this.padding=1+2*Math.abs(h),this.strength=h},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"quality",{get:function(){return this._quality},set:function(h){this._quality=h,this.passes=h},enumerable:!1,configurable:!0}),n}(_a);!function(h){function n(w,q,tr,tn){void 0===w&&(w=8),void 0===q&&(q=4),void 0===tr&&(tr=lN.RESOLUTION),void 0===tn&&(tn=5);var ti=h.call(this)||this;return ti.blurXFilter=new m_(!0,w,q,tr,tn),ti.blurYFilter=new m_(!1,w,q,tr,tn),ti.resolution=tr,ti.quality=q,ti.blur=w,ti.repeatEdgePixels=!1,ti}p0(n,h),n.prototype.apply=function(h,w,q,tr){var tn=Math.abs(this.blurXFilter.strength),ti=Math.abs(this.blurYFilter.strength);if(tn&&ti){var to=h.getFilterTexture();this.blurXFilter.apply(h,w,to,tB.CLEAR),this.blurYFilter.apply(h,to,q,tr),h.returnFilterTexture(to)}else ti?this.blurYFilter.apply(h,w,q,tr):this.blurXFilter.apply(h,w,q,tr)},n.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},Object.defineProperty(n.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(h){this.blurXFilter.blur=this.blurYFilter.blur=h,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(h){this.blurXFilter.quality=this.blurYFilter.quality=h},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(h){this.blurXFilter.blur=h,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(h){this.blurYFilter.blur=h,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(h){this.blurYFilter.blendMode=h},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(h){this._repeatEdgePixels=h,this.updatePadding()},enumerable:!1,configurable:!0})}(_a);/*!
 * @pixi/filter-color-matrix - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/filter-color-matrix is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Fh=function(h,w){return(Fh=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,w){h.__proto__=w}||function(h,w){for(var q in w)w.hasOwnProperty(q)&&(h[q]=w[q])})(h,w)},mg=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`,mm=function(h){function n(){var w=this,q={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return(w=h.call(this,_k,mg,q)||this).alpha=1,w}return!function(h,w){function t(){this.constructor=h}Fh(h,w),h.prototype=null===w?Object.create(w):(t.prototype=w.prototype,new t)}(n,h),n.prototype._loadMatrix=function(h,w){void 0===w&&(w=!1);var q=h;w&&(this._multiply(q,this.uniforms.m,h),q=this._colorMatrix(q)),this.uniforms.m=q},n.prototype._multiply=function(h,w,q){return h[0]=w[0]*q[0]+w[1]*q[5]+w[2]*q[10]+w[3]*q[15],h[1]=w[0]*q[1]+w[1]*q[6]+w[2]*q[11]+w[3]*q[16],h[2]=w[0]*q[2]+w[1]*q[7]+w[2]*q[12]+w[3]*q[17],h[3]=w[0]*q[3]+w[1]*q[8]+w[2]*q[13]+w[3]*q[18],h[4]=w[0]*q[4]+w[1]*q[9]+w[2]*q[14]+w[3]*q[19]+w[4],h[5]=w[5]*q[0]+w[6]*q[5]+w[7]*q[10]+w[8]*q[15],h[6]=w[5]*q[1]+w[6]*q[6]+w[7]*q[11]+w[8]*q[16],h[7]=w[5]*q[2]+w[6]*q[7]+w[7]*q[12]+w[8]*q[17],h[8]=w[5]*q[3]+w[6]*q[8]+w[7]*q[13]+w[8]*q[18],h[9]=w[5]*q[4]+w[6]*q[9]+w[7]*q[14]+w[8]*q[19]+w[9],h[10]=w[10]*q[0]+w[11]*q[5]+w[12]*q[10]+w[13]*q[15],h[11]=w[10]*q[1]+w[11]*q[6]+w[12]*q[11]+w[13]*q[16],h[12]=w[10]*q[2]+w[11]*q[7]+w[12]*q[12]+w[13]*q[17],h[13]=w[10]*q[3]+w[11]*q[8]+w[12]*q[13]+w[13]*q[18],h[14]=w[10]*q[4]+w[11]*q[9]+w[12]*q[14]+w[13]*q[19]+w[14],h[15]=w[15]*q[0]+w[16]*q[5]+w[17]*q[10]+w[18]*q[15],h[16]=w[15]*q[1]+w[16]*q[6]+w[17]*q[11]+w[18]*q[16],h[17]=w[15]*q[2]+w[16]*q[7]+w[17]*q[12]+w[18]*q[17],h[18]=w[15]*q[3]+w[16]*q[8]+w[17]*q[13]+w[18]*q[18],h[19]=w[15]*q[4]+w[16]*q[9]+w[17]*q[14]+w[18]*q[19]+w[19],h},n.prototype._colorMatrix=function(h){var w=new Float32Array(h);return w[4]/=255,w[9]/=255,w[14]/=255,w[19]/=255,w},n.prototype.brightness=function(h,w){var q=[h,0,0,0,0,0,h,0,0,0,0,0,h,0,0,0,0,0,1,0];this._loadMatrix(q,w)},n.prototype.greyscale=function(h,w){var q=[h,h,h,0,0,h,h,h,0,0,h,h,h,0,0,0,0,0,1,0];this._loadMatrix(q,w)},n.prototype.blackAndWhite=function(h){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],h)},n.prototype.hue=function(h,w){var q=Math.cos(h=(h||0)/180*Math.PI),tr=Math.sin(h),tn=1/3,ti=(0,Math.sqrt)(1/3);this._loadMatrix([q+(1-q)*tn,tn*(1-q)-ti*tr,tn*(1-q)+ti*tr,0,0,tn*(1-q)+ti*tr,q+tn*(1-q),tn*(1-q)-ti*tr,0,0,tn*(1-q)-ti*tr,tn*(1-q)+ti*tr,q+tn*(1-q),0,0,0,0,0,1,0],w)},n.prototype.contrast=function(h,w){var q=(h||0)+1,tr=-.5*(q-1),tn=[q,0,0,0,tr,0,q,0,0,tr,0,0,q,0,tr,0,0,0,1,0];this._loadMatrix(tn,w)},n.prototype.saturate=function(h,w){void 0===h&&(h=0);var q=2*h/3+1,tr=-((q-1)*.5),tn=[q,tr,tr,0,0,tr,q,tr,0,0,tr,tr,q,0,0,0,0,0,1,0];this._loadMatrix(tn,w)},n.prototype.desaturate=function(){this.saturate(-1)},n.prototype.negative=function(h){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],h)},n.prototype.sepia=function(h){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],h)},n.prototype.technicolor=function(h){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],h)},n.prototype.polaroid=function(h){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],h)},n.prototype.toBGR=function(h){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],h)},n.prototype.kodachrome=function(h){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],h)},n.prototype.browni=function(h){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],h)},n.prototype.vintage=function(h){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],h)},n.prototype.colorTone=function(h,w,q,tr,tn){h=h||.2,w=w||.15,q=q||16770432,tr=tr||3375104;var ti=(q>>16&255)/255,to=(q>>8&255)/255,ts=(255&q)/255,tu=(tr>>16&255)/255,tl=(tr>>8&255)/255,tc=(255&tr)/255,tp=[.3,.59,.11,0,0,ti,to,ts,h,0,tu,tl,tc,w,0,ti-tu,to-tl,ts-tc,0,0];this._loadMatrix(tp,tn)},n.prototype.night=function(h,w){var q=[-2*(h=h||.1),-h,0,0,0,-h,0,h,0,0,0,h,2*h,0,0,0,0,0,1,0];this._loadMatrix(q,w)},n.prototype.predator=function(h,w){this._loadMatrix([11.224130630493164*h,-4.794486999511719*h,-2.8746118545532227*h,0*h,.40342438220977783*h,-3.6330697536468506*h,9.193157196044922*h,-2.951810836791992*h,0*h,-1.316135048866272*h,-3.2184197902679443*h,-4.2375030517578125*h,7.476448059082031*h,0*h,.8044459223747253*h,0,0,0,1,0],w)},n.prototype.lsd=function(h){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],h)},n.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperty(n.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(h){this.uniforms.m=h},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(h){this.uniforms.uAlpha=h},enumerable:!1,configurable:!0}),n}(_a);mm.prototype.grayscale=mm.prototype.greyscale;/*!
 * @pixi/filter-displacement - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Bh=function(h,w){return(Bh=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,w){h.__proto__=w}||function(h,w){for(var q in w)w.hasOwnProperty(q)&&(h[q]=w[q])})(h,w)},mv=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,mb=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;!function(h){function n(w,q){var tr=this,tn=new fM;return w.renderable=!1,(tr=h.call(this,mb,mv,{mapSampler:w._texture,filterMatrix:tn,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this).maskSprite=w,tr.maskMatrix=tn,null==q&&(q=20),tr.scale=new fR(q,q),tr}!function(h,w){function t(){this.constructor=h}Bh(h,w),h.prototype=null===w?Object.create(w):(t.prototype=w.prototype,new t)}(n,h),n.prototype.apply=function(h,w,q,tr){this.uniforms.filterMatrix=h.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var tn=this.maskSprite.worldTransform,ti=Math.sqrt(tn.a*tn.a+tn.b*tn.b),to=Math.sqrt(tn.c*tn.c+tn.d*tn.d);0!==ti&&0!==to&&(this.uniforms.rotation[0]=tn.a/ti,this.uniforms.rotation[1]=tn.b/ti,this.uniforms.rotation[2]=tn.c/to,this.uniforms.rotation[3]=tn.d/to),h.applyFilter(this,w,q,tr)},Object.defineProperty(n.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(h){this.uniforms.mapSampler=h},enumerable:!1,configurable:!0})}(_a);/*!
 * @pixi/filter-fxaa - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/filter-fxaa is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Gh=function(h,w){return(Gh=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,w){h.__proto__=w}||function(h,w){for(var q in w)w.hasOwnProperty(q)&&(h[q]=w[q])})(h,w)},mx=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputPixel;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`,mT=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputPixel;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`;!function(h,w){function t(){this.constructor=h}Gh(h,w),h.prototype=null===w?Object.create(w):(t.prototype=w.prototype,new t)}(function(){return tO.call(this,mx,mT)||this},tO=_a);/*!
 * @pixi/filter-noise - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/filter-noise is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var jh=function(h,w){return(jh=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,w){h.__proto__=w}||function(h,w){for(var q in w)w.hasOwnProperty(q)&&(h[q]=w[q])})(h,w)},mE=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;!function(h){function n(w,q){void 0===w&&(w=.5),void 0===q&&(q=Math.random());var tr=h.call(this,_k,mE,{uNoise:0,uSeed:0})||this;return tr.noise=w,tr.seed=q,tr}!function(h,w){function t(){this.constructor=h}jh(h,w),h.prototype=null===w?Object.create(w):(t.prototype=w.prototype,new t)}(n,h),Object.defineProperty(n.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(h){this.uniforms.uNoise=h},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(h){this.uniforms.uSeed=h},enumerable:!1,configurable:!0})}(_a);/*!
 * @pixi/mixin-cache-as-bitmap - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/mixin-cache-as-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var mA=new fM;fH.prototype._cacheAsBitmap=!1,fH.prototype._cacheData=null;var hI=function(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null};Object.defineProperties(fH.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(h){if(this._cacheAsBitmap!==h){var w;this._cacheAsBitmap=h,h?(this._cacheData||(this._cacheData=new hI),(w=this._cacheData).originalRender=this.render,w.originalRenderCanvas=this.renderCanvas,w.originalUpdateTransform=this.updateTransform,w.originalCalculateBounds=this.calculateBounds,w.originalGetLocalBounds=this.getLocalBounds,w.originalDestroy=this.destroy,w.originalContainsPoint=this.containsPoint,w.originalMask=this._mask,w.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((w=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=w.originalRender,this.renderCanvas=w.originalRenderCanvas,this.calculateBounds=w.originalCalculateBounds,this.getLocalBounds=w.originalGetLocalBounds,this.destroy=w.originalDestroy,this.updateTransform=w.originalUpdateTransform,this.containsPoint=w.originalContainsPoint,this._mask=w.originalMask,this.filterArea=w.originalFilterArea)}}}}),fH.prototype._renderCached=function(h){this.visible&&!(this.worldAlpha<=0)&&this.renderable&&(this._initCachedDisplayObject(h),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(h))},fH.prototype._initCachedDisplayObject=function(h){if(!(this._cacheData&&this._cacheData.sprite)){var w=this.alpha;this.alpha=1,h.batch.flush();var q=this.getLocalBounds(null,!0).clone();if(this.filters){var tr=this.filters[0].padding;q.pad(tr)}q.ceil(lN.RESOLUTION);var tn=h.renderTexture.current,ti=h.renderTexture.sourceFrame.clone(),to=h.projection.transform,ts=dA.create({width:q.width,height:q.height}),tu="cacheAsBitmap_"+ ++pk;this._cacheData.textureCacheId=tu,f9.addToCache(ts.baseTexture,tu),dE.addToCache(ts,tu);var tl=this.transform.localTransform.copyTo(mA).invert().translate(-q.x,-q.y);this.render=this._cacheData.originalRender,h.render(this,ts,!0,tl,!1),h.projection.transform=to,h.renderTexture.bind(tn,ti),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var tc=new gB(ts);tc.transform.worldTransform=this.transform.worldTransform,tc.anchor.x=-(q.x/q.width),tc.anchor.y=-(q.y/q.height),tc.alpha=w,tc._bounds=this._bounds,this._cacheData.sprite=tc,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=tc.containsPoint.bind(tc)}},fH.prototype._renderCachedCanvas=function(h){this.visible&&!(this.worldAlpha<=0)&&this.renderable&&(this._initCachedDisplayObjectCanvas(h),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(h))},fH.prototype._initCachedDisplayObjectCanvas=function(h){if(!(this._cacheData&&this._cacheData.sprite)){var w=this.getLocalBounds(null,!0),q=this.alpha;this.alpha=1;var tr=h.context,tn=h._projTransform;w.ceil(lN.RESOLUTION);var ti=dA.create({width:w.width,height:w.height}),to="cacheAsBitmap_"+ ++pk;this._cacheData.textureCacheId=to,f9.addToCache(ti.baseTexture,to),dE.addToCache(ti,to),this.transform.localTransform.copyTo(mA),mA.invert(),mA.tx-=w.x,mA.ty-=w.y,this.renderCanvas=this._cacheData.originalRenderCanvas,h.render(this,ti,!0,mA,!1),h.context=tr,h._projTransform=tn,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var ts=new gB(ti);ts.transform.worldTransform=this.transform.worldTransform,ts.anchor.x=-(w.x/w.width),ts.anchor.y=-(w.y/w.height),ts.alpha=q,ts._bounds=this._bounds,this._cacheData.sprite=ts,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=h._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=ts.containsPoint.bind(ts)}},fH.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},fH.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},fH.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,f9.removeFromCache(this._cacheData.textureCacheId),dE.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},fH.prototype._cacheAsBitmapDestroy=function(h){this.cacheAsBitmap=!1,this.destroy(h)},/*!
 * @pixi/mixin-get-child-by-name - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */fH.prototype.name=null,fK.prototype.getChildByName=function(h,w){for(var q=0,tr=this.children.length;q<tr;q++)if(this.children[q].name===h)return this.children[q];if(w){for(var q=0,tr=this.children.length;q<tr;q++)if(this.children[q].getChildByName){var tn=this.children[q].getChildByName(h,!0);if(tn)return tn}}return null},/*!
 * @pixi/mixin-get-global-position - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */fH.prototype.getGlobalPosition=function(h,w){return void 0===h&&(h=new fR),void 0===w&&(w=!1),this.parent?this.parent.toGlobal(this.position,h,w):(h.x=this.position.x,h.y=this.position.y),h};/*!
 * @pixi/mesh-extras - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/mesh-extras is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Vh=function(h,w){return(Vh=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,w){h.__proto__=w}||function(h,w){for(var q in w)w.hasOwnProperty(q)&&(h[q]=w[q])})(h,w)};function Wo(h,w){function t(){this.constructor=h}Vh(h,w),h.prototype=null===w?Object.create(w):(t.prototype=w.prototype,new t)}var mO=function(h){function n(w,q,tr,tn){void 0===w&&(w=100),void 0===q&&(q=100),void 0===tr&&(tr=10),void 0===tn&&(tn=10);var ti=h.call(this)||this;return ti.segWidth=tr,ti.segHeight=tn,ti.width=w,ti.height=q,ti.build(),ti}return Wo(n,h),n.prototype.build=function(){for(var h=this.segWidth*this.segHeight,w=[],q=[],tr=[],tn=this.segWidth-1,ti=this.segHeight-1,to=this.width/tn,ts=this.height/ti,tu=0;tu<h;tu++){var tl=tu%this.segWidth,tc=tu/this.segWidth|0;w.push(tl*to,tc*ts),q.push(tl/tn,tc/ti)}for(var tp=tn*ti,tu=0;tu<tp;tu++){var td=tu%tn,tm=tu/tn|0,ty=tm*this.segWidth+td,tv=tm*this.segWidth+td+1,tb=(tm+1)*this.segWidth+td,tx=(tm+1)*this.segWidth+td+1;tr.push(ty,tv,tb,tv,tx,tb)}this.buffers[0].data=new Float32Array(w),this.buffers[1].data=new Float32Array(q),this.indexBuffer.data=new Uint16Array(tr),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},n}(mr),mw=function(h){function n(w,q,tr){void 0===w&&(w=200),void 0===tr&&(tr=0);var tn=h.call(this,new Float32Array(4*q.length),new Float32Array(4*q.length),new Uint16Array((q.length-1)*6))||this;return tn.points=q,tn._width=w,tn.textureScale=tr,tn.build(),tn}return Wo(n,h),Object.defineProperty(n.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),n.prototype.build=function(){var h=this.points;if(h){var w=this.getBuffer("aVertexPosition"),q=this.getBuffer("aTextureCoord"),tr=this.getIndex();if(!(h.length<1)){w.data.length/4!==h.length&&(w.data=new Float32Array(4*h.length),q.data=new Float32Array(4*h.length),tr.data=new Uint16Array((h.length-1)*6));var tn=q.data,ti=tr.data;tn[0]=0,tn[1]=0,tn[2]=0,tn[3]=1;for(var to=0,ts=h[0],tu=this._width*this.textureScale,tl=h.length,tc=0;tc<tl;tc++){var tp=4*tc;if(this.textureScale>0){var td=ts.x-h[tc].x,tm=ts.y-h[tc].y,ty=Math.sqrt(td*td+tm*tm);ts=h[tc],to+=ty/tu}else to=tc/(tl-1);tn[tp]=to,tn[tp+1]=0,tn[tp+2]=to,tn[tp+3]=1}for(var tv=0,tc=0;tc<tl-1;tc++){var tp=2*tc;ti[tv++]=tp,ti[tv++]=tp+1,ti[tv++]=tp+2,ti[tv++]=tp+2,ti[tv++]=tp+1,ti[tv++]=tp+3}q.update(),tr.update(),this.updateVertices()}}},n.prototype.updateVertices=function(){var h=this.points;if(!(h.length<1)){for(var w,q=h[0],tr=0,tn=0,ti=this.buffers[0].data,to=h.length,ts=0;ts<to;ts++){var tu=h[ts],tl=4*ts;tn=-((w=ts<h.length-1?h[ts+1]:tu).x-q.x);var tc=Math.sqrt((tr=w.y-q.y)*tr+tn*tn),tp=this.textureScale>0?this.textureScale*this._width/2:this._width/2;tr/=tc,tn/=tc,tr*=tp,tn*=tp,ti[tl]=tu.x+tr,ti[tl+1]=tu.y+tn,ti[tl+2]=tu.x-tr,ti[tl+3]=tu.y-tn,q=tu}this.buffers[0].update()}},n.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},n}(mr);!function(h){function n(w,q,tr){void 0===tr&&(tr=0);var tn=this,ti=new mw(w.height,q,tr),to=new g9(w);return tr>0&&(w.baseTexture.wrapMode=fs.REPEAT),(tn=h.call(this,ti,to)||this).autoUpdate=!0,tn}Wo(n,h),n.prototype._render=function(w){var q=this.geometry;(this.autoUpdate||q._width!==this.shader.texture.height)&&(q._width=this.shader.texture.height,q.update()),h.prototype._render.call(this,w)}}(g6);var mL=function(h){function n(w,q,tr){var tn=this,ti=new mO(w.width,w.height,q,tr),to=new g9(dE.WHITE);return(tn=h.call(this,ti,to)||this).texture=w,tn}return Wo(n,h),n.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var h=this.geometry;h.width=this.shader.texture.width,h.height=this.shader.texture.height,h.build()},Object.defineProperty(n.prototype,"texture",{get:function(){return this.shader.texture},set:function(h){this.shader.texture!==h&&(this.shader.texture=h,this._textureID=-1,h.baseTexture.valid?this.textureUpdated():h.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),n.prototype._render=function(w){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),h.prototype._render.call(this,w)},n}(g6);!function(h){function n(w,q,tr,tn,ti){void 0===w&&(w=dE.EMPTY);var to=this,ts=new mr(q,tr,tn);ts.getBuffer("aVertexPosition").static=!1;var tu=new g9(w);return(to=h.call(this,ts,tu,null,ti)||this).autoUpdate=!0,to}Wo(n,h),Object.defineProperty(n.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(h){this.geometry.getBuffer("aVertexPosition").data=h},enumerable:!1,configurable:!0}),n.prototype._render=function(w){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),h.prototype._render.call(this,w)}}(g6),function(h){function n(w,q,tr,tn,ti){void 0===q&&(q=10),void 0===tr&&(tr=10),void 0===tn&&(tn=10),void 0===ti&&(ti=10);var to=h.call(this,dE.WHITE,4,4)||this;return to._origWidth=w.orig.width,to._origHeight=w.orig.height,to._width=to._origWidth,to._height=to._origHeight,to._leftWidth=q,to._rightWidth=tn,to._topHeight=tr,to._bottomHeight=ti,to.texture=w,to}Wo(n,h),n.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(n.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(h){this.geometry.getBuffer("aVertexPosition").data=h},enumerable:!1,configurable:!0}),n.prototype.updateHorizontalVertices=function(){var h=this.vertices,w=this._getMinScale();h[9]=h[11]=h[13]=h[15]=this._topHeight*w,h[17]=h[19]=h[21]=h[23]=this._height-this._bottomHeight*w,h[25]=h[27]=h[29]=h[31]=this._height},n.prototype.updateVerticalVertices=function(){var h=this.vertices,w=this._getMinScale();h[2]=h[10]=h[18]=h[26]=this._leftWidth*w,h[4]=h[12]=h[20]=h[28]=this._width-this._rightWidth*w,h[6]=h[14]=h[22]=h[30]=this._width},n.prototype._getMinScale=function(){var h=this._leftWidth+this._rightWidth,w=this._width>h?1:this._width/h,q=this._topHeight+this._bottomHeight;return Math.min(w,this._height>q?1:this._height/q)},Object.defineProperty(n.prototype,"width",{get:function(){return this._width},set:function(h){this._width=h,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this._height},set:function(h){this._height=h,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(h){this._leftWidth=h,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(h){this._rightWidth=h,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"topHeight",{get:function(){return this._topHeight},set:function(h){this._topHeight=h,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(h){this._bottomHeight=h,this._refresh()},enumerable:!1,configurable:!0}),n.prototype._refresh=function(){var h=this.texture,w=this.geometry.buffers[1].data;this._origWidth=h.orig.width,this._origHeight=h.orig.height;var q=1/this._origWidth,tr=1/this._origHeight;w[0]=w[8]=w[16]=w[24]=0,w[1]=w[3]=w[5]=w[7]=0,w[6]=w[14]=w[22]=w[30]=1,w[25]=w[27]=w[29]=w[31]=1,w[2]=w[10]=w[18]=w[26]=q*this._leftWidth,w[4]=w[12]=w[20]=w[28]=1-q*this._rightWidth,w[9]=w[11]=w[13]=w[15]=tr*this._topHeight,w[17]=w[19]=w[21]=w[23]=1-tr*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}(mL);/*!
 * @pixi/sprite-animated - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/sprite-animated is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Xh=function(h,w){return(Xh=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,w){h.__proto__=w}||function(h,w){for(var q in w)w.hasOwnProperty(q)&&(h[q]=w[q])})(h,w)};!function(h){function n(w,q){void 0===q&&(q=!0);var tr=h.call(this,w[0]instanceof dE?w[0]:w[0].texture)||this;return tr._textures=null,tr._durations=null,tr._autoUpdate=q,tr._isConnectedToTicker=!1,tr.animationSpeed=1,tr.loop=!0,tr.updateAnchor=!1,tr.onComplete=null,tr.onFrameChange=null,tr.onLoop=null,tr._currentTime=0,tr._playing=!1,tr._previousFrame=null,tr.textures=w,tr}(function(h,w){function t(){this.constructor=h}Xh(h,w),h.prototype=null===w?Object.create(w):(t.prototype=w.prototype,new t)})(n,h),n.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(fq.shared.remove(this.update,this),this._isConnectedToTicker=!1))},n.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(fq.shared.add(this.update,this,gp.HIGH),this._isConnectedToTicker=!0))},n.prototype.gotoAndStop=function(h){this.stop();var w=this.currentFrame;this._currentTime=h,w!==this.currentFrame&&this.updateTexture()},n.prototype.gotoAndPlay=function(h){var w=this.currentFrame;this._currentTime=h,w!==this.currentFrame&&this.updateTexture(),this.play()},n.prototype.update=function(h){var w=this.animationSpeed*h,q=this.currentFrame;if(null!==this._durations){var tr=this._currentTime%1*this._durations[this.currentFrame];for(tr+=w/60*1e3;tr<0;)this._currentTime--,tr+=this._durations[this.currentFrame];var tn=Math.sign(this.animationSpeed*h);for(this._currentTime=Math.floor(this._currentTime);tr>=this._durations[this.currentFrame];)tr-=this._durations[this.currentFrame]*tn,this._currentTime+=tn;this._currentTime+=tr/this._durations[this.currentFrame]}else this._currentTime+=w;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):q!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<q?this.onLoop():this.animationSpeed<0&&this.currentFrame>q&&this.onLoop()),this.updateTexture())},n.prototype.updateTexture=function(){var h=this.currentFrame;this._previousFrame!==h&&(this._previousFrame=h,this._texture=this._textures[h],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},n.prototype.destroy=function(w){this.stop(),h.prototype.destroy.call(this,w),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},n.fromFrames=function(h){for(var w=[],q=0;q<h.length;++q)w.push(dE.from(h[q]));return new n(w)},n.fromImages=function(h){for(var w=[],q=0;q<h.length;++q)w.push(dE.from(h[q]));return new n(w)},Object.defineProperty(n.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"textures",{get:function(){return this._textures},set:function(h){if(h[0]instanceof dE)this._textures=h,this._durations=null;else{this._textures=[],this._durations=[];for(var w=0;w<h.length;w++)this._textures.push(h[w].texture),this._durations.push(h[w].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"currentFrame",{get:function(){var h=Math.floor(this._currentTime)%this._textures.length;return h<0&&(h+=this._textures.length),h},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(h){h!==this._autoUpdate&&(this._autoUpdate=h,!this._autoUpdate&&this._isConnectedToTicker?(fq.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(fq.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0})}(gB),/*!
 * pixi.js - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */_N.registerPlugin("accessibility",fY),_N.registerPlugin("extract",_K),_N.registerPlugin("interaction",f3),_N.registerPlugin("particle",_7),_N.registerPlugin("prepare",gW),_N.registerPlugin("batch",_V),_N.registerPlugin("tilingSprite",g2),_3.registerPlugin(mu),_3.registerPlugin(gZ),_X.registerPlugin(fZ),_X.registerPlugin(_4);let mS="MoroboxAIRetro";let Uf=class Uf{constructor(h,w,q){this._cellSize=8,this._pixi=h,this._asset=w,this._texture=q,this._columns=Math.ceil(this._texture.texture.width/this._cellSize),this._rows=Math.ceil(this._texture.texture.height/this._cellSize)}get name(){return this._asset.name}get columns(){return this._columns}get rows(){return this._rows}crop(h,w,q,tr){return new this._pixi.Texture(this._texture.texture.baseTexture,new this._pixi.Rectangle(h,w,q,tr))}getTile(h,w,q,tr,tn){if(h<0||h>=this._columns||w<0||w>=this._rows)return dE.EMPTY;void 0===q&&(q=1),void 0===tr&&(tr=1),void 0===tn&&(tn=this._cellSize);let ti=Math.ceil(h)*tn,to=Math.ceil(w)*tn,ts=Math.min(Math.max(ti+Math.ceil(q*tn),0),this._texture.texture.width),tu=Math.min(Math.max(to+Math.ceil(tr*tn),0),this._texture.texture.height);return new this._pixi.Texture(this._texture.texture.baseTexture,new this._pixi.Rectangle(ti,to,ts-ti,tu-to))}static from(h,w,q){return new Uf(h,w,q)}};function ov(h,w,q,tr){return h<<24|w<<16|q<<8|tr}function av(h){return{r:h>>16&255,g:h>>8&255,b:255&h}}let gI=class gI{constructor(h){this._idByColor={},this._index=0,this._capacity=h,this._colors=new Uint8Array(4*h),this._texture=dE.EMPTY,this.push(0,0,0,0)}get texture(){return this._texture}get colors(){return this._colors}get length(){return this._index}color(h){if(!(h<0||h>=this._index))return h*=4,{r:this._colors[h],g:this._colors[h+1],b:this._colors[h+2],a:this._colors[h+3]}}index(h,w,q,tr){if(void 0===w||void 0===q||void 0===tr){let tn=av(h);h=tn.r,w=tn.g,q=tn.b,tr=255}let tn=ov(h,w,q,tr);return this._idByColor[tn]}push(h,w,q,tr){if(void 0===w||void 0===q||void 0===tr){let tn=av(h);h=tn.r,w=tn.g,q=tn.b,tr=255}let tn=ov(h,w,q,tr);if(tn in this._idByColor)return this._idByColor[tn];if(this.length>=this._capacity)return 0;this._idByColor[tn]=this._index;let ti=4*this._index;return this._colors[ti]=h,this._colors[ti+1]=w,this._colors[ti+2]=q,this._colors[ti+3]=tr,this._index++,this._index-1}update(){this._texture=dE.fromBuffer(this._colors,this.length,1),this._texture.update()}};let mI=class mI{constructor(h,w){this.texture=h,this._numColors=w}get numColors(){return this._numColors}};let bI=class bI extends _a{constructor(h){super("","precision mediump float;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform sampler2D colors;uniform float numColors;void main(void){   vec4 col = texture2D(uSampler, vTextureCoord);   gl_FragColor = texture2D(colors, vec2((col.b * 256.0) / numColors, 0.0));}"),this.setPalette(h)}setPalette(h){this.uniforms.colors=h.texture,this.uniforms.numColors=h.length}};let TI=class TI{constructor(h,w){this._pixi=h,this._tex=w,this._frame=w.frame,this._sliceWidth=Math.floor(this._frame.width/3),this._sliceHeight=Math.floor(this._frame.height/3),this._sliceFrame=new h.Rectangle(0,0,this._sliceWidth,this._sliceHeight),this._slices=Array(9)}get sliceWidth(){return this._sliceWidth}get sliceHeight(){return this._sliceHeight}_createSlice(h,w){return this._sliceFrame.x=this._frame.x+h*this._sliceWidth,this._sliceFrame.y=this._frame.y+w*this._sliceHeight,new this._pixi.Texture(this._tex.baseTexture,this._sliceFrame)}slice(h,w){h=Math.max(0,Math.min(2,h)),w=Math.max(0,Math.min(2,w));let q=3*w+h;return this._slices[q]||(this._slices[q]=this._createSlice(h,w)),this._slices[q]}};let AI=class AI{constructor(h){this._lastWidth=0,this._lastHeight=0,this._pixi=h,this._sprite=new h.Sprite}get sprite(){return this._sprite}_render(h,w,q,tr,tn,ti,to,ts,tu){var tl;if(!this.texture||tu<=0||tn<=0||ti<=0)return 0;let tc=0,tp=this.texture.sliceWidth,td=this.texture.sliceHeight;this._sprite.texture=null==(tl=this.texture)?void 0:tl.slice(q,tr),this._sprite.x=h;for(let h=0;h<tn&&tc<tu;++h,this._sprite.x+=tp){this._sprite.y=w;for(let h=0;h<ti&&tc<tu;++h,this._sprite.y+=td)to.render(this._sprite,ts),++tc}return tc}render(h,w,q,tr,tn,ti,to){if(!this.texture)return 0;let ts=to,tu=Math.ceil(q/this.texture.sliceWidth),tl=Math.ceil(tr/this.texture.sliceHeight),tc=h+this.texture.sliceWidth,tp=w+this.texture.sliceHeight,td=h+q-this.texture.sliceWidth,tm=w+tr-this.texture.sliceHeight;return to-=this._render(h,w,0,0,1,1,tn,ti,to),to-=this._render(tc,w,1,0,tu-2,1,tn,ti,to),to-=this._render(td,w,2,0,1,1,tn,ti,to),to-=this._render(h,tp,0,1,1,tl-2,tn,ti,to),to-=this._render(tc,tp,1,1,tu-2,tl-2,tn,ti,to),to-=this._render(td,tp,2,1,1,tl-2,tn,ti,to),to-=this._render(h,tm,0,2,1,1,tn,ti,to),to-=this._render(tc,tm,1,2,tu-2,1,tn,ti,to),ts-(to-=this._render(td,tm,2,2,1,1,tn,ti,to))}};let EI=class EI{constructor(h){this.alignX=0,this.alignY=0,this._pixi=h}get text(){return void 0===this._text&&(this._text=new this._pixi.BitmapText("",{fontName:mS})),this._text}set font(h){this.text.fontName=h}set color(h){this.text.tint=h}set value(h){this.text.text=h}get x(){return this.text.x}set x(h){this.text.x=h}get y(){return this.text.y}set y(h){this.text.y=h}clear(){this.text.fontName=mS,this.text.position.set(0,0),this.text.tint=16777215,this.alignX=0,this.alignY=0}};let wI=class wI{constructor(h){this._fliph=1,this._flipv=1,this._scaleh=1,this._scalev=1,this.sprite=new h.Sprite,this.clear()}set texture(h){this.sprite.texture=h}get x(){return this.sprite.x}set x(h){this.sprite.x=h}get y(){return this.sprite.y}set y(h){this.sprite.y=h}get originx(){return this.sprite.pivot.x}set originx(h){this.sprite.pivot.x=h}get originy(){return this.sprite.pivot.y}set originy(h){this.sprite.pivot.y=h}get angle(){return this.sprite.angle}set angle(h){this.sprite.angle=h}get fliph(){return this._fliph<0}set fliph(h){this._fliph=h?-1:1,this.sprite.scale.x=this._scaleh*this._fliph}get flipv(){return this._flipv<0}set flipv(h){this._flipv=h?-1:1,this.sprite.scale.y=this._scalev*this._flipv}get scaleh(){return this._scaleh}set scaleh(h){this._scaleh=h,this.sprite.scale.x=this._scaleh*this._fliph}get scalev(){return this._scalev}set scalev(h){this._scalev=h,this.sprite.scale.y=this._scalev*this._flipv}clear(){this.texture=dE.EMPTY,this.sprite.position.set(0,0),this.sprite.pivot.set(0,0),this.sprite.angle=0,this.sprite.scale.set(1,1),this._fliph=1,this._flipv=1,this._scaleh=1,this._scalev=1}};let OI=class OI{constructor(h,w,q,tr,tn){this.TNUM=64,this.SNUM=256,this._spriteIndex=0,this._palette=new gI(64),this._cameraX=0,this._cameraY=0,this._tilemapMode=8,this._pixi=h,this._renderer=w,this._backBuffer=q,this.SWIDTH=tr,this.SHEIGHT=tn,this._paletteFilter=new bI(this._palette),this._fonts=[],this._tilemaps=[],this._text=new EI(h),this._sprite=new wI(h),this._sprite.sprite.filters=[this._paletteFilter],this._boxSprite=new AI(h),this._boxSprite.sprite.filters=[this._paletteFilter],this._clearSprite=new h.Sprite(dE.WHITE),this._clearSprite.width=this.SWIDTH,this._clearSprite.height=this.SHEIGHT,this._clearSprite.tint=0,this._clearSprite.filters=[this._paletteFilter],this.drawEnabled=!0}preRender(){}postRender(){this._spriteIndex=0}addFont(h){console.log(`new font ${h.name}`),this._fonts.push(h)}addTileMap(h,w){let q=function(h,w,q,tr){let tn=w.extract.pixels(new h.Sprite(tr)),ti=0,to=new Set;for(let h=0,w=0;h<tr.width;++h)for(let h=0;h<tr.height;++h,w+=4)ti=q.push(tn[w],tn[w+1],tn[w+2],tn[w+3]),to.add(ti),tn[w]=0,tn[w+1]=0,tn[w+2]=ti,tn[w+3]=255;let ts=h.Texture.fromBuffer(tn,tr.width,tr.height);return ts.update(),new mI(ts,to.size)}(this._pixi,this._renderer,this._palette,w);this._palette.update(),console.log(`indexed ${h.path} with ${q.numColors} colors`),this._paletteFilter.setPalette(this._palette);let tr=Uf.from(this._pixi,h,q);void 0!==tr&&this._tilemaps.push(tr)}_getTile(h,w,q,tr,tn){return h>=0&&h<this._tilemaps.length?this._tilemaps[h].getTile(w,q,tr,tn,this._tilemapMode):this._pixi.Texture.EMPTY}_getColorIndex(h){let w=this._palette.index(h);return void 0===w?0:w}clear(h){this.drawEnabled&&(this._clearSprite.tint=this._getColorIndex(h),this._renderer.render(this._clearSprite,this._backBuffer))}camera(h,w){this.drawEnabled&&(this._cameraX=h-this.SWIDTH/2,this._cameraY=w-this.SHEIGHT/2)}tmap(h){for(let w=0;w<this._tilemaps.length;++w)if(this._tilemaps[w].name==h)return w;return -1}tmode(h){switch(h){case 8:case 16:case 24:case 32:case 64:case 128:break;default:h=8}this._tilemapMode=h}stile(h,w,q,tr,tn){this.drawEnabled&&(this._sprite.texture=this._getTile(h,w,q,tr,tn))}sorigin(h,w){this.drawEnabled&&(this._sprite.originx=h,this._sprite.originy=w)}sflip(h,w){this.drawEnabled&&(this._sprite.fliph=h,this._sprite.flipv=w)}sscale(h,w){this.drawEnabled&&(this._sprite.scaleh=h,this._sprite.scalev=w)}srot(h){this.drawEnabled&&(this._sprite.angle=h)}sclear(){this.drawEnabled&&this._sprite.clear()}_render(h){this._spriteIndex<256&&(this._renderer.render(h,this._backBuffer),this._spriteIndex+=1)}sdraw(h,w){this.drawEnabled&&(this._sprite.x=h-this._cameraX,this._sprite.y=w-this._cameraY,this._render(this._sprite.sprite))}sbox(h,w,q,tr){this.drawEnabled&&(this._boxSprite.texture=new TI(this._pixi,this._sprite.sprite.texture),this._spriteIndex+=this._boxSprite.render(h,w,q,tr,this._renderer,this._backBuffer,256-this._spriteIndex))}fnt(h){for(let w=0;w<this._fonts.length;++w)if(this._fonts[w].name==h)return w;return -1}falign(h,w){this.drawEnabled&&(this._text.alignX=h,this._text.alignY=w)}fcolor(h){this.drawEnabled&&(this._text.color=this._getColorIndex(h))}fclear(){this.drawEnabled&&this._text.clear()}fdraw(h,w,q,tr){this.drawEnabled&&(this._text.x=q,this._text.y=tr,h>=0&&h<this._fonts.length&&(this._text.font=this._fonts[h].name,this._text.value=w,this._text.x-=Math.floor(this._text.text.textWidth*this._text.alignX),this._text.y-=Math.floor(this._text.text.textHeight*this._text.alignY),this._text.text.filters=[this._paletteFilter],this._renderer.render(this._text.text,this._backBuffer)))}};let mP="0.1.0-alpha.22";let _0=class _0{constructor(h){this.boot=h=>new Promise(async w=>{this._header=h.vm.header;let q=await new GT({main:h=>(this._vm=h.vm,this._vm.autoClearBackBuffer=!1,this._ppu=new OI(this._vm.PIXI,this._vm.renderer,this._vm.backBuffer,this._vm.width,this._vm.height),"development"===this.options.mode&&(console.log("hook Moroxel8AI API"),this.hookAPI(window)),new Promise(h=>h(this)))}).boot(h);return w(q)}),this.P1=0,this.P2=1,this.BLEFT=0,this.BRIGHT=1,this.BUP=2,this.BDOWN=3,this.abs=Math.abs,this.floor=Math.floor,this.ceil=Math.ceil,this.sign=Math.sign,this.min=Math.min,this.max=Math.max,this.cos=Math.cos,this.sin=Math.sin,this.options=h??{}}get PIXI(){return this._vm.PIXI}get header(){return this._header}_handleAssetLoaded(h,w){"fnt"===w.extension?this._ppu.addFont(h):void 0!==w.texture&&this._ppu.addTileMap(h,w.texture)}load(){return new Promise(async h=>{var w,q,tr;return this._game=await (w=this,q=this._vm.gameServer,tr=(h,w)=>this._handleAssetLoaded(h,w),new Promise(async h=>{await new Promise(h=>{let tn=w.header.assets;if(void 0===tn||0===tn.length){h();return}console.log("loading assets...");let ti=new w.PIXI.Loader,to=[];tn.forEach(h=>{if(void 0===h.name){console.error("skip asset without name");return}if(void 0===h.path){console.error("skip asset without path");return}console.log(`loading ${h.path}...`),to.push(h),ti.add(q.href(`assets/${h.path}`))}),ti.onComplete.add(()=>(to.forEach(h=>{tr(h,ti.resources[q.href(`assets/${h.path}`)])}),console.log("assets loaded"),h())),ti.load()});let tn=await new Promise(async h=>{void 0!==w.options.main&&(w.header.main=w.options.main);let tr=w.header.main;if(void 0===tr)throw"header is missing main attribute with the path to your main script";if("function"==typeof tr){let w=await tr({});return h(w)}let tn=await q.get(tr),ti=function(h,w,q){if(void 0!==w){if("string"!=typeof w)return w;switch(h){case"lua":return function(h,w){let q=function(h){let w=u4.lauxlib.luaL_newstate(),t=function(h,q){Er(w,q),u4.lua.lua_setglobal(w,u4.to_luastring(h))};if(void 0!==h.globals&&Object.entries(h.globals).forEach(([h,w])=>{console.log("register Lua global",h),t(h,w)}),void 0!==h.api&&Object.entries(h.api).forEach(([h,q])=>{console.log("register Lua api",h),u4.lua.lua_register(w,h,w=>{try{return q(w)}catch(w){throw Error(`error in ${h} implementation: ${w}`)}})}),void 0!==h.script&&u4.lauxlib.luaL_dostring(w,u4.to_luastring(h.script))!=u4.lua.LUA_OK){console.error(u4.to_jsstring(u4.lua.lua_tostring(w,-1)));return}return new JT(w)}({globals:{SWIDTH:w.SWIDTH,SHEIGHT:w.SHEIGHT,TNUM:w.TNUM,SNUM:w.SNUM,P1:w.P1,P2:w.P2,BLEFT:w.BLEFT,BRIGHT:w.BRIGHT,BUP:w.BUP,BDOWN:w.BDOWN},api:{clear:sr("clear([c])",h=>0===h||1===h,h=>{let q=ya(h);return w.clear(q>0?qe(h,1):0),0}),camera:sr("camera(x, y)",2,h=>(w.camera(qe(h,1),qe(h,2)),0)),print:h=>(console.log(u6.lua.lua_tojsstring(h,-1)),0),state:sr("state([pid], val)",h=>1===h||2===h,h=>{let q=ya(h),tr=Fa(h);return w.state(q>1?qe(h,1):tr,1===q?void 0:tr),0}),btn:sr("btn([pid], bid)",h=>1===h||2===h,h=>{let q=ya(h);return Er(h,w.btn(q>1?qe(h,1):w.P1,qe(h,-1))),1}),pbound:sr("pbound(pid)",1,h=>(Er(h,w.pbound(qe(h,1))),1)),plabel:sr("plabel(pid)",1,h=>(Er(h,w.plabel(qe(h,1))),1)),tmap:sr("tmap(id)",1,h=>(Er(h,w.tmap(Nn(h,1))),1)),tmode:sr("tmode(val)",1,h=>(w.tmode(qe(h,1)),0)),stile:sr("stile(id, i, j, [w, h])",h=>3===h||5===h,h=>{let q=ya(h);return w.stile(qe(h,1),qe(h,2),qe(h,3),q>3?qe(h,4):void 0,q>4?qe(h,5):void 0),0}),sorigin:sr("sorigin(x, y)",2,h=>(w.sorigin(qe(h,1),qe(h,2)),0)),sflip:sr("sflip(h, v)",2,h=>(w.sflip(oh(h,1),oh(h,2)),0)),sscale:sr("sscale(x, y)",2,h=>(w.sscale(qe(h,1),qe(h,2)),0)),srot:sr("srot(a)",1,h=>(w.srot(qe(h,1)),0)),sclear:sr("sclear()",0,h=>(w.sclear(),0)),sdraw:sr("sdraw(x, y)",2,h=>(w.sdraw(qe(h,1),qe(h,2)),0)),sbox:sr("sbox(x, y, w, h)",4,h=>(w.sbox(qe(h,1),qe(h,2),qe(h,3),qe(h,4)),0)),fnt:sr("fnt(name)",1,h=>(Er(h,w.fnt(Nn(h,1))),1)),falign:sr("falign(x, y)",2,h=>(w.falign(qe(h,1),qe(h,2)),0)),fcolor:sr("fcolor(c)",1,h=>(w.fcolor(qe(h,1)),0)),fclear:sr("fclear()",0,h=>(w.fclear(),0)),fdraw:sr("fdraw(id, text, x, y)",4,h=>(w.fdraw(qe(h,1),Nn(h,2),qe(h,3),qe(h,4)),0)),abs:sr("abs(val)",1,h=>(Er(h,w.abs(qe(h,1))),1)),floor:sr("floor(val)",1,h=>(Er(h,w.floor(qe(h,1))),1)),ceil:sr("ceil(val)",1,h=>(Er(h,w.ceil(qe(h,1))),1)),sign:sr("sign(val)",1,h=>(Er(h,w.sign(qe(h,1))),1)),min:sr("min(a, b)",2,h=>(Er(h,w.min(qe(h,1),qe(h,2))),1)),max:sr("max(a, b)",2,h=>(Er(h,w.max(qe(h,1),qe(h,2))),1)),clamp:sr("clamp(val, min, max)",3,h=>(Er(h,w.clamp(qe(h,1),qe(h,2),qe(h,3))),1)),cos:sr("cos(val)",1,h=>(Er(h,w.cos(qe(h,1))),1)),sin:sr("sin(val)",1,h=>(Er(h,w.sin(qe(h,1))),1))},script:h});return void 0!==q?new eA(q):void 0}(w,q);case"javascript":return function(h,w){let q={SWIDTH:w.SWIDTH,SHEIGHT:w.SHEIGHT,P1:w.P1,P2:w.P2,BLEFT:w.BLEFT,BRIGHT:w.BRIGHT,BUP:w.BUP,BDOWN:w.BDOWN,clear:w.clear.bind(w),camera:w.camera.bind(w),print:w.print.bind(w),state:w.state.bind(w),btn:w.btn.bind(w),pbound:w.pbound.bind(w),plabel:w.plabel.bind(w),tmap:w.tmap.bind(w),tmode:w.tmode.bind(w),stile:w.stile.bind(w),sorigin:w.sorigin.bind(w),sflip:w.sflip.bind(w),sscale:w.sscale.bind(w),srot:w.srot.bind(w),sclear:w.sclear.bind(w),sdraw:w.sdraw.bind(w),sbox:w.sbox.bind(w),fnt:w.fnt.bind(w),falign:w.falign.bind(w),fcolor:w.fcolor.bind(w),fclear:w.fclear.bind(w),fdraw:w.fdraw.bind(w),abs:w.abs.bind(w),floor:w.floor.bind(w),ceil:w.ceil.bind(w),sign:w.sign.bind(w),min:w.min.bind(w),max:w.max.bind(w),clamp:w.clamp.bind(w),cos:w.cos.bind(w),sin:w.sin.bind(w)},tr={},tn=Object.keys(q),ti=Function("exports","module","define",...tn,`${h}
; ${u3.map(h=>`if (typeof ${h} !== "undefined") exports.${h} = ${h}`).join(";")}`);return ti(tr,{exports:{boot:void 0}},void 0,...tn.map(h=>q[h])),new XT(ti,tr)}(w,q);default:return}}}(tr.endsWith(".js")?"javascript":"lua",tn,w);if(void 0===ti)throw"invalid game script";return h(ti)});return console.log("game loaded",tn),h(tn)})),h()})}saveState(){var h;return(null==(h=this._game)?void 0:h.saveState)!==void 0?this._game.saveState():{}}loadState(h){var w;(null==(w=this._game)?void 0:w.loadState)!==void 0&&this._game.loadState(h)}getStateForAgent(){var h;return(null==(h=this._game)?void 0:h.getStateForAgent)!==void 0?this._game.getStateForAgent():{}}tick(h,w,q){var tr;(null==(tr=this._game)?void 0:tr.tick)!==void 0&&(this._ppu.drawEnabled=q,this._ppu.preRender(),this._controllers=h,this._game.tick(w),this._ppu.postRender())}get SWIDTH(){return this._ppu.SWIDTH}get SHEIGHT(){return this._ppu.SHEIGHT}get TNUM(){return this._ppu.TNUM}get SNUM(){return this._ppu.SNUM}clear(h){this._ppu.clear(void 0!==h?h:0)}camera(h,w){this._ppu.camera(h,w)}print(...h){console.log(...h)}state(h,w){}getController(h){if(!(void 0===this._controllers||this._controllers.length<=h))return this._controllers[h]}btn(h,w){let q=this.getController(h);if(void 0===q)return!1;void 0===w&&(w=h,h=this.P1);let tr=q.inputs;switch(w){case this.BLEFT:return!0===tr.left;case this.BRIGHT:return!0===tr.right;case this.BUP:return!0===tr.up;case this.BDOWN:return!0===tr.down;default:return!1}}pbound(h){let w=this.getController(h);return void 0!==w&&w.isBound}plabel(h){let w=this.getController(h);return void 0===w?"":w.label}tmap(h){return this._ppu.tmap(h)}tmode(h){this._ppu.tmode(h)}stile(h,w,q,tr,tn){this._ppu.stile(h,w,q,tr,tn)}sorigin(h,w){this._ppu.sorigin(h,w)}sflip(h,w){this._ppu.sflip(h,w)}sscale(h,w){return this._ppu.sscale(h,w)}srot(h){this._ppu.srot(h)}sclear(){this._ppu.sclear()}sdraw(h,w){this._ppu.sdraw(h,w)}sbox(h,w,q,tr){this._ppu.sbox(h,w,q,tr)}fnt(h){return this._ppu.fnt(h)}falign(h,w){this._ppu.falign(h,w)}fcolor(h){this._ppu.fcolor(h)}fclear(){this._ppu.fclear()}fdraw(h,w,q,tr){this._ppu.fdraw(h,w,q,tr)}clamp(h,w,q){return Math.min(Math.max(h,w),q)}hookAPI(h){h.SWIDTH=this.SWIDTH,h.SHEIGHT=this.SHEIGHT,h.TNUM=this.TNUM,h.SNUM=this.SNUM,h.P1=this.P1,h.P2=this.P2,h.BLEFT=this.BLEFT,h.BRIGHT=this.BRIGHT,h.BUP=this.BUP,h.BDOWN=this.BDOWN,h.clear=this.clear.bind(this),h.camera=this.camera.bind(this),h.print=this.print.bind(this),h.state=this.state.bind(this),h.btn=this.btn.bind(this),h.pbound=this.pbound.bind(this),h.plabel=this.plabel.bind(this),h.tmap=this.tmap.bind(this),h.tmode=this.tmode.bind(this),h.stile=this.stile.bind(this),h.sorigin=this.sorigin.bind(this),h.sflip=this.sflip.bind(this),h.sscale=this.sscale.bind(this),h.srot=this.srot.bind(this),h.sclear=this.sclear.bind(this),h.sdraw=this.sdraw.bind(this),h.sbox=this.sbox.bind(this),h.fnt=this.fnt.bind(this),h.falign=this.falign.bind(this),h.fcolor=this.fcolor.bind(this),h.fclear=this.fclear.bind(this),h.fdraw=this.fdraw.bind(this),h.abs=this.abs.bind(this),h.floor=this.floor.bind(this),h.ceil=this.ceil.bind(this),h.sign=this.sign.bind(this),h.min=this.min.bind(this),h.max=this.max.bind(this),h.clamp=this.clamp.bind(this),h.cos=this.cos.bind(this),h.sin=this.sin.bind(this)}};function RI(h){return new _0(h)}let NI=h=>new Promise(w=>new _0().boot(h).then(h=>w(h)))}}]);