(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[502],{6192:function(e,t,n){"use strict";n.r(t),n.d(t,{LOAD_AGENT:function(){return v},UNLOAD_AGENT:function(){return p}});var a=n(2678),o=n(8564),l=n(2267),r=n(5766),i=n(8007),s=n(3304),d=n(5893),c=n(7294),u=n(3253),m=n(8723),h=n(1866),v="LOAD_AGENT",p="UNLOAD_AGENT",y=function(e){(0,i._)(EmbedPlayer,e);var t=(0,s._)(EmbedPlayer);function EmbedPlayer(e){var n;return(0,o._)(this,EmbedPlayer),(n=t.call(this,e)).state={},n.handleMessage=n.handleMessage.bind((0,a._)(n)),n}return(0,l._)(EmbedPlayer,[{key:"componentDidMount",value:function(){window.PixiMoroxel8AI=h,window.Moroxel8AI=m,window.addEventListener("message",this.handleMessage),document.getElementsByTagName("html")[0].setAttribute("data-theme","embed");var e,t,n=window.frameElement,a=(null!==(e=null==n?void 0:n.getAttribute("allow"))&&void 0!==e?e:"").split(";").map(function(e){return e.trim()}),o=null==n?void 0:n.getAttribute("data-game-id"),l=void 0!==o?"".concat("https://raw.githubusercontent.com/moroboxai/moroboxai-games/master","/").concat(o):null!==(t=null==n?void 0:n.getAttribute("data-game-url"))&&void 0!==t?t:"",r=u.S1({element:document.getElementById("player"),url:l,autoPlay:a.includes("autoplay")});this.setState({player:r})}},{key:"componentWillUnmount",value:function(){var e;window.removeEventListener("message",this.handleMessage),null===(e=this.state.player)||void 0===e||e.remove()}},{key:"handleMessage",value:function(e){var t,n,a,o,l;if(void 0!==e.data.action)switch(e.data.action){case v:void 0!==e.data.code&&(null===(n=this.state.player)||void 0===n||null===(t=n.getController(0))||void 0===t||t.loadAgent({language:null!==(a=e.data.language)&&void 0!==a?a:"javascript",code:e.data.code}));break;case p:null===(l=this.state.player)||void 0===l||null===(o=l.getController(0))||void 0===o||o.unloadAgent()}}},{key:"render",value:function(){return(0,d.jsx)("div",{id:"player"})}}]),EmbedPlayer}(c.Component);(0,r._)(y,"propTypes",void 0),y.propTypes={},t.default=y},7502:function(e,t,n){"use strict";n.r(t);var a=n(8564),o=n(2267),l=n(5766),r=n(8007),i=n(3304),s=n(5893),d=n(7294),c=n(9523),u=function(e){(0,r._)(Home,e);var t=(0,i._)(Home);function Home(e){return(0,a._)(this,Home),t.call(this,e)}return(0,o._)(Home,[{key:"render",value:function(){return(0,s.jsx)(c.Z,{className:"top-section",game:this.props.game,agentUrl:"https://raw.githubusercontent.com/moroboxai/moroboxai-games/master/pong/agent.*"})}}]),Home}(d.Component);(0,l._)(u,"propTypes",void 0),u.propTypes={},t.default=u},9523:function(e,t,n){"use strict";var a=n(2678),o=n(8564),l=n(2267),r=n(5766),i=n(8007),s=n(3304),d=n(5893),c=n(7294),u=n(4964),m=n(6064),h=n(6192),v=n(3406),p=n.n(v),y=(0,m.$j)(function(e){return{}},function(e){return{}},null,{forwardRef:!0}),_=function(e){(0,i._)(PlayerSection,e);var t=(0,s._)(PlayerSection);function PlayerSection(e){var n;return(0,o._)(this,PlayerSection),n=t.call(this,e),(0,r._)((0,a._)(n),"_refIframe",void 0),n.state={},n.handleMount=n.handleMount.bind((0,a._)(n)),n.handleUnmount=n.handleUnmount.bind((0,a._)(n)),n.handleLoad=n.handleLoad.bind((0,a._)(n)),n.handleUnload=n.handleUnload.bind((0,a._)(n)),n._refIframe=c.createRef(),n}return(0,l._)(PlayerSection,[{key:"handleMount",value:function(e){console.log("player mounted"),this.setState({player:e})}},{key:"handleUnmount",value:function(e){console.log("player unmounted"),this.setState({player:void 0})}},{key:"handleLoad",value:function(e,t){var n,a;null===(a=this._refIframe.current)||void 0===a||null===(n=a.contentWindow)||void 0===n||n.postMessage({action:h.LOAD_AGENT,language:e,code:t})}},{key:"handleUnload",value:function(){var e,t;null===(t=this._refIframe.current)||void 0===t||null===(e=t.contentWindow)||void 0===e||e.postMessage({action:h.UNLOAD_AGENT})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.game,a=e.agentUrl;return(0,d.jsx)("div",{className:[p().section,t,"vertical"].join(" "),children:(0,d.jsx)("div",{className:"container",children:(0,d.jsxs)("div",{className:"row justify-content-center align-items-center gy-4 m-auto",children:[(0,d.jsx)("div",{className:"col-12 col-sm-auto",children:(0,d.jsx)("div",{className:p().player,children:(0,d.jsx)("div",{children:(0,d.jsx)("iframe",{ref:this._refIframe,src:"/embed/player","data-game-id":n.id,allow:"autoplay",width:n.width/n.scale,style:{aspectRatio:"".concat(n.width,"/").concat(n.height)}})})})}),(0,d.jsx)("div",{className:"col-12 col-lg-6",children:(0,d.jsx)(u.ZP,{className:p().editor,url:a,width:"100%",height:"500px",onLoad:this.handleLoad,onUnload:this.handleUnload})})]})})})}}]),PlayerSection}(c.Component);(0,r._)(_,"propTypes",void 0),_.propTypes={},t.Z=y(_)},3406:function(e){e.exports={h100:"PlayerSection_h100__1iTXO",vertical:"PlayerSection_vertical__WnDbr",horizontal:"PlayerSection_horizontal__spIs7",section:"PlayerSection_section__z0N1o",player:"PlayerSection_player__cKcgY","mai-player":"PlayerSection_mai-player__c2uEr",editor:"PlayerSection_editor__EpEtv"}}}]);