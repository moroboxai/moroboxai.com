"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{1866:function(l,v,E){E.r(v),E.d(v,{VERSION:function(){return a5},boot:function(){return Mp},init:function(){return Fp}});var C,M,L,U,B,k,j,X,G,H,Y,W,q,Z,K,J,$,Q,tr,ti,tn,to,ts,th,tl,tc,tp,td,tf,ty,tm,tg,tv,t_,tb,tx,tT="u">typeof globalThis?globalThis:"u">typeof window?window:"u">typeof E.g?E.g:"u">typeof self?self:{};function si(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var tE={};!function(l){var v=l.Promise,E=v&&"resolve"in v&&"reject"in v&&"all"in v&&"race"in v&&(new v(function(l){B=l}),"function"==typeof B);tE?(tE.Promise=E?v:O,tE.Polyfill=O):E||(l.Promise=O);var C="pending",M="sealed",L="fulfilled",U="rejected",h=function(){};function u(l){return"[object Array]"===Object.prototype.toString.call(l)}var B,k,j="u">typeof setImmediate?setImmediate:setTimeout,X=[];function d(){for(var l=0;l<X.length;l++)X[l][0](X[l][1]);X=[],k=!1}function p(l,v){X.push([l,v]),k||(k=!0,j(d,0))}function y(l){var v=l.owner,E=v.state_,C=v.data_,M=l[E],B=l.then;if("function"==typeof M){E=L;try{C=M(C)}catch(l){T(B,l)}}g(B,C)||(E===L&&x(B,C),E===U&&T(B,C))}function g(l,v){var E;try{if(l===v)throw TypeError("A promises callback cannot return that same promise.");if(v&&("function"==typeof v||"object"==typeof v)){var C=v.then;if("function"==typeof C)return C.call(v,function(C){E||(E=!0,v!==C?x(l,C):m(l,C))},function(v){E||(E=!0,T(l,v))}),!0}}catch(v){return E||T(l,v),!0}return!1}function x(l,v){l!==v&&g(l,v)||m(l,v)}function m(l,v){l.state_===C&&(l.state_=M,l.data_=v,p(w,l))}function T(l,v){l.state_===C&&(l.state_=M,l.data_=v,p(F,l))}function b(l){var v=l.then_;l.then_=void 0;for(var E=0;E<v.length;E++)y(v[E])}function w(l){l.state_=L,b(l)}function F(l){l.state_=U,b(l)}function O(l){if("function"!=typeof l)throw TypeError("Promise constructor takes a function argument");if(!(this instanceof O))throw TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],function(l,v){function R(l){T(v,l)}try{l(function(l){x(v,l)},R)}catch(l){R(l)}}(l,this)}O.prototype={constructor:O,state_:C,then_:null,data_:void 0,then:function(l,v){var E={owner:this,then:new this.constructor(h),fulfilled:l,rejected:v};return this.state_===L||this.state_===U?p(y,E):this.then_.push(E),E.then},catch:function(l){return this.then(null,l)}},O.all=function(l){if(!u(l))throw TypeError("You must pass an array to Promise.all().");return new this(function(v,E){for(var C,M=[],L=0,U=0;U<l.length;U++)(C=l[U])&&"function"==typeof C.then?C.then(function(l){return L++,function(E){M[l]=E,--L||v(M)}}(U),E):M[U]=C;L||v(M)})},O.race=function(l){if(!u(l))throw TypeError("You must pass an array to Promise.race().");return new this(function(v,E){for(var C,M=0;M<l.length;M++)(C=l[M])&&"function"==typeof C.then?C.then(v,E):v(C)})},O.resolve=function(l){return l&&"object"==typeof l&&l.constructor===this?l:new this(function(v){v(l)})},O.reject=function(l){return new this(function(v,E){E(l)})}}("u">typeof window?window:"u">typeof tT?tT:"u">typeof self?self:tT);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var tI=Object.getOwnPropertySymbols,tw=Object.prototype.hasOwnProperty,tP=Object.prototype.propertyIsEnumerable,tS=!function(){try{if(!Object.assign)return!1;var l=new String("abc");if(l[5]="de","5"===Object.getOwnPropertyNames(l)[0])return!1;for(var v={},E=0;E<10;E++)v["_"+String.fromCharCode(E)]=E;var C=Object.getOwnPropertyNames(v).map(function(l){return v[l]});if("0123456789"!==C.join(""))return!1;var M={};return"abcdefghijklmnopqrst".split("").forEach(function(l){M[l]=l}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},M)).join("")}catch{return!1}}()?function(l,v){for(var E,C,M=function(l){if(null==l)throw TypeError("Object.assign cannot be called with null or undefined");return Object(l)}(l),L=1;L<arguments.length;L++){for(var U in E=Object(arguments[L]))tw.call(E,U)&&(M[U]=E[U]);if(tI){C=tI(E);for(var B=0;B<C.length;B++)tP.call(E,C[B])&&(M[C[B]]=E[C[B]])}}return M}:Object.assign;let tA=si(tS);if(/*!
 * @pixi/polyfill - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */window.Promise||(window.Promise=tE.Polyfill),Object.assign||(Object.assign=tA),Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()}),!(window.performance&&window.performance.now)){var tO=Date.now();window.performance||(window.performance={}),window.performance.now=function(){return Date.now()-tO}}for(var tC=Date.now(),tR=["ms","moz","webkit","o"],tM=0;tM<tR.length&&!window.requestAnimationFrame;++tM){var tD=tR[tM];window.requestAnimationFrame=window[tD+"RequestAnimationFrame"],window.cancelAnimationFrame=window[tD+"CancelAnimationFrame"]||window[tD+"CancelRequestAnimationFrame"]}window.requestAnimationFrame||(window.requestAnimationFrame=function(l){if("function"!=typeof l)throw TypeError(l+"is not a function");var v=Date.now(),E=16+tC-v;return E<0&&(E=0),tC=v,window.setTimeout(function(){tC=Date.now(),l(performance.now())},E)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(l){return clearTimeout(l)}),Math.sign||(Math.sign=function(l){return 0===(l=Number(l))||isNaN(l)?l:l>0?1:-1}),Number.isInteger||(Number.isInteger=function(l){return"number"==typeof l&&isFinite(l)&&Math.floor(l)===l}),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array),window.Uint8Array||(window.Uint8Array=Array),window.Int32Array||(window.Int32Array=Array);var tN=/iPhone/i,tL=/iPod/i,tF=/iPad/i,tU=/\biOS-universal(?:.+)Mac\b/i,tB=/\bAndroid(?:.+)Mobile\b/i,tk=/Android/i,tj=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,tX=/Silk/i,tG=/Windows Phone/i,tH=/\bWindows(?:.+)ARM\b/i,tz=/BlackBerry/i,tY=/BB10/i,tV=/Opera Mini/i,tW=/\b(CriOS|Chrome)(?:.+)Mobile/i,tq=/Mobile(?:.+)Firefox\b/i,Ma=function(l){return"u">typeof l&&"MacIntel"===l.platform&&"number"==typeof l.maxTouchPoints&&l.maxTouchPoints>1&&typeof MSStream>"u"},tZ=(t4=window.navigator,t6={userAgent:"",platform:"",maxTouchPoints:0},!t4&&"u">typeof navigator?t6={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:"string"==typeof t4?t6.userAgent=t4:t4&&t4.userAgent&&(t6={userAgent:t4.userAgent,platform:t4.platform,maxTouchPoints:t4.maxTouchPoints||0}),"u">typeof(t7=(t8=t6.userAgent).split("[FBAN"))[1]&&(t8=t7[0]),"u">typeof(t7=t8.split("Twitter"))[1]&&(t8=t7[0]),(ee={apple:{phone:(t9=t8,et=function(l){return l.test(t9)})(tN)&&!et(tG),ipod:et(tL),tablet:!et(tN)&&(et(tF)||Ma(t6))&&!et(tG),universal:et(tU),device:(et(tN)||et(tL)||et(tF)||et(tU)||Ma(t6))&&!et(tG)},amazon:{phone:et(tj),tablet:!et(tj)&&et(tX),device:et(tj)||et(tX)},android:{phone:!et(tG)&&et(tj)||!et(tG)&&et(tB),tablet:!et(tG)&&!et(tj)&&!et(tB)&&(et(tX)||et(tk)),device:!et(tG)&&(et(tj)||et(tX)||et(tB)||et(tk))||et(/\bokhttp\b/i)},windows:{phone:et(tG),tablet:et(tH),device:et(tG)||et(tH)},other:{blackberry:et(tz),blackberry10:et(tY),opera:et(tV),firefox:et(tq),chrome:et(tW),device:et(tz)||et(tY)||et(tV)||et(tq)||et(tW)},any:!1,phone:!1,tablet:!1}).any=ee.apple.device||ee.android.device||ee.windows.device||ee.other.device,ee.phone=ee.apple.phone||ee.android.phone||ee.windows.phone,ee.tablet=ee.apple.tablet||ee.android.tablet||ee.windows.tablet,ee),tK={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:function(l){var v=!0;if(tZ.tablet||tZ.phone){if(tZ.apple.device){var E=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(E){var C=parseInt(E[1],10);C<11&&(v=!1)}}if(tZ.android.device){var E=navigator.userAgent.match(/Android\s([0-9.]*)/);if(E){var C=parseInt(E[1],10);C<7&&(v=!1)}}}return v?32:4}(0),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:tZ.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:!tZ.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},tJ={exports:{}};!function(l){var v=Object.prototype.hasOwnProperty,E="~";function e(){}function n(l,v,E){this.fn=l,this.context=v,this.once=E||!1}function a(l,v,C,M,L){if("function"!=typeof C)throw TypeError("The listener must be a function");var U=new n(C,M||l,L),B=E?E+v:v;return l._events[B]?l._events[B].fn?l._events[B]=[l._events[B],U]:l._events[B].push(U):(l._events[B]=U,l._eventsCount++),l}function o(l,v){0==--l._eventsCount?l._events=new e:delete l._events[v]}function s(){this._events=new e,this._eventsCount=0}Object.create&&(e.prototype=Object.create(null),new e().__proto__||(E=!1)),s.prototype.eventNames=function(){var l,C,M=[];if(0===this._eventsCount)return M;for(C in l=this._events)v.call(l,C)&&M.push(E?C.slice(1):C);return Object.getOwnPropertySymbols?M.concat(Object.getOwnPropertySymbols(l)):M},s.prototype.listeners=function(l){var v=E?E+l:l,C=this._events[v];if(!C)return[];if(C.fn)return[C.fn];for(var M=0,L=C.length,U=Array(L);M<L;M++)U[M]=C[M].fn;return U},s.prototype.listenerCount=function(l){var v=E?E+l:l,C=this._events[v];return C?C.fn?1:C.length:0},s.prototype.emit=function(l,v,C,M,L,U){var B=E?E+l:l;if(!this._events[B])return!1;var k,j,X=this._events[B],G=arguments.length;if(X.fn){switch(X.once&&this.removeListener(l,X.fn,void 0,!0),G){case 1:return X.fn.call(X.context),!0;case 2:return X.fn.call(X.context,v),!0;case 3:return X.fn.call(X.context,v,C),!0;case 4:return X.fn.call(X.context,v,C,M),!0;case 5:return X.fn.call(X.context,v,C,M,L),!0;case 6:return X.fn.call(X.context,v,C,M,L,U),!0}for(j=1,k=Array(G-1);j<G;j++)k[j-1]=arguments[j];X.fn.apply(X.context,k)}else{var H,Y=X.length;for(j=0;j<Y;j++)switch(X[j].once&&this.removeListener(l,X[j].fn,void 0,!0),G){case 1:X[j].fn.call(X[j].context);break;case 2:X[j].fn.call(X[j].context,v);break;case 3:X[j].fn.call(X[j].context,v,C);break;case 4:X[j].fn.call(X[j].context,v,C,M);break;default:if(!k)for(H=1,k=Array(G-1);H<G;H++)k[H-1]=arguments[H];X[j].fn.apply(X[j].context,k)}}return!0},s.prototype.on=function(l,v,E){return a(this,l,v,E,!1)},s.prototype.once=function(l,v,E){return a(this,l,v,E,!0)},s.prototype.removeListener=function(l,v,C,M){var L=E?E+l:l;if(!this._events[L])return this;if(!v)return o(this,L),this;var U=this._events[L];if(U.fn)U.fn!==v||M&&!U.once||C&&U.context!==C||o(this,L);else{for(var B=0,k=[],j=U.length;B<j;B++)(U[B].fn!==v||M&&!U[B].once||C&&U[B].context!==C)&&k.push(U[B]);k.length?this._events[L]=1===k.length?k[0]:k:o(this,L)}return this},s.prototype.removeAllListeners=function(l){var v;return l?(v=E?E+l:l,this._events[v]&&o(this,v)):(this._events=new e,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=E,s.EventEmitter=s,l.exports=s}(tJ);var t$=tJ.exports;let tQ=si(t$);var t0={exports:{}};function hi(l,v,E){E=E||2;var C,M,L,U,B,k,j,X=v&&v.length,G=X?v[0]*E:l.length,H=rs(l,0,G,E,!0),Y=[];if(!H||H.next===H.prev)return Y;if(X&&(H=function(l,v,E,C){var M,L,U,B,k,j=[];for(M=0,L=v.length;M<L;M++)U=v[M]*C,B=M<L-1?v[M+1]*C:l.length,(k=rs(l,U,B,C,!1))===k.next&&(k.steiner=!0),j.push(function(l){var v=l,E=l;do(v.x<E.x||v.x===E.x&&v.y<E.y)&&(E=v),v=v.next;while(v!==l);return E}(k));for(j.sort(Iu),M=0;M<j.length;M++)E=function(l,v){var E=function(l,v){var E,C,M,L=v,U=l.x,B=l.y,k=-1/0;do{if(B<=L.y&&B>=L.next.y&&L.next.y!==L.y){var j=L.x+(B-L.y)*(L.next.x-L.x)/(L.next.y-L.y);if(j<=U&&j>k&&(k=j,M=L.x<L.next.x?L:L.next,j===U))return M}L=L.next}while(L!==v);if(!M)return null;var X,G=M,H=M.x,Y=M.y,W=1/0;L=M;do U>=L.x&&L.x>=H&&U!==L.x&&Re(B<Y?U:k,B,H,Y,B<Y?k:U,B,L.x,L.y)&&(X=Math.abs(B-L.y)/(U-L.x),fr(L,l)&&(X<W||X===W&&(L.x>M.x||L.x===M.x&&(E=M,C=L,0>tt(E.prev,E,C.prev)&&0>tt(C.next,E,E.next))))&&(M=L,W=X)),L=L.next;while(L!==G);return M}(l,v);if(!E)return v;var C=ns(E,l);return ge(C,C.next),ge(E,E.next)}(j[M],E);return E}(l,v,H,E)),l.length>80*E){C=L=l[0],M=U=l[1];for(var W=E;W<G;W+=E)B=l[W],k=l[W+1],B<C&&(C=B),k<M&&(M=k),B>L&&(L=B),k>U&&(U=k);j=0!==(j=Math.max(L-C,U-M))?32767/j:0}return function lr(l,v,E,C,M,L,U){if(l){!U&&L&&function(l,v,E,C){var M=l;do 0===M.z&&(M.z=Zi(M.x,M.y,v,E,C)),M.prevZ=M.prev,M.nextZ=M.next,M=M.next;while(M!==l);M.prevZ.nextZ=null,M.prevZ=null,function(l){var v,E,C,M,L,U,B,k,j=1;do{for(E=l,l=null,L=null,U=0;E;){for(U++,C=E,B=0,v=0;v<j&&(B++,C=C.nextZ);v++);for(k=j;B>0||k>0&&C;)0!==B&&(0===k||!C||E.z<=C.z)?(M=E,E=E.nextZ,B--):(M=C,C=C.nextZ,k--),L?L.nextZ=M:l=M,M.prevZ=L,L=M;E=C}L.nextZ=null,j*=2}while(U>1)}(M)}(l,C,M,L);for(var B,k,j=l;l.prev!==l.next;){if(B=l.prev,k=l.next,L?function(l,v,E,C){var M=l.prev,L=l.next;if(tt(M,l,L)>=0)return!1;for(var U=M.x,B=l.x,k=L.x,j=M.y,X=l.y,G=L.y,H=U<B?U<k?U:k:B<k?B:k,Y=j<X?j<G?j:G:X<G?X:G,W=U>B?U>k?U:k:B>k?B:k,q=j>X?j>G?j:G:X>G?X:G,Z=Zi(H,Y,v,E,C),K=Zi(W,q,v,E,C),J=l.prevZ,$=l.nextZ;J&&J.z>=Z&&$&&$.z<=K;){if(J.x>=H&&J.x<=W&&J.y>=Y&&J.y<=q&&J!==M&&J!==L&&Re(U,j,B,X,k,G,J.x,J.y)&&tt(J.prev,J,J.next)>=0||(J=J.prevZ,$.x>=H&&$.x<=W&&$.y>=Y&&$.y<=q&&$!==M&&$!==L&&Re(U,j,B,X,k,G,$.x,$.y)&&tt($.prev,$,$.next)>=0))return!1;$=$.nextZ}for(;J&&J.z>=Z;){if(J.x>=H&&J.x<=W&&J.y>=Y&&J.y<=q&&J!==M&&J!==L&&Re(U,j,B,X,k,G,J.x,J.y)&&tt(J.prev,J,J.next)>=0)return!1;J=J.prevZ}for(;$&&$.z<=K;){if($.x>=H&&$.x<=W&&$.y>=Y&&$.y<=q&&$!==M&&$!==L&&Re(U,j,B,X,k,G,$.x,$.y)&&tt($.prev,$,$.next)>=0)return!1;$=$.nextZ}return!0}(l,C,M,L):function(l){var v=l.prev,E=l.next;if(tt(v,l,E)>=0)return!1;for(var C=v.x,M=l.x,L=E.x,U=v.y,B=l.y,k=E.y,j=C<M?C<L?C:L:M<L?M:L,X=U<B?U<k?U:k:B<k?B:k,G=C>M?C>L?C:L:M>L?M:L,H=U>B?U>k?U:k:B>k?B:k,Y=E.next;Y!==v;){if(Y.x>=j&&Y.x<=G&&Y.y>=X&&Y.y<=H&&Re(C,U,M,B,L,k,Y.x,Y.y)&&tt(Y.prev,Y,Y.next)>=0)return!1;Y=Y.next}return!0}(l)){v.push(B.i/E|0),v.push(l.i/E|0),v.push(k.i/E|0),cr(l),l=k.next,j=k.next;continue}if((l=k)===j){U?1===U?lr(l=function(l,v,E){var C=l;do{var M=C.prev,L=C.next.next;!ui(M,L)&&is(M,C,C.next,L)&&fr(M,L)&&fr(L,M)&&(v.push(M.i/E|0),v.push(C.i/E|0),v.push(L.i/E|0),cr(C),cr(C.next),C=l=L),C=C.next}while(C!==l);return ge(C)}(ge(l),v,E),v,E,C,M,L,2):2===U&&function(l,v,E,C,M,L){var U=l;do{for(var B,k,j=U.next.next;j!==U.prev;){if(U.i!==j.i&&(B=U,k=j,B.next.i!==k.i&&B.prev.i!==k.i&&!function(l,v){var E=l;do{if(E.i!==l.i&&E.next.i!==l.i&&E.i!==v.i&&E.next.i!==v.i&&is(E,E.next,l,v))return!0;E=E.next}while(E!==l);return!1}(B,k)&&(fr(B,k)&&fr(k,B)&&function(l,v){var E=l,C=!1,M=(l.x+v.x)/2,L=(l.y+v.y)/2;do E.y>L!=E.next.y>L&&E.next.y!==E.y&&M<(E.next.x-E.x)*(L-E.y)/(E.next.y-E.y)+E.x&&(C=!C),E=E.next;while(E!==l);return C}(B,k)&&(tt(B.prev,B,k.prev)||tt(B,k.prev,k))||ui(B,k)&&tt(B.prev,B,B.next)>0&&tt(k.prev,k,k.next)>0))){var X=ns(U,j);U=ge(U,U.next),X=ge(X,X.next),lr(U,v,E,C,M,L,0),lr(X,v,E,C,M,L,0);return}j=j.next}U=U.next}while(U!==l)}(l,v,E,C,M,L):lr(ge(l),v,E,C,M,L,1);break}}}}(H,Y,E,C,M,j,0),Y}function rs(l,v,E,C,M){var L,U;if(M===Ji(l,v,E,C)>0)for(L=v;L<E;L+=C)U=Na(L,l[L],l[L+1],U);else for(L=E-C;L>=v;L-=C)U=Na(L,l[L],l[L+1],U);return U&&ui(U,U.next)&&(cr(U),U=U.next),U}function ge(l,v){if(!l)return l;v||(v=l);var E,C=l;do if(E=!1,!C.steiner&&(ui(C,C.next)||0===tt(C.prev,C,C.next))){if(cr(C),(C=v=C.prev)===C.next)break;E=!0}else C=C.next;while(E||C!==v);return v}function Iu(l,v){return l.x-v.x}function Zi(l,v,E,C,M){return(l=((l=((l=((l=((l=(l-E)*M|0)|l<<8)&16711935)|l<<4)&252645135)|l<<2)&858993459)|l<<1)&1431655765)|(v=((v=((v=((v=((v=(v-C)*M|0)|v<<8)&16711935)|v<<4)&252645135)|v<<2)&858993459)|v<<1)&1431655765)<<1}function Re(l,v,E,C,M,L,U,B){return(M-U)*(v-B)>=(l-U)*(L-B)&&(l-U)*(C-B)>=(E-U)*(v-B)&&(E-U)*(L-B)>=(M-U)*(C-B)}function tt(l,v,E){return(v.y-l.y)*(E.x-v.x)-(v.x-l.x)*(E.y-v.y)}function ui(l,v){return l.x===v.x&&l.y===v.y}function is(l,v,E,C){var M=Sr(tt(l,v,E)),L=Sr(tt(l,v,C)),U=Sr(tt(E,C,l)),B=Sr(tt(E,C,v));return!!(M!==L&&U!==B||0===M&&Er(l,E,v)||0===L&&Er(l,C,v)||0===U&&Er(E,l,C)||0===B&&Er(E,v,C))}function Er(l,v,E){return v.x<=Math.max(l.x,E.x)&&v.x>=Math.min(l.x,E.x)&&v.y<=Math.max(l.y,E.y)&&v.y>=Math.min(l.y,E.y)}function Sr(l){return l>0?1:l<0?-1:0}function fr(l,v){return 0>tt(l.prev,l,l.next)?tt(l,v,l.next)>=0&&tt(l,l.prev,v)>=0:0>tt(l,v,l.prev)||0>tt(l,l.next,v)}function ns(l,v){var E=new Ki(l.i,l.x,l.y),C=new Ki(v.i,v.x,v.y),M=l.next,L=v.prev;return l.next=v,v.prev=l,E.next=M,M.prev=E,C.next=E,E.prev=C,L.next=C,C.prev=L,C}function Na(l,v,E,C){var M=new Ki(l,v,E);return C?(M.next=C.next,M.prev=C,C.next.prev=M,C.next=M):(M.prev=M,M.next=M),M}function cr(l){l.next.prev=l.prev,l.prev.next=l.next,l.prevZ&&(l.prevZ.nextZ=l.nextZ),l.nextZ&&(l.nextZ.prevZ=l.prevZ)}function Ki(l,v,E){this.i=l,this.x=v,this.y=E,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ji(l,v,E,C){for(var M=0,L=v,U=E-C;L<E;L+=C)M+=(l[U]-l[L])*(l[L+1]+l[U+1]),U=L;return M}t0.exports=hi,t0.exports.default=hi,hi.deviation=function(l,v,E,C){var M=v&&v.length,L=M?v[0]*E:l.length,U=Math.abs(Ji(l,0,L,E));if(M)for(var B=0,k=v.length;B<k;B++){var j=v[B]*E,X=B<k-1?v[B+1]*E:l.length;U-=Math.abs(Ji(l,j,X,E))}var G=0;for(B=0;B<C.length;B+=3){var H=C[B]*E,Y=C[B+1]*E,W=C[B+2]*E;G+=Math.abs((l[H]-l[W])*(l[Y+1]-l[H+1])-(l[H]-l[Y])*(l[W+1]-l[H+1]))}return 0===U&&0===G?0:Math.abs((G-U)/U)},hi.flatten=function(l){for(var v=l[0][0].length,E={vertices:[],holes:[],dimensions:v},C=0,M=0;M<l.length;M++){for(var L=0;L<l[M].length;L++)for(var U=0;U<v;U++)E.vertices.push(l[M][L][U]);M>0&&(C+=l[M-1].length,E.holes.push(C))}return E};var t1=t0.exports;let t2=si(t1);var t3={},t5={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */t5.exports,er=t5.exports,function(l){var v=er&&!er.nodeType&&er,E=t5&&!t5.nodeType&&t5,C="object"==typeof tT&&tT;(C.global===C||C.window===C||C.self===C)&&(l=C);var M,L,U=/^xn--/,B=/[^\x20-\x7E]/,k=/[\x2E\u3002\uFF0E\uFF61]/g,j={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},X=Math.floor,G=String.fromCharCode;function O(l){throw RangeError(j[l])}function _(l,v){for(var E=l.length,C=[];E--;)C[E]=v(l[E]);return C}function P(l,v){var E=l.split("@"),C="";return E.length>1&&(C=E[0]+"@",l=E[1]),C+_((l=l.replace(k,".")).split("."),v).join(".")}function S(l){for(var v,E,C=[],M=0,L=l.length;M<L;)(v=l.charCodeAt(M++))>=55296&&v<=56319&&M<L?(64512&(E=l.charCodeAt(M++)))==56320?C.push(((1023&v)<<10)+(1023&E)+65536):(C.push(v),M--):C.push(v);return C}function R(l){return _(l,function(l){var v="";return l>65535&&(l-=65536,v+=G(l>>>10&1023|55296),l=56320|1023&l),v+=G(l)}).join("")}function V(l,v){return l+22+75*(l<26)-((0!=v)<<5)}function D(l,v,E){var C=0;for(l=E?X(l/700):l>>1,l+=X(l/v);l>455;C+=36)l=X(l/35);return X(C+36*l/(l+38))}function N(l){var v,E,C,M,L,U,B,k,j,G,H,Y=[],W=l.length,q=0,Z=128,K=72;for((C=l.lastIndexOf("-"))<0&&(C=0),M=0;M<C;++M)l.charCodeAt(M)>=128&&O("not-basic"),Y.push(l.charCodeAt(M));for(L=C>0?C+1:0;L<W;){for(U=q,B=1,k=36;L>=W&&O("invalid-input"),((j=(v=l.charCodeAt(L++))-48<10?v-22:v-65<26?v-65:v-97<26?v-97:36)>=36||j>X((2147483647-q)/B))&&O("overflow"),q+=j*B,!(j<(G=k<=K?1:k>=K+26?26:k-K));k+=36)B>X(2147483647/(H=36-G))&&O("overflow"),B*=H;K=D(q-U,E=Y.length+1,0==U),X(q/E)>2147483647-Z&&O("overflow"),Z+=X(q/E),q%=E,Y.splice(q++,0,Z)}return R(Y)}function A(l){var v,E,C,M,L,U,B,k,j,H,Y,W,q,Z,K,J=[];for(W=(l=S(l)).length,v=128,E=0,L=72,U=0;U<W;++U)(Y=l[U])<128&&J.push(G(Y));for(C=M=J.length,M&&J.push("-");C<W;){for(B=2147483647,U=0;U<W;++U)(Y=l[U])>=v&&Y<B&&(B=Y);for(B-v>X((2147483647-E)/(q=C+1))&&O("overflow"),E+=(B-v)*q,v=B,U=0;U<W;++U)if((Y=l[U])<v&&++E>2147483647&&O("overflow"),Y==v){for(k=E,j=36;!(k<(H=j<=L?1:j>=L+26?26:j-L));j+=36)K=k-H,Z=36-H,J.push(G(V(H+K%Z,0))),k=X(K/Z);J.push(G(V(k,0))),L=D(E,q,C==M),E=0,++C}++E,++v}return J.join("")}if(M={version:"1.4.1",ucs2:{decode:S,encode:R},decode:N,encode:A,toASCII:function(l){return P(l,function(l){return B.test(l)?"xn--"+A(l):l})},toUnicode:function(l){return P(l,function(l){return U.test(l)?N(l.slice(4).toLowerCase()):l})}},v&&E){if(t5.exports==v)E.exports=M;else for(L in M)M.hasOwnProperty(L)&&(v[L]=M[L])}else l.punycode=M}(tT);var t4,t6,t8,t7,t9,et,ee,er,ei,en=t5.exports,eo="u">typeof Symbol&&Symbol,es={foo:{}},eh=Object,eu=Object.prototype.toString,ec=Math.max,Ua=function(l,v){for(var E=[],C=0;C<l.length;C+=1)E[C]=l[C];for(var M=0;M<v.length;M+=1)E[M+l.length]=v[M];return E},Wu=function(l,v){for(var E=[],C=v||0,M=0;C<l.length;C+=1,M+=1)E[M]=l[C];return E},Yu=function(l,v){for(var E="",C=0;C<l.length;C+=1)E+=l[C],C+1<l.length&&(E+=v);return E},ep=Function.prototype.bind||function(l){var v=this;if("function"!=typeof v||"[object Function]"!==eu.apply(v))throw TypeError("Function.prototype.bind called on incompatible "+v);for(var E,C=Wu(arguments,1),M=ec(0,v.length-C.length),L=[],U=0;U<M;U++)L[U]="$"+U;if(E=Function("binder","return function ("+Yu(L,",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof E){var M=v.apply(this,Ua(C,arguments));return Object(M)===M?M:this}return v.apply(l,Ua(C,arguments))}),v.prototype){var u=function(){};u.prototype=v.prototype,E.prototype=new u,u.prototype=null}return E},ed={}.hasOwnProperty,ef=Function.prototype.call,ey=ef.bind?ef.bind(ed):function(l,v){return ef.call(ed,l,v)},em=SyntaxError,eg=Function,ev=TypeError,Ti=function(l){try{return eg('"use strict"; return ('+l+").constructor;")()}catch{}},e_=Object.getOwnPropertyDescriptor;if(e_)try{e_({},"")}catch{e_=null}var wi=function(){throw new ev},eb=e_?function(){try{return arguments.callee,wi}catch{try{return e_(arguments,"callee").get}catch{return wi}}}():wi,ex="function"==typeof eo&&"function"==typeof Symbol&&"symbol"==typeof eo("foo")&&"symbol"==typeof Symbol("bar")&&function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var l={},v=Symbol("test"),E=Object(v);if("string"==typeof v||"[object Symbol]"!==Object.prototype.toString.call(v)||"[object Symbol]"!==Object.prototype.toString.call(E))return!1;for(v in l[v]=42,l)return!1;if("function"==typeof Object.keys&&0!==Object.keys(l).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(l).length)return!1;var C=Object.getOwnPropertySymbols(l);if(1!==C.length||C[0]!==v||!Object.prototype.propertyIsEnumerable.call(l,v))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var M=Object.getOwnPropertyDescriptor(l,v);if(42!==M.value||!0!==M.enumerable)return!1}return!0}(),eT={__proto__:es}.foo===es.foo&&!(({__proto__:null})instanceof eh),eE=Object.getPrototypeOf||(eT?function(l){return l.__proto__}:null),eI={},ew=typeof Uint8Array>"u"||!eE?ei:eE(Uint8Array),eP={"%AggregateError%":typeof AggregateError>"u"?ei:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?ei:ArrayBuffer,"%ArrayIteratorPrototype%":ex&&eE?eE([][Symbol.iterator]()):ei,"%AsyncFromSyncIteratorPrototype%":ei,"%AsyncFunction%":eI,"%AsyncGenerator%":eI,"%AsyncGeneratorFunction%":eI,"%AsyncIteratorPrototype%":eI,"%Atomics%":typeof Atomics>"u"?ei:Atomics,"%BigInt%":typeof BigInt>"u"?ei:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?ei:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?ei:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?ei:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?ei:Float32Array,"%Float64Array%":typeof Float64Array>"u"?ei:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?ei:FinalizationRegistry,"%Function%":eg,"%GeneratorFunction%":eI,"%Int8Array%":typeof Int8Array>"u"?ei:Int8Array,"%Int16Array%":typeof Int16Array>"u"?ei:Int16Array,"%Int32Array%":typeof Int32Array>"u"?ei:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ex&&eE?eE(eE([][Symbol.iterator]())):ei,"%JSON%":"object"==typeof JSON?JSON:ei,"%Map%":typeof Map>"u"?ei:Map,"%MapIteratorPrototype%":!(typeof Map>"u")&&ex&&eE?eE(new Map()[Symbol.iterator]()):ei,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?ei:Promise,"%Proxy%":typeof Proxy>"u"?ei:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?ei:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?ei:Set,"%SetIteratorPrototype%":!(typeof Set>"u")&&ex&&eE?eE(new Set()[Symbol.iterator]()):ei,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?ei:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ex&&eE?eE(""[Symbol.iterator]()):ei,"%Symbol%":ex?Symbol:ei,"%SyntaxError%":em,"%ThrowTypeError%":eb,"%TypedArray%":ew,"%TypeError%":ev,"%Uint8Array%":typeof Uint8Array>"u"?ei:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?ei:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?ei:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?ei:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?ei:WeakMap,"%WeakRef%":typeof WeakRef>"u"?ei:WeakRef,"%WeakSet%":typeof WeakSet>"u"?ei:WeakSet};if(eE)try{null.error}catch(l){var eS=eE(eE(l));eP["%Error.prototype%"]=eS}var el=function i(l){var v;if("%AsyncFunction%"===l)v=Ti("async function () {}");else if("%GeneratorFunction%"===l)v=Ti("function* () {}");else if("%AsyncGeneratorFunction%"===l)v=Ti("async function* () {}");else if("%AsyncGenerator%"===l){var E=i("%AsyncGeneratorFunction%");E&&(v=E.prototype)}else if("%AsyncIteratorPrototype%"===l){var C=i("%AsyncGenerator%");C&&eE&&(v=eE(C.prototype))}return eP[l]=v,v},eA={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},eO=ep.call(Function.call,Array.prototype.concat),eC=ep.call(Function.apply,Array.prototype.splice),eR=ep.call(Function.call,String.prototype.replace),eM=ep.call(Function.call,String.prototype.slice),eD=ep.call(Function.call,RegExp.prototype.exec),eN=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,eL=/\\(\\)?/g,sl=function(l){var v=eM(l,0,1),E=eM(l,-1);if("%"===v&&"%"!==E)throw new em("invalid intrinsic syntax, expected closing `%`");if("%"===E&&"%"!==v)throw new em("invalid intrinsic syntax, expected opening `%`");var C=[];return eR(l,eN,function(l,v,E,M){C[C.length]=E?eR(M,eL,"$1"):v||l}),C},hl=function(l,v){var E,C=l;if(ey(eA,C)&&(C="%"+(E=eA[C])[0]+"%"),ey(eP,C)){var M=eP[C];if(M===eI&&(M=el(C)),typeof M>"u"&&!v)throw new ev("intrinsic "+l+" exists, but is not available. Please file an issue!");return{alias:E,name:C,value:M}}throw new em("intrinsic "+l+" does not exist!")},Yn=function(l,v){if("string"!=typeof l||0===l.length)throw new ev("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof v)throw new ev('"allowMissing" argument must be a boolean');if(null===eD(/^%?[^%]*%?$/,l))throw new em("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var E=sl(l),C=E.length>0?E[0]:"",M=hl("%"+C+"%",v),L=M.name,U=M.value,B=!1,k=M.alias;k&&(C=k[0],eC(E,eO([0,1],k)));for(var j=1,X=!0;j<E.length;j+=1){var G=E[j],H=eM(G,0,1),Y=eM(G,-1);if(('"'===H||"'"===H||"`"===H||'"'===Y||"'"===Y||"`"===Y)&&H!==Y)throw new em("property names with quotes must have matching quotes");if("constructor"!==G&&X||(B=!0),C+="."+G,ey(eP,L="%"+C+"%"))U=eP[L];else if(null!=U){if(!(G in U)){if(!v)throw new ev("base intrinsic for "+l+" exists, but the property is not available.");return}if(e_&&j+1>=E.length){var W=e_(U,G);U=(X=!!W)&&"get"in W&&!("originalValue"in W.get)?W.get:U[G]}else X=ey(U,G),U=U[G];X&&!B&&(eP[L]=U)}}return U},eF={exports:{}};!function(l){var v=Yn("%Function.prototype.apply%"),E=Yn("%Function.prototype.call%"),C=Yn("%Reflect.apply%",!0)||ep.call(E,v),M=Yn("%Object.getOwnPropertyDescriptor%",!0),L=Yn("%Object.defineProperty%",!0),U=Yn("%Math.max%");if(L)try{L({},"a",{value:1})}catch{L=null}l.exports=function(l){var v=C(ep,E,arguments);return M&&L&&M(v,"length").configurable&&L(v,"length",{value:1+U(0,l.length-(arguments.length-1))}),v};var u=function(){return C(ep,v,arguments)};L?L(l.exports,"apply",{value:u}):l.exports.apply=u}(eF);var eU=eF.exports,eB=eU(Yn("String.prototype.indexOf"));let ek=Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})),ej=function(l){if(l.__esModule)return l;var v=l.default;if("function"==typeof v){var t=function e(){return this instanceof e?Reflect.construct(v,arguments,this.constructor):v.apply(this,arguments)};t.prototype=v.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(l).forEach(function(v){var E=Object.getOwnPropertyDescriptor(l,v);Object.defineProperty(t,v,E.get?E:{enumerable:!0,get:function(){return l[v]}})}),t}(ek);var eX="function"==typeof Map&&Map.prototype,eG=Object.getOwnPropertyDescriptor&&eX?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,eH=eX&&eG&&"function"==typeof eG.get?eG.get:null,ez=eX&&Map.prototype.forEach,eY="function"==typeof Set&&Set.prototype,eV=Object.getOwnPropertyDescriptor&&eY?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,eW=eY&&eV&&"function"==typeof eV.get?eV.get:null,eq=eY&&Set.prototype.forEach,eZ="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,eK="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,eJ="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,e$=Boolean.prototype.valueOf,eQ=Object.prototype.toString,e0=Function.prototype.toString,e1=String.prototype.match,e2=String.prototype.slice,e3=String.prototype.replace,e5=String.prototype.toUpperCase,e4=String.prototype.toLowerCase,e6=RegExp.prototype.test,e8=Array.prototype.concat,e7=Array.prototype.join,e9=Array.prototype.slice,rt=Math.floor,re="function"==typeof BigInt?BigInt.prototype.valueOf:null,rr=Object.getOwnPropertySymbols,ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,ro="function"==typeof Symbol&&"object"==typeof Symbol.iterator,ra="function"==typeof Symbol&&Symbol.toStringTag?Symbol.toStringTag:null,rh=Object.prototype.propertyIsEnumerable,ru=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(l){return l.__proto__}:null);function $a(l,v){if(l===1/0||l===-1/0||l!=l||l&&l>-1e3&&l<1e3||e6.call(/e/,v))return v;var E=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof l){var C=l<0?-rt(-l):rt(l);if(C!==l){var M=String(C),L=e2.call(v,M.length+1);return e3.call(M,E,"$&_")+"."+e3.call(e3.call(L,/([0-9]{3})/g,"$&_"),/_$/,"")}}return e3.call(v,E,"$&_")}var rl=ej.custom,rc=ds(rl)?rl:null;function cs(l,v,E){var C="double"===(E.quoteStyle||v)?'"':"'";return C+l+C}function rn(l){return"[object Array]"===te(l)&&(!ra||!("object"==typeof l&&ra in l))}function Ka(l){return"[object RegExp]"===te(l)&&(!ra||!("object"==typeof l&&ra in l))}function ds(l){if(ro)return l&&"object"==typeof l&&l instanceof Symbol;if("symbol"==typeof l)return!0;if(!l||"object"!=typeof l||!ri)return!1;try{return ri.call(l),!0}catch{}return!1}var rp=Object.prototype.hasOwnProperty||function(l){return l in this};function Yt(l,v){return rp.call(l,v)}function te(l){return eQ.call(l)}function ps(l,v){if(l.indexOf)return l.indexOf(v);for(var E=0,C=l.length;E<C;E++)if(l[E]===v)return E;return -1}function Xl(l){var v=l.charCodeAt(0),E={8:"b",9:"t",10:"n",12:"f",13:"r"}[v];return E?"\\"+E:"\\x"+(v<16?"0":"")+e5.call(v.toString(16))}function Ke(l){return"Object("+l+")"}function Si(l){return l+" { ? }"}function Ja(l,v,E,C){return l+" ("+v+") {"+(C?nn(E,C):e7.call(E,", "))+"}"}function nn(l,v){if(0===l.length)return"";var E=`
`+v.prev+v.base;return E+e7.call(l,","+E)+`
`+v.prev}function Ar(l,v){var E=rn(l),C=[];if(E){C.length=l.length;for(var M=0;M<l.length;M++)C[M]=Yt(l,M)?v(l[M],l):""}var L,U="function"==typeof rr?rr(l):[];if(ro){L={};for(var B=0;B<U.length;B++)L["$"+U[B]]=U[B]}for(var k in l)Yt(l,k)&&(E&&String(Number(k))===k&&k<l.length||ro&&L["$"+k]instanceof Symbol||(e6.call(/[^\w$]/,k)?C.push(v(k,l)+": "+v(l[k],l)):C.push(k+": "+v(l[k],l))));if("function"==typeof rr)for(var j=0;j<U.length;j++)rh.call(l,U[j])&&C.push("["+v(U[j])+"]: "+v(l[U[j]],l));return C}var Ye=function(l,v){var E=Yn(l,!!v);return"function"==typeof E&&eB(l,".prototype.")>-1?eU(E):E},jl=function i(l,v,E,C){var M=v||{};if(Yt(M,"quoteStyle")&&"single"!==M.quoteStyle&&"double"!==M.quoteStyle)throw TypeError('option "quoteStyle" must be "single" or "double"');if(Yt(M,"maxStringLength")&&("number"==typeof M.maxStringLength?M.maxStringLength<0&&M.maxStringLength!==1/0:null!==M.maxStringLength))throw TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var L=!Yt(M,"customInspect")||M.customInspect;if("boolean"!=typeof L&&"symbol"!==L)throw TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Yt(M,"indent")&&null!==M.indent&&"	"!==M.indent&&!(parseInt(M.indent,10)===M.indent&&M.indent>0))throw TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Yt(M,"numericSeparator")&&"boolean"!=typeof M.numericSeparator)throw TypeError('option "numericSeparator", if provided, must be `true` or `false`');var U=M.numericSeparator;if(typeof l>"u")return"undefined";if(null===l)return"null";if("boolean"==typeof l)return l?"true":"false";if("string"==typeof l)return function vs(l,v){if(l.length>v.maxStringLength){var E=l.length-v.maxStringLength;return vs(e2.call(l,0,v.maxStringLength),v)+"... "+E+" more character"+(E>1?"s":"")}return cs(e3.call(e3.call(l,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Xl),"single",v)}(l,M);if("number"==typeof l){if(0===l)return 1/0/l>0?"0":"-0";var B=String(l);return U?$a(l,B):B}if("bigint"==typeof l){var k=String(l)+"n";return U?$a(l,k):k}var j=typeof M.depth>"u"?5:M.depth;if(typeof E>"u"&&(E=0),E>=j&&j>0&&"object"==typeof l)return rn(l)?"[Array]":"[Object]";var X=function(l,v){var E;if("	"===l.indent)E="	";else{if("number"!=typeof l.indent||!(l.indent>0))return null;E=e7.call(Array(l.indent+1)," ")}return{base:E,prev:e7.call(Array(v+1),E)}}(M,E);if(typeof C>"u")C=[];else if(ps(C,l)>=0)return"[Circular]";function c(l,v,L){if(v&&(C=e9.call(C)).push(v),L){var U={depth:M.depth};return Yt(M,"quoteStyle")&&(U.quoteStyle=M.quoteStyle),i(l,U,E+1,C)}return i(l,M,E+1,C)}if("function"==typeof l&&!Ka(l)){var G=function(l){if(l.name)return l.name;var v=e1.call(e0.call(l),/^function\s*([\w$]+)/);return v?v[1]:null}(l),H=Ar(l,c);return"[Function"+(G?": "+G:" (anonymous)")+"]"+(H.length>0?" { "+e7.call(H,", ")+" }":"")}if(ds(l)){var Y=ro?e3.call(String(l),/^(Symbol\(.*\))_[^)]*$/,"$1"):ri.call(l);return"object"!=typeof l||ro?Y:Ke(Y)}if(l&&"object"==typeof l&&("u">typeof HTMLElement&&l instanceof HTMLElement||"string"==typeof l.nodeName&&"function"==typeof l.getAttribute)){for(var W,q="<"+e4.call(String(l.nodeName)),Z=l.attributes||[],K=0;K<Z.length;K++)q+=" "+Z[K].name+"="+cs((W=Z[K].value,e3.call(String(W),/"/g,"&quot;")),"double",M);return q+=">",l.childNodes&&l.childNodes.length&&(q+="..."),q+="</"+e4.call(String(l.nodeName))+">"}if(rn(l)){if(0===l.length)return"[]";var J=Ar(l,c);return X&&!function(l){for(var v=0;v<l.length;v++)if(ps(l[v],`
`)>=0)return!1;return!0}(J)?"["+nn(J,X)+"]":"[ "+e7.call(J,", ")+" ]"}if("[object Error]"===te(l)&&(!ra||!("object"==typeof l&&ra in l))){var $=Ar(l,c);return"cause"in Error.prototype||!("cause"in l)||rh.call(l,"cause")?0===$.length?"["+String(l)+"]":"{ ["+String(l)+"] "+e7.call($,", ")+" }":"{ ["+String(l)+"] "+e7.call(e8.call("[cause]: "+c(l.cause),$),", ")+" }"}if("object"==typeof l&&L){if(rc&&"function"==typeof l[rc]&&ej)return ej(l,{depth:j-E});if("symbol"!==L&&"function"==typeof l.inspect)return l.inspect()}if(function(l){if(!eH||!l||"object"!=typeof l)return!1;try{eH.call(l);try{eW.call(l)}catch{return!0}return l instanceof Map}catch{}return!1}(l)){var Q=[];return ez&&ez.call(l,function(v,E){Q.push(c(E,l,!0)+" => "+c(v,l))}),Ja("Map",eH.call(l),Q,X)}if(function(l){if(!eW||!l||"object"!=typeof l)return!1;try{eW.call(l);try{eH.call(l)}catch{return!0}return l instanceof Set}catch{}return!1}(l)){var tr=[];return eq&&eq.call(l,function(v){tr.push(c(v,l))}),Ja("Set",eW.call(l),tr,X)}if(function(l){if(!eZ||!l||"object"!=typeof l)return!1;try{eZ.call(l,eZ);try{eK.call(l,eK)}catch{return!0}return l instanceof WeakMap}catch{}return!1}(l))return Si("WeakMap");if(function(l){if(!eK||!l||"object"!=typeof l)return!1;try{eK.call(l,eK);try{eZ.call(l,eZ)}catch{return!0}return l instanceof WeakSet}catch{}return!1}(l))return Si("WeakSet");if(function(l){if(!eJ||!l||"object"!=typeof l)return!1;try{return eJ.call(l),!0}catch{}return!1}(l))return Si("WeakRef");if("[object Number]"===te(l)&&(!ra||!("object"==typeof l&&ra in l)))return Ke(c(Number(l)));if(function(l){if(!l||"object"!=typeof l||!re)return!1;try{return re.call(l),!0}catch{}return!1}(l))return Ke(c(re.call(l)));if("[object Boolean]"===te(l)&&(!ra||!("object"==typeof l&&ra in l)))return Ke(e$.call(l));if("[object String]"===te(l)&&(!ra||!("object"==typeof l&&ra in l)))return Ke(c(String(l)));if(l===tT)return"u">typeof window?"{ [object Window] }":"{ [object global] }";if(!("[object Date]"===te(l)&&(!ra||!("object"==typeof l&&ra in l)))&&!Ka(l)){var ti=Ar(l,c),tn=ru?ru(l)===Object.prototype:l instanceof Object||l.constructor===Object,to=l instanceof Object?"":"null prototype",ts=!tn&&ra&&Object(l)===l&&ra in l?e2.call(te(l),8,-1):to?"Object":"",th=(tn||"function"!=typeof l.constructor?"":l.constructor.name?l.constructor.name+" ":"")+(ts||to?"["+e7.call(e8.call([],ts||[],to||[]),": ")+"] ":"");return 0===ti.length?th+"{}":X?th+"{"+nn(ti,X)+"}":th+"{ "+e7.call(ti,", ")+" }"}return String(l)},rd=Yn("%TypeError%"),rf=Yn("%WeakMap%",!0),ry=Yn("%Map%",!0),rm=Ye("WeakMap.prototype.get",!0),rg=Ye("WeakMap.prototype.set",!0),rv=Ye("WeakMap.prototype.has",!0),r_=Ye("Map.prototype.get",!0),rb=Ye("Map.prototype.set",!0),rx=Ye("Map.prototype.has",!0),Jn=function(l,v){for(var E,C=l;null!==(E=C.next);C=E)if(E.key===v)return C.next=E.next,E.next=l.next,l.next=E,E},Kl=function(l,v){var E=Jn(l,v);return E&&E.value},Jl=function(l,v,E){var C=Jn(l,v);C?C.value=E:l.next={key:v,next:l.next,value:E}},rT=String.prototype.replace,rE=/%20/g,rI={RFC1738:"RFC1738",RFC3986:"RFC3986"},rw={default:rI.RFC3986,formatters:{RFC1738:function(l){return rT.call(l,rE,"+")},RFC3986:function(l){return String(l)}},RFC1738:rI.RFC1738,RFC3986:rI.RFC3986},rP=Object.prototype.hasOwnProperty,rS=Array.isArray,rA=function(){for(var l=[],v=0;v<256;++v)l.push("%"+((v<16?"0":"")+v.toString(16)).toUpperCase());return l}(),af=function(l){for(;l.length>1;){var v=l.pop(),E=v.obj[v.prop];if(rS(E)){for(var C=[],M=0;M<E.length;++M)"u">typeof E[M]&&C.push(E[M]);v.obj[v.prop]=C}}},ys=function(l,v){for(var E=v&&v.plainObjects?Object.create(null):{},C=0;C<l.length;++C)"u">typeof l[C]&&(E[C]=l[C]);return E},rO={arrayToObject:ys,assign:function(l,v){return Object.keys(v).reduce(function(l,E){return l[E]=v[E],l},l)},combine:function(l,v){return[].concat(l,v)},compact:function(l){for(var v=[{obj:{o:l},prop:"o"}],E=[],C=0;C<v.length;++C)for(var M=v[C],L=M.obj[M.prop],U=Object.keys(L),B=0;B<U.length;++B){var k=U[B],j=L[k];"object"==typeof j&&null!==j&&-1===E.indexOf(j)&&(v.push({obj:L,prop:k}),E.push(j))}return af(v),l},decode:function(l,v,E){var C=l.replace(/\+/g," ");if("iso-8859-1"===E)return C.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(C)}catch{return C}},encode:function(l,v,E,C,M){if(0===l.length)return l;var L=l;if("symbol"==typeof l?L=Symbol.prototype.toString.call(l):"string"!=typeof l&&(L=String(l)),"iso-8859-1"===E)return escape(L).replace(/%u[0-9a-f]{4}/gi,function(l){return"%26%23"+parseInt(l.slice(2),16)+"%3B"});for(var U="",B=0;B<L.length;++B){var k=L.charCodeAt(B);if(45===k||46===k||95===k||126===k||k>=48&&k<=57||k>=65&&k<=90||k>=97&&k<=122||M===rw.RFC1738&&(40===k||41===k)){U+=L.charAt(B);continue}if(k<128){U+=rA[k];continue}if(k<2048){U+=rA[192|k>>6]+rA[128|63&k];continue}if(k<55296||k>=57344){U+=rA[224|k>>12]+rA[128|k>>6&63]+rA[128|63&k];continue}B+=1,U+=rA[240|(k=65536+((1023&k)<<10|1023&L.charCodeAt(B)))>>18]+rA[128|k>>12&63]+rA[128|k>>6&63]+rA[128|63&k]}return U},isBuffer:function(l){return!!l&&"object"==typeof l&&!!(l.constructor&&l.constructor.isBuffer&&l.constructor.isBuffer(l))},isRegExp:function(l){return"[object RegExp]"===Object.prototype.toString.call(l)},maybeMap:function(l,v){if(rS(l)){for(var E=[],C=0;C<l.length;C+=1)E.push(v(l[C]));return E}return v(l)},merge:function i(l,v,E){if(!v)return l;if("object"!=typeof v){if(rS(l))l.push(v);else{if(!l||"object"!=typeof l)return[l,v];(E&&(E.plainObjects||E.allowPrototypes)||!rP.call(Object.prototype,v))&&(l[v]=!0)}return l}if(!l||"object"!=typeof l)return[l].concat(v);var C=l;return rS(l)&&!rS(v)&&(C=ys(l,E)),rS(l)&&rS(v)?(v.forEach(function(v,C){if(rP.call(l,C)){var M=l[C];M&&"object"==typeof M&&v&&"object"==typeof v?l[C]=i(M,v,E):l.push(v)}else l[C]=v}),l):Object.keys(v).reduce(function(l,C){var M=v[C];return rP.call(l,C)?l[C]=i(l[C],M,E):l[C]=M,l},C)}},gs=function(){var l,v,E,C={assert:function(l){if(!C.has(l))throw new rd("Side channel does not contain "+jl(l))},get:function(C){if(rf&&C&&("object"==typeof C||"function"==typeof C)){if(l)return rm(l,C)}else if(ry){if(v)return r_(v,C)}else if(E)return Kl(E,C)},has:function(C){if(rf&&C&&("object"==typeof C||"function"==typeof C)){if(l)return rv(l,C)}else if(ry){if(v)return rx(v,C)}else if(E)return!!Jn(E,C);return!1},set:function(C,M){rf&&C&&("object"==typeof C||"function"==typeof C)?(l||(l=new rf),rg(l,C,M)):ry?(v||(v=new ry),rb(v,C,M)):(E||(E={key:{},next:null}),Jl(E,C,M))}};return C},rC=Object.prototype.hasOwnProperty,rR={brackets:function(l){return l+"[]"},comma:"comma",indices:function(l,v){return l+"["+v+"]"},repeat:function(l){return l}},rM=Array.isArray,rD=Array.prototype.push,_s=function(l,v){rD.apply(l,rM(v)?v:[v])},rN=Date.prototype.toISOString,rL=rw.default,rF={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:rO.encode,encodeValuesOnly:!1,format:rL,formatter:rw.formatters[rL],indices:!1,serializeDate:function(l){return rN.call(l)},skipNulls:!1,strictNullHandling:!1},rU={},_f=function i(l,v,E,C,M,L,U,B,k,j,X,G,H,Y,W,q){for(var Z,K,J=l,$=q,Q=0,tr=!1;void 0!==($=$.get(rU))&&!tr;){var ti=$.get(l);if(Q+=1,"u">typeof ti){if(ti===Q)throw RangeError("Cyclic object value");tr=!0}typeof $.get(rU)>"u"&&(Q=0)}if("function"==typeof B?J=B(v,J):J instanceof Date?J=X(J):"comma"===E&&rM(J)&&(J=rO.maybeMap(J,function(l){return l instanceof Date?X(l):l})),null===J){if(M)return U&&!Y?U(v,rF.encoder,W,"key",G):v;J=""}if("string"==typeof(Z=J)||"number"==typeof Z||"boolean"==typeof Z||"symbol"==typeof Z||"bigint"==typeof Z||rO.isBuffer(J))return U?[H(Y?v:U(v,rF.encoder,W,"key",G))+"="+H(U(J,rF.encoder,W,"value",G))]:[H(v)+"="+H(String(J))];var tn=[];if(typeof J>"u")return tn;if("comma"===E&&rM(J))Y&&U&&(J=rO.maybeMap(J,U)),K=[{value:J.length>0?J.join(",")||null:void 0}];else if(rM(B))K=B;else{var to=Object.keys(J);K=k?to.sort(k):to}for(var ts=C&&rM(J)&&1===J.length?v+"[]":v,th=0;th<K.length;++th){var tl=K[th],tc="object"==typeof tl&&"u">typeof tl.value?tl.value:J[tl];if(!(L&&null===tc)){var tp=rM(J)?"function"==typeof E?E(ts,tl):ts:ts+(j?"."+tl:"["+tl+"]");q.set(l,Q);var td=gs();td.set(rU,q),_s(tn,i(tc,tp,E,C,M,L,"comma"===E&&Y&&rM(J)?null:U,B,k,j,X,G,H,Y,W,td))}}return tn},xf=function(l){if(!l)return rF;if(null!==l.encoder&&"u">typeof l.encoder&&"function"!=typeof l.encoder)throw TypeError("Encoder has to be a function.");var v=l.charset||rF.charset;if("u">typeof l.charset&&"utf-8"!==l.charset&&"iso-8859-1"!==l.charset)throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var E=rw.default;if("u">typeof l.format){if(!rC.call(rw.formatters,l.format))throw TypeError("Unknown format option provided.");E=l.format}var C=rw.formatters[E],M=rF.filter;return("function"==typeof l.filter||rM(l.filter))&&(M=l.filter),{addQueryPrefix:"boolean"==typeof l.addQueryPrefix?l.addQueryPrefix:rF.addQueryPrefix,allowDots:typeof l.allowDots>"u"?rF.allowDots:!!l.allowDots,charset:v,charsetSentinel:"boolean"==typeof l.charsetSentinel?l.charsetSentinel:rF.charsetSentinel,delimiter:typeof l.delimiter>"u"?rF.delimiter:l.delimiter,encode:"boolean"==typeof l.encode?l.encode:rF.encode,encoder:"function"==typeof l.encoder?l.encoder:rF.encoder,encodeValuesOnly:"boolean"==typeof l.encodeValuesOnly?l.encodeValuesOnly:rF.encodeValuesOnly,filter:M,format:E,formatter:C,serializeDate:"function"==typeof l.serializeDate?l.serializeDate:rF.serializeDate,skipNulls:"boolean"==typeof l.skipNulls?l.skipNulls:rF.skipNulls,sort:"function"==typeof l.sort?l.sort:null,strictNullHandling:"boolean"==typeof l.strictNullHandling?l.strictNullHandling:rF.strictNullHandling}},rB=Object.prototype.hasOwnProperty,rk=Array.isArray,rj={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:rO.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},xs=function(l,v){return l&&"string"==typeof l&&v.comma&&l.indexOf(",")>-1?l.split(","):l},Ef=function(l,v){var E,C={__proto__:null},M=v.ignoreQueryPrefix?l.replace(/^\?/,""):l,L=v.parameterLimit===1/0?void 0:v.parameterLimit,U=M.split(v.delimiter,L),B=-1,k=v.charset;if(v.charsetSentinel)for(E=0;E<U.length;++E)0===U[E].indexOf("utf8=")&&("utf8=%E2%9C%93"===U[E]?k="utf-8":"utf8=%26%2310003%3B"===U[E]&&(k="iso-8859-1"),B=E,E=U.length);for(E=0;E<U.length;++E)if(E!==B){var j,X,G=U[E],H=G.indexOf("]="),Y=-1===H?G.indexOf("="):H+1;-1===Y?(j=v.decoder(G,rj.decoder,k,"key"),X=v.strictNullHandling?null:""):(j=v.decoder(G.slice(0,Y),rj.decoder,k,"key"),X=rO.maybeMap(xs(G.slice(Y+1),v),function(l){return v.decoder(l,rj.decoder,k,"value")})),X&&v.interpretNumericEntities&&"iso-8859-1"===k&&(X=X.replace(/&#(\d+);/g,function(l,v){return String.fromCharCode(parseInt(v,10))})),G.indexOf("[]=")>-1&&(X=rk(X)?[X]:X),rB.call(C,j)?C[j]=rO.combine(C[j],X):C[j]=X}return C},Sf=function(l,v,E,C){for(var M=C?v:xs(v,E),L=l.length-1;L>=0;--L){var U,B=l[L];if("[]"===B&&E.parseArrays)U=[].concat(M);else{U=E.plainObjects?Object.create(null):{};var k="["===B.charAt(0)&&"]"===B.charAt(B.length-1)?B.slice(1,-1):B,j=parseInt(k,10);E.parseArrays||""!==k?!isNaN(j)&&B!==k&&String(j)===k&&j>=0&&E.parseArrays&&j<=E.arrayLimit?(U=[])[j]=M:"__proto__"!==k&&(U[k]=M):U={0:M}}M=U}return M},Af=function(l,v,E,C){if(l){var M=E.allowDots?l.replace(/\.([^.[]+)/g,"[$1]"):l,L=/(\[[^[\]]*])/g,U=E.depth>0&&/(\[[^[\]]*])/.exec(M),B=U?M.slice(0,U.index):M,k=[];if(B){if(!E.plainObjects&&rB.call(Object.prototype,B)&&!E.allowPrototypes)return;k.push(B)}for(var j=0;E.depth>0&&null!==(U=L.exec(M))&&j<E.depth;){if(j+=1,!E.plainObjects&&rB.call(Object.prototype,U[1].slice(1,-1))&&!E.allowPrototypes)return;k.push(U[1])}return U&&k.push("["+M.slice(U.index)+"]"),Sf(k,v,E,C)}},Of=function(l){if(!l)return rj;if(null!==l.decoder&&void 0!==l.decoder&&"function"!=typeof l.decoder)throw TypeError("Decoder has to be a function.");if("u">typeof l.charset&&"utf-8"!==l.charset&&"iso-8859-1"!==l.charset)throw TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var v=typeof l.charset>"u"?rj.charset:l.charset;return{allowDots:typeof l.allowDots>"u"?rj.allowDots:!!l.allowDots,allowPrototypes:"boolean"==typeof l.allowPrototypes?l.allowPrototypes:rj.allowPrototypes,allowSparse:"boolean"==typeof l.allowSparse?l.allowSparse:rj.allowSparse,arrayLimit:"number"==typeof l.arrayLimit?l.arrayLimit:rj.arrayLimit,charset:v,charsetSentinel:"boolean"==typeof l.charsetSentinel?l.charsetSentinel:rj.charsetSentinel,comma:"boolean"==typeof l.comma?l.comma:rj.comma,decoder:"function"==typeof l.decoder?l.decoder:rj.decoder,delimiter:"string"==typeof l.delimiter||rO.isRegExp(l.delimiter)?l.delimiter:rj.delimiter,depth:"number"==typeof l.depth||!1===l.depth?+l.depth:rj.depth,ignoreQueryPrefix:!0===l.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof l.interpretNumericEntities?l.interpretNumericEntities:rj.interpretNumericEntities,parameterLimit:"number"==typeof l.parameterLimit?l.parameterLimit:rj.parameterLimit,parseArrays:!1!==l.parseArrays,plainObjects:"boolean"==typeof l.plainObjects?l.plainObjects:rj.plainObjects,strictNullHandling:"boolean"==typeof l.strictNullHandling?l.strictNullHandling:rj.strictNullHandling}};function It(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var rX=/^([a-z0-9.+-]+:)/i,rG=/:[0-9]*$/,rH=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,rz=["'"].concat(["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"])),rY=["%","/","?",";","#"].concat(rz),rV=["/","?","#"],rW=/^[+a-z0-9A-Z_-]{0,63}$/,rq=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,rZ={javascript:!0,"javascript:":!0},rK={javascript:!0,"javascript:":!0},rJ={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},r$={formats:rw,parse:function(l,v){var E=Of(v);if(""===l||null===l||typeof l>"u")return E.plainObjects?Object.create(null):{};for(var C="string"==typeof l?Ef(l,E):l,M=E.plainObjects?Object.create(null):{},L=Object.keys(C),U=0;U<L.length;++U){var B=L[U],k=Af(B,C[B],E,"string"==typeof l);M=rO.merge(M,k,E)}return!0===E.allowSparse?M:rO.compact(M)},stringify:function(l,v){var E,C,M=l,L=xf(v);"function"==typeof L.filter?M=(0,L.filter)("",M):rM(L.filter)&&(C=L.filter);var U=[];if("object"!=typeof M||null===M)return"";E=v&&v.arrayFormat in rR?v.arrayFormat:v&&"indices"in v?v.indices?"indices":"repeat":"indices";var B=rR[E];if(v&&"commaRoundTrip"in v&&"boolean"!=typeof v.commaRoundTrip)throw TypeError("`commaRoundTrip` must be a boolean, or absent");var k="comma"===B&&v&&v.commaRoundTrip;C||(C=Object.keys(M)),L.sort&&C.sort(L.sort);for(var j=gs(),X=0;X<C.length;++X){var G=C[X];L.skipNulls&&null===M[G]||_s(U,_f(M[G],G,B,k,L.strictNullHandling,L.skipNulls,L.encode?L.encoder:null,L.filter,L.sort,L.allowDots,L.serializeDate,L.format,L.formatter,L.encodeValuesOnly,L.charset,j))}var H=U.join(L.delimiter),Y=!0===L.addQueryPrefix?"?":"";return L.charsetSentinel&&("iso-8859-1"===L.charset?Y+="utf8=%26%2310003%3B&":Y+="utf8=%E2%9C%93&"),H.length>0?Y+H:""}};function xr(l,v,E){if(l&&"object"==typeof l&&l instanceof It)return l;var C=new It;return C.parse(l,v,E),C}It.prototype.parse=function(l,v,E){if("string"!=typeof l)throw TypeError("Parameter 'url' must be a string, not "+typeof l);var C=l.indexOf("?"),M=-1!==C&&C<l.indexOf("#")?"?":"#",L=l.split(M);L[0]=L[0].replace(/\\/g,"/");var U=l=L.join(M);if(U=U.trim(),!E&&1===l.split("#").length){var B=rH.exec(U);if(B)return this.path=U,this.href=U,this.pathname=B[1],B[2]?(this.search=B[2],v?this.query=r$.parse(this.search.substr(1)):this.query=this.search.substr(1)):v&&(this.search="",this.query={}),this}var k=rX.exec(U);if(k){var j=(k=k[0]).toLowerCase();this.protocol=j,U=U.substr(k.length)}if(E||k||U.match(/^\/\/[^@/]+@[^@/]+/)){var X="//"===U.substr(0,2);X&&!(k&&rK[k])&&(U=U.substr(2),this.slashes=!0)}if(!rK[k]&&(X||k&&!rJ[k])){for(var G,H,Y=-1,W=0;W<rV.length;W++){var q=U.indexOf(rV[W]);-1!==q&&(-1===Y||q<Y)&&(Y=q)}-1!==(H=-1===Y?U.lastIndexOf("@"):U.lastIndexOf("@",Y))&&(G=U.slice(0,H),U=U.slice(H+1),this.auth=decodeURIComponent(G)),Y=-1;for(var W=0;W<rY.length;W++){var q=U.indexOf(rY[W]);-1!==q&&(-1===Y||q<Y)&&(Y=q)}-1===Y&&(Y=U.length),this.host=U.slice(0,Y),U=U.slice(Y),this.parseHost(),this.hostname=this.hostname||"";var Z="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!Z)for(var K=this.hostname.split(/\./),W=0,J=K.length;W<J;W++){var $=K[W];if($&&!$.match(rW)){for(var Q="",tr=0,ti=$.length;tr<ti;tr++)$.charCodeAt(tr)>127?Q+="x":Q+=$[tr];if(!Q.match(rW)){var tn=K.slice(0,W),to=K.slice(W+1),ts=$.match(rq);ts&&(tn.push(ts[1]),to.unshift(ts[2])),to.length&&(U="/"+to.join(".")+U),this.hostname=tn.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),Z||(this.hostname=en.toASCII(this.hostname));var th=this.port?":"+this.port:"",tl=this.hostname||"";this.host=tl+th,this.href+=this.host,Z&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==U[0]&&(U="/"+U))}if(!rZ[j])for(var W=0,J=rz.length;W<J;W++){var tc=rz[W];if(-1!==U.indexOf(tc)){var tp=encodeURIComponent(tc);tp===tc&&(tp=escape(tc)),U=U.split(tc).join(tp)}}var td=U.indexOf("#");-1!==td&&(this.hash=U.substr(td),U=U.slice(0,td));var tf=U.indexOf("?");if(-1!==tf?(this.search=U.substr(tf),this.query=U.substr(tf+1),v&&(this.query=r$.parse(this.query)),U=U.slice(0,tf)):v&&(this.search="",this.query={}),U&&(this.pathname=U),rJ[j]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var th=this.pathname||"",ty=this.search||"";this.path=th+ty}return this.href=this.format(),this},It.prototype.format=function(){var l=this.auth||"";l&&(l=(l=encodeURIComponent(l)).replace(/%3A/i,":")+"@");var v=this.protocol||"",E=this.pathname||"",C=this.hash||"",M=!1,L="";this.host?M=l+this.host:this.hostname&&(M=l+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(M+=":"+this.port)),this.query&&"object"==typeof this.query&&Object.keys(this.query).length&&(L=r$.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var U=this.search||L&&"?"+L||"";return v&&":"!==v.substr(-1)&&(v+=":"),this.slashes||(!v||rJ[v])&&!1!==M?(M="//"+(M||""),E&&"/"!==E.charAt(0)&&(E="/"+E)):M||(M=""),C&&"#"!==C.charAt(0)&&(C="#"+C),U&&"?"!==U.charAt(0)&&(U="?"+U),v+M+(E=E.replace(/[?#]/g,function(l){return encodeURIComponent(l)}))+(U=U.replace("#","%23"))+C},It.prototype.resolve=function(l){return this.resolveObject(xr(l,!1,!0)).format()},It.prototype.resolveObject=function(l){if("string"==typeof l){var v=new It;v.parse(l,!1,!0),l=v}for(var E=new It,C=Object.keys(this),M=0;M<C.length;M++){var L=C[M];E[L]=this[L]}if(E.hash=l.hash,""===l.href)return E.href=E.format(),E;if(l.slashes&&!l.protocol){for(var U=Object.keys(l),B=0;B<U.length;B++){var k=U[B];"protocol"!==k&&(E[k]=l[k])}return rJ[E.protocol]&&E.hostname&&!E.pathname&&(E.pathname="/",E.path=E.pathname),E.href=E.format(),E}if(l.protocol&&l.protocol!==E.protocol){if(!rJ[l.protocol]){for(var j=Object.keys(l),X=0;X<j.length;X++){var G=j[X];E[G]=l[G]}return E.href=E.format(),E}if(E.protocol=l.protocol,l.host||rK[l.protocol])E.pathname=l.pathname;else{for(var H=(l.pathname||"").split("/");H.length&&!(l.host=H.shift()););l.host||(l.host=""),l.hostname||(l.hostname=""),""!==H[0]&&H.unshift(""),H.length<2&&H.unshift(""),E.pathname=H.join("/")}if(E.search=l.search,E.query=l.query,E.host=l.host||"",E.auth=l.auth,E.hostname=l.hostname||l.host,E.port=l.port,E.pathname||E.search){var Y=E.pathname||"",W=E.search||"";E.path=Y+W}return E.slashes=E.slashes||l.slashes,E.href=E.format(),E}var q=E.pathname&&"/"===E.pathname.charAt(0),Z=l.host||l.pathname&&"/"===l.pathname.charAt(0),K=Z||q||E.host&&l.pathname,J=K,$=E.pathname&&E.pathname.split("/")||[],H=l.pathname&&l.pathname.split("/")||[],Q=E.protocol&&!rJ[E.protocol];if(Q&&(E.hostname="",E.port=null,E.host&&(""===$[0]?$[0]=E.host:$.unshift(E.host)),E.host="",l.protocol&&(l.hostname=null,l.port=null,l.host&&(""===H[0]?H[0]=l.host:H.unshift(l.host)),l.host=null),K=K&&(""===H[0]||""===$[0])),Z)E.host=l.host||""===l.host?l.host:E.host,E.hostname=l.hostname||""===l.hostname?l.hostname:E.hostname,E.search=l.search,E.query=l.query,$=H;else if(H.length)$||($=[]),$.pop(),$=$.concat(H),E.search=l.search,E.query=l.query;else if(null!=l.search){if(Q){E.host=$.shift(),E.hostname=E.host;var tr=!!(E.host&&E.host.indexOf("@")>0)&&E.host.split("@");tr&&(E.auth=tr.shift(),E.hostname=tr.shift(),E.host=E.hostname)}return E.search=l.search,E.query=l.query,(null!==E.pathname||null!==E.search)&&(E.path=(E.pathname?E.pathname:"")+(E.search?E.search:"")),E.href=E.format(),E}if(!$.length)return E.pathname=null,E.search?E.path="/"+E.search:E.path=null,E.href=E.format(),E;for(var ti=$.slice(-1)[0],tn=(E.host||l.host||$.length>1)&&("."===ti||".."===ti)||""===ti,to=0,ts=$.length;ts>=0;ts--)"."===(ti=$[ts])?$.splice(ts,1):".."===ti?($.splice(ts,1),to++):to&&($.splice(ts,1),to--);if(!K&&!J)for(;to--;to)$.unshift("..");K&&""!==$[0]&&(!$[0]||"/"!==$[0].charAt(0))&&$.unshift(""),tn&&"/"!==$.join("/").substr(-1)&&$.push("");var th=""===$[0]||$[0]&&"/"===$[0].charAt(0);if(Q){E.hostname=th?"":$.length?$.shift():"",E.host=E.hostname;var tr=!!(E.host&&E.host.indexOf("@")>0)&&E.host.split("@");tr&&(E.auth=tr.shift(),E.hostname=tr.shift(),E.host=E.hostname)}return(K=K||E.host&&$.length)&&!th&&$.unshift(""),$.length>0?E.pathname=$.join("/"):(E.pathname=null,E.path=null),(null!==E.pathname||null!==E.search)&&(E.path=(E.pathname?E.pathname:"")+(E.search?E.search:"")),E.auth=l.auth||E.auth,E.slashes=E.slashes||l.slashes,E.href=E.format(),E},It.prototype.parseHost=function(){var l=this.host,v=rG.exec(l);v&&(":"!==(v=v[0])&&(this.port=v.substr(1)),l=l.substr(0,l.length-v.length)),l&&(this.hostname=l)};var rQ=t3.parse=xr;t3.resolve=function(l,v){return xr(l,!1,!0).resolve(v)},t3.resolveObject=function(l,v){return l?xr(l,!1,!0).resolveObject(v):v},t3.format=function(l){return"string"==typeof l&&(l=xr(l)),l instanceof It?l.format():It.prototype.format.call(l)},t3.Url=It,(ir=iI||(iI={}))[ir.WEBGL_LEGACY=0]="WEBGL_LEGACY",ir[ir.WEBGL=1]="WEBGL",ir[ir.WEBGL2=2]="WEBGL2",(ii=iw||(iw={}))[ii.UNKNOWN=0]="UNKNOWN",ii[ii.WEBGL=1]="WEBGL",ii[ii.CANVAS=2]="CANVAS",(io=iP||(iP={}))[io.COLOR=16384]="COLOR",io[io.DEPTH=256]="DEPTH",io[io.STENCIL=1024]="STENCIL",(iu=iS||(iS={}))[iu.NORMAL=0]="NORMAL",iu[iu.ADD=1]="ADD",iu[iu.MULTIPLY=2]="MULTIPLY",iu[iu.SCREEN=3]="SCREEN",iu[iu.OVERLAY=4]="OVERLAY",iu[iu.DARKEN=5]="DARKEN",iu[iu.LIGHTEN=6]="LIGHTEN",iu[iu.COLOR_DODGE=7]="COLOR_DODGE",iu[iu.COLOR_BURN=8]="COLOR_BURN",iu[iu.HARD_LIGHT=9]="HARD_LIGHT",iu[iu.SOFT_LIGHT=10]="SOFT_LIGHT",iu[iu.DIFFERENCE=11]="DIFFERENCE",iu[iu.EXCLUSION=12]="EXCLUSION",iu[iu.HUE=13]="HUE",iu[iu.SATURATION=14]="SATURATION",iu[iu.COLOR=15]="COLOR",iu[iu.LUMINOSITY=16]="LUMINOSITY",iu[iu.NORMAL_NPM=17]="NORMAL_NPM",iu[iu.ADD_NPM=18]="ADD_NPM",iu[iu.SCREEN_NPM=19]="SCREEN_NPM",iu[iu.NONE=20]="NONE",iu[iu.SRC_OVER=0]="SRC_OVER",iu[iu.SRC_IN=21]="SRC_IN",iu[iu.SRC_OUT=22]="SRC_OUT",iu[iu.SRC_ATOP=23]="SRC_ATOP",iu[iu.DST_OVER=24]="DST_OVER",iu[iu.DST_IN=25]="DST_IN",iu[iu.DST_OUT=26]="DST_OUT",iu[iu.DST_ATOP=27]="DST_ATOP",iu[iu.ERASE=26]="ERASE",iu[iu.SUBTRACT=28]="SUBTRACT",iu[iu.XOR=29]="XOR",(il=iA||(iA={}))[il.POINTS=0]="POINTS",il[il.LINES=1]="LINES",il[il.LINE_LOOP=2]="LINE_LOOP",il[il.LINE_STRIP=3]="LINE_STRIP",il[il.TRIANGLES=4]="TRIANGLES",il[il.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",il[il.TRIANGLE_FAN=6]="TRIANGLE_FAN",(ic=iO||(iO={}))[ic.RGBA=6408]="RGBA",ic[ic.RGB=6407]="RGB",ic[ic.ALPHA=6406]="ALPHA",ic[ic.LUMINANCE=6409]="LUMINANCE",ic[ic.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",ic[ic.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",ic[ic.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(ip=iC||(iC={}))[ip.TEXTURE_2D=3553]="TEXTURE_2D",ip[ip.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",ip[ip.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",ip[ip.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",ip[ip.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",ip[ip.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",ip[ip.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",ip[ip.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",ip[ip.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(id=iR||(iR={}))[id.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",id[id.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",id[id.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",id[id.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",id[id.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",id[id.FLOAT=5126]="FLOAT",id[id.HALF_FLOAT=36193]="HALF_FLOAT",(iy=iM||(iM={}))[iy.NEAREST=0]="NEAREST",iy[iy.LINEAR=1]="LINEAR",(im=iD||(iD={}))[im.CLAMP=33071]="CLAMP",im[im.REPEAT=10497]="REPEAT",im[im.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(ig=iN||(iN={}))[ig.OFF=0]="OFF",ig[ig.POW2=1]="POW2",ig[ig.ON=2]="ON",(iv=iL||(iL={}))[iv.NPM=0]="NPM",iv[iv.UNPACK=1]="UNPACK",iv[iv.PMA=2]="PMA",iv[iv.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",iv[iv.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",iv[iv.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(i_=iF||(iF={}))[i_.NO=0]="NO",i_[i_.YES=1]="YES",i_[i_.AUTO=2]="AUTO",i_[i_.BLEND=0]="BLEND",i_[i_.CLEAR=1]="CLEAR",i_[i_.BLIT=2]="BLIT",(ib=iU||(iU={}))[ib.AUTO=0]="AUTO",ib[ib.MANUAL=1]="MANUAL",(ix=iB||(iB={})).LOW="lowp",ix.MEDIUM="mediump",ix.HIGH="highp",(iT=ik||(ik={}))[iT.NONE=0]="NONE",iT[iT.SCISSOR=1]="SCISSOR",iT[iT.STENCIL=2]="STENCIL",iT[iT.SPRITE=3]="SPRITE",(iE=ij||(ij={}))[iE.NONE=0]="NONE",iE[iE.LOW=2]="LOW",iE[iE.MEDIUM=4]="MEDIUM",iE[iE.HIGH=8]="HIGH",/*!
 * @pixi/utils - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */tK.RETINA_PREFIX=/@([0-9\.]+)x/,tK.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0;var r0=!1,r1="5.3.3";function bs(l){var v;if(!r0){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var E=[`
 %c %c %c PixiJS `+r1+" -  "+l+`   %c  %c  http://www.pixijs.com/  %c %c %c%c 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(v=window.console).log.apply(v,E)}else window.console&&window.console.log("PixiJS "+r1+" - "+l+" - http://www.pixijs.com/");r0=!0}}function Ts(){return typeof iX>"u"&&(iX=function(){var l={stencil:!0,failIfMajorPerformanceCaveat:tK.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!window.WebGLRenderingContext)return!1;var v=document.createElement("canvas"),E=v.getContext("webgl",l)||v.getContext("experimental-webgl",l),C=!!(E&&E.getContextAttributes().stencil);if(E){var M=E.getExtension("WEBGL_lose_context");M&&M.loseContext()}return E=null,C}catch{return!1}}()),iX}function xe(l,v){return void 0===v&&(v=[]),v[0]=(l>>16&255)/255,v[1]=(l>>8&255)/255,v[2]=(255&l)/255,v}function ta(l){var v=l.toString(16);return"#"+(v="000000".substr(0,6-v.length)+v)}function ea(l){return"string"==typeof l&&"#"===l[0]&&(l=l.substr(1)),parseInt(l,16)}var r2=function(){for(var l=[],v=[],E=0;E<32;E++)l[E]=E,v[E]=E;l[iS.NORMAL_NPM]=iS.NORMAL,l[iS.ADD_NPM]=iS.ADD,l[iS.SCREEN_NPM]=iS.SCREEN,v[iS.NORMAL]=iS.NORMAL_NPM,v[iS.ADD]=iS.ADD_NPM,v[iS.SCREEN]=iS.SCREEN_NPM;var C=[];return C.push(v),C.push(l),C}();function ia(l,v){return r2[v?1:0][l]}function ws(l,v,E,C){return E=E||new Float32Array(4),C||void 0===C?(E[0]=l[0]*v,E[1]=l[1]*v,E[2]=l[2]*v):(E[0]=l[0],E[1]=l[1],E[2]=l[2]),E[3]=v,E}function li(l,v){if(1===v)return(255*v<<24)+l;if(0===v)return 0;var E=l>>16&255,C=l>>8&255,M=255&l;return E=E*v+.5|0,C=C*v+.5|0,M=M*v+.5|0,(255*v<<24)+(E<<16)+(C<<8)+M}function na(l,v,E,C){return(E=E||new Float32Array(4))[0]=(l>>16&255)/255,E[1]=(l>>8&255)/255,E[2]=(255&l)/255,(C||void 0===C)&&(E[0]*=v,E[1]*=v,E[2]*=v),E[3]=v,E}function Ps(l,v){void 0===v&&(v=null);var E=6*l;if((v=v||new Uint16Array(E)).length!==E)throw Error("Out buffer length is incorrect, got "+v.length+" and expected "+E);for(var C=0,M=0;C<E;C+=6,M+=4)v[C+0]=M+0,v[C+1]=M+1,v[C+2]=M+2,v[C+3]=M+0,v[C+4]=M+2,v[C+5]=M+3;return v}function Is(l){if(4===l.BYTES_PER_ELEMENT)return l instanceof Float32Array?"Float32Array":l instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===l.BYTES_PER_ELEMENT){if(l instanceof Uint16Array)return"Uint16Array"}else if(1===l.BYTES_PER_ELEMENT&&l instanceof Uint8Array)return"Uint8Array";return null}var r3={Float32Array,Uint32Array,Int32Array,Uint8Array};function pr(l){return l+=0===l?1:0,--l,l|=l>>>1,l|=l>>>2,l|=l>>>4,l|=l>>>8,(l|=l>>>16)+1}function ln(l){return!(l&l-1)&&!!l}function fn(l){var v=(l>65535?1:0)<<4,E=((l>>>=v)>255?1:0)<<3;return l>>>=E,v|=E,E=(l>15?1:0)<<2,l>>>=E,v|=E,E=(l>3?1:0)<<1,l>>>=E,(v|=E)|l>>1}function me(l,v,E){var C,M=l.length;if(!(v>=M||0===E)){E=v+E>M?M-v:E;var L=M-E;for(C=v;C<L;++C)l[C]=l[C+E];l.length=L}}function ce(l){return 0===l?0:l<0?-1:1}var r5=0;function be(){return++r5}var r4={};function I(l,v,E){if(void 0===E&&(E=3),!r4[v]){var C=Error().stack;typeof C>"u"?console.warn("PixiJS Deprecation Warning: ",v+`
Deprecated since v`+l):(C=C.split(`
`).splice(E).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",v+`
Deprecated since v`+l),console.warn(C),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",v+`
Deprecated since v`+l),console.warn(C))),r4[v]=!0}}var r6={},r8=Object.create(null),r7=Object.create(null),r9=function(){function i(l,v,E){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=E||tK.RESOLUTION,this.resize(l,v)}return i.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},i.prototype.resize=function(l,v){this.canvas.width=l*this.resolution,this.canvas.height=v*this.resolution},i.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(i.prototype,"width",{get:function(){return this.canvas.width},set:function(l){this.canvas.width=l},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this.canvas.height},set:function(l){this.canvas.height=l},enumerable:!1,configurable:!0}),i}();function Es(l){var v,E,C,M=l.width,L=l.height,U=l.getContext("2d"),B=U.getImageData(0,0,M,L).data,k=B.length,j={top:null,left:null,right:null,bottom:null},X=null;for(v=0;v<k;v+=4)0!==B[v+3]&&(E=v/4%M,C=~~(v/4/M),null===j.top&&(j.top=C),(null===j.left||E<j.left)&&(j.left=E),(null===j.right||j.right<E)&&(j.right=E+1),(null===j.bottom||j.bottom<C)&&(j.bottom=C));return null!==j.top&&(M=j.right-j.left,L=j.bottom-j.top+1,X=U.getImageData(j.left,j.top,M,L)),{height:L,width:M,data:X}}var it=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function As(l,v){if(void 0===v&&(v=window.location),0===l.indexOf("data:"))return"";v=v||window.location,iG||(iG=document.createElement("a")),iG.href=l;var E=rQ(iG.href),C=!E.port&&""===v.port||E.port===v.port;return E.hostname===v.hostname&&C&&E.protocol===v.protocol?"":"anonymous"}function vr(l,v){var E=tK.RETINA_PREFIX.exec(l);return E?parseFloat(E[1]):void 0!==v?v:1}let ie=Object.freeze(Object.defineProperty({__proto__:null,BaseTextureCache:r7,CanvasRenderTarget:r9,DATA_URI:it,EventEmitter:tQ,ProgramCache:r6,TextureCache:r8,clearTextureCache:function(){var l;for(l in r8)delete r8[l];for(l in r7)delete r7[l]},correctBlendMode:ia,createIndicesForQuads:Ps,decomposeDataUri:function(l){var v=it.exec(l);if(v)return{mediaType:v[1]?v[1].toLowerCase():void 0,subType:v[2]?v[2].toLowerCase():void 0,charset:v[3]?v[3].toLowerCase():void 0,encoding:v[4]?v[4].toLowerCase():void 0,data:v[5]}},deprecation:I,destroyTextureCache:function(){var l;for(l in r8)r8[l].destroy();for(l in r7)r7[l].destroy()},determineCrossOrigin:As,earcut:t2,getBufferType:Is,getResolutionOfUrl:vr,hex2rgb:xe,hex2string:ta,interleaveTypedArrays:function(l,v){for(var E=0,C=0,M={},L=0;L<l.length;L++)C+=v[L],E+=l[L].length;for(var U=new ArrayBuffer(4*E),B=null,k=0,L=0;L<l.length;L++){var j=v[L],X=l[L],G=Is(X);M[G]||(M[G]=new r3[G](U)),B=M[G];for(var H=0;H<X.length;H++)B[(H/j|0)*C+k+H%j]=X[H];k+=j}return new Float32Array(U)},isMobile:tZ,isPow2:ln,isWebGLSupported:Ts,log2:fn,nextPow2:pr,premultiplyBlendMode:r2,premultiplyRgba:ws,premultiplyTint:li,premultiplyTintToRgba:na,removeItems:me,rgb2hex:function(l){return(255*l[0]<<16)+(255*l[1]<<8)+(255*l[2]|0)},sayHello:bs,sign:ce,skipHello:function(){r0=!0},string2hex:ea,trimCanvas:Es,uid:be,url:t3},Symbol.toStringTag,{value:"Module"}));/*!
 * @pixi/math - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ir,ii,io,iu,il,ic,ip,id,iy,im,ig,iv,i_,ib,ix,iT,iE,iI,iw,iP,iS,iA,iO,iC,iR,iM,iD,iN,iL,iF,iU,iB,ik,ij,iX,iG,iH,iz=2*Math.PI,iY=180/Math.PI,iV=Math.PI/180;(sP=iH||(iH={}))[sP.POLY=0]="POLY",sP[sP.RECT=1]="RECT",sP[sP.CIRC=2]="CIRC",sP[sP.ELIP=3]="ELIP",sP[sP.RREC=4]="RREC";var iW=function(){function i(l,v,E,C){void 0===l&&(l=0),void 0===v&&(v=0),void 0===E&&(E=0),void 0===C&&(C=0),this.x=Number(l),this.y=Number(v),this.width=Number(E),this.height=Number(C),this.type=iH.RECT}return Object.defineProperty(i.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(i,"EMPTY",{get:function(){return new i(0,0,0,0)},enumerable:!1,configurable:!0}),i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height)},i.prototype.copyFrom=function(l){return this.x=l.x,this.y=l.y,this.width=l.width,this.height=l.height,this},i.prototype.copyTo=function(l){return l.x=this.x,l.y=this.y,l.width=this.width,l.height=this.height,l},i.prototype.contains=function(l,v){return!(this.width<=0)&&!(this.height<=0)&&l>=this.x&&l<this.x+this.width&&v>=this.y&&v<this.y+this.height},i.prototype.pad=function(l,v){return void 0===l&&(l=0),void 0===v&&(v=l),this.x-=l,this.y-=v,this.width+=2*l,this.height+=2*v,this},i.prototype.fit=function(l){var v=Math.max(this.x,l.x),E=Math.min(this.x+this.width,l.x+l.width),C=Math.max(this.y,l.y),M=Math.min(this.y+this.height,l.y+l.height);return this.x=v,this.width=Math.max(E-v,0),this.y=C,this.height=Math.max(M-C,0),this},i.prototype.ceil=function(l,v){void 0===l&&(l=1),void 0===v&&(v=.001);var E=Math.ceil((this.x+this.width-v)*l)/l,C=Math.ceil((this.y+this.height-v)*l)/l;return this.x=Math.floor((this.x+v)*l)/l,this.y=Math.floor((this.y+v)*l)/l,this.width=E-this.x,this.height=C-this.y,this},i.prototype.enlarge=function(l){var v=Math.min(this.x,l.x),E=Math.max(this.x+this.width,l.x+l.width),C=Math.min(this.y,l.y),M=Math.max(this.y+this.height,l.y+l.height);return this.x=v,this.width=E-v,this.y=C,this.height=M-C,this},i}(),iq=function(){function i(l,v,E){void 0===l&&(l=0),void 0===v&&(v=0),void 0===E&&(E=0),this.x=l,this.y=v,this.radius=E,this.type=iH.CIRC}return i.prototype.clone=function(){return new i(this.x,this.y,this.radius)},i.prototype.contains=function(l,v){if(this.radius<=0)return!1;var E=this.radius*this.radius,C=this.x-l,M=this.y-v;return C*=C,M*=M,C+M<=E},i.prototype.getBounds=function(){return new iW(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},i}(),iZ=function(){function i(l,v,E,C){void 0===l&&(l=0),void 0===v&&(v=0),void 0===E&&(E=0),void 0===C&&(C=0),this.x=l,this.y=v,this.width=E,this.height=C,this.type=iH.ELIP}return i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height)},i.prototype.contains=function(l,v){if(this.width<=0||this.height<=0)return!1;var E=(l-this.x)/this.width,C=(v-this.y)/this.height;return E*=E,C*=C,E+C<=1},i.prototype.getBounds=function(){return new iW(this.x-this.width,this.y-this.height,this.width,this.height)},i}(),iK=function(){function i(){for(var l=arguments,v=[],E=0;E<arguments.length;E++)v[E]=l[E];var C=Array.isArray(v[0])?v[0]:v;if("number"!=typeof C[0]){for(var M=[],L=0,U=C.length;L<U;L++)M.push(C[L].x,C[L].y);C=M}this.points=C,this.type=iH.POLY,this.closeStroke=!0}return i.prototype.clone=function(){var l=this.points.slice(),v=new i(l);return v.closeStroke=this.closeStroke,v},i.prototype.contains=function(l,v){for(var E=!1,C=this.points.length/2,M=0,L=C-1;M<C;L=M++){var U=this.points[2*M],B=this.points[2*M+1],k=this.points[2*L],j=this.points[2*L+1];B>v!=j>v&&l<(k-U)*((v-B)/(j-B))+U&&(E=!E)}return E},i}(),iJ=function(){function i(l,v,E,C,M){void 0===l&&(l=0),void 0===v&&(v=0),void 0===E&&(E=0),void 0===C&&(C=0),void 0===M&&(M=20),this.x=l,this.y=v,this.width=E,this.height=C,this.radius=M,this.type=iH.RREC}return i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.radius)},i.prototype.contains=function(l,v){if(this.width<=0||this.height<=0)return!1;if(l>=this.x&&l<=this.x+this.width&&v>=this.y&&v<=this.y+this.height){if(v>=this.y+this.radius&&v<=this.y+this.height-this.radius||l>=this.x+this.radius&&l<=this.x+this.width-this.radius)return!0;var E=l-(this.x+this.radius),C=v-(this.y+this.radius),M=this.radius*this.radius;if(E*E+C*C<=M||(E=l-(this.x+this.width-this.radius))*E+C*C<=M||E*E+(C=v-(this.y+this.height-this.radius))*C<=M||(E=l-(this.x+this.radius))*E+C*C<=M)return!0}return!1},i}(),i$=function(){function i(l,v){void 0===l&&(l=0),void 0===v&&(v=0),this.x=l,this.y=v}return i.prototype.clone=function(){return new i(this.x,this.y)},i.prototype.copyFrom=function(l){return this.set(l.x,l.y),this},i.prototype.copyTo=function(l){return l.set(this.x,this.y),l},i.prototype.equals=function(l){return l.x===this.x&&l.y===this.y},i.prototype.set=function(l,v){return void 0===l&&(l=0),void 0===v&&(v=l),this.x=l,this.y=v,this},i}(),iQ=function(){function i(l,v,E,C){void 0===E&&(E=0),void 0===C&&(C=0),this._x=E,this._y=C,this.cb=l,this.scope=v}return i.prototype.clone=function(l,v){return void 0===l&&(l=this.cb),void 0===v&&(v=this.scope),new i(l,v,this._x,this._y)},i.prototype.set=function(l,v){return void 0===l&&(l=0),void 0===v&&(v=l),(this._x!==l||this._y!==v)&&(this._x=l,this._y=v,this.cb.call(this.scope)),this},i.prototype.copyFrom=function(l){return(this._x!==l.x||this._y!==l.y)&&(this._x=l.x,this._y=l.y,this.cb.call(this.scope)),this},i.prototype.copyTo=function(l){return l.set(this._x,this._y),l},i.prototype.equals=function(l){return l.x===this._x&&l.y===this._y},Object.defineProperty(i.prototype,"x",{get:function(){return this._x},set:function(l){this._x!==l&&(this._x=l,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"y",{get:function(){return this._y},set:function(l){this._y!==l&&(this._y=l,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),i}(),i0=function(){function i(l,v,E,C,M,L){void 0===l&&(l=1),void 0===v&&(v=0),void 0===E&&(E=0),void 0===C&&(C=1),void 0===M&&(M=0),void 0===L&&(L=0),this.array=null,this.a=l,this.b=v,this.c=E,this.d=C,this.tx=M,this.ty=L}return i.prototype.fromArray=function(l){this.a=l[0],this.b=l[1],this.c=l[3],this.d=l[4],this.tx=l[2],this.ty=l[5]},i.prototype.set=function(l,v,E,C,M,L){return this.a=l,this.b=v,this.c=E,this.d=C,this.tx=M,this.ty=L,this},i.prototype.toArray=function(l,v){this.array||(this.array=new Float32Array(9));var E=v||this.array;return l?(E[0]=this.a,E[1]=this.b,E[2]=0,E[3]=this.c,E[4]=this.d,E[5]=0,E[6]=this.tx,E[7]=this.ty):(E[0]=this.a,E[1]=this.c,E[2]=this.tx,E[3]=this.b,E[4]=this.d,E[5]=this.ty,E[6]=0,E[7]=0),E[8]=1,E},i.prototype.apply=function(l,v){v=v||new i$;var E=l.x,C=l.y;return v.x=this.a*E+this.c*C+this.tx,v.y=this.b*E+this.d*C+this.ty,v},i.prototype.applyInverse=function(l,v){v=v||new i$;var E=1/(this.a*this.d+-(this.c*this.b)),C=l.x,M=l.y;return v.x=this.d*E*C+-this.c*E*M+(this.ty*this.c-this.tx*this.d)*E,v.y=this.a*E*M+-this.b*E*C+(-this.ty*this.a+this.tx*this.b)*E,v},i.prototype.translate=function(l,v){return this.tx+=l,this.ty+=v,this},i.prototype.scale=function(l,v){return this.a*=l,this.d*=v,this.c*=l,this.b*=v,this.tx*=l,this.ty*=v,this},i.prototype.rotate=function(l){var v=Math.cos(l),E=Math.sin(l),C=this.a,M=this.c,L=this.tx;return this.a=C*v-this.b*E,this.b=C*E+this.b*v,this.c=M*v-this.d*E,this.d=M*E+this.d*v,this.tx=L*v-this.ty*E,this.ty=L*E+this.ty*v,this},i.prototype.append=function(l){var v=this.a,E=this.b,C=this.c,M=this.d;return this.a=l.a*v+l.b*C,this.b=l.a*E+l.b*M,this.c=l.c*v+l.d*C,this.d=l.c*E+l.d*M,this.tx=l.tx*v+l.ty*C+this.tx,this.ty=l.tx*E+l.ty*M+this.ty,this},i.prototype.setTransform=function(l,v,E,C,M,L,U,B,k){return this.a=Math.cos(U+k)*M,this.b=Math.sin(U+k)*M,this.c=-Math.sin(U-B)*L,this.d=Math.cos(U-B)*L,this.tx=l-(E*this.a+C*this.c),this.ty=v-(E*this.b+C*this.d),this},i.prototype.prepend=function(l){var v=this.tx;if(1!==l.a||0!==l.b||0!==l.c||1!==l.d){var E=this.a,C=this.c;this.a=E*l.a+this.b*l.c,this.b=E*l.b+this.b*l.d,this.c=C*l.a+this.d*l.c,this.d=C*l.b+this.d*l.d}return this.tx=v*l.a+this.ty*l.c+l.tx,this.ty=v*l.b+this.ty*l.d+l.ty,this},i.prototype.decompose=function(l){var v=this.a,E=this.b,C=this.c,M=this.d,L=-Math.atan2(-C,M),U=Math.atan2(E,v),B=Math.abs(L+U);return B<1e-5||1e-5>Math.abs(iz-B)?(l.rotation=U,l.skew.x=l.skew.y=0):(l.rotation=0,l.skew.x=L,l.skew.y=U),l.scale.x=Math.sqrt(v*v+E*E),l.scale.y=Math.sqrt(C*C+M*M),l.position.x=this.tx,l.position.y=this.ty,l},i.prototype.invert=function(){var l=this.a,v=this.b,E=this.c,C=this.d,M=this.tx,L=l*C-v*E;return this.a=C/L,this.b=-v/L,this.c=-E/L,this.d=l/L,this.tx=(E*this.ty-C*M)/L,this.ty=-(l*this.ty-v*M)/L,this},i.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},i.prototype.clone=function(){var l=new i;return l.a=this.a,l.b=this.b,l.c=this.c,l.d=this.d,l.tx=this.tx,l.ty=this.ty,l},i.prototype.copyTo=function(l){return l.a=this.a,l.b=this.b,l.c=this.c,l.d=this.d,l.tx=this.tx,l.ty=this.ty,l},i.prototype.copyFrom=function(l){return this.a=l.a,this.b=l.b,this.c=l.c,this.d=l.d,this.tx=l.tx,this.ty=l.ty,this},Object.defineProperty(i,"IDENTITY",{get:function(){return new i},enumerable:!1,configurable:!0}),Object.defineProperty(i,"TEMP_MATRIX",{get:function(){return new i},enumerable:!1,configurable:!0}),i}(),i1=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],i2=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],i3=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],i5=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],i4=[],i6=[],i8=Math.sign;!function(){for(var l=0;l<16;l++){var v=[];i4.push(v);for(var E=0;E<16;E++)for(var C=i8(i1[l]*i1[E]+i3[l]*i2[E]),M=i8(i2[l]*i1[E]+i5[l]*i2[E]),L=i8(i1[l]*i3[E]+i3[l]*i5[E]),U=i8(i2[l]*i3[E]+i5[l]*i5[E]),B=0;B<16;B++)if(i1[B]===C&&i2[B]===M&&i3[B]===L&&i5[B]===U){v.push(B);break}}for(var l=0;l<16;l++){var k=new i0;k.set(i1[l],i2[l],i3[l],i5[l],0,0),i6.push(k)}}();var i7={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(l){return i1[l]},uY:function(l){return i2[l]},vX:function(l){return i3[l]},vY:function(l){return i5[l]},inv:function(l){return 8&l?15&l:7&-l},add:function(l,v){return i4[l][v]},sub:function(l,v){return i4[l][i7.inv(v)]},rotate180:function(l){return 4^l},isVertical:function(l){return(3&l)==2},byDirection:function(l,v){return 2*Math.abs(l)<=Math.abs(v)?v>=0?i7.S:i7.N:2*Math.abs(v)<=Math.abs(l)?l>0?i7.E:i7.W:v>0?l>0?i7.SE:i7.SW:l>0?i7.NE:i7.NW},matrixAppendRotationInv:function(l,v,E,C){void 0===E&&(E=0),void 0===C&&(C=0);var M=i6[i7.inv(v)];M.tx=E,M.ty=C,l.append(M)}},i9=function(){function i(){this.worldTransform=new i0,this.localTransform=new i0,this.position=new iQ(this.onChange,this,0,0),this.scale=new iQ(this.onChange,this,1,1),this.pivot=new iQ(this.onChange,this,0,0),this.skew=new iQ(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return i.prototype.onChange=function(){this._localID++},i.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},i.prototype.updateLocalTransform=function(){var l=this.localTransform;this._localID!==this._currentLocalID&&(l.a=this._cx*this.scale.x,l.b=this._sx*this.scale.x,l.c=this._cy*this.scale.y,l.d=this._sy*this.scale.y,l.tx=this.position.x-(this.pivot.x*l.a+this.pivot.y*l.c),l.ty=this.position.y-(this.pivot.x*l.b+this.pivot.y*l.d),this._currentLocalID=this._localID,this._parentID=-1)},i.prototype.updateTransform=function(l){var v=this.localTransform;if(this._localID!==this._currentLocalID&&(v.a=this._cx*this.scale.x,v.b=this._sx*this.scale.x,v.c=this._cy*this.scale.y,v.d=this._sy*this.scale.y,v.tx=this.position.x-(this.pivot.x*v.a+this.pivot.y*v.c),v.ty=this.position.y-(this.pivot.x*v.b+this.pivot.y*v.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==l._worldID){var E=l.worldTransform,C=this.worldTransform;C.a=v.a*E.a+v.b*E.c,C.b=v.a*E.b+v.b*E.d,C.c=v.c*E.a+v.d*E.c,C.d=v.c*E.b+v.d*E.d,C.tx=v.tx*E.a+v.ty*E.c+E.tx,C.ty=v.tx*E.b+v.ty*E.d+E.ty,this._parentID=l._worldID,this._worldID++}},i.prototype.setFromMatrix=function(l){l.decompose(this),this._localID++},Object.defineProperty(i.prototype,"rotation",{get:function(){return this._rotation},set:function(l){this._rotation!==l&&(this._rotation=l,this.updateSkew())},enumerable:!1,configurable:!0}),i.IDENTITY=new i,i}();/*!
 * @pixi/display - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */tK.SORTABLE_CHILDREN=!1;var nt=function(){function i(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return i.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},i.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},i.prototype.getRectangle=function(l){return this.minX>this.maxX||this.minY>this.maxY?iW.EMPTY:((l=l||new iW(0,0,1,1)).x=this.minX,l.y=this.minY,l.width=this.maxX-this.minX,l.height=this.maxY-this.minY,l)},i.prototype.addPoint=function(l){this.minX=Math.min(this.minX,l.x),this.maxX=Math.max(this.maxX,l.x),this.minY=Math.min(this.minY,l.y),this.maxY=Math.max(this.maxY,l.y)},i.prototype.addQuad=function(l){var v=this.minX,E=this.minY,C=this.maxX,M=this.maxY,L=l[0],U=l[1];v=L<v?L:v,E=U<E?U:E,C=L>C?L:C,M=U>M?U:M,L=l[2],U=l[3],v=L<v?L:v,E=U<E?U:E,C=L>C?L:C,M=U>M?U:M,L=l[4],U=l[5],v=L<v?L:v,E=U<E?U:E,C=L>C?L:C,M=U>M?U:M,L=l[6],U=l[7],v=L<v?L:v,E=U<E?U:E,C=L>C?L:C,M=U>M?U:M,this.minX=v,this.minY=E,this.maxX=C,this.maxY=M},i.prototype.addFrame=function(l,v,E,C,M){this.addFrameMatrix(l.worldTransform,v,E,C,M)},i.prototype.addFrameMatrix=function(l,v,E,C,M){var L=l.a,U=l.b,B=l.c,k=l.d,j=l.tx,X=l.ty,G=this.minX,H=this.minY,Y=this.maxX,W=this.maxY,q=L*v+B*E+j,Z=U*v+k*E+X;G=q<G?q:G,H=Z<H?Z:H,Y=q>Y?q:Y,W=Z>W?Z:W,q=L*C+B*E+j,Z=U*C+k*E+X,G=q<G?q:G,H=Z<H?Z:H,Y=q>Y?q:Y,W=Z>W?Z:W,q=L*v+B*M+j,Z=U*v+k*M+X,G=q<G?q:G,H=Z<H?Z:H,Y=q>Y?q:Y,W=Z>W?Z:W,q=L*C+B*M+j,Z=U*C+k*M+X,G=q<G?q:G,H=Z<H?Z:H,Y=q>Y?q:Y,W=Z>W?Z:W,this.minX=G,this.minY=H,this.maxX=Y,this.maxY=W},i.prototype.addVertexData=function(l,v,E){for(var C=this.minX,M=this.minY,L=this.maxX,U=this.maxY,B=v;B<E;B+=2){var k=l[B],j=l[B+1];C=k<C?k:C,M=j<M?j:M,L=k>L?k:L,U=j>U?j:U}this.minX=C,this.minY=M,this.maxX=L,this.maxY=U},i.prototype.addVertices=function(l,v,E,C){this.addVerticesMatrix(l.worldTransform,v,E,C)},i.prototype.addVerticesMatrix=function(l,v,E,C,M,L){void 0===M&&(M=0),void 0===L&&(L=M);for(var U=l.a,B=l.b,k=l.c,j=l.d,X=l.tx,G=l.ty,H=this.minX,Y=this.minY,W=this.maxX,q=this.maxY,Z=E;Z<C;Z+=2){var K=v[Z],J=v[Z+1],$=U*K+k*J+X,Q=j*J+B*K+G;H=Math.min(H,$-M),W=Math.max(W,$+M),Y=Math.min(Y,Q-L),q=Math.max(q,Q+L)}this.minX=H,this.minY=Y,this.maxX=W,this.maxY=q},i.prototype.addBounds=function(l){var v=this.minX,E=this.minY,C=this.maxX,M=this.maxY;this.minX=l.minX<v?l.minX:v,this.minY=l.minY<E?l.minY:E,this.maxX=l.maxX>C?l.maxX:C,this.maxY=l.maxY>M?l.maxY:M},i.prototype.addBoundsMask=function(l,v){var E=l.minX>v.minX?l.minX:v.minX,C=l.minY>v.minY?l.minY:v.minY,M=l.maxX<v.maxX?l.maxX:v.maxX,L=l.maxY<v.maxY?l.maxY:v.maxY;if(E<=M&&C<=L){var U=this.minX,B=this.minY,k=this.maxX,j=this.maxY;this.minX=E<U?E:U,this.minY=C<B?C:B,this.maxX=M>k?M:k,this.maxY=L>j?L:j}},i.prototype.addBoundsMatrix=function(l,v){this.addFrameMatrix(v,l.minX,l.minY,l.maxX,l.maxY)},i.prototype.addBoundsArea=function(l,v){var E=l.minX>v.x?l.minX:v.x,C=l.minY>v.y?l.minY:v.y,M=l.maxX<v.x+v.width?l.maxX:v.x+v.width,L=l.maxY<v.y+v.height?l.maxY:v.y+v.height;if(E<=M&&C<=L){var U=this.minX,B=this.minY,k=this.maxX,j=this.maxY;this.minX=E<U?E:U,this.minY=C<B?C:B,this.maxX=M>k?M:k,this.maxY=L>j?L:j}},i.prototype.pad=function(l,v){void 0===l&&(l=0),void 0===v&&(v=l),this.isEmpty()||(this.minX-=l,this.maxX+=l,this.minY-=v,this.maxY+=v)},i.prototype.addFramePad=function(l,v,E,C,M,L){l-=M,v-=L,E+=M,C+=L,this.minX=this.minX<l?this.minX:l,this.maxX=this.maxX>E?this.maxX:E,this.minY=this.minY<v?this.minY:v,this.maxY=this.maxY>C?this.maxY:C},i}(),vn=function(l,v){return(vn=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(l,v){l.__proto__=v}||function(l,v){for(var E in v)v.hasOwnProperty(E)&&(l[E]=v[E])})(l,v)};function oa(l,v){function t(){this.constructor=l}vn(l,v),l.prototype=null===v?Object.create(v):(t.prototype=v.prototype,new t)}var ne=function(l){function r(){var v=l.call(this)||this;return v.tempDisplayObjectParent=null,v.transform=new i9,v.alpha=1,v.visible=!0,v.renderable=!0,v.parent=null,v.worldAlpha=1,v._lastSortedIndex=0,v._zIndex=0,v.filterArea=null,v.filters=null,v._enabledFilters=null,v._bounds=new nt,v._localBounds=null,v._boundsID=0,v._boundsRect=null,v._localBoundsRect=null,v._mask=null,v._destroyed=!1,v.isSprite=!1,v.isMask=!1,v}return oa(r,l),r.mixin=function(l){for(var v=Object.keys(l),E=0;E<v.length;++E){var C=v[E];Object.defineProperty(r.prototype,C,Object.getOwnPropertyDescriptor(l,C))}},r.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},r.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},r.prototype.getBounds=function(l,v){return l||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),v||(this._boundsRect||(this._boundsRect=new iW),v=this._boundsRect),this._bounds.getRectangle(v)},r.prototype.getLocalBounds=function(l){l||(this._localBoundsRect||(this._localBoundsRect=new iW),l=this._localBoundsRect),this._localBounds||(this._localBounds=new nt);var v=this.transform,E=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var C=this._bounds,M=this._boundsID;this._bounds=this._localBounds;var L=this.getBounds(!1,l);return this.parent=E,this.transform=v,this._bounds=C,this._bounds.updateID+=this._boundsID-M,L},r.prototype.toGlobal=function(l,v,E){return void 0===E&&(E=!1),E||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(l,v)},r.prototype.toLocal=function(l,v,E,C){return v&&(l=v.toGlobal(l,E,C)),C||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(l,E)},r.prototype.setParent=function(l){if(!l||!l.addChild)throw Error("setParent: Argument must be a Container");return l.addChild(this),l},r.prototype.setTransform=function(l,v,E,C,M,L,U,B,k){return void 0===l&&(l=0),void 0===v&&(v=0),void 0===E&&(E=1),void 0===C&&(C=1),void 0===M&&(M=0),void 0===L&&(L=0),void 0===U&&(U=0),void 0===B&&(B=0),void 0===k&&(k=0),this.position.x=l,this.position.y=v,this.scale.x=E||1,this.scale.y=C||1,this.rotation=M,this.skew.x=L,this.skew.y=U,this.pivot.x=B,this.pivot.y=k,this},r.prototype.destroy=function(l){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(r.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new nr),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),r.prototype.enableTempParent=function(){var l=this.parent;return this.parent=this._tempDisplayObjectParent,l},r.prototype.disableTempParent=function(l){this.parent=l},Object.defineProperty(r.prototype,"x",{get:function(){return this.position.x},set:function(l){this.transform.position.x=l},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"y",{get:function(){return this.position.y},set:function(l){this.transform.position.y=l},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"position",{get:function(){return this.transform.position},set:function(l){this.transform.position.copyFrom(l)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"scale",{get:function(){return this.transform.scale},set:function(l){this.transform.scale.copyFrom(l)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(l){this.transform.pivot.copyFrom(l)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"skew",{get:function(){return this.transform.skew},set:function(l){this.transform.skew.copyFrom(l)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(l){this.transform.rotation=l},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"angle",{get:function(){return this.transform.rotation*iY},set:function(l){this.transform.rotation=l*iV},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"zIndex",{get:function(){return this._zIndex},set:function(l){this._zIndex=l,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"worldVisible",{get:function(){var l=this;do{if(!l.visible)return!1;l=l.parent}while(l);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mask",{get:function(){return this._mask},set:function(l){if(this._mask){var v=this._mask.maskObject||this._mask;v.renderable=!0,v.isMask=!1}if(this._mask=l,this._mask){var v=this._mask.maskObject||this._mask;v.renderable=!1,v.isMask=!0}},enumerable:!1,configurable:!0}),r}(tQ),nr=function(l){function r(){var v=null!==l&&l.apply(this,arguments)||this;return v.sortDirty=null,v}return oa(r,l),r}(ne);function ac(l,v){return l.zIndex===v.zIndex?l._lastSortedIndex-v._lastSortedIndex:l.zIndex-v.zIndex}ne.prototype.displayObjectUpdateTransform=ne.prototype.updateTransform;var no=function(l){function r(){var v=l.call(this)||this;return v.children=[],v.sortableChildren=tK.SORTABLE_CHILDREN,v.sortDirty=!1,v}return oa(r,l),r.prototype.onChildrenChange=function(l){},r.prototype.addChild=function(){for(var l=arguments,v=[],E=0;E<arguments.length;E++)v[E]=l[E];if(v.length>1)for(var C=0;C<v.length;C++)this.addChild(v[C]);else{var M=v[0];M.parent&&M.parent.removeChild(M),M.parent=this,this.sortDirty=!0,M.transform._parentID=-1,this.children.push(M),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",M,this,this.children.length-1),M.emit("added",this)}return v[0]},r.prototype.addChildAt=function(l,v){if(v<0||v>this.children.length)throw Error(l+"addChildAt: The index "+v+" supplied is out of bounds "+this.children.length);return l.parent&&l.parent.removeChild(l),l.parent=this,this.sortDirty=!0,l.transform._parentID=-1,this.children.splice(v,0,l),this._boundsID++,this.onChildrenChange(v),l.emit("added",this),this.emit("childAdded",l,this,v),l},r.prototype.swapChildren=function(l,v){if(l!==v){var E=this.getChildIndex(l),C=this.getChildIndex(v);this.children[E]=v,this.children[C]=l,this.onChildrenChange(E<C?E:C)}},r.prototype.getChildIndex=function(l){var v=this.children.indexOf(l);if(-1===v)throw Error("The supplied DisplayObject must be a child of the caller");return v},r.prototype.setChildIndex=function(l,v){if(v<0||v>=this.children.length)throw Error("The index "+v+" supplied is out of bounds "+this.children.length);var E=this.getChildIndex(l);me(this.children,E,1),this.children.splice(v,0,l),this.onChildrenChange(v)},r.prototype.getChildAt=function(l){if(l<0||l>=this.children.length)throw Error("getChildAt: Index ("+l+") does not exist.");return this.children[l]},r.prototype.removeChild=function(){for(var l=arguments,v=[],E=0;E<arguments.length;E++)v[E]=l[E];if(v.length>1)for(var C=0;C<v.length;C++)this.removeChild(v[C]);else{var M=v[0],L=this.children.indexOf(M);if(-1===L)return null;M.parent=null,M.transform._parentID=-1,me(this.children,L,1),this._boundsID++,this.onChildrenChange(L),M.emit("removed",this),this.emit("childRemoved",M,this,L)}return v[0]},r.prototype.removeChildAt=function(l){var v=this.getChildAt(l);return v.parent=null,v.transform._parentID=-1,me(this.children,l,1),this._boundsID++,this.onChildrenChange(l),v.emit("removed",this),this.emit("childRemoved",v,this,l),v},r.prototype.removeChildren=function(l,v){void 0===l&&(l=0),void 0===v&&(v=this.children.length);var E,C=l,M=v,L=M-C;if(L>0&&L<=M){E=this.children.splice(C,L);for(var U=0;U<E.length;++U)E[U].parent=null,E[U].transform&&(E[U].transform._parentID=-1);this._boundsID++,this.onChildrenChange(l);for(var U=0;U<E.length;++U)E[U].emit("removed",this),this.emit("childRemoved",E[U],this,U);return E}if(0===L&&0===this.children.length)return[];throw RangeError("removeChildren: numeric values are outside the acceptable range.")},r.prototype.sortChildren=function(){for(var l=!1,v=0,E=this.children.length;v<E;++v){var C=this.children[v];C._lastSortedIndex=v,l||0===C.zIndex||(l=!0)}l&&this.children.length>1&&this.children.sort(ac),this.sortDirty=!1},r.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var l=0,v=this.children.length;l<v;++l){var E=this.children[l];E.visible&&E.updateTransform()}},r.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var l=0;l<this.children.length;l++){var v=this.children[l];if(!(!v.visible||!v.renderable)){if(v.calculateBounds(),v._mask){var E=v._mask.maskObject||v._mask;E.calculateBounds(),this._bounds.addBoundsMask(v._bounds,E._bounds)}else v.filterArea?this._bounds.addBoundsArea(v._bounds,v.filterArea):this._bounds.addBounds(v._bounds)}}this._bounds.updateID=this._boundsID},r.prototype.getLocalBounds=function(v,E){void 0===E&&(E=!1);var C=l.prototype.getLocalBounds.call(this,v);if(!E)for(var M=0,L=this.children.length;M<L;++M){var U=this.children[M];U.visible&&U.updateTransform()}return C},r.prototype._calculateBounds=function(){},r.prototype.render=function(l){if(!(!this.visible||this.worldAlpha<=0||!this.renderable)){if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(l);else{this._render(l);for(var v=0,E=this.children.length;v<E;++v)this.children[v].render(l)}}},r.prototype.renderAdvanced=function(l){l.batch.flush();var v=this.filters,E=this._mask;if(v){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var C=0;C<v.length;C++)v[C].enabled&&this._enabledFilters.push(v[C]);this._enabledFilters.length&&l.filter.push(this,this._enabledFilters)}E&&l.mask.push(this,this._mask),this._render(l);for(var C=0,M=this.children.length;C<M;C++)this.children[C].render(l);l.batch.flush(),E&&l.mask.pop(this),v&&this._enabledFilters&&this._enabledFilters.length&&l.filter.pop()},r.prototype._render=function(l){},r.prototype.destroy=function(v){l.prototype.destroy.call(this),this.sortDirty=!1;var E="boolean"==typeof v?v:v&&v.children,C=this.removeChildren(0,this.children.length);if(E)for(var M=0;M<C.length;++M)C[M].destroy(v)},Object.defineProperty(r.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(l){var v=this.getLocalBounds().width;0!==v?this.scale.x=l/v:this.scale.x=1,this._width=l},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(l){var v=this.getLocalBounds().height;0!==v?this.scale.y=l/v:this.scale.y=1,this._height=l},enumerable:!1,configurable:!0}),r}(ne);no.prototype.containerUpdateTransform=no.prototype.updateTransform;/*!
 * @pixi/accessibility - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/accessibility is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var nu={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};ne.mixin(nu);var nl=function(){function i(l){this._hookDiv=null,(tZ.tablet||tZ.phone)&&this.createTouchHook();var v=document.createElement("div");v.style.width="100px",v.style.height="100px",v.style.position="absolute",v.style.top="0px",v.style.left="0px",v.style.zIndex="2",this.div=v,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=l,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._isActive=!1,this._isMobileAccessibility=!1,this.androidUpdateCount=0,this.androidUpdateFrequency=500,window.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(i.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),i.prototype.createTouchHook=function(){var l=this,v=document.createElement("button");v.style.width="1px",v.style.height="1px",v.style.position="absolute",v.style.top="-1000px",v.style.left="-1000px",v.style.zIndex="2",v.style.backgroundColor="#FF0000",v.title="select to enable accessability for this content",v.addEventListener("focus",function(){l._isMobileAccessibility=!0,l.activate(),l.destroyTouchHook()}),document.body.appendChild(v),this._hookDiv=v},i.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},i.prototype.activate=function(){this._isActive||(this._isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},i.prototype.deactivate=function(){!this._isActive||this._isMobileAccessibility||(this._isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},i.prototype.updateAccessibleObjects=function(l){if(!(!l.visible||!l.accessibleChildren)){l.accessible&&l.interactive&&(l._accessibleActive||this.addChild(l),l.renderId=this.renderId);for(var v=l.children,E=0;E<v.length;E++)this.updateAccessibleObjects(v[E])}},i.prototype.update=function(){var l=performance.now();if(!(tZ.android.device&&l<this.androidUpdateCount)&&(this.androidUpdateCount=l+this.androidUpdateFrequency,this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var v=this.renderer.view.getBoundingClientRect(),E=this.renderer.resolution,C=v.width/this.renderer.width*E,M=v.height/this.renderer.height*E,L=this.div;L.style.left=v.left+"px",L.style.top=v.top+"px",L.style.width=this.renderer.width+"px",L.style.height=this.renderer.height+"px";for(var U=0;U<this.children.length;U++){var B=this.children[U];if(B.renderId!==this.renderId)B._accessibleActive=!1,me(this.children,U,1),this.div.removeChild(B._accessibleDiv),this.pool.push(B._accessibleDiv),B._accessibleDiv=null,U--;else{L=B._accessibleDiv;var k=B.hitArea,j=B.worldTransform;B.hitArea?(L.style.left=(j.tx+k.x*j.a)*C+"px",L.style.top=(j.ty+k.y*j.d)*M+"px",L.style.width=k.width*j.a*C+"px",L.style.height=k.height*j.d*M+"px"):(k=B.getBounds(),this.capHitArea(k),L.style.left=k.x*C+"px",L.style.top=k.y*M+"px",L.style.width=k.width*C+"px",L.style.height=k.height*M+"px",L.title!==B.accessibleTitle&&null!==B.accessibleTitle&&(L.title=B.accessibleTitle),L.getAttribute("aria-label")!==B.accessibleHint&&null!==B.accessibleHint&&L.setAttribute("aria-label",B.accessibleHint)),(B.accessibleTitle!==L.title||B.tabIndex!==L.tabIndex)&&(L.title=B.accessibleTitle,L.tabIndex=B.tabIndex,this.debug&&this.updateDebugHTML(L))}}this.renderId++}},i.prototype.updateDebugHTML=function(l){l.innerHTML="type: "+l.type+"</br> title : "+l.title+"</br> tabIndex: "+l.tabIndex},i.prototype.capHitArea=function(l){l.x<0&&(l.width+=l.x,l.x=0),l.y<0&&(l.height+=l.y,l.y=0),l.x+l.width>this.renderer.width&&(l.width=this.renderer.width-l.x),l.y+l.height>this.renderer.height&&(l.height=this.renderer.height-l.y)},i.prototype.addChild=function(l){var v=this.pool.pop();v||((v=document.createElement("button")).style.width="100px",v.style.height="100px",v.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",v.style.position="absolute",v.style.zIndex="2",v.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?v.setAttribute("aria-live","off"):v.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?v.setAttribute("aria-relevant","additions"):v.setAttribute("aria-relevant","text"),v.addEventListener("click",this._onClick.bind(this)),v.addEventListener("focus",this._onFocus.bind(this)),v.addEventListener("focusout",this._onFocusOut.bind(this))),v.style.pointerEvents=l.accessiblePointerEvents,v.type=l.accessibleType,l.accessibleTitle&&null!==l.accessibleTitle?v.title=l.accessibleTitle:l.accessibleHint&&null!==l.accessibleHint||(v.title="displayObject "+l.tabIndex),l.accessibleHint&&null!==l.accessibleHint&&v.setAttribute("aria-label",l.accessibleHint),this.debug&&this.updateDebugHTML(v),l._accessibleActive=!0,l._accessibleDiv=v,v.displayObject=l,this.children.push(l),this.div.appendChild(l._accessibleDiv),l._accessibleDiv.tabIndex=l.tabIndex},i.prototype._onClick=function(l){var v=this.renderer.plugins.interaction;v.dispatchEvent(l.target.displayObject,"click",v.eventData),v.dispatchEvent(l.target.displayObject,"pointertap",v.eventData),v.dispatchEvent(l.target.displayObject,"tap",v.eventData)},i.prototype._onFocus=function(l){l.target.getAttribute("aria-live")||l.target.setAttribute("aria-live","assertive");var v=this.renderer.plugins.interaction;v.dispatchEvent(l.target.displayObject,"mouseover",v.eventData)},i.prototype._onFocusOut=function(l){l.target.getAttribute("aria-live")||l.target.setAttribute("aria-live","polite");var v=this.renderer.plugins.interaction;v.dispatchEvent(l.target.displayObject,"mouseout",v.eventData)},i.prototype._onKeyDown=function(l){9===l.keyCode&&this.activate()},i.prototype._onMouseMove=function(l){0===l.movementX&&0===l.movementY||this.deactivate()},i.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},i}();/*!
 * @pixi/ticker - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */tK.TARGET_FPMS=.06,(sS=sM||(sM={}))[sS.INTERACTION=50]="INTERACTION",sS[sS.HIGH=25]="HIGH",sS[sS.NORMAL=0]="NORMAL",sS[sS.LOW=-25]="LOW",sS[sS.UTILITY=-50]="UTILITY";var nc=function(){function i(l,v,E,C){void 0===v&&(v=null),void 0===E&&(E=0),void 0===C&&(C=!1),this.fn=l,this.context=v,this.priority=E,this.once=C,this.next=null,this.previous=null,this._destroyed=!1}return i.prototype.match=function(l,v){return void 0===v&&(v=null),this.fn===l&&this.context===v},i.prototype.emit=function(l){this.fn&&(this.context?this.fn.call(this.context,l):this.fn(l));var v=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),v},i.prototype.connect=function(l){this.previous=l,l.next&&(l.next.previous=this),this.next=l.next,l.next=this},i.prototype.destroy=function(l){void 0===l&&(l=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var v=this.next;return this.next=l?null:v,this.previous=null,v},i}(),np=function(){function i(){var l=this;this._head=new nc(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this.autoStart=!1,this.deltaTime=1,this.deltaMS=1/tK.TARGET_FPMS,this.elapsedMS=1/tK.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._protected=!1,this._lastFrame=-1,this._tick=function(v){l._requestId=null,l.started&&(l.update(v),l.started&&null===l._requestId&&l._head.next&&(l._requestId=requestAnimationFrame(l._tick)))}}return i.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},i.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},i.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},i.prototype.add=function(l,v,E){return void 0===E&&(E=sM.NORMAL),this._addListener(new nc(l,v,E))},i.prototype.addOnce=function(l,v,E){return void 0===E&&(E=sM.NORMAL),this._addListener(new nc(l,v,E,!0))},i.prototype._addListener=function(l){var v=this._head.next,E=this._head;if(v){for(;v;){if(l.priority>v.priority){l.connect(E);break}E=v,v=v.next}l.previous||l.connect(E)}else l.connect(E);return this._startIfPossible(),this},i.prototype.remove=function(l,v){for(var E=this._head.next;E;)E=E.match(l,v)?E.destroy():E.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(i.prototype,"count",{get:function(){if(!this._head)return 0;for(var l=0,v=this._head;v=v.next;)l++;return l},enumerable:!1,configurable:!0}),i.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},i.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},i.prototype.destroy=function(){if(!this._protected){this.stop();for(var l=this._head.next;l;)l=l.destroy(!0);this._head.destroy(),this._head=null}},i.prototype.update=function(l){if(void 0===l&&(l=performance.now()),l>this.lastTime){if((v=this.elapsedMS=l-this.lastTime)>this._maxElapsedMS&&(v=this._maxElapsedMS),v*=this.speed,this._minElapsedMS){var v,E=l-this._lastFrame|0;if(E<this._minElapsedMS)return;this._lastFrame=l-E%this._minElapsedMS}this.deltaMS=v,this.deltaTime=this.deltaMS*tK.TARGET_FPMS;for(var C=this._head,M=C.next;M;)M=M.emit(this.deltaTime);C.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=l},Object.defineProperty(i.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(l){var v=Math.min(Math.max(0,Math.min(this.maxFPS,l))/1e3,tK.TARGET_FPMS);this._maxElapsedMS=1/v},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(l){if(0===l)this._minElapsedMS=0;else{var v=Math.max(this.minFPS,l);this._minElapsedMS=1/(v/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(i,"shared",{get:function(){if(!i._shared){var l=i._shared=new i;l.autoStart=!0,l._protected=!0}return i._shared},enumerable:!1,configurable:!0}),Object.defineProperty(i,"system",{get:function(){if(!i._system){var l=i._system=new i;l.autoStart=!0,l._protected=!0}return i._system},enumerable:!1,configurable:!0}),i}(),nd=function(){function i(){}return i.init=function(l){var v=this;l=Object.assign({autoStart:!0,sharedTicker:!1},l),Object.defineProperty(this,"ticker",{set:function(l){this._ticker&&this._ticker.remove(this.render,this),this._ticker=l,l&&l.add(this.render,this,sM.LOW)},get:function(){return this._ticker}}),this.stop=function(){v._ticker.stop()},this.start=function(){v._ticker.start()},this._ticker=null,this.ticker=l.sharedTicker?np.shared:new np,l.autoStart&&this.start()},i.destroy=function(){if(this._ticker){var l=this._ticker;this.ticker=null,l.destroy()}},i}(),nf=function(){function i(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new i$,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(i.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),i.prototype.getLocalPosition=function(l,v,E){return l.worldTransform.applyInverse(E||this.global,v)},i.prototype.copyEvent=function(l){"isPrimary"in l&&l.isPrimary&&(this.isPrimary=!0),this.button="button"in l&&l.button;var v="buttons"in l&&l.buttons;this.buttons=Number.isInteger(v)?v:"which"in l&&l.which,this.width="width"in l&&l.width,this.height="height"in l&&l.height,this.tiltX="tiltX"in l&&l.tiltX,this.tiltY="tiltY"in l&&l.tiltY,this.pointerType="pointerType"in l&&l.pointerType,this.pressure="pressure"in l&&l.pressure,this.rotationAngle="rotationAngle"in l&&l.rotationAngle,this.twist="twist"in l&&l.twist||0,this.tangentialPressure="tangentialPressure"in l&&l.tangentialPressure||0},i.prototype.reset=function(){this.isPrimary=!1},i}(),mn=function(l,v){return(mn=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(l,v){l.__proto__=v}||function(l,v){for(var E in v)v.hasOwnProperty(E)&&(l[E]=v[E])})(l,v)},ny=function(){function i(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return i.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},i.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},i}(),nm=function(){function i(l){this._pointerId=l,this._flags=i.FLAGS.NONE}return i.prototype._doSet=function(l,v){v?this._flags=this._flags|l:this._flags=this._flags&~l},Object.defineProperty(i.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"flags",{get:function(){return this._flags},set:function(l){this._flags=l},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"none",{get:function(){return this._flags===i.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"over",{get:function(){return(this._flags&i.FLAGS.OVER)!=0},set:function(l){this._doSet(i.FLAGS.OVER,l)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightDown",{get:function(){return(this._flags&i.FLAGS.RIGHT_DOWN)!=0},set:function(l){this._doSet(i.FLAGS.RIGHT_DOWN,l)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"leftDown",{get:function(){return(this._flags&i.FLAGS.LEFT_DOWN)!=0},set:function(l){this._doSet(i.FLAGS.LEFT_DOWN,l)},enumerable:!1,configurable:!0}),i.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),i}(),ng=function(){function i(){this._tempPoint=new i$}return i.prototype.recursiveFindHit=function(l,v,E,C,M){if(!v||!v.visible)return!1;var L=l.data.global;M=v.interactive||M;var U=!1,B=M,k=!0;if(v.hitArea?(C&&(v.worldTransform.applyInverse(L,this._tempPoint),v.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?U=!0:(C=!1,k=!1)),B=!1):v._mask&&C&&(v._mask.containsPoint&&v._mask.containsPoint(L)||(C=!1)),k&&v.interactiveChildren&&v.children)for(var j=v.children,X=j.length-1;X>=0;X--){var G=j[X],H=this.recursiveFindHit(l,G,E,C,B);if(H){if(!G.parent)continue;B=!1,H&&(l.target&&(C=!1),U=!0)}}return M&&(C&&!l.target&&!v.hitArea&&v.containsPoint&&v.containsPoint(L)&&(U=!0),v.interactive&&(U&&!l.target&&(l.target=v),E&&E(l,v,!!U))),U},i.prototype.findHit=function(l,v,E,C){this.recursiveFindHit(l,v,E,C,!1)},i}(),nv={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(i){i?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};ne.mixin(nv);var n_={target:null,data:{global:null}},nb=function(l){function r(v,E){var C=l.call(this)||this;return E=E||{},C.renderer=v,C.autoPreventDefault=void 0===E.autoPreventDefault||E.autoPreventDefault,C.interactionFrequency=E.interactionFrequency||10,C.mouse=new nf,C.mouse.identifier=1,C.mouse.global.set(-999999),C.activeInteractionData={},C.activeInteractionData[1]=C.mouse,C.interactionDataPool=[],C.eventData=new ny,C.interactionDOMElement=null,C.moveWhenInside=!1,C.eventsAdded=!1,C.tickerAdded=!1,C.mouseOverRenderer=!1,C.supportsTouchEvents="ontouchstart"in window,C.supportsPointerEvents=!!window.PointerEvent,C.onPointerUp=C.onPointerUp.bind(C),C.processPointerUp=C.processPointerUp.bind(C),C.onPointerCancel=C.onPointerCancel.bind(C),C.processPointerCancel=C.processPointerCancel.bind(C),C.onPointerDown=C.onPointerDown.bind(C),C.processPointerDown=C.processPointerDown.bind(C),C.onPointerMove=C.onPointerMove.bind(C),C.processPointerMove=C.processPointerMove.bind(C),C.onPointerOut=C.onPointerOut.bind(C),C.processPointerOverOut=C.processPointerOverOut.bind(C),C.onPointerOver=C.onPointerOver.bind(C),C.cursorStyles={default:"inherit",pointer:"pointer"},C.currentCursorMode=null,C.cursor=null,C.resolution=1,C.delayedEvents=[],C.search=new ng,C._tempDisplayObject=new nr,C._useSystemTicker=void 0===E.useSystemTicker||E.useSystemTicker,C.setTargetElement(C.renderer.view,C.renderer.resolution),C}return!function(l,v){function t(){this.constructor=l}mn(l,v),l.prototype=null===v?Object.create(v):(t.prototype=v.prototype,new t)}(r,l),Object.defineProperty(r.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(l){this._useSystemTicker=l,l?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),r.prototype.hitTest=function(l,v){return n_.target=null,n_.data.global=l,v||(v=this.lastObjectRendered),this.processInteractive(n_,v,null,!0),n_.target},r.prototype.setTargetElement=function(l,v){void 0===v&&(v=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=l,this.resolution=v,this.addEvents(),this.addTickerListener()},r.prototype.addTickerListener=function(){!this.tickerAdded&&this.interactionDOMElement&&this._useSystemTicker&&(np.system.add(this.tickerUpdate,this,sM.INTERACTION),this.tickerAdded=!0)},r.prototype.removeTickerListener=function(){this.tickerAdded&&(np.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},r.prototype.addEvents=function(){if(!(this.eventsAdded||!this.interactionDOMElement)){var l=this.interactionDOMElement.style;window.navigator.msPointerEnabled?(l.msContentZooming="none",l.msTouchAction="none"):this.supportsPointerEvents&&(l.touchAction="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0}},r.prototype.removeEvents=function(){if(!(!this.eventsAdded||!this.interactionDOMElement)){var l=this.interactionDOMElement.style;window.navigator.msPointerEnabled?(l.msContentZooming="",l.msTouchAction=""):this.supportsPointerEvents&&(l.touchAction=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1}},r.prototype.tickerUpdate=function(l){this._deltaTime+=l,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.update())},r.prototype.update=function(){if(this.interactionDOMElement){if(this._didMove){this._didMove=!1;return}for(var l in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(l)){var v=this.activeInteractionData[l];if(v.originalEvent&&"touch"!==v.pointerType){var E=this.configureInteractionEventForDOMEvent(this.eventData,v.originalEvent,v);this.processInteractive(E,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},r.prototype.setCursorMode=function(l){if(l=l||"default",this.currentCursorMode!==l){this.currentCursorMode=l;var v=this.cursorStyles[l];if(v)switch(typeof v){case"string":this.interactionDOMElement.style.cursor=v;break;case"function":v(l);break;case"object":Object.assign(this.interactionDOMElement.style,v)}else"string"!=typeof l||Object.prototype.hasOwnProperty.call(this.cursorStyles,l)||(this.interactionDOMElement.style.cursor=l)}},r.prototype.dispatchEvent=function(l,v,E){(!E.stopPropagationHint||l===E.stopsPropagatingAt)&&(E.currentTarget=l,E.type=v,l.emit(v,E),l[v]&&l[v](E))},r.prototype.delayDispatchEvent=function(l,v,E){this.delayedEvents.push({displayObject:l,eventString:v,eventData:E})},r.prototype.mapPositionToPoint=function(l,v,E){C=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var C,M=1/this.resolution;l.x=(v-C.left)*(this.interactionDOMElement.width/C.width)*M,l.y=(E-C.top)*(this.interactionDOMElement.height/C.height)*M},r.prototype.processInteractive=function(l,v,E,C){var M=this.search.findHit(l,v,E,C),L=this.delayedEvents;if(!L.length)return M;l.stopPropagationHint=!1;var U=L.length;this.delayedEvents=[];for(var B=0;B<U;B++){var k=L[B],j=k.displayObject,X=k.eventString,G=k.eventData;G.stopsPropagatingAt===j&&(G.stopPropagationHint=!0),this.dispatchEvent(j,X,G)}return M},r.prototype.onPointerDown=function(l){if(!(this.supportsTouchEvents&&"touch"===l.pointerType)){var v=this.normalizeToPointerData(l);this.autoPreventDefault&&v[0].isNormalized&&(l.cancelable||!("cancelable"in l))&&l.preventDefault();for(var E=v.length,C=0;C<E;C++){var M=v[C],L=this.getInteractionDataForPointerId(M),U=this.configureInteractionEventForDOMEvent(this.eventData,M,L);if(U.data.originalEvent=l,this.processInteractive(U,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",U),"touch"===M.pointerType)this.emit("touchstart",U);else if("mouse"===M.pointerType||"pen"===M.pointerType){var B=2===M.button;this.emit(B?"rightdown":"mousedown",this.eventData)}}}},r.prototype.processPointerDown=function(l,v,E){var C=l.data,M=l.data.identifier;if(E){if(v.trackedPointers[M]||(v.trackedPointers[M]=new nm(M)),this.dispatchEvent(v,"pointerdown",l),"touch"===C.pointerType)this.dispatchEvent(v,"touchstart",l);else if("mouse"===C.pointerType||"pen"===C.pointerType){var L=2===C.button;L?v.trackedPointers[M].rightDown=!0:v.trackedPointers[M].leftDown=!0,this.dispatchEvent(v,L?"rightdown":"mousedown",l)}}},r.prototype.onPointerComplete=function(l,v,E){for(var C=this.normalizeToPointerData(l),M=C.length,L=l.target!==this.interactionDOMElement?"outside":"",U=0;U<M;U++){var B=C[U],k=this.getInteractionDataForPointerId(B),j=this.configureInteractionEventForDOMEvent(this.eventData,B,k);if(j.data.originalEvent=l,this.processInteractive(j,this.lastObjectRendered,E,v||!L),this.emit(v?"pointercancel":"pointerup"+L,j),"mouse"===B.pointerType||"pen"===B.pointerType){var X=2===B.button;this.emit(X?"rightup"+L:"mouseup"+L,j)}else"touch"===B.pointerType&&(this.emit(v?"touchcancel":"touchend"+L,j),this.releaseInteractionDataForPointerId(B.pointerId))}},r.prototype.onPointerCancel=function(l){this.supportsTouchEvents&&"touch"===l.pointerType||this.onPointerComplete(l,!0,this.processPointerCancel)},r.prototype.processPointerCancel=function(l,v){var E=l.data,C=l.data.identifier;void 0!==v.trackedPointers[C]&&(delete v.trackedPointers[C],this.dispatchEvent(v,"pointercancel",l),"touch"===E.pointerType&&this.dispatchEvent(v,"touchcancel",l))},r.prototype.onPointerUp=function(l){this.supportsTouchEvents&&"touch"===l.pointerType||this.onPointerComplete(l,!1,this.processPointerUp)},r.prototype.processPointerUp=function(l,v,E){var C=l.data,M=l.data.identifier,L=v.trackedPointers[M],U="touch"===C.pointerType,B="mouse"===C.pointerType||"pen"===C.pointerType,k=!1;if(B){var j=2===C.button,X=nm.FLAGS,G=j?X.RIGHT_DOWN:X.LEFT_DOWN,H=void 0!==L&&L.flags&G;E?(this.dispatchEvent(v,j?"rightup":"mouseup",l),H&&(this.dispatchEvent(v,j?"rightclick":"click",l),k=!0)):H&&this.dispatchEvent(v,j?"rightupoutside":"mouseupoutside",l),L&&(j?L.rightDown=!1:L.leftDown=!1)}E?(this.dispatchEvent(v,"pointerup",l),U&&this.dispatchEvent(v,"touchend",l),L&&((!B||k)&&this.dispatchEvent(v,"pointertap",l),U&&(this.dispatchEvent(v,"tap",l),L.over=!1))):L&&(this.dispatchEvent(v,"pointerupoutside",l),U&&this.dispatchEvent(v,"touchendoutside",l)),L&&L.none&&delete v.trackedPointers[M]},r.prototype.onPointerMove=function(l){if(!(this.supportsTouchEvents&&"touch"===l.pointerType)){var v=this.normalizeToPointerData(l);("mouse"===v[0].pointerType||"pen"===v[0].pointerType)&&(this._didMove=!0,this.cursor=null);for(var E=v.length,C=0;C<E;C++){var M=v[C],L=this.getInteractionDataForPointerId(M),U=this.configureInteractionEventForDOMEvent(this.eventData,M,L);U.data.originalEvent=l,this.processInteractive(U,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",U),"touch"===M.pointerType&&this.emit("touchmove",U),("mouse"===M.pointerType||"pen"===M.pointerType)&&this.emit("mousemove",U)}"mouse"===v[0].pointerType&&this.setCursorMode(this.cursor)}},r.prototype.processPointerMove=function(l,v,E){var C=l.data,M="touch"===C.pointerType,L="mouse"===C.pointerType||"pen"===C.pointerType;L&&this.processPointerOverOut(l,v,E),(!this.moveWhenInside||E)&&(this.dispatchEvent(v,"pointermove",l),M&&this.dispatchEvent(v,"touchmove",l),L&&this.dispatchEvent(v,"mousemove",l))},r.prototype.onPointerOut=function(l){if(!(this.supportsTouchEvents&&"touch"===l.pointerType)){var v=this.normalizeToPointerData(l)[0];"mouse"===v.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var E=this.getInteractionDataForPointerId(v),C=this.configureInteractionEventForDOMEvent(this.eventData,v,E);C.data.originalEvent=v,this.processInteractive(C,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",C),"mouse"===v.pointerType||"pen"===v.pointerType?this.emit("mouseout",C):this.releaseInteractionDataForPointerId(E.identifier)}},r.prototype.processPointerOverOut=function(l,v,E){var C=l.data,M=l.data.identifier,L="mouse"===C.pointerType||"pen"===C.pointerType,U=v.trackedPointers[M];E&&!U&&(U=v.trackedPointers[M]=new nm(M)),void 0!==U&&(E&&this.mouseOverRenderer?(U.over||(U.over=!0,this.delayDispatchEvent(v,"pointerover",l),L&&this.delayDispatchEvent(v,"mouseover",l)),L&&null===this.cursor&&(this.cursor=v.cursor)):U.over&&(U.over=!1,this.dispatchEvent(v,"pointerout",this.eventData),L&&this.dispatchEvent(v,"mouseout",l),U.none&&delete v.trackedPointers[M]))},r.prototype.onPointerOver=function(l){var v=this.normalizeToPointerData(l)[0],E=this.getInteractionDataForPointerId(v),C=this.configureInteractionEventForDOMEvent(this.eventData,v,E);C.data.originalEvent=v,"mouse"===v.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",C),("mouse"===v.pointerType||"pen"===v.pointerType)&&this.emit("mouseover",C)},r.prototype.getInteractionDataForPointerId=function(l){var v,E=l.pointerId;return 1===E||"mouse"===l.pointerType?v=this.mouse:this.activeInteractionData[E]?v=this.activeInteractionData[E]:((v=this.interactionDataPool.pop()||new nf).identifier=E,this.activeInteractionData[E]=v),v.copyEvent(l),v},r.prototype.releaseInteractionDataForPointerId=function(l){var v=this.activeInteractionData[l];v&&(delete this.activeInteractionData[l],v.reset(),this.interactionDataPool.push(v))},r.prototype.configureInteractionEventForDOMEvent=function(l,v,E){return l.data=E,this.mapPositionToPoint(E.global,v.clientX,v.clientY),"touch"===v.pointerType&&(v.globalX=E.global.x,v.globalY=E.global.y),E.originalEvent=v,l.reset(),l},r.prototype.normalizeToPointerData=function(l){var v=[];if(this.supportsTouchEvents&&l instanceof TouchEvent)for(var E=0,C=l.changedTouches.length;E<C;E++){var M=l.changedTouches[E];typeof M.button>"u"&&(M.button=l.touches.length?1:0),typeof M.buttons>"u"&&(M.buttons=l.touches.length?1:0),typeof M.isPrimary>"u"&&(M.isPrimary=1===l.touches.length&&"touchstart"===l.type),typeof M.width>"u"&&(M.width=M.radiusX||1),typeof M.height>"u"&&(M.height=M.radiusY||1),typeof M.tiltX>"u"&&(M.tiltX=0),typeof M.tiltY>"u"&&(M.tiltY=0),typeof M.pointerType>"u"&&(M.pointerType="touch"),typeof M.pointerId>"u"&&(M.pointerId=M.identifier||0),typeof M.pressure>"u"&&(M.pressure=M.force||.5),typeof M.twist>"u"&&(M.twist=0),typeof M.tangentialPressure>"u"&&(M.tangentialPressure=0),typeof M.layerX>"u"&&(M.layerX=M.offsetX=M.clientX),typeof M.layerY>"u"&&(M.layerY=M.offsetY=M.clientY),M.isNormalized=!0,v.push(M)}else!(l instanceof MouseEvent)||this.supportsPointerEvents&&l instanceof window.PointerEvent||(typeof l.isPrimary>"u"&&(l.isPrimary=!0),typeof l.width>"u"&&(l.width=1),typeof l.height>"u"&&(l.height=1),typeof l.tiltX>"u"&&(l.tiltX=0),typeof l.tiltY>"u"&&(l.tiltY=0),typeof l.pointerType>"u"&&(l.pointerType="mouse"),typeof l.pointerId>"u"&&(l.pointerId=1),typeof l.pressure>"u"&&(l.pressure=.5),typeof l.twist>"u"&&(l.twist=0),typeof l.tangentialPressure>"u"&&(l.tangentialPressure=0),l.isNormalized=!0),v.push(l);return v},r.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},r}(tQ),nx=function(){function i(l){this.items=[],this._name=l,this._aliasCount=0}return i.prototype.emit=function(l,v,E,C,M,L,U,B){if(arguments.length>8)throw Error("max arguments reached");var k=this.name,j=this.items;this._aliasCount++;for(var X=0,G=j.length;X<G;X++)j[X][k](l,v,E,C,M,L,U,B);return j===this.items&&this._aliasCount--,this},i.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},i.prototype.add=function(l){return l[this._name]&&(this.ensureNonAliasedItems(),this.remove(l),this.items.push(l)),this},i.prototype.remove=function(l){var v=this.items.indexOf(l);return -1!==v&&(this.ensureNonAliasedItems(),this.items.splice(v,1)),this},i.prototype.contains=function(l){return -1!==this.items.indexOf(l)},i.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},i.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(i.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),i}();Object.defineProperties(nx.prototype,{dispatch:{value:nx.prototype.emit},run:{value:nx.prototype.emit}}),/*!
 * @pixi/core - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */tK.PREFER_ENV=tZ.any?iI.WEBGL:iI.WEBGL2,tK.STRICT_TEXTURE_CACHE=!1;var nT=[];function ha(l,v){if(!l)return null;var E="";if("string"==typeof l){var C=/\.(\w{3,4})(?:$|\?|#)/i.exec(l);C&&(E=C[1].toLowerCase())}for(var M=nT.length-1;M>=0;--M){var L=nT[M];if(L.test&&L.test(l,E))return new L(l,v)}throw Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var gn=function(l,v){return(gn=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(l,v){l.__proto__=v}||function(l,v){for(var E in v)v.hasOwnProperty(E)&&(l[E]=v[E])})(l,v)};function z(l,v){function t(){this.constructor=l}gn(l,v),l.prototype=null===v?Object.create(v):(t.prototype=v.prototype,new t)}var nE=function(){function i(l,v){void 0===l&&(l=0),void 0===v&&(v=0),this._width=l,this._height=v,this.destroyed=!1,this.internal=!1,this.onResize=new nx("setRealSize"),this.onUpdate=new nx("update"),this.onError=new nx("onError")}return i.prototype.bind=function(l){this.onResize.add(l),this.onUpdate.add(l),this.onError.add(l),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},i.prototype.unbind=function(l){this.onResize.remove(l),this.onUpdate.remove(l),this.onError.remove(l)},i.prototype.resize=function(l,v){(l!==this._width||v!==this._height)&&(this._width=l,this._height=v,this.onResize.emit(l,v))},Object.defineProperty(i.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),i.prototype.update=function(){this.destroyed||this.onUpdate.emit()},i.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(i.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),i.prototype.style=function(l,v,E){return!1},i.prototype.dispose=function(){},i.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},i.test=function(l,v){return!1},i}(),nI=function(l){function r(v,E){var C=this,M=E||{},L=M.width,U=M.height;if(!L||!U)throw Error("BufferResource width or height invalid");return(C=l.call(this,L,U)||this).data=v,C}return z(r,l),r.prototype.upload=function(l,v,E){var C=l.gl;return C.pixelStorei(C.UNPACK_PREMULTIPLY_ALPHA_WEBGL,v.alphaMode===iL.UNPACK),E.width===v.width&&E.height===v.height?C.texSubImage2D(v.target,0,0,0,v.width,v.height,v.format,v.type,this.data):(E.width=v.width,E.height=v.height,C.texImage2D(v.target,0,E.internalFormat,v.width,v.height,0,v.format,E.type,this.data)),!0},r.prototype.dispose=function(){this.data=null},r.test=function(l){return l instanceof Float32Array||l instanceof Uint8Array||l instanceof Uint32Array},r}(nE),nw={scaleMode:iM.NEAREST,format:iO.RGBA,alphaMode:iL.NPM},nP=function(l){function r(v,E){void 0===v&&(v=null),void 0===E&&(E=null);var C=l.call(this)||this,M=(E=E||{}).alphaMode,L=E.mipmap,U=E.anisotropicLevel,B=E.scaleMode,k=E.width,j=E.height,X=E.wrapMode,G=E.format,H=E.type,Y=E.target,W=E.resolution,q=E.resourceOptions;return!v||v instanceof nE||((v=ha(v,q)).internal=!0),C.width=k||0,C.height=j||0,C.resolution=W||tK.RESOLUTION,C.mipmap=void 0!==L?L:tK.MIPMAP_TEXTURES,C.anisotropicLevel=void 0!==U?U:tK.ANISOTROPIC_LEVEL,C.wrapMode=X||tK.WRAP_MODE,C.scaleMode=void 0!==B?B:tK.SCALE_MODE,C.format=G||iO.RGBA,C.type=H||iR.UNSIGNED_BYTE,C.target=Y||iC.TEXTURE_2D,C.alphaMode=void 0!==M?M:iL.UNPACK,void 0!==E.premultiplyAlpha&&(C.premultiplyAlpha=E.premultiplyAlpha),C.uid=be(),C.touched=0,C.isPowerOfTwo=!1,C._refreshPOT(),C._glTextures={},C.dirtyId=0,C.dirtyStyleId=0,C.cacheId=null,C.valid=k>0&&j>0,C.textureCacheIds=[],C.destroyed=!1,C.resource=null,C._batchEnabled=0,C._batchLocation=0,C.parentTextureArray=null,C.setResource(v),C}return z(r,l),Object.defineProperty(r.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),r.prototype.setStyle=function(l,v){var E;return void 0!==l&&l!==this.scaleMode&&(this.scaleMode=l,E=!0),void 0!==v&&v!==this.mipmap&&(this.mipmap=v,E=!0),E&&this.dirtyStyleId++,this},r.prototype.setSize=function(l,v,E){return this.resolution=E||this.resolution,this.width=l,this.height=v,this._refreshPOT(),this.update(),this},r.prototype.setRealSize=function(l,v,E){return this.resolution=E||this.resolution,this.width=l/this.resolution,this.height=v/this.resolution,this._refreshPOT(),this.update(),this},r.prototype._refreshPOT=function(){this.isPowerOfTwo=ln(this.realWidth)&&ln(this.realHeight)},r.prototype.setResolution=function(l){var v=this.resolution;return v===l||(this.resolution=l,this.valid&&(this.width=this.width*v/l,this.height=this.height*v/l,this.emit("update",this)),this._refreshPOT()),this},r.prototype.setResource=function(l){if(this.resource===l)return this;if(this.resource)throw Error("Resource can be set only once");return l.bind(this),this.resource=l,this},r.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},r.prototype.onError=function(l){this.emit("error",this,l)},r.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete r7[this.cacheId],delete r8[this.cacheId],this.cacheId=null),this.dispose(),r.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},r.prototype.dispose=function(){this.emit("dispose",this)},r.prototype.castToBaseTexture=function(){return this},r.from=function(l,v,E){void 0===E&&(E=tK.STRICT_TEXTURE_CACHE);var C="string"==typeof l,M=null;C?M=l:(l._pixiId||(l._pixiId="pixiid_"+be()),M=l._pixiId);var L=r7[M];if(C&&E&&!L)throw Error('The cacheId "'+M+'" does not exist in BaseTextureCache.');return L||((L=new r(l,v)).cacheId=M,r.addToCache(L,M)),L},r.fromBuffer=function(l,v,E,C){l=l||new Float32Array(v*E*4);var M=new nI(l,{width:v,height:E}),L=l instanceof Float32Array?iR.FLOAT:iR.UNSIGNED_BYTE;return new r(M,Object.assign(nw,C||{width:v,height:E,type:L}))},r.addToCache=function(l,v){v&&(-1===l.textureCacheIds.indexOf(v)&&l.textureCacheIds.push(v),r7[v]&&console.warn("BaseTexture added to the cache with an id ["+v+"] that already had an entry"),r7[v]=l)},r.removeFromCache=function(l){if("string"==typeof l){var v=r7[l];if(v){var E=v.textureCacheIds.indexOf(l);return E>-1&&v.textureCacheIds.splice(E,1),delete r7[l],v}}else if(l&&l.textureCacheIds){for(var C=0;C<l.textureCacheIds.length;++C)delete r7[l.textureCacheIds[C]];return l.textureCacheIds.length=0,l}return null},r._globalBatch=0,r}(tQ),nS=function(l){function r(v,E){var C=this,M=E||{},L=M.width,U=M.height;(C=l.call(this,L,U)||this).items=[],C.itemDirtyIds=[];for(var B=0;B<v;B++){var k=new nP;C.items.push(k),C.itemDirtyIds.push(-2)}return C.length=v,C._load=null,C.baseTexture=null,C}return z(r,l),r.prototype.initFromArray=function(l,v){for(var E=0;E<this.length;E++)l[E]&&(l[E].castToBaseTexture?this.addBaseTextureAt(l[E].castToBaseTexture(),E):l[E]instanceof nE?this.addResourceAt(l[E],E):this.addResourceAt(ha(l[E],v),E))},r.prototype.dispose=function(){for(var l=0,v=this.length;l<v;l++)this.items[l].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},r.prototype.addResourceAt=function(l,v){if(!this.items[v])throw Error("Index "+v+" is out of bounds");return l.valid&&!this.valid&&this.resize(l.width,l.height),this.items[v].setResource(l),this},r.prototype.bind=function(v){if(null!==this.baseTexture)throw Error("Only one base texture per TextureArray is allowed");l.prototype.bind.call(this,v);for(var E=0;E<this.length;E++)this.items[E].parentTextureArray=v,this.items[E].on("update",v.update,v)},r.prototype.unbind=function(v){l.prototype.unbind.call(this,v);for(var E=0;E<this.length;E++)this.items[E].parentTextureArray=null,this.items[E].off("update",v.update,v)},r.prototype.load=function(){var l=this;if(this._load)return this._load;var v=this.items.map(function(l){return l.resource}).filter(function(l){return l}).map(function(l){return l.load()});return this._load=Promise.all(v).then(function(){var v=l.items[0],E=v.realWidth,C=v.realHeight;return l.resize(E,C),Promise.resolve(l)}),this._load},r}(nE),nA=function(l){function r(v,E){var C,M,L=this,U=E||{},B=U.width,k=U.height;return Array.isArray(v)?(C=v,M=v.length):M=v,L=l.call(this,M,{width:B,height:k})||this,C&&L.initFromArray(C,E),L}return z(r,l),r.prototype.addBaseTextureAt=function(l,v){if(l.resource)this.addResourceAt(l.resource,v);else throw Error("ArrayResource does not support RenderTexture");return this},r.prototype.bind=function(v){l.prototype.bind.call(this,v),v.target=iC.TEXTURE_2D_ARRAY},r.prototype.upload=function(l,v,E){var C=this.length,M=this.itemDirtyIds,L=this.items,U=l.gl;E.dirtyId<0&&U.texImage3D(U.TEXTURE_2D_ARRAY,0,v.format,this._width,this._height,C,0,v.format,v.type,null);for(var B=0;B<C;B++){var k=L[B];M[B]<k.dirtyId&&(M[B]=k.dirtyId,k.valid&&U.texSubImage3D(U.TEXTURE_2D_ARRAY,0,0,0,B,k.resource.width,k.resource.height,1,v.format,v.type,k.resource.source))}return!0},r}(nS),nO=function(l){function r(v){var E=this,C=v.naturalWidth||v.videoWidth||v.width,M=v.naturalHeight||v.videoHeight||v.height;return(E=l.call(this,C,M)||this).source=v,E.noSubImage=!1,E}return z(r,l),r.crossOrigin=function(l,v,E){void 0===E&&0!==v.indexOf("data:")?l.crossOrigin=As(v):!1!==E&&(l.crossOrigin="string"==typeof E?E:"anonymous")},r.prototype.upload=function(l,v,E,C){var M=l.gl,L=v.realWidth,U=v.realHeight;return C=C||this.source,M.pixelStorei(M.UNPACK_PREMULTIPLY_ALPHA_WEBGL,v.alphaMode===iL.UNPACK),this.noSubImage||v.target!==M.TEXTURE_2D||E.width!==L||E.height!==U?(E.width=L,E.height=U,M.texImage2D(v.target,0,v.format,v.format,v.type,C)):M.texSubImage2D(M.TEXTURE_2D,0,0,0,v.format,v.type,C),!0},r.prototype.update=function(){if(!this.destroyed){var v=this.source,E=v.naturalWidth||v.videoWidth||v.width,C=v.naturalHeight||v.videoHeight||v.height;this.resize(E,C),l.prototype.update.call(this)}},r.prototype.dispose=function(){this.source=null},r}(nE),nC=function(l){function r(){return null!==l&&l.apply(this,arguments)||this}return z(r,l),r.test=function(l){var v=window.OffscreenCanvas;return!!v&&l instanceof v||l instanceof HTMLCanvasElement},r}(nO),nR=function(l){function r(v,E){var C=this,M=E||{},L=M.width,U=M.height,B=M.autoLoad,k=M.linkBaseTexture;if(v&&v.length!==r.SIDES)throw Error("Invalid length. Got "+v.length+", expected 6");C=l.call(this,6,{width:L,height:U})||this;for(var j=0;j<r.SIDES;j++)C.items[j].target=iC.TEXTURE_CUBE_MAP_POSITIVE_X+j;return C.linkBaseTexture=!1!==k,v&&C.initFromArray(v,E),!1!==B&&C.load(),C}return z(r,l),r.prototype.bind=function(v){l.prototype.bind.call(this,v),v.target=iC.TEXTURE_CUBE_MAP},r.prototype.addBaseTextureAt=function(l,v,E){if(void 0===E&&(E=this.linkBaseTexture),!this.items[v])throw Error("Index "+v+" is out of bounds");if(!this.linkBaseTexture||l.parentTextureArray||Object.keys(l._glTextures).length>0){if(l.resource)this.addResourceAt(l.resource,v);else throw Error("CubeResource does not support copying of renderTexture.")}else l.target=iC.TEXTURE_CUBE_MAP_POSITIVE_X+v,l.parentTextureArray=this.baseTexture,this.items[v]=l;return l.valid&&!this.valid&&this.resize(l.realWidth,l.realHeight),this.items[v]=l,this},r.prototype.upload=function(l,v,E){for(var C=this.itemDirtyIds,M=0;M<r.SIDES;M++){var L=this.items[M];C[M]<L.dirtyId&&(L.valid&&L.resource?(L.resource.upload(l,L,E),C[M]=L.dirtyId):C[M]<-1&&(l.gl.texImage2D(L.target,0,E.internalFormat,v.realWidth,v.realHeight,0,v.format,E.type,null),C[M]=-1))}return!0},r.test=function(l){return Array.isArray(l)&&l.length===r.SIDES},r.SIDES=6,r}(nS),nM=function(l){function r(v,E){var C=this;if(E=E||{},!(v instanceof HTMLImageElement)){var M=new Image;nO.crossOrigin(M,v,E.crossorigin),M.src=v,v=M}return C=l.call(this,v)||this,!v.complete&&C._width&&C._height&&(C._width=0,C._height=0),C.url=v.src,C._process=null,C.preserveBitmap=!1,C.createBitmap=(void 0!==E.createBitmap?E.createBitmap:tK.CREATE_IMAGE_BITMAP)&&!!window.createImageBitmap,C.alphaMode="number"==typeof E.alphaMode?E.alphaMode:null,void 0!==E.premultiplyAlpha&&(C.premultiplyAlpha=E.premultiplyAlpha),C.bitmap=null,C._load=null,!1!==E.autoLoad&&C.load(),C}return z(r,l),r.prototype.load=function(l){var v=this;return this._load||(void 0!==l&&(this.createBitmap=l),this._load=new Promise(function(l,E){var C=v.source;v.url=C.src;var s=function(){v.destroyed||(C.onload=null,C.onerror=null,v.resize(C.width,C.height),v._load=null,v.createBitmap?l(v.process()):l(v))};C.complete&&C.src?s():(C.onload=s,C.onerror=function(l){E(l),v.onError.emit(l)})})),this._load},r.prototype.process=function(){var l=this,v=this.source;return null!==this._process?this._process:null===this.bitmap&&window.createImageBitmap?(this._process=window.createImageBitmap(v,0,0,v.width,v.height,{premultiplyAlpha:this.alphaMode===iL.UNPACK?"premultiply":"none"}).then(function(v){return l.destroyed?Promise.reject():(l.bitmap=v,l.update(),l._process=null,Promise.resolve(l))}),this._process):Promise.resolve(this)},r.prototype.upload=function(v,E,C){if("number"==typeof this.alphaMode&&(E.alphaMode=this.alphaMode),!this.createBitmap)return l.prototype.upload.call(this,v,E,C);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(l.prototype.upload.call(this,v,E,C,this.bitmap),!this.preserveBitmap){var M=!0,L=E._glTextures;for(var U in L){var B=L[U];if(B!==C&&B.dirtyId!==E.dirtyId){M=!1;break}}M&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},r.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,l.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},r.test=function(l){return"string"==typeof l||l instanceof HTMLImageElement},r}(nO),nD=function(l){function r(v,E){var C=this;return E=E||{},(C=l.call(this,document.createElement("canvas"))||this)._width=0,C._height=0,C.svg=v,C.scale=E.scale||1,C._overrideWidth=E.width,C._overrideHeight=E.height,C._resolve=null,C._crossorigin=E.crossorigin,C._load=null,!1!==E.autoLoad&&C.load(),C}return z(r,l),r.prototype.load=function(){var l=this;return this._load||(this._load=new Promise(function(v){if(l._resolve=function(){l.resize(l.source.width,l.source.height),v(l)},/^\<svg/.test(l.svg.trim())){if(!btoa)throw Error("Your browser doesn't support base64 conversions.");l.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(l.svg)))}l._loadSvg()})),this._load},r.prototype._loadSvg=function(){var l=this,v=new Image;nO.crossOrigin(v,this.svg,this._crossorigin),v.src=this.svg,v.onerror=function(E){l._resolve&&(v.onerror=null,l.onError.emit(E))},v.onload=function(){if(l._resolve){var E=v.width,C=v.height;if(!E||!C)throw Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var M=E*l.scale,L=C*l.scale;(l._overrideWidth||l._overrideHeight)&&(M=l._overrideWidth||l._overrideHeight/C*E,L=l._overrideHeight||l._overrideWidth/E*C),M=Math.round(M),L=Math.round(L);var U=l.source;U.width=M,U.height=L,U._pixiId="canvas_"+be(),U.getContext("2d").drawImage(v,0,0,E,C,0,0,M,L),l._resolve(),l._resolve=null}}},r.getSize=function(l){var v=r.SVG_SIZE.exec(l),E={};return v&&(E[v[1]]=Math.round(parseFloat(v[3])),E[v[5]]=Math.round(parseFloat(v[7]))),E},r.prototype.dispose=function(){l.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},r.test=function(l,v){return"svg"===v||"string"==typeof l&&0===l.indexOf("data:image/svg+xml;base64")||"string"==typeof l&&0===l.indexOf("<svg")},r.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,r}(nO),nN=function(l){function r(v,E){var C=this;if(E=E||{},!(v instanceof HTMLVideoElement)){var M=document.createElement("video");M.setAttribute("preload","auto"),M.setAttribute("webkit-playsinline",""),M.setAttribute("playsinline",""),"string"==typeof v&&(v=[v]);var L=v[0].src||v[0];nO.crossOrigin(M,L,E.crossorigin);for(var U=0;U<v.length;++U){var B=document.createElement("source"),k=v[U],j=k.src,X=k.mime,G=(j=j||v[U]).split("?").shift().toLowerCase(),H=G.substr(G.lastIndexOf(".")+1);X=X||r.MIME_TYPES[H]||"video/"+H,B.src=j,B.type=X,M.appendChild(B)}v=M}return(C=l.call(this,v)||this).noSubImage=!0,C._autoUpdate=!0,C._isConnectedToTicker=!1,C._updateFPS=E.updateFPS||0,C._msToNextUpdate=0,C.autoPlay=!1!==E.autoPlay,C._load=null,C._resolve=null,C._onCanPlay=C._onCanPlay.bind(C),C._onError=C._onError.bind(C),!1!==E.autoLoad&&C.load(),C}return z(r,l),r.prototype.update=function(v){if(!this.destroyed){var E=np.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-E),(!this._updateFPS||this._msToNextUpdate<=0)&&(l.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},r.prototype.load=function(){var l=this;if(this._load)return this._load;var v=this.source;return(v.readyState===v.HAVE_ENOUGH_DATA||v.readyState===v.HAVE_FUTURE_DATA)&&v.width&&v.height&&(v.complete=!0),v.addEventListener("play",this._onPlayStart.bind(this)),v.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(v.addEventListener("canplay",this._onCanPlay),v.addEventListener("canplaythrough",this._onCanPlay),v.addEventListener("error",this._onError,!0)),this._load=new Promise(function(E){l.valid?E(l):(l._resolve=E,v.load())}),this._load},r.prototype._onError=function(l){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(l)},r.prototype._isSourcePlaying=function(){var l=this.source;return l.currentTime>0&&!1===l.paused&&!1===l.ended&&l.readyState>2},r.prototype._isSourceReady=function(){var l=this.source;return 3===l.readyState||4===l.readyState},r.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(np.shared.add(this.update,this),this._isConnectedToTicker=!0)},r.prototype._onPlayStop=function(){this._isConnectedToTicker&&(np.shared.remove(this.update,this),this._isConnectedToTicker=!1)},r.prototype._onCanPlay=function(){var l=this.source;l.removeEventListener("canplay",this._onCanPlay),l.removeEventListener("canplaythrough",this._onCanPlay);var v=this.valid;this.resize(l.videoWidth,l.videoHeight),!v&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&l.play()},r.prototype.dispose=function(){this._isConnectedToTicker&&np.shared.remove(this.update,this);var v=this.source;v&&(v.removeEventListener("error",this._onError,!0),v.pause(),v.src="",v.load()),l.prototype.dispose.call(this)},Object.defineProperty(r.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(l){l!==this._autoUpdate&&(this._autoUpdate=l,!this._autoUpdate&&this._isConnectedToTicker?(np.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(np.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(l){l!==this._updateFPS&&(this._updateFPS=l)},enumerable:!1,configurable:!0}),r.test=function(l,v){return l instanceof HTMLVideoElement||r.TYPES.indexOf(v)>-1},r.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],r.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},r}(nO),nL=function(l){function r(){return null!==l&&l.apply(this,arguments)||this}return z(r,l),r.test=function(l){return!!window.createImageBitmap&&l instanceof ImageBitmap},r}(nO);nT.push(nM,nL,nC,nN,nD,nI,nR,nA);var nF=function(){function i(l){this.renderer=l}return i.prototype.destroy=function(){this.renderer=null},i}(),nU=function(l){function r(){return null!==l&&l.apply(this,arguments)||this}return z(r,l),r.prototype.upload=function(l,v,E){var C=l.gl;return C.pixelStorei(C.UNPACK_PREMULTIPLY_ALPHA_WEBGL,v.alphaMode===iL.UNPACK),E.width===v.width&&E.height===v.height?C.texSubImage2D(v.target,0,0,0,v.width,v.height,v.format,v.type,this.data):(E.width=v.width,E.height=v.height,C.texImage2D(v.target,0,1===l.context.webGLVersion?C.DEPTH_COMPONENT:C.DEPTH_COMPONENT16,v.width,v.height,0,v.format,v.type,this.data)),!0},r}(nI),nB=function(){function i(l,v){this.width=Math.ceil(l||100),this.height=Math.ceil(v||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new nx("disposeFramebuffer"),this.multisample=ij.NONE}return Object.defineProperty(i.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),i.prototype.addColorTexture=function(l,v){return void 0===l&&(l=0),this.colorTextures[l]=v||new nP(null,{scaleMode:iM.NEAREST,resolution:1,mipmap:iN.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},i.prototype.addDepthTexture=function(l){return this.depthTexture=l||new nP(new nU(null,{width:this.width,height:this.height}),{scaleMode:iM.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:iN.OFF,format:iO.DEPTH_COMPONENT,type:iR.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},i.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},i.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},i.prototype.resize=function(l,v){if(l=Math.ceil(l),v=Math.ceil(v),!(l===this.width&&v===this.height)){this.width=l,this.height=v,this.dirtyId++,this.dirtySize++;for(var E=0;E<this.colorTextures.length;E++){var C=this.colorTextures[E],M=C.resolution;C.setSize(l/M,v/M)}if(this.depthTexture){var M=this.depthTexture.resolution;this.depthTexture.setSize(l/M,v/M)}}},i.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},i.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},i}(),nk=function(l){function r(v){var E=this;if("number"==typeof v){var C=arguments[0],M=arguments[1],L=arguments[2],U=arguments[3];v={width:C,height:M,scaleMode:L,resolution:U}}E=l.call(this,null,v)||this;var B=v||{},k=B.width,j=B.height;return E.mipmap=0,E.width=Math.ceil(k)||100,E.height=Math.ceil(j)||100,E.valid=!0,E.clearColor=[0,0,0,0],E.framebuffer=new nB(E.width*E.resolution,E.height*E.resolution).addColorTexture(0,E),E.maskStack=[],E.filterStack=[{}],E}return z(r,l),r.prototype.resize=function(l,v){l=Math.ceil(l),v=Math.ceil(v),this.framebuffer.resize(l*this.resolution,v*this.resolution)},r.prototype.dispose=function(){this.framebuffer.dispose(),l.prototype.dispose.call(this)},r.prototype.destroy=function(){l.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},r}(nP),nj=function(){function i(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return i.prototype.set=function(l,v,E){var C=v.width,M=v.height;if(E){var L=l.width/2/C,U=l.height/2/M,B=l.x/C+L,k=l.y/M+U;E=i7.add(E,i7.NW),this.x0=B+L*i7.uX(E),this.y0=k+U*i7.uY(E),E=i7.add(E,2),this.x1=B+L*i7.uX(E),this.y1=k+U*i7.uY(E),E=i7.add(E,2),this.x2=B+L*i7.uX(E),this.y2=k+U*i7.uY(E),E=i7.add(E,2),this.x3=B+L*i7.uX(E),this.y3=k+U*i7.uY(E)}else this.x0=l.x/C,this.y0=l.y/M,this.x1=(l.x+l.width)/C,this.y1=l.y/M,this.x2=(l.x+l.width)/C,this.y2=(l.y+l.height)/M,this.x3=l.x/C,this.y3=(l.y+l.height)/M;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},i}(),nX=new nj,nG=function(l){function r(v,E,C,M,L,U){var B=l.call(this)||this;if(B.noFrame=!1,E||(B.noFrame=!0,E=new iW(0,0,1,1)),v instanceof r&&(v=v.baseTexture),B.baseTexture=v,B._frame=E,B.trim=M,B.valid=!1,B._uvs=nX,B.uvMatrix=null,B.orig=C||E,B._rotate=Number(L||0),!0===L)B._rotate=2;else if(B._rotate%2!=0)throw Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return B.defaultAnchor=U?new i$(U.x,U.y):new i$(0,0),B._updateID=0,B.textureCacheIds=[],v.valid?B.noFrame?v.valid&&B.onBaseTextureUpdated(v):B.frame=E:v.once("loaded",B.onBaseTextureUpdated,B),B.noFrame&&v.on("update",B.onBaseTextureUpdated,B),B}return z(r,l),r.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},r.prototype.onBaseTextureUpdated=function(l){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=l.width,this._frame.height=l.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},r.prototype.destroy=function(l){if(this.baseTexture){if(l){var v=this.baseTexture;v&&v.url&&r8[v.url]&&r.removeFromCache(v.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,r.removeFromCache(this),this.textureCacheIds=null},r.prototype.clone=function(){return new r(this.baseTexture,this.frame.clone(),this.orig.clone(),this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor)},r.prototype.updateUvs=function(){this._uvs===nX&&(this._uvs=new nj),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},r.from=function(l,v,E){void 0===v&&(v={}),void 0===E&&(E=tK.STRICT_TEXTURE_CACHE);var C="string"==typeof l,M=null;C?M=l:(l._pixiId||(l._pixiId="pixiid_"+be()),M=l._pixiId);var L=r8[M];if(C&&E&&!L)throw Error('The cacheId "'+M+'" does not exist in TextureCache.');return L||(v.resolution||(v.resolution=vr(l)),(L=new r(new nP(l,v))).baseTexture.cacheId=M,nP.addToCache(L.baseTexture,M),r.addToCache(L,M)),L},r.fromURL=function(l,v){var E=Object.assign({autoLoad:!1},null==v?void 0:v.resourceOptions),C=r.from(l,Object.assign({resourceOptions:E},v),!1),M=C.baseTexture.resource;return C.baseTexture.valid?Promise.resolve(C):M.load().then(function(){return Promise.resolve(C)})},r.fromBuffer=function(l,v,E,C){return new r(nP.fromBuffer(l,v,E,C))},r.fromLoader=function(l,v,E){var C=new nM(l);C.url=v;var M=new nP(C,{scaleMode:tK.SCALE_MODE,resolution:vr(v)}),L=new r(M);return E||(E=v),nP.addToCache(L.baseTexture,E),r.addToCache(L,E),E!==v&&(nP.addToCache(L.baseTexture,v),r.addToCache(L,v)),L},r.addToCache=function(l,v){v&&(-1===l.textureCacheIds.indexOf(v)&&l.textureCacheIds.push(v),r8[v]&&console.warn("Texture added to the cache with an id ["+v+"] that already had an entry"),r8[v]=l)},r.removeFromCache=function(l){if("string"==typeof l){var v=r8[l];if(v){var E=v.textureCacheIds.indexOf(l);return E>-1&&v.textureCacheIds.splice(E,1),delete r8[l],v}}else if(l&&l.textureCacheIds){for(var C=0;C<l.textureCacheIds.length;++C)r8[l.textureCacheIds[C]]===l&&delete r8[l.textureCacheIds[C]];return l.textureCacheIds.length=0,l}return null},Object.defineProperty(r.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"frame",{get:function(){return this._frame},set:function(l){this._frame=l,this.noFrame=!1;var v=l.x,E=l.y,C=l.width,M=l.height,L=v+C>this.baseTexture.width,U=E+M>this.baseTexture.height;if(L||U)throw Error("Texture Error: frame does not fit inside the base Texture dimensions: "+("X: "+v+" + "+C+" = "+(v+C)+" > "+this.baseTexture.width+" ")+(L&&U?"and":"or")+" "+("Y: "+E+" + "+M+" = "+(E+M))+" > "+this.baseTexture.height);this.valid=C&&M&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=l),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"rotate",{get:function(){return this._rotate},set:function(l){this._rotate=l,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),r.prototype.castToBaseTexture=function(){return this.baseTexture},r}(tQ);function ci(l){l.destroy=function(){},l.on=function(){},l.once=function(){},l.emit=function(){}}nG.EMPTY=new nG(new nP),ci(nG.EMPTY),ci(nG.EMPTY.baseTexture),nG.WHITE=((sA=document.createElement("canvas")).width=16,sA.height=16,(sO=sA.getContext("2d")).fillStyle="white",sO.fillRect(0,0,16,16),new nG(new nP(new nC(sA)))),ci(nG.WHITE),ci(nG.WHITE.baseTexture);var nH=function(l){function r(v,E){var C=this,M=null;if(!(v instanceof nk)){var L=arguments[1],U=arguments[2],B=arguments[3],k=arguments[4];console.warn("Please use RenderTexture.create("+L+", "+U+") instead of the ctor directly."),M=arguments[0],E=null,v=new nk({width:L,height:U,scaleMode:B,resolution:k})}return(C=l.call(this,v,E)||this).legacyRenderer=M,C.valid=!0,C.filterFrame=null,C.filterPoolKey=null,C.updateUvs(),C}return z(r,l),Object.defineProperty(r.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),r.prototype.resize=function(l,v,E){void 0===E&&(E=!0),l=Math.ceil(l),v=Math.ceil(v),this.valid=l>0&&v>0,this._frame.width=this.orig.width=l,this._frame.height=this.orig.height=v,E&&this.baseTexture.resize(l,v),this.updateUvs()},r.prototype.setResolution=function(l){var v=this.baseTexture;v.resolution!==l&&(v.setResolution(l),this.resize(v.width,v.height,!1))},r.create=function(l){return"number"==typeof l&&(l={width:l,height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),new r(new nk(l))},r}(nG),nz=function(){function i(l){this.texturePool={},this.textureOptions=l||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return i.prototype.createTexture=function(l,v){var E=new nk(Object.assign({width:l,height:v,resolution:1},this.textureOptions));return new nH(E)},i.prototype.getOptimalTexture=function(l,v,E){void 0===E&&(E=1);var C=i.SCREEN_KEY;l*=E,v*=E,this.enableFullScreen&&l===this._pixelsWidth&&v===this._pixelsHeight||(C=(65535&(l=pr(l)))<<16|65535&(v=pr(v))),this.texturePool[C]||(this.texturePool[C]=[]);var M=this.texturePool[C].pop();return M||(M=this.createTexture(l,v)),M.filterPoolKey=C,M.setResolution(E),M},i.prototype.getFilterTexture=function(l,v){var E=this.getOptimalTexture(l.width,l.height,v||l.resolution);return E.filterFrame=l.filterFrame,E},i.prototype.returnTexture=function(l){var v=l.filterPoolKey;l.filterFrame=null,this.texturePool[v].push(l)},i.prototype.returnFilterTexture=function(l){this.returnTexture(l)},i.prototype.clear=function(l){if(l=!1!==l)for(var v in this.texturePool){var E=this.texturePool[v];if(E)for(var C=0;C<E.length;C++)E[C].destroy(!0)}this.texturePool={}},i.prototype.setScreenSize=function(l){if(!(l.width===this._pixelsWidth&&l.height===this._pixelsHeight)){var v=i.SCREEN_KEY,E=this.texturePool[v];if(this.enableFullScreen=l.width>0&&l.height>0,E)for(var C=0;C<E.length;C++)E[C].destroy(!0);this.texturePool[v]=[],this._pixelsWidth=l.width,this._pixelsHeight=l.height}},i.SCREEN_KEY="screen",i}(),nY=function(){function i(l,v,E,C,M,L,U){void 0===v&&(v=0),void 0===E&&(E=!1),void 0===C&&(C=5126),this.buffer=l,this.size=v,this.normalized=E,this.type=C,this.stride=M,this.start=L,this.instance=U}return i.prototype.destroy=function(){this.buffer=null},i.from=function(l,v,E,C,M){return new i(l,v,E,C,M)},i}(),nV=0,nW=function(){function i(l,v,E){void 0===v&&(v=!0),void 0===E&&(E=!1),this.data=l||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=E,this.static=v,this.id=nV++,this.disposeRunner=new nx("disposeBuffer")}return i.prototype.update=function(l){this.data=l||this.data,this._updateID++},i.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},i.prototype.destroy=function(){this.dispose(),this.data=null},i.from=function(l){return l instanceof Array&&(l=new Float32Array(l)),new i(l)},i}();function Ys(l){if(4===l.BYTES_PER_ELEMENT)return l instanceof Float32Array?"Float32Array":l instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===l.BYTES_PER_ELEMENT){if(l instanceof Uint16Array)return"Uint16Array"}else if(1===l.BYTES_PER_ELEMENT&&l instanceof Uint8Array)return"Uint8Array";return null}var nq={Float32Array,Uint32Array,Int32Array,Uint8Array},nZ={5126:4,5123:2,5121:1},nK=0,nJ={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},n$=function(){function i(l,v){void 0===l&&(l=[]),void 0===v&&(v={}),this.buffers=l,this.indexBuffer=null,this.attributes=v,this.glVertexArrayObjects={},this.id=nK++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new nx("disposeGeometry"),this.refCount=0}return i.prototype.addAttribute=function(l,v,E,C,M,L,U,B){if(void 0===E&&(E=0),void 0===C&&(C=!1),void 0===B&&(B=!1),!v)throw Error("You must pass a buffer when creating an attribute");v instanceof nW||(v instanceof Array&&(v=new Float32Array(v)),v=new nW(v));var k=l.split("|");if(k.length>1){for(var j=0;j<k.length;j++)this.addAttribute(k[j],v,E,C,M);return this}var X=this.buffers.indexOf(v);return -1===X&&(this.buffers.push(v),X=this.buffers.length-1),this.attributes[l]=new nY(X,E,C,M,L,U,B),this.instanced=this.instanced||B,this},i.prototype.getAttribute=function(l){return this.attributes[l]},i.prototype.getBuffer=function(l){return this.buffers[this.getAttribute(l).buffer]},i.prototype.addIndex=function(l){return l instanceof nW||(l instanceof Array&&(l=new Uint16Array(l)),l=new nW(l)),l.index=!0,this.indexBuffer=l,-1===this.buffers.indexOf(l)&&this.buffers.push(l),this},i.prototype.getIndex=function(){return this.indexBuffer},i.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var l,v=[],E=[],C=new nW;for(l in this.attributes){var M=this.attributes[l],L=this.buffers[M.buffer];v.push(L.data),E.push(M.size*nZ[M.type]/4),M.buffer=0}for(C.data=function(l,v){for(var E=0,C=0,M={},L=0;L<l.length;L++)C+=v[L],E+=l[L].length;for(var U=new ArrayBuffer(4*E),B=null,k=0,L=0;L<l.length;L++){var j=v[L],X=l[L],G=Ys(X);M[G]||(M[G]=new nq[G](U)),B=M[G];for(var H=0;H<X.length;H++)B[(H/j|0)*C+k+H%j]=X[H];k+=j}return new Float32Array(U)}(v,E),l=0;l<this.buffers.length;l++)this.buffers[l]!==this.indexBuffer&&this.buffers[l].destroy();return this.buffers=[C],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},i.prototype.getSize=function(){for(var l in this.attributes){var v=this.attributes[l];return this.buffers[v.buffer].data.length/(v.stride/4||v.size)}return 0},i.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},i.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},i.prototype.clone=function(){for(var l=new i,v=0;v<this.buffers.length;v++)l.buffers[v]=new nW(this.buffers[v].data.slice(0));for(var v in this.attributes){var E=this.attributes[v];l.attributes[v]=new nY(E.buffer,E.size,E.normalized,E.type,E.stride,E.start,E.instance)}return this.indexBuffer&&(l.indexBuffer=l.buffers[this.buffers.indexOf(this.indexBuffer)],l.indexBuffer.index=!0),l},i.merge=function(l){for(var v,E=new i,C=[],M=[],L=[],U=0;U<l.length;U++){v=l[U];for(var B=0;B<v.buffers.length;B++)M[B]=M[B]||0,M[B]+=v.buffers[B].data.length,L[B]=0}for(var U=0;U<v.buffers.length;U++)C[U]=new nJ[Ys(v.buffers[U].data)](M[U]),E.buffers[U]=new nW(C[U]);for(var U=0;U<l.length;U++){v=l[U];for(var B=0;B<v.buffers.length;B++)C[B].set(v.buffers[B].data,L[B]),L[B]+=v.buffers[B].data.length}if(E.attributes=v.attributes,v.indexBuffer){E.indexBuffer=E.buffers[v.buffers.indexOf(v.indexBuffer)],E.indexBuffer.index=!0;for(var k=0,j=0,X=0,G=0,U=0;U<v.buffers.length;U++)if(v.buffers[U]!==v.indexBuffer){G=U;break}for(var U in v.attributes){var H=v.attributes[U];(0|H.buffer)===G&&(j+=H.size*nZ[H.type]/4)}for(var U=0;U<l.length;U++){for(var Y=l[U].indexBuffer.data,B=0;B<Y.length;B++)E.indexBuffer.data[B+X]+=k;k+=v.buffers[G].data.length/j,X+=Y.length}}return E},i}(),nQ=function(l){function r(){var v=l.call(this)||this;return v.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),v}return z(r,l),r}(n$),n0=function(l){function r(){var v=l.call(this)||this;return v.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),v.uvs=new Float32Array([0,0,1,0,1,1,0,1]),v.vertexBuffer=new nW(v.vertices),v.uvBuffer=new nW(v.uvs),v.addAttribute("aVertexPosition",v.vertexBuffer).addAttribute("aTextureCoord",v.uvBuffer).addIndex([0,1,2,0,2,3]),v}return z(r,l),r.prototype.map=function(l,v){var E=0,C=0;return this.uvs[0]=E,this.uvs[1]=C,this.uvs[2]=E+v.width/l.width,this.uvs[3]=C,this.uvs[4]=E+v.width/l.width,this.uvs[5]=C+v.height/l.height,this.uvs[6]=E,this.uvs[7]=C+v.height/l.height,E=v.x,C=v.y,this.vertices[0]=E,this.vertices[1]=C,this.vertices[2]=E+v.width,this.vertices[3]=C,this.vertices[4]=E+v.width,this.vertices[5]=C+v.height,this.vertices[6]=E,this.vertices[7]=C+v.height,this.invalidate(),this},r.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},r}(n$),n1=0,n2=function(){function i(l,v){this.uniforms=l,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=n1++,this.static=!!v}return i.prototype.update=function(){this.dirtyId++},i.prototype.add=function(l,v,E){this.uniforms[l]=new i(v,E)},i.from=function(l,v){return new i(l,v)},i}(),n3=function(){function i(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new iW,this.destinationFrame=new iW,this.filters=[]}return i.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},i}(),n5=function(l){function r(v){var E=l.call(this,v)||this;return E.defaultFilterStack=[{}],E.texturePool=new nz,E.texturePool.setScreenSize(v.view),E.statePool=[],E.quad=new nQ,E.quadUv=new n0,E.tempRect=new iW,E.activeState={},E.globalUniforms=new n2({outputFrame:E.tempRect,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),E.forceClear=!1,E.useMaxPadding=!1,E}return z(r,l),r.prototype.push=function(l,v){for(var E=this.renderer,C=this.defaultFilterStack,M=this.statePool.pop()||new n3,L=v[0].resolution,U=v[0].padding,B=v[0].autoFit,k=v[0].legacy,j=1;j<v.length;j++){var X=v[j];L=Math.min(L,X.resolution),U=this.useMaxPadding?Math.max(U,X.padding):U+X.padding,B=B||X.autoFit,k=k||X.legacy}1===C.length&&(this.defaultFilterStack[0].renderTexture=E.renderTexture.current),C.push(M),M.resolution=L,M.legacy=k,M.target=l,M.sourceFrame.copyFrom(l.filterArea||l.getBounds(!0)),M.sourceFrame.pad(U),B&&M.sourceFrame.fit(this.renderer.renderTexture.sourceFrame),M.sourceFrame.ceil(L),M.renderTexture=this.getOptimalFilterTexture(M.sourceFrame.width,M.sourceFrame.height,L),M.filters=v,M.destinationFrame.width=M.renderTexture.width,M.destinationFrame.height=M.renderTexture.height;var G=this.tempRect;G.width=M.sourceFrame.width,G.height=M.sourceFrame.height,M.renderTexture.filterFrame=M.sourceFrame,E.renderTexture.bind(M.renderTexture,M.sourceFrame,G),E.renderTexture.clear()},r.prototype.pop=function(){var l=this.defaultFilterStack,v=l.pop(),E=v.filters;this.activeState=v;var C=this.globalUniforms.uniforms;C.outputFrame=v.sourceFrame,C.resolution=v.resolution;var M=C.inputSize,L=C.inputPixel,U=C.inputClamp;if(M[0]=v.destinationFrame.width,M[1]=v.destinationFrame.height,M[2]=1/M[0],M[3]=1/M[1],L[0]=M[0]*v.resolution,L[1]=M[1]*v.resolution,L[2]=1/L[0],L[3]=1/L[1],U[0]=.5*L[2],U[1]=.5*L[3],U[2]=v.sourceFrame.width*M[2]-.5*L[2],U[3]=v.sourceFrame.height*M[3]-.5*L[3],v.legacy){var B=C.filterArea;B[0]=v.destinationFrame.width,B[1]=v.destinationFrame.height,B[2]=v.sourceFrame.x,B[3]=v.sourceFrame.y,C.filterClamp=C.inputClamp}this.globalUniforms.update();var k=l[l.length-1];if(v.renderTexture.framebuffer.multisample>1&&this.renderer.framebuffer.blit(),1===E.length)E[0].apply(this,v.renderTexture,k.renderTexture,iF.BLEND,v),this.returnFilterTexture(v.renderTexture);else{var j=v.renderTexture,X=this.getOptimalFilterTexture(j.width,j.height,v.resolution);X.filterFrame=j.filterFrame;var G=0;for(G=0;G<E.length-1;++G){E[G].apply(this,j,X,iF.CLEAR,v);var H=j;j=X,X=H}E[G].apply(this,j,k.renderTexture,iF.BLEND,v),this.returnFilterTexture(j),this.returnFilterTexture(X)}v.clear(),this.statePool.push(v)},r.prototype.bindAndClear=function(l,v){if(void 0===v&&(v=iF.CLEAR),l&&l.filterFrame){var E=this.tempRect;E.width=l.filterFrame.width,E.height=l.filterFrame.height,this.renderer.renderTexture.bind(l,l.filterFrame,E)}else this.renderer.renderTexture.bind(l);"boolean"==typeof v&&(v=v?iF.CLEAR:iF.BLEND,I("5.2.1","Use CLEAR_MODES when using clear applyFilter option")),(v===iF.CLEAR||v===iF.BLIT&&this.forceClear)&&this.renderer.renderTexture.clear()},r.prototype.applyFilter=function(l,v,E,C){var M=this.renderer;this.bindAndClear(E,C),l.uniforms.uSampler=v,l.uniforms.filterGlobals=this.globalUniforms,M.state.set(l.state),M.shader.bind(l),l.legacy?(this.quadUv.map(v._frame,v.filterFrame),M.geometry.bind(this.quadUv),M.geometry.draw(iA.TRIANGLES)):(M.geometry.bind(this.quad),M.geometry.draw(iA.TRIANGLE_STRIP))},r.prototype.calculateSpriteMatrix=function(l,v){var E=this.activeState,C=E.sourceFrame,M=E.destinationFrame,L=v._texture.orig,U=l.set(M.width,0,0,M.height,C.x,C.y),B=v.worldTransform.copyTo(i0.TEMP_MATRIX);return B.invert(),U.prepend(B),U.scale(1/L.width,1/L.height),U.translate(v.anchor.x,v.anchor.y),U},r.prototype.destroy=function(){this.texturePool.clear(!1)},r.prototype.getOptimalFilterTexture=function(l,v,E){return void 0===E&&(E=1),this.texturePool.getOptimalTexture(l,v,E)},r.prototype.getFilterTexture=function(l,v){if("number"==typeof l){var E=l;l=v,v=E}l=l||this.activeState.renderTexture;var C=this.texturePool.getOptimalTexture(l.width,l.height,v||l.resolution);return C.filterFrame=l.filterFrame,C},r.prototype.returnFilterTexture=function(l){this.texturePool.returnTexture(l)},r.prototype.emptyPool=function(){this.texturePool.clear(!0)},r.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},r}(nF),n4=function(){function i(l){this.renderer=l}return i.prototype.flush=function(){},i.prototype.destroy=function(){this.renderer=null},i.prototype.start=function(){},i.prototype.stop=function(){this.flush()},i.prototype.render=function(l){},i}(),n6=function(l){function r(v){var E=l.call(this,v)||this;return E.emptyRenderer=new n4(v),E.currentRenderer=E.emptyRenderer,E}return z(r,l),r.prototype.setObjectRenderer=function(l){this.currentRenderer!==l&&(this.currentRenderer.stop(),this.currentRenderer=l,this.currentRenderer.start())},r.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},r.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},r.prototype.copyBoundTextures=function(l,v){for(var E=this.renderer.texture.boundTextures,C=v-1;C>=0;--C)l[C]=E[C]||null,l[C]&&(l[C]._batchLocation=C)},r.prototype.boundArray=function(l,v,E,C){for(var M=l.elements,L=l.ids,U=l.count,B=0,k=0;k<U;k++){var j=M[k],X=j._batchLocation;if(X>=0&&X<C&&v[X]===j){L[k]=X;continue}for(;B<C;){var G=v[B];if(G&&G._batchEnabled===E&&G._batchLocation===B){B++;continue}L[k]=B,j._batchLocation=B,v[B]=j;break}}},r}(nF),n8=0,n7=function(l){function r(v){var E=l.call(this,v)||this;return E.webGLVersion=1,E.extensions={},E.supports={uint32Indices:!1},E.handleContextLost=E.handleContextLost.bind(E),E.handleContextRestored=E.handleContextRestored.bind(E),v.view.addEventListener("webglcontextlost",E.handleContextLost,!1),v.view.addEventListener("webglcontextrestored",E.handleContextRestored,!1),E}return z(r,l),Object.defineProperty(r.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),r.prototype.contextChange=function(l){this.gl=l,this.renderer.gl=l,this.renderer.CONTEXT_UID=n8++,l.isContextLost()&&l.getExtension("WEBGL_lose_context")&&l.getExtension("WEBGL_lose_context").restoreContext()},r.prototype.initFromContext=function(l){this.gl=l,this.validateContext(l),this.renderer.gl=l,this.renderer.CONTEXT_UID=n8++,this.renderer.runners.contextChange.emit(l)},r.prototype.initFromOptions=function(l){var v=this.createContext(this.renderer.view,l);this.initFromContext(v)},r.prototype.createContext=function(l,v){var E;if(tK.PREFER_ENV>=iI.WEBGL2&&(E=l.getContext("webgl2",v)),E)this.webGLVersion=2;else if(this.webGLVersion=1,!(E=l.getContext("webgl",v)||l.getContext("experimental-webgl",v)))throw Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=E,this.getExtensions(),this.gl},r.prototype.getExtensions=function(){var l=this.gl;1===this.webGLVersion?Object.assign(this.extensions,{drawBuffers:l.getExtension("WEBGL_draw_buffers"),depthTexture:l.getExtension("WEBGL_depth_texture"),loseContext:l.getExtension("WEBGL_lose_context"),vertexArrayObject:l.getExtension("OES_vertex_array_object")||l.getExtension("MOZ_OES_vertex_array_object")||l.getExtension("WEBKIT_OES_vertex_array_object"),anisotropicFiltering:l.getExtension("EXT_texture_filter_anisotropic"),uint32ElementIndex:l.getExtension("OES_element_index_uint"),floatTexture:l.getExtension("OES_texture_float"),floatTextureLinear:l.getExtension("OES_texture_float_linear"),textureHalfFloat:l.getExtension("OES_texture_half_float"),textureHalfFloatLinear:l.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,{anisotropicFiltering:l.getExtension("EXT_texture_filter_anisotropic"),colorBufferFloat:l.getExtension("EXT_color_buffer_float"),floatTextureLinear:l.getExtension("OES_texture_float_linear")})},r.prototype.handleContextLost=function(l){l.preventDefault()},r.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},r.prototype.destroy=function(){var l=this.renderer.view;l.removeEventListener("webglcontextlost",this.handleContextLost),l.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},r.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},r.prototype.validateContext=function(l){l.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var v="WebGL2RenderingContext"in window&&l instanceof window.WebGL2RenderingContext||!!l.getExtension("OES_element_index_uint");this.supports.uint32Indices=v,v||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},r}(nF),Qs=function(l){this.framebuffer=l,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=ij.NONE,this.msaaBuffer=null,this.blitFramebuffer=null},n9=new iW,ot=function(l){function r(v){var E=l.call(this,v)||this;return E.managedFramebuffers=[],E.unknownFramebuffer=new nB(10,10),E.msaaSamples=null,E}return z(r,l),r.prototype.contextChange=function(){var l=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new iW,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var v=this.renderer.context.extensions.drawBuffers,E=this.renderer.context.extensions.depthTexture;tK.PREFER_ENV===iI.WEBGL_LEGACY&&(v=null,E=null),v?l.drawBuffers=function(l){return v.drawBuffersWEBGL(l)}:(this.hasMRT=!1,l.drawBuffers=function(){}),E||(this.writeDepthTexture=!1)}else this.msaaSamples=l.getInternalformatParameter(l.RENDERBUFFER,l.RGBA8,l.SAMPLES)},r.prototype.bind=function(l,v){var E=this.gl;if(l){var C=l.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(l);this.current!==l&&(this.current=l,E.bindFramebuffer(E.FRAMEBUFFER,C.framebuffer)),C.dirtyId!==l.dirtyId&&(C.dirtyId=l.dirtyId,C.dirtyFormat!==l.dirtyFormat?(C.dirtyFormat=l.dirtyFormat,this.updateFramebuffer(l)):C.dirtySize!==l.dirtySize&&(C.dirtySize=l.dirtySize,this.resizeFramebuffer(l)));for(var M=0;M<l.colorTextures.length;M++){var L=l.colorTextures[M];this.renderer.texture.unbind(L.parentTextureArray||L)}l.depthTexture&&this.renderer.texture.unbind(l.depthTexture),v?this.setViewport(v.x,v.y,v.width,v.height):this.setViewport(0,0,l.width,l.height)}else this.current&&(this.current=null,E.bindFramebuffer(E.FRAMEBUFFER,null)),v?this.setViewport(v.x,v.y,v.width,v.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},r.prototype.setViewport=function(l,v,E,C){var M=this.viewport;(M.width!==E||M.height!==C||M.x!==l||M.y!==v)&&(M.x=l,M.y=v,M.width=E,M.height=C,this.gl.viewport(l,v,E,C))},Object.defineProperty(r.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),r.prototype.clear=function(l,v,E,C,M){void 0===M&&(M=iP.COLOR|iP.DEPTH);var L=this.gl;L.clearColor(l,v,E,C),L.clear(M)},r.prototype.initFramebuffer=function(l){var v=this.gl,E=new Qs(v.createFramebuffer());return E.multisample=this.detectSamples(l.multisample),l.glFramebuffers[this.CONTEXT_UID]=E,this.managedFramebuffers.push(l),l.disposeRunner.add(this),E},r.prototype.resizeFramebuffer=function(l){var v=this.gl,E=l.glFramebuffers[this.CONTEXT_UID];E.stencil&&(v.bindRenderbuffer(v.RENDERBUFFER,E.stencil),v.renderbufferStorage(v.RENDERBUFFER,v.DEPTH_STENCIL,l.width,l.height));for(var C=l.colorTextures,M=0;M<C.length;M++)this.renderer.texture.bind(C[M],0);l.depthTexture&&this.renderer.texture.bind(l.depthTexture,0)},r.prototype.updateFramebuffer=function(l){var v=this.gl,E=l.glFramebuffers[this.CONTEXT_UID],C=l.colorTextures.length;v.drawBuffers||(C=Math.min(C,1)),E.multisample>1&&(E.msaaBuffer=v.createRenderbuffer(),v.bindRenderbuffer(v.RENDERBUFFER,E.msaaBuffer),v.renderbufferStorageMultisample(v.RENDERBUFFER,E.multisample,v.RGBA8,l.width,l.height),v.framebufferRenderbuffer(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.RENDERBUFFER,E.msaaBuffer));for(var M=[],L=0;L<C;L++)if(!(0===L&&E.multisample>1)){var U=l.colorTextures[L],B=U.parentTextureArray||U;this.renderer.texture.bind(B,0),v.framebufferTexture2D(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0+L,U.target,B._glTextures[this.CONTEXT_UID].texture,0),M.push(v.COLOR_ATTACHMENT0+L)}if(M.length>1&&v.drawBuffers(M),l.depthTexture&&this.writeDepthTexture){var k=l.depthTexture;this.renderer.texture.bind(k,0),v.framebufferTexture2D(v.FRAMEBUFFER,v.DEPTH_ATTACHMENT,v.TEXTURE_2D,k._glTextures[this.CONTEXT_UID].texture,0)}!E.stencil&&(l.stencil||l.depth)&&(E.stencil=v.createRenderbuffer(),v.bindRenderbuffer(v.RENDERBUFFER,E.stencil),v.renderbufferStorage(v.RENDERBUFFER,v.DEPTH_STENCIL,l.width,l.height),l.depthTexture||v.framebufferRenderbuffer(v.FRAMEBUFFER,v.DEPTH_STENCIL_ATTACHMENT,v.RENDERBUFFER,E.stencil))},r.prototype.detectSamples=function(l){var v=this.msaaSamples,E=ij.NONE;if(l<=1||null===v)return E;for(var C=0;C<v.length;C++)if(v[C]<=l){E=v[C];break}return 1===E&&(E=ij.NONE),E},r.prototype.blit=function(l,v,E){var C=this.current,M=this.renderer,L=this.gl,U=this.CONTEXT_UID;if(2===M.context.webGLVersion&&C){var B=C.glFramebuffers[U];if(B){if(!l){if(B.multisample<=1)return;B.blitFramebuffer||(B.blitFramebuffer=new nB(C.width,C.height),B.blitFramebuffer.addColorTexture(0,C.colorTextures[0])),(l=B.blitFramebuffer).width=C.width,l.height=C.height}v||((v=n9).width=C.width,v.height=C.height),E||(E=v);var k=v.width===E.width&&v.height===E.height;this.bind(l),L.bindFramebuffer(L.READ_FRAMEBUFFER,B.framebuffer),L.blitFramebuffer(v.x,v.y,v.width,v.height,E.x,E.y,E.width,E.height,L.COLOR_BUFFER_BIT,k?L.NEAREST:L.LINEAR)}}},r.prototype.disposeFramebuffer=function(l,v){var E=l.glFramebuffers[this.CONTEXT_UID],C=this.gl;if(E){delete l.glFramebuffers[this.CONTEXT_UID];var M=this.managedFramebuffers.indexOf(l);M>=0&&this.managedFramebuffers.splice(M,1),l.disposeRunner.remove(this),v||(C.deleteFramebuffer(E.framebuffer),E.stencil&&C.deleteRenderbuffer(E.stencil))}},r.prototype.disposeAll=function(l){var v=this.managedFramebuffers;this.managedFramebuffers=[];for(var E=0;E<v.length;E++)this.disposeFramebuffer(v[E],l)},r.prototype.forceStencil=function(){var l=this.current;if(l){var v=l.glFramebuffers[this.CONTEXT_UID];if(!(!v||v.stencil)){l.enableStencil();var E=l.width,C=l.height,M=this.gl,L=M.createRenderbuffer();M.bindRenderbuffer(M.RENDERBUFFER,L),M.renderbufferStorage(M.RENDERBUFFER,M.DEPTH_STENCIL,E,C),v.stencil=L,M.framebufferRenderbuffer(M.FRAMEBUFFER,M.DEPTH_STENCIL_ATTACHMENT,M.RENDERBUFFER,L)}}},r.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new iW},r}(nF),Ic=function(l){this.buffer=l||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},oe={5126:4,5123:2,5121:1},or=function(l){function r(v){var E=l.call(this,v)||this;return E._activeGeometry=null,E._activeVao=null,E.hasVao=!0,E.hasInstance=!0,E.canUseUInt32ElementIndex=!1,E.managedGeometries={},E.managedBuffers={},E}return z(r,l),r.prototype.contextChange=function(){this.disposeAll(!0);var l=this.gl=this.renderer.gl,v=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,!l.createVertexArray){var E=this.renderer.context.extensions.vertexArrayObject;tK.PREFER_ENV===iI.WEBGL_LEGACY&&(E=null),E?(l.createVertexArray=function(){return E.createVertexArrayOES()},l.bindVertexArray=function(l){return E.bindVertexArrayOES(l)},l.deleteVertexArray=function(l){return E.deleteVertexArrayOES(l)}):(this.hasVao=!1,l.createVertexArray=function(){return null},l.bindVertexArray=function(){return null},l.deleteVertexArray=function(){return null})}if(!l.vertexAttribDivisor){var C=l.getExtension("ANGLE_instanced_arrays");C?(l.vertexAttribDivisor=function(l,v){return C.vertexAttribDivisorANGLE(l,v)},l.drawElementsInstanced=function(l,v,E,M,L){return C.drawElementsInstancedANGLE(l,v,E,M,L)},l.drawArraysInstanced=function(l,v,E,M){return C.drawArraysInstancedANGLE(l,v,E,M)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===v.webGLVersion||!!v.extensions.uint32ElementIndex},r.prototype.bind=function(l,v){v=v||this.renderer.shader.shader;var E=this.gl,C=l.glVertexArrayObjects[this.CONTEXT_UID];C||(this.managedGeometries[l.id]=l,l.disposeRunner.add(this),l.glVertexArrayObjects[this.CONTEXT_UID]=C={});var M=C[v.program.id]||this.initGeometryVao(l,v.program);this._activeGeometry=l,this._activeVao!==M&&(this._activeVao=M,this.hasVao?E.bindVertexArray(M):this.activateVao(l,v.program)),this.updateBuffers()},r.prototype.reset=function(){this.unbind()},r.prototype.updateBuffers=function(){for(var l=this._activeGeometry,v=this.gl,E=0;E<l.buffers.length;E++){var C=l.buffers[E],M=C._glBuffers[this.CONTEXT_UID];if(C._updateID!==M.updateID){M.updateID=C._updateID;var L=C.index?v.ELEMENT_ARRAY_BUFFER:v.ARRAY_BUFFER;if(v.bindBuffer(L,M.buffer),this._boundBuffer=M,M.byteLength>=C.data.byteLength)v.bufferSubData(L,0,C.data);else{var U=C.static?v.STATIC_DRAW:v.DYNAMIC_DRAW;M.byteLength=C.data.byteLength,v.bufferData(L,C.data,U)}}}},r.prototype.checkCompatibility=function(l,v){var E=l.attributes,C=v.attributeData;for(var M in C)if(!E[M])throw Error('shader and geometry incompatible, geometry missing the "'+M+'" attribute')},r.prototype.getSignature=function(l,v){var E=l.attributes,C=v.attributeData,M=["g",l.id];for(var L in E)C[L]&&M.push(L);return M.join("-")},r.prototype.initGeometryVao=function(l,v){this.checkCompatibility(l,v);var E=this.gl,C=this.CONTEXT_UID,M=this.getSignature(l,v),L=l.glVertexArrayObjects[this.CONTEXT_UID],U=L[M];if(U)return L[v.id]=U,U;var B=l.buffers,k=l.attributes,j={},X={};for(var G in B)j[G]=0,X[G]=0;for(var G in k)!k[G].size&&v.attributeData[G]?k[G].size=v.attributeData[G].size:k[G].size||console.warn("PIXI Geometry attribute '"+G+"' size cannot be determined (likely the bound shader does not have the attribute)"),j[k[G].buffer]+=k[G].size*oe[k[G].type];for(var G in k){var H=k[G],Y=H.size;void 0===H.stride&&(j[H.buffer]===Y*oe[H.type]?H.stride=0:H.stride=j[H.buffer]),void 0===H.start&&(H.start=X[H.buffer],X[H.buffer]+=Y*oe[H.type])}U=E.createVertexArray(),E.bindVertexArray(U);for(var W=0;W<B.length;W++){var q=B[W];q._glBuffers[C]||(q._glBuffers[C]=new Ic(E.createBuffer()),this.managedBuffers[q.id]=q,q.disposeRunner.add(this)),q._glBuffers[C].refCount++}return this.activateVao(l,v),this._activeVao=U,L[v.id]=U,L[M]=U,U},r.prototype.disposeBuffer=function(l,v){if(this.managedBuffers[l.id]){delete this.managedBuffers[l.id];var E=l._glBuffers[this.CONTEXT_UID],C=this.gl;l.disposeRunner.remove(this),E&&(v||C.deleteBuffer(E.buffer),delete l._glBuffers[this.CONTEXT_UID])}},r.prototype.disposeGeometry=function(l,v){if(this.managedGeometries[l.id]){delete this.managedGeometries[l.id];var E=l.glVertexArrayObjects[this.CONTEXT_UID],C=this.gl,M=l.buffers;if(l.disposeRunner.remove(this),E){for(var L=0;L<M.length;L++){var U=M[L]._glBuffers[this.CONTEXT_UID];U.refCount--,0!==U.refCount||v||this.disposeBuffer(M[L],v)}if(!v){for(var B in E)if("g"===B[0]){var k=E[B];this._activeVao===k&&this.unbind(),C.deleteVertexArray(k)}}delete l.glVertexArrayObjects[this.CONTEXT_UID]}}},r.prototype.disposeAll=function(l){for(var v=Object.keys(this.managedGeometries),E=0;E<v.length;E++)this.disposeGeometry(this.managedGeometries[v[E]],l);v=Object.keys(this.managedBuffers);for(var E=0;E<v.length;E++)this.disposeBuffer(this.managedBuffers[v[E]],l)},r.prototype.activateVao=function(l,v){var E=this.gl,C=this.CONTEXT_UID,M=l.buffers,L=l.attributes;l.indexBuffer&&E.bindBuffer(E.ELEMENT_ARRAY_BUFFER,l.indexBuffer._glBuffers[C].buffer);var U=null;for(var B in L){var k=L[B],j=M[k.buffer]._glBuffers[C];if(v.attributeData[B]){U!==j&&(E.bindBuffer(E.ARRAY_BUFFER,j.buffer),U=j);var X=v.attributeData[B].location;if(E.enableVertexAttribArray(X),E.vertexAttribPointer(X,k.size,k.type||E.FLOAT,k.normalized,k.stride,k.start),k.instance){if(this.hasInstance)E.vertexAttribDivisor(X,1);else throw Error("geometry error, GPU Instancing is not supported on this device")}}}},r.prototype.draw=function(l,v,E,C){var M=this.gl,L=this._activeGeometry;if(L.indexBuffer){var U=L.indexBuffer.data.BYTES_PER_ELEMENT,B=2===U?M.UNSIGNED_SHORT:M.UNSIGNED_INT;2===U||4===U&&this.canUseUInt32ElementIndex?L.instanced?M.drawElementsInstanced(l,v||L.indexBuffer.data.length,B,(E||0)*U,C||1):M.drawElements(l,v||L.indexBuffer.data.length,B,(E||0)*U):console.warn("unsupported index buffer type: uint32")}else L.instanced?M.drawArraysInstanced(l,E,v||L.getSize(),C||1):M.drawArrays(l,E,v||L.getSize());return this},r.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},r}(nF),oi=function(){function i(l){void 0===l&&(l=null),this.type=ik.NONE,this.autoDetect=!0,this.maskObject=l||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}return i.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=ik.NONE,this.autoDetect=!0),this._target=null},i.prototype.copyCountersOrReset=function(l){l?(this._stencilCounter=l._stencilCounter,this._scissorCounter=l._scissorCounter,this._scissorRect=l._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},i}();function fo(l,v,E){var C=l.createShader(v);return l.shaderSource(C,E),l.compileShader(C),C}function ih(l,v,E,C){var M=fo(l,l.VERTEX_SHADER,v),L=fo(l,l.FRAGMENT_SHADER,E),U=l.createProgram();if(l.attachShader(U,M),l.attachShader(U,L),C)for(var B in C)l.bindAttribLocation(U,C[B],B);return l.linkProgram(U),l.getProgramParameter(U,l.LINK_STATUS)||(l.getShaderParameter(M,l.COMPILE_STATUS)||(console.warn(v),console.error(l.getShaderInfoLog(M))),l.getShaderParameter(L,l.COMPILE_STATUS)||(console.warn(E),console.error(l.getShaderInfoLog(L))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",l.getProgramParameter(U,l.VALIDATE_STATUS)),console.error("gl.getError()",l.getError()),""!==l.getProgramInfoLog(U)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",l.getProgramInfoLog(U)),l.deleteProgram(U),U=null),l.deleteShader(M),l.deleteShader(L),U}function Ni(l){for(var v=Array(l),E=0;E<v.length;E++)v[E]=!1;return v}function nh(l,v){switch(l){case"float":case"int":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*v);case"vec3":return new Float32Array(3*v);case"vec4":return new Float32Array(4*v);case"ivec2":return new Int32Array(2*v);case"ivec3":return new Int32Array(3*v);case"ivec4":return new Int32Array(4*v);case"bool":return!1;case"bvec2":return Ni(2*v);case"bvec3":return Ni(3*v);case"bvec4":return Ni(4*v);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var on={},oo=on;function oh(){if(oo===on||oo&&oo.isContextLost()){var l=document.createElement("canvas"),v=void 0;tK.PREFER_ENV>=iI.WEBGL2&&(v=l.getContext("webgl2",{})),v||((v=l.getContext("webgl",{})||l.getContext("experimental-webgl",{}))?v.getExtension("WEBGL_draw_buffers"):v=null),oo=v}return oo}function co(l,v,E){if("precision"!==l.substring(0,9)){var C=v;return v===iB.HIGH&&E!==iB.HIGH&&(C=iB.MEDIUM),"precision "+C+` float;
`+l}return E!==iB.HIGH&&"precision highp"===l.substring(0,15)?l.replace("precision highp","precision mediump"):l}var os={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1},ou=null,ol={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function vo(l,v){if(!ou){var E=Object.keys(ol);ou={};for(var C=0;C<E.length;++C){var M=E[C];ou[l[M]]=ol[M]}}return ou[v]}var oc=[{test:function(l){return"float"===l.type&&1===l.size},code:function(l){return`
            if(uv["`+l+'"] !== ud["'+l+`"].value)
            {
                ud["`+l+'"].value = uv["'+l+`"]
                gl.uniform1f(ud["`+l+'"].location, uv["'+l+`"])
            }
            `}},{test:function(l){return("sampler2D"===l.type||"samplerCube"===l.type||"sampler2DArray"===l.type)&&1===l.size&&!l.isArray},code:function(l){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+l+`"], t);

            if(ud["`+l+`"].value !== t)
            {
                ud["`+l+`"].value = t;
                gl.uniform1i(ud["`+l+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(l,v){return"mat3"===l.type&&1===l.size&&void 0!==v.a},code:function(l){return`
            gl.uniformMatrix3fv(ud["`+l+'"].location, false, uv["'+l+`"].toArray(true));
            `}},{test:function(l,v){return"vec2"===l.type&&1===l.size&&void 0!==v.x},code:function(l){return`
                cv = ud["`+l+`"].value;
                v = uv["`+l+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+l+`"].location, v.x, v.y);
                }`}},{test:function(l){return"vec2"===l.type&&1===l.size},code:function(l){return`
                cv = ud["`+l+`"].value;
                v = uv["`+l+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+l+`"].location, v[0], v[1]);
                }
            `}},{test:function(l,v){return"vec4"===l.type&&1===l.size&&void 0!==v.width},code:function(l){return`
                cv = ud["`+l+`"].value;
                v = uv["`+l+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+l+`"].location, v.x, v.y, v.width, v.height)
                }`}},{test:function(l){return"vec4"===l.type&&1===l.size},code:function(l){return`
                cv = ud["`+l+`"].value;
                v = uv["`+l+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+l+`"].location, v[0], v[1], v[2], v[3])
                }`}}],op={float:`
    if(cv !== v)
    {
        cv.v = v;
        gl.uniform1f(location, v)
    }`,vec2:`
    if(cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},od={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"},of=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function sh(l,v){if(0===l)throw Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var E=v.createShader(v.FRAGMENT_SHADER);;){var C=of.replace(/%forloop%/gi,function(l){for(var v="",E=0;E<l;++E)E>0&&(v+=`
else `),E<l-1&&(v+="if(test == "+E+".0){}");return v}(l));if(v.shaderSource(E,C),v.compileShader(E),v.getShaderParameter(E,v.COMPILE_STATUS))break;l=l/2|0}return l}var oy=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,om=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,og=0,ov={},o_=function(){function i(l,v,E){void 0===E&&(E="pixi-shader"),this.id=og++,this.vertexSrc=l||i.defaultVertexSrc,this.fragmentSrc=v||i.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(ov[E=E.replace(/\s+/g,"-")]?(ov[E]++,E+="-"+ov[E]):ov[E]=1,this.vertexSrc="#define SHADER_NAME "+E+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+E+`
`+this.fragmentSrc,this.vertexSrc=co(this.vertexSrc,tK.PRECISION_VERTEX,iB.HIGH),this.fragmentSrc=co(this.fragmentSrc,tK.PRECISION_FRAGMENT,function(){if(!sD){sD=iB.MEDIUM;var l=oh();l&&l.getShaderPrecisionFormat&&(sD=l.getShaderPrecisionFormat(l.FRAGMENT_SHADER,l.HIGH_FLOAT).precision?iB.HIGH:iB.MEDIUM)}return sD}())),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}return i.prototype.extractData=function(l,v){var E=oh();if(E){var C=ih(E,l,v);this.attributeData=this.getAttributeData(C,E),this.uniformData=this.getUniformData(C,E),E.deleteProgram(C)}else this.uniformData={},this.attributeData={}},i.prototype.getAttributeData=function(l,v){for(var E={},C=[],M=v.getProgramParameter(l,v.ACTIVE_ATTRIBUTES),L=0;L<M;L++){var U=v.getActiveAttrib(l,L),B=vo(v,U.type),k={type:B,name:U.name,size:os[B],location:0};E[U.name]=k,C.push(k)}C.sort(function(l,v){return l.name>v.name?1:-1});for(var L=0;L<C.length;L++)C[L].location=L;return E},i.prototype.getUniformData=function(l,v){for(var E={},C=v.getProgramParameter(l,v.ACTIVE_UNIFORMS),M=0;M<C;M++){var L=v.getActiveUniform(l,M),U=L.name.replace(/\[.*?\]$/,""),B=L.name.match(/\[.*?\]$/),k=vo(v,L.type);E[U]={type:k,size:L.size,isArray:B,value:nh(k,L.size)}}return E},Object.defineProperty(i,"defaultVertexSrc",{get:function(){return om},enumerable:!1,configurable:!0}),Object.defineProperty(i,"defaultFragmentSrc",{get:function(){return oy},enumerable:!1,configurable:!0}),i.from=function(l,v,E){var C=l+v,M=r6[C];return M||(r6[C]=M=new i(l,v,E)),M},i}(),ob=function(){function i(l,v){for(var E in this.program=l,v?v instanceof n2?this.uniformGroup=v:this.uniformGroup=new n2(v):this.uniformGroup=new n2({}),l.uniformData)this.uniformGroup.uniforms[E]instanceof Array&&(this.uniformGroup.uniforms[E]=new Float32Array(this.uniformGroup.uniforms[E]))}return i.prototype.checkUniformExists=function(l,v){if(v.uniforms[l])return!0;for(var E in v.uniforms){var C=v.uniforms[E];if(C.group&&this.checkUniformExists(l,C))return!0}return!1},i.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(i.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),i.from=function(l,v,E){var C=o_.from(l,v);return new i(C,E)},i}(),ox=function(){function i(){this.data=0,this.blendMode=iS.NORMAL,this.polygonOffset=0,this.blend=!0}return Object.defineProperty(i.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(l){!!(1&this.data)!==l&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(l){!!(2&this.data)!==l&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(l){!!(4&this.data)!==l&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(l){!!(8&this.data)!==l&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(l){!!(16&this.data)!==l&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"blendMode",{get:function(){return this._blendMode},set:function(l){this.blend=l!==iS.NONE,this._blendMode=l},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(l){this.offsets=!!l,this._polygonOffset=l},enumerable:!1,configurable:!0}),i.for2d=function(){var l=new i;return l.depthTest=!1,l.blend=!0,l},i}(),oT=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,oE=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,oI=function(l){function r(v,E,C){var M=this,L=o_.from(v||r.defaultVertexSrc,E||r.defaultFragmentSrc);return(M=l.call(this,L,C)||this).padding=0,M.resolution=tK.FILTER_RESOLUTION,M.enabled=!0,M.autoFit=!0,M.legacy=!!M.program.attributeData.aTextureCoord,M.state=new ox,M}return z(r,l),r.prototype.apply=function(l,v,E,C,M){l.applyFilter(this,v,E,C)},Object.defineProperty(r.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(l){this.state.blendMode=l},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultVertexSrc",{get:function(){return oT},enumerable:!1,configurable:!0}),Object.defineProperty(r,"defaultFragmentSrc",{get:function(){return oE},enumerable:!1,configurable:!0}),r}(ob),ow=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,oP=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,oS=new i0,oA=function(){function i(l,v){this._texture=l,this.mapCoord=new i0,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof v>"u"?.5:v,this.isSimple=!1}return Object.defineProperty(i.prototype,"texture",{get:function(){return this._texture},set:function(l){this._texture=l,this._textureID=-1},enumerable:!1,configurable:!0}),i.prototype.multiplyUvs=function(l,v){void 0===v&&(v=l);for(var E=this.mapCoord,C=0;C<l.length;C+=2){var M=l[C],L=l[C+1];v[C]=M*E.a+L*E.c+E.tx,v[C+1]=M*E.b+L*E.d+E.ty}return v},i.prototype.update=function(l){var v=this._texture;if(!v||!v.valid||!l&&this._textureID===v._updateID)return!1;this._textureID=v._updateID,this._updateID++;var E=v._uvs;this.mapCoord.set(E.x1-E.x0,E.y1-E.y0,E.x3-E.x0,E.y3-E.y0,E.x0,E.y0);var C=v.orig,M=v.trim;M&&(oS.set(C.width/M.width,0,0,C.height/M.height,-M.x/M.width,-M.y/M.height),this.mapCoord.append(oS));var L=v.baseTexture,U=this.uClampFrame,B=this.clampMargin/L.resolution,k=this.clampOffset;return U[0]=(v._frame.x+B+k)/L.width,U[1]=(v._frame.y+B+k)/L.height,U[2]=(v._frame.x+v._frame.width-B+k)/L.width,U[3]=(v._frame.y+v._frame.height-B+k)/L.height,this.uClampOffset[0]=k/L.realWidth,this.uClampOffset[1]=k/L.realHeight,this.isSimple=v._frame.width===L.width&&v._frame.height===L.height&&0===v.rotate,!0},i}(),oO=function(l){function r(v){var E=this,C=new i0;return E=l.call(this,ow,oP)||this,v.renderable=!1,E.maskSprite=v,E.maskMatrix=C,E}return z(r,l),r.prototype.apply=function(l,v,E,C){var M=this.maskSprite,L=M._texture;L.valid&&(L.uvMatrix||(L.uvMatrix=new oA(L,0)),L.uvMatrix.update(),this.uniforms.npmAlpha=L.baseTexture.alphaMode?0:1,this.uniforms.mask=L,this.uniforms.otherMatrix=l.calculateSpriteMatrix(this.maskMatrix,M).prepend(L.uvMatrix.mapCoord),this.uniforms.alpha=M.worldAlpha,this.uniforms.maskClamp=L.uvMatrix.uClampFrame,l.applyFilter(this,v,E,C))},r}(oI),oC=function(l){function r(v){var E=l.call(this,v)||this;return E.enableScissor=!1,E.alphaMaskPool=[],E.maskDataPool=[],E.maskStack=[],E.alphaMaskIndex=0,E}return z(r,l),r.prototype.setMaskStack=function(l){this.maskStack=l,this.renderer.scissor.setMaskStack(l),this.renderer.stencil.setMaskStack(l)},r.prototype.push=function(l,v){var E=v;if(!E.isMaskData){var C=this.maskDataPool.pop()||new oi;C.pooled=!0,C.maskObject=v,E=C}switch(E.autoDetect&&this.detect(E),E.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),E._target=l,E.type){case ik.SCISSOR:this.maskStack.push(E),this.renderer.scissor.push(E);break;case ik.STENCIL:this.maskStack.push(E),this.renderer.stencil.push(E);break;case ik.SPRITE:E.copyCountersOrReset(null),this.pushSpriteMask(E),this.maskStack.push(E)}},r.prototype.pop=function(l){var v=this.maskStack.pop();if(!(!v||v._target!==l)){switch(v.type){case ik.SCISSOR:this.renderer.scissor.pop();break;case ik.STENCIL:this.renderer.stencil.pop(v.maskObject);break;case ik.SPRITE:this.popSpriteMask()}v.reset(),v.pooled&&this.maskDataPool.push(v)}},r.prototype.detect=function(l){var v=l.maskObject;if(v.isSprite){l.type=ik.SPRITE;return}if(l.type=ik.STENCIL,this.enableScissor&&v.isFastRect&&v.isFastRect()){var E=v.worldTransform,C=Math.atan2(E.b,E.a),M=Math.atan2(E.d,E.c);M=((M=Math.round(M*(180/Math.PI)*100)-(C=Math.round(C*(180/Math.PI)*100)))%18e3+18e3)%18e3,0==(C=(C%9e3+9e3)%9e3)&&9e3===M&&(l.type=ik.SCISSOR)}},r.prototype.pushSpriteMask=function(l){var v=l.maskObject,E=l._target,C=this.alphaMaskPool[this.alphaMaskIndex];C||(C=this.alphaMaskPool[this.alphaMaskIndex]=[new oO(v)]),C[0].resolution=this.renderer.resolution,C[0].maskSprite=v;var M=E.filterArea;E.filterArea=v.getBounds(!0),this.renderer.filter.push(E,C),E.filterArea=M,this.alphaMaskIndex++},r.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},r}(nF),oR=function(l){function r(v){var E=l.call(this,v)||this;return E.maskStack=[],E.glConst=0,E}return z(r,l),r.prototype.getStackLength=function(){return this.maskStack.length},r.prototype.setMaskStack=function(l){var v=this.renderer.gl,E=this.getStackLength();this.maskStack=l;var C=this.getStackLength();C!==E&&(0===C?v.disable(this.glConst):(v.enable(this.glConst),this._useCurrent()))},r.prototype._useCurrent=function(){},r.prototype.destroy=function(){l.prototype.destroy.call(this),this.maskStack=null},r}(nF),oM=function(l){function r(v){var E=l.call(this,v)||this;return E.glConst=WebGLRenderingContext.SCISSOR_TEST,E}return z(r,l),r.prototype.getStackLength=function(){var l=this.maskStack[this.maskStack.length-1];return l?l._scissorCounter:0},r.prototype.push=function(l){var v=l.maskObject;v.renderable=!0;var E=l._scissorRect,C=v.getBounds(!0),M=this.renderer.gl;v.renderable=!1,E?C.fit(E):M.enable(M.SCISSOR_TEST),l._scissorCounter++,l._scissorRect=C,this._useCurrent()},r.prototype.pop=function(){var l=this.renderer.gl;this.getStackLength()>0?this._useCurrent():l.disable(l.SCISSOR_TEST)},r.prototype._useCurrent=function(){var l=this.maskStack[this.maskStack.length-1]._scissorRect,v=this.renderer.renderTexture.current,E=this.renderer.projection,C=E.transform,M=E.sourceFrame,L=E.destinationFrame,U=v?v.resolution:this.renderer.resolution,B=(l.x-M.x)*U+L.x,k=(l.y-M.y)*U+L.y,j=l.width*U,X=l.height*U;C&&(B+=C.tx*U,k+=C.ty*U),v||(k=this.renderer.height-X-k),this.renderer.gl.scissor(B,k,j,X)},r}(oR),oD=function(l){function r(v){var E=l.call(this,v)||this;return E.glConst=WebGLRenderingContext.STENCIL_TEST,E}return z(r,l),r.prototype.getStackLength=function(){var l=this.maskStack[this.maskStack.length-1];return l?l._stencilCounter:0},r.prototype.push=function(l){var v=l.maskObject,E=this.renderer.gl,C=l._stencilCounter;0===C&&(this.renderer.framebuffer.forceStencil(),E.enable(E.STENCIL_TEST)),l._stencilCounter++,E.colorMask(!1,!1,!1,!1),E.stencilFunc(E.EQUAL,C,this._getBitwiseMask()),E.stencilOp(E.KEEP,E.KEEP,E.INCR),v.renderable=!0,v.render(this.renderer),this.renderer.batch.flush(),v.renderable=!1,this._useCurrent()},r.prototype.pop=function(l){var v=this.renderer.gl;0===this.getStackLength()?(v.disable(v.STENCIL_TEST),v.clear(v.STENCIL_BUFFER_BIT),v.clearStencil(0)):(v.colorMask(!1,!1,!1,!1),v.stencilOp(v.KEEP,v.KEEP,v.DECR),l.renderable=!0,l.render(this.renderer),this.renderer.batch.flush(),l.renderable=!1,this._useCurrent())},r.prototype._useCurrent=function(){var l=this.renderer.gl;l.colorMask(!0,!0,!0,!0),l.stencilFunc(l.EQUAL,this.getStackLength(),this._getBitwiseMask()),l.stencilOp(l.KEEP,l.KEEP,l.KEEP)},r.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},r}(oR),oN=function(l){function r(v){var E=l.call(this,v)||this;return E.destinationFrame=null,E.sourceFrame=null,E.defaultFrame=null,E.projectionMatrix=new i0,E.transform=null,E}return z(r,l),r.prototype.update=function(l,v,E,C){this.destinationFrame=l||this.destinationFrame||this.defaultFrame,this.sourceFrame=v||this.sourceFrame||l,this.calculateProjection(this.destinationFrame,this.sourceFrame,E,C),this.transform&&this.projectionMatrix.append(this.transform);var M=this.renderer;M.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,M.globalUniforms.update(),M.shader.shader&&M.shader.syncUniformGroup(M.shader.shader.uniforms.globals)},r.prototype.calculateProjection=function(l,v,E,C){var M=this.projectionMatrix,L=C?-1:1;M.identity(),M.a=1/v.width*2,M.d=L*(1/v.height*2),M.tx=-1-v.x*M.a,M.ty=-L-v.y*M.d},r.prototype.setTransform=function(l){},r}(nF),oL=new iW,oF=new iW,oU=new iW,oB=function(l){function r(v){var E=l.call(this,v)||this;return E.clearColor=v._backgroundColorRgba,E.defaultMaskStack=[],E.current=null,E.sourceFrame=new iW,E.destinationFrame=new iW,E}return z(r,l),r.prototype.bind=function(l,v,E){void 0===l&&(l=null);var C,M,L,U=this.renderer;this.current=l,l?(L=(C=l.baseTexture).resolution,v||(oL.width=l.frame.width,oL.height=l.frame.height,v=oL),E||(oF.x=l.frame.x,oF.y=l.frame.y,oF.width=v.width,oF.height=v.height,E=oF),M=C.framebuffer):(L=U.resolution,v||(oL.width=U.screen.width,oL.height=U.screen.height,v=oL),E||((E=oL).width=v.width,E.height=v.height)),oU.x=E.x*L,oU.y=E.y*L,oU.width=E.width*L,oU.height=E.height*L,this.renderer.framebuffer.bind(M,oU),this.renderer.projection.update(E,v,L,!M),l?this.renderer.mask.setMaskStack(C.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(v),this.destinationFrame.copyFrom(E)},r.prototype.clear=function(l,v){l=this.current?l||this.current.baseTexture.clearColor:l||this.clearColor,this.renderer.framebuffer.clear(l[0],l[1],l[2],l[3],v)},r.prototype.resize=function(){this.bind(null)},r.prototype.reset=function(){this.bind(null)},r}(nF),ok=function(){function i(l,v){this.program=l,this.uniformData=v,this.uniformGroups={}}return i.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},i}(),oj=0,oX={textureCount:0},oG=function(l){function r(v){var E=l.call(this,v)||this;return E.destroyed=!1,E.systemCheck(),E.gl=null,E.shader=null,E.program=null,E.cache={},E.id=oj++,E}return z(r,l),r.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof sN)return sN;try{var l=Function("param1","param2","param3","return param1[param2] === param3;");sN=!0===l({a:"b"},"a","b")}catch{sN=!1}return sN}())throw Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},r.prototype.contextChange=function(l){this.gl=l,this.reset()},r.prototype.bind=function(l,v){l.uniforms.globals=this.renderer.globalUniforms;var E=l.program,C=E.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(l);return this.shader=l,this.program!==E&&(this.program=E,this.gl.useProgram(C.program)),v||(oX.textureCount=0,this.syncUniformGroup(l.uniformGroup,oX)),C},r.prototype.setUniforms=function(l){var v=this.shader.program,E=v.glPrograms[this.renderer.CONTEXT_UID];v.syncUniforms(E.uniformData,l,this.renderer)},r.prototype.syncUniformGroup=function(l,v){var E=this.getglProgram();l.static&&l.dirtyId===E.uniformGroups[l.id]||(E.uniformGroups[l.id]=l.dirtyId,this.syncUniforms(l,E,v))},r.prototype.syncUniforms=function(l,v,E){(l.syncUniforms[this.shader.program.id]||this.createSyncGroups(l))(v.uniformData,l.uniforms,this.renderer,E)},r.prototype.createSyncGroups=function(l){var v=this.getSignature(l,this.shader.program.uniformData);return this.cache[v]||(this.cache[v]=function(l,v){var E=[`
        var v = null;
        var cv = null
        var t = 0;
        var gl = renderer.gl
    `];for(var C in l.uniforms){var M=v[C];if(!M){l.uniforms[C].group&&E.push(`
                    renderer.shader.syncUniformGroup(uv["`+C+`"], syncData);
                `);continue}for(var L=l.uniforms[C],U=!1,B=0;B<oc.length;B++)if(oc[B].test(M,L)){E.push(oc[B].code(C,L)),U=!0;break}if(!U){var k=(1===M.size?op:od)[M.type].replace("location",'ud["'+C+'"].location');E.push(`
            cv = ud["`+C+`"].value;
            v = uv["`+C+`"];
            `+k+";")}}return Function("ud","uv","renderer","syncData",E.join(`
`))}(l,this.shader.program.uniformData)),l.syncUniforms[this.shader.program.id]=this.cache[v],l.syncUniforms[this.shader.program.id]},r.prototype.getSignature=function(l,v){var E=l.uniforms,C=[];for(var M in E)C.push(M),v[M]&&C.push(v[M].type);return C.join("-")},r.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},r.prototype.generateShader=function(l){var v=this.gl,E=l.program,C={};for(var M in E.attributeData)C[M]=E.attributeData[M].location;var L=ih(v,E.vertexSrc,E.fragmentSrc,C),U={};for(var M in E.uniformData){var B=E.uniformData[M];U[M]={location:v.getUniformLocation(L,M),value:nh(B.type,B.size)}}var k=new ok(L,U);return E.glPrograms[this.renderer.CONTEXT_UID]=k,k},r.prototype.reset=function(){this.program=null,this.shader=null},r.prototype.destroy=function(){this.destroyed=!0},r}(nF),oH=function(l){function r(v){var E=l.call(this,v)||this;return E.gl=null,E.stateId=0,E.polygonOffset=0,E.blendMode=iS.NONE,E._blendEq=!1,E.map=[],E.map[0]=E.setBlend,E.map[1]=E.setOffset,E.map[2]=E.setCullFace,E.map[3]=E.setDepthTest,E.map[4]=E.setFrontFace,E.checks=[],E.defaultState=new ox,E.defaultState.blend=!0,E}return z(r,l),r.prototype.contextChange=function(l){var v;this.gl=l,this.blendModes=(void 0===v&&(v=[]),v[iS.NORMAL]=[l.ONE,l.ONE_MINUS_SRC_ALPHA],v[iS.ADD]=[l.ONE,l.ONE],v[iS.MULTIPLY]=[l.DST_COLOR,l.ONE_MINUS_SRC_ALPHA,l.ONE,l.ONE_MINUS_SRC_ALPHA],v[iS.SCREEN]=[l.ONE,l.ONE_MINUS_SRC_COLOR,l.ONE,l.ONE_MINUS_SRC_ALPHA],v[iS.OVERLAY]=[l.ONE,l.ONE_MINUS_SRC_ALPHA],v[iS.DARKEN]=[l.ONE,l.ONE_MINUS_SRC_ALPHA],v[iS.LIGHTEN]=[l.ONE,l.ONE_MINUS_SRC_ALPHA],v[iS.COLOR_DODGE]=[l.ONE,l.ONE_MINUS_SRC_ALPHA],v[iS.COLOR_BURN]=[l.ONE,l.ONE_MINUS_SRC_ALPHA],v[iS.HARD_LIGHT]=[l.ONE,l.ONE_MINUS_SRC_ALPHA],v[iS.SOFT_LIGHT]=[l.ONE,l.ONE_MINUS_SRC_ALPHA],v[iS.DIFFERENCE]=[l.ONE,l.ONE_MINUS_SRC_ALPHA],v[iS.EXCLUSION]=[l.ONE,l.ONE_MINUS_SRC_ALPHA],v[iS.HUE]=[l.ONE,l.ONE_MINUS_SRC_ALPHA],v[iS.SATURATION]=[l.ONE,l.ONE_MINUS_SRC_ALPHA],v[iS.COLOR]=[l.ONE,l.ONE_MINUS_SRC_ALPHA],v[iS.LUMINOSITY]=[l.ONE,l.ONE_MINUS_SRC_ALPHA],v[iS.NONE]=[0,0],v[iS.NORMAL_NPM]=[l.SRC_ALPHA,l.ONE_MINUS_SRC_ALPHA,l.ONE,l.ONE_MINUS_SRC_ALPHA],v[iS.ADD_NPM]=[l.SRC_ALPHA,l.ONE,l.ONE,l.ONE],v[iS.SCREEN_NPM]=[l.SRC_ALPHA,l.ONE_MINUS_SRC_COLOR,l.ONE,l.ONE_MINUS_SRC_ALPHA],v[iS.SRC_IN]=[l.DST_ALPHA,l.ZERO],v[iS.SRC_OUT]=[l.ONE_MINUS_DST_ALPHA,l.ZERO],v[iS.SRC_ATOP]=[l.DST_ALPHA,l.ONE_MINUS_SRC_ALPHA],v[iS.DST_OVER]=[l.ONE_MINUS_DST_ALPHA,l.ONE],v[iS.DST_IN]=[l.ZERO,l.SRC_ALPHA],v[iS.DST_OUT]=[l.ZERO,l.ONE_MINUS_SRC_ALPHA],v[iS.DST_ATOP]=[l.ONE_MINUS_DST_ALPHA,l.SRC_ALPHA],v[iS.XOR]=[l.ONE_MINUS_DST_ALPHA,l.ONE_MINUS_SRC_ALPHA],v[iS.SUBTRACT]=[l.ONE,l.ONE,l.ONE,l.ONE,l.FUNC_REVERSE_SUBTRACT,l.FUNC_ADD],v),this.set(this.defaultState),this.reset()},r.prototype.set=function(l){if(l=l||this.defaultState,this.stateId!==l.data){for(var v=this.stateId^l.data,E=0;v;)1&v&&this.map[E].call(this,!!(l.data&1<<E)),v>>=1,E++;this.stateId=l.data}for(var E=0;E<this.checks.length;E++)this.checks[E](this,l)},r.prototype.forceState=function(l){l=l||this.defaultState;for(var v=0;v<this.map.length;v++)this.map[v].call(this,!!(l.data&1<<v));for(var v=0;v<this.checks.length;v++)this.checks[v](this,l);this.stateId=l.data},r.prototype.setBlend=function(l){this.updateCheck(r.checkBlendMode,l),this.gl[l?"enable":"disable"](this.gl.BLEND)},r.prototype.setOffset=function(l){this.updateCheck(r.checkPolygonOffset,l),this.gl[l?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},r.prototype.setDepthTest=function(l){this.gl[l?"enable":"disable"](this.gl.DEPTH_TEST)},r.prototype.setCullFace=function(l){this.gl[l?"enable":"disable"](this.gl.CULL_FACE)},r.prototype.setFrontFace=function(l){this.gl.frontFace(this.gl[l?"CW":"CCW"])},r.prototype.setBlendMode=function(l){if(l!==this.blendMode){this.blendMode=l;var v=this.blendModes[l],E=this.gl;2===v.length?E.blendFunc(v[0],v[1]):E.blendFuncSeparate(v[0],v[1],v[2],v[3]),6===v.length?(this._blendEq=!0,E.blendEquationSeparate(v[4],v[5])):this._blendEq&&(this._blendEq=!1,E.blendEquationSeparate(E.FUNC_ADD,E.FUNC_ADD))}},r.prototype.setPolygonOffset=function(l,v){this.gl.polygonOffset(l,v)},r.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},r.prototype.updateCheck=function(l,v){var E=this.checks.indexOf(l);v&&-1===E?this.checks.push(l):v||-1===E||this.checks.splice(E,1)},r.checkBlendMode=function(l,v){l.setBlendMode(v.blendMode)},r.checkPolygonOffset=function(l,v){l.setPolygonOffset(1,v.polygonOffset)},r}(nF),oz=function(l){function r(v){var E=l.call(this,v)||this;return E.count=0,E.checkCount=0,E.maxIdle=tK.GC_MAX_IDLE,E.checkCountMax=tK.GC_MAX_CHECK_COUNT,E.mode=tK.GC_MODE,E}return z(r,l),r.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==iU.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},r.prototype.run=function(){for(var l=this.renderer.texture,v=l.managedTextures,E=!1,C=0;C<v.length;C++){var M=v[C];!M.framebuffer&&this.count-M.touched>this.maxIdle&&(l.destroyTexture(M,!0),v[C]=null,E=!0)}if(E){for(var L=0,C=0;C<v.length;C++)null!==v[C]&&(v[L++]=v[C]);v.length=L}},r.prototype.unload=function(l){var v,E=this.renderer.texture;!(null===(v=l._texture)||void 0===v)&&v.framebuffer&&E.destroyTexture(l._texture);for(var C=l.children.length-1;C>=0;C--)this.unload(l.children[C])},r}(nF),$r=function(l){this.texture=l,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121},oY=function(l){function r(v){var E=l.call(this,v)||this;return E.boundTextures=[],E.currentLocation=-1,E.managedTextures=[],E._unknownBoundTextures=!1,E.unknownTexture=new nP,E}return z(r,l),r.prototype.contextChange=function(){var l=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var v=l.getParameter(l.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=v;for(var E=0;E<v;E++)this.boundTextures[E]=null;this.emptyTextures={};var C=new $r(l.createTexture());l.bindTexture(l.TEXTURE_2D,C.texture),l.texImage2D(l.TEXTURE_2D,0,l.RGBA,1,1,0,l.RGBA,l.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[l.TEXTURE_2D]=C,this.emptyTextures[l.TEXTURE_CUBE_MAP]=new $r(l.createTexture()),l.bindTexture(l.TEXTURE_CUBE_MAP,this.emptyTextures[l.TEXTURE_CUBE_MAP].texture);for(var E=0;E<6;E++)l.texImage2D(l.TEXTURE_CUBE_MAP_POSITIVE_X+E,0,l.RGBA,1,1,0,l.RGBA,l.UNSIGNED_BYTE,null);l.texParameteri(l.TEXTURE_CUBE_MAP,l.TEXTURE_MAG_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_CUBE_MAP,l.TEXTURE_MIN_FILTER,l.LINEAR);for(var E=0;E<this.boundTextures.length;E++)this.bind(null,E)},r.prototype.bind=function(l,v){void 0===v&&(v=0);var E=this.gl;if(l){if((l=l.castToBaseTexture()).parentTextureArray)return;if(l.valid){l.touched=this.renderer.textureGC.count;var C=l._glTextures[this.CONTEXT_UID]||this.initTexture(l);this.boundTextures[v]!==l&&(this.currentLocation!==v&&(this.currentLocation=v,E.activeTexture(E.TEXTURE0+v)),E.bindTexture(l.target,C.texture)),C.dirtyId!==l.dirtyId&&(this.currentLocation!==v&&(this.currentLocation=v,E.activeTexture(E.TEXTURE0+v)),this.updateTexture(l)),this.boundTextures[v]=l}}else this.currentLocation!==v&&(this.currentLocation=v,E.activeTexture(E.TEXTURE0+v)),E.bindTexture(E.TEXTURE_2D,this.emptyTextures[E.TEXTURE_2D].texture),this.boundTextures[v]=null},r.prototype.reset=function(){this._unknownBoundTextures=!0,this.currentLocation=-1;for(var l=0;l<this.boundTextures.length;l++)this.boundTextures[l]=this.unknownTexture},r.prototype.unbind=function(l){var v=this.gl,E=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var C=0;C<E.length;C++)E[C]===this.unknownTexture&&this.bind(null,C)}for(var C=0;C<E.length;C++)E[C]===l&&(this.currentLocation!==C&&(v.activeTexture(v.TEXTURE0+C),this.currentLocation=C),v.bindTexture(v.TEXTURE_2D,this.emptyTextures[l.target].texture),E[C]=null)},r.prototype.initTexture=function(l){var v=new $r(this.gl.createTexture());return v.dirtyId=-1,l._glTextures[this.CONTEXT_UID]=v,this.managedTextures.push(l),l.on("dispose",this.destroyTexture,this),v},r.prototype.initTextureType=function(l,v){if(v.internalFormat=l.format,v.type=l.type,2===this.webGLVersion){var E=this.renderer.gl;l.type===E.FLOAT&&l.format===E.RGBA&&(v.internalFormat=E.RGBA32F),l.type===iR.HALF_FLOAT&&(v.type=E.HALF_FLOAT),v.type===E.HALF_FLOAT&&l.format===E.RGBA&&(v.internalFormat=E.RGBA16F)}},r.prototype.updateTexture=function(l){var v=l._glTextures[this.CONTEXT_UID];if(v){var E=this.renderer;if(this.initTextureType(l,v),!(l.resource&&l.resource.upload(E,l,v))){var C=l.realWidth,M=l.realHeight,L=E.gl;(v.width!==C||v.height!==M||v.dirtyId<0)&&(v.width=C,v.height=M,L.texImage2D(l.target,0,v.internalFormat,C,M,0,l.format,v.type,null))}l.dirtyStyleId!==v.dirtyStyleId&&this.updateTextureStyle(l),v.dirtyId=l.dirtyId}},r.prototype.destroyTexture=function(l,v){var E=this.gl;if((l=l.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(l),E.deleteTexture(l._glTextures[this.CONTEXT_UID].texture),l.off("dispose",this.destroyTexture,this),delete l._glTextures[this.CONTEXT_UID],!v)){var C=this.managedTextures.indexOf(l);-1!==C&&me(this.managedTextures,C,1)}},r.prototype.updateTextureStyle=function(l){var v=l._glTextures[this.CONTEXT_UID];v&&(l.mipmap!==iN.POW2&&2===this.webGLVersion||l.isPowerOfTwo?v.mipmap=l.mipmap>=1:v.mipmap=!1,2===this.webGLVersion||l.isPowerOfTwo?v.wrapMode=l.wrapMode:v.wrapMode=iD.CLAMP,l.resource&&l.resource.style(this.renderer,l,v)||this.setStyle(l,v),v.dirtyStyleId=l.dirtyStyleId)},r.prototype.setStyle=function(l,v){var E=this.gl;if(v.mipmap&&E.generateMipmap(l.target),E.texParameteri(l.target,E.TEXTURE_WRAP_S,v.wrapMode),E.texParameteri(l.target,E.TEXTURE_WRAP_T,v.wrapMode),v.mipmap){E.texParameteri(l.target,E.TEXTURE_MIN_FILTER,l.scaleMode===iM.LINEAR?E.LINEAR_MIPMAP_LINEAR:E.NEAREST_MIPMAP_NEAREST);var C=this.renderer.context.extensions.anisotropicFiltering;if(C&&l.anisotropicLevel>0&&l.scaleMode===iM.LINEAR){var M=Math.min(l.anisotropicLevel,E.getParameter(C.MAX_TEXTURE_MAX_ANISOTROPY_EXT));E.texParameterf(l.target,C.TEXTURE_MAX_ANISOTROPY_EXT,M)}}else E.texParameteri(l.target,E.TEXTURE_MIN_FILTER,l.scaleMode===iM.LINEAR?E.LINEAR:E.NEAREST);E.texParameteri(l.target,E.TEXTURE_MAG_FILTER,l.scaleMode===iM.LINEAR?E.LINEAR:E.NEAREST)},r}(nF),oV=new i0,oW=function(l){function r(v,E){void 0===v&&(v=iw.UNKNOWN);var C=l.call(this)||this;return(E=Object.assign({},tK.RENDER_OPTIONS,E)).roundPixels&&(tK.ROUND_PIXELS=E.roundPixels,I("5.0.0","Renderer roundPixels option is deprecated, please use PIXI.settings.ROUND_PIXELS",2)),C.options=E,C.type=v,C.screen=new iW(0,0,E.width,E.height),C.view=E.view||document.createElement("canvas"),C.resolution=E.resolution||tK.RESOLUTION,C.transparent=E.transparent,C.autoDensity=E.autoDensity||E.autoResize||!1,C.preserveDrawingBuffer=E.preserveDrawingBuffer,C.clearBeforeRender=E.clearBeforeRender,C._backgroundColor=0,C._backgroundColorRgba=[0,0,0,0],C._backgroundColorString="#000000",C.backgroundColor=E.backgroundColor||C._backgroundColor,C._lastObjectRendered=null,C.plugins={},C}return z(r,l),r.prototype.initPlugins=function(l){for(var v in l)this.plugins[v]=new l[v](this)},Object.defineProperty(r.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),r.prototype.resize=function(l,v){this.screen.width=l,this.screen.height=v,this.view.width=l*this.resolution,this.view.height=v*this.resolution,this.autoDensity&&(this.view.style.width=l+"px",this.view.style.height=v+"px"),this.emit("resize",l,v)},r.prototype.generateTexture=function(l,v,E,C){0===(C=C||l.getLocalBounds(null,!0)).width&&(C.width=1),0===C.height&&(C.height=1);var M=nH.create({width:0|C.width,height:0|C.height,scaleMode:v,resolution:E});return oV.tx=-C.x,oV.ty=-C.y,this.render(l,M,!1,oV,!!l.parent),M},r.prototype.destroy=function(l){for(var v in this.plugins)this.plugins[v].destroy(),this.plugins[v]=null;l&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.plugins=null,this.type=iw.UNKNOWN,this.view=null,this.screen=null,this._tempDisplayObjectParent=null,this.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(r.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(l){this._backgroundColor=l,this._backgroundColorString=ta(l),xe(l,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),r}(tQ),oq=function(l){function r(v){var E=l.call(this,iw.WEBGL,v)||this;return v=E.options,E.gl=null,E.CONTEXT_UID=0,E.runners={destroy:new nx("destroy"),contextChange:new nx("contextChange"),reset:new nx("reset"),update:new nx("update"),postrender:new nx("postrender"),prerender:new nx("prerender"),resize:new nx("resize")},E.globalUniforms=new n2({projectionMatrix:new i0},!0),E.addSystem(oC,"mask").addSystem(n7,"context").addSystem(oH,"state").addSystem(oG,"shader").addSystem(oY,"texture").addSystem(or,"geometry").addSystem(ot,"framebuffer").addSystem(oM,"scissor").addSystem(oD,"stencil").addSystem(oN,"projection").addSystem(oz,"textureGC").addSystem(n5,"filter").addSystem(oB,"renderTexture").addSystem(n6,"batch"),E.initPlugins(r.__plugins),v.context?E.context.initFromContext(v.context):E.context.initFromOptions({alpha:!!E.transparent,antialias:v.antialias,premultipliedAlpha:E.transparent&&"notMultiplied"!==E.transparent,stencil:!0,preserveDrawingBuffer:v.preserveDrawingBuffer,powerPreference:E.options.powerPreference}),E.renderingToScreen=!0,bs(2===E.context.webGLVersion?"WebGL 2":"WebGL 1"),E.resize(E.options.width,E.options.height),E}return z(r,l),r.create=function(l){if(Ts())return new r(l);throw Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},r.prototype.addSystem=function(l,v){v||(v=l.name);var E=new l(this);if(this[v])throw Error('Whoops! The name "'+v+'" is already in use');for(var C in this[v]=E,this.runners)this.runners[C].add(E);return this},r.prototype.render=function(l,v,E,C,M){if(this.renderingToScreen=!v,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=C,!this.context.isLost){if(v||(this._lastObjectRendered=l),!M){var L=l.enableTempParent();l.updateTransform(),l.disableTempParent(L)}this.renderTexture.bind(v),this.batch.currentRenderer.start(),(void 0!==E?E:this.clearBeforeRender)&&this.renderTexture.clear(),l.render(this),this.batch.currentRenderer.flush(),v&&v.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},r.prototype.resize=function(v,E){l.prototype.resize.call(this,v,E),this.runners.resize.emit(v,E)},r.prototype.reset=function(){return this.runners.reset.emit(),this},r.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},r.prototype.destroy=function(v){for(var E in this.runners.destroy.emit(),this.runners)this.runners[E].destroy();l.prototype.destroy.call(this,v),this.gl=null},r.registerPlugin=function(l,v){r.__plugins=r.__plugins||{},r.__plugins[l]=v},r}(oW);function bh(l){return oq.create(l)}var oZ=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,oK=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,ni=function(){this.texArray=null,this.blend=0,this.type=iA.TRIANGLES,this.start=0,this.size=0,this.data=null},oJ=function(){function i(){this.elements=[],this.ids=[],this.count=0}return i.prototype.clear=function(){for(var l=0;l<this.count;l++)this.elements[l]=null;this.count=0},i}(),o$=function(){function i(l){this.rawBinaryData=new ArrayBuffer(l),this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(i.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),i.prototype.view=function(l){return this[l+"View"]},i.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},i.sizeOf=function(l){switch(l){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw Error(l+" isn't a valid view type")}},i}(),oQ=function(l){function r(v){var E=l.call(this,v)||this;return E.shaderGenerator=null,E.geometryClass=null,E.vertexSize=null,E.state=ox.for2d(),E.size=4*tK.SPRITE_BATCH_SIZE,E._vertexCount=0,E._indexCount=0,E._bufferedElements=[],E._bufferedTextures=[],E._bufferSize=0,E._shader=null,E._packedGeometries=[],E._packedGeometryPoolSize=2,E._flushId=0,E._aBuffers={},E._iBuffers={},E.MAX_TEXTURES=1,E.renderer.on("prerender",E.onPrerender,E),v.runners.contextChange.add(E),E._dcIndex=0,E._aIndex=0,E._iIndex=0,E._attributeBuffer=null,E._indexBuffer=null,E._tempBoundTextures=[],E}return z(r,l),r.prototype.contextChange=function(){var l=this.renderer.gl;tK.PREFER_ENV===iI.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(l.getParameter(l.MAX_TEXTURE_IMAGE_UNITS),tK.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=sh(this.MAX_TEXTURES,l)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var v=0;v<this._packedGeometryPoolSize;v++)this._packedGeometries[v]=new this.geometryClass;this.initFlushBuffers()},r.prototype.initFlushBuffers=function(){for(var l=r._drawCallPool,v=r._textureArrayPool,E=this.size/4,C=Math.floor(E/this.MAX_TEXTURES)+1;l.length<E;)l.push(new ni);for(;v.length<C;)v.push(new oJ);for(var M=0;M<this.MAX_TEXTURES;M++)this._tempBoundTextures[M]=null},r.prototype.onPrerender=function(){this._flushId=0},r.prototype.render=function(l){l._texture.valid&&(this._vertexCount+l.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=l.vertexData.length/2,this._indexCount+=l.indices.length,this._bufferedTextures[this._bufferSize]=l._texture.baseTexture,this._bufferedElements[this._bufferSize++]=l)},r.prototype.buildTexturesAndDrawCalls=function(){var l=this._bufferedTextures,v=this.MAX_TEXTURES,E=r._textureArrayPool,C=this.renderer.batch,M=this._tempBoundTextures,L=this.renderer.textureGC.count,U=++nP._globalBatch,B=0,k=E[0],j=0;C.copyBoundTextures(M,v);for(var X=0;X<this._bufferSize;++X){var G=l[X];l[X]=null,G._batchEnabled!==U&&(k.count>=v&&(C.boundArray(k,M,U,v),this.buildDrawCalls(k,j,X),j=X,k=E[++B],++U),G._batchEnabled=U,G.touched=L,k.elements[k.count++]=G)}k.count>0&&(C.boundArray(k,M,U,v),this.buildDrawCalls(k,j,this._bufferSize),++B,++U);for(var X=0;X<M.length;X++)M[X]=null;nP._globalBatch=U},r.prototype.buildDrawCalls=function(l,v,E){var C=this._bufferedElements,M=this._attributeBuffer,L=this._indexBuffer,U=this.vertexSize,B=r._drawCallPool,k=this._dcIndex,j=this._aIndex,X=this._iIndex,G=B[k];G.start=this._iIndex,G.texArray=l;for(var H=v;H<E;++H){var Y=C[H],W=r2[Y._texture.baseTexture.alphaMode?1:0][Y.blendMode];C[H]=null,v<H&&G.blend!==W&&(G.size=X-G.start,v=H,(G=B[++k]).texArray=l,G.start=X),this.packInterleavedGeometry(Y,M,L,j,X),j+=Y.vertexData.length/2*U,X+=Y.indices.length,G.blend=W}v<E&&(G.size=X-G.start,++k),this._dcIndex=k,this._aIndex=j,this._iIndex=X},r.prototype.bindAndClearTexArray=function(l){for(var v=this.renderer.texture,E=0;E<l.count;E++)v.bind(l.elements[E],l.ids[E]),l.elements[E]=null;l.count=0},r.prototype.updateGeometry=function(){var l=this._packedGeometries,v=this._attributeBuffer,E=this._indexBuffer;tK.CAN_UPLOAD_SAME_BUFFER?(l[this._flushId]._buffer.update(v.rawBinaryData),l[this._flushId]._indexBuffer.update(E),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,l[this._flushId]=new this.geometryClass),l[this._flushId]._buffer.update(v.rawBinaryData),l[this._flushId]._indexBuffer.update(E),this.renderer.geometry.bind(l[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},r.prototype.drawBatches=function(){for(var l=this._dcIndex,v=this.renderer,E=v.gl,C=v.state,M=r._drawCallPool,L=null,U=0;U<l;U++){var B=M[U],k=B.texArray,j=B.type,X=B.size,G=B.start,H=B.blend;L!==k&&(L=k,this.bindAndClearTexArray(k)),this.state.blendMode=H,C.set(this.state),E.drawElements(j,X,E.UNSIGNED_SHORT,2*G)}},r.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},r.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.shader.bind(this._shader),tK.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},r.prototype.stop=function(){this.flush()},r.prototype.destroy=function(){for(var v=0;v<this._packedGeometryPoolSize;v++)this._packedGeometries[v]&&this._packedGeometries[v].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),l.prototype.destroy.call(this)},r.prototype.getAttributeBuffer=function(l){var v=pr(Math.ceil(l/8)),E=fn(v),C=8*v;this._aBuffers.length<=E&&(this._iBuffers.length=E+1);var M=this._aBuffers[C];return M||(this._aBuffers[C]=M=new o$(C*this.vertexSize*4)),M},r.prototype.getIndexBuffer=function(l){var v=pr(Math.ceil(l/12)),E=fn(v),C=12*v;this._iBuffers.length<=E&&(this._iBuffers.length=E+1);var M=this._iBuffers[E];return M||(this._iBuffers[E]=M=new Uint16Array(C)),M},r.prototype.packInterleavedGeometry=function(l,v,E,C,M){for(var L=v.uint32View,U=v.float32View,B=C/this.vertexSize,k=l.uvs,j=l.indices,X=l.vertexData,G=l._texture.baseTexture._batchLocation,H=Math.min(l.worldAlpha,1),Y=H<1&&l._texture.baseTexture.alphaMode?li(l._tintRGB,H):l._tintRGB+(255*H<<24),W=0;W<X.length;W+=2)U[C++]=X[W],U[C++]=X[W+1],U[C++]=k[W],U[C++]=k[W+1],L[C++]=Y,U[C++]=G;for(var W=0;W<j.length;W++)E[M++]=B+j[W]},r._drawCallPool=[],r._textureArrayPool=[],r}(n4),o0=function(){function i(l,v){if(this.vertexSrc=l,this.fragTemplate=v,this.programCache={},this.defaultGroupCache={},0>v.indexOf("%count%"))throw Error('Fragment template must contain "%count%".');if(0>v.indexOf("%forloop%"))throw Error('Fragment template must contain "%forloop%".')}return i.prototype.generateShader=function(l){if(!this.programCache[l]){for(var v=new Int32Array(l),E=0;E<l;E++)v[E]=E;this.defaultGroupCache[l]=n2.from({uSamplers:v},!0);var C=this.fragTemplate;C=(C=C.replace(/%count%/gi,""+l)).replace(/%forloop%/gi,this.generateSampleSrc(l)),this.programCache[l]=new o_(this.vertexSrc,C)}var M={tint:new Float32Array([1,1,1,1]),translationMatrix:new i0,default:this.defaultGroupCache[l]};return new ob(this.programCache[l],M)},i.prototype.generateSampleSrc=function(l){var v="";v+=`

`;for(var E=0;E<l;E++)E>0&&(v+=`
else `),E<l-1&&(v+="if(vTextureId < "+E+".5)"),v+=`
{
	color = texture2D(uSamplers[`+E+"], vTextureCoord);"+`
}`;return v+`

`},i}(),o1=function(l){function r(v){void 0===v&&(v=!1);var E=l.call(this)||this;return E._buffer=new nW(null,v,!1),E._indexBuffer=new nW(null,v,!0),E.addAttribute("aVertexPosition",E._buffer,2,!1,iR.FLOAT).addAttribute("aTextureCoord",E._buffer,2,!1,iR.FLOAT).addAttribute("aColor",E._buffer,4,!0,iR.UNSIGNED_BYTE).addAttribute("aTextureId",E._buffer,1,!0,iR.FLOAT).addIndex(E._indexBuffer),E}return z(r,l),r}(n$),o2=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,o3=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,o5=function(){function i(){}return i.create=function(l){var v=Object.assign({vertex:o2,fragment:o3,geometryClass:o1,vertexSize:6},l),E=v.vertex,C=v.fragment,M=v.vertexSize,L=v.geometryClass;return function(l){function h(v){var U=l.call(this,v)||this;return U.shaderGenerator=new o0(E,C),U.geometryClass=L,U.vertexSize=M,U}return z(h,l),h}(oQ)},Object.defineProperty(i,"defaultVertexSrc",{get:function(){return o2},enumerable:!1,configurable:!0}),Object.defineProperty(i,"defaultFragmentTemplate",{get:function(){return o3},enumerable:!1,configurable:!0}),i}(),o4=o5.create(),o6=function(){function i(l){var v=this;l=Object.assign({forceCanvas:!1},l),this.renderer=bh(l),this.stage=new no,i._plugins.forEach(function(E){E.init.call(v,l)})}return i.registerPlugin=function(l){i._plugins.push(l)},i.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(i.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),i.prototype.destroy=function(l,v){var E=this,C=i._plugins.slice(0);C.reverse(),C.forEach(function(l){l.destroy.call(E)}),this.stage.destroy(v),this.stage=null,this.renderer.destroy(l),this.renderer=null},i}();o6._plugins=[];var o8=function(){function i(){}return i.init=function(l){var v=this;Object.defineProperty(this,"resizeTo",{set:function(l){window.removeEventListener("resize",this.queueResize),this._resizeTo=l,l&&(window.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){v._resizeTo&&(v.cancelResize(),v._resizeId=requestAnimationFrame(function(){return v.resize()}))},this.cancelResize=function(){v._resizeId&&(cancelAnimationFrame(v._resizeId),v._resizeId=null)},this.resize=function(){if(v._resizeTo){if(v.cancelResize(),v._resizeTo===window)l=window.innerWidth,E=window.innerHeight;else{var l,E,C=v._resizeTo,M=C.clientWidth,L=C.clientHeight;l=M,E=L}v.renderer.resize(l,E)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=l.resizeTo||null},i.destroy=function(){this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},i}();o6.registerPlugin(o8);/*!
 * @pixi/extract - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var o7=new iW,o9=function(){function i(l){this.renderer=l,l.extract=this}return i.prototype.image=function(l,v,E){var C=new Image;return C.src=this.base64(l,v,E),C},i.prototype.base64=function(l,v,E){return this.canvas(l).toDataURL(v,E)},i.prototype.canvas=function(l){var v,E,C,M=this.renderer,L=!1,U=!1;l&&(l instanceof nH?C=l:(C=this.renderer.generateTexture(l),U=!0)),C?(v=C.baseTexture.resolution,E=C.frame,L=!1,M.renderTexture.bind(C)):(v=this.renderer.resolution,L=!0,(E=o7).width=this.renderer.width,E.height=this.renderer.height,M.renderTexture.bind(null));var B=Math.floor(E.width*v+1e-4),k=Math.floor(E.height*v+1e-4),j=new r9(B,k,1),X=new Uint8Array(4*B*k),G=M.gl;G.readPixels(E.x*v,E.y*v,B,k,G.RGBA,G.UNSIGNED_BYTE,X);var H=j.context.getImageData(0,0,B,k);if(i.arrayPostDivide(X,H.data),j.context.putImageData(H,0,0),L){var Y=new r9(j.width,j.height,1);Y.context.scale(1,-1),Y.context.drawImage(j.canvas,0,-k),j.destroy(),j=Y}return U&&C.destroy(!0),j.canvas},i.prototype.pixels=function(l){var v,E,C,M=this.renderer,L=!1;l&&(l instanceof nH?C=l:(C=this.renderer.generateTexture(l),L=!0)),C?(v=C.baseTexture.resolution,E=C.frame,M.renderTexture.bind(C)):(v=M.resolution,(E=o7).width=M.width,E.height=M.height,M.renderTexture.bind(null));var U=E.width*v,B=E.height*v,k=new Uint8Array(4*U*B),j=M.gl;return j.readPixels(E.x*v,E.y*v,U,B,j.RGBA,j.UNSIGNED_BYTE,k),L&&C.destroy(!0),i.arrayPostDivide(k,k),k},i.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},i.arrayPostDivide=function(l,v){for(var E=0;E<l.length;E+=4){var C=v[E+3]=l[E+3];0!==C?(v[E]=Math.round(Math.min(255*l[E]/C,255)),v[E+1]=Math.round(Math.min(255*l[E+1]/C,255)),v[E+2]=Math.round(Math.min(255*l[E+2]/C,255))):(v[E]=l[E],v[E+1]=l[E+1],v[E+2]=l[E+2])}},i}();let st=si((l,v={})=>{if(!l)return;let E={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?))?((((?:[^?#/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@/]*@)([^:/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#/]*\.[^?#/.]+(?:[?#]|$)))*\/?)?([^?#/]*))(?:\?([^#]*))?(?:#(.*))?)/}},C=E.parser[v.strictMode?"strict":"loose"].exec(l),M={},L=14;for(;L--;)M[E.key[L]]=C[L]||"";return M[E.q.name]={},M[E.key[12]].replace(E.q.parser,function(l,v,C){v&&(M[E.q.name][v]=C)}),M});let kr=class kr{constructor(l,v=!1,E){this._fn=l,this._once=v,this._thisArg=E,this._next=this._prev=this._owner=null}detach(){return null!==this._owner&&(this._owner.detach(this),!0)}};function To(l,v){return l._head?(l._tail._next=v,v._prev=l._tail):l._head=v,l._tail=v,v._owner=l,v}let Ut=class Ut{constructor(){this._head=this._tail=void 0}handlers(l=!1){let v=this._head;if(l)return!!v;let E=[];for(;v;)E.push(v),v=v._next;return E}has(l){if(!(l instanceof kr))throw Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return l._owner===this}dispatch(){let l=this._head;if(!l)return!1;for(;l;)l._once&&this.detach(l),l._fn.apply(l._thisArg,arguments),l=l._next;return!0}add(l,v=null){if("function"!=typeof l)throw Error("MiniSignal#add(): First arg must be a Function.");return To(this,new kr(l,!1,v))}once(l,v=null){if("function"!=typeof l)throw Error("MiniSignal#once(): First arg must be a Function.");return To(this,new kr(l,!0,v))}detach(l){if(!(l instanceof kr))throw Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return l._owner!==this||(l._prev&&(l._prev._next=l._next),l._next&&(l._next._prev=l._prev),l===this._head?(this._head=l._next,null===l._next&&(this._tail=null)):l===this._tail&&(this._tail=l._prev,this._tail._next=null),l._owner=null),this}detachAll(){let l=this._head;if(!l)return this;for(this._head=this._tail=null;l;)l._owner=null,l=l._next;return this}};/*!
 * resource-loader - v3.0.1
 * https://github.com/pixijs/pixi-sound
 * Compiled Tue, 02 Jul 2019 14:06:18 UTC
 *
 * resource-loader is licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license
 */function ae(){}function wo(l,v,E,C){var M=0,L=l.length;!function o(U){if(U||M===L){E&&E(U);return}C?setTimeout(function(){v(l[M++],o)},1):v(l[M++],o)}()}var se={};function Po(l,v){for(var E=0;E<v.length;E++){var C=v[E];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(l,C.key,C)}}function Ch(l,v,E){return v&&Po(l.prototype,v),E&&Po(l,E),l}var sr=!!(window.XDomainRequest&&!("withCredentials"in new XMLHttpRequest)),sn=null;function sd(){}var so=function(){function i(l,v,E){if("string"!=typeof l||"string"!=typeof v)throw Error("Both name and url are required for constructing a resource.");E=E||{},this._flags=0,this._setFlag(i.STATUS_FLAGS.DATA_URL,0===v.indexOf("data:")),this.name=l,this.url=v,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===E.crossOrigin?"anonymous":E.crossOrigin,this.timeout=E.timeout||0,this.loadType=E.loadType||this._determineLoadType(),this.xhrType=E.xhrType,this.metadata=E.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=i.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=sd,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new Ut,this.onProgress=new Ut,this.onComplete=new Ut,this.onAfterMiddleware=new Ut}i.setExtensionLoadType=function(l,v){Eo(i._loadTypeMap,l,v)},i.setExtensionXhrType=function(l,v){Eo(i._xhrTypeMap,l,v)};var l=i.prototype;return l.complete=function(){this._clearEvents(),this._finish()},l.abort=function(l){if(!this.error){if(this.error=Error(l),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data){if(this.data.src)this.data.src=i.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild)}this._finish()}},l.load=function(l){var v=this;if(!this.isLoading){if(this.isComplete){l&&setTimeout(function(){return l(v)},1);return}switch(l&&this.onComplete.once(l),this._setFlag(i.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(!1===this.crossOrigin||"string"!=typeof this.crossOrigin)&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case i.LOAD_TYPE.IMAGE:this.type=i.TYPE.IMAGE,this._loadElement("image");break;case i.LOAD_TYPE.AUDIO:this.type=i.TYPE.AUDIO,this._loadSourceElement("audio");break;case i.LOAD_TYPE.VIDEO:this.type=i.TYPE.VIDEO,this._loadSourceElement("video");break;case i.LOAD_TYPE.XHR:default:sr&&this.crossOrigin?this._loadXdr():this._loadXhr()}}},l._hasFlag=function(l){return(this._flags&l)!=0},l._setFlag=function(l,v){this._flags=v?this._flags|l:this._flags&~l},l._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},l._finish=function(){if(this.isComplete)throw Error("Complete called again for an already completed resource.");this._setFlag(i.STATUS_FLAGS.COMPLETE,!0),this._setFlag(i.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},l._loadElement=function(l){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===l&&"u">typeof window.Image?this.data=new Image:this.data=document.createElement(l),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},l._loadSourceElement=function(l){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===l&&"u">typeof window.Audio?this.data=new Audio:this.data=document.createElement(l),null===this.data){this.abort("Unsupported element: "+l);return}if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource){if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var v=this.metadata.mimeType,E=0;E<this.url.length;++E)this.data.appendChild(this._createSource(l,this.url[E],Array.isArray(v)?v[E]:v));else{var C=this.metadata.mimeType;this.data.appendChild(this._createSource(l,this.url,Array.isArray(C)?C[0]:C))}}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},l._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var l=this.xhr=new XMLHttpRequest;l.open("GET",this.url,!0),l.timeout=this.timeout,this.xhrType===i.XHR_RESPONSE_TYPE.JSON||this.xhrType===i.XHR_RESPONSE_TYPE.DOCUMENT?l.responseType=i.XHR_RESPONSE_TYPE.TEXT:l.responseType=this.xhrType,l.addEventListener("error",this._boundXhrOnError,!1),l.addEventListener("timeout",this._boundXhrOnTimeout,!1),l.addEventListener("abort",this._boundXhrOnAbort,!1),l.addEventListener("progress",this._boundOnProgress,!1),l.addEventListener("load",this._boundXhrOnLoad,!1),l.send()},l._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var l=this.xhr=new XDomainRequest;l.timeout=this.timeout||5e3,l.onerror=this._boundXhrOnError,l.ontimeout=this._boundXhrOnTimeout,l.onprogress=this._boundOnProgress,l.onload=this._boundXhrOnLoad,l.open("GET",this.url,!0),setTimeout(function(){return l.send()},1)},l._createSource=function(l,v,E){E||(E=l+"/"+this._getExtension(v));var C=document.createElement("source");return C.src=v,C.type=E,C},l._onError=function(l){this.abort("Failed to load element using: "+l.target.nodeName)},l._onProgress=function(l){l&&l.lengthComputable&&this.onProgress.dispatch(this,l.loaded/l.total)},l._onTimeout=function(){this.abort("Load timed out.")},l._xhrOnError=function(){var l=this.xhr;this.abort(Hi(l)+" Request failed. Status: "+l.status+', text: "'+l.statusText+'"')},l._xhrOnTimeout=function(){var l=this.xhr;this.abort(Hi(l)+" Request timed out.")},l._xhrOnAbort=function(){var l=this.xhr;this.abort(Hi(l)+" Request was aborted by the user.")},l._xhrOnLoad=function(){var l=this.xhr,v="",E=typeof l.status>"u"?200:l.status;if((""===l.responseType||"text"===l.responseType||typeof l.responseType>"u")&&(v=l.responseText),0===E&&(v.length>0||l.responseType===i.XHR_RESPONSE_TYPE.BUFFER)?E=200:1223===E&&(E=204),(E/100|0)==2){if(this.xhrType===i.XHR_RESPONSE_TYPE.TEXT)this.data=v,this.type=i.TYPE.TEXT;else if(this.xhrType===i.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(v),this.type=i.TYPE.JSON}catch(l){this.abort("Error trying to parse loaded json: "+l);return}else if(this.xhrType===i.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var C=new DOMParser;this.data=C.parseFromString(v,"text/xml")}else{var M=document.createElement("div");M.innerHTML=v,this.data=M}this.type=i.TYPE.XML}catch(l){this.abort("Error trying to parse loaded xml: "+l);return}else this.data=l.response||v}else{this.abort("["+l.status+"] "+l.statusText+": "+l.responseURL);return}this.complete()},l._determineCrossOrigin=function(l,v){if(0===l.indexOf("data:"))return"";if(window.origin!==window.location.origin)return"anonymous";v=v||window.location,sn||(sn=document.createElement("a")),sn.href=l;var E=!(l=st(sn.href,{strictMode:!0})).port&&""===v.port||l.port===v.port,C=l.protocol?l.protocol+":":"";return l.host===v.hostname&&E&&C===v.protocol?"":"anonymous"},l._determineXhrType=function(){return i._xhrTypeMap[this.extension]||i.XHR_RESPONSE_TYPE.TEXT},l._determineLoadType=function(){return i._loadTypeMap[this.extension]||i.LOAD_TYPE.XHR},l._getExtension=function(){var l=this.url,v="";if(this.isDataUrl){var E=l.indexOf("/");v=l.substring(E+1,l.indexOf(";",E))}else{var C=l.indexOf("?"),M=l.indexOf("#"),L=Math.min(C>-1?C:l.length,M>-1?M:l.length);v=(l=l.substring(0,L)).substring(l.lastIndexOf(".")+1)}return v.toLowerCase()},l._getMimeFromXhrType=function(l){switch(l){case i.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case i.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case i.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case i.XHR_RESPONSE_TYPE.JSON:return"application/json";case i.XHR_RESPONSE_TYPE.DEFAULT:case i.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},Ch(i,[{key:"isDataUrl",get:function(){return this._hasFlag(i.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(i.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(i.STATUS_FLAGS.LOADING)}}]),i}();function Eo(l,v,E){v&&0===v.indexOf(".")&&(v=v.substring(1)),v&&(l[v]=E)}function Hi(l){return l.toString().replace("object ","")}so.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},so.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},so.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},so.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},so._loadTypeMap={gif:so.LOAD_TYPE.IMAGE,png:so.LOAD_TYPE.IMAGE,bmp:so.LOAD_TYPE.IMAGE,jpg:so.LOAD_TYPE.IMAGE,jpeg:so.LOAD_TYPE.IMAGE,tif:so.LOAD_TYPE.IMAGE,tiff:so.LOAD_TYPE.IMAGE,webp:so.LOAD_TYPE.IMAGE,tga:so.LOAD_TYPE.IMAGE,svg:so.LOAD_TYPE.IMAGE,"svg+xml":so.LOAD_TYPE.IMAGE,mp3:so.LOAD_TYPE.AUDIO,ogg:so.LOAD_TYPE.AUDIO,wav:so.LOAD_TYPE.AUDIO,mp4:so.LOAD_TYPE.VIDEO,webm:so.LOAD_TYPE.VIDEO},so._xhrTypeMap={xhtml:so.XHR_RESPONSE_TYPE.DOCUMENT,html:so.XHR_RESPONSE_TYPE.DOCUMENT,htm:so.XHR_RESPONSE_TYPE.DOCUMENT,xml:so.XHR_RESPONSE_TYPE.DOCUMENT,tmx:so.XHR_RESPONSE_TYPE.DOCUMENT,svg:so.XHR_RESPONSE_TYPE.DOCUMENT,tsx:so.XHR_RESPONSE_TYPE.DOCUMENT,gif:so.XHR_RESPONSE_TYPE.BLOB,png:so.XHR_RESPONSE_TYPE.BLOB,bmp:so.XHR_RESPONSE_TYPE.BLOB,jpg:so.XHR_RESPONSE_TYPE.BLOB,jpeg:so.XHR_RESPONSE_TYPE.BLOB,tif:so.XHR_RESPONSE_TYPE.BLOB,tiff:so.XHR_RESPONSE_TYPE.BLOB,webp:so.XHR_RESPONSE_TYPE.BLOB,tga:so.XHR_RESPONSE_TYPE.BLOB,json:so.XHR_RESPONSE_TYPE.JSON,text:so.XHR_RESPONSE_TYPE.TEXT,txt:so.XHR_RESPONSE_TYPE.TEXT,ttf:so.XHR_RESPONSE_TYPE.BUFFER,otf:so.XHR_RESPONSE_TYPE.BUFFER},so.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";var ss=window.URL||window.webkitURL,sa=/(#[\w-]+)?$/,su=function(){function i(l,v){var E=this;void 0===l&&(l=""),void 0===v&&(v=10),this.baseUrl=l,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(l,v){return E._loadResource(l,v)},this._queue=function(l,v){if(null==v)v=1;else if(0===v)throw Error("Concurrency must not be zero");var E=0,C={_tasks:[],concurrency:v,saturated:ae,unsaturated:ae,buffer:v/4,empty:ae,drain:ae,error:ae,started:!1,paused:!1,push:function(l,v){n(l,!1,v)},kill:function(){E=0,C.drain=ae,C.started=!1,C._tasks=[]},unshift:function(l,v){n(l,!0,v)},process:function(){for(;!C.paused&&E<C.concurrency&&C._tasks.length;){var v=C._tasks.shift();0===C._tasks.length&&C.empty(),(E+=1)===C.concurrency&&C.saturated(),l(v.data,function(l){return function(){if(null===l)throw Error("Callback was already called.");var v=l;l=null,v.apply(this,arguments)}}(function(l){return function(){E-=1,l.callback.apply(l,arguments),null!=arguments[0]&&C.error(arguments[0],l.data),E<=C.concurrency-C.buffer&&C.unsaturated(),C.idle()&&C.drain(),C.process()}}(v)))}},length:function(){return C._tasks.length},running:function(){return E},idle:function(){return C._tasks.length+E===0},pause:function(){!0!==C.paused&&(C.paused=!0)},resume:function(){if(!1!==C.paused){C.paused=!1;for(var l=1;l<=C.concurrency;l++)C.process()}}};function n(l,v,E){if(null!=E&&"function"!=typeof E)throw Error("task callback must be a function");if(C.started=!0,null==l&&C.idle()){setTimeout(function(){return C.drain()},1);return}var M={data:l,callback:"function"==typeof E?E:ae};v?C._tasks.unshift(M):C._tasks.push(M),setTimeout(function(){return C.process()},1)}return C}(this._boundLoadResource,v),this._queue.pause(),this.resources={},this.onProgress=new Ut,this.onError=new Ut,this.onLoad=new Ut,this.onStart=new Ut,this.onComplete=new Ut;for(var C=0;C<i._defaultBeforeMiddleware.length;++C)this.pre(i._defaultBeforeMiddleware[C]);for(var M=0;M<i._defaultAfterMiddleware.length;++M)this.use(i._defaultAfterMiddleware[M])}var l=i.prototype;return l.add=function(l,v,E,C){if(Array.isArray(l)){for(var M=0;M<l.length;++M)this.add(l[M]);return this}if("object"==typeof l&&(C=v||l.callback||l.onComplete,E=l,v=l.url,l=l.name||l.key||l.url),"string"!=typeof v&&(C=E,E=v,v=l),"string"!=typeof v)throw Error("No url passed to add resource to loader.");if("function"==typeof E&&(C=E,E=null),this.loading&&(!E||!E.parentResource))throw Error("Cannot add resources while the loader is running.");if(this.resources[l])throw Error('Resource named "'+l+'" already exists.');if(v=this._prepareUrl(v),this.resources[l]=new so(l,v,E),"function"==typeof C&&this.resources[l].onAfterMiddleware.once(C),this.loading){for(var L=E.parentResource,U=[],B=0;B<L.children.length;++B)L.children[B].isComplete||U.push(L.children[B]);var k=L.progressChunk*(U.length+1)/(U.length+2);L.children.push(this.resources[l]),L.progressChunk=k;for(var j=0;j<U.length;++j)U[j].progressChunk=k;this.resources[l].progressChunk=k}return this._queue.push(this.resources[l]),this},l.pre=function(l){return this._beforeMiddleware.push(l),this},l.use=function(l){return this._afterMiddleware.push(l),this},l.reset=function(){for(var l in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var v=this.resources[l];v._onLoadBinding&&v._onLoadBinding.detach(),v.isLoading&&v.abort()}return this.resources={},this},l.load=function(l){if("function"==typeof l&&this.onComplete.once(l),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var v=this._queue._tasks.length,E=100/v,C=0;C<this._queue._tasks.length;++C)this._queue._tasks[C].data.progressChunk=E;this._onStart(),this._queue.resume()}return this},l._prepareUrl=function(l){var v,E=st(l,{strictMode:!0});if(v=E.protocol||!E.path||0===l.indexOf("//")?l:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==l.charAt(0)?this.baseUrl+"/"+l:this.baseUrl+l,this.defaultQueryString){var C=sa.exec(v)[0];-1!==(v=v.substr(0,v.length-C.length)).indexOf("?")?v+="&"+this.defaultQueryString:v+="?"+this.defaultQueryString,v+=C}return v},l._loadResource=function(l,v){var E=this;l._dequeue=v,wo(this._beforeMiddleware,function(v,C){v.call(E,l,function(){C(l.isComplete?{}:null)})},function(){l.isComplete?E._onLoad(l):(l._onLoadBinding=l.onComplete.once(E._onLoad,E),l.load())},!0)},l._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},l._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},l._onLoad=function(l){var v=this;l._onLoadBinding=null,this._resourcesParsing.push(l),l._dequeue(),wo(this._afterMiddleware,function(E,C){E.call(v,l,C)},function(){l.onAfterMiddleware.dispatch(l),v.progress=Math.min(100,v.progress+l.progressChunk),v.onProgress.dispatch(v,l),l.error?v.onError.dispatch(l.error,v,l):v.onLoad.dispatch(v,l),v._resourcesParsing.splice(v._resourcesParsing.indexOf(l),1),v._queue.idle()&&0===v._resourcesParsing.length&&v._onComplete()},!0)},Ch(i,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(l){this._queue.concurrency=l}}]),i}();su._defaultBeforeMiddleware=[],su._defaultAfterMiddleware=[],su.pre=function(l){return su._defaultBeforeMiddleware.push(l),su},su.use=function(l){return su._defaultAfterMiddleware.push(l),su};/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var xn=function(l,v){return(xn=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(l,v){l.__proto__=v}||function(l,v){for(var E in v)v.hasOwnProperty(E)&&(l[E]=v[E])})(l,v)},sc=function(){function i(){}return i.use=function(l,v){l.data&&l.type===so.TYPE.IMAGE&&(l.texture=nG.fromLoader(l.data,l.url,l.name)),v()},i}(),sp=function(l){function r(v,E){for(var C=l.call(this,v,E)||this,M=0;M<r._plugins.length;++M){var L=r._plugins[M],U=L.pre,B=L.use;U&&C.pre(U),B&&C.use(B)}return C._protected=!1,C}return!function(l,v){function t(){this.constructor=l}xn(l,v),l.prototype=null===v?Object.create(v):(t.prototype=v.prototype,new t)}(r,l),r.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(r,"shared",{get:function(){var l=r._shared;return l||((l=new r)._protected=!0,r._shared=l),l},enumerable:!1,configurable:!0}),r.registerPlugin=function(l){return r._plugins.push(l),l.add&&l.add(),r},r._plugins=[],r}(su);sp.registerPlugin({use:{caching:function(l,v){var E=this;se[l.url]?(l.data=se[l.url],l.complete()):l.onComplete.once(function(){return se[E.url]=E.data}),v()},parsing:function(l,v){if(!l.data){v();return}if(l.xhr&&l.xhrType===so.XHR_RESPONSE_TYPE.BLOB){if(window.Blob&&"string"!=typeof l.data){if(0===l.data.type.indexOf("image")){var E=ss.createObjectURL(l.data);l.blob=l.data,l.data=new Image,l.data.src=E,l.type=so.TYPE.IMAGE,l.data.onload=function(){ss.revokeObjectURL(E),l.data.onload=null,v()};return}}else{var C=l.xhr.getResponseHeader("content-type");if(C&&0===C.indexOf("image")){l.data=new Image,l.data.src="data:"+C+";base64,"+function(l){for(var v="",E=0;E<l.length;){for(var C=[0,0,0],M=[0,0,0,0],L=0;L<C.length;++L)E<l.length?C[L]=255&l.charCodeAt(E++):C[L]=0;switch(M[0]=C[0]>>2,M[1]=(3&C[0])<<4|C[1]>>4,M[2]=(15&C[1])<<2|C[2]>>6,M[3]=63&C[2],E-(l.length-1)){case 2:M[3]=64,M[2]=64;break;case 1:M[3]=64}for(var U=0;U<M.length;++U)v+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(M[U])}return v}(l.xhr.responseText),l.type=so.TYPE.IMAGE,l.data.onload=function(){l.data.onload=null,v()};return}}}v()}}.parsing}),sp.registerPlugin(sc);var sf=function(){function i(){}return i.init=function(l){l=Object.assign({sharedLoader:!1},l),this.loader=l.sharedLoader?sp.shared:new sp},i.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},i}(),bn=function(l,v){return(bn=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(l,v){l.__proto__=v}||function(l,v){for(var E in v)v.hasOwnProperty(E)&&(l[E]=v[E])})(l,v)};function Mh(l,v){function t(){this.constructor=l}bn(l,v),l.prototype=null===v?Object.create(v):(t.prototype=v.prototype,new t)}var sy=function(l){function r(v,E,C,M){void 0===v&&(v=1500),void 0===C&&(C=16384),void 0===M&&(M=!1);var L=l.call(this)||this;return C>16384&&(C=16384),L._properties=[!1,!0,!1,!1,!1],L._maxSize=v,L._batchSize=C,L._buffers=null,L._bufferUpdateIDs=[],L._updateID=0,L.interactiveChildren=!1,L.blendMode=iS.NORMAL,L.autoResize=M,L.roundPixels=!0,L.baseTexture=null,L.setProperties(E),L._tint=0,L.tintRgb=new Float32Array(4),L.tint=16777215,L}return Mh(r,l),r.prototype.setProperties=function(l){l&&(this._properties[0]="vertices"in l||"scale"in l?!!l.vertices||!!l.scale:this._properties[0],this._properties[1]="position"in l?!!l.position:this._properties[1],this._properties[2]="rotation"in l?!!l.rotation:this._properties[2],this._properties[3]="uvs"in l?!!l.uvs:this._properties[3],this._properties[4]="tint"in l||"alpha"in l?!!l.tint||!!l.alpha:this._properties[4])},r.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(r.prototype,"tint",{get:function(){return this._tint},set:function(l){this._tint=l,xe(l,this.tintRgb)},enumerable:!1,configurable:!0}),r.prototype.render=function(l){var v=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return v.onChildrenChange(0)})),l.batch.setObjectRenderer(l.plugins.particle),l.plugins.particle.render(this))},r.prototype.onChildrenChange=function(l){for(var v=Math.floor(l/this._batchSize);this._bufferUpdateIDs.length<v;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[v]=++this._updateID},r.prototype.dispose=function(){if(this._buffers){for(var l=0;l<this._buffers.length;++l)this._buffers[l].destroy();this._buffers=null}},r.prototype.destroy=function(v){l.prototype.destroy.call(this,v),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},r}(no),sm=function(){function i(l,v,E){this.geometry=new n$,this.indexBuffer=null,this.size=E,this.dynamicProperties=[],this.staticProperties=[];for(var C=0;C<l.length;++C){var M=l[C];M={attributeName:M.attributeName,size:M.size,uploadFunction:M.uploadFunction,type:M.type||iR.FLOAT,offset:M.offset},v[C]?this.dynamicProperties.push(M):this.staticProperties.push(M)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return i.prototype.initBuffers=function(){var l=this.geometry,v=0;this.indexBuffer=new nW(Ps(this.size),!0,!0),l.addIndex(this.indexBuffer),this.dynamicStride=0;for(var E=0;E<this.dynamicProperties.length;++E){var C=this.dynamicProperties[E];C.offset=v,v+=C.size,this.dynamicStride+=C.size}var M=new ArrayBuffer(this.size*this.dynamicStride*16);this.dynamicData=new Float32Array(M),this.dynamicDataUint32=new Uint32Array(M),this.dynamicBuffer=new nW(this.dynamicData,!1,!1);var L=0;this.staticStride=0;for(var E=0;E<this.staticProperties.length;++E){var C=this.staticProperties[E];C.offset=L,L+=C.size,this.staticStride+=C.size}var U=new ArrayBuffer(this.size*this.staticStride*16);this.staticData=new Float32Array(U),this.staticDataUint32=new Uint32Array(U),this.staticBuffer=new nW(this.staticData,!0,!1);for(var E=0;E<this.dynamicProperties.length;++E){var C=this.dynamicProperties[E];l.addAttribute(C.attributeName,this.dynamicBuffer,0,C.type===iR.UNSIGNED_BYTE,C.type,4*this.dynamicStride,4*C.offset)}for(var E=0;E<this.staticProperties.length;++E){var C=this.staticProperties[E];l.addAttribute(C.attributeName,this.staticBuffer,0,C.type===iR.UNSIGNED_BYTE,C.type,4*this.staticStride,4*C.offset)}},i.prototype.uploadDynamic=function(l,v,E){for(var C=0;C<this.dynamicProperties.length;C++){var M=this.dynamicProperties[C];M.uploadFunction(l,v,E,M.type===iR.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,M.offset)}this.dynamicBuffer._updateID++},i.prototype.uploadStatic=function(l,v,E){for(var C=0;C<this.staticProperties.length;C++){var M=this.staticProperties[C];M.uploadFunction(l,v,E,M.type===iR.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,M.offset)}this.staticBuffer._updateID++},i.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},i}(),sg=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,sv=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`,s_=function(l){function r(v){var E=l.call(this,v)||this;return E.shader=null,E.properties=null,E.tempMatrix=new i0,E.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:E.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:E.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:E.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:E.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:iR.UNSIGNED_BYTE,uploadFunction:E.uploadTint,offset:0}],E.shader=ob.from(sv,sg,{}),E.state=ox.for2d(),E}return Mh(r,l),r.prototype.render=function(l){var v=l.children,E=l._maxSize,C=l._batchSize,M=this.renderer,L=v.length;if(0!==L){L>E&&!l.autoResize&&(L=E);var U=l._buffers;U||(U=l._buffers=this.generateBuffers(l));var B=v[0]._texture.baseTexture;this.state.blendMode=ia(l.blendMode,B.alphaMode),M.state.set(this.state);var k=M.gl,j=l.worldTransform.copyTo(this.tempMatrix);j.prepend(M.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=j.toArray(!0),this.shader.uniforms.uColor=ws(l.tintRgb,l.worldAlpha,this.shader.uniforms.uColor,B.alphaMode),this.shader.uniforms.uSampler=B,this.renderer.shader.bind(this.shader);for(var X=!1,G=0,H=0;G<L;G+=C,H+=1){var Y=L-G;Y>C&&(Y=C),H>=U.length&&U.push(this._generateOneMoreBuffer(l));var W=U[H];W.uploadDynamic(v,G,Y);var q=l._bufferUpdateIDs[H]||0;(X=X||W._updateID<q)&&(W._updateID=l._updateID,W.uploadStatic(v,G,Y)),M.geometry.bind(W.geometry),k.drawElements(k.TRIANGLES,6*Y,k.UNSIGNED_SHORT,0)}}},r.prototype.generateBuffers=function(l){for(var v=[],E=l._maxSize,C=l._batchSize,M=l._properties,L=0;L<E;L+=C)v.push(new sm(this.properties,M,C));return v},r.prototype._generateOneMoreBuffer=function(l){var v=l._batchSize,E=l._properties;return new sm(this.properties,E,v)},r.prototype.uploadVertices=function(l,v,E,C,M,L){for(var U=0,B=0,k=0,j=0,X=0;X<E;++X){var G=l[v+X],H=G._texture,Y=G.scale.x,W=G.scale.y,q=H.trim,Z=H.orig;q?(U=(B=q.x-G.anchor.x*Z.width)+q.width,k=(j=q.y-G.anchor.y*Z.height)+q.height):(U=Z.width*(1-G.anchor.x),B=-(Z.width*G.anchor.x),k=Z.height*(1-G.anchor.y),j=-(Z.height*G.anchor.y)),C[L]=B*Y,C[L+1]=j*W,C[L+M]=U*Y,C[L+M+1]=j*W,C[L+2*M]=U*Y,C[L+2*M+1]=k*W,C[L+3*M]=B*Y,C[L+3*M+1]=k*W,L+=4*M}},r.prototype.uploadPosition=function(l,v,E,C,M,L){for(var U=0;U<E;U++){var B=l[v+U].position;C[L]=B.x,C[L+1]=B.y,C[L+M]=B.x,C[L+M+1]=B.y,C[L+2*M]=B.x,C[L+2*M+1]=B.y,C[L+3*M]=B.x,C[L+3*M+1]=B.y,L+=4*M}},r.prototype.uploadRotation=function(l,v,E,C,M,L){for(var U=0;U<E;U++){var B=l[v+U].rotation;C[L]=B,C[L+M]=B,C[L+2*M]=B,C[L+3*M]=B,L+=4*M}},r.prototype.uploadUvs=function(l,v,E,C,M,L){for(var U=0;U<E;++U){var B=l[v+U]._texture._uvs;B?(C[L]=B.x0,C[L+1]=B.y0,C[L+M]=B.x1,C[L+M+1]=B.y1,C[L+2*M]=B.x2,C[L+2*M+1]=B.y2,C[L+3*M]=B.x3,C[L+3*M+1]=B.y3):(C[L]=0,C[L+1]=0,C[L+M]=0,C[L+M+1]=0,C[L+2*M]=0,C[L+2*M+1]=0,C[L+3*M]=0,C[L+3*M+1]=0),L+=4*M}},r.prototype.uploadTint=function(l,v,E,C,M,L){for(var U=0;U<E;++U){var B=l[v+U],k=B._texture.baseTexture.alphaMode>0,j=B.alpha,X=j<1&&k?li(B._tintRGB,j):B._tintRGB+(255*j<<24);C[L]=X,C[L+M]=X,C[L+2*M]=X,C[L+3*M]=X,L+=4*M}},r.prototype.destroy=function(){l.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},r}(n4);(sC=sL||(sL={})).MITER="miter",sC.BEVEL="bevel",sC.ROUND="round",(sR=sF||(sF={})).BUTT="butt",sR.ROUND="round",sR.SQUARE="square";var sb={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(l,v){if(void 0===v&&(v=20),!this.adaptive||!l||isNaN(l))return v;var E=Math.ceil(l/this.maxLength);return E<this.minSegments?E=this.minSegments:E>this.maxSegments&&(E=this.maxSegments),E}},sx=function(){function i(){this.color=16777215,this.alpha=1,this.texture=nG.WHITE,this.matrix=null,this.visible=!1,this.reset()}return i.prototype.clone=function(){var l=new i;return l.color=this.color,l.alpha=this.alpha,l.texture=this.texture,l.matrix=this.matrix,l.visible=this.visible,l},i.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=nG.WHITE,this.matrix=null,this.visible=!1},i.prototype.destroy=function(){this.texture=null,this.matrix=null},i}(),Tn=function(l,v){return(Tn=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(l,v){l.__proto__=v}||function(l,v){for(var E in v)v.hasOwnProperty(E)&&(l[E]=v[E])})(l,v)};function pi(l,v){function t(){this.constructor=l}Tn(l,v),l.prototype=null===v?Object.create(v):(t.prototype=v.prototype,new t)}var sT={build:function(l){l.points=l.shape.points.slice()},triangulate:function(l,v){var E=l.points,C=l.holes,M=v.points,L=v.indices;if(E.length>=6){for(var U=[],B=0;B<C.length;B++){var k=C[B];U.push(E.length/2),E=E.concat(k.points)}var j=t2(E,U,2);if(!j)return;for(var X=M.length/2,B=0;B<j.length;B+=3)L.push(j[B]+X),L.push(j[B+1]+X),L.push(j[B+2]+X);for(var B=0;B<E.length;B++)M.push(E[B])}}},sE={build:function(l){var v,E,C=l.shape,M=l.points,L=C.x,U=C.y;if(M.length=0,l.type===iH.CIRC)v=C.radius,E=C.radius;else{var B=l.shape;v=B.width,E=B.height}if(!(0===v||0===E)){var k=Math.floor(30*Math.sqrt(C.radius))||Math.floor(15*Math.sqrt(v+E));k/=2.3;for(var j=2*Math.PI/k,X=0;X<k-.5;X++)M.push(L+Math.sin(-j*X)*v,U+Math.cos(-j*X)*E);M.push(M[0],M[1])}},triangulate:function(l,v){var E=l.points,C=v.points,M=v.indices,L=C.length/2,U=L,B=l.shape,k=l.matrix,j=B.x,X=B.y;C.push(l.matrix?k.a*j+k.c*X+k.tx:j,l.matrix?k.b*j+k.d*X+k.ty:X);for(var G=0;G<E.length;G+=2)C.push(E[G],E[G+1]),M.push(L++,U,L)}},sI={build:function(l){var v=l.shape,E=v.x,C=v.y,M=v.width,L=v.height,U=l.points;U.length=0,U.push(E,C,E+M,C,E+M,C+L,E,C+L)},triangulate:function(l,v){var E=l.points,C=v.points,M=C.length/2;C.push(E[0],E[1],E[2],E[3],E[6],E[7],E[4],E[5]),v.indices.push(M,M+1,M+2,M+1,M+2,M+3)}};function Gr(l,v,E,C,M,L,U){void 0===U&&(U=[]);for(var B,k,j=U,X=0,G=0,H=0,Y=0,W=0,q=0,Z=0,K=0;Z<=20;++Z)X=l+(E-l)*(K=Z/20),G=v+(C-v)*K,H=E+(M-E)*K,Y=C+(L-C)*K,W=(B=X)+(H-B)*K,q=(k=G)+(Y-k)*K,j.push(W,q);return j}var sw={build:function(l){var v=l.shape,E=l.points,C=v.x,M=v.y,L=v.width,U=v.height,B=Math.max(0,Math.min(v.radius,Math.min(L,U)/2));E.length=0,B?(Gr(C,M+B,C,M,C+B,M,E),Gr(C+L-B,M,C+L,M,C+L,M+B,E),Gr(C+L,M+U-B,C+L,M+U,C+L-B,M+U,E),Gr(C+B,M+U,C,M+U,C,M+U-B,E)):E.push(C,M,C+L,M,C+L,M+U,C,M+U)},triangulate:function(l,v){for(var E=l.points,C=v.points,M=v.indices,L=C.length/2,U=t2(E,null,2),B=0,k=U.length;B<k;B+=3)M.push(U[B]+L),M.push(U[B+1]+L),M.push(U[B+2]+L);for(var B=0,k=E.length;B<k;B++)C.push(E[B],E[++B])}};function Oo(l,v,E,C,M,L,U,B){U?(k=C,j=-E):(k=-C,j=E);var k,j,X=l-E*M+k,G=v-C*M+j,H=l+E*L+k,Y=v+C*L+j;return B.push(X,G),B.push(H,Y),2}function Hr(l,v,E,C,M,L,U,B){var k=E-l,j=C-v,X=Math.atan2(k,j),G=Math.atan2(M-l,L-v);B&&X<G?X+=2*Math.PI:!B&&X>G&&(G+=2*Math.PI);var H=X,Y=G-X,W=Math.sqrt(k*k+j*j),q=(15*Math.abs(Y)*Math.sqrt(W)/Math.PI>>0)+1,Z=Y/q;if(H+=Z,B){U.push(l,v),U.push(E,C);for(var K=1,J=H;K<q;K++,J+=Z)U.push(l,v),U.push(l+Math.sin(J)*W,v+Math.cos(J)*W);U.push(l,v),U.push(M,L)}else{U.push(E,C),U.push(l,v);for(var K=1,J=H;K<q;K++,J+=Z)U.push(l+Math.sin(J)*W,v+Math.cos(J)*W),U.push(l,v);U.push(M,L),U.push(l,v)}return 2*q}function Pn(l,v){l.lineStyle.native?function(l,v){var E=0,C=l.shape,M=l.points||C.points,L=C.type!==iH.POLY||C.closeStroke;if(0!==M.length){var U=v.points,B=v.indices,k=M.length/2,j=U.length/2,X=j;for(U.push(M[0],M[1]),E=1;E<k;E++)U.push(M[2*E],M[2*E+1]),B.push(X,X+1),X++;L&&B.push(X,j)}}(l,v):function(l,v){var E=l.shape,C=l.points||E.points.slice(),M=v.closePointEps;if(0!==C.length){var L=l.lineStyle,U=new i$(C[0],C[1]),B=new i$(C[C.length-2],C[C.length-1]),k=E.type!==iH.POLY||E.closeStroke,j=Math.abs(U.x-B.x)<M&&Math.abs(U.y-B.y)<M;if(k){C=C.slice(),j&&(C.pop(),C.pop(),B.set(C[C.length-2],C[C.length-1]));var X=(U.x+B.x)*.5,G=(B.y+U.y)*.5;C.unshift(X,G),C.push(X,G)}var H=v.points,Y=C.length/2,W=C.length,q=H.length/2,Z=L.width/2,K=Z*Z,J=L.miterLimit*L.miterLimit,$=C[0],Q=C[1],tr=C[2],ti=C[3],tn=0,to=0,ts=-(Q-ti),th=$-tr,tl=0,tc=0,tp=Math.sqrt(ts*ts+th*th);ts/=tp,th/=tp,ts*=Z,th*=Z;var td=L.alignment,tf=(1-td)*2,ty=2*td;k||(L.cap===sF.ROUND?W+=Hr($-ts*(tf-ty)*.5,Q-th*(tf-ty)*.5,$-ts*tf,Q-th*tf,$+ts*ty,Q+th*ty,H,!0)+2:L.cap===sF.SQUARE&&(W+=Oo($,Q,ts,th,tf,ty,!0,H))),H.push($-ts*tf,Q-th*tf),H.push($+ts*ty,Q+th*ty);for(var tm=1;tm<Y-1;++tm){$=C[(tm-1)*2],Q=C[(tm-1)*2+1],tr=C[2*tm],ti=C[2*tm+1],tn=C[(tm+1)*2],to=C[(tm+1)*2+1],tp=Math.sqrt((ts=-(Q-ti))*ts+(th=$-tr)*th),ts/=tp,th/=tp,ts*=Z,th*=Z,tp=Math.sqrt((tl=-(ti-to))*tl+(tc=tr-tn)*tc),tl/=tp,tc/=tp,tl*=Z,tc*=Z;var tg=tr-$,tv=Q-ti,t_=tr-tn,tb=to-ti,tx=tv*t_-tb*tg,tT=tx<0;if(.1>Math.abs(tx)){H.push(tr-ts*tf,ti-th*tf),H.push(tr+ts*ty,ti+th*ty);continue}var tE=(-ts+$)*(-th+ti)-(-ts+tr)*(-th+Q),tI=(-tl+tn)*(-tc+ti)-(-tl+tr)*(-tc+to),tw=(tg*tI-t_*tE)/tx,tP=(tb*tE-tv*tI)/tx,tS=(tw-tr)*(tw-tr)+(tP-ti)*(tP-ti),tA=tr+(tw-tr)*tf,tO=ti+(tP-ti)*tf,tC=tr-(tw-tr)*ty,tR=ti-(tP-ti)*ty;L.join===sL.BEVEL||tS/K>J?(tT?(H.push(tA,tO),H.push(tr+ts*ty,ti+th*ty),H.push(tA,tO),H.push(tr+tl*ty,ti+tc*ty)):(H.push(tr-ts*tf,ti-th*tf),H.push(tC,tR),H.push(tr-tl*tf,ti-tc*tf),H.push(tC,tR)),W+=2):L.join===sL.ROUND?tT?(H.push(tA,tO),H.push(tr+ts*ty,ti+th*ty),W+=Hr(tr,ti,tr+ts*ty,ti+th*ty,tr+tl*ty,ti+tc*ty,H,!0)+4,H.push(tA,tO),H.push(tr+tl*ty,ti+tc*ty)):(H.push(tr-ts*tf,ti-th*tf),H.push(tC,tR),W+=Hr(tr,ti,tr-ts*tf,ti-th*tf,tr-tl*tf,ti-tc*tf,H,!1)+4,H.push(tr-tl*tf,ti-tc*tf),H.push(tC,tR)):(H.push(tA,tO),H.push(tC,tR))}$=C[(Y-2)*2],Q=C[(Y-2)*2+1],tr=C[(Y-1)*2],tp=Math.sqrt((ts=-(Q-(ti=C[(Y-1)*2+1])))*ts+(th=$-tr)*th),ts/=tp,th/=tp,ts*=Z,th*=Z,H.push(tr-ts*tf,ti-th*tf),H.push(tr+ts*ty,ti+th*ty),k||(L.cap===sF.ROUND?W+=Hr(tr-ts*(tf-ty)*.5,ti-th*(tf-ty)*.5,tr-ts*tf,ti-th*tf,tr+ts*ty,ti+th*ty,H,!1)+2:L.cap===sF.SQUARE&&(W+=Oo(tr,ti,ts,th,tf,ty,!1,H)));for(var tM=v.indices,tD=sb.epsilon*sb.epsilon,tm=q;tm<W+q-2;++tm)$=H[2*tm],Q=H[2*tm+1],tr=H[(tm+1)*2],ti=H[(tm+1)*2+1],tn=H[(tm+2)*2],Math.abs($*(ti-(to=H[(tm+2)*2+1]))+tr*(to-Q)+tn*(Q-ti))<tD||tM.push(tm,tm+1,tm+2)}}(l,v)}var sP,sS,sA,sO,sC,sR,sM,sD,sN,sL,sF,sU,sB=function(l){function r(v,E,C,M,L,U){void 0===U&&(U=0),L=L||M/2;for(var B=-1*Math.PI/2+U,k=2*C,j=iz/k,X=[],G=0;G<k;G++){var H=G%2?L:M,Y=G*j+B;X.push(v+H*Math.cos(Y),E+H*Math.sin(Y))}return l.call(this,X)||this}return pi(r,l),r}(iK),sk=function(){function i(){}return i.curveTo=function(l,v,E,C,M,L){var U=L[L.length-2],B=L[L.length-1]-v,k=U-l,j=C-v,X=E-l,G=Math.abs(B*X-k*j);if(G<1e-8||0===M)return(L[L.length-2]!==l||L[L.length-1]!==v)&&L.push(l,v),null;var H=B*B+k*k,Y=j*j+X*X,W=B*j+k*X,q=M*Math.sqrt(H)/G,Z=M*Math.sqrt(Y)/G,K=q*W/H,J=Z*W/Y,$=q*X+Z*k,Q=q*j+Z*B,tr=Math.atan2(B*(Z+K)-Q,k*(Z+K)-$),ti=Math.atan2(j*(q+J)-Q,X*(q+J)-$);return{cx:$+l,cy:Q+v,radius:M,startAngle:tr,endAngle:ti,anticlockwise:k*j>X*B}},i.arc=function(l,v,E,C,M,L,U,B,k){for(var j=U-L,X=sb._segmentsCount(Math.abs(j)*M,40*Math.ceil(Math.abs(j)/iz)),G=j/(2*X),H=2*G,Y=Math.cos(G),W=Math.sin(G),q=X-1,Z=q%1/q,K=0;K<=q;++K){var J=G+L+H*(K+Z*K),$=Math.cos(J),Q=-Math.sin(J);k.push((Y*$+W*Q)*M+E,(-(Y*Q)+W*$)*M+C)}},i}(),sj=function(){function i(){}return i.curveLength=function(l,v,E,C,M,L,U,B){for(var k=0,j=0,X=0,G=0,H=0,Y=0,W=0,q=0,Z=0,K=0,J=0,$=l,Q=v,tr=1;tr<=10;++tr)G=(X=(j=tr/10)*j)*j,q=(W=(Y=(H=1-j)*H)*H)*l+3*Y*j*E+3*H*X*M+G*U,Z=W*v+3*Y*j*C+3*H*X*L+G*B,K=$-q,J=Q-Z,$=q,Q=Z,k+=Math.sqrt(K*K+J*J);return k},i.curveTo=function(l,v,E,C,M,L,U){var B=U[U.length-2],k=U[U.length-1];U.length-=2;var j=sb._segmentsCount(i.curveLength(B,k,l,v,E,C,M,L)),X=0,G=0,H=0,Y=0,W=0;U.push(B,k);for(var q=1,Z=0;q<=j;++q)H=(G=(X=1-(Z=q/j))*X)*X,W=(Y=Z*Z)*Z,U.push(H*B+3*G*Z*l+3*X*Y*E+W*M,H*k+3*G*Z*v+3*X*Y*C+W*L)},i}(),sX=function(){function i(){}return i.curveLength=function(l,v,E,C,M,L){var U=l-2*E+M,B=v-2*C+L,k=2*E-2*l,j=2*C-2*v,X=4*(U*U+B*B),G=4*(U*k+B*j),H=k*k+j*j,Y=2*Math.sqrt(X+G+H),W=Math.sqrt(X),q=2*X*W,Z=2*Math.sqrt(H),K=G/W;return(q*Y+W*G*(Y-Z)+(4*H*X-G*G)*Math.log((2*W+K+Y)/(K+Z)))/(4*q)},i.curveTo=function(l,v,E,C,M){for(var L=M[M.length-2],U=M[M.length-1],B=sb._segmentsCount(i.curveLength(L,U,l,v,E,C)),k=0,j=0,X=1;X<=B;++X){var G=X/B;k=L+(l-L)*G,j=U+(v-U)*G,M.push(k+(l+(E-l)*G-k)*G,j+(v+(C-v)*G-j)*G)}},i}(),sG=function(){function i(){this.reset()}return i.prototype.begin=function(l,v,E){this.reset(),this.style=l,this.start=v,this.attribStart=E},i.prototype.end=function(l,v){this.attribSize=v-this.attribStart,this.size=l-this.start},i.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},i}(),sH=((sU={})[iH.POLY]=sT,sU[iH.CIRC]=sE,sU[iH.ELIP]=sE,sU[iH.RECT]=sI,sU[iH.RREC]=sw,sU),sz=[],sY=[],sV=function(){function i(l,v,E,C){void 0===v&&(v=null),void 0===E&&(E=null),void 0===C&&(C=null),this.shape=l,this.lineStyle=E,this.fillStyle=v,this.matrix=C,this.type=l.type,this.points=[],this.holes=[]}return i.prototype.clone=function(){return new i(this.shape,this.fillStyle,this.lineStyle,this.matrix)},i.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},i}(),sW=new i$,sq=new nt,sZ=function(l){function r(){var v=l.call(this)||this;return v.uvsFloat32=null,v.indicesUint16=null,v.points=[],v.colors=[],v.uvs=[],v.indices=[],v.textureIds=[],v.graphicsData=[],v.dirty=0,v.batchDirty=-1,v.cacheDirty=-1,v.clearDirty=0,v.drawCalls=[],v.batches=[],v.shapeIndex=0,v._bounds=new nt,v.boundsDirty=-1,v.boundsPadding=0,v.batchable=!1,v.indicesUint16=null,v.uvsFloat32=null,v.closePointEps=1e-4,v}return pi(r,l),Object.defineProperty(r.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),r.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var l=0;l<this.drawCalls.length;l++)this.drawCalls[l].texArray.clear(),sY.push(this.drawCalls[l]);this.drawCalls.length=0;for(var l=0;l<this.batches.length;l++){var v=this.batches[l];v.reset(),sz.push(v)}this.batches.length=0},r.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},r.prototype.drawShape=function(l,v,E,C){void 0===v&&(v=null),void 0===E&&(E=null),void 0===C&&(C=null);var M=new sV(l,v,E,C);return this.graphicsData.push(M),this.dirty++,this},r.prototype.drawHole=function(l,v){if(void 0===v&&(v=null),!this.graphicsData.length)return null;var E=new sV(l,null,null,v),C=this.graphicsData[this.graphicsData.length-1];return E.lineStyle=C.lineStyle,C.holes.push(E),this.dirty++,this},r.prototype.destroy=function(){l.prototype.destroy.call(this);for(var v=0;v<this.graphicsData.length;++v)this.graphicsData[v].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},r.prototype.containsPoint=function(l){for(var v=this.graphicsData,E=0;E<v.length;++E){var C=v[E];if(C.fillStyle.visible&&C.shape&&(C.matrix?C.matrix.applyInverse(l,sW):sW.copyFrom(l),C.shape.contains(sW.x,sW.y))){var M=!1;if(C.holes){for(var L=0;L<C.holes.length;L++)if(C.holes[L].shape.contains(sW.x,sW.y)){M=!0;break}}if(!M)return!0}}return!1},r.prototype.updateBatches=function(l){if(!this.graphicsData.length){this.batchable=!0;return}if(this.validateBatching()){this.cacheDirty=this.dirty;var v=this.uvs,E=this.graphicsData,C=null,M=null;this.batches.length>0&&(M=(C=this.batches[this.batches.length-1]).style);for(var L=this.shapeIndex;L<E.length;L++){this.shapeIndex++;var U=E[L],B=U.fillStyle,k=U.lineStyle;sH[U.type].build(U),U.matrix&&this.transformPoints(U.points,U.matrix);for(var j=0;j<2;j++){var X=0===j?B:k;if(X.visible){var G=X.texture.baseTexture,H=this.indices.length,Y=this.points.length/2;G.wrapMode=iD.REPEAT,0===j?this.processFill(U):this.processLine(U);var W=this.points.length/2-Y;0!==W&&(C&&!this._compareStyles(M,X)&&(C.end(H,Y),C=null),C||((C=sz.pop()||new sG).begin(X,H,Y),this.batches.push(C),M=X),this.addUvs(this.points,v,X.texture,Y,W,X.matrix))}}}var q=this.indices.length,Z=this.points.length/2;if(C&&C.end(q,Z),0===this.batches.length){this.batchable=!0;return}if(this.indicesUint16&&this.indices.length===this.indicesUint16.length)this.indicesUint16.set(this.indices);else{var K=Z>65535&&l;this.indicesUint16=K?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}},r.prototype._compareStyles=function(l,v){return!(!l||!v||l.texture.baseTexture!==v.texture.baseTexture||l.color+l.alpha!==v.color+v.alpha||!!l.native!=!!v.native)},r.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var l=0,v=this.graphicsData.length;l<v;l++){var E=this.graphicsData[l],C=E.fillStyle,M=E.lineStyle;if(C&&!C.texture.baseTexture.valid||M&&!M.texture.baseTexture.valid)return!1}return!0},r.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var l=this.batches,v=0,E=l.length;v<E;v++)for(var C=l[v],M=0;M<C.size;M++){var L=C.start+M;this.indicesUint16[L]=this.indicesUint16[L]-C.attribStart}},r.prototype.isBatchable=function(){if(this.points.length>131070)return!1;for(var l=this.batches,v=0;v<l.length;v++)if(l[v].style.native)return!1;return this.points.length<2*r.BATCHABLE_SIZE},r.prototype.buildDrawCalls=function(){for(var l=++nP._globalBatch,v=0;v<this.drawCalls.length;v++)this.drawCalls[v].texArray.clear(),sY.push(this.drawCalls[v]);this.drawCalls.length=0;var E=this.colors,C=this.textureIds,M=sY.pop();M||((M=new ni).texArray=new oJ),M.texArray.count=0,M.start=0,M.size=0,M.type=iA.TRIANGLES;var L=0,U=null,B=0,k=!1,j=iA.TRIANGLES,X=0;this.drawCalls.push(M);for(var v=0;v<this.batches.length;v++){var G=this.batches[v],H=G.style,Y=H.texture.baseTexture;!!H.native!==k&&(j=(k=!!H.native)?iA.LINES:iA.TRIANGLES,U=null,L=8,l++),U!==Y&&(U=Y,Y._batchEnabled!==l&&(8===L&&(l++,L=0,M.size>0&&((M=sY.pop())||((M=new ni).texArray=new oJ),this.drawCalls.push(M)),M.start=X,M.size=0,M.texArray.count=0,M.type=j),Y.touched=1,Y._batchEnabled=l,Y._batchLocation=L,Y.wrapMode=10497,M.texArray.elements[M.texArray.count++]=Y,L++)),M.size+=G.size,X+=G.size,B=Y._batchLocation,this.addColors(E,H.color,H.alpha,G.attribSize),this.addTextureIds(C,B,G.attribSize)}nP._globalBatch=l,this.packAttributes()},r.prototype.packAttributes=function(){for(var l=this.points,v=this.uvs,E=this.colors,C=this.textureIds,M=new ArrayBuffer(12*l.length),L=new Float32Array(M),U=new Uint32Array(M),B=0,k=0;k<l.length/2;k++)L[B++]=l[2*k],L[B++]=l[2*k+1],L[B++]=v[2*k],L[B++]=v[2*k+1],U[B++]=E[k],L[B++]=C[k];this._buffer.update(M),this._indexBuffer.update(this.indicesUint16)},r.prototype.processFill=function(l){l.holes.length?(this.processHoles(l.holes),sT.triangulate(l,this)):sH[l.type].triangulate(l,this)},r.prototype.processLine=function(l){Pn(l,this);for(var v=0;v<l.holes.length;v++)Pn(l.holes[v],this)},r.prototype.processHoles=function(l){for(var v=0;v<l.length;v++){var E=l[v];sH[E.type].build(E),E.matrix&&this.transformPoints(E.points,E.matrix)}},r.prototype.calculateBounds=function(){var l=this._bounds,v=i0.IDENTITY;this._bounds.clear(),sq.clear();for(var E=0;E<this.graphicsData.length;E++){var C=this.graphicsData[E],M=C.shape,L=C.type,U=C.lineStyle,B=C.matrix||i0.IDENTITY,k=0;if(U&&U.visible){var j=U.alignment;k=U.width,L===iH.POLY?k*=.5+Math.abs(.5-j):k*=Math.max(0,j)}(v!==B&&(sq.isEmpty()||(l.addBoundsMatrix(sq,v),sq.clear()),v=B),L===iH.RECT||L===iH.RREC)?sq.addFramePad(M.x,M.y,M.x+M.width,M.y+M.height,k,k):L===iH.CIRC?sq.addFramePad(M.x,M.y,M.x,M.y,M.radius+k,M.radius+k):L===iH.ELIP?sq.addFramePad(M.x,M.y,M.x,M.y,M.width+k,M.height+k):l.addVerticesMatrix(v,M.points,0,M.points.length,k,k)}sq.isEmpty()||l.addBoundsMatrix(sq,v),l.pad(this.boundsPadding,this.boundsPadding)},r.prototype.transformPoints=function(l,v){for(var E=0;E<l.length/2;E++){var C=l[2*E],M=l[2*E+1];l[2*E]=v.a*C+v.c*M+v.tx,l[2*E+1]=v.b*C+v.d*M+v.ty}},r.prototype.addColors=function(l,v,E,C){for(var M=li((v>>16)+(65280&v)+((255&v)<<16),E);C-- >0;)l.push(M)},r.prototype.addTextureIds=function(l,v,E){for(;E-- >0;)l.push(v)},r.prototype.addUvs=function(l,v,E,C,M,L){void 0===L&&(L=null);for(var U=0,B=v.length,k=E.frame;U<M;){var j=l[(C+U)*2],X=l[(C+U)*2+1];if(L){var G=L.a*j+L.c*X+L.tx;X=L.b*j+L.d*X+L.ty,j=G}U++,v.push(j/k.width,X/k.height)}var H=E.baseTexture;(k.width<H.width||k.height<H.height)&&this.adjustUvs(v,E,B,M)},r.prototype.adjustUvs=function(l,v,E,C){for(var M=v.baseTexture,L=E+2*C,U=v.frame,B=U.width/M.width,k=U.height/M.height,j=U.x/U.width,X=U.y/U.height,G=Math.floor(l[E]+1e-6),H=Math.floor(l[E+1]+1e-6),Y=E+2;Y<L;Y+=2)G=Math.min(G,Math.floor(l[Y]+1e-6)),H=Math.min(H,Math.floor(l[Y+1]+1e-6));j-=G,X-=H;for(var Y=E;Y<L;Y+=2)l[Y]=(l[Y]+j)*B,l[Y+1]=(l[Y+1]+X)*k},r.BATCHABLE_SIZE=100,r}(o1),sK=function(l){function r(){var v=null!==l&&l.apply(this,arguments)||this;return v.width=0,v.alignment=.5,v.native=!1,v.cap=sF.BUTT,v.join=sL.MITER,v.miterLimit=10,v}return pi(r,l),r.prototype.clone=function(){var l=new r;return l.color=this.color,l.alpha=this.alpha,l.texture=this.texture,l.matrix=this.matrix,l.visible=this.visible,l.width=this.width,l.alignment=this.alignment,l.native=this.native,l.cap=this.cap,l.join=this.join,l.miterLimit=this.miterLimit,l},r.prototype.reset=function(){l.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},r}(sx),sJ=new Float32Array(3),s$={},sQ=function(l){function r(v){void 0===v&&(v=null);var E=l.call(this)||this;return E._geometry=v||new sZ,E._geometry.refCount++,E.shader=null,E.state=ox.for2d(),E._fillStyle=new sx,E._lineStyle=new sK,E._matrix=null,E._holeMode=!1,E.currentPath=null,E.batches=[],E.batchTint=-1,E.batchDirty=-1,E.vertexData=null,E.pluginName="batch",E._transformID=-1,E.tint=16777215,E.blendMode=iS.NORMAL,E}return pi(r,l),Object.defineProperty(r.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),r.prototype.clone=function(){return this.finishPoly(),new r(this._geometry)},Object.defineProperty(r.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(l){this.state.blendMode=l},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tint",{get:function(){return this._tint},set:function(l){this._tint=l},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),r.prototype.lineStyle=function(l){if(void 0===l&&(l=null),"number"==typeof l){var v=arguments;l={width:v[0]||0,color:v[1]||0,alpha:void 0!==v[2]?v[2]:1,alignment:void 0!==v[3]?v[3]:.5,native:!!v[4]}}return this.lineTextureStyle(l)},r.prototype.lineTextureStyle=function(l){if("number"==typeof l){I("v5.2.0","Please use object-based options for Graphics#lineTextureStyle");var v=arguments;Object.keys(l={width:v[0],texture:v[1],color:v[2],alpha:v[3],matrix:v[4],alignment:v[5],native:v[6]}).forEach(function(v){return void 0===l[v]&&delete l[v]})}l=Object.assign({width:0,texture:nG.WHITE,color:l&&l.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:sF.BUTT,join:sL.MITER,miterLimit:10},l),this.currentPath&&this.startPoly();var E=l.width>0&&l.alpha>0;return E?(l.matrix&&(l.matrix=l.matrix.clone(),l.matrix.invert()),Object.assign(this._lineStyle,{visible:E},l)):this._lineStyle.reset(),this},r.prototype.startPoly=function(){if(this.currentPath){var l=this.currentPath.points,v=this.currentPath.points.length;v>2&&(this.drawShape(this.currentPath),this.currentPath=new iK,this.currentPath.closeStroke=!1,this.currentPath.points.push(l[v-2],l[v-1]))}else this.currentPath=new iK,this.currentPath.closeStroke=!1},r.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},r.prototype.moveTo=function(l,v){return this.startPoly(),this.currentPath.points[0]=l,this.currentPath.points[1]=v,this},r.prototype.lineTo=function(l,v){this.currentPath||this.moveTo(0,0);var E=this.currentPath.points,C=E[E.length-2],M=E[E.length-1];return(C!==l||M!==v)&&E.push(l,v),this},r.prototype._initCurve=function(l,v){void 0===l&&(l=0),void 0===v&&(v=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[l,v]):this.moveTo(l,v)},r.prototype.quadraticCurveTo=function(l,v,E,C){this._initCurve();var M=this.currentPath.points;return 0===M.length&&this.moveTo(0,0),sX.curveTo(l,v,E,C,M),this},r.prototype.bezierCurveTo=function(l,v,E,C,M,L){return this._initCurve(),sj.curveTo(l,v,E,C,M,L,this.currentPath.points),this},r.prototype.arcTo=function(l,v,E,C,M){this._initCurve(l,v);var L=this.currentPath.points,U=sk.curveTo(l,v,E,C,M,L);if(U){var B=U.cx,k=U.cy,j=U.radius,X=U.startAngle,G=U.endAngle,H=U.anticlockwise;this.arc(B,k,j,X,G,H)}return this},r.prototype.arc=function(l,v,E,C,M,L){if(void 0===L&&(L=!1),C===M||(!L&&M<=C?M+=iz:L&&C<=M&&(C+=iz),0==M-C))return this;var U=l+Math.cos(C)*E,B=v+Math.sin(C)*E,k=this._geometry.closePointEps,j=this.currentPath?this.currentPath.points:null;if(j){var X=Math.abs(j[j.length-2]-U),G=Math.abs(j[j.length-1]-B);X<k&&G<k||j.push(U,B)}else this.moveTo(U,B),j=this.currentPath.points;return sk.arc(U,B,l,v,E,C,M,L,j),this},r.prototype.beginFill=function(l,v){return void 0===l&&(l=0),void 0===v&&(v=1),this.beginTextureFill({texture:nG.WHITE,color:l,alpha:v})},r.prototype.beginTextureFill=function(l){if(l instanceof nG){I("v5.2.0","Please use object-based options for Graphics#beginTextureFill");var v=arguments;Object.keys(l={texture:v[0],color:v[1],alpha:v[2],matrix:v[3]}).forEach(function(v){return void 0===l[v]&&delete l[v]})}l=Object.assign({texture:nG.WHITE,color:16777215,alpha:1,matrix:null},l),this.currentPath&&this.startPoly();var E=l.alpha>0;return E?(l.matrix&&(l.matrix=l.matrix.clone(),l.matrix.invert()),Object.assign(this._fillStyle,{visible:E},l)):this._fillStyle.reset(),this},r.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},r.prototype.drawRect=function(l,v,E,C){return this.drawShape(new iW(l,v,E,C))},r.prototype.drawRoundedRect=function(l,v,E,C,M){return this.drawShape(new iJ(l,v,E,C,M))},r.prototype.drawCircle=function(l,v,E){return this.drawShape(new iq(l,v,E))},r.prototype.drawEllipse=function(l,v,E,C){return this.drawShape(new iZ(l,v,E,C))},r.prototype.drawPolygon=function(){for(var l=arguments,v=[],E=0;E<arguments.length;E++)v[E]=l[E];var C,M=!0,L=v[0];L.points?(M=L.closeStroke,C=L.points):C=Array.isArray(v[0])?v[0]:v;var U=new iK(C);return U.closeStroke=M,this.drawShape(U),this},r.prototype.drawShape=function(l){return this._holeMode?this._geometry.drawHole(l,this._matrix):this._geometry.drawShape(l,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},r.prototype.drawStar=function(l,v,E,C,M,L){return void 0===L&&(L=0),this.drawPolygon(new sB(l,v,E,C,M,L))},r.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},r.prototype.isFastRect=function(){var l=this._geometry.graphicsData;return 1===l.length&&l[0].shape.type===iH.RECT&&!(l[0].lineStyle.visible&&l[0].lineStyle.width)},r.prototype._render=function(l){this.finishPoly();var v=this._geometry,E=l.context.supports.uint32Indices;v.updateBatches(E),v.batchable?(this.batchDirty!==v.batchDirty&&this._populateBatches(),this._renderBatched(l)):(l.batch.flush(),this._renderDirect(l))},r.prototype._populateBatches=function(){var l=this._geometry,v=this.blendMode,E=l.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=l.batchDirty,this.batches.length=E,this.vertexData=new Float32Array(l.points);for(var C=0;C<E;C++){var M=l.batches[C],L=M.style.color,U=new Float32Array(this.vertexData.buffer,8*M.attribStart,2*M.attribSize),B=new Float32Array(l.uvsFloat32.buffer,8*M.attribStart,2*M.attribSize),k={vertexData:U,blendMode:v,indices:new Uint16Array(l.indicesUint16.buffer,2*M.start,M.size),uvs:B,_batchRGB:xe(L),_tintRGB:L,_texture:M.style.texture,alpha:M.style.alpha,worldAlpha:1};this.batches[C]=k}},r.prototype._renderBatched=function(l){if(this.batches.length){l.batch.setObjectRenderer(l.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var v=0,E=this.batches.length;v<E;v++){var C=this.batches[v];C.worldAlpha=this.worldAlpha*C.alpha,l.plugins[this.pluginName].render(C)}}},r.prototype._renderDirect=function(l){var v=this._resolveDirectShader(l),E=this._geometry,C=this.tint,M=this.worldAlpha,L=v.uniforms,U=E.drawCalls;L.translationMatrix=this.transform.worldTransform,L.tint[0]=(C>>16&255)/255*M,L.tint[1]=(C>>8&255)/255*M,L.tint[2]=(255&C)/255*M,L.tint[3]=M,l.shader.bind(v),l.geometry.bind(E,v),l.state.set(this.state);for(var B=0,k=U.length;B<k;B++)this._renderDrawCallDirect(l,E.drawCalls[B])},r.prototype._renderDrawCallDirect=function(l,v){for(var E=v.texArray,C=v.type,M=v.size,L=v.start,U=E.count,B=0;B<U;B++)l.texture.bind(E.elements[B],B);l.geometry.draw(C,M,L)},r.prototype._resolveDirectShader=function(l){var v=this.shader,E=this.pluginName;if(!v){if(!s$[E]){for(var C=new Int32Array(16),M=0;M<16;M++)C[M]=M;var L={tint:new Float32Array([1,1,1,1]),translationMatrix:new i0,default:n2.from({uSamplers:C},!0)},U=l.plugins[E]._shader.program;s$[E]=new ob(U,L)}v=s$[E]}return v},r.prototype._calculateBounds=function(){this.finishPoly();var l=this._geometry;if(l.graphicsData.length){var v=l.bounds,E=v.minX,C=v.minY,M=v.maxX,L=v.maxY;this._bounds.addFrame(this.transform,E,C,M,L)}},r.prototype.containsPoint=function(l){return this.worldTransform.applyInverse(l,r._TEMP_POINT),this._geometry.containsPoint(r._TEMP_POINT)},r.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var l=xe(this.tint,sJ),v=0;v<this.batches.length;v++){var E=this.batches[v],C=E._batchRGB,M=(l[0]*C[0]*255<<16)+(l[1]*C[1]*255<<8)+(0|l[2]*C[2]*255);E._tintRGB=(M>>16)+(65280&M)+((255&M)<<16)}}},r.prototype.calculateVertices=function(){var l=this.transform._worldID;if(this._transformID!==l){this._transformID=l;for(var v=this.transform.worldTransform,E=v.a,C=v.b,M=v.c,L=v.d,U=v.tx,B=v.ty,k=this._geometry.points,j=this.vertexData,X=0,G=0;G<k.length;G+=2){var H=k[G],Y=k[G+1];j[X++]=E*H+M*Y+U,j[X++]=L*Y+C*H+B}}},r.prototype.closePath=function(){var l=this.currentPath;return l&&(l.closeStroke=!0),this},r.prototype.setMatrix=function(l){return this._matrix=l,this},r.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},r.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},r.prototype.destroy=function(v){l.prototype.destroy.call(this,v),this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,l.prototype.destroy.call(this,v)},r._TEMP_POINT=new i$,r}(no),An=function(l,v){return(An=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(l,v){l.__proto__=v}||function(l,v){for(var E in v)v.hasOwnProperty(E)&&(l[E]=v[E])})(l,v)},s0=new i$,s1=new Uint16Array([0,1,2,0,2,3]),s2=function(l){function r(v){var E=l.call(this)||this;return E._anchor=new iQ(E._onAnchorUpdate,E,v?v.defaultAnchor.x:0,v?v.defaultAnchor.y:0),E._texture=null,E._width=0,E._height=0,E._tint=null,E._tintRGB=null,E.tint=16777215,E.blendMode=iS.NORMAL,E._cachedTint=16777215,E.uvs=null,E.texture=v||nG.EMPTY,E.vertexData=new Float32Array(8),E.vertexTrimmedData=null,E._transformID=-1,E._textureID=-1,E._transformTrimmedID=-1,E._textureTrimmedID=-1,E.indices=s1,E.pluginName="batch",E.isSprite=!0,E._roundPixels=tK.ROUND_PIXELS,E}return!function(l,v){function t(){this.constructor=l}An(l,v),l.prototype=null===v?Object.create(v):(t.prototype=v.prototype,new t)}(r,l),r.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=ce(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=ce(this.scale.y)*this._height/this._texture.orig.height)},r.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},r.prototype.calculateVertices=function(){var l=this._texture;if(!(this._transformID===this.transform._worldID&&this._textureID===l._updateID)){this._textureID!==l._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=l._updateID;var v=this.transform.worldTransform,E=v.a,C=v.b,M=v.c,L=v.d,U=v.tx,B=v.ty,k=this.vertexData,j=l.trim,X=l.orig,G=this._anchor,H=0,Y=0,W=0,q=0;if(j?(H=(Y=j.x-G._x*X.width)+j.width,W=(q=j.y-G._y*X.height)+j.height):(H=(Y=-G._x*X.width)+X.width,W=(q=-G._y*X.height)+X.height),k[0]=E*Y+M*q+U,k[1]=L*q+C*Y+B,k[2]=E*H+M*q+U,k[3]=L*q+C*H+B,k[4]=E*H+M*W+U,k[5]=L*W+C*H+B,k[6]=E*Y+M*W+U,k[7]=L*W+C*Y+B,this._roundPixels)for(var Z=tK.RESOLUTION,K=0;K<k.length;++K)k[K]=Math.round((k[K]*Z|0)/Z)}},r.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var l=this._texture,v=this.vertexTrimmedData,E=l.orig,C=this._anchor,M=this.transform.worldTransform,L=M.a,U=M.b,B=M.c,k=M.d,j=M.tx,X=M.ty,G=-C._x*E.width,H=G+E.width,Y=-C._y*E.height,W=Y+E.height;v[0]=L*G+B*Y+j,v[1]=k*Y+U*G+X,v[2]=L*H+B*Y+j,v[3]=k*Y+U*H+X,v[4]=L*H+B*W+j,v[5]=k*W+U*H+X,v[6]=L*G+B*W+j,v[7]=k*W+U*G+X},r.prototype._render=function(l){this.calculateVertices(),l.batch.setObjectRenderer(l.plugins[this.pluginName]),l.plugins[this.pluginName].render(this)},r.prototype._calculateBounds=function(){var l=this._texture.trim,v=this._texture.orig;l&&(l.width!==v.width||l.height!==v.height)?(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData)):(this.calculateVertices(),this._bounds.addQuad(this.vertexData))},r.prototype.getLocalBounds=function(v){return 0===this.children.length?(this._bounds.minX=-(this._texture.orig.width*this._anchor._x),this._bounds.minY=-(this._texture.orig.height*this._anchor._y),this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),v||(this._localBoundsRect||(this._localBoundsRect=new iW),v=this._localBoundsRect),this._bounds.getRectangle(v)):l.prototype.getLocalBounds.call(this,v)},r.prototype.containsPoint=function(l){this.worldTransform.applyInverse(l,s0);var v=this._texture.orig.width,E=this._texture.orig.height,C=-v*this.anchor.x,M=0;return s0.x>=C&&s0.x<C+v&&(M=-E*this.anchor.y,s0.y>=M&&s0.y<M+E)},r.prototype.destroy=function(v){if(l.prototype.destroy.call(this,v),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof v?v:v&&v.texture){var E="boolean"==typeof v?v:v&&v.baseTexture;this._texture.destroy(!!E)}this._texture=null},r.from=function(l,v){var E=l instanceof nG?l:nG.from(l,v);return new r(E)},Object.defineProperty(r.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(l){this._roundPixels!==l&&(this._transformID=-1),this._roundPixels=l},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(l){var v=ce(this.scale.x)||1;this.scale.x=v*l/this._texture.orig.width,this._width=l},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(l){var v=ce(this.scale.y)||1;this.scale.y=v*l/this._texture.orig.height,this._height=l},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"anchor",{get:function(){return this._anchor},set:function(l){this._anchor.copyFrom(l)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tint",{get:function(){return this._tint},set:function(l){this._tint=l,this._tintRGB=(l>>16)+(65280&l)+((255&l)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"texture",{get:function(){return this._texture},set:function(l){this._texture!==l&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=l||nG.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,l&&(l.baseTexture.valid?this._onTextureUpdate():l.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),r}(no),On=function(l,v){return(On=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(l,v){l.__proto__=v}||function(l,v){for(var E in v)v.hasOwnProperty(E)&&(l[E]=v[E])})(l,v)};(C=tr||(tr={}))[C.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",C[C.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL";var s3={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:tr.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},s5=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],s4=function(){function i(l){this.styleID=0,this.reset(),Yi(this,l,l)}return i.prototype.clone=function(){var l={};return Yi(l,this,s3),new i(l)},i.prototype.reset=function(){Yi(this,s3,s3)},Object.defineProperty(i.prototype,"align",{get:function(){return this._align},set:function(l){this._align!==l&&(this._align=l,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"breakWords",{get:function(){return this._breakWords},set:function(l){this._breakWords!==l&&(this._breakWords=l,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(l){this._dropShadow!==l&&(this._dropShadow=l,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(l){this._dropShadowAlpha!==l&&(this._dropShadowAlpha=l,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(l){this._dropShadowAngle!==l&&(this._dropShadowAngle=l,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(l){this._dropShadowBlur!==l&&(this._dropShadowBlur=l,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(l){var v=Wi(l);this._dropShadowColor!==v&&(this._dropShadowColor=v,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(l){this._dropShadowDistance!==l&&(this._dropShadowDistance=l,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fill",{get:function(){return this._fill},set:function(l){var v=Wi(l);this._fill!==v&&(this._fill=v,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(l){this._fillGradientType!==l&&(this._fillGradientType=l,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(l){(function(l,v){if(!Array.isArray(l)||!Array.isArray(v)||l.length!==v.length)return!1;for(var E=0;E<l.length;++E)if(l[E]!==v[E])return!1;return!0})(this._fillGradientStops,l)||(this._fillGradientStops=l,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(l){this.fontFamily!==l&&(this._fontFamily=l,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontSize",{get:function(){return this._fontSize},set:function(l){this._fontSize!==l&&(this._fontSize=l,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(l){this._fontStyle!==l&&(this._fontStyle=l,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(l){this._fontVariant!==l&&(this._fontVariant=l,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(l){this._fontWeight!==l&&(this._fontWeight=l,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(l){this._letterSpacing!==l&&(this._letterSpacing=l,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(l){this._lineHeight!==l&&(this._lineHeight=l,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"leading",{get:function(){return this._leading},set:function(l){this._leading!==l&&(this._leading=l,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(l){this._lineJoin!==l&&(this._lineJoin=l,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(l){this._miterLimit!==l&&(this._miterLimit=l,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"padding",{get:function(){return this._padding},set:function(l){this._padding!==l&&(this._padding=l,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"stroke",{get:function(){return this._stroke},set:function(l){var v=Wi(l);this._stroke!==v&&(this._stroke=v,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(l){this._strokeThickness!==l&&(this._strokeThickness=l,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(l){this._textBaseline!==l&&(this._textBaseline=l,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"trim",{get:function(){return this._trim},set:function(l){this._trim!==l&&(this._trim=l,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(l){this._whiteSpace!==l&&(this._whiteSpace=l,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(l){this._wordWrap!==l&&(this._wordWrap=l,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(l){this._wordWrapWidth!==l&&(this._wordWrapWidth=l,this.styleID++)},enumerable:!1,configurable:!0}),i.prototype.toFontString=function(){var l="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,v=this.fontFamily;Array.isArray(this.fontFamily)||(v=this.fontFamily.split(","));for(var E=v.length-1;E>=0;E--){var C=v[E].trim();!/([\"\'])[^\'\"]+\1/.test(C)&&0>s5.indexOf(C)&&(C='"'+C+'"'),v[E]=C}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+l+" "+v.join(",")},i}();function Co(l){return"number"==typeof l?ta(l):("string"==typeof l&&0===l.indexOf("0x")&&(l=l.replace("0x","#")),l)}function Wi(l){if(!Array.isArray(l))return Co(l);for(var v=0;v<l.length;++v)l[v]=Co(l[v]);return l}function Yi(l,v,E){for(var C in E)Array.isArray(v[C])?l[C]=v[C].slice():l[C]=v[C]}var s6=function(){function i(l,v,E,C,M,L,U,B,k){this.text=l,this.style=v,this.width=E,this.height=C,this.lines=M,this.lineWidths=L,this.lineHeight=U,this.maxLineWidth=B,this.fontProperties=k}return i.measureText=function(l,v,E,C){void 0===C&&(C=i._canvas),E=E??v.wordWrap;var M=v.toFontString(),L=i.measureFont(M);0===L.fontSize&&(L.fontSize=v.fontSize,L.ascent=v.fontSize);var U=C.getContext("2d");U.font=M;for(var B=E?i.wordWrap(l,v,C):l,k=B.split(/(?:\r\n|\r|\n)/),j=Array(k.length),X=0,G=0;G<k.length;G++){var H=U.measureText(k[G]).width+(k[G].length-1)*v.letterSpacing;j[G]=H,X=Math.max(X,H)}var Y=X+v.strokeThickness;v.dropShadow&&(Y+=v.dropShadowDistance);var W=v.lineHeight||L.fontSize+v.strokeThickness,q=Math.max(W,L.fontSize+v.strokeThickness)+(k.length-1)*(W+v.leading);return v.dropShadow&&(q+=v.dropShadowDistance),new i(l,v,Y,q,k,j,W+v.leading,X,L)},i.wordWrap=function(l,v,E){void 0===E&&(E=i._canvas);for(var C=E.getContext("2d"),M=0,L="",U="",B={},k=v.letterSpacing,j=v.whiteSpace,X=i.collapseSpaces(j),G=i.collapseNewlines(j),H=!X,Y=v.wordWrapWidth+k,W=i.tokenize(l),q=0;q<W.length;q++){var Z=W[q];if(i.isNewline(Z)){if(!G){U+=i.addLine(L),H=!X,L="",M=0;continue}Z=" "}if(X){var K=i.isBreakingSpace(Z),J=i.isBreakingSpace(L[L.length-1]);if(K&&J)continue}var $=i.getFromCache(Z,k,B,C);if($>Y){if(""!==L&&(U+=i.addLine(L),L="",M=0),i.canBreakWords(Z,v.breakWords))for(var Q=i.wordWrapSplit(Z),tr=0;tr<Q.length;tr++){for(var ti=Q[tr],tn=1;Q[tr+tn];){var to=Q[tr+tn],ts=ti[ti.length-1];if(i.canBreakChars(ts,to,Z,tr,v.breakWords))break;ti+=to,tn++}tr+=ti.length-1;var th=i.getFromCache(ti,k,B,C);th+M>Y&&(U+=i.addLine(L),H=!1,L="",M=0),L+=ti,M+=th}else{L.length>0&&(U+=i.addLine(L),L="",M=0);var tl=q===W.length-1;U+=i.addLine(Z,!tl),H=!1,L="",M=0}}else $+M>Y&&(H=!1,U+=i.addLine(L),L="",M=0),(L.length>0||!i.isBreakingSpace(Z)||H)&&(L+=Z,M+=$)}return U+i.addLine(L,!1)},i.addLine=function(l,v){return void 0===v&&(v=!0),l=i.trimRight(l),l=v?l+`
`:l},i.getFromCache=function(l,v,E,C){var M=E[l];if(void 0===M){var L=l.length*v;M=C.measureText(l).width+L,E[l]=M}return M},i.collapseSpaces=function(l){return"normal"===l||"pre-line"===l},i.collapseNewlines=function(l){return"normal"===l},i.trimRight=function(l){if("string"!=typeof l)return"";for(var v=l.length-1;v>=0;v--){var E=l[v];if(!i.isBreakingSpace(E))break;l=l.slice(0,-1)}return l},i.isNewline=function(l){return"string"==typeof l&&i._newlines.indexOf(l.charCodeAt(0))>=0},i.isBreakingSpace=function(l){return"string"==typeof l&&i._breakingSpaces.indexOf(l.charCodeAt(0))>=0},i.tokenize=function(l){var v=[],E="";if("string"!=typeof l)return v;for(var C=0;C<l.length;C++){var M=l[C];if(i.isBreakingSpace(M)||i.isNewline(M)){""!==E&&(v.push(E),E=""),v.push(M);continue}E+=M}return""!==E&&v.push(E),v},i.canBreakWords=function(l,v){return v},i.canBreakChars=function(l,v,E,C,M){return!0},i.wordWrapSplit=function(l){return l.split("")},i.measureFont=function(l){if(i._fonts[l])return i._fonts[l];var v={ascent:0,descent:0,fontSize:0},E=i._canvas,C=i._context;C.font=l;var M=i.METRICS_STRING+i.BASELINE_SYMBOL,L=Math.ceil(C.measureText(M).width),U=Math.ceil(C.measureText(i.BASELINE_SYMBOL).width),B=2*U;U=U*i.BASELINE_MULTIPLIER|0,E.width=L,E.height=B,C.fillStyle="#f00",C.fillRect(0,0,L,B),C.font=l,C.textBaseline="alphabetic",C.fillStyle="#000",C.fillText(M,0,U);var k=C.getImageData(0,0,L,B).data,j=k.length,X=4*L,G=0,H=0,Y=!1;for(G=0;G<U;++G){for(var W=0;W<X;W+=4)if(255!==k[H+W]){Y=!0;break}if(Y)break;H+=X}for(v.ascent=U-G,H=j-X,Y=!1,G=B;G>U;--G){for(var W=0;W<X;W+=4)if(255!==k[H+W]){Y=!0;break}if(Y)break;H-=X}return v.descent=G-U,v.fontSize=v.ascent+v.descent,i._fonts[l]=v,v},i.clearMetrics=function(l){void 0===l&&(l=""),l?delete i._fonts[l]:i._fonts={}},i}(),s8=function(){try{var l=new OffscreenCanvas(0,0),v=l.getContext("2d");return v&&v.measureText?l:document.createElement("canvas")}catch{return document.createElement("canvas")}}();s8.width=s8.height=10,s6._canvas=s8,s6._context=s8.getContext("2d"),s6._fonts={},s6.METRICS_STRING="|\xc9q\xc5",s6.BASELINE_SYMBOL="M",s6.BASELINE_MULTIPLIER=1.4,s6._newlines=[10,13],s6._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var s7={texture:!0,children:!1,baseTexture:!0},s9=function(l){function r(v,E,C){var M=this,L=!1;C||(C=document.createElement("canvas"),L=!0),C.width=3,C.height=3;var U=nG.from(C);return U.orig=new iW,U.trim=new iW,(M=l.call(this,U)||this)._ownCanvas=L,M.canvas=C,M.context=M.canvas.getContext("2d"),M._resolution=tK.RESOLUTION,M._autoResolution=!0,M._text=null,M._style=null,M._styleListener=null,M._font="",M.text=v,M.style=E,M.localStyleID=-1,M}return!function(l,v){function t(){this.constructor=l}On(l,v),l.prototype=null===v?Object.create(v):(t.prototype=v.prototype,new t)}(r,l),r.prototype.updateText=function(l){var v=this._style;if(this.localStyleID!==v.styleID&&(this.dirty=!0,this.localStyleID=v.styleID),!(!this.dirty&&l)){this._font=this._style.toFontString();var E=this.context,C=s6.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),M=C.width,L=C.height,U=C.lines,B=C.lineHeight,k=C.lineWidths,j=C.maxLineWidth,X=C.fontProperties;this.canvas.width=Math.ceil((Math.max(1,M)+2*v.padding)*this._resolution),this.canvas.height=Math.ceil((Math.max(1,L)+2*v.padding)*this._resolution),E.scale(this._resolution,this._resolution),E.clearRect(0,0,this.canvas.width,this.canvas.height),E.font=this._font,E.lineWidth=v.strokeThickness,E.textBaseline=v.textBaseline,E.lineJoin=v.lineJoin,E.miterLimit=v.miterLimit;for(var G,H,Y=v.dropShadow?2:1,W=0;W<Y;++W){var q=v.dropShadow&&0===W,Z=q?2*L:0,K=Z*this.resolution;if(q){E.fillStyle="black",E.strokeStyle="black";var J=v.dropShadowColor,$=xe("number"==typeof J?J:ea(J));E.shadowColor="rgba("+255*$[0]+","+255*$[1]+","+255*$[2]+","+v.dropShadowAlpha+")",E.shadowBlur=v.dropShadowBlur,E.shadowOffsetX=Math.cos(v.dropShadowAngle)*v.dropShadowDistance,E.shadowOffsetY=Math.sin(v.dropShadowAngle)*v.dropShadowDistance+K}else E.fillStyle=this._generateFillStyle(v,U,C),E.strokeStyle=v.stroke,E.shadowColor="0",E.shadowBlur=0,E.shadowOffsetX=0,E.shadowOffsetY=0;for(var Q=0;Q<U.length;Q++)G=v.strokeThickness/2,H=v.strokeThickness/2+Q*B+X.ascent,"right"===v.align?G+=j-k[Q]:"center"===v.align&&(G+=(j-k[Q])/2),v.stroke&&v.strokeThickness&&this.drawLetterSpacing(U[Q],G+v.padding,H+v.padding-Z,!0),v.fill&&this.drawLetterSpacing(U[Q],G+v.padding,H+v.padding-Z)}this.updateTexture()}},r.prototype.drawLetterSpacing=function(l,v,E,C){void 0===C&&(C=!1);var M=this._style.letterSpacing;if(0===M){C?this.context.strokeText(l,v,E):this.context.fillText(l,v,E);return}for(var L=v,U=Array.from?Array.from(l):l.split(""),B=this.context.measureText(l).width,k=0,j=0;j<U.length;++j){var X=U[j];C?this.context.strokeText(X,L,E):this.context.fillText(X,L,E),L+=B-(k=this.context.measureText(l.substring(j+1)).width)+M,B=k}},r.prototype.updateTexture=function(){var l=this.canvas;if(this._style.trim){var v=Es(l);v.data&&(l.width=v.width,l.height=v.height,this.context.putImageData(v.data,0,0))}var E=this._texture,C=this._style,M=C.trim?0:C.padding,L=E.baseTexture;E.trim.width=E._frame.width=Math.ceil(l.width/this._resolution),E.trim.height=E._frame.height=Math.ceil(l.height/this._resolution),E.trim.x=-M,E.trim.y=-M,E.orig.width=E._frame.width-2*M,E.orig.height=E._frame.height-2*M,this._onTextureUpdate(),L.setRealSize(l.width,l.height,this._resolution),this._recursivePostUpdateTransform(),this.dirty=!1},r.prototype._render=function(v){this._autoResolution&&this._resolution!==v.resolution&&(this._resolution=v.resolution,this.dirty=!0),this.updateText(!0),l.prototype._render.call(this,v)},r.prototype.getLocalBounds=function(v){return this.updateText(!0),l.prototype.getLocalBounds.call(this,v)},r.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},r.prototype._generateFillStyle=function(l,v,E){var C=l.fill;if(!Array.isArray(C))return C;if(1===C.length)return C[0];var M,L=l.dropShadow?l.dropShadowDistance:0,U=l.padding||0,B=Math.ceil(this.canvas.width/this._resolution)-L-2*U,k=Math.ceil(this.canvas.height/this._resolution)-L-2*U,j=C.slice(),X=l.fillGradientStops.slice();if(!X.length)for(var G=j.length+1,H=1;H<G;++H)X.push(H/G);if(j.unshift(C[0]),X.unshift(0),j.push(C[C.length-1]),X.push(1),l.fillGradientType===tr.LINEAR_VERTICAL){M=this.context.createLinearGradient(B/2,U,B/2,k+U);for(var Y=0,W=E.fontProperties.fontSize+l.strokeThickness,q=W/k,H=0;H<v.length;H++)for(var Z=E.lineHeight*H,K=0;K<j.length;K++){var J=Math.max(Y,Z/k+("number"==typeof X[K]?X[K]:K/j.length)*q);J=Math.min(J,1),M.addColorStop(J,j[K]),Y=J}}else{M=this.context.createLinearGradient(U,k/2,B+U,k/2);for(var $=j.length+1,Q=1,H=0;H<j.length;H++){var ti=void 0;ti="number"==typeof X[H]?X[H]:Q/$,M.addColorStop(ti,j[H]),Q++}}return M},r.prototype.destroy=function(v){"boolean"==typeof v&&(v={children:v}),v=Object.assign({},s7,v),l.prototype.destroy.call(this,v),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(r.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(l){this.updateText(!0);var v=ce(this.scale.x)||1;this.scale.x=v*l/this._texture.orig.width,this._width=l},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(l){this.updateText(!0);var v=ce(this.scale.y)||1;this.scale.y=v*l/this._texture.orig.height,this._height=l},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"style",{get:function(){return this._style},set:function(l){(l=l||{})instanceof s4?this._style=l:this._style=new s4(l),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"text",{get:function(){return this._text},set:function(l){l=String(l??""),this._text!==l&&(this._text=l,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"resolution",{get:function(){return this._resolution},set:function(l){this._autoResolution=!1,this._resolution!==l&&(this._resolution=l,this.dirty=!0)},enumerable:!1,configurable:!0}),r}(s2);/*!
 * @pixi/prepare - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */tK.UPLOADS_PER_FRAME=4;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Cn=function(l,v){return(Cn=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(l,v){l.__proto__=v}||function(l,v){for(var E in v)v.hasOwnProperty(E)&&(l[E]=v[E])})(l,v)},at=function(){function i(l){this.maxItemsPerFrame=l,this.itemsLeft=0}return i.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},i.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},i}();function Od(l,v){var E=!1;if(l&&l._textures&&l._textures.length){for(var C=0;C<l._textures.length;C++)if(l._textures[C]instanceof nG){var M=l._textures[C].baseTexture;-1===v.indexOf(M)&&(v.push(M),E=!0)}}return E}function Cd(l,v){if(l.baseTexture instanceof nP){var E=l.baseTexture;return -1===v.indexOf(E)&&v.push(E),!0}return!1}function Rd(l,v){if(l._texture&&l._texture instanceof nG){var E=l._texture.baseTexture;return -1===v.indexOf(E)&&v.push(E),!0}return!1}function Fd(l,v){return v instanceof s9&&(v.updateText(!0),!0)}function Md(l,v){if(v instanceof s4){var E=v.toFontString();return s6.measureFont(E),!0}return!1}function Nd(l,v){if(l instanceof s9){-1===v.indexOf(l.style)&&v.push(l.style),-1===v.indexOf(l)&&v.push(l);var E=l._texture.baseTexture;return -1===v.indexOf(E)&&v.push(E),!0}return!1}function Ld(l,v){return l instanceof s4&&(-1===v.indexOf(l)&&v.push(l),!0)}var ar=function(){function i(l){var v=this;this.limiter=new at(tK.UPLOADS_PER_FRAME),this.renderer=l,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){v.queue&&v.prepareItems()},this.registerFindHook(Nd),this.registerFindHook(Ld),this.registerFindHook(Od),this.registerFindHook(Cd),this.registerFindHook(Rd),this.registerUploadHook(Fd),this.registerUploadHook(Md)}return i.prototype.upload=function(l,v){"function"==typeof l&&(v=l,l=null),l&&this.add(l),this.queue.length?(v&&this.completes.push(v),this.ticking||(this.ticking=!0,np.system.addOnce(this.tick,this,sM.UTILITY))):v&&v()},i.prototype.tick=function(){setTimeout(this.delayedTick,0)},i.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var l=this.queue[0],v=!1;if(l&&!l._destroyed){for(var E=0,C=this.uploadHooks.length;E<C;E++)if(this.uploadHooks[E](this.uploadHookHelper,l)){this.queue.shift(),v=!0;break}}v||this.queue.shift()}if(this.queue.length)np.system.addOnce(this.tick,this,sM.UTILITY);else{this.ticking=!1;var M=this.completes.slice(0);this.completes.length=0;for(var E=0,C=M.length;E<C;E++)M[E]()}},i.prototype.registerFindHook=function(l){return l&&this.addHooks.push(l),this},i.prototype.registerUploadHook=function(l){return l&&this.uploadHooks.push(l),this},i.prototype.add=function(l){for(var v=0,E=this.addHooks.length;v<E&&!this.addHooks[v](l,this.queue);v++);if(l instanceof no)for(var v=l.children.length-1;v>=0;v--)this.add(l.children[v]);return this},i.prototype.destroy=function(){this.ticking&&np.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},i}();function Vh(l,v){return v instanceof nP&&(v._glTextures[l.CONTEXT_UID]||l.texture.bind(v),!0)}function Dd(l,v){if(!(v instanceof sQ))return!1;var E=v.geometry;v.finishPoly(),E.updateBatches();for(var C=E.batches,M=0;M<C.length;M++){var L=C[M].style.texture;L&&Vh(l,L.baseTexture)}return E.batchable||l.geometry.bind(E,v._resolveDirectShader(l)),!0}function Ud(l,v){return l instanceof sQ&&(v.push(l),!0)}var ai=function(l){function r(v){var E=l.call(this,v)||this;return E.uploadHookHelper=E.renderer,E.registerFindHook(Ud),E.registerUploadHook(Vh),E.registerUploadHook(Dd),E}return!function(l,v){function t(){this.constructor=l}Cn(l,v),l.prototype=null===v?Object.create(v):(t.prototype=v.prototype,new t)}(r,l),r}(ar),an=function(){function i(l){this.maxMilliseconds=l,this.frameStart=0}return i.prototype.beginFrame=function(){this.frameStart=Date.now()},i.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},i}(),ao=function(){function i(l,v,E){void 0===E&&(E=null),this._texture=l instanceof nG?l:null,this.baseTexture=l instanceof nP?l:this._texture.baseTexture,this.textures={},this.animations={},this.data=v;var C=this.baseTexture.resource;this.resolution=this._updateResolution(E||(C?C.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return i.prototype._updateResolution=function(l){void 0===l&&(l=null);var v=this.data.meta.scale,E=vr(l,null);return null===E&&(E=void 0!==v?parseFloat(v):1),1!==E&&this.baseTexture.setResolution(E),E},i.prototype.parse=function(l){this._batchIndex=0,this._callback=l,this._frameKeys.length<=i.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},i.prototype._processFrames=function(l){for(var v=l,E=i.BATCH_SIZE;v-l<E&&v<this._frameKeys.length;){var C=this._frameKeys[v],M=this._frames[C],L=M.frame;if(L){var U=null,B=null,k=!1!==M.trimmed&&M.sourceSize?M.sourceSize:M.frame,j=new iW(0,0,Math.floor(k.w)/this.resolution,Math.floor(k.h)/this.resolution);U=M.rotated?new iW(Math.floor(L.x)/this.resolution,Math.floor(L.y)/this.resolution,Math.floor(L.h)/this.resolution,Math.floor(L.w)/this.resolution):new iW(Math.floor(L.x)/this.resolution,Math.floor(L.y)/this.resolution,Math.floor(L.w)/this.resolution,Math.floor(L.h)/this.resolution),!1!==M.trimmed&&M.spriteSourceSize&&(B=new iW(Math.floor(M.spriteSourceSize.x)/this.resolution,Math.floor(M.spriteSourceSize.y)/this.resolution,Math.floor(L.w)/this.resolution,Math.floor(L.h)/this.resolution)),this.textures[C]=new nG(this.baseTexture,U,j,B,M.rotated?2:0,M.anchor),nG.addToCache(this.textures[C],C)}v++}},i.prototype._processAnimations=function(){var l=this.data.animations||{};for(var v in l){this.animations[v]=[];for(var E=0;E<l[v].length;E++){var C=l[v][E];this.animations[v].push(this.textures[C])}}},i.prototype._parseComplete=function(){var l=this._callback;this._callback=null,this._batchIndex=0,l.call(this,this.textures)},i.prototype._nextBatch=function(){var l=this;this._processFrames(this._batchIndex*i.BATCH_SIZE),this._batchIndex++,setTimeout(function(){l._batchIndex*i.BATCH_SIZE<l._frameKeys.length?l._nextBatch():(l._processAnimations(),l._parseComplete())},0)},i.prototype.destroy=function(l){var v;for(var E in void 0===l&&(l=!1),this.textures)this.textures[E].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,l&&(null===(v=this._texture)||void 0===v||v.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},i.BATCH_SIZE=1e3,i}(),as=function(){function i(){}return i.use=function(l,v){var E=l.name+"_image";if(!l.data||l.type!==so.TYPE.JSON||!l.data.frames||this.resources[E]){v();return}var C={crossOrigin:l.crossOrigin,metadata:l.metadata.imageMetadata,parentResource:l},M=i.getResourcePath(l,this.baseUrl);this.add(E,M,C,function(E){if(E.error){v(E.error);return}var C=new ao(E.texture,l.data,l.url);C.parse(function(){l.spritesheet=C,l.textures=C.textures,v()})})},i.getResourcePath=function(l,v){return l.isDataUrl?l.data.meta.image:t3.resolve(l.url.replace(v,""),l.data.meta.image)},i}(),Rn=function(l,v){return(Rn=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(l,v){l.__proto__=v}||function(l,v){for(var E in v)v.hasOwnProperty(E)&&(l[E]=v[E])})(l,v)};function qh(l,v){function t(){this.constructor=l}Rn(l,v),l.prototype=null===v?Object.create(v):(t.prototype=v.prototype,new t)}var aa=new i$,ah=function(l){function r(v,E,C){void 0===E&&(E=100),void 0===C&&(C=100);var M=l.call(this,v)||this;return M.tileTransform=new i9,M._width=E,M._height=C,M.uvMatrix=v.uvMatrix||new oA(v),M.pluginName="tilingSprite",M.uvRespectAnchor=!1,M}return qh(r,l),Object.defineProperty(r.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(l){this.uvMatrix.clampMargin=l,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(l){this.tileTransform.scale.copyFrom(l)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(l){this.tileTransform.position.copyFrom(l)},enumerable:!1,configurable:!0}),r.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},r.prototype._render=function(l){var v=this._texture;v&&v.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),l.batch.setObjectRenderer(l.plugins[this.pluginName]),l.plugins[this.pluginName].render(this))},r.prototype._calculateBounds=function(){var l=-(this._width*this._anchor._x),v=-(this._height*this._anchor._y),E=this._width*(1-this._anchor._x),C=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,l,v,E,C)},r.prototype.getLocalBounds=function(v){return 0===this.children.length?(this._bounds.minX=-(this._width*this._anchor._x),this._bounds.minY=-(this._height*this._anchor._y),this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),v||(this._localBoundsRect||(this._localBoundsRect=new iW),v=this._localBoundsRect),this._bounds.getRectangle(v)):l.prototype.getLocalBounds.call(this,v)},r.prototype.containsPoint=function(l){this.worldTransform.applyInverse(l,aa);var v=this._width,E=this._height,C=-v*this.anchor._x;if(aa.x>=C&&aa.x<C+v){var M=-E*this.anchor._y;if(aa.y>=M&&aa.y<M+E)return!0}return!1},r.prototype.destroy=function(v){l.prototype.destroy.call(this,v),this.tileTransform=null,this.uvMatrix=null},r.from=function(l,v){return"number"==typeof v&&(I("5.3.0","TilingSprite.from use options instead of width and height args"),v={width:v,height:arguments[2]}),new r(nG.from(l,v),v.width,v.height)},Object.defineProperty(r.prototype,"width",{get:function(){return this._width},set:function(l){this._width=l},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},set:function(l){this._height=l},enumerable:!1,configurable:!0}),r}(s2),al=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,ap=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord - floor(vTextureCoord - uClampOffset);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture2D(uSampler, coord);
    gl_FragColor = texSample * uColor;
}
`,ad=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 sample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = sample * uColor;
}
`,ay=new i0,am=function(l){function r(v){var E=l.call(this,v)||this,C={globals:E.renderer.globalUniforms};return E.shader=ob.from(al,ap,C),E.simpleShader=ob.from(al,ad,C),E.quad=new n0,E.state=ox.for2d(),E}return qh(r,l),r.prototype.render=function(l){var v=this.renderer,E=this.quad,C=E.vertices;C[0]=C[6]=-(l._width*l.anchor.x),C[1]=C[3]=-(l._height*l.anchor.y),C[2]=C[4]=l._width*(1-l.anchor.x),C[5]=C[7]=l._height*(1-l.anchor.y),l.uvRespectAnchor&&((C=E.uvs)[0]=C[6]=-l.anchor.x,C[1]=C[3]=-l.anchor.y,C[2]=C[4]=1-l.anchor.x,C[5]=C[7]=1-l.anchor.y),E.invalidate();var M=l._texture,L=M.baseTexture,U=l.tileTransform.localTransform,B=l.uvMatrix,k=L.isPowerOfTwo&&M.frame.width===L.width&&M.frame.height===L.height;k&&(L._glTextures[v.CONTEXT_UID]?k=L.wrapMode!==iD.CLAMP:L.wrapMode===iD.CLAMP&&(L.wrapMode=iD.REPEAT));var j=k?this.simpleShader:this.shader,X=M.width,G=M.height,H=l._width,Y=l._height;ay.set(U.a*X/H,U.b*X/Y,U.c*G/H,U.d*G/Y,U.tx/H,U.ty/Y),ay.invert(),k?ay.prepend(B.mapCoord):(j.uniforms.uMapCoord=B.mapCoord.toArray(!0),j.uniforms.uClampFrame=B.uClampFrame,j.uniforms.uClampOffset=B.uClampOffset),j.uniforms.uTransform=ay.toArray(!0),j.uniforms.uColor=na(l.tint,l.worldAlpha,j.uniforms.uColor,L.alphaMode),j.uniforms.translationMatrix=l.transform.worldTransform.toArray(!0),j.uniforms.uSampler=M,v.shader.bind(j),v.geometry.bind(E),this.state.blendMode=ia(l.blendMode,L.alphaMode),v.state.set(this.state),v.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},r}(n4),Fn=function(l,v){return(Fn=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(l,v){l.__proto__=v}||function(l,v){for(var E in v)v.hasOwnProperty(E)&&(l[E]=v[E])})(l,v)};function xa(l,v){function t(){this.constructor=l}Fn(l,v),l.prototype=null===v?Object.create(v):(t.prototype=v.prototype,new t)}var ag=function(){function i(l,v){this.uvBuffer=l,this.uvMatrix=v,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return i.prototype.update=function(l){if(!(!l&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var v=this.uvBuffer.data;this.data&&this.data.length===v.length||(this.data=new Float32Array(v.length)),this.uvMatrix.multiplyUvs(v,this.data),this._updateID++}},i}(),av=new i$,a_=new iK,ab=function(l){function r(v,E,C,M){void 0===M&&(M=iA.TRIANGLES);var L=l.call(this)||this;return L.geometry=v,v.refCount++,L.shader=E,L.state=C||ox.for2d(),L.drawMode=M,L.start=0,L.size=0,L.uvs=null,L.indices=null,L.vertexData=new Float32Array(1),L.vertexDirty=0,L._transformID=-1,L.tint=16777215,L.blendMode=iS.NORMAL,L._roundPixels=tK.ROUND_PIXELS,L.batchUvs=null,L}return xa(r,l),Object.defineProperty(r.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"material",{get:function(){return this.shader},set:function(l){this.shader=l},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(l){this.state.blendMode=l},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(l){this._roundPixels!==l&&(this._transformID=-1),this._roundPixels=l},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tint",{get:function(){return this.shader.tint},set:function(l){this.shader.tint=l},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"texture",{get:function(){return this.shader.texture},set:function(l){this.shader.texture=l},enumerable:!1,configurable:!0}),r.prototype._render=function(l){var v=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===iA.TRIANGLES&&v.length<2*r.BATCHABLE_SIZE?this._renderToBatch(l):this._renderDefault(l)},r.prototype._renderDefault=function(l){var v=this.shader;v.alpha=this.worldAlpha,v.update&&v.update(),l.batch.flush(),v.program.uniformData.translationMatrix&&(v.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0)),l.shader.bind(v),l.state.set(this.state),l.geometry.bind(this.geometry,v),l.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},r.prototype._renderToBatch=function(l){var v=this.geometry;this.shader.uvMatrix&&(this.shader.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=v.indexBuffer.data,this._tintRGB=this.shader._tintRGB,this._texture=this.shader.texture;var E=this.material.pluginName;l.batch.setObjectRenderer(l.plugins[E]),l.plugins[E].render(this)},r.prototype.calculateVertices=function(){var l=this.geometry,v=l.buffers[0].data;if(!(l.vertexDirtyId===this.vertexDirty&&this._transformID===this.transform._worldID)){this._transformID=this.transform._worldID,this.vertexData.length!==v.length&&(this.vertexData=new Float32Array(v.length));for(var E=this.transform.worldTransform,C=E.a,M=E.b,L=E.c,U=E.d,B=E.tx,k=E.ty,j=this.vertexData,X=0;X<j.length/2;X++){var G=v[2*X],H=v[2*X+1];j[2*X]=C*G+L*H+B,j[2*X+1]=M*G+U*H+k}if(this._roundPixels)for(var Y=tK.RESOLUTION,X=0;X<j.length;++X)j[X]=Math.round((j[X]*Y|0)/Y);this.vertexDirty=l.vertexDirtyId}},r.prototype.calculateUvs=function(){var l=this.geometry.buffers[1];this.shader.uvMatrix.isSimple?this.uvs=l.data:(this.batchUvs||(this.batchUvs=new ag(l,this.shader.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},r.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},r.prototype.containsPoint=function(l){if(!this.getBounds().contains(l.x,l.y))return!1;this.worldTransform.applyInverse(l,av);for(var v=this.geometry.getBuffer("aVertexPosition").data,E=a_.points,C=this.geometry.getIndex().data,M=C.length,L=4===this.drawMode?3:1,U=0;U+2<M;U+=L){var B=2*C[U],k=2*C[U+1],j=2*C[U+2];if(E[0]=v[B],E[1]=v[B+1],E[2]=v[k],E[3]=v[k+1],E[4]=v[j],E[5]=v[j+1],a_.contains(av.x,av.y))return!0}return!1},r.prototype.destroy=function(v){l.prototype.destroy.call(this,v),this.geometry.refCount--,0===this.geometry.refCount&&this.geometry.dispose(),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},r.BATCHABLE_SIZE=100,r}(no),ax=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,aT=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`,aE=function(l){function r(v,E){var C=this,M={uSampler:v,alpha:1,uTextureMatrix:i0.IDENTITY,uColor:new Float32Array([1,1,1,1])};return(E=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},E)).uniforms&&Object.assign(M,E.uniforms),(C=l.call(this,E.program||o_.from(aT,ax),M)||this)._colorDirty=!1,C.uvMatrix=new oA(v),C.batchable=void 0===E.program,C.pluginName=E.pluginName,C.tint=E.tint,C.alpha=E.alpha,C}return xa(r,l),Object.defineProperty(r.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(l){this.uniforms.uSampler!==l&&(this.uniforms.uSampler=l,this.uvMatrix.texture=l)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"alpha",{get:function(){return this._alpha},set:function(l){l!==this._alpha&&(this._alpha=l,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tint",{get:function(){return this._tint},set:function(l){l!==this._tint&&(this._tint=l,this._tintRGB=(l>>16)+(65280&l)+((255&l)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),r.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var l=this.texture.baseTexture;na(this._tint,this._alpha,this.uniforms.uColor,l.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},r}(ob),aI=function(l){function r(v,E,C){var M=l.call(this)||this,L=new nW(v),U=new nW(E,!0),B=new nW(C,!0,!0);return M.addAttribute("aVertexPosition",L,2,!1,iR.FLOAT).addAttribute("aTextureCoord",U,2,!1,iR.FLOAT).addIndex(B),M._updateId=-1,M}return xa(r,l),Object.defineProperty(r.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),r}(n$),Mn=function(l,v){return(Mn=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(l,v){l.__proto__=v}||function(l,v){for(var E in v)v.hasOwnProperty(E)&&(l[E]=v[E])})(l,v)},mr=function(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[]},aw=[function(){function i(){}return i.test=function(l){return"string"==typeof l&&0===l.indexOf("info face=")},i.parse=function(l){var v=l.match(/^[a-z]+\s+.+$/gm),E={info:[],common:[],page:[],char:[],chars:[],kerning:[]};for(var C in v){var M=v[C].match(/^[a-z]+/gm)[0],L=v[C].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),U={};for(var B in L){var k=L[B].split("="),j=k[0],X=k[1].replace(/"/gm,""),G=parseFloat(X),H=isNaN(G)?X:G;U[j]=H}E[M].push(U)}var Y=new mr;return E.info.forEach(function(l){return Y.info.push({face:l.face,size:parseInt(l.size,10)})}),E.common.forEach(function(l){return Y.common.push({lineHeight:parseInt(l.lineHeight,10)})}),E.page.forEach(function(l){return Y.page.push({id:parseInt(l.id,10),file:l.file})}),E.char.forEach(function(l){return Y.char.push({id:parseInt(l.id,10),page:parseInt(l.page,10),x:parseInt(l.x,10),y:parseInt(l.y,10),width:parseInt(l.width,10),height:parseInt(l.height,10),xoffset:parseInt(l.xoffset,10),yoffset:parseInt(l.yoffset,10),xadvance:parseInt(l.xadvance,10)})}),E.kerning.forEach(function(l){return Y.kerning.push({first:parseInt(l.first,10),second:parseInt(l.second,10),amount:parseInt(l.amount,10)})}),Y},i}(),function(){function i(){}return i.test=function(l){return l instanceof XMLDocument&&l.getElementsByTagName("page").length&&null!==l.getElementsByTagName("info")[0].getAttribute("face")},i.parse=function(l){for(var v=new mr,E=l.getElementsByTagName("info"),C=l.getElementsByTagName("common"),M=l.getElementsByTagName("page"),L=l.getElementsByTagName("char"),U=l.getElementsByTagName("kerning"),B=0;B<E.length;B++)v.info.push({face:E[B].getAttribute("face"),size:parseInt(E[B].getAttribute("size"),10)});for(var B=0;B<C.length;B++)v.common.push({lineHeight:parseInt(C[B].getAttribute("lineHeight"),10)});for(var B=0;B<M.length;B++)v.page.push({id:parseInt(M[B].getAttribute("id"),10)||0,file:M[B].getAttribute("file")});for(var B=0;B<L.length;B++){var k=L[B];v.char.push({id:parseInt(k.getAttribute("id"),10),page:parseInt(k.getAttribute("page"),10)||0,x:parseInt(k.getAttribute("x"),10),y:parseInt(k.getAttribute("y"),10),width:parseInt(k.getAttribute("width"),10),height:parseInt(k.getAttribute("height"),10),xoffset:parseInt(k.getAttribute("xoffset"),10),yoffset:parseInt(k.getAttribute("yoffset"),10),xadvance:parseInt(k.getAttribute("xadvance"),10)})}for(var B=0;B<U.length;B++)v.kerning.push({first:parseInt(U[B].getAttribute("first"),10),second:parseInt(U[B].getAttribute("second"),10),amount:parseInt(U[B].getAttribute("amount"),10)});return v},i}()];function Jh(l){for(var v=0;v<aw.length;v++)if(aw[v].test(l))return aw[v];return null}function Mo(l,v,E,C,M,L){var U=E.fill;if(!Array.isArray(U))return U;if(1===U.length)return U[0];var B,k=E.dropShadow?E.dropShadowDistance:0,j=E.padding||0,X=Math.ceil(l.width/C)-k-2*j,G=Math.ceil(l.height/C)-k-2*j,H=U.slice(),Y=E.fillGradientStops.slice();if(!Y.length)for(var W=H.length+1,q=1;q<W;++q)Y.push(q/W);if(H.unshift(U[0]),Y.unshift(0),H.push(U[U.length-1]),Y.push(1),E.fillGradientType===tr.LINEAR_VERTICAL){B=v.createLinearGradient(X/2,j,X/2,G+j);for(var Z=0,K=L.fontProperties.fontSize+E.strokeThickness,J=K/G,q=0;q<M.length;q++)for(var $=L.lineHeight*q,Q=0;Q<H.length;Q++){var ti=Math.max(Z,$/G+("number"==typeof Y[Q]?Y[Q]:Q/H.length)*J);ti=Math.min(ti,1),B.addColorStop(ti,H[Q]),Z=ti}}else{B=v.createLinearGradient(j,G/2,X+j,G/2);for(var tn=H.length+1,to=1,q=0;q<H.length;q++){var ts=void 0;ts="number"==typeof Y[q]?Y[q]:to/tn,B.addColorStop(ts,H[q]),to++}}return B}var aP=function(){function i(l,v){var E=l.info[0],C=l.common[0],M=vr(l.page[0].file),L={};this.font=E.face,this.size=E.size,this.lineHeight=C.lineHeight/M,this.chars={},this.pageTextures=L;for(var U=0;U<l.page.length;U++){var B=l.page[U],k=B.id,j=B.file;L[k]=v instanceof Array?v[U]:v[j]}for(var U=0;U<l.char.length;U++){var X=l.char[U],k=X.id,G=X.page,H=l.char[U],Y=H.x,W=H.y,q=H.width,Z=H.height,K=H.xoffset,J=H.yoffset,$=H.xadvance;Y/=M,W/=M,q/=M,Z/=M,K/=M,J/=M,$/=M;var Q=new iW(Y+L[G].frame.x/M,W+L[G].frame.y/M,q,Z);this.chars[k]={xOffset:K,yOffset:J,xAdvance:$,kerning:{},texture:new nG(L[G].baseTexture,Q),page:G}}for(var U=0;U<l.kerning.length;U++){var tr=l.kerning[U],ti=tr.first,tn=tr.second,to=tr.amount;ti/=M,tn/=M,to/=M,this.chars[tn]&&(this.chars[tn].kerning[ti]=to)}}return i.prototype.destroy=function(){for(var l in this.chars)this.chars[l].texture.destroy(),this.chars[l].texture=null;for(var l in this.pageTextures)this.pageTextures[l].destroy(!0),this.pageTextures[l]=null;this.chars=null,this.pageTextures=null},i.install=function(l,v){if(l instanceof mr)E=l;else{var E,C=Jh(l);if(!C)throw Error("Unrecognized data format for font.");E=C.parse(l)}v instanceof nG&&(v=[v]);var M=new i(E,v);return i.available[M.font]=M,M},i.uninstall=function(l){var v=i.available[l];if(!v)throw Error("No font found named '"+l+"'");v.destroy(),delete i.available[l]},i.from=function(l,v,E){if(!l)throw Error("[BitmapFont] Property `name` is required.");var C=Object.assign({},i.defaultOptions,E),M=C.chars,L=C.padding,U=C.resolution,B=C.textureWidth,k=C.textureHeight,j=function(l){"string"==typeof l&&(l=[l]);for(var v=[],E=0,C=l.length;E<C;E++){var M=l[E];if(Array.isArray(M)){if(2!==M.length)throw Error("[BitmapFont]: Invalid character range length, expecting 2 got "+M.length+".");var L=M[0].charCodeAt(0),U=M[1].charCodeAt(0);if(U<L)throw Error("[BitmapFont]: Invalid character range.");for(var B=L;B<=U;B++)v.push(String.fromCharCode(B))}else v.push.apply(v,M.split(""))}if(0===v.length)throw Error("[BitmapFont]: Empty set when resolving characters.");return v}(M),X=v instanceof s4?v:new s4(v),G=new mr;G.info[0]={face:X.fontFamily,size:X.fontSize},G.common[0]={lineHeight:X.fontSize};for(var H,Y,W,q=0,Z=0,K=0,J=[],$=0;$<j.length;$++){H||((H=document.createElement("canvas")).width=B,H.height=k,Y=H.getContext("2d"),W=new nP(H,{resolution:U}),J.push(new nG(W)),G.page.push({id:J.length-1,file:""}));var Q=s6.measureText(j[$],X,!1,H),tr=Q.width,ti=Math.ceil(Q.height),tn=Math.ceil(("italic"===X.fontStyle?2:1)*tr);if(Z>=k-ti*U){if(0===Z)throw Error("[BitmapFont] textureHeight "+k+"px is too small for "+X.fontSize+"px fonts");--$,H=null,Y=null,W=null,Z=0,q=0,K=0;continue}if(K=Math.max(ti+Q.fontProperties.descent,K),tn*U+q>=B){--$,Z+=K*U,Z=Math.ceil(Z),q=0,K=0;continue}(function(l,v,E,C,M,L,U){var B=E.text,k=E.fontProperties;v.translate(C,M),v.scale(L,L);var j=U.strokeThickness/2,X=-(U.strokeThickness/2);v.font=U.toFontString(),v.lineWidth=U.strokeThickness,v.textBaseline=U.textBaseline,v.lineJoin=U.lineJoin,v.miterLimit=U.miterLimit,v.fillStyle=Mo(l,v,U,L,[B],E),v.strokeStyle=U.stroke,v.font=U.toFontString(),v.lineWidth=U.strokeThickness,v.textBaseline=U.textBaseline,v.lineJoin=U.lineJoin,v.miterLimit=U.miterLimit,v.fillStyle=Mo(l,v,U,L,[B],E),v.strokeStyle=U.stroke;var G=U.dropShadowColor,H=xe("number"==typeof G?G:ea(G));U.dropShadow?(v.shadowColor="rgba("+255*H[0]+","+255*H[1]+","+255*H[2]+","+U.dropShadowAlpha+")",v.shadowBlur=U.dropShadowBlur,v.shadowOffsetX=Math.cos(U.dropShadowAngle)*U.dropShadowDistance,v.shadowOffsetY=Math.sin(U.dropShadowAngle)*U.dropShadowDistance):(v.shadowColor="0",v.shadowBlur=0,v.shadowOffsetX=0,v.shadowOffsetY=0),U.stroke&&U.strokeThickness&&v.strokeText(B,j,X+E.lineHeight-k.descent),U.fill&&v.fillText(B,j,X+E.lineHeight-k.descent),v.setTransform(),v.fillStyle="rgba(0, 0, 0, 0)"})(H,Y,Q,q,Z,U,X);var to=Q.text.charCodeAt(0);G.char.push({id:to,page:J.length-1,x:q/U,y:Z/U,width:tn,height:ti,xoffset:0,yoffset:0,xadvance:Math.ceil(tr-(X.dropShadow?X.dropShadowDistance:0)-(X.stroke?X.strokeThickness:0))}),q+=(tn+2*L)*U,q=Math.ceil(q)}var ts=new i(G,J);return void 0!==i.available[l]&&i.uninstall(l),i.available[l]=ts,ts},i.ALPHA=[["a","z"],["A","Z"]," "],i.NUMERIC=[["0","9"]],i.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],i.ASCII=[[" ","~"]],i.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:i.ALPHANUMERIC},i.available={},i}(),aS=[],aA=[],aO=function(l){function r(v,E){void 0===E&&(E={});var C=l.call(this)||this;C._tint=16777215,E.font&&(I("5.3.0","PIXI.BitmapText constructor style.font property is deprecated."),C._upgradeStyle(E));var M=Object.assign({},r.styleDefaults,E),L=M.align,U=M.tint,B=M.maxWidth,k=M.letterSpacing,j=M.fontName,X=M.fontSize;if(!aP.available[j])throw Error('Missing BitmapFont "'+j+'"');return C._activePagesMeshData=[],C._textWidth=0,C._textHeight=0,C._align=L,C._tint=U,C._fontName=j,C._fontSize=X||aP.available[j].size,C._text=v,C._maxWidth=B,C._maxLineHeight=0,C._letterSpacing=k,C._anchor=new iQ(function(){C.dirty=!0},C,0,0),C.roundPixels=tK.ROUND_PIXELS,C.dirty=!0,C}return!function(l,v){function t(){this.constructor=l}Mn(l,v),l.prototype=null===v?Object.create(v):(t.prototype=v.prototype,new t)}(r,l),r.prototype.updateText=function(){for(var l,v=aP.available[this._fontName],E=this._fontSize/v.size,C=new i$,M=[],L=[],U=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",B=U.length,k=this._maxWidth*v.size/this._fontSize,j=null,X=0,G=0,H=0,Y=-1,W=0,q=0,Z=0,K=0;K<B;K++){var J=U.charCodeAt(K),$=U.charAt(K);if(/(?:\s)/.test($)&&(Y=K,W=X),"\r"===$||$===`
`){L.push(X),G=Math.max(G,X),++H,++q,C.x=0,C.y+=v.lineHeight,j=null;continue}var Q=v.chars[J];if(Q){j&&Q.kerning[j]&&(C.x+=Q.kerning[j]);var tr=aA.pop()||{texture:nG.EMPTY,line:0,charCode:0,position:new i$};tr.texture=Q.texture,tr.line=H,tr.charCode=J,tr.position.x=C.x+Q.xOffset+this._letterSpacing/2,tr.position.y=C.y+Q.yOffset,M.push(tr),C.x+=Q.xAdvance+this._letterSpacing,X=C.x,Z=Math.max(Z,Q.yOffset+Q.texture.height),j=J,-1!==Y&&k>0&&C.x>k&&(me(M,1+Y-++q,1+K-Y),K=Y,Y=-1,L.push(W),G=Math.max(G,W),H++,C.x=0,C.y+=v.lineHeight,j=null)}}var ti=U.charAt(U.length-1);"\r"!==ti&&ti!==`
`&&(/(?:\s)/.test(ti)&&(X=W),L.push(X),G=Math.max(G,X));for(var tn=[],K=0;K<=H;K++){var to=0;"right"===this._align?to=G-L[K]:"center"===this._align&&(to=(G-L[K])/2),tn.push(to)}for(var ts=M.length,th={},tl=[],tc=this._activePagesMeshData,K=0;K<tc.length;K++)aS.push(tc[K]);for(var K=0;K<ts;K++){var tp=M[K].texture,td=tp.baseTexture.uid;if(!th[td]){var tf=aS.pop();if(!tf){var ty=new aI,tm=new aE(nG.EMPTY);tf={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:new ab(ty,tm),vertices:null,uvs:null,indices:null}}tf.index=0,tf.indexCount=0,tf.vertexCount=0,tf.uvsCount=0,tf.total=0,tf.mesh.texture=new nG(tp.baseTexture),tf.mesh.tint=this._tint,tl.push(tf),th[td]=tf}th[td].total++}for(var K=0;K<tc.length;K++)-1===tl.indexOf(tc[K])&&this.removeChild(tc[K].mesh);for(var K=0;K<tl.length;K++)tl[K].mesh.parent!==this&&this.addChild(tl[K].mesh);for(var K in this._activePagesMeshData=tl,th){var tf=th[K],tg=tf.total;(!((null===(l=tf.indices)||void 0===l?void 0:l.length)>6*tg)||tf.vertices.length<2*ab.BATCHABLE_SIZE)&&(tf.vertices=new Float32Array(8*tg),tf.uvs=new Float32Array(8*tg),tf.indices=new Uint16Array(6*tg)),tf.mesh.size=6*tg}for(var K=0;K<ts;K++){var $=M[K],tv=($.position.x+tn[$.line])*E,t_=$.position.y*E,tp=$.texture,tb=th[tp.baseTexture.uid],tx=tp.frame,tT=tp._uvs,tE=tb.index++;tb.indices[6*tE+0]=0+4*tE,tb.indices[6*tE+1]=1+4*tE,tb.indices[6*tE+2]=2+4*tE,tb.indices[6*tE+3]=0+4*tE,tb.indices[6*tE+4]=2+4*tE,tb.indices[6*tE+5]=3+4*tE,tb.vertices[8*tE+0]=tv,tb.vertices[8*tE+1]=t_,tb.vertices[8*tE+2]=tv+tx.width*E,tb.vertices[8*tE+3]=t_,tb.vertices[8*tE+4]=tv+tx.width*E,tb.vertices[8*tE+5]=t_+tx.height*E,tb.vertices[8*tE+6]=tv,tb.vertices[8*tE+7]=t_+tx.height*E,tb.uvs[8*tE+0]=tT.x0,tb.uvs[8*tE+1]=tT.y0,tb.uvs[8*tE+2]=tT.x1,tb.uvs[8*tE+3]=tT.y1,tb.uvs[8*tE+4]=tT.x2,tb.uvs[8*tE+5]=tT.y2,tb.uvs[8*tE+6]=tT.x3,tb.uvs[8*tE+7]=tT.y3}for(var K in this._textWidth=G*E,this._textHeight=(C.y+v.lineHeight)*E,th){var tf=th[K];if(0!==this.anchor.x||0!==this.anchor.y)for(var tI=0,tw=this._textWidth*this.anchor.x,tP=this._textHeight*this.anchor.y,tS=0;tS<tf.total;tS++)tf.vertices[tI++]-=tw,tf.vertices[tI++]-=tP,tf.vertices[tI++]-=tw,tf.vertices[tI++]-=tP,tf.vertices[tI++]-=tw,tf.vertices[tI++]-=tP,tf.vertices[tI++]-=tw,tf.vertices[tI++]-=tP;this._maxLineHeight=Z*E;var tA=tf.mesh.geometry.getBuffer("aVertexPosition"),tO=tf.mesh.geometry.getBuffer("aTextureCoord"),tC=tf.mesh.geometry.getIndex();tA.data=tf.vertices,tO.data=tf.uvs,tC.data=tf.indices,tA.update(),tO.update(),tC.update()}for(var K=0;K<M.length;K++)aA.push(M[K])},r.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},r.prototype.getLocalBounds=function(){return this.validate(),l.prototype.getLocalBounds.call(this)},r.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(r.prototype,"tint",{get:function(){return this._tint},set:function(l){if(this._tint!==l){this._tint=l;for(var v=0;v<this._activePagesMeshData.length;v++)this._activePagesMeshData[v].mesh.tint=l}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"align",{get:function(){return this._align},set:function(l){this._align!==l&&(this._align=l,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontName",{get:function(){return this._fontName},set:function(l){if(!aP.available[l])throw Error('Missing BitmapFont "'+l+'"');this._fontName!==l&&(this._fontName=l,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fontSize",{get:function(){return this._fontSize},set:function(l){this._fontSize!==l&&(this._fontSize=l,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"anchor",{get:function(){return this._anchor},set:function(l){"number"==typeof l?this._anchor.set(l):this._anchor.copyFrom(l)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"text",{get:function(){return this._text},set:function(l){l=String(l??""),this._text!==l&&(this._text=l,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(l){this._maxWidth!==l&&(this._maxWidth=l,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(l){this._letterSpacing!==l&&(this._letterSpacing=l,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),r.prototype._upgradeStyle=function(l){if("string"==typeof l.font){var v=l.font.split(" ");l.fontName=1===v.length?v[0]:v.slice(1).join(" "),v.length>=2&&(l.fontSize=parseInt(v[0],10))}else l.fontName=l.font.name,l.fontSize="number"==typeof l.font.size?l.font.size:parseInt(l.font.size,10)},r.registerFont=function(l,v){return I("5.3.0","PIXI.BitmapText.registerFont is deprecated, use PIXI.BitmapFont.install"),aP.install(l,v)},Object.defineProperty(r,"fonts",{get:function(){return I("5.3.0","PIXI.BitmapText.fonts is deprecated, use PIXI.BitmapFont.available"),aP.available},enumerable:!1,configurable:!0}),r.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},r}(no),aC=function(){function i(){}return i.add=function(){so.setExtensionXhrType("fnt",so.XHR_RESPONSE_TYPE.DOCUMENT)},i.use=function(l,v){var E=Jh(l.data);if(!E){v();return}for(var C=i.getBaseUrl(this,l),M=E.parse(l.data),L={},s=function(E){L[E.metadata.pageFile]=E.texture,Object.keys(L).length===M.page.length&&(l.bitmapFont=aP.install(M,L),v())},U=0;U<M.page.length;++U){var B=M.page[U].file,k=C+B,j=!1;for(var X in this.resources){var G=this.resources[X];if(G.url===k){G.metadata.pageFile=B,G.texture?s(G):G.onAfterMiddleware.add(s),j=!0;break}}if(!j){var H={crossOrigin:l.crossOrigin,loadType:so.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:B},l.metadata.imageMetadata),parentResource:l};this.add(k,H,s)}}},i.getBaseUrl=function(l,v){var E=v.isDataUrl?"":i.dirname(v.url);return v.isDataUrl&&("."===E&&(E=""),l.baseUrl&&E&&"/"===l.baseUrl.charAt(l.baseUrl.length-1)&&(E+="/")),(E=E.replace(l.baseUrl,""))&&"/"!==E.charAt(E.length-1)&&(E+="/"),E},i.dirname=function(l){var v=l.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return v===l?".":""===v?"/":v},i}(),Nn=function(l,v){return(Nn=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(l,v){l.__proto__=v}||function(l,v){for(var E in v)v.hasOwnProperty(E)&&(l[E]=v[E])})(l,v)},aR=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`,aM=function(l){function r(v){void 0===v&&(v=1);var E=l.call(this,oZ,aR,{uAlpha:1})||this;return E.alpha=v,E}return!function(l,v){function t(){this.constructor=l}Nn(l,v),l.prototype=null===v?Object.create(v):(t.prototype=v.prototype,new t)}(r,l),Object.defineProperty(r.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(l){this.uniforms.uAlpha=l},enumerable:!1,configurable:!0}),r}(oI),Ln=function(l,v){return(Ln=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(l,v){l.__proto__=v}||function(l,v){for(var E in v)v.hasOwnProperty(E)&&(l[E]=v[E])})(l,v)};function tu(l,v){function t(){this.constructor=l}Ln(l,v),l.prototype=null===v?Object.create(v):(t.prototype=v.prototype,new t)}var aD=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`,aN={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},aL=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);(M=ti||(ti={}))[M.WEBGL_LEGACY=0]="WEBGL_LEGACY",M[M.WEBGL=1]="WEBGL",M[M.WEBGL2=2]="WEBGL2",(L=tn||(tn={}))[L.UNKNOWN=0]="UNKNOWN",L[L.WEBGL=1]="WEBGL",L[L.CANVAS=2]="CANVAS",(U=to||(to={}))[U.COLOR=16384]="COLOR",U[U.DEPTH=256]="DEPTH",U[U.STENCIL=1024]="STENCIL",(B=ts||(ts={}))[B.NORMAL=0]="NORMAL",B[B.ADD=1]="ADD",B[B.MULTIPLY=2]="MULTIPLY",B[B.SCREEN=3]="SCREEN",B[B.OVERLAY=4]="OVERLAY",B[B.DARKEN=5]="DARKEN",B[B.LIGHTEN=6]="LIGHTEN",B[B.COLOR_DODGE=7]="COLOR_DODGE",B[B.COLOR_BURN=8]="COLOR_BURN",B[B.HARD_LIGHT=9]="HARD_LIGHT",B[B.SOFT_LIGHT=10]="SOFT_LIGHT",B[B.DIFFERENCE=11]="DIFFERENCE",B[B.EXCLUSION=12]="EXCLUSION",B[B.HUE=13]="HUE",B[B.SATURATION=14]="SATURATION",B[B.COLOR=15]="COLOR",B[B.LUMINOSITY=16]="LUMINOSITY",B[B.NORMAL_NPM=17]="NORMAL_NPM",B[B.ADD_NPM=18]="ADD_NPM",B[B.SCREEN_NPM=19]="SCREEN_NPM",B[B.NONE=20]="NONE",B[B.SRC_OVER=0]="SRC_OVER",B[B.SRC_IN=21]="SRC_IN",B[B.SRC_OUT=22]="SRC_OUT",B[B.SRC_ATOP=23]="SRC_ATOP",B[B.DST_OVER=24]="DST_OVER",B[B.DST_IN=25]="DST_IN",B[B.DST_OUT=26]="DST_OUT",B[B.DST_ATOP=27]="DST_ATOP",B[B.ERASE=26]="ERASE",B[B.SUBTRACT=28]="SUBTRACT",B[B.XOR=29]="XOR",(k=th||(th={}))[k.POINTS=0]="POINTS",k[k.LINES=1]="LINES",k[k.LINE_LOOP=2]="LINE_LOOP",k[k.LINE_STRIP=3]="LINE_STRIP",k[k.TRIANGLES=4]="TRIANGLES",k[k.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",k[k.TRIANGLE_FAN=6]="TRIANGLE_FAN",(j=tl||(tl={}))[j.RGBA=6408]="RGBA",j[j.RGB=6407]="RGB",j[j.ALPHA=6406]="ALPHA",j[j.LUMINANCE=6409]="LUMINANCE",j[j.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",j[j.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",j[j.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(X=tc||(tc={}))[X.TEXTURE_2D=3553]="TEXTURE_2D",X[X.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",X[X.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",X[X.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",X[X.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",X[X.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",X[X.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",X[X.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",X[X.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(G=tp||(tp={}))[G.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",G[G.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",G[G.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",G[G.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",G[G.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",G[G.FLOAT=5126]="FLOAT",G[G.HALF_FLOAT=36193]="HALF_FLOAT",(H=td||(td={}))[H.NEAREST=0]="NEAREST",H[H.LINEAR=1]="LINEAR",(Y=tf||(tf={}))[Y.CLAMP=33071]="CLAMP",Y[Y.REPEAT=10497]="REPEAT",Y[Y.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(W=ty||(ty={}))[W.OFF=0]="OFF",W[W.POW2=1]="POW2",W[W.ON=2]="ON",(q=tm||(tm={}))[q.NPM=0]="NPM",q[q.UNPACK=1]="UNPACK",q[q.PMA=2]="PMA",q[q.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",q[q.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",q[q.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(Z=tg||(tg={}))[Z.NO=0]="NO",Z[Z.YES=1]="YES",Z[Z.AUTO=2]="AUTO",Z[Z.BLEND=0]="BLEND",Z[Z.CLEAR=1]="CLEAR",Z[Z.BLIT=2]="BLIT",(K=tv||(tv={}))[K.AUTO=0]="AUTO",K[K.MANUAL=1]="MANUAL",(J=t_||(t_={})).LOW="lowp",J.MEDIUM="mediump",J.HIGH="highp",($=tb||(tb={}))[$.NONE=0]="NONE",$[$.SCISSOR=1]="SCISSOR",$[$.STENCIL=2]="STENCIL",$[$.SPRITE=3]="SPRITE",(Q=tx||(tx={}))[Q.NONE=0]="NONE",Q[Q.LOW=2]="LOW",Q[Q.MEDIUM=4]="MEDIUM",Q[Q.HIGH=8]="HIGH";var aF=function(l){function r(v,E,C,M,L){void 0===E&&(E=8),void 0===C&&(C=4),void 0===M&&(M=tK.RESOLUTION),void 0===L&&(L=5);var U=this,B=function(l,v){var E,C=Math.ceil(l/2),M=aD,L="";E=v?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var U=0;U<l;U++){var B=E.replace("%index%",U.toString());L+=(B=B.replace("%sampleIndex%",U-(C-1)+".0"))+`
`}return(M=M.replace("%blur%",L)).replace("%size%",l.toString())}(L,v),k=function(l){for(var v,E=aN[l],C=E.length,M=aL,L="",U=0;U<l;U++){var B="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",U.toString());v=U,U>=C&&(v=l-U-1),L+=(B=B.replace("%value%",E[v].toString()))+`
`}return(M=M.replace("%blur%",L)).replace("%size%",l.toString())}(L);return(U=l.call(this,B,k)||this).horizontal=v,U.resolution=M,U._quality=0,U.quality=C,U.blur=E,U}return tu(r,l),r.prototype.apply=function(l,v,E,C){if(E?this.horizontal?this.uniforms.strength=1/E.width*(E.width/v.width):this.uniforms.strength=1/E.height*(E.height/v.height):this.horizontal?this.uniforms.strength=1/l.renderer.width*(l.renderer.width/v.width):this.uniforms.strength=1/l.renderer.height*(l.renderer.height/v.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)l.applyFilter(this,v,E,C);else{var M=l.getFilterTexture(),L=l.renderer,U=v,B=M;this.state.blend=!1,l.applyFilter(this,U,B,tg.CLEAR);for(var k=1;k<this.passes-1;k++){l.bindAndClear(U,tg.BLIT),this.uniforms.uSampler=B;var j=B;B=U,U=j,L.shader.bind(this),L.geometry.draw(5)}this.state.blend=!0,l.applyFilter(this,B,E,C),l.returnFilterTexture(M)}},Object.defineProperty(r.prototype,"blur",{get:function(){return this.strength},set:function(l){this.padding=1+2*Math.abs(l),this.strength=l},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"quality",{get:function(){return this._quality},set:function(l){this._quality=l,this.passes=l},enumerable:!1,configurable:!0}),r}(oI),aU=function(l){function r(v,E,C,M){void 0===v&&(v=8),void 0===E&&(E=4),void 0===C&&(C=tK.RESOLUTION),void 0===M&&(M=5);var L=l.call(this)||this;return L.blurXFilter=new aF(!0,v,E,C,M),L.blurYFilter=new aF(!1,v,E,C,M),L.resolution=C,L.quality=E,L.blur=v,L.repeatEdgePixels=!1,L}return tu(r,l),r.prototype.apply=function(l,v,E,C){var M=Math.abs(this.blurXFilter.strength),L=Math.abs(this.blurYFilter.strength);if(M&&L){var U=l.getFilterTexture();this.blurXFilter.apply(l,v,U,tg.CLEAR),this.blurYFilter.apply(l,U,E,C),l.returnFilterTexture(U)}else L?this.blurYFilter.apply(l,v,E,C):this.blurXFilter.apply(l,v,E,C)},r.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},Object.defineProperty(r.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(l){this.blurXFilter.blur=this.blurYFilter.blur=l,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(l){this.blurXFilter.quality=this.blurYFilter.quality=l},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(l){this.blurXFilter.blur=l,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(l){this.blurYFilter.blur=l,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(l){this.blurYFilter.blendMode=l},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(l){this._repeatEdgePixels=l,this.updatePadding()},enumerable:!1,configurable:!0}),r}(oI),Un=function(l,v){return(Un=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(l,v){l.__proto__=v}||function(l,v){for(var E in v)v.hasOwnProperty(E)&&(l[E]=v[E])})(l,v)},aB=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`,ak=function(l){function r(){var v=this,E={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return(v=l.call(this,oK,aB,E)||this).alpha=1,v}return!function(l,v){function t(){this.constructor=l}Un(l,v),l.prototype=null===v?Object.create(v):(t.prototype=v.prototype,new t)}(r,l),r.prototype._loadMatrix=function(l,v){void 0===v&&(v=!1);var E=l;v&&(this._multiply(E,this.uniforms.m,l),E=this._colorMatrix(E)),this.uniforms.m=E},r.prototype._multiply=function(l,v,E){return l[0]=v[0]*E[0]+v[1]*E[5]+v[2]*E[10]+v[3]*E[15],l[1]=v[0]*E[1]+v[1]*E[6]+v[2]*E[11]+v[3]*E[16],l[2]=v[0]*E[2]+v[1]*E[7]+v[2]*E[12]+v[3]*E[17],l[3]=v[0]*E[3]+v[1]*E[8]+v[2]*E[13]+v[3]*E[18],l[4]=v[0]*E[4]+v[1]*E[9]+v[2]*E[14]+v[3]*E[19]+v[4],l[5]=v[5]*E[0]+v[6]*E[5]+v[7]*E[10]+v[8]*E[15],l[6]=v[5]*E[1]+v[6]*E[6]+v[7]*E[11]+v[8]*E[16],l[7]=v[5]*E[2]+v[6]*E[7]+v[7]*E[12]+v[8]*E[17],l[8]=v[5]*E[3]+v[6]*E[8]+v[7]*E[13]+v[8]*E[18],l[9]=v[5]*E[4]+v[6]*E[9]+v[7]*E[14]+v[8]*E[19]+v[9],l[10]=v[10]*E[0]+v[11]*E[5]+v[12]*E[10]+v[13]*E[15],l[11]=v[10]*E[1]+v[11]*E[6]+v[12]*E[11]+v[13]*E[16],l[12]=v[10]*E[2]+v[11]*E[7]+v[12]*E[12]+v[13]*E[17],l[13]=v[10]*E[3]+v[11]*E[8]+v[12]*E[13]+v[13]*E[18],l[14]=v[10]*E[4]+v[11]*E[9]+v[12]*E[14]+v[13]*E[19]+v[14],l[15]=v[15]*E[0]+v[16]*E[5]+v[17]*E[10]+v[18]*E[15],l[16]=v[15]*E[1]+v[16]*E[6]+v[17]*E[11]+v[18]*E[16],l[17]=v[15]*E[2]+v[16]*E[7]+v[17]*E[12]+v[18]*E[17],l[18]=v[15]*E[3]+v[16]*E[8]+v[17]*E[13]+v[18]*E[18],l[19]=v[15]*E[4]+v[16]*E[9]+v[17]*E[14]+v[18]*E[19]+v[19],l},r.prototype._colorMatrix=function(l){var v=new Float32Array(l);return v[4]/=255,v[9]/=255,v[14]/=255,v[19]/=255,v},r.prototype.brightness=function(l,v){var E=[l,0,0,0,0,0,l,0,0,0,0,0,l,0,0,0,0,0,1,0];this._loadMatrix(E,v)},r.prototype.greyscale=function(l,v){var E=[l,l,l,0,0,l,l,l,0,0,l,l,l,0,0,0,0,0,1,0];this._loadMatrix(E,v)},r.prototype.blackAndWhite=function(l){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],l)},r.prototype.hue=function(l,v){var E=Math.cos(l=(l||0)/180*Math.PI),C=Math.sin(l),M=1/3,L=(0,Math.sqrt)(1/3);this._loadMatrix([E+(1-E)*M,M*(1-E)-L*C,M*(1-E)+L*C,0,0,M*(1-E)+L*C,E+M*(1-E),M*(1-E)-L*C,0,0,M*(1-E)-L*C,M*(1-E)+L*C,E+M*(1-E),0,0,0,0,0,1,0],v)},r.prototype.contrast=function(l,v){var E=(l||0)+1,C=-.5*(E-1),M=[E,0,0,0,C,0,E,0,0,C,0,0,E,0,C,0,0,0,1,0];this._loadMatrix(M,v)},r.prototype.saturate=function(l,v){void 0===l&&(l=0);var E=2*l/3+1,C=-((E-1)*.5),M=[E,C,C,0,0,C,E,C,0,0,C,C,E,0,0,0,0,0,1,0];this._loadMatrix(M,v)},r.prototype.desaturate=function(){this.saturate(-1)},r.prototype.negative=function(l){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],l)},r.prototype.sepia=function(l){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],l)},r.prototype.technicolor=function(l){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],l)},r.prototype.polaroid=function(l){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],l)},r.prototype.toBGR=function(l){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],l)},r.prototype.kodachrome=function(l){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],l)},r.prototype.browni=function(l){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],l)},r.prototype.vintage=function(l){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],l)},r.prototype.colorTone=function(l,v,E,C,M){l=l||.2,v=v||.15,E=E||16770432,C=C||3375104;var L=(E>>16&255)/255,U=(E>>8&255)/255,B=(255&E)/255,k=(C>>16&255)/255,j=(C>>8&255)/255,X=(255&C)/255,G=[.3,.59,.11,0,0,L,U,B,l,0,k,j,X,v,0,L-k,U-j,B-X,0,0];this._loadMatrix(G,M)},r.prototype.night=function(l,v){var E=[-2*(l=l||.1),-l,0,0,0,-l,0,l,0,0,0,l,2*l,0,0,0,0,0,1,0];this._loadMatrix(E,v)},r.prototype.predator=function(l,v){this._loadMatrix([11.224130630493164*l,-4.794486999511719*l,-2.8746118545532227*l,0*l,.40342438220977783*l,-3.6330697536468506*l,9.193157196044922*l,-2.951810836791992*l,0*l,-1.316135048866272*l,-3.2184197902679443*l,-4.2375030517578125*l,7.476448059082031*l,0*l,.8044459223747253*l,0,0,0,1,0],v)},r.prototype.lsd=function(l){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],l)},r.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperty(r.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(l){this.uniforms.m=l},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(l){this.uniforms.uAlpha=l},enumerable:!1,configurable:!0}),r}(oI);ak.prototype.grayscale=ak.prototype.greyscale;/*!
 * @pixi/filter-displacement - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var kn=function(l,v){return(kn=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(l,v){l.__proto__=v}||function(l,v){for(var E in v)v.hasOwnProperty(E)&&(l[E]=v[E])})(l,v)},aj=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,aX=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`,aG=function(l){function r(v,E){var C=this,M=new i0;return v.renderable=!1,(C=l.call(this,aX,aj,{mapSampler:v._texture,filterMatrix:M,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this).maskSprite=v,C.maskMatrix=M,null==E&&(E=20),C.scale=new i$(E,E),C}return!function(l,v){function t(){this.constructor=l}kn(l,v),l.prototype=null===v?Object.create(v):(t.prototype=v.prototype,new t)}(r,l),r.prototype.apply=function(l,v,E,C){this.uniforms.filterMatrix=l.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var M=this.maskSprite.worldTransform,L=Math.sqrt(M.a*M.a+M.b*M.b),U=Math.sqrt(M.c*M.c+M.d*M.d);0!==L&&0!==U&&(this.uniforms.rotation[0]=M.a/L,this.uniforms.rotation[1]=M.b/L,this.uniforms.rotation[2]=M.c/U,this.uniforms.rotation[3]=M.d/U),l.applyFilter(this,v,E,C)},Object.defineProperty(r.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(l){this.uniforms.mapSampler=l},enumerable:!1,configurable:!0}),r}(oI),Xn=function(l,v){return(Xn=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(l,v){l.__proto__=v}||function(l,v){for(var E in v)v.hasOwnProperty(E)&&(l[E]=v[E])})(l,v)},aH=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputPixel;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`,az=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputPixel;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,aY=function(l){function r(){return l.call(this,aH,az)||this}return!function(l,v){function t(){this.constructor=l}Xn(l,v),l.prototype=null===v?Object.create(v):(t.prototype=v.prototype,new t)}(r,l),r}(oI),Gn=function(l,v){return(Gn=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(l,v){l.__proto__=v}||function(l,v){for(var E in v)v.hasOwnProperty(E)&&(l[E]=v[E])})(l,v)},aV=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`,aW=function(l){function r(v,E){void 0===v&&(v=.5),void 0===E&&(E=Math.random());var C=l.call(this,oK,aV,{uNoise:0,uSeed:0})||this;return C.noise=v,C.seed=E,C}return!function(l,v){function t(){this.constructor=l}Gn(l,v),l.prototype=null===v?Object.create(v):(t.prototype=v.prototype,new t)}(r,l),Object.defineProperty(r.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(l){this.uniforms.uNoise=l},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(l){this.uniforms.uSeed=l},enumerable:!1,configurable:!0}),r}(oI),aq=new i0;ne.prototype._cacheAsBitmap=!1,ne.prototype._cacheData=null;var gp=function(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null};Object.defineProperties(ne.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(l){if(this._cacheAsBitmap!==l){var v;this._cacheAsBitmap=l,l?(this._cacheData||(this._cacheData=new gp),(v=this._cacheData).originalRender=this.render,v.originalRenderCanvas=this.renderCanvas,v.originalUpdateTransform=this.updateTransform,v.originalCalculateBounds=this.calculateBounds,v.originalGetLocalBounds=this.getLocalBounds,v.originalDestroy=this.destroy,v.originalContainsPoint=this.containsPoint,v.originalMask=this._mask,v.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((v=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=v.originalRender,this.renderCanvas=v.originalRenderCanvas,this.calculateBounds=v.originalCalculateBounds,this.getLocalBounds=v.originalGetLocalBounds,this.destroy=v.originalDestroy,this.updateTransform=v.originalUpdateTransform,this.containsPoint=v.originalContainsPoint,this._mask=v.originalMask,this.filterArea=v.originalFilterArea)}}}}),ne.prototype._renderCached=function(l){this.visible&&!(this.worldAlpha<=0)&&this.renderable&&(this._initCachedDisplayObject(l),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(l))},ne.prototype._initCachedDisplayObject=function(l){if(!(this._cacheData&&this._cacheData.sprite)){var v=this.alpha;this.alpha=1,l.batch.flush();var E=this.getLocalBounds(null,!0).clone();if(this.filters){var C=this.filters[0].padding;E.pad(C)}E.ceil(tK.RESOLUTION);var M=l.renderTexture.current,L=l.renderTexture.sourceFrame.clone(),U=l.projection.transform,B=nH.create({width:E.width,height:E.height}),k="cacheAsBitmap_"+be();this._cacheData.textureCacheId=k,nP.addToCache(B.baseTexture,k),nG.addToCache(B,k);var j=this.transform.localTransform.copyTo(aq).invert().translate(-E.x,-E.y);this.render=this._cacheData.originalRender,l.render(this,B,!0,j,!1),l.projection.transform=U,l.renderTexture.bind(M,L),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var X=new s2(B);X.transform.worldTransform=this.transform.worldTransform,X.anchor.x=-(E.x/E.width),X.anchor.y=-(E.y/E.height),X.alpha=v,X._bounds=this._bounds,this._cacheData.sprite=X,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=X.containsPoint.bind(X)}},ne.prototype._renderCachedCanvas=function(l){this.visible&&!(this.worldAlpha<=0)&&this.renderable&&(this._initCachedDisplayObjectCanvas(l),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(l))},ne.prototype._initCachedDisplayObjectCanvas=function(l){if(!(this._cacheData&&this._cacheData.sprite)){var v=this.getLocalBounds(null,!0),E=this.alpha;this.alpha=1;var C=l.context,M=l._projTransform;v.ceil(tK.RESOLUTION);var L=nH.create({width:v.width,height:v.height}),U="cacheAsBitmap_"+be();this._cacheData.textureCacheId=U,nP.addToCache(L.baseTexture,U),nG.addToCache(L,U),this.transform.localTransform.copyTo(aq),aq.invert(),aq.tx-=v.x,aq.ty-=v.y,this.renderCanvas=this._cacheData.originalRenderCanvas,l.render(this,L,!0,aq,!1),l.context=C,l._projTransform=M,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var B=new s2(L);B.transform.worldTransform=this.transform.worldTransform,B.anchor.x=-(v.x/v.width),B.anchor.y=-(v.y/v.height),B.alpha=E,B._bounds=this._bounds,this._cacheData.sprite=B,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=l._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=B.containsPoint.bind(B)}},ne.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},ne.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},ne.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,nP.removeFromCache(this._cacheData.textureCacheId),nG.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},ne.prototype._cacheAsBitmapDestroy=function(l){this.cacheAsBitmap=!1,this.destroy(l)},/*!
 * @pixi/mixin-get-child-by-name - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */ne.prototype.name=null,no.prototype.getChildByName=function(l,v){for(var E=0,C=this.children.length;E<C;E++)if(this.children[E].name===l)return this.children[E];if(v){for(var E=0,C=this.children.length;E<C;E++)if(this.children[E].getChildByName){var M=this.children[E].getChildByName(l,!0);if(M)return M}}return null},/*!
 * @pixi/mixin-get-global-position - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */ne.prototype.getGlobalPosition=function(l,v){return void 0===l&&(l=new i$),void 0===v&&(v=!1),this.parent?this.parent.toGlobal(this.position,l,v):(l.x=this.position.x,l.y=this.position.y),l};/*!
 * @pixi/mesh-extras - v5.3.3
 * Compiled Tue, 04 Aug 2020 16:23:09 UTC
 *
 * @pixi/mesh-extras is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Hn=function(l,v){return(Hn=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(l,v){l.__proto__=v}||function(l,v){for(var E in v)v.hasOwnProperty(E)&&(l[E]=v[E])})(l,v)};function Ze(l,v){function t(){this.constructor=l}Hn(l,v),l.prototype=null===v?Object.create(v):(t.prototype=v.prototype,new t)}var aZ=function(l){function r(v,E,C,M){void 0===v&&(v=100),void 0===E&&(E=100),void 0===C&&(C=10),void 0===M&&(M=10);var L=l.call(this)||this;return L.segWidth=C,L.segHeight=M,L.width=v,L.height=E,L.build(),L}return Ze(r,l),r.prototype.build=function(){for(var l=this.segWidth*this.segHeight,v=[],E=[],C=[],M=this.segWidth-1,L=this.segHeight-1,U=this.width/M,B=this.height/L,k=0;k<l;k++){var j=k%this.segWidth,X=k/this.segWidth|0;v.push(j*U,X*B),E.push(j/M,X/L)}for(var G=M*L,k=0;k<G;k++){var H=k%M,Y=k/M|0,W=Y*this.segWidth+H,q=Y*this.segWidth+H+1,Z=(Y+1)*this.segWidth+H,K=(Y+1)*this.segWidth+H+1;C.push(W,q,Z,q,K,Z)}this.buffers[0].data=new Float32Array(v),this.buffers[1].data=new Float32Array(E),this.indexBuffer.data=new Uint16Array(C),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},r}(aI),aK=function(l){function r(v,E,C){void 0===v&&(v=200),void 0===C&&(C=0);var M=l.call(this,new Float32Array(4*E.length),new Float32Array(4*E.length),new Uint16Array((E.length-1)*6))||this;return M.points=E,M._width=v,M.textureScale=C,M.build(),M}return Ze(r,l),Object.defineProperty(r.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),r.prototype.build=function(){var l=this.points;if(l){var v=this.getBuffer("aVertexPosition"),E=this.getBuffer("aTextureCoord"),C=this.getIndex();if(!(l.length<1)){v.data.length/4!==l.length&&(v.data=new Float32Array(4*l.length),E.data=new Float32Array(4*l.length),C.data=new Uint16Array((l.length-1)*6));var M=E.data,L=C.data;M[0]=0,M[1]=0,M[2]=0,M[3]=1;for(var U=0,B=l[0],k=this._width*this.textureScale,j=l.length,X=0;X<j;X++){var G=4*X;if(this.textureScale>0){var H=B.x-l[X].x,Y=B.y-l[X].y,W=Math.sqrt(H*H+Y*Y);B=l[X],U+=W/k}else U=X/(j-1);M[G]=U,M[G+1]=0,M[G+2]=U,M[G+3]=1}for(var q=0,X=0;X<j-1;X++){var G=2*X;L[q++]=G,L[q++]=G+1,L[q++]=G+2,L[q++]=G+2,L[q++]=G+1,L[q++]=G+3}E.update(),C.update(),this.updateVertices()}}},r.prototype.updateVertices=function(){var l=this.points;if(!(l.length<1)){for(var v,E=l[0],C=0,M=0,L=this.buffers[0].data,U=l.length,B=0;B<U;B++){var k=l[B],j=4*B;M=-((v=B<l.length-1?l[B+1]:k).x-E.x);var X=Math.sqrt((C=v.y-E.y)*C+M*M),G=this.textureScale>0?this.textureScale*this._width/2:this._width/2;C/=X,M/=X,C*=G,M*=G,L[j]=k.x+C,L[j+1]=k.y+M,L[j+2]=k.x-C,L[j+3]=k.y-M,E=k}this.buffers[0].update()}},r.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},r}(aI),aJ=function(l){function r(v,E,C){void 0===C&&(C=0);var M=this,L=new aK(v.height,E,C),U=new aE(v);return C>0&&(v.baseTexture.wrapMode=iD.REPEAT),(M=l.call(this,L,U)||this).autoUpdate=!0,M}return Ze(r,l),r.prototype._render=function(v){var E=this.geometry;(this.autoUpdate||E._width!==this.shader.texture.height)&&(E._width=this.shader.texture.height,E.update()),l.prototype._render.call(this,v)},r}(ab),a$=function(l){function r(v,E,C){var M=this,L=new aZ(v.width,v.height,E,C),U=new aE(nG.WHITE);return(M=l.call(this,L,U)||this).texture=v,M}return Ze(r,l),r.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var l=this.geometry;l.width=this.shader.texture.width,l.height=this.shader.texture.height,l.build()},Object.defineProperty(r.prototype,"texture",{get:function(){return this.shader.texture},set:function(l){this.shader.texture!==l&&(this.shader.texture=l,this._textureID=-1,l.baseTexture.valid?this.textureUpdated():l.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),r.prototype._render=function(v){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),l.prototype._render.call(this,v)},r}(ab),aQ=function(l){function r(v,E,C,M,L){void 0===v&&(v=nG.EMPTY);var U=this,B=new aI(E,C,M);B.getBuffer("aVertexPosition").static=!1;var k=new aE(v);return(U=l.call(this,B,k,null,L)||this).autoUpdate=!0,U}return Ze(r,l),Object.defineProperty(r.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(l){this.geometry.getBuffer("aVertexPosition").data=l},enumerable:!1,configurable:!0}),r.prototype._render=function(v){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),l.prototype._render.call(this,v)},r}(ab),a0=function(l){function r(v,E,C,M,L){void 0===E&&(E=10),void 0===C&&(C=10),void 0===M&&(M=10),void 0===L&&(L=10);var U=l.call(this,nG.WHITE,4,4)||this;return U._origWidth=v.orig.width,U._origHeight=v.orig.height,U._width=U._origWidth,U._height=U._origHeight,U._leftWidth=E,U._rightWidth=M,U._topHeight=C,U._bottomHeight=L,U.texture=v,U}return Ze(r,l),r.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(r.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(l){this.geometry.getBuffer("aVertexPosition").data=l},enumerable:!1,configurable:!0}),r.prototype.updateHorizontalVertices=function(){var l=this.vertices,v=this._getMinScale();l[9]=l[11]=l[13]=l[15]=this._topHeight*v,l[17]=l[19]=l[21]=l[23]=this._height-this._bottomHeight*v,l[25]=l[27]=l[29]=l[31]=this._height},r.prototype.updateVerticalVertices=function(){var l=this.vertices,v=this._getMinScale();l[2]=l[10]=l[18]=l[26]=this._leftWidth*v,l[4]=l[12]=l[20]=l[28]=this._width-this._rightWidth*v,l[6]=l[14]=l[22]=l[30]=this._width},r.prototype._getMinScale=function(){var l=this._leftWidth+this._rightWidth,v=this._width>l?1:this._width/l,E=this._topHeight+this._bottomHeight;return Math.min(v,this._height>E?1:this._height/E)},Object.defineProperty(r.prototype,"width",{get:function(){return this._width},set:function(l){this._width=l,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},set:function(l){this._height=l,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(l){this._leftWidth=l,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(l){this._rightWidth=l,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"topHeight",{get:function(){return this._topHeight},set:function(l){this._topHeight=l,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(l){this._bottomHeight=l,this._refresh()},enumerable:!1,configurable:!0}),r.prototype._refresh=function(){var l=this.texture,v=this.geometry.buffers[1].data;this._origWidth=l.orig.width,this._origHeight=l.orig.height;var E=1/this._origWidth,C=1/this._origHeight;v[0]=v[8]=v[16]=v[24]=0,v[1]=v[3]=v[5]=v[7]=0,v[6]=v[14]=v[22]=v[30]=1,v[25]=v[27]=v[29]=v[31]=1,v[2]=v[10]=v[18]=v[26]=E*this._leftWidth,v[4]=v[12]=v[20]=v[28]=1-E*this._rightWidth,v[9]=v[11]=v[13]=v[15]=C*this._topHeight,v[17]=v[19]=v[21]=v[23]=1-C*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},r}(a$),jn=function(l,v){return(jn=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(l,v){l.__proto__=v}||function(l,v){for(var E in v)v.hasOwnProperty(E)&&(l[E]=v[E])})(l,v)},a1=function(l){function r(v,E){void 0===E&&(E=!0);var C=l.call(this,v[0]instanceof nG?v[0]:v[0].texture)||this;return C._textures=null,C._durations=null,C._autoUpdate=E,C._isConnectedToTicker=!1,C.animationSpeed=1,C.loop=!0,C.updateAnchor=!1,C.onComplete=null,C.onFrameChange=null,C.onLoop=null,C._currentTime=0,C._playing=!1,C._previousFrame=null,C.textures=v,C}return!function(l,v){function t(){this.constructor=l}jn(l,v),l.prototype=null===v?Object.create(v):(t.prototype=v.prototype,new t)}(r,l),r.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(np.shared.remove(this.update,this),this._isConnectedToTicker=!1))},r.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(np.shared.add(this.update,this,sM.HIGH),this._isConnectedToTicker=!0))},r.prototype.gotoAndStop=function(l){this.stop();var v=this.currentFrame;this._currentTime=l,v!==this.currentFrame&&this.updateTexture()},r.prototype.gotoAndPlay=function(l){var v=this.currentFrame;this._currentTime=l,v!==this.currentFrame&&this.updateTexture(),this.play()},r.prototype.update=function(l){var v=this.animationSpeed*l,E=this.currentFrame;if(null!==this._durations){var C=this._currentTime%1*this._durations[this.currentFrame];for(C+=v/60*1e3;C<0;)this._currentTime--,C+=this._durations[this.currentFrame];var M=Math.sign(this.animationSpeed*l);for(this._currentTime=Math.floor(this._currentTime);C>=this._durations[this.currentFrame];)C-=this._durations[this.currentFrame]*M,this._currentTime+=M;this._currentTime+=C/this._durations[this.currentFrame]}else this._currentTime+=v;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):E!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<E?this.onLoop():this.animationSpeed<0&&this.currentFrame>E&&this.onLoop()),this.updateTexture())},r.prototype.updateTexture=function(){var l=this.currentFrame;this._previousFrame!==l&&(this._previousFrame=l,this._texture=this._textures[l],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},r.prototype.destroy=function(v){this.stop(),l.prototype.destroy.call(this,v),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},r.fromFrames=function(l){for(var v=[],E=0;E<l.length;++E)v.push(nG.from(l[E]));return new r(v)},r.fromImages=function(l){for(var v=[],E=0;E<l.length;++E)v.push(nG.from(l[E]));return new r(v)},Object.defineProperty(r.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"textures",{get:function(){return this._textures},set:function(l){if(l[0]instanceof nG)this._textures=l,this._durations=null;else{this._textures=[],this._durations=[];for(var v=0;v<l.length;v++)this._textures.push(l[v].texture),this._durations.push(l[v].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"currentFrame",{get:function(){var l=Math.floor(this._currentTime)%this._textures.length;return l<0&&(l+=this._textures.length),l},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(l){l!==this._autoUpdate&&(this._autoUpdate=l,!this._autoUpdate&&this._isConnectedToTicker?(np.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(np.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),r}(s2),zn=function(l,v){return(zn=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(l,v){l.__proto__=v}||function(l,v){for(var E in v)v.hasOwnProperty(E)&&(l[E]=v[E])})(l,v)};function Jo(l,v){function t(){this.constructor=l}zn(l,v),l.prototype=null===v?Object.create(v):(t.prototype=v.prototype,new t)}var a2="5.0.0";oq.registerPlugin("accessibility",nl),oq.registerPlugin("extract",o9),oq.registerPlugin("interaction",nb),oq.registerPlugin("particle",s_),oq.registerPlugin("prepare",ai),oq.registerPlugin("batch",o4),oq.registerPlugin("tilingSprite",am),sp.registerPlugin(aC),sp.registerPlugin(as),o6.registerPlugin(nd),o6.registerPlugin(sf);let a3=Object.freeze(Object.defineProperty({__proto__:null,get ALPHA_MODES(){return iL},AbstractBatchRenderer:oQ,AbstractRenderer:oW,AccessibilityManager:nl,AnimatedSprite:a1,AppLoaderPlugin:sf,Application:o6,Attribute:nY,get BLEND_MODES(){return iS},get BUFFER_BITS(){return iP},BasePrepare:ar,BaseRenderTexture:nk,BaseTexture:nP,BatchDrawCall:ni,BatchGeometry:o1,BatchPluginFactory:o5,BatchRenderer:o4,BatchShaderGenerator:o0,BatchTextureArray:oJ,BitmapFont:aP,BitmapFontData:mr,BitmapFontLoader:aC,BitmapText:aO,Bounds:nt,Buffer:nW,get CLEAR_MODES(){return iF},Circle:iq,Container:no,CountLimiter:at,DEG_TO_RAD:iV,get DRAW_MODES(){return iA},DisplayObject:ne,get ENV(){return iI},Ellipse:iZ,Extract:o9,get FORMATS(){return iO},FillStyle:sx,Filter:oI,FilterState:n3,Framebuffer:nB,get GC_MODES(){return iU},GLFramebuffer:Qs,GLProgram:ok,GLTexture:$r,GRAPHICS_CURVES:sb,Geometry:n$,Graphics:sQ,GraphicsData:sV,GraphicsGeometry:sZ,IGLUniformData:function(){},InteractionData:nf,InteractionEvent:ny,InteractionManager:nb,InteractionTrackingData:nm,get LINE_CAP(){return sF},get LINE_JOIN(){return sL},LineStyle:sK,Loader:sp,LoaderResource:so,get MASK_TYPES(){return ik},get MIPMAP_MODES(){return iN},get MSAA_QUALITY(){return ij},MaskData:oi,Matrix:i0,Mesh:ab,MeshBatchUvs:ag,MeshGeometry:aI,MeshMaterial:aE,NineSlicePlane:a0,ObjectRenderer:n4,ObservablePoint:iQ,PI_2:iz,get PRECISION(){return iB},ParticleContainer:sy,ParticleRenderer:s_,PlaneGeometry:aZ,Point:i$,Polygon:iK,Prepare:ai,Program:o_,Quad:nQ,QuadUv:n0,RAD_TO_DEG:iY,get RENDERER_TYPE(){return iw},Rectangle:iW,RenderTexture:nH,RenderTexturePool:nz,Renderer:oq,RopeGeometry:aK,RoundedRectangle:iJ,Runner:nx,get SCALE_MODES(){return iM},get SHAPES(){return iH},Shader:ob,SimpleMesh:aQ,SimplePlane:a$,SimpleRope:aJ,Sprite:s2,SpriteMaskFilter:oO,Spritesheet:ao,SpritesheetLoader:as,State:ox,System:nF,get TARGETS(){return iC},get TEXT_GRADIENT(){return tr},get TYPES(){return iR},TemporaryDisplayObject:nr,Text:s9,TextMetrics:s6,TextStyle:s4,Texture:nG,TextureLoader:sc,TextureMatrix:oA,TextureUvs:nj,Ticker:np,TickerPlugin:nd,TilingSprite:ah,TilingSpriteRenderer:am,TimeLimiter:an,Transform:i9,get UPDATE_PRIORITY(){return sM},UniformGroup:n2,VERSION:"5.3.3",ViewableBuffer:o$,get WRAP_MODES(){return iD},accessibleTarget:nu,autoDetectRenderer:bh,checkMaxIfStatementsInShader:sh,defaultFilterVertex:oK,defaultVertex:oZ,filters:{AlphaFilter:aM,BlurFilter:aU,BlurFilterPass:aF,ColorMatrixFilter:ak,DisplacementFilter:aG,FXAAFilter:aY,NoiseFilter:aW},graphicsUtils:{buildPoly:sT,buildCircle:sE,buildRectangle:sI,buildRoundedRectangle:sw,FILL_COMMANDS:sH,BATCH_POOL:sz,DRAW_CALL_POOL:sY,buildLine:Pn,Star:sB,ArcUtils:sk,BezierUtils:sj,QuadraticUtils:sX,BatchPart:sG},groupD8:i7,interactiveTarget:nv,isMobile:tZ,resources:{Resource:nE,BaseImageResource:nO,INSTALLED:nT,autoDetectResource:ha,AbstractMultiResource:nS,ArrayResource:nA,BufferResource:nI,CanvasResource:nC,CubeResource:nR,ImageResource:nM,SVGResource:nD,VideoResource:nN,ImageBitmapResource:nL},settings:tK,systems:{FilterSystem:n5,BatchSystem:n6,ContextSystem:n7,FramebufferSystem:ot,GeometrySystem:or,MaskSystem:oC,ScissorSystem:oM,StencilSystem:oD,ProjectionSystem:oN,RenderTextureSystem:oB,ShaderSystem:oG,StateSystem:oH,TextureGCSystem:oz,TextureSystem:oY},uniformParsers:oc,useDeprecated:function(){var l=this;Object.defineProperties(l,{SVG_SIZE:{get:function(){return I(a2,"PIXI.utils.SVG_SIZE property has moved to PIXI.resources.SVGResource.SVG_SIZE"),l.SVGResource.SVG_SIZE}},TransformStatic:{get:function(){return I(a2,"PIXI.TransformStatic class has been removed, use PIXI.Transform"),l.Transform}},TransformBase:{get:function(){return I(a2,"PIXI.TransformBase class has been removed, use PIXI.Transform"),l.Transform}},TRANSFORM_MODE:{get:function(){return I(a2,"PIXI.TRANSFORM_MODE property has been removed"),{STATIC:0,DYNAMIC:1}}},WebGLRenderer:{get:function(){return I(a2,"PIXI.WebGLRenderer class has moved to PIXI.Renderer"),l.Renderer}},CanvasRenderTarget:{get:function(){return I(a2,"PIXI.CanvasRenderTarget class has moved to PIXI.utils.CanvasRenderTarget"),l.utils.CanvasRenderTarget}},loader:{get:function(){return I(a2,"PIXI.loader instance has moved to PIXI.Loader.shared"),l.Loader.shared}},FilterManager:{get:function(){return I(a2,"PIXI.FilterManager class has moved to PIXI.systems.FilterSystem"),l.systems.FilterSystem}},CanvasTinter:{get:function(){return I("5.2.0","PIXI.CanvasTinter namespace has moved to PIXI.canvasUtils"),l.canvasUtils}},GroupD8:{get:function(){return I("5.2.0","PIXI.GroupD8 namespace has moved to PIXI.groupD8"),l.groupD8}}}),l.accessibility={},Object.defineProperties(l.accessibility,{AccessibilityManager:{get:function(){return I("5.3.0","PIXI.accessibility.AccessibilityManager moved to PIXI.AccessibilityManager"),l.AccessibilityManager}}}),l.interaction={},Object.defineProperties(l.interaction,{InteractionManager:{get:function(){return I("5.3.0","PIXI.interaction.InteractionManager moved to PIXI.InteractionManager"),l.InteractionManager}},InteractionData:{get:function(){return I("5.3.0","PIXI.interaction.InteractionData moved to PIXI.InteractionData"),l.InteractionData}},InteractionEvent:{get:function(){return I("5.3.0","PIXI.interaction.InteractionEvent moved to PIXI.InteractionEvent"),l.InteractionEvent}}}),l.prepare={},Object.defineProperties(l.prepare,{BasePrepare:{get:function(){return I("5.2.1","PIXI.prepare.BasePrepare moved to PIXI.BasePrepare"),l.BasePrepare}},Prepare:{get:function(){return I("5.2.1","PIXI.prepare.Prepare moved to PIXI.Prepare"),l.Prepare}},CanvasPrepare:{get:function(){return I("5.2.1","PIXI.prepare.CanvasPrepare moved to PIXI.CanvasPrepare"),l.CanvasPrepare}}}),l.extract={},Object.defineProperties(l.extract,{Extract:{get:function(){return I("5.2.1","PIXI.extract.Extract moved to PIXI.Extract"),l.Extract}},CanvasExtract:{get:function(){return I("5.2.1","PIXI.extract.CanvasExtract moved to PIXI.CanvasExtract"),l.CanvasExtract}}}),l.extras={},Object.defineProperties(l.extras,{TilingSprite:{get:function(){return I(a2,"PIXI.extras.TilingSprite class has moved to PIXI.TilingSprite"),l.TilingSprite}},TilingSpriteRenderer:{get:function(){return I(a2,"PIXI.extras.TilingSpriteRenderer class has moved to PIXI.TilingSpriteRenderer"),l.TilingSpriteRenderer}},AnimatedSprite:{get:function(){return I(a2,"PIXI.extras.AnimatedSprite class has moved to PIXI.AnimatedSprite"),l.AnimatedSprite}},BitmapText:{get:function(){return I(a2,"PIXI.extras.BitmapText class has moved to PIXI.BitmapText"),l.BitmapText}}}),l.TilingSprite.fromFrame=function(v,E,C){return I("5.3.0","TilingSprite.fromFrame is deprecated, use TilingSprite.from"),l.TilingSprite.from(v,{width:E,height:C})},l.TilingSprite.fromImage=function(v,E,C,M){return void 0===M&&(M={}),I("5.3.0","TilingSprite.fromImage is deprecated, use TilingSprite.from"),M&&"object"!=typeof M&&(M={scaleMode:arguments[4],resourceOptions:{crossorigin:arguments[3]}}),M.width=E,M.height=C,l.TilingSprite.from(v,M)},Object.defineProperties(l.utils,{getSvgSize:{get:function(){return I(a2,"PIXI.utils.getSvgSize function has moved to PIXI.resources.SVGResource.getSize"),l.resources.SVGResource.getSize}}}),l.mesh={},Object.defineProperties(l.mesh,{Mesh:{get:function(){return I(a2,"PIXI.mesh.Mesh class has moved to PIXI.SimpleMesh"),l.SimpleMesh}},NineSlicePlane:{get:function(){return I(a2,"PIXI.mesh.NineSlicePlane class has moved to PIXI.NineSlicePlane"),l.NineSlicePlane}},Plane:{get:function(){return I(a2,"PIXI.mesh.Plane class has moved to PIXI.SimplePlane"),l.SimplePlane}},Rope:{get:function(){return I(a2,"PIXI.mesh.Rope class has moved to PIXI.SimpleRope"),l.SimpleRope}},RawMesh:{get:function(){return I(a2,"PIXI.mesh.RawMesh class has moved to PIXI.Mesh"),l.Mesh}},CanvasMeshRenderer:{get:function(){return I(a2,"PIXI.mesh.CanvasMeshRenderer class has moved to PIXI.CanvasMeshRenderer"),l.CanvasMeshRenderer}},MeshRenderer:{get:function(){return I(a2,"PIXI.mesh.MeshRenderer class has moved to PIXI.MeshRenderer"),l.MeshRenderer}}}),l.particles={},Object.defineProperties(l.particles,{ParticleContainer:{get:function(){return I(a2,"PIXI.particles.ParticleContainer class has moved to PIXI.ParticleContainer"),l.ParticleContainer}},ParticleRenderer:{get:function(){return I(a2,"PIXI.particles.ParticleRenderer class has moved to PIXI.ParticleRenderer"),l.ParticleRenderer}}}),l.ticker={},Object.defineProperties(l.ticker,{Ticker:{get:function(){return I(a2,"PIXI.ticker.Ticker class has moved to PIXI.Ticker"),l.Ticker}},shared:{get:function(){return I(a2,"PIXI.ticker.shared instance has moved to PIXI.Ticker.shared"),l.Ticker.shared}}}),l.loaders={},Object.defineProperties(l.loaders,{Loader:{get:function(){return I(a2,"PIXI.loaders.Loader class has moved to PIXI.Loader"),l.Loader}},Resource:{get:function(){return I(a2,"PIXI.loaders.Resource class has moved to PIXI.LoaderResource"),l.LoaderResource}},bitmapFontParser:{get:function(){return I(a2,"PIXI.loaders.bitmapFontParser function has moved to PIXI.BitmapFontLoader.use"),l.BitmapFontLoader.use}},parseBitmapFontData:{get:function(){I(a2,"PIXI.loaders.parseBitmapFontData function has removed")}},spritesheetParser:{get:function(){return I(a2,"PIXI.loaders.spritesheetParser function has moved to PIXI.SpritesheetLoader.use"),l.SpritesheetLoader.use}},getResourcePath:{get:function(){return I(a2,"PIXI.loaders.getResourcePath property has moved to PIXI.SpritesheetLoader.getResourcePath"),l.SpritesheetLoader.getResourcePath}}}),l.Loader.addPixiMiddleware=function(v){return I(a2,"PIXI.loaders.Loader.addPixiMiddleware function is deprecated, use PIXI.loaders.Loader.registerPlugin"),l.loaders.Loader.registerPlugin({use:v()})};var r=function(l){return"on"+l.charAt(0).toUpperCase()+l.slice(1)};Object.assign(l.Loader.prototype,{on:function(l){I(a2,"PIXI.Loader#on is completely deprecated, use PIXI.Loader#"+r(l)+".add")},once:function(l){I(a2,"PIXI.Loader#once is completely deprecated, use PIXI.Loader#"+r(l)+".once")},off:function(l){I(a2,"PIXI.Loader#off is completely deprecated, use PIXI.Loader#"+r(l)+".detach")}}),Object.defineProperty(l.extract,"WebGLExtract",{get:function(){return I(a2,"PIXI.extract.WebGLExtract method has moved to PIXI.Extract"),l.Extract}}),Object.defineProperty(l.prepare,"WebGLPrepare",{get:function(){return I(a2,"PIXI.prepare.WebGLPrepare class has moved to PIXI.Prepare"),l.Prepare}}),l.Container.prototype._renderWebGL=function(l){I(a2,"PIXI.Container._renderWebGL method has moved to PIXI.Container._render"),this._render(l)},l.Container.prototype.renderWebGL=function(l){I(a2,"PIXI.Container.renderWebGL method has moved to PIXI.Container.render"),this.render(l)},l.DisplayObject.prototype.renderWebGL=function(l){I(a2,"PIXI.DisplayObject.renderWebGL method has moved to PIXI.DisplayObject.render"),this.render(l)},l.Container.prototype.renderAdvancedWebGL=function(l){I(a2,"PIXI.Container.renderAdvancedWebGL method has moved to PIXI.Container.renderAdvanced"),this.renderAdvanced(l)},Object.defineProperties(l.settings,{TRANSFORM_MODE:{get:function(){return I(a2,"PIXI.settings.TRANSFORM_MODE property has been removed"),0},set:function(){I(a2,"PIXI.settings.TRANSFORM_MODE property has been removed")}}});var v=l.BaseTexture;v.prototype.loadSource=function(v){I(a2,"PIXI.BaseTexture.loadSource method has been deprecated");var E=l.resources.autoDetectResource(v);E.internal=!0,this.setResource(E),this.update()};var E=!1;Object.defineProperties(v.prototype,{hasLoaded:{get:function(){return I(a2,"PIXI.BaseTexture.hasLoaded property has been removed, use PIXI.BaseTexture.valid"),this.valid}},imageUrl:{get:function(){var l;return I(a2,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"),null===(l=this.resource)||void 0===l?void 0:l.url},set:function(l){I(a2,"PIXI.BaseTexture.imageUrl property has been removed, use PIXI.BaseTexture.resource.url"),this.resource&&(this.resource.url=l)}},source:{get:function(){return I(a2,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source`"),this.resource.source},set:function(l){I(a2,"PIXI.BaseTexture.source property has been moved, use `PIXI.BaseTexture.resource.source` if you want to set HTMLCanvasElement. Otherwise, create new BaseTexture."),this.resource&&(this.resource.source=l)}},premultiplyAlpha:{get:function(){return I("5.2.0","PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),0!==this.alphaMode},set:function(l){I("5.2.0","PIXI.BaseTexture.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode=Number(l)}},_id:{get:function(){return E||(I("5.2.0","PIXI.BaseTexture._id batch local field has been changed to `_batchLocation`"),E=!0),this._batchLocation},set:function(l){this._batchLocation=l}}}),v.fromImage=function(l,E,C,M){return I(a2,"PIXI.BaseTexture.fromImage method has been replaced with PIXI.BaseTexture.from"),v.from(l,{scaleMode:C,resourceOptions:{scale:M,crossorigin:E}})},v.fromCanvas=function(l,E){return I(a2,"PIXI.BaseTexture.fromCanvas method has been replaced with PIXI.BaseTexture.from"),v.from(l,{scaleMode:E})},v.fromSVG=function(l,E,C,M){return I(a2,"PIXI.BaseTexture.fromSVG method has been replaced with PIXI.BaseTexture.from"),v.from(l,{scaleMode:C,resourceOptions:{scale:M,crossorigin:E}})},Object.defineProperties(l.resources.ImageResource.prototype,{premultiplyAlpha:{get:function(){return I("5.2.0","PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),0!==this.alphaMode},set:function(l){I("5.2.0","PIXI.resources.ImageResource.premultiplyAlpha property has been changed to `alphaMode`, see `PIXI.ALPHA_MODES`"),this.alphaMode=Number(l)}}}),l.Point.prototype.copy=function(l){return I(a2,"PIXI.Point.copy method has been replaced with PIXI.Point.copyFrom"),this.copyFrom(l)},l.ObservablePoint.prototype.copy=function(l){return I(a2,"PIXI.ObservablePoint.copy method has been replaced with PIXI.ObservablePoint.copyFrom"),this.copyFrom(l)},l.Rectangle.prototype.copy=function(l){return I(a2,"PIXI.Rectangle.copy method has been replaced with PIXI.Rectangle.copyFrom"),this.copyFrom(l)},l.Matrix.prototype.copy=function(l){return I(a2,"PIXI.Matrix.copy method has been replaced with PIXI.Matrix.copyTo"),this.copyTo(l)},l.systems.StateSystem.prototype.setState=function(l){return I("v5.1.0","StateSystem.setState has been renamed to StateSystem.set"),this.set(l)},Object.assign(l.systems.FilterSystem.prototype,{getRenderTarget:function(l,v){return I(a2,"PIXI.FilterManager.getRenderTarget method has been replaced with PIXI.systems.FilterSystem#getFilterTexture"),this.getFilterTexture(null,v)},returnRenderTarget:function(l){I(a2,"PIXI.FilterManager.returnRenderTarget method has been replaced with PIXI.systems.FilterSystem.returnFilterTexture"),this.returnFilterTexture(l)},calculateScreenSpaceMatrix:function(l){I(a2,"PIXI.systems.FilterSystem.calculateScreenSpaceMatrix method is removed, use `(vTextureCoord * inputSize.xy) + outputFrame.xy` instead");var v=l.identity(),E=this.activeState,C=E.sourceFrame,M=E.destinationFrame;return v.translate(C.x/M.width,C.y/M.height),v.scale(M.width,M.height),v},calculateNormalizedScreenSpaceMatrix:function(l){I(a2,"PIXI.systems.FilterManager.calculateNormalizedScreenSpaceMatrix method is removed, use `((vTextureCoord * inputSize.xy) + outputFrame.xy) / outputFrame.zw` instead.");var v=this.activeState,E=v.sourceFrame,C=v.destinationFrame,M=l.identity();M.translate(E.x/C.width,E.y/C.height);var L=C.width/E.width,U=C.height/E.height;return M.scale(L,U),M}}),Object.defineProperties(l.RenderTexture.prototype,{sourceFrame:{get:function(){return I(a2,"PIXI.RenderTexture.sourceFrame property has been removed"),this.filterFrame}},size:{get:function(){return I(a2,"PIXI.RenderTexture.size property has been removed"),this._frame}}});var C=function(l){function c(v,E,C,M){return I(a2,"PIXI.filters.BlurXFilter class is deprecated, use PIXI.filters.BlurFilterPass"),l.call(this,!0,v,E,C,M)||this}return Jo(c,l),c}(l.filters.BlurFilterPass),M=function(l){function c(v,E,C,M){return I(a2,"PIXI.filters.BlurYFilter class is deprecated, use PIXI.filters.BlurFilterPass"),l.call(this,!1,v,E,C,M)||this}return Jo(c,l),c}(l.filters.BlurFilterPass);Object.assign(l.filters,{BlurXFilter:C,BlurYFilter:M});var L=l.Sprite,U=l.Texture,B=l.Graphics;function u(l,v,E,C){return I(a2,"PIXI.Sprite."+l+" method is deprecated, use PIXI.Sprite.from"),L.from(v,{resourceOptions:{scale:C,crossorigin:E}})}function f(l,v,E,C){return I(a2,"PIXI.Texture."+l+" method is deprecated, use PIXI.Texture.from"),U.from(v,{resourceOptions:{scale:C,crossorigin:E}})}B.prototype.generateCanvasTexture||(B.prototype.generateCanvasTexture=function(){I(a2,'PIXI.Graphics.generateCanvasTexture method is only available in "pixi.js-legacy"')}),Object.defineProperty(B.prototype,"graphicsData",{get:function(){return I(a2,"PIXI.Graphics.graphicsData property is deprecated, use PIXI.Graphics.geometry.graphicsData"),this.geometry.graphicsData}}),L.fromImage=u.bind(null,"fromImage"),L.fromSVG=u.bind(null,"fromSVG"),L.fromCanvas=u.bind(null,"fromCanvas"),L.fromVideo=u.bind(null,"fromVideo"),L.fromFrame=u.bind(null,"fromFrame"),U.fromImage=f.bind(null,"fromImage"),U.fromSVG=f.bind(null,"fromSVG"),U.fromCanvas=f.bind(null,"fromCanvas"),U.fromVideo=f.bind(null,"fromVideo"),U.fromFrame=f.bind(null,"fromFrame"),Object.defineProperty(l.AbstractRenderer.prototype,"autoResize",{get:function(){return I(a2,"PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"),this.autoDensity},set:function(l){I(a2,"PIXI.AbstractRenderer.autoResize property is deprecated, use PIXI.AbstractRenderer.autoDensity"),this.autoDensity=l}}),Object.defineProperty(l.Renderer.prototype,"textureManager",{get:function(){return I(a2,"PIXI.Renderer.textureManager property is deprecated, use PIXI.Renderer.texture"),this.texture}}),l.utils.mixins={mixin:function(){I(a2,"PIXI.utils.mixins.mixin function is no longer available")},delayMixin:function(){I(a2,"PIXI.utils.mixins.delayMixin function is no longer available")},performMixins:function(){I(a2,"PIXI.utils.mixins.performMixins function is no longer available")}},Object.defineProperty(l.BitmapText.prototype,"font",{get:function(){return I("5.3.0","PIXI.BitmapText.font property is deprecated, use fontName, fontSize, tint or align properties"),{name:this._fontName,size:this._fontSize,tint:this._tint,align:this._align}},set:function(v){if(I("5.3.0","PIXI.BitmapText.font property is deprecated, use fontName, fontSize, tint or align properties"),v){var E={font:v};this._upgradeStyle(E),E.fontSize=E.fontSize||l.BitmapFont.available[E.fontName].size,this._fontName=E.fontName,this._fontSize=E.fontSize,this.dirty=!0}}})},utils:ie},Symbol.toStringTag,{value:"Module"})),a5="0.1.0-alpha.30",a4=["init","load","saveState","loadState","getStateForAgent","tick"];let Cp=class Cp{constructor(l,v){this.buffer=nH.create({width:l,height:v}),this.sprite=new s2(this.buffer),this.sprite.pivot.set(0,0),this.sprite.position.set(0,0)}};let au=class au{constructor(l){this._ticker=l=>this._tick(l),this._isPlaying=!1,this._displayedTickError=!1,this.autoClearBackBuffer=!0,this.boot=l=>new Promise(async v=>{var E,C;this._vm=l.vm;let M=128,L=128,U=this.header.aspectRatio;if(void 0!==U){let[l,v]=U.split("/").map(l=>parseInt(l));console.log(`desired ratio ${l}/${v} = ${l/v}`),l>=v?M=Math.ceil(L*l/v):L=Math.ceil(M*v/l)}return this.header.width=M,this.header.height=L,this.header.scale=.5,console.log(`game size ${M}x${L}`),this.backBuffer.resize(M,L),this._clearSprite.width=M,this._clearSprite.height=L,this._game=await (E=this,C=this._vm.gameServer,new Promise(async l=>{let v=await function(l,v){let E=l.options.main??l.header.main;if(void 0===E)throw"header is missing main attribute with the path to your main script";return"function"==typeof E?E({vm:l}):v.get(E).then(v=>{console.log("load main from script");let E={};return Function("vm","stage","PIXI","exports","module",`${v}
; ${a4.map(l=>`if (typeof ${l} !== "undefined") exports.${l} = ${l}`).join(";")}`)(l,l.stage,l.PIXI,E,{exports:{boot:void 0}}),E})}(E,C);return console.log("loaded game with hooks",v),void 0!==v.init&&v.init(E),void 0!==v.load&&await v.load(),l(v)})),this._vm.root.appendChild(this._app.view),this.resize(),v(this)}),this.speed=1,this.options=l??{},tK.SCALE_MODE=iM.NEAREST,this._app=new o6({backgroundColor:0,resolution:1,autoDensity:!0,width:128,height:128,clearBeforeRender:!1,antialias:!1}),this._backBuffer=new Cp(128,128),this._backStage=new no,this._clearSprite=new s2(nG.WHITE),this._clearSprite.width=128,this._clearSprite.height=128,this._clearSprite.tint=0,"development"===this.options.mode&&(console.log("hook PixiMoroxel8AI API"),this.hookAPI(window))}get header(){var l;return null==(l=this._vm)?void 0:l.header}hookAPI(l){l.PIXI=a3,l.stage=this.stage,l.vm=this}_tick(l){void 0!==this.ticker&&this.ticker(l)}get width(){return this._backBuffer.buffer.width}get height(){return this._backBuffer.buffer.height}get scale(){return .5}help(){return""}play(){void 0===this._app||this._isPlaying||(this._isPlaying=!0,this._displayedTickError=!1,this.resize(),this._ticker=l=>this._tick(l),this._app.ticker.add(this._ticker))}pause(){void 0!==this._app&&this._app.ticker.remove(this._ticker)}stop(){this._app.destroy(!0,{children:!0,texture:!0,baseTexture:!0})}resize(){if(void 0===this._vm)return;let l=this.width,v=this.height,E=this._vm.width,C=this._vm.height,M=l*C/v,L=C;M>E&&(L=v*E/l,M=E),this._app.renderer.resolution=1,this._app.renderer.resize(M,L),this._backBuffer.sprite.scale.set(M/l,L/v)}saveState(){var l;return(null==(l=this._game)?void 0:l.saveState)!==void 0?this._game.saveState():{isGameOver:!1}}loadState(l){var v,E;(null==(v=this._game)?void 0:v.loadState)!==void 0&&(null==(E=this._game)||E.loadState(l))}getStateForAgent(){var l,v;return(null==(l=this._game)?void 0:l.getStateForAgent)!==void 0?null==(v=this._game)?void 0:v.getStateForAgent():{}}tick(l,v,E){var C,M;if((null==(C=this._game)?void 0:C.tick)!==void 0)try{null==(M=this._game)||M.tick(l,v,E)}catch(l){this._displayedTickError||(this._displayedTickError=!0,console.error(l))}E&&(this.autoClearBackBuffer&&this._app.renderer.render(this._clearSprite,this._backBuffer.buffer),this._app.renderer.render(this._backStage,this._backBuffer.buffer),this._app.renderer.render(this._backBuffer.sprite))}get gameServer(){return this._vm.gameServer}get PIXI(){return a3}get stage(){return this._backStage}get renderer(){return this._app.renderer}get backBuffer(){return this._backBuffer.buffer}get frame(){return this._vm.frame}get time(){return this._vm.time}};function Fp(l){return new au(l)}let Mp=l=>new Promise(v=>new au().boot(l).then(l=>v(l)))}}]);