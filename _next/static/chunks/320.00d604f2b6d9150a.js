(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[320],{3320:function(e,t,n){"use strict";n.r(t),n.d(t,{EAction:function(){return l}});var a,l,o=n(2678),i=n(8564),d=n(2267),u=n(5766),s=n(8007),r=n(3304),c=n(5893),m=n(7294),h=n(1308),p=n.n(h),v=(0,m.lazy)(function(){return Promise.all([n.e(890),n.e(642)]).then(n.bind(n,6396))});(a=l||(l={})).LOAD_AGENT="LOAD_AGENT",a.UNLOAD_AGENT="UNLOAD_AGENT";var y=function(e){(0,s._)(EmbedPlayer,e);var t=(0,r._)(EmbedPlayer);function EmbedPlayer(e){var n;return(0,i._)(this,EmbedPlayer),(n=t.call(this,e)).state={},n.handleMessage=n.handleMessage.bind((0,o._)(n)),n.handleMount=n.handleMount.bind((0,o._)(n)),n.handleUnmount=n.handleUnmount.bind((0,o._)(n)),n}return(0,d._)(EmbedPlayer,[{key:"componentDidMount",value:function(){window.addEventListener("message",this.handleMessage),document.getElementsByTagName("html")[0].setAttribute("data-theme","embed")}},{key:"componentWillUnmount",value:function(){window.removeEventListener("message",this.handleMessage)}},{key:"handleMessage",value:function(e){var t,n;if(void 0!==e.data.action&&void 0!==this.state.player)switch(e.data.action){case"LOAD_AGENT":void 0!==e.data.script&&(null===(t=this.state.player)||void 0===t||t.loadAgent(0,{language:e.data.language,script:e.data.script}));break;case"UNLOAD_AGENT":null===(n=this.state.player)||void 0===n||n.unloadAgent(0)}}},{key:"handleMount",value:function(e){this.setState({player:e})}},{key:"handleUnmount",value:function(){this.setState({player:void 0})}},{key:"render",value:function(){var e,t,n=window.frameElement,a=(null!==(e=null==n?void 0:n.getAttribute("allow"))&&void 0!==e?e:"").split(";").map(function(e){return e.trim()}),l=null==n?void 0:n.getAttribute("data-game-id"),o=void 0!==l?"".concat("https://raw.githubusercontent.com/moroboxai/moroboxai-games/master","/").concat(l):null!==(t=null==n?void 0:n.getAttribute("data-game-url"))&&void 0!==t?t:"";return(0,c.jsx)(m.Suspense,{fallback:(0,c.jsx)("div",{className:p().placeholder}),children:(0,c.jsx)(v,{url:o,autoPlay:a.includes("autoplay"),onMount:this.handleMount,onUnmount:this.handleUnmount})})}}]),EmbedPlayer}(m.Component);(0,u._)(y,"propTypes",void 0),y.propTypes={},t.default=y},1308:function(e){e.exports={placeholder:"EmbedPlayer_placeholder__4ew44"}}}]);