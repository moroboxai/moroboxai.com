"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[890],{6396:function(e,n,R){let C;R.d(n,{ZP:function(){return tA}});var et,ei,eo,el=R(7294),eu=R(3454),ec=R(1876).Buffer,ef={exports:{}},eh={};ef.exports=function(){if(ei)return eh;ei=1;var e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),R=Object.prototype.hasOwnProperty,C=el.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,et={key:!0,ref:!0,__self:!0,__source:!0};function i(n,ei,eo){var el,eu={},ec=null,ef=null;for(el in void 0!==eo&&(ec=""+eo),void 0!==ei.key&&(ec=""+ei.key),void 0!==ei.ref&&(ef=ei.ref),ei)R.call(ei,el)&&!et.hasOwnProperty(el)&&(eu[el]=ei[el]);if(n&&n.defaultProps)for(el in ei=n.defaultProps)void 0===eu[el]&&(eu[el]=ei[el]);return{$$typeof:e,type:n,key:ec,ref:ef,props:eu,_owner:C.current}}return eh.Fragment=n,eh.jsx=i,eh.jsxs=i,eh}();var ep=ef.exports;let Wa=class Wa{constructor(e,n,R){this.sortedPlugins=new Map,this.unfulfilledActions=new Set,this.plugins=[...R?R.plugins:[],...n],this.pluginContexts=new Map(this.plugins.map(n=>[n,e]))}hookFirst(e,n,R,C){return this.hookFirstAndGetPlugin(e,n,R,C).then(e=>e&&e[0])}async hookFirstAndGetPlugin(e,n,R,C){for(let et of this.getSortedPlugins(e)){if(null!=C&&C.has(et))continue;let ei=await this.runHook(e,n,et,R);if(null!=ei)return[ei,et]}return null}async hookParallel(e,n,R){let C=[];for(let et of this.getSortedPlugins(e))et[e].sequential?(await Promise.all(C),C.length=0,await this.runHook(e,n,et,R)):C.push(this.runHook(e,n,et,R));await Promise.all(C)}hookReduceArg0(e,[n,...R],C,et){let ei=Promise.resolve(n);for(let n of this.getSortedPlugins(e))ei=ei.then(ei=>this.runHook(e,[ei,...R],n,et).then(e=>C.call(this.pluginContexts.get(n),ei,e,n)));return ei}getSortedPlugins(e,n){return function(e,n,R){let C=e.get(n);if(void 0!==C)return C;let et=R();return e.set(n,et),et}(this.sortedPlugins,e,()=>(function(e,n,R=function(e,n,R){if("function"!=typeof e)throw`invalid plugin hook ${n} ${R}`}){let C=[],et=[],ei=[];for(let eo of n){let n=eo[e];if(n){if("object"==typeof n){if(R(n.handler,e,eo),"pre"===n.order){C.push(eo);continue}if("post"===n.order){ei.push(eo);continue}}else R(n,e,eo);et.push(eo)}}return[...C,...et,...ei]})(e,this.plugins,n))}runHook(e,n,R,C){let et=R[e],ei="object"==typeof et?et.handler:et,eo=this.pluginContexts.get(R);C&&(eo=C(eo,R));let el=null;return Promise.resolve().then(()=>{if("function"!=typeof ei)return ei;let C=ei.apply(eo,n);return null!=C&&C.then?(el=[R.name,e,n],this.unfulfilledActions.add(el),Promise.resolve(C).then(e=>(this.unfulfilledActions.delete(el),e))):C}).catch(e=>{throw null!==el&&this.unfulfilledActions.delete(el),e})}};let ed=["saveState","loadState","inputs"];let ti=class ti{constructor(e,n){this._fun=e,this._context=n}get label(){return this._context.label??"unknown"}saveState(){return void 0!==this._context.saveState?this._context.saveState():{}}loadState(e){void 0!==this._context.loadState&&this._context.loadState(e)}inputs(e){return void 0!==this._context.inputs?this._context.inputs(e):{}}};var e_=function(e){var n={};function t(R){if(n[R])return n[R].exports;var C=n[R]={i:R,l:!1,exports:{}};return e[R].call(C.exports,C,C.exports,t),C.l=!0,C.exports}return t.m=e,t.c=n,t.d=function(e,n,R){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:R})},t.r=function(e){"u">typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n||4&n&&"object"==typeof e&&e&&e.__esModule)return e;var R=Object.create(null);if(t.r(R),Object.defineProperty(R,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var C in e)t.d(R,C,(function(n){return e[n]}).bind(null,C));return R},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=34)}([function(e,n,R){/**
  @license MIT
  
  Copyright © 2017-2018 Benoit Giannangeli
  Copyright © 2017-2018 Daurnimator
  Copyright © 1994–2017 Lua.org, PUC-Rio.
  */let C=R(5);e.exports.FENGARI_AUTHORS=C.FENGARI_AUTHORS,e.exports.FENGARI_COPYRIGHT=C.FENGARI_COPYRIGHT,e.exports.FENGARI_RELEASE=C.FENGARI_RELEASE,e.exports.FENGARI_VERSION=C.FENGARI_VERSION,e.exports.FENGARI_VERSION_MAJOR=C.FENGARI_VERSION_MAJOR,e.exports.FENGARI_VERSION_MINOR=C.FENGARI_VERSION_MINOR,e.exports.FENGARI_VERSION_NUM=C.FENGARI_VERSION_NUM,e.exports.FENGARI_VERSION_RELEASE=C.FENGARI_VERSION_RELEASE,e.exports.luastring_eq=C.luastring_eq,e.exports.luastring_indexOf=C.luastring_indexOf,e.exports.luastring_of=C.luastring_of,e.exports.to_jsstring=C.to_jsstring,e.exports.to_luastring=C.to_luastring,e.exports.to_uristring=C.to_uristring;let et=R(3),ei=R(2),eo=R(7),el=R(17);e.exports.luaconf=et,e.exports.lua=ei,e.exports.lauxlib=eo,e.exports.lualib=el},function(e,n,R){let C,et,ei;if(C="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):function(e){let n=0,R=e.length,C=new Uint8Array(R);for(;R>n;)C[n]=e[n++];return C},"function"==typeof new Uint8Array().indexOf)et=function(e,n,R){return e.indexOf(n,R)};else{let e=[].indexOf;if(0!==e.call(new Uint8Array(1),0))throw Error("missing .indexOf");et=function(n,R,C){return e.call(n,R,C)}}ei="function"==typeof Uint8Array.of?Uint8Array.of.bind(Uint8Array):function(){return C(arguments)};let i=function(e){return e instanceof Uint8Array},eo="cannot convert invalid utf8 to javascript string",el=";,/?:@&=+$abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789,-_.!~*'()#".split("").reduce(function(e,n){return e[n.charCodeAt(0)]=!0,e},{}),eu={},A=function(e,n){if("string"!=typeof e)throw TypeError("to_luastring expects a javascript string");if(n){let n=eu[e];if(i(n))return n}let R=e.length,et=Array(R),ei=0;for(let n=0;n<R;++n){let C=e.charCodeAt(n);if(C<=127)et[ei++]=C;else if(C<=2047)et[ei++]=192|C>>6,et[ei++]=128|63&C;else{if(C>=55296&&C<=56319&&n+1<R){let R=e.charCodeAt(n+1);R>=56320&&R<=57343&&(n++,C=1024*(C-55296)+R+9216)}C<=65535?et[ei++]=224|C>>12:(et[ei++]=240|C>>18,et[ei++]=128|C>>12&63),et[ei++]=128|C>>6&63,et[ei++]=128|63&C}}return et=C(et),n&&(eu[e]=et),et};e.exports.luastring_from=C,e.exports.luastring_indexOf=et,e.exports.luastring_of=ei,e.exports.is_luastring=i,e.exports.luastring_eq=function(e,n){if(e!==n){let R=e.length;if(R!==n.length)return!1;for(let C=0;C<R;C++)if(e[C]!==n[C])return!1}return!0},e.exports.to_jsstring=function(e,n,R,C){if(!i(e))throw TypeError("to_jsstring expects a Uint8Array");R=void 0===R?e.length:Math.min(e.length,R);let et="";for(let ei=void 0!==n?n:0;ei<R;){let n=e[ei++];if(n<128)et+=String.fromCharCode(n);else if(n<194||n>244){if(!C)throw RangeError(eo);et+="�"}else if(n<=223){if(ei>=R){if(!C)throw RangeError(eo);et+="�";continue}let el=e[ei++];if((192&el)!=128){if(!C)throw RangeError(eo);et+="�";continue}et+=String.fromCharCode(((31&n)<<6)+(63&el))}else if(n<=239){if(ei+1>=R){if(!C)throw RangeError(eo);et+="�";continue}let el=e[ei++];if((192&el)!=128){if(!C)throw RangeError(eo);et+="�";continue}let eu=e[ei++];if((192&eu)!=128){if(!C)throw RangeError(eo);et+="�";continue}let ec=((15&n)<<12)+((63&el)<<6)+(63&eu);ec<=65535?et+=String.fromCharCode(ec):et+=String.fromCharCode(55296+((ec-=65536)>>10),ec%1024+56320)}else{if(ei+2>=R){if(!C)throw RangeError(eo);et+="�";continue}let el=e[ei++];if((192&el)!=128){if(!C)throw RangeError(eo);et+="�";continue}let eu=e[ei++];if((192&eu)!=128){if(!C)throw RangeError(eo);et+="�";continue}let ec=e[ei++];if((192&ec)!=128){if(!C)throw RangeError(eo);et+="�";continue}let ef=((7&n)<<18)+((63&el)<<12)+((63&eu)<<6)+(63&ec);et+=String.fromCharCode(55296+((ef-=65536)>>10),ef%1024+56320)}}return et},e.exports.to_uristring=function(e){if(!i(e))throw TypeError("to_uristring expects a Uint8Array");let n="";for(let R=0;R<e.length;R++){let C=e[R];el[C]?n+=String.fromCharCode(C):n+="%"+(C<16?"0":"")+C.toString(16)}return n},e.exports.to_luastring=A,e.exports.from_userstring=function(e){if(!i(e)){if("string"!=typeof e)throw TypeError("expects an array of bytes or javascript string");e=A(e)}return e};let ec=A("\x1bLua");e.exports.LUA_SIGNATURE=ec,e.exports.LUA_VERSION_MAJOR="5",e.exports.LUA_VERSION_MINOR="3",e.exports.LUA_VERSION_NUM=503,e.exports.LUA_VERSION_RELEASE="4",e.exports.LUA_VERSION="Lua 5.3",e.exports.LUA_RELEASE="Lua 5.3.4",e.exports.LUA_COPYRIGHT="Lua 5.3.4  Copyright (C) 1994-2017 Lua.org, PUC-Rio",e.exports.LUA_AUTHORS="R. Ierusalimschy, L. H. de Figueiredo, W. Celes";let ef={LUA_TNONE:-1,LUA_TNIL:0,LUA_TBOOLEAN:1,LUA_TLIGHTUSERDATA:2,LUA_TNUMBER:3,LUA_TSTRING:4,LUA_TTABLE:5,LUA_TFUNCTION:6,LUA_TUSERDATA:7,LUA_TTHREAD:8,LUA_NUMTAGS:9};ef.LUA_TSHRSTR=0|ef.LUA_TSTRING,ef.LUA_TLNGSTR=16|ef.LUA_TSTRING,ef.LUA_TNUMFLT=0|ef.LUA_TNUMBER,ef.LUA_TNUMINT=16|ef.LUA_TNUMBER,ef.LUA_TLCL=0|ef.LUA_TFUNCTION,ef.LUA_TLCF=16|ef.LUA_TFUNCTION,ef.LUA_TCCL=32|ef.LUA_TFUNCTION;let{LUAI_MAXSTACK:eh}=R(3),ep=-eh-1e3;e.exports.LUA_HOOKCALL=0,e.exports.LUA_HOOKCOUNT=3,e.exports.LUA_HOOKLINE=2,e.exports.LUA_HOOKRET=1,e.exports.LUA_HOOKTAILCALL=4,e.exports.LUA_MASKCALL=1,e.exports.LUA_MASKCOUNT=8,e.exports.LUA_MASKLINE=4,e.exports.LUA_MASKRET=2,e.exports.LUA_MINSTACK=20,e.exports.LUA_MULTRET=-1,e.exports.LUA_OPADD=0,e.exports.LUA_OPBAND=7,e.exports.LUA_OPBNOT=13,e.exports.LUA_OPBOR=8,e.exports.LUA_OPBXOR=9,e.exports.LUA_OPDIV=5,e.exports.LUA_OPEQ=0,e.exports.LUA_OPIDIV=6,e.exports.LUA_OPLE=2,e.exports.LUA_OPLT=1,e.exports.LUA_OPMOD=3,e.exports.LUA_OPMUL=2,e.exports.LUA_OPPOW=4,e.exports.LUA_OPSHL=10,e.exports.LUA_OPSHR=11,e.exports.LUA_OPSUB=1,e.exports.LUA_OPUNM=12,e.exports.LUA_REGISTRYINDEX=ep,e.exports.LUA_RIDX_GLOBALS=2,e.exports.LUA_RIDX_LAST=2,e.exports.LUA_RIDX_MAINTHREAD=1,e.exports.constant_types=ef,e.exports.lua_Debug=class{constructor(){this.event=NaN,this.name=null,this.namewhat=null,this.what=null,this.source=null,this.currentline=NaN,this.linedefined=NaN,this.lastlinedefined=NaN,this.nups=NaN,this.nparams=NaN,this.isvararg=NaN,this.istailcall=NaN,this.short_src=null,this.i_ci=null}},e.exports.lua_upvalueindex=function(e){return ep-e},e.exports.thread_status={LUA_OK:0,LUA_YIELD:1,LUA_ERRRUN:2,LUA_ERRSYNTAX:3,LUA_ERRMEM:4,LUA_ERRGCMM:5,LUA_ERRERR:6}},function(e,n,R){let C=R(1),et=R(18),ei=R(11),eo=R(8),el=R(12);e.exports.LUA_AUTHORS=C.LUA_AUTHORS,e.exports.LUA_COPYRIGHT=C.LUA_COPYRIGHT,e.exports.LUA_ERRERR=C.thread_status.LUA_ERRERR,e.exports.LUA_ERRGCMM=C.thread_status.LUA_ERRGCMM,e.exports.LUA_ERRMEM=C.thread_status.LUA_ERRMEM,e.exports.LUA_ERRRUN=C.thread_status.LUA_ERRRUN,e.exports.LUA_ERRSYNTAX=C.thread_status.LUA_ERRSYNTAX,e.exports.LUA_HOOKCALL=C.LUA_HOOKCALL,e.exports.LUA_HOOKCOUNT=C.LUA_HOOKCOUNT,e.exports.LUA_HOOKLINE=C.LUA_HOOKLINE,e.exports.LUA_HOOKRET=C.LUA_HOOKRET,e.exports.LUA_HOOKTAILCALL=C.LUA_HOOKTAILCALL,e.exports.LUA_MASKCALL=C.LUA_MASKCALL,e.exports.LUA_MASKCOUNT=C.LUA_MASKCOUNT,e.exports.LUA_MASKLINE=C.LUA_MASKLINE,e.exports.LUA_MASKRET=C.LUA_MASKRET,e.exports.LUA_MINSTACK=C.LUA_MINSTACK,e.exports.LUA_MULTRET=C.LUA_MULTRET,e.exports.LUA_NUMTAGS=C.constant_types.LUA_NUMTAGS,e.exports.LUA_OK=C.thread_status.LUA_OK,e.exports.LUA_OPADD=C.LUA_OPADD,e.exports.LUA_OPBAND=C.LUA_OPBAND,e.exports.LUA_OPBNOT=C.LUA_OPBNOT,e.exports.LUA_OPBOR=C.LUA_OPBOR,e.exports.LUA_OPBXOR=C.LUA_OPBXOR,e.exports.LUA_OPDIV=C.LUA_OPDIV,e.exports.LUA_OPEQ=C.LUA_OPEQ,e.exports.LUA_OPIDIV=C.LUA_OPIDIV,e.exports.LUA_OPLE=C.LUA_OPLE,e.exports.LUA_OPLT=C.LUA_OPLT,e.exports.LUA_OPMOD=C.LUA_OPMOD,e.exports.LUA_OPMUL=C.LUA_OPMUL,e.exports.LUA_OPPOW=C.LUA_OPPOW,e.exports.LUA_OPSHL=C.LUA_OPSHL,e.exports.LUA_OPSHR=C.LUA_OPSHR,e.exports.LUA_OPSUB=C.LUA_OPSUB,e.exports.LUA_OPUNM=C.LUA_OPUNM,e.exports.LUA_REGISTRYINDEX=C.LUA_REGISTRYINDEX,e.exports.LUA_RELEASE=C.LUA_RELEASE,e.exports.LUA_RIDX_GLOBALS=C.LUA_RIDX_GLOBALS,e.exports.LUA_RIDX_LAST=C.LUA_RIDX_LAST,e.exports.LUA_RIDX_MAINTHREAD=C.LUA_RIDX_MAINTHREAD,e.exports.LUA_SIGNATURE=C.LUA_SIGNATURE,e.exports.LUA_TNONE=C.constant_types.LUA_TNONE,e.exports.LUA_TNIL=C.constant_types.LUA_TNIL,e.exports.LUA_TBOOLEAN=C.constant_types.LUA_TBOOLEAN,e.exports.LUA_TLIGHTUSERDATA=C.constant_types.LUA_TLIGHTUSERDATA,e.exports.LUA_TNUMBER=C.constant_types.LUA_TNUMBER,e.exports.LUA_TSTRING=C.constant_types.LUA_TSTRING,e.exports.LUA_TTABLE=C.constant_types.LUA_TTABLE,e.exports.LUA_TFUNCTION=C.constant_types.LUA_TFUNCTION,e.exports.LUA_TUSERDATA=C.constant_types.LUA_TUSERDATA,e.exports.LUA_TTHREAD=C.constant_types.LUA_TTHREAD,e.exports.LUA_VERSION=C.LUA_VERSION,e.exports.LUA_VERSION_MAJOR=C.LUA_VERSION_MAJOR,e.exports.LUA_VERSION_MINOR=C.LUA_VERSION_MINOR,e.exports.LUA_VERSION_NUM=C.LUA_VERSION_NUM,e.exports.LUA_VERSION_RELEASE=C.LUA_VERSION_RELEASE,e.exports.LUA_YIELD=C.thread_status.LUA_YIELD,e.exports.lua_Debug=C.lua_Debug,e.exports.lua_upvalueindex=C.lua_upvalueindex,e.exports.lua_absindex=et.lua_absindex,e.exports.lua_arith=et.lua_arith,e.exports.lua_atpanic=et.lua_atpanic,e.exports.lua_atnativeerror=et.lua_atnativeerror,e.exports.lua_call=et.lua_call,e.exports.lua_callk=et.lua_callk,e.exports.lua_checkstack=et.lua_checkstack,e.exports.lua_close=el.lua_close,e.exports.lua_compare=et.lua_compare,e.exports.lua_concat=et.lua_concat,e.exports.lua_copy=et.lua_copy,e.exports.lua_createtable=et.lua_createtable,e.exports.lua_dump=et.lua_dump,e.exports.lua_error=et.lua_error,e.exports.lua_gc=et.lua_gc,e.exports.lua_getallocf=et.lua_getallocf,e.exports.lua_getextraspace=et.lua_getextraspace,e.exports.lua_getfield=et.lua_getfield,e.exports.lua_getglobal=et.lua_getglobal,e.exports.lua_gethook=ei.lua_gethook,e.exports.lua_gethookcount=ei.lua_gethookcount,e.exports.lua_gethookmask=ei.lua_gethookmask,e.exports.lua_geti=et.lua_geti,e.exports.lua_getinfo=ei.lua_getinfo,e.exports.lua_getlocal=ei.lua_getlocal,e.exports.lua_getmetatable=et.lua_getmetatable,e.exports.lua_getstack=ei.lua_getstack,e.exports.lua_gettable=et.lua_gettable,e.exports.lua_gettop=et.lua_gettop,e.exports.lua_getupvalue=et.lua_getupvalue,e.exports.lua_getuservalue=et.lua_getuservalue,e.exports.lua_insert=et.lua_insert,e.exports.lua_isboolean=et.lua_isboolean,e.exports.lua_iscfunction=et.lua_iscfunction,e.exports.lua_isfunction=et.lua_isfunction,e.exports.lua_isinteger=et.lua_isinteger,e.exports.lua_islightuserdata=et.lua_islightuserdata,e.exports.lua_isnil=et.lua_isnil,e.exports.lua_isnone=et.lua_isnone,e.exports.lua_isnoneornil=et.lua_isnoneornil,e.exports.lua_isnumber=et.lua_isnumber,e.exports.lua_isproxy=et.lua_isproxy,e.exports.lua_isstring=et.lua_isstring,e.exports.lua_istable=et.lua_istable,e.exports.lua_isthread=et.lua_isthread,e.exports.lua_isuserdata=et.lua_isuserdata,e.exports.lua_isyieldable=eo.lua_isyieldable,e.exports.lua_len=et.lua_len,e.exports.lua_load=et.lua_load,e.exports.lua_newstate=el.lua_newstate,e.exports.lua_newtable=et.lua_newtable,e.exports.lua_newthread=el.lua_newthread,e.exports.lua_newuserdata=et.lua_newuserdata,e.exports.lua_next=et.lua_next,e.exports.lua_pcall=et.lua_pcall,e.exports.lua_pcallk=et.lua_pcallk,e.exports.lua_pop=et.lua_pop,e.exports.lua_pushboolean=et.lua_pushboolean,e.exports.lua_pushcclosure=et.lua_pushcclosure,e.exports.lua_pushcfunction=et.lua_pushcfunction,e.exports.lua_pushfstring=et.lua_pushfstring,e.exports.lua_pushglobaltable=et.lua_pushglobaltable,e.exports.lua_pushinteger=et.lua_pushinteger,e.exports.lua_pushjsclosure=et.lua_pushjsclosure,e.exports.lua_pushjsfunction=et.lua_pushjsfunction,e.exports.lua_pushlightuserdata=et.lua_pushlightuserdata,e.exports.lua_pushliteral=et.lua_pushliteral,e.exports.lua_pushlstring=et.lua_pushlstring,e.exports.lua_pushnil=et.lua_pushnil,e.exports.lua_pushnumber=et.lua_pushnumber,e.exports.lua_pushstring=et.lua_pushstring,e.exports.lua_pushthread=et.lua_pushthread,e.exports.lua_pushvalue=et.lua_pushvalue,e.exports.lua_pushvfstring=et.lua_pushvfstring,e.exports.lua_rawequal=et.lua_rawequal,e.exports.lua_rawget=et.lua_rawget,e.exports.lua_rawgeti=et.lua_rawgeti,e.exports.lua_rawgetp=et.lua_rawgetp,e.exports.lua_rawlen=et.lua_rawlen,e.exports.lua_rawset=et.lua_rawset,e.exports.lua_rawseti=et.lua_rawseti,e.exports.lua_rawsetp=et.lua_rawsetp,e.exports.lua_register=et.lua_register,e.exports.lua_remove=et.lua_remove,e.exports.lua_replace=et.lua_replace,e.exports.lua_resume=eo.lua_resume,e.exports.lua_rotate=et.lua_rotate,e.exports.lua_setallof=eo.lua_setallof,e.exports.lua_setfield=et.lua_setfield,e.exports.lua_setglobal=et.lua_setglobal,e.exports.lua_sethook=ei.lua_sethook,e.exports.lua_seti=et.lua_seti,e.exports.lua_setlocal=ei.lua_setlocal,e.exports.lua_setmetatable=et.lua_setmetatable,e.exports.lua_settable=et.lua_settable,e.exports.lua_settop=et.lua_settop,e.exports.lua_setupvalue=et.lua_setupvalue,e.exports.lua_setuservalue=et.lua_setuservalue,e.exports.lua_status=et.lua_status,e.exports.lua_stringtonumber=et.lua_stringtonumber,e.exports.lua_toboolean=et.lua_toboolean,e.exports.lua_todataview=et.lua_todataview,e.exports.lua_tointeger=et.lua_tointeger,e.exports.lua_tointegerx=et.lua_tointegerx,e.exports.lua_tojsstring=et.lua_tojsstring,e.exports.lua_tolstring=et.lua_tolstring,e.exports.lua_tonumber=et.lua_tonumber,e.exports.lua_tonumberx=et.lua_tonumberx,e.exports.lua_topointer=et.lua_topointer,e.exports.lua_toproxy=et.lua_toproxy,e.exports.lua_tostring=et.lua_tostring,e.exports.lua_tothread=et.lua_tothread,e.exports.lua_touserdata=et.lua_touserdata,e.exports.lua_type=et.lua_type,e.exports.lua_typename=et.lua_typename,e.exports.lua_upvalueid=et.lua_upvalueid,e.exports.lua_upvaluejoin=et.lua_upvaluejoin,e.exports.lua_version=et.lua_version,e.exports.lua_xmove=et.lua_xmove,e.exports.lua_yield=eo.lua_yield,e.exports.lua_yieldk=eo.lua_yieldk,e.exports.lua_tocfunction=et.lua_tocfunction},function(e,n,R){let C={},{LUA_VERSION_MAJOR:et,LUA_VERSION_MINOR:ei,to_luastring:eo}=R(1);e.exports.LUA_PATH_SEP=";",e.exports.LUA_PATH_MARK="?",e.exports.LUA_EXEC_DIR="!";let el=et+"."+ei;e.exports.LUA_VDIR=el;{e.exports.LUA_DIRSEP="/";let n="./lua/"+el+"/";e.exports.LUA_LDIR=n,e.exports.LUA_JSDIR=n;let R=eo(n+"?.lua;"+n+"?/init.lua;./?.lua;./?/init.lua");e.exports.LUA_PATH_DEFAULT=R;let C=eo(n+"?.js;"+n+"loadall.js;./?.js");e.exports.LUA_JSPATH_DEFAULT=C}let eu=C.LUA_COMPAT_FLOATSTRING||!1,ec=C.LUAI_MAXSTACK||1e6,ef=C.LUA_IDSIZE||59,eh=C.LUAL_BUFFERSIZE||8192,L=function(e,n){for(var R=Math.min(3,Math.ceil(Math.abs(n)/1023)),C=e,et=0;et<R;et++)C*=Math.pow(2,Math.floor((n+et)/R));return C};e.exports.LUAI_MAXSTACK=ec,e.exports.LUA_COMPAT_FLOATSTRING=eu,e.exports.LUA_IDSIZE=ef,e.exports.LUA_INTEGER_FMT="%d",e.exports.LUA_INTEGER_FRMLEN="",e.exports.LUA_MAXINTEGER=2147483647,e.exports.LUA_MININTEGER=-2147483648,e.exports.LUA_NUMBER_FMT="%.14g",e.exports.LUA_NUMBER_FRMLEN="",e.exports.LUAL_BUFFERSIZE=eh,e.exports.frexp=function(e){if(0===e)return[e,0];var n=new DataView(new ArrayBuffer(8));n.setFloat64(0,e);var R=n.getUint32(0)>>>20&2047;0===R&&(n.setFloat64(0,18446744073709552e3*e),R=(n.getUint32(0)>>>20&2047)-64);var C=R-1022;return[L(e,-C),C]},e.exports.ldexp=L,e.exports.lua_getlocaledecpoint=function(){return 46},e.exports.lua_integer2str=function(e){return String(e)},e.exports.lua_number2str=function(e){return String(Number(e.toPrecision(14)))},e.exports.lua_numbertointeger=function(e){return e>=-2147483648&&e<2147483648&&e},e.exports.luai_apicheck=function(e,n){if(!n)throw Error(n)}},function(e,n,R){let{luai_apicheck:C}=R(3),s=function(e){if(!e)throw Error("assertion failed")};e.exports.lua_assert=s,e.exports.luai_apicheck=C||function(e,n){return s(n)},e.exports.api_check=function(e,n,R){return C(e,n&&R)},e.exports.LUAI_MAXCCALLS=200,e.exports.LUA_MINBUFFER=32,e.exports.luai_nummod=function(e,n,R){let C=n%R;return C*R<0&&(C+=R),C},e.exports.MAX_INT=2147483647,e.exports.MIN_INT=-2147483648},function(e,n,R){let C=R(1),et=`Fengari 0.1.4  Copyright (C) 2017-2018 B. Giannangeli, Daurnimator
Based on: `+C.LUA_COPYRIGHT;e.exports.FENGARI_AUTHORS="B. Giannangeli, Daurnimator",e.exports.FENGARI_COPYRIGHT=et,e.exports.FENGARI_RELEASE="Fengari 0.1.4",e.exports.FENGARI_VERSION="Fengari 0.1",e.exports.FENGARI_VERSION_MAJOR="0",e.exports.FENGARI_VERSION_MINOR="1",e.exports.FENGARI_VERSION_NUM=1,e.exports.FENGARI_VERSION_RELEASE="4",e.exports.is_luastring=C.is_luastring,e.exports.luastring_eq=C.luastring_eq,e.exports.luastring_from=C.luastring_from,e.exports.luastring_indexOf=C.luastring_indexOf,e.exports.luastring_of=C.luastring_of,e.exports.to_jsstring=C.to_jsstring,e.exports.to_luastring=C.to_luastring,e.exports.to_uristring=C.to_uristring,e.exports.from_userstring=C.from_userstring},function(e,n,R){let{LUA_OPADD:C,LUA_OPBAND:et,LUA_OPBNOT:ei,LUA_OPBOR:eo,LUA_OPBXOR:el,LUA_OPDIV:eu,LUA_OPIDIV:ec,LUA_OPMOD:ef,LUA_OPMUL:eh,LUA_OPPOW:ep,LUA_OPSHL:ed,LUA_OPSHR:e_,LUA_OPSUB:eg,LUA_OPUNM:em,constant_types:{LUA_NUMTAGS:eb,LUA_TBOOLEAN:ey,LUA_TCCL:ev,LUA_TFUNCTION:ek,LUA_TLCF:eA,LUA_TLCL:eL,LUA_TLIGHTUSERDATA:ex,LUA_TLNGSTR:ew,LUA_TNIL:eT,LUA_TNUMBER:eO,LUA_TNUMFLT:eE,LUA_TNUMINT:eS,LUA_TSHRSTR:eN,LUA_TSTRING:eI,LUA_TTABLE:eU,LUA_TTHREAD:eR,LUA_TUSERDATA:eC},from_userstring:eM,luastring_indexOf:eP,luastring_of:eD,to_jsstring:eB,to_luastring:eK}=R(1),{lisdigit:eG,lisprint:eV,lisspace:eF,lisxdigit:ej}=R(22),ez=R(11),eH=R(8),e$=R(12),{luaS_bless:eX,luaS_new:eq}=R(10),eW=R(9),{LUA_COMPAT_FLOATSTRING:eZ,ldexp:eY,lua_integer2str:eJ,lua_number2str:eQ}=R(3),e0=R(15),{MAX_INT:e1,luai_nummod:e2,lua_assert:e3}=R(4),e5=R(14),e4=eb+1;let ce=class ce{constructor(e,n){this.type=e,this.value=n}ttype(){return 63&this.type}ttnov(){return 15&this.type}checktag(e){return this.type===e}checktype(e){return this.ttnov()===e}ttisnumber(){return this.checktype(eO)}ttisfloat(){return this.checktag(eE)}ttisinteger(){return this.checktag(eS)}ttisnil(){return this.checktag(eT)}ttisboolean(){return this.checktag(ey)}ttislightuserdata(){return this.checktag(ex)}ttisstring(){return this.checktype(eI)}ttisshrstring(){return this.checktag(eN)}ttislngstring(){return this.checktag(ew)}ttistable(){return this.checktag(eU)}ttisfunction(){return this.checktype(ek)}ttisclosure(){return(31&this.type)===ek}ttisCclosure(){return this.checktag(ev)}ttisLclosure(){return this.checktag(eL)}ttislcf(){return this.checktag(eA)}ttisfulluserdata(){return this.checktag(eC)}ttisthread(){return this.checktag(eR)}ttisdeadkey(){return this.checktag(e4)}l_isfalse(){return this.ttisnil()||this.ttisboolean()&&!1===this.value}setfltvalue(e){this.type=eE,this.value=e}chgfltvalue(e){e3(this.type==eE),this.value=e}setivalue(e){this.type=eS,this.value=e}chgivalue(e){e3(this.type==eS),this.value=e}setnilvalue(){this.type=eT,this.value=null}setfvalue(e){this.type=eA,this.value=e}setpvalue(e){this.type=ex,this.value=e}setbvalue(e){this.type=ey,this.value=e}setsvalue(e){this.type=ew,this.value=e}setuvalue(e){this.type=eC,this.value=e}setthvalue(e){this.type=eR,this.value=e}setclLvalue(e){this.type=eL,this.value=e}setclCvalue(e){this.type=ev,this.value=e}sethvalue(e){this.type=eU,this.value=e}setdeadvalue(){this.type=e4,this.value=null}setfrom(e){this.type=e.type,this.value=e.value}tsvalue(){return e3(this.ttisstring()),this.value}svalue(){return this.tsvalue().getstr()}vslen(){return this.tsvalue().tsslen()}jsstring(e,n){return eB(this.svalue(),e,n,!0)}};let Re=function(e,n,R){e.stack[n].setsvalue(R)},e8=new ce(eT,null);Object.freeze(e8),e.exports.luaO_nilobject=e8;let nt=class nt{constructor(e,n){this.id=e.l_G.id_counter++,this.p=null,this.nupvalues=n,this.upvals=Array(n)}};let dt=class dt{constructor(e,n,R){for(this.id=e.l_G.id_counter++,this.f=n,this.nupvalues=R,this.upvalue=Array(R);R--;)this.upvalue[R]=new ce(eT,null)}};let Et=class Et{constructor(e,n){this.id=e.l_G.id_counter++,this.metatable=null,this.uservalue=new ce(eT,null),this.len=n,this.data=Object.create(null)}};let e6=eK("..."),e9=eK('[string "'),e7=eK('"]'),Ce=function(e){return eG(e)?e-48:(223&e)-55},De=function(e,n){let R=1;if(e3(n<=1114111),n<128)e[7]=n;else{let C=63;do e[8-R++]=128|63&n,n>>=6,C>>=1;while(n>C);e[8-R]=~C<<1|n}return R},Fe=function(e,n){let R="x"===n?function(e){let n,R=0,C=0,et=0,ei=0,eo=0,el=!1;for(;eF(e[R]);)R++;if(((n=45===e[R])||43===e[R])&&R++,48!==e[R]||120!==e[R+1]&&88!==e[R+1])return null;for(R+=2;;R++)if(46===e[R]){if(el)break;el=!0}else{if(!ej(e[R]))break;0===et&&48===e[R]?ei++:++et<=30?C=16*C+Ce(e[R]):eo++,el&&eo--}if(ei+et===0)return null;if(eo*=4,112===e[R]||80===e[R]){let n,C=0;if(((n=45===e[++R])||43===e[R])&&R++,!eG(e[R]))return null;for(;eG(e[R]);)C=10*C+e[R++]-48;n&&(C=-C),eo+=C}return n&&(C=-C),{n:eY(C,eo),i:R}}(e):function(e){try{e=eB(e)}catch{return null}let n=/^[\t\v\f \n\r]*[+-]?(?:[0-9]+\.?[0-9]*|\.[0-9]*)(?:[eE][+-]?[0-9]+)?/.exec(e);if(!n)return null;let R=parseFloat(n[0]);return isNaN(R)?null:{n:R,i:n[0].length}}(e);if(null===R)return null;for(;eF(e[R.i]);)R.i++;return R.i===e.length||0===e[R.i]?R:null},ts=[46,120,88,110,78],to={46:".",120:"x",88:"x",110:"n",78:"n"},tl=Math.floor(e1/10),tu=e1%10,vt=function(e,n){let R;if(n.ttisinteger())R=eK(eJ(n.value));else{let e=eQ(n.value);!eZ&&/^[-0123456789]+$/.test(e)&&(e+=".0"),R=eK(e)}n.setsvalue(eX(e,R))},yt=function(e,n){eH.luaD_inctop(e),Re(e,e.top-1,eq(e,n))},Rt=function(e,n,R){let C,et=0,ei=0,eo=0;for(;-1!=(C=eP(n,37,ei));){switch(yt(e,n.subarray(ei,C)),n[C+1]){case 115:{let n=R[eo++];if(null===n)n=eK("(null)",!0);else{let e=eP(n=eM(n),0);-1!==e&&(n=n.subarray(0,e))}yt(e,n);break}case 99:{let n=R[eo++];eV(n)?yt(e,eD(n)):lt(e,eK("<\\%d>",!0),n);break}case 100:case 73:eH.luaD_inctop(e),e.stack[e.top-1].setivalue(R[eo++]),vt(e,e.stack[e.top-1]);break;case 102:eH.luaD_inctop(e),e.stack[e.top-1].setfltvalue(R[eo++]),vt(e,e.stack[e.top-1]);break;case 112:{let n=R[eo++];if(n instanceof e$.lua_State||n instanceof eW.Table||n instanceof Et||n instanceof nt||n instanceof dt)yt(e,eK("0x"+n.id.toString(16)));else switch(typeof n){case"undefined":yt(e,eK("undefined"));break;case"number":yt(e,eK("Number("+n+")"));break;case"string":yt(e,eK("String("+JSON.stringify(n)+")"));break;case"boolean":yt(e,eK(n?"Boolean(true)":"Boolean(false)"));break;case"object":if(null===n){yt(e,eK("null"));break}case"function":{let R=e.l_G.ids.get(n);R||(R=e.l_G.id_counter++,e.l_G.ids.set(n,R)),yt(e,eK("0x"+R.toString(16)));break}default:yt(e,eK("<id NYI>"))}break}case 85:{let n=new Uint8Array(8),C=De(n,R[eo++]);yt(e,n.subarray(8-C));break}case 37:yt(e,eK("%",!0));break;default:ez.luaG_runerror(e,eK("invalid option '%%%c' to 'lua_pushfstring'"),n[C+1])}et+=2,ei=C+2}return eH.luaD_checkstack(e,1),yt(e,n.subarray(ei)),et>0&&e0.luaV_concat(e,et+1),e.stack[e.top-1].svalue()},lt=function(e,n,...R){return Rt(e,n,R)},pt=function(e,n,R,eu){switch(n){case C:return R+eu|0;case eg:return R-eu|0;case eh:return e0.luaV_imul(R,eu);case ef:return e0.luaV_mod(e,R,eu);case ec:return e0.luaV_div(e,R,eu);case et:return R&eu;case eo:return R|eu;case el:return R^eu;case ed:return e0.luaV_shiftl(R,eu);case e_:return e0.luaV_shiftl(R,-eu);case em:return 0-R|0;case ei:return -1^R;default:e3(0)}},wt=function(e,n,R,et){switch(n){case C:return R+et;case eg:return R-et;case eh:return R*et;case eu:return R/et;case ep:return Math.pow(R,et);case ec:return Math.floor(R/et);case em:return-R;case ef:return e2(e,R,et);default:e3(0)}};e.exports.CClosure=dt,e.exports.LClosure=nt,e.exports.LUA_TDEADKEY=e4,e.exports.LUA_TPROTO=eb,e.exports.LocVar=class{constructor(){this.varname=null,this.startpc=NaN,this.endpc=NaN}},e.exports.TValue=ce,e.exports.Udata=Et,e.exports.UTF8BUFFSZ=8,e.exports.luaO_arith=function(e,n,R,ec,ef){let eh="number"==typeof ef?e.stack[ef]:ef;switch(n){case et:case eo:case el:case ed:case e_:case ei:{let C,et;if(!1!==(C=e0.tointeger(R))&&!1!==(et=e0.tointeger(ec)))return void eh.setivalue(pt(e,n,C,et));break}case eu:case ep:{let C,et;if(!1!==(C=e0.tonumber(R))&&!1!==(et=e0.tonumber(ec)))return void eh.setfltvalue(wt(e,n,C,et));break}default:{let C,et;if(R.ttisinteger()&&ec.ttisinteger())return void eh.setivalue(pt(e,n,R.value,ec.value));if(!1!==(C=e0.tonumber(R))&&!1!==(et=e0.tonumber(ec)))return void eh.setfltvalue(wt(e,n,C,et))}}e3(null!==e),e5.luaT_trybinTM(e,R,ec,ef,n-C+e5.TMS.TM_ADD)},e.exports.luaO_chunkid=function(e,n){let R,C=e.length;if(61===e[0])C<n?(R=new Uint8Array(C-1)).set(e.subarray(1)):(R=new Uint8Array(n)).set(e.subarray(1,n+1));else if(64===e[0])C<=n?(R=new Uint8Array(C-1)).set(e.subarray(1)):((R=new Uint8Array(n)).set(e6),n-=e6.length,R.set(e.subarray(C-n),e6.length));else{R=new Uint8Array(n);let et=eP(e,10);R.set(e9);let ei=e9.length;C<(n-=e9.length+e6.length+e7.length)&&-1===et?(R.set(e,ei),ei+=e.length):(-1!==et&&(C=et),C>n&&(C=n),R.set(e.subarray(0,C),ei),ei+=C,R.set(e6,ei),ei+=e6.length),R.set(e7,ei),ei+=e7.length,R=R.subarray(0,ei)}return R},e.exports.luaO_hexavalue=Ce,e.exports.luaO_int2fb=function(e){let n=0;if(e<8)return e;for(;e>=128;)e=e+15>>4,n+=4;for(;e>=16;)e=e+1>>1,n++;return n+1<<3|e-8},e.exports.luaO_pushfstring=lt,e.exports.luaO_pushvfstring=Rt,e.exports.luaO_str2num=function(e,n){let R=function(e){let n,R=0,C=0,et=!0;for(;eF(e[R]);)R++;if(((n=45===e[R])||43===e[R])&&R++,48!==e[R]||120!==e[R+1]&&88!==e[R+1])for(;R<e.length&&eG(e[R]);R++){let ei=e[R]-48;if(C>=tl&&(C>tl||ei>tu+n))return null;C=10*C+ei|0,et=!1}else for(R+=2;R<e.length&&ej(e[R]);R++)C=16*C+Ce(e[R])|0,et=!1;for(;R<e.length&&eF(e[R]);)R++;return et||R!==e.length&&0!==e[R]?null:{n:0|(n?-C:C),i:R}}(e);return null!==R?(n.setivalue(R.n),R.i+1):null!==(R=function(e){let n=e.length,R=0;for(let C=0;C<n;C++){let n=e[C];if(-1!==ts.indexOf(n)){R=n;break}}let C=to[R];return"n"===C?null:Fe(e,C)}(e))?(n.setfltvalue(R.n),R.i+1):0},e.exports.luaO_tostring=vt,e.exports.luaO_utf8esc=De,e.exports.numarith=wt,e.exports.pushobj2s=function(e,n){e.stack[e.top++]=new ce(n.type,n.value)},e.exports.pushsvalue2s=function(e,n){e.stack[e.top++]=new ce(ew,n)},e.exports.setobjs2s=function(e,n,R){e.stack[n].setfrom(e.stack[R])},e.exports.setobj2s=function(e,n,R){e.stack[n].setfrom(R)},e.exports.setsvalue2s=Re},function(e,n,R){let C,et;let{LUAL_BUFFERSIZE:ei}=R(3),{LUA_ERRERR:eo,LUA_MULTRET:el,LUA_REGISTRYINDEX:eu,LUA_SIGNATURE:ec,LUA_TBOOLEAN:ef,LUA_TLIGHTUSERDATA:eh,LUA_TNIL:ep,LUA_TNONE:ed,LUA_TNUMBER:e_,LUA_TSTRING:eg,LUA_TTABLE:em,LUA_VERSION_NUM:eb,lua_Debug:ey,lua_absindex:ev,lua_atpanic:ek,lua_call:eA,lua_checkstack:eL,lua_concat:ex,lua_copy:ew,lua_createtable:eT,lua_error:eO,lua_getfield:eE,lua_getinfo:eS,lua_getmetatable:eN,lua_getstack:eI,lua_gettop:eU,lua_insert:eR,lua_isinteger:eC,lua_isnil:eM,lua_isnumber:eP,lua_isstring:eD,lua_istable:eB,lua_len:eK,lua_load:eG,lua_newstate:eV,lua_newtable:eF,lua_next:ej,lua_pcall:ez,lua_pop:eH,lua_pushboolean:e$,lua_pushcclosure:eX,lua_pushcfunction:eq,lua_pushfstring:eW,lua_pushinteger:eZ,lua_pushliteral:eY,lua_pushlstring:eJ,lua_pushnil:eQ,lua_pushstring:e0,lua_pushvalue:e1,lua_pushvfstring:e2,lua_rawequal:e3,lua_rawget:e5,lua_rawgeti:e4,lua_rawlen:e8,lua_rawseti:e6,lua_remove:e9,lua_setfield:e7,lua_setglobal:ts,lua_setmetatable:to,lua_settop:tl,lua_toboolean:tu,lua_tointeger:tc,lua_tointegerx:tf,lua_tojsstring:th,lua_tolstring:tp,lua_tonumber:td,lua_tonumberx:t_,lua_topointer:tg,lua_tostring:tm,lua_touserdata:tb,lua_type:ty,lua_typename:tv,lua_version:tk}=R(2),{from_userstring:tA,luastring_eq:tL,to_luastring:tx,to_uristring:tw}=R(5),tT=eo+1,tO=tx("_LOADED"),tE=tx("_PRELOAD"),tS=tx("FILE*"),tN=tx("__name"),tI=tx("__tostring"),tU=new Uint8Array(0);let U=class U{constructor(){this.L=null,this.b=tU,this.n=0}};let pe=function(e,n,R){if(0===R||!eB(e,-1))return 0;for(eQ(e);ej(e,-2);){if(ty(e,-2)===eg){if(e3(e,n,-1))return eH(e,1),1;if(pe(e,n,R-1))return e9(e,-2),eY(e,"."),eR(e,-2),ex(e,3),1}eH(e,1)}return 0},He=function(e,n){let R=eU(e);if(eS(e,tx("f"),n),eE(e,eu,tO),pe(e,R+1,2)){let n=tm(e,-1);return 95===n[0]&&71===n[1]&&46===n[2]&&(e0(e,n.subarray(3)),e9(e,-2)),ew(e,-1,R+1),eH(e,2),1}return tl(e,R),0},Qe=function(e,n){He(e,n)?(eW(e,tx("function '%s'"),tm(e,-1)),e9(e,-2)):0!==n.namewhat.length?eW(e,tx("%s '%s'"),n.namewhat,n.name):n.what&&109===n.what[0]?eY(e,"main chunk"):n.what&&76===n.what[0]?eW(e,tx("function <%s:%d>"),n.short_src,n.linedefined):eY(e,"?")},kt=function(e){throw Error("PANIC: unprotected error in call to Lua API ("+th(e,-1)+")")},J=function(e,n,R){let C=new ey;return eI(e,0,C)?(eS(e,tx("n"),C),tL(C.namewhat,tx("method"))&&0==--n?V(e,tx("calling '%s' on bad self (%s)"),C.name,R):(null===C.name&&(C.name=He(e,C)?tm(e,-1):tx("?")),V(e,tx("bad argument #%d to '%s' (%s)"),n,C.name,R))):V(e,tx("bad argument #%d (%s)"),n,R)},Z=function(e,n,R){let C;C=$e(e,n,tN)===eg?tm(e,-1):ty(e,n)===eh?tx("light userdata",!0):ct(e,n);let et=eW(e,tx("%s expected, got %s"),R,C);return J(e,n,et)},ke=function(e,n){let R=new ey;eI(e,n,R)&&(eS(e,tx("Sl",!0),R),R.currentline>0)?eW(e,tx("%s:%d: "),R.short_src,R.currentline):e0(e,tx(""))},V=function(e,n,...R){return ke(e,1),e2(e,n,R),ex(e,2),eO(e)},xe=function(e,n,R,C){if(n)return e$(e,1),1;{let n,et;return eQ(e),C?(n=C.message,et=-C.errno):(n="Success",et=0),R?eW(e,tx("%s: %s"),R,tx(n)):e0(e,tx(n)),eZ(e,et),3}},fe=function(e,n){return eE(e,eu,n)},Me=function(e,n,R){let C=tb(e,n);return null!==C&&eN(e,n)?(fe(e,R),e3(e,-1,-2)||(C=null),eH(e,2),C):null},tt=function(e,n,R){Z(e,n,tv(e,R))},ct=function(e,n){return tv(e,ty(e,n))},at=function(e,n){let R=tp(e,n);return null!=R||tt(e,n,eg),R},Bt=function(e,n,R){return 0>=ty(e,n)?null===R?null:tA(R):at(e,n)},Ot=function(e,n){let R=t_(e,n);return!1===R&&tt(e,n,e_),R},At=function(e,n){let R=tf(e,n);return!1===R&&(eP(e,n)?J(e,n,tx("number has no integer representation",!0)):tt(e,n,e_)),R},Ct=function(e,n){let R=e.n+n;if(e.b.length<R){let n=Math.max(2*e.b.length,R),C=new Uint8Array(n);C.set(e.b),e.b=C}return e.b.subarray(e.n,R)},Mt=function(e,n){n.L=e,n.b=tU},Zt=function(e,n,R){R>0&&(n=tA(n),Ct(e,R).set(n.subarray(0,R)),$t(e,R))},Dt=function(e,n){Zt(e,n=tA(n),n.length)},qt=function(e){eJ(e.L,e.b,e.n),e.n=0,e.b=tU},$t=function(e,n){e.n+=n},j=function(e,n,R,C){return 0>=ty(e,R)?C:n(e,R)},Le=function(e,n){let R=n.string;return n.string=null,R},Ye=function(e,n,R,C,et){return eG(e,Le,{string:n},C,et)},Je=function(e,n,R,C){return Ye(e,n,0,C,null)},ot=function(e,n){return Je(e,n,n.length,n)},$e=function(e,n,R){if(eN(e,n)){e0(e,R);let n=e5(e,-2);return n===ep?eH(e,2):e9(e,-2),n}return ep},qe=function(e,n,R){return n=ev(e,n),$e(e,n,R)!==ep&&(e1(e,n),eA(e,1,1),!0)},tR=tx("%I"),tC=tx("%f"),ht=function(e,n,R){var C=R>>>0,et=n.length,ei=e.length+1-et;e:for(;C<ei;C++){for(let R=0;R<et;R++)if(e[C+R]!==n[R])continue e;return C}return -1},k=function(e,n,R){return eE(e,n,R)===em||(eH(e,1),n=ev(e,n),eF(e),e1(e,-1),e7(e,n,R),!1)},se=function(e,n,R){for(let C in re(e,R,tx("too many upvalues",!0)),n){for(let n=0;n<R;n++)e1(e,-R);eX(e,n[C],R),e7(e,-(R+2),tx(C))}eH(e,R)},re=function(e,n,R){eL(e,n)||(R?V(e,tx("stack overflow (%s)"),R):V(e,tx("stack overflow",!0)))},Ee=function(e,n,R,C){let et=C.message,ei=tm(e,R).subarray(1);return eW(e,tx("cannot %s %s: %s"),tx(n),ei,tx(et)),e9(e,R),tT},tM=[239,187,191],ft=function(e){let n=function(e){let n;e.n=0;let R=0;do{if(null===(n=C(e))||n!==tM[R])return n;R++,e.buff[e.n++]=n}while(R<tM.length);return e.n=0,C(e)}(e);if(35===n){do n=C(e);while(n&&10!==n);return{skipped:!0,c:C(e)}}return{skipped:!1,c:n}};{let P=class P{constructor(){this.n=NaN,this.f=null,this.buff=new Uint8Array(1024),this.pos=0,this.err=void 0}};let ne=function(e,n){if(null!==n.f&&n.n>0){let e=n.n;return n.n=0,n.f=n.f.subarray(n.pos),n.buff.subarray(0,e)}let R=n.f;return n.f=null,R};C=function(e){return e.pos<e.f.length?e.f[e.pos++]:null},et=function(e,n,R){let C=new P,et=eU(e)+1;if(null===n)throw Error("Can't read stdin in the browser");{eW(e,tx("@%s"),n);let R=tw(n),ei=new XMLHttpRequest;if(ei.open("GET",R,!1),typeof window>"u"&&(ei.responseType="arraybuffer"),ei.send(),!(ei.status>=200&&ei.status<=299))return C.err=ei.status,Ee(e,"open",et,{message:`${ei.status}: ${ei.statusText}`});"string"==typeof ei.response?C.f=tx(ei.response):C.f=new Uint8Array(ei.response)}let ei=ft(C);ei.c===ec[0]&&n||ei.skipped&&(C.buff[C.n++]=10),null!==ei.c&&(C.buff[C.n++]=ei.c);let eo=eG(e,ne,C,tm(e,-1),R),el=C.err;return el?(tl(e,et),Ee(e,"read",et,el)):(e9(e,et),eo)}}let Lt=function(e,n){return et(e,n,null)},It=function(e,n,R){let C=tk(e);72!=R&&V(e,tx("core and library have incompatible numeric types")),C!=tk(null)?V(e,tx("multiple Lua VMs detected")):C!==n&&V(e,tx("version mismatch: app. needs %f, Lua core provides %f"),n,C)};e.exports.LUA_ERRFILE=tT,e.exports.LUA_FILEHANDLE=tS,e.exports.LUA_LOADED_TABLE=tO,e.exports.LUA_NOREF=-2,e.exports.LUA_PRELOAD_TABLE=tE,e.exports.LUA_REFNIL=-1,e.exports.luaL_Buffer=U,e.exports.luaL_addchar=function(e,n){Ct(e,1),e.b[e.n++]=n},e.exports.luaL_addlstring=Zt,e.exports.luaL_addsize=$t,e.exports.luaL_addstring=Dt,e.exports.luaL_addvalue=function(e){let n=e.L,R=tm(n,-1);Zt(e,R,R.length),eH(n,1)},e.exports.luaL_argcheck=function(e,n,R,C){n||J(e,R,C)},e.exports.luaL_argerror=J,e.exports.luaL_buffinit=Mt,e.exports.luaL_buffinitsize=function(e,n,R){return Mt(e,n),Ct(n,R)},e.exports.luaL_callmeta=qe,e.exports.luaL_checkany=function(e,n){ty(e,n)===ed&&J(e,n,tx("value expected",!0))},e.exports.luaL_checkinteger=At,e.exports.luaL_checklstring=at,e.exports.luaL_checknumber=Ot,e.exports.luaL_checkoption=function(e,n,R,C){let et=null!==R?Bt(e,n,R):at(e,n);for(let e=0;C[e];e++)if(tL(C[e],et))return e;return J(e,n,eW(e,tx("invalid option '%s'"),et))},e.exports.luaL_checkstack=re,e.exports.luaL_checkstring=at,e.exports.luaL_checktype=function(e,n,R){ty(e,n)!==R&&tt(e,n,R)},e.exports.luaL_checkudata=function(e,n,R){let C=Me(e,n,R);return null===C&&Z(e,n,R),C},e.exports.luaL_checkversion=function(e){It(e,eb,72)},e.exports.luaL_checkversion_=It,e.exports.luaL_dofile=function(e,n){return Lt(e,n)||ez(e,0,el,0)},e.exports.luaL_dostring=function(e,n){return ot(e,n)||ez(e,0,el,0)},e.exports.luaL_error=V,e.exports.luaL_execresult=function(e,n){let R,C;if(null===n)return e$(e,1),eY(e,"exit"),eZ(e,0),3;if(n.status)R="exit",C=n.status;else{if(!n.signal)return xe(e,0,null,n);R="signal",C=n.signal}return eQ(e),eY(e,R),eZ(e,C),3},e.exports.luaL_fileresult=xe,e.exports.luaL_getmetafield=$e,e.exports.luaL_getmetatable=fe,e.exports.luaL_getsubtable=k,e.exports.luaL_gsub=function(e,n,R,C){let et,ei=new U;for(Mt(e,ei);(et=ht(n,R))>=0;)Zt(ei,n,et),Dt(ei,C),n=n.subarray(et+R.length);return Dt(ei,n),qt(ei),tm(e,-1)},e.exports.luaL_len=function(e,n){eK(e,n);let R=tf(e,-1);return!1===R&&V(e,tx("object length is not an integer",!0)),eH(e,1),R},e.exports.luaL_loadbuffer=Je,e.exports.luaL_loadbufferx=Ye,e.exports.luaL_loadfile=Lt,e.exports.luaL_loadfilex=et,e.exports.luaL_loadstring=ot,e.exports.luaL_newlib=function(e,n){eT(e),se(e,n,0)},e.exports.luaL_newlibtable=function(e){eT(e)},e.exports.luaL_newmetatable=function(e,n){return fe(e,n)!==ep?0:(eH(e,1),eT(e,0,2),e0(e,n),e7(e,-2,tN),e1(e,-1),e7(e,eu,n),1)},e.exports.luaL_newstate=function(){let e=eV();return e&&ek(e,kt),e},e.exports.luaL_opt=j,e.exports.luaL_optinteger=function(e,n,R){return j(e,At,n,R)},e.exports.luaL_optlstring=Bt,e.exports.luaL_optnumber=function(e,n,R){return j(e,Ot,n,R)},e.exports.luaL_optstring=Bt,e.exports.luaL_prepbuffer=function(e){return Ct(e,ei)},e.exports.luaL_prepbuffsize=Ct,e.exports.luaL_pushresult=qt,e.exports.luaL_pushresultsize=function(e,n){$t(e,n),qt(e)},e.exports.luaL_ref=function(e,n){let R;return eM(e,-1)?(eH(e,1),-1):(n=ev(e,n),e4(e,n,0),R=tc(e,-1),eH(e,1),0!==R?(e4(e,n,R),e6(e,n,0)):R=e8(e,n)+1,e6(e,n,R),R)},e.exports.luaL_requiref=function(e,n,R,C){k(e,eu,tO),eE(e,-1,n),tu(e,-1)||(eH(e,1),eq(e,R),e0(e,n),eA(e,1,1),e1(e,-1),e7(e,-3,n)),e9(e,-2),C&&(e1(e,-1),ts(e,n))},e.exports.luaL_setfuncs=se,e.exports.luaL_setmetatable=function(e,n){fe(e,n),to(e,-2)},e.exports.luaL_testudata=Me,e.exports.luaL_tolstring=function(e,n){if(qe(e,n,tI))eD(e,-1)||V(e,tx("'__tostring' must return a string"));else switch(ty(e,n)){case e_:eC(e,n)?eW(e,tR,tc(e,n)):eW(e,tC,td(e,n));break;case eg:e1(e,n);break;case ef:eY(e,tu(e,n)?"true":"false");break;case ep:eY(e,"nil");break;default:{let R=$e(e,n,tN),C=R===eg?tm(e,-1):ct(e,n);eW(e,tx("%s: %p"),C,tg(e,n)),R!==ep&&e9(e,-2)}}return tp(e,-1)},e.exports.luaL_traceback=function(e,n,R,C){let et=new ey,ei=eU(e),eo=function(e){let n=new ey,R=1,C=1;for(;eI(e,C,n);)R=C,C*=2;for(;R<C;){let et=Math.floor((R+C)/2);eI(e,et,n)?R=et+1:C=et}return C-1}(n),el=eo-C>21?10:-1;for(R&&eW(e,tx(`%s
`),R),re(e,10,null),eY(e,"stack traceback:");eI(n,C++,et);)0==el--?(eY(e,`
	...`),C=eo-11+1):(eS(n,tx("Slnt",!0),et),eW(e,tx(`
	%s:`),et.short_src),et.currentline>0&&eY(e,`${et.currentline}:`),eY(e," in "),Qe(e,et),et.istailcall&&eY(e,`
	(...tail calls..)`),ex(e,eU(e)-ei));ex(e,eU(e)-ei)},e.exports.luaL_typename=ct,e.exports.luaL_unref=function(e,n,R){R>=0&&(n=ev(e,n),e4(e,n,0),e6(e,n,R),eZ(e,R),e6(e,n,0))},e.exports.luaL_where=ke,e.exports.lua_writestringerror=function(){for(let e=0;e<arguments.length;e++){let n=arguments[e];do{let e=/([^\n]*)\n?([\d\D]*)/.exec(n);console.error(e[1]),n=e[2]}while(""!==n)}}},function(e,n,R){let{LUA_HOOKCALL:C,LUA_HOOKRET:et,LUA_HOOKTAILCALL:ei,LUA_MASKCALL:eo,LUA_MASKLINE:el,LUA_MASKRET:eu,LUA_MINSTACK:ec,LUA_MULTRET:ef,LUA_SIGNATURE:eh,constant_types:{LUA_TCCL:ep,LUA_TLCF:ed,LUA_TLCL:e_,LUA_TNIL:eg},thread_status:{LUA_ERRMEM:em,LUA_ERRERR:eb,LUA_ERRRUN:ey,LUA_ERRSYNTAX:ev,LUA_OK:ek,LUA_YIELD:eA},lua_Debug:eL,luastring_indexOf:ex,to_luastring:ew}=R(1),eT=R(18),eO=R(11),eE=R(13),{api_check:eS,lua_assert:eN,LUAI_MAXCCALLS:eI}=R(4),eU=R(6),eR=R(16),eC=R(23),eM=R(12),{luaS_newliteral:eP}=R(10),eD=R(14),{LUAI_MAXSTACK:eB}=R(3),eK=R(36),eG=R(15),{MBuffer:eV}=R(19),Ue=function(e,n){if(e.top<n)for(;e.top<n;)e.stack[e.top++]=new eU.TValue(eg,null);else for(;e.top>n;)delete e.stack[--e.top]},Xe=function(e,n,R){let C=e.top;for(;e.top<R+1;)e.stack[e.top++]=new eU.TValue(eg,null);switch(n){case em:eU.setsvalue2s(e,R,eP(e,"not enough memory"));break;case eb:eU.setsvalue2s(e,R,eP(e,"error in error handling"));break;default:eU.setobjs2s(e,R,C-1)}for(;e.top>R+1;)delete e.stack[--e.top]},eF=eB+200,Ze=function(e,n){eN(n<=eB||n==eF),eN(e.stack_last==e.stack.length-eM.EXTRA_STACK),e.stack.length=n,e.stack_last=n-eM.EXTRA_STACK},ae=function(e,n){let R=e.stack.length;if(R>eB)q(e,eb);else{let C=e.top+n+eM.EXTRA_STACK,et=2*R;et>eB&&(et=eB),et<C&&(et=C),et>eB?(Ze(e,eF),eO.luaG_runerror(e,ew("stack overflow",!0))):Ze(e,et)}},le=function(e,n){e.stack_last-e.top<=n&&ae(e,n)},Pe=function(e){let n=function(e){let n=e.top;for(let R=e.ci;null!==R;R=R.previous)n<R.top&&(n=R.top);return eN(n<=e.stack_last),n+1}(e),R=n+Math.floor(n/8)+2*eM.EXTRA_STACK;R>eB&&(R=eB),e.stack.length>eB&&eM.luaE_freeCI(e),n<=eB-eM.EXTRA_STACK&&R<e.stack.length&&Ze(e,R)},Te=function(e,n,R){let et=e.stack[n];switch(et.type){case ep:case ed:{let ei=et.type===ep?et.value.f:et.value;le(e,ec);let el=eM.luaE_extendCI(e);el.funcOff=n,el.nresults=R,el.func=et,el.top=e.top+ec,eN(el.top<=e.stack_last),el.callstatus=0,e.hookmask&eo&&ge(e,C,-1);let eu=ei(e);if("number"!=typeof eu||eu<0||(0|eu)!==eu)throw Error("invalid return value from JS function (expected integer)");return eT.api_checknelems(e,eu),ze(e,el,e.top-eu,eu),!0}case e_:{let C,ei=et.value.p,el=e.top-n-1,eu=ei.maxstacksize;if(le(e,eu),ei.is_vararg)C=w(e,ei,el);else{for(;el<ei.numparams;el++)e.stack[e.top++]=new eU.TValue(eg,null);C=n+1}let ec=eM.luaE_extendCI(e);return ec.funcOff=n,ec.nresults=R,ec.func=et,ec.l_base=C,ec.top=C+eu,Ue(e,ec.top),ec.l_code=ei.code,ec.l_savedpc=0,ec.callstatus=eM.CIST_LUA,e.hookmask&eo&&te(e,ec),!1}default:return le(e,1),S(e,n,et),Te(e,n,R)}},ze=function(e,n,R,C){let ei=n.nresults;e.hookmask&(eu|el)&&(e.hookmask&eu&&ge(e,et,-1),e.oldpc=n.previous.l_savedpc);let eo=n.funcOff;return e.ci=n.previous,e.ci.next=null,g(e,R,eo,C,ei)},g=function(e,n,R,C,et){switch(et){case 0:break;case 1:0===C?e.stack[R].setnilvalue():eU.setobjs2s(e,R,n);break;case ef:for(let et=0;et<C;et++)eU.setobjs2s(e,R+et,n+et);for(let n=e.top;n>=R+C;n--)delete e.stack[n];return e.top=R+C,!1;default:{let ei;if(et<=C)for(ei=0;ei<et;ei++)eU.setobjs2s(e,R+ei,n+ei);else{for(ei=0;ei<C;ei++)eU.setobjs2s(e,R+ei,n+ei);for(;ei<et;ei++)R+ei>=e.top?e.stack[R+ei]=new eU.TValue(eg,null):e.stack[R+ei].setnilvalue()}}}let ei=R+et;for(let n=e.top;n>=ei;n--)delete e.stack[n];return e.top=ei,!0},ge=function(e,n,R){let C=e.hook;if(C&&e.allowhook){let et=e.ci,ei=e.top,eo=et.top,el=new eL;el.event=n,el.currentline=R,el.i_ci=et,le(e,ec),et.top=e.top+ec,eN(et.top<=e.stack_last),e.allowhook=0,et.callstatus|=eM.CIST_HOOKED,C(e,el),eN(!e.allowhook),e.allowhook=1,et.top=eo,Ue(e,ei),et.callstatus&=~eM.CIST_HOOKED}},te=function(e,n){let R=C;n.l_savedpc++,n.previous.callstatus&eM.CIST_LUA&&n.previous.l_code[n.previous.l_savedpc-1].opcode==eR.OpCodesI.OP_TAILCALL&&(n.callstatus|=eM.CIST_TAIL,R=ei),ge(e,R,-1),n.l_savedpc--},w=function(e,n,R){let C,et=n.numparams,ei=e.top-R,eo=e.top;for(C=0;C<et&&C<R;C++)eU.pushobj2s(e,e.stack[ei+C]),e.stack[ei+C].setnilvalue();for(;C<et;C++)e.stack[e.top++]=new eU.TValue(eg,null);return eo},S=function(e,n,R){let C=eD.luaT_gettmbyobj(e,R,eD.TMS.TM_CALL);C.ttisfunction(C)||eO.luaG_typeerror(e,R,ew("call",!0)),eU.pushobj2s(e,e.stack[e.top-1]);for(let R=e.top-2;R>n;R--)eU.setobjs2s(e,R,R-1);eU.setobj2s(e,n,C)},v=function(e,n,R){++e.nCcalls>=eI&&(e.nCcalls===eI?eO.luaG_runerror(e,ew("JS stack overflow",!0)):e.nCcalls>=eI+(eI>>3)&&q(e,eb)),Te(e,n,R)||eG.luaV_execute(e),e.nCcalls--},q=function(e,n){if(e.errorJmp)throw e.errorJmp.status=n,e.errorJmp;{let R=e.l_G;if(e.status=n,!R.mainthread.errorJmp){let C=R.panic;throw C&&(Xe(e,n,e.top),e.ci.top<e.top&&(e.ci.top=e.top),C(e)),Error(`Aborted ${n}`)}R.mainthread.stack[R.mainthread.top++]=e.stack[e.top-1],q(R.mainthread,n)}},oe=function(e,n,R){let C=e.nCcalls,et={status:ek,previous:e.errorJmp};e.errorJmp=et;try{n(e,R)}catch(n){if(et.status===ek){let R=e.l_G.atnativeerror;if(R)try{if(et.status=ek,eT.lua_pushcfunction(e,R),eT.lua_pushlightuserdata(e,n),Et(e,e.top-2,1),0!==e.errfunc){let n=e.errfunc;eU.pushobj2s(e,e.stack[e.top-1]),eU.setobjs2s(e,e.top-2,n),Et(e,e.top-2,1)}et.status=ey}catch{et.status===ek&&(et.status=-1)}else et.status=-1}}return e.errorJmp=et.previous,e.nCcalls=C,et.status},O=function(e,n){let R=e.ci;eN(null!==R.c_k&&0===e.nny),eN(R.callstatus&eM.CIST_YPCALL||n===eA),R.callstatus&eM.CIST_YPCALL&&(R.callstatus&=~eM.CIST_YPCALL,e.errfunc=R.c_old_errfunc),R.nresults===ef&&e.ci.top<e.top&&(e.ci.top=e.top);let C=(0,R.c_k)(e,n,R.c_ctx);eT.api_checknelems(e,C),ze(e,R,e.top-C,C)},ee=function(e,n){for(null!==n&&O(e,n);e.ci!==e.base_ci;)e.ci.callstatus&eM.CIST_LUA?(eG.luaV_finishOp(e),eG.luaV_execute(e)):O(e,eA)},ce=function(e,n){let R=function(e){for(let n=e.ci;null!==n;n=n.previous)if(n.callstatus&eM.CIST_YPCALL)return n;return null}(e);if(null===R)return 0;let C=R.extra;return eE.luaF_close(e,C),Xe(e,n,C),e.ci=R,e.allowhook=R.callstatus&eM.CIST_OAH,e.nny=0,Pe(e),e.errfunc=R.c_old_errfunc,1},Re=function(e,n,R){let C=eP(e,n);if(0===R)eU.pushsvalue2s(e,C),eS(e,e.top<=e.ci.top,"stack overflow");else{for(let n=1;n<R;n++)delete e.stack[--e.top];eU.setsvalue2s(e,e.top-1,C)}return ey},Ke=function(e,n){let R=e.top-n,C=e.ci;e.status===ek?Te(e,R-1,ef)||eG.luaV_execute(e):(eN(e.status===eA),e.status=ek,C.funcOff=C.extra,C.func=e.stack[C.funcOff],C.callstatus&eM.CIST_LUA?eG.luaV_execute(e):(null!==C.c_k&&(n=C.c_k(e,eA,C.c_ctx),eT.api_checknelems(e,n),R=e.top-n),ze(e,C,R,n)),ee(e,null))},nt=function(e,n,R,C){let et=e.ci;return eT.api_checknelems(e,n),e.nny>0&&(e!==e.l_G.mainthread?eO.luaG_runerror(e,ew("attempt to yield across a JS-call boundary",!0)):eO.luaG_runerror(e,ew("attempt to yield from outside a coroutine",!0))),e.status=eA,et.extra=et.funcOff,et.callstatus&eM.CIST_LUA?eS(e,null===C,"hooks cannot continue after yielding"):(et.c_k=C,null!==C&&(et.c_ctx=R),et.funcOff=e.top-n-1,et.func=e.stack[et.funcOff],q(e,eA)),eN(et.callstatus&eM.CIST_HOOKED),0},dt=function(e,n,R,C,et){let ei=e.ci,eo=e.allowhook,el=e.nny,eu=e.errfunc;e.errfunc=et;let ec=oe(e,n,R);return ec!==ek&&(eE.luaF_close(e,C),Xe(e,ec,C),e.ci=ei,e.allowhook=eo,e.nny=el,Pe(e)),e.errfunc=eu,ec},Et=function(e,n,R){e.nny++,v(e,n,R),e.nny--},St=function(e,n,R){n&&-1===ex(n,R[0])&&(eU.luaO_pushfstring(e,ew("attempt to load a %s chunk (mode is '%s')"),R,n),q(e,ev))},Nt=function(e,n){let R,C=n.z.zgetc();C===eh[0]?(St(e,n.mode,ew("binary",!0)),R=eK.luaU_undump(e,n.z,n.name)):(St(e,n.mode,ew("text",!0)),R=eC.luaY_parser(e,n.z,n.buff,n.dyd,n.name,C)),eN(R.nupvalues===R.p.upvalues.length),eE.luaF_initupvals(e,R)};e.exports.adjust_top=Ue,e.exports.luaD_call=v,e.exports.luaD_callnoyield=Et,e.exports.luaD_checkstack=le,e.exports.luaD_growstack=ae,e.exports.luaD_hook=ge,e.exports.luaD_inctop=function(e){le(e,1),e.stack[e.top++]=new eU.TValue(eg,null)},e.exports.luaD_pcall=dt,e.exports.luaD_poscall=ze,e.exports.luaD_precall=Te,e.exports.luaD_protectedparser=function(e,n,R,C){let et=new class{constructor(e,n,R){this.z=e,this.buff=new eV,this.dyd=new eC.Dyndata,this.mode=R,this.name=n}}(n,R,C);e.nny++;let ei=dt(e,Nt,et,e.top,e.errfunc);return e.nny--,ei},e.exports.luaD_rawrunprotected=oe,e.exports.luaD_reallocstack=Ze,e.exports.luaD_throw=q,e.exports.lua_isyieldable=function(e){return 0===e.nny},e.exports.lua_resume=function(e,n,R){let C=e.nny;if(e.status===ek){if(e.ci!==e.base_ci)return Re(e,"cannot resume non-suspended coroutine",R)}else if(e.status!==eA)return Re(e,"cannot resume dead coroutine",R);if(e.nCcalls=n?n.nCcalls+1:1,e.nCcalls>=eI)return Re(e,"JS stack overflow",R);e.nny=0,eT.api_checknelems(e,e.status===ek?R+1:R);let et=oe(e,Ke,R);if(-1===et)et=ey;else{for(;et>eA&&ce(e,et);)et=oe(e,ee,et);et>eA?(e.status=et,Xe(e,et,e.top),e.ci.top=e.top):eN(et===e.status)}return e.nny=C,e.nCcalls--,eN(e.nCcalls===(n?n.nCcalls:0)),et},e.exports.lua_yield=function(e,n){nt(e,n,0,null)},e.exports.lua_yieldk=nt},function(e,n,R){let{constant_types:{LUA_TBOOLEAN:C,LUA_TCCL:et,LUA_TLCF:ei,LUA_TLCL:eo,LUA_TLIGHTUSERDATA:el,LUA_TLNGSTR:eu,LUA_TNIL:ec,LUA_TNUMFLT:ef,LUA_TNUMINT:eh,LUA_TSHRSTR:ep,LUA_TTABLE:ed,LUA_TTHREAD:e_,LUA_TUSERDATA:eg},to_luastring:em}=R(1),{lua_assert:eb}=R(4),ey=R(11),ev=R(6),{luaS_hashlongstr:ek,TString:eA}=R(10),eL=R(12),ex=new WeakMap,X=function(e){let n=ex.get(e);return n||(n={},ex.set(e,n)),n},K=function(e,n){switch(n.type){case ec:return ey.luaG_runerror(e,em("table index is nil",!0));case ef:if(isNaN(n.value))return ey.luaG_runerror(e,em("table index is NaN",!0));case eh:case C:case ed:case eo:case ei:case et:case eg:case e_:return n.value;case ep:case eu:return ek(n.tsvalue());case el:{let R=n.value;switch(typeof R){case"string":return"*"+R;case"number":return"#"+R;case"boolean":return R?"?true":"?false";case"function":return X(R);case"object":if(R instanceof eL.lua_State&&R.l_G===e.l_G||R instanceof Q||R instanceof ev.Udata||R instanceof ev.LClosure||R instanceof ev.CClosure)return X(R);default:return R}}default:throw Error("unknown key type: "+n.type)}};let Q=class Q{constructor(e){this.id=e.l_G.id_counter++,this.strong=new Map,this.dead_strong=new Map,this.dead_weak=void 0,this.f=void 0,this.l=void 0,this.metatable=null,this.flags=-1}};let he=function(e,n,R,C){e.dead_strong.clear(),e.dead_weak=void 0;let et=null,ei={key:R,value:C,p:et=e.l,n:void 0};e.f||(e.f=ei),et&&(et.n=ei),e.strong.set(n,ei),e.l=ei},F=function(e,n){let R=e.strong.get(n);if(R){R.key.setdeadvalue(),R.value=void 0;let C=R.n,et=R.p;R.p=void 0,et&&(et.n=C),C&&(C.p=et),e.f===R&&(e.f=C),e.l===R&&(e.l=et),e.strong.delete(n),("object"==typeof n?null!==n:"function"==typeof n)?(e.dead_weak||(e.dead_weak=new WeakMap),e.dead_weak.set(n,R)):e.dead_strong.set(n,R)}},ie=function(e,n){let R=e.strong.get(n);return R?R.value:ev.luaO_nilobject},y=function(e,n){return eb("number"==typeof n&&(0|n)===n),ie(e,n)};e.exports.invalidateTMcache=function(e){e.flags=0},e.exports.luaH_get=function(e,n,R){return eb(R instanceof ev.TValue),R.ttisnil()||R.ttisfloat()&&isNaN(R.value)?ev.luaO_nilobject:ie(n,K(e,R))},e.exports.luaH_getint=y,e.exports.luaH_getn=function(e){let n=0,R=e.strong.size+1;for(;R-n>1;){let C=Math.floor((n+R)/2);y(e,C).ttisnil()?R=C:n=C}return n},e.exports.luaH_getstr=function(e,n){return eb(n instanceof eA),ie(e,ek(n))},e.exports.luaH_setfrom=function(e,n,R,C){eb(R instanceof ev.TValue);let et=K(e,R);if(C.ttisnil())return void F(n,et);let ei=n.strong.get(et);if(ei)ei.value.setfrom(C);else{let e=R.value;he(n,et,R.ttisfloat()&&(0|e)===e?new ev.TValue(eh,e):new ev.TValue(R.type,e),new ev.TValue(C.type,C.value))}},e.exports.luaH_setint=function(e,n,R){if(eb("number"==typeof n&&(0|n)===n&&R instanceof ev.TValue),R.ttisnil())return void F(e,n);let C=e.strong.get(n);if(C)C.value.setfrom(R);else{let C=new ev.TValue(eh,n);he(e,n,C,new ev.TValue(R.type,R.value))}},e.exports.luaH_new=function(e){return new Q(e)},e.exports.luaH_next=function(e,n,R){let C,et=e.stack[R];if(et.type===ec){if(!(C=n.f))return!1}else{let R=K(e,et);if(C=n.strong.get(R)){if(!(C=C.n))return!1}else{if(!(C=n.dead_weak&&n.dead_weak.get(R)||n.dead_strong.get(R)))return ey.luaG_runerror(e,em("invalid key to 'next'"));do if(!(C=C.n))return!1;while(C.key.ttisdeadkey())}}return ev.setobj2s(e,R,C.key),ev.setobj2s(e,R+1,C.value),!0},e.exports.Table=Q},function(e,n,R){let{is_luastring:C,luastring_eq:et,luastring_from:ei,to_luastring:eo}=R(1),{lua_assert:el}=R(4);let u=class u{constructor(e,n){this.hash=null,this.realstring=n}getstr(){return this.realstring}tsslen(){return this.realstring.length}};let h=function(e){el(C(e));let n=e.length,R="|";for(let C=0;C<n;C++)R+=e[C].toString(16);return R},A=function(e,n){return el(n instanceof Uint8Array),new u(e,n)};e.exports.luaS_eqlngstr=function(e,n){return el(e instanceof u),el(n instanceof u),e==n||et(e.realstring,n.realstring)},e.exports.luaS_hash=h,e.exports.luaS_hashlongstr=function(e){return el(e instanceof u),null===e.hash&&(e.hash=h(e.getstr())),e.hash},e.exports.luaS_bless=A,e.exports.luaS_new=function(e,n){return A(e,ei(n))},e.exports.luaS_newliteral=function(e,n){return A(e,eo(n))},e.exports.TString=u},function(e,n,R){let{LUA_HOOKCOUNT:C,LUA_HOOKLINE:et,LUA_MASKCOUNT:ei,LUA_MASKLINE:eo,constant_types:{LUA_TBOOLEAN:el,LUA_TNIL:eu,LUA_TTABLE:ec},thread_status:{LUA_ERRRUN:ef,LUA_YIELD:eh},from_userstring:ep,luastring_eq:ed,luastring_indexOf:e_,to_luastring:eg}=R(1),{api_check:em,lua_assert:eb}=R(4),{LUA_IDSIZE:ey}=R(3),ev=R(18),ek=R(8),eA=R(13),eL=R(20),ex=R(6),ew=R(16),eT=R(12),eO=R(9),eE=R(14),eS=R(15),ie=function(e){return eb(e.callstatus&eT.CIST_LUA),e.l_savedpc-1},y=function(e){return 0!==e.func.value.p.lineinfo.length?e.func.value.p.lineinfo[ie(e)]:-1},Y=function(e){if(e.status===eh){let n=e.ci,R=n.funcOff;n.func=e.stack[n.extra],n.funcOff=n.extra,n.extra=R}},de=function(e,n){eb(n<e.upvalues.length);let R=e.upvalues[n].name;return null===R?eg("?",!0):R.getstr()},_e=function(e,n,R){let C,et=null;if(n.callstatus&eT.CIST_LUA){if(R<0){var ei;let e;return ei=-R,e=n.func.value.p.numparams,ei>=n.l_base-n.funcOff-e?null:{pos:n.funcOff+e+ei,name:eg("(*vararg)",!0)}}C=n.l_base,et=eA.luaF_getlocalname(n.func.value.p,R,ie(n))}else C=n.funcOff+1;if(null===et){if(!((n===e.ci?e.top:n.next.funcOff)-C>=R&&R>0))return null;et=eg("(*temporary)",!0)}return{pos:C+(R-1),name:et}},me=function(e,n){if(null===n||n instanceof ex.CClosure)e.source=eg("=[JS]",!0),e.linedefined=-1,e.lastlinedefined=-1,e.what=eg("J",!0);else{let R=n.p;e.source=R.source?R.source.getstr():eg("=?",!0),e.linedefined=R.linedefined,e.lastlinedefined=R.lastlinedefined,e.what=0===e.linedefined?eg("main",!0):eg("Lua",!0)}e.short_src=ex.luaO_chunkid(e.source,ey)},ve=function(e,n){let R={name:null,funcname:null};return null===n?null:n.callstatus&eT.CIST_FIN?(R.name=eg("__gc",!0),R.funcname=eg("metamethod",!0),R):!(n.callstatus&eT.CIST_TAIL)&&n.previous.callstatus&eT.CIST_LUA?ye(e,n.previous):null},G=function(e,n,R){let C={name:null,funcname:null};if(ew.ISK(R)){let n=e.k[ew.INDEXK(R)];if(n.ttisstring())return C.name=n.svalue(),C}else{let C=B(e,n,R);if(C&&99===C.funcname[0])return C}return C.name=eg("?",!0),C},I=function(e,n){return e<n?-1:e},B=function(e,n,R){let C={name:eA.luaF_getlocalname(e,R+1,n),funcname:null};if(C.name)return C.funcname=eg("local",!0),C;let et=function(e,n,R){let C=-1,et=0,ei=ew.OpCodesI;for(let eo=0;eo<n;eo++){let el=e.code[eo],eu=el.A;switch(el.opcode){case ei.OP_LOADNIL:{let e=el.B;eu<=R&&R<=eu+e&&(C=I(eo,et));break}case ei.OP_TFORCALL:R>=eu+2&&(C=I(eo,et));break;case ei.OP_CALL:case ei.OP_TAILCALL:R>=eu&&(C=I(eo,et));break;case ei.OP_JMP:{let e=eo+1+el.sBx;eo<e&&e<=n&&e>et&&(et=e);break}default:ew.testAMode(el.opcode)&&R===eu&&(C=I(eo,et))}}return C}(e,n,R),ei=ew.OpCodesI;if(-1!==et){let n=e.code[et];switch(n.opcode){case ei.OP_MOVE:{let R=n.B;if(R<n.A)return B(e,et,R);break}case ei.OP_GETTABUP:case ei.OP_GETTABLE:{let R=n.C,eo=n.B,el=n.opcode===ei.OP_GETTABLE?eA.luaF_getlocalname(e,eo+1,et):de(e,eo);return C.name=G(e,et,R).name,C.funcname=el&&ed(el,eL.LUA_ENV)?eg("global",!0):eg("field",!0),C}case ei.OP_GETUPVAL:return C.name=de(e,n.B),C.funcname=eg("upvalue",!0),C;case ei.OP_LOADK:case ei.OP_LOADKX:{let R=n.opcode===ei.OP_LOADK?n.Bx:e.code[et+1].Ax;if(e.k[R].ttisstring())return C.name=e.k[R].svalue(),C.funcname=eg("constant",!0),C;break}case ei.OP_SELF:{let R=n.C;return C.name=G(e,et,R).name,C.funcname=eg("method",!0),C}}}return null},ye=function(e,n){let R={name:null,funcname:null},C=0,et=n.func.value.p,ei=ie(n),eo=et.code[ei],el=ew.OpCodesI;if(n.callstatus&eT.CIST_HOOKED)return R.name=eg("?",!0),R.funcname=eg("hook",!0),R;switch(eo.opcode){case el.OP_CALL:case el.OP_TAILCALL:return B(et,ei,eo.A);case el.OP_TFORCALL:return R.name=eg("for iterator",!0),R.funcname=eg("for iterator",!0),R;case el.OP_SELF:case el.OP_GETTABUP:case el.OP_GETTABLE:C=eE.TMS.TM_INDEX;break;case el.OP_SETTABUP:case el.OP_SETTABLE:C=eE.TMS.TM_NEWINDEX;break;case el.OP_ADD:C=eE.TMS.TM_ADD;break;case el.OP_SUB:C=eE.TMS.TM_SUB;break;case el.OP_MUL:C=eE.TMS.TM_MUL;break;case el.OP_MOD:C=eE.TMS.TM_MOD;break;case el.OP_POW:C=eE.TMS.TM_POW;break;case el.OP_DIV:C=eE.TMS.TM_DIV;break;case el.OP_IDIV:C=eE.TMS.TM_IDIV;break;case el.OP_BAND:C=eE.TMS.TM_BAND;break;case el.OP_BOR:C=eE.TMS.TM_BOR;break;case el.OP_BXOR:C=eE.TMS.TM_BXOR;break;case el.OP_SHL:C=eE.TMS.TM_SHL;break;case el.OP_SHR:C=eE.TMS.TM_SHR;break;case el.OP_UNM:C=eE.TMS.TM_UNM;break;case el.OP_BNOT:C=eE.TMS.TM_BNOT;break;case el.OP_LEN:C=eE.TMS.TM_LEN;break;case el.OP_CONCAT:C=eE.TMS.TM_CONCAT;break;case el.OP_EQ:C=eE.TMS.TM_EQ;break;case el.OP_LT:C=eE.TMS.TM_LT;break;case el.OP_LE:C=eE.TMS.TM_LE;break;default:return null}return R.name=e.l_G.tmname[C].getstr(),R.funcname=eg("metamethod",!0),R},be=function(e,n){let R=e.ci,C=null;if(R.callstatus&eT.CIST_LUA){C=function(e,n,R){let C=n.func.value;for(let e=0;e<C.nupvalues;e++)if(C.upvals[e]===R)return{name:de(C.p,e),funcname:eg("upvalue",!0)};return null}(0,R,n);let et=function(e,n,R){for(let C=n.l_base;C<n.top;C++)if(e.stack[C]===R)return C;return!1}(e,R,n);!C&&et&&(C=B(R.func.value.p,ie(R),et-R.l_base))}return C?ex.luaO_pushfstring(e,eg(" (%s '%s')",!0),C.funcname,C.name):eg("",!0)},Ue=function(e,n,R){let C=eE.luaT_objtypename(e,n);st(e,eg("attempt to %s a %s value%s",!0),R,C,be(e,n))},Xe=function(e,n,R,C){let et;return et=R?ex.luaO_chunkid(R.getstr(),ey):eg("?",!0),ex.luaO_pushfstring(e,eg("%s:%d: %s",!0),et,C,n)},st=function(e,n,...R){let C=e.ci,et=ex.luaO_pushvfstring(e,n,R);C.callstatus&eT.CIST_LUA&&Xe(e,et,C.func.value.p.source,y(C)),Ze(e)},Ze=function(e){if(0!==e.errfunc){let n=e.errfunc;ex.pushobj2s(e,e.stack[e.top-1]),ex.setobjs2s(e,e.top-2,n),ek.luaD_callnoyield(e,e.top-2,1)}ek.luaD_throw(e,ef)};e.exports.luaG_addinfo=Xe,e.exports.luaG_concaterror=function(e,n,R){(n.ttisstring()||eS.cvt2str(n))&&(n=R),Ue(e,n,eg("concatenate",!0))},e.exports.luaG_errormsg=Ze,e.exports.luaG_opinterror=function(e,n,R,C){!1===eS.tonumber(n)&&(R=n),Ue(e,R,C)},e.exports.luaG_ordererror=function(e,n,R){let C=eE.luaT_objtypename(e,n),et=eE.luaT_objtypename(e,R);ed(C,et)?st(e,eg("attempt to compare two %s values",!0),C):st(e,eg("attempt to compare %s with %s",!0),C,et)},e.exports.luaG_runerror=st,e.exports.luaG_tointerror=function(e,n,R){!1===eS.tointeger(n)&&(R=n),st(e,eg("number%s has no integer representation",!0),be(e,R))},e.exports.luaG_traceexec=function(e){let n=e.ci,R=e.hookmask,el=0==--e.hookcount&&R&ei;if(el)e.hookcount=e.basehookcount;else if(!(R&eo))return;if(n.callstatus&eT.CIST_HOOKYIELD)n.callstatus&=~eT.CIST_HOOKYIELD;else{if(el&&ek.luaD_hook(e,C,-1),R&eo){let R=n.func.value.p,C=n.l_savedpc-1,ei=0!==R.lineinfo.length?R.lineinfo[C]:-1;(0===C||n.l_savedpc<=e.oldpc||ei!==(0!==R.lineinfo.length?R.lineinfo[e.oldpc-1]:-1))&&ek.luaD_hook(e,et,ei)}e.oldpc=n.l_savedpc,e.status===eh&&(el&&(e.hookcount=1),n.l_savedpc--,n.callstatus|=eT.CIST_HOOKYIELD,n.funcOff=e.top-1,n.func=e.stack[n.funcOff],ek.luaD_throw(e,eh))}},e.exports.luaG_typeerror=Ue,e.exports.lua_gethook=function(e){return e.hook},e.exports.lua_gethookcount=function(e){return e.basehookcount},e.exports.lua_gethookmask=function(e){return e.hookmask},e.exports.lua_getinfo=function(e,n,R){let C,et,ei,eo;return n=ep(n),Y(e),62===n[0]?(ei=null,eo=e.stack[e.top-1],em(e,eo.ttisfunction(),"function expected"),n=n.subarray(1),e.top--):(eo=(ei=R.i_ci).func,eb(ei.func.ttisfunction())),C=function(e,n,R,C,et){let ei=1;for(;n.length>0;n=n.subarray(1))switch(n[0]){case 83:me(R,C);break;case 108:R.currentline=et&&et.callstatus&eT.CIST_LUA?y(et):-1;break;case 117:R.nups=null===C?0:C.nupvalues,null===C||C instanceof ex.CClosure?(R.isvararg=!0,R.nparams=0):(R.isvararg=C.p.is_vararg,R.nparams=C.p.numparams);break;case 116:R.istailcall=et?et.callstatus&eT.CIST_TAIL:0;break;case 110:{let n=ve(e,et);null===n?(R.namewhat=eg("",!0),R.name=null):(R.namewhat=n.funcname,R.name=n.name);break}case 76:case 102:break;default:ei=0}return ei}(e,n,R,et=eo.ttisclosure()?eo.value:null,ei),e_(n,102)>=0&&(ex.pushobj2s(e,eo),em(e,e.top<=e.ci.top,"stack overflow")),Y(e),e_(n,76)>=0&&function(e,n){if(null===n||n instanceof ex.CClosure)e.stack[e.top]=new ex.TValue(eu,null),ev.api_incr_top(e);else{let R=n.p.lineinfo,C=eO.luaH_new(e);e.stack[e.top]=new ex.TValue(ec,C),ev.api_incr_top(e);let et=new ex.TValue(el,!0);for(let e=0;e<R.length;e++)eO.luaH_setint(C,R[e],et)}}(e,et),C},e.exports.lua_getlocal=function(e,n,R){let C;if(Y(e),null===n)C=e.stack[e.top-1].ttisLclosure()?eA.luaF_getlocalname(e.stack[e.top-1].value.p,R,0):null;else{let et=_e(e,n.i_ci,R);et?(C=et.name,ex.pushobj2s(e,e.stack[et.pos]),em(e,e.top<=e.ci.top,"stack overflow")):C=null}return Y(e),C},e.exports.lua_getstack=function(e,n,R){let C,et;if(n<0)return 0;for(C=e.ci;n>0&&C!==e.base_ci;C=C.previous)n--;return 0===n&&C!==e.base_ci?(et=1,R.i_ci=C):et=0,et},e.exports.lua_sethook=function(e,n,R,C){null!==n&&0!==R||(R=0,n=null),e.ci.callstatus&eT.CIST_LUA&&(e.oldpc=e.ci.l_savedpc),e.hook=n,e.basehookcount=C,e.hookcount=e.basehookcount,e.hookmask=R},e.exports.lua_setlocal=function(e,n,R){let C;Y(e);let et=_e(e,n.i_ci,R);return et?(C=et.name,ex.setobjs2s(e,et.pos,e.top-1),delete e.stack[--e.top]):C=null,Y(e),C}},function(e,n,R){let{LUA_MINSTACK:C,LUA_RIDX_GLOBALS:et,LUA_RIDX_MAINTHREAD:ei,constant_types:{LUA_NUMTAGS:eo,LUA_TNIL:el,LUA_TTABLE:eu,LUA_TTHREAD:ec},thread_status:{LUA_OK:ef}}=R(1),eh=R(6),ep=R(8),ed=R(18),e_=R(9),eg=R(14),em=2*C;let b=class b{constructor(){this.func=null,this.funcOff=NaN,this.top=NaN,this.previous=null,this.next=null,this.l_base=NaN,this.l_code=null,this.l_savedpc=NaN,this.c_k=null,this.c_old_errfunc=null,this.c_ctx=null,this.nresults=NaN,this.callstatus=NaN}};let N=class N{constructor(e){this.id=e.id_counter++,this.base_ci=new b,this.top=NaN,this.stack_last=NaN,this.oldpc=NaN,this.l_G=e,this.stack=null,this.ci=null,this.errorJmp=null,this.nCcalls=0,this.hook=null,this.hookmask=0,this.basehookcount=0,this.allowhook=1,this.hookcount=this.basehookcount,this.nny=1,this.status=ef,this.errfunc=0}};let M=function(e){e.ci.next=null},H=function(e,n){e.stack=Array(em),e.top=0,e.stack_last=em-5;let R=e.base_ci;R.next=R.previous=null,R.callstatus=0,R.funcOff=e.top,R.func=e.stack[e.top],e.stack[e.top++]=new eh.TValue(el,null),R.top=e.top+C,e.ci=R},z=function(e){e.ci=e.base_ci,M(e),e.stack=null},W=function(e){let n,R=e.l_G;H(e),n=e_.luaH_new(e),R.l_registry.sethvalue(n),e_.luaH_setint(n,ei,new eh.TValue(ec,e)),e_.luaH_setint(n,et,new eh.TValue(eu,e_.luaH_new(e))),eg.luaT_init(e),R.version=ed.lua_version(null)};e.exports.lua_State=N,e.exports.CallInfo=b,e.exports.CIST_OAH=1,e.exports.CIST_LUA=2,e.exports.CIST_HOOKED=4,e.exports.CIST_FRESH=8,e.exports.CIST_YPCALL=16,e.exports.CIST_TAIL=32,e.exports.CIST_HOOKYIELD=64,e.exports.CIST_LEQ=128,e.exports.CIST_FIN=256,e.exports.EXTRA_STACK=5,e.exports.lua_close=function(e){z(e=e.l_G.mainthread)},e.exports.lua_newstate=function(){let e=new class{constructor(){this.id_counter=1,this.ids=new WeakMap,this.mainthread=null,this.l_registry=new eh.TValue(el,null),this.panic=null,this.atnativeerror=null,this.version=null,this.tmname=Array(eg.TMS.TM_N),this.mt=Array(eo)}},n=new N(e);return e.mainthread=n,ep.luaD_rawrunprotected(n,W,null)!==ef&&(n=null),n},e.exports.lua_newthread=function(e){let n=e.l_G,R=new N(n);return e.stack[e.top]=new eh.TValue(ec,R),ed.api_incr_top(e),R.hookmask=e.hookmask,R.basehookcount=e.basehookcount,R.hook=e.hook,R.hookcount=R.basehookcount,H(R),R},e.exports.luaE_extendCI=function(e){let n=new b;return e.ci.next=n,n.previous=e.ci,n.next=null,e.ci=n,n},e.exports.luaE_freeCI=M,e.exports.luaE_freethread=function(e,n){z(n)}},function(e,n,R){let{constant_types:{LUA_TNIL:C}}=R(1),et=R(6);e.exports.MAXUPVAL=255,e.exports.Proto=class{constructor(e){this.id=e.l_G.id_counter++,this.k=[],this.p=[],this.code=[],this.cache=null,this.lineinfo=[],this.upvalues=[],this.numparams=0,this.is_vararg=!1,this.maxstacksize=0,this.locvars=[],this.linedefined=0,this.lastlinedefined=0,this.source=null}},e.exports.luaF_findupval=function(e,n){return e.stack[n]},e.exports.luaF_close=function(e,n){for(let R=n;R<e.top;R++){let n=e.stack[R];e.stack[R]=new et.TValue(n.type,n.value)}},e.exports.luaF_getlocalname=function(e,n,R){for(let C=0;C<e.locvars.length&&e.locvars[C].startpc<=R;C++)if(R<e.locvars[C].endpc&&0==--n)return e.locvars[C].varname.getstr();return null},e.exports.luaF_initupvals=function(e,n){for(let e=0;e<n.nupvalues;e++)n.upvals[e]=new et.TValue(C,null)},e.exports.luaF_newLclosure=function(e,n){return new et.LClosure(e,n)}},function(e,n,R){let{constant_types:{LUA_TTABLE:C,LUA_TUSERDATA:et},to_luastring:ei}=R(1),{lua_assert:eo}=R(4),el=R(6),eu=R(8),ec=R(12),{luaS_bless:ef,luaS_new:eh}=R(10),ep=R(9),ed=R(11),e_=R(15),eg=["no value","nil","boolean","userdata","number","string","table","function","userdata","thread","proto"].map(e=>ei(e)),m=function(e){return eg[e+1]},em={TM_INDEX:0,TM_NEWINDEX:1,TM_GC:2,TM_MODE:3,TM_LEN:4,TM_EQ:5,TM_ADD:6,TM_SUB:7,TM_MUL:8,TM_MOD:9,TM_POW:10,TM_DIV:11,TM_IDIV:12,TM_BAND:13,TM_BOR:14,TM_BXOR:15,TM_SHL:16,TM_SHR:17,TM_UNM:18,TM_BNOT:19,TM_LT:20,TM_LE:21,TM_CONCAT:22,TM_CALL:23,TM_N:24},eb=ei("__name",!0),M=function(e,n,R,C,et,ei){let eo=e.top;if(el.pushobj2s(e,n),el.pushobj2s(e,R),el.pushobj2s(e,C),ei||el.pushobj2s(e,et),e.ci.callstatus&ec.CIST_LUA?eu.luaD_call(e,eo,ei):eu.luaD_callnoyield(e,eo,ei),ei){let n=e.stack[e.top-1];delete e.stack[--e.top],et.setfrom(n)}},H=function(e,n,R,C,et){let ei=W(e,n,et);return ei.ttisnil()&&(ei=W(e,R,et)),!ei.ttisnil()&&(M(e,ei,n,R,C,1),!0)},z=function(e,n,R){let C=ep.luaH_getstr(e,R);return eo(n<=em.TM_EQ),C.ttisnil()?(e.flags|=1<<n,null):C},W=function(e,n,R){let ei;switch(n.ttnov()){case C:case et:ei=n.value.metatable;break;default:ei=e.l_G.mt[n.ttnov()]}return ei?ep.luaH_getstr(ei,e.l_G.tmname[R]):el.luaO_nilobject};e.exports.fasttm=function(e,n,R){return null===n||n.flags&1<<R?null:z(n,R,e.l_G.tmname[R])},e.exports.TMS=em,e.exports.luaT_callTM=M,e.exports.luaT_callbinTM=H,e.exports.luaT_trybinTM=function(e,n,R,C,et){if(!H(e,n,R,C,et))switch(et){case em.TM_CONCAT:return ed.luaG_concaterror(e,n,R);case em.TM_BAND:case em.TM_BOR:case em.TM_BXOR:case em.TM_SHL:case em.TM_SHR:case em.TM_BNOT:{let C=e_.tonumber(n),et=e_.tonumber(R);return!1!==C&&!1!==et?ed.luaG_tointerror(e,n,R):ed.luaG_opinterror(e,n,R,ei("perform bitwise operation on",!0))}default:return ed.luaG_opinterror(e,n,R,ei("perform arithmetic on",!0))}},e.exports.luaT_callorderTM=function(e,n,R,C){let et=new el.TValue;return H(e,n,R,et,C)?!et.l_isfalse():null},e.exports.luaT_gettm=z,e.exports.luaT_gettmbyobj=W,e.exports.luaT_init=function(e){e.l_G.tmname[em.TM_INDEX]=new eh(e,ei("__index",!0)),e.l_G.tmname[em.TM_NEWINDEX]=new eh(e,ei("__newindex",!0)),e.l_G.tmname[em.TM_GC]=new eh(e,ei("__gc",!0)),e.l_G.tmname[em.TM_MODE]=new eh(e,ei("__mode",!0)),e.l_G.tmname[em.TM_LEN]=new eh(e,ei("__len",!0)),e.l_G.tmname[em.TM_EQ]=new eh(e,ei("__eq",!0)),e.l_G.tmname[em.TM_ADD]=new eh(e,ei("__add",!0)),e.l_G.tmname[em.TM_SUB]=new eh(e,ei("__sub",!0)),e.l_G.tmname[em.TM_MUL]=new eh(e,ei("__mul",!0)),e.l_G.tmname[em.TM_MOD]=new eh(e,ei("__mod",!0)),e.l_G.tmname[em.TM_POW]=new eh(e,ei("__pow",!0)),e.l_G.tmname[em.TM_DIV]=new eh(e,ei("__div",!0)),e.l_G.tmname[em.TM_IDIV]=new eh(e,ei("__idiv",!0)),e.l_G.tmname[em.TM_BAND]=new eh(e,ei("__band",!0)),e.l_G.tmname[em.TM_BOR]=new eh(e,ei("__bor",!0)),e.l_G.tmname[em.TM_BXOR]=new eh(e,ei("__bxor",!0)),e.l_G.tmname[em.TM_SHL]=new eh(e,ei("__shl",!0)),e.l_G.tmname[em.TM_SHR]=new eh(e,ei("__shr",!0)),e.l_G.tmname[em.TM_UNM]=new eh(e,ei("__unm",!0)),e.l_G.tmname[em.TM_BNOT]=new eh(e,ei("__bnot",!0)),e.l_G.tmname[em.TM_LT]=new eh(e,ei("__lt",!0)),e.l_G.tmname[em.TM_LE]=new eh(e,ei("__le",!0)),e.l_G.tmname[em.TM_CONCAT]=new eh(e,ei("__concat",!0)),e.l_G.tmname[em.TM_CALL]=new eh(e,ei("__call",!0))},e.exports.luaT_objtypename=function(e,n){let R;if(n.ttistable()&&null!==(R=n.value.metatable)||n.ttisfulluserdata()&&null!==(R=n.value.metatable)){let n=ep.luaH_getstr(R,ef(e,eb));if(n.ttisstring())return n.svalue()}return m(n.ttnov())},e.exports.ttypename=m},function(e,n,R){let{LUA_MASKLINE:C,LUA_MASKCOUNT:et,LUA_MULTRET:ei,constant_types:{LUA_TBOOLEAN:eo,LUA_TLCF:el,LUA_TLIGHTUSERDATA:eu,LUA_TLNGSTR:ec,LUA_TNIL:ef,LUA_TNUMBER:eh,LUA_TNUMFLT:ep,LUA_TNUMINT:ed,LUA_TSHRSTR:e_,LUA_TTABLE:eg,LUA_TUSERDATA:em},to_luastring:eb}=R(1),{INDEXK:ey,ISK:ev,LFIELDS_PER_FLUSH:ek,OpCodesI:{OP_ADD:eA,OP_BAND:eL,OP_BNOT:ex,OP_BOR:ew,OP_BXOR:eT,OP_CALL:eO,OP_CLOSURE:eE,OP_CONCAT:eS,OP_DIV:eN,OP_EQ:eI,OP_EXTRAARG:eU,OP_FORLOOP:eR,OP_FORPREP:eC,OP_GETTABLE:eM,OP_GETTABUP:eP,OP_GETUPVAL:eD,OP_IDIV:eB,OP_JMP:eK,OP_LE:eG,OP_LEN:eV,OP_LOADBOOL:eF,OP_LOADK:ej,OP_LOADKX:ez,OP_LOADNIL:eH,OP_LT:e$,OP_MOD:eX,OP_MOVE:eq,OP_MUL:eW,OP_NEWTABLE:eZ,OP_NOT:eY,OP_POW:eJ,OP_RETURN:eQ,OP_SELF:e0,OP_SETLIST:e1,OP_SETTABLE:e2,OP_SETTABUP:e3,OP_SETUPVAL:e5,OP_SHL:e4,OP_SHR:e8,OP_SUB:e6,OP_TAILCALL:e9,OP_TEST:e7,OP_TESTSET:ts,OP_TFORCALL:to,OP_TFORLOOP:tl,OP_UNM:tu,OP_VARARG:tc}}=R(16),{LUA_MAXINTEGER:tf,LUA_MININTEGER:th,lua_numbertointeger:tp}=R(3),{lua_assert:td,luai_nummod:t_}=R(4),tg=R(6),tm=R(13),tb=R(12),{luaS_bless:ty,luaS_eqlngstr:tv,luaS_hashlongstr:tk}=R(10),tA=R(8),tL=R(14),tx=R(9),tw=R(11),c=function(e,n,R){return n+R.A},T=function(e,n,R){return n+R.B},p=function(e,n,R,C){return ev(C.B)?R[ey(C.B)]:e.stack[n+C.B]},x=function(e,n,R,C){return ev(C.C)?R[ey(C.C)]:e.stack[n+C.C]},$=function(e,n,R,C){let et=R.A;0!==et&&tm.luaF_close(e,n.l_base+et-1),n.l_savedpc+=R.sBx+C},U=function(e,n){$(e,n,n.l_code[n.l_savedpc],1)},pe=function(e,n,R){if(n.ttisnumber()&&R.ttisnumber())return V(n,R)?1:0;if(n.ttisstring()&&R.ttisstring())return 0>fe(n.tsvalue(),R.tsvalue())?1:0;{let C=tL.luaT_callorderTM(e,n,R,tL.TMS.TM_LT);return null===C&&tw.luaG_ordererror(e,n,R),C?1:0}},He=function(e,n,R){let C;return n.ttisnumber()&&R.ttisnumber()?xe(n,R)?1:0:n.ttisstring()&&R.ttisstring()?0>=fe(n.tsvalue(),R.tsvalue())?1:0:null!==(C=tL.luaT_callorderTM(e,n,R,tL.TMS.TM_LE))?C?1:0:(e.ci.callstatus|=tb.CIST_LEQ,C=tL.luaT_callorderTM(e,R,n,tL.TMS.TM_LT),e.ci.callstatus^=tb.CIST_LEQ,null===C&&tw.luaG_ordererror(e,n,R),C?0:1)},Qe=function(e,n,R){let C;if(n.ttype()!==R.ttype())return n.ttnov()!==R.ttnov()||n.ttnov()!==eh?0:n.value===R.value?1:0;switch(n.ttype()){case ef:return 1;case eo:return n.value==R.value?1:0;case eu:case ed:case ep:case el:return n.value===R.value?1:0;case e_:case ec:return tv(n.tsvalue(),R.tsvalue())?1:0;case em:case eg:if(n.value===R.value)return 1;if(null===e)return 0;null===(C=tL.fasttm(e,n.value.metatable,tL.TMS.TM_EQ))&&(C=tL.fasttm(e,R.value.metatable,tL.TMS.TM_EQ));break;default:return n.value===R.value?1:0}if(null===C)return 0;let et=new tg.TValue;return tL.luaT_callTM(e,C,n,R,et,1),et.l_isfalse()?0:1},kt=function(e,n){let R=!1,C=J(e,n<0?2:1);if(!1===C){let et=ke(e);if(!1===et)return!1;0<et?(C=tf,n<0&&(R=!0)):(C=th,n>=0&&(R=!0))}return{stopnow:R,ilimit:C}},J=function(e,n){if(e.ttisfloat()){let R=e.value,C=Math.floor(R);if(R!==C){if(0===n)return!1;n>1&&(C+=1)}return tp(C)}if(e.ttisinteger())return e.value;if(At(e)){let R=new tg.TValue;if(tg.luaO_str2num(e.svalue(),R)===e.vslen()+1)return J(R,n)}return!1},Z=function(e){return e.ttisinteger()?e.value:J(e,0)},ke=function(e){if(e.ttnov()===eh)return e.value;if(At(e)){let n=new tg.TValue;if(tg.luaO_str2num(e.svalue(),n)===e.vslen()+1)return n.value}return!1},V=function(e,n){return e.value<n.value},xe=function(e,n){return e.value<=n.value},fe=function(e,n){let R=tk(e),C=tk(n);return R===C?0:R<C?-1:1},Me=function(e,n,R){let C;switch(R.ttype()){case eg:{let et=R.value;if(null!==(C=tL.fasttm(e,et.metatable,tL.TMS.TM_LEN)))break;return void n.setivalue(tx.luaH_getn(et))}case e_:case ec:return void n.setivalue(R.vslen());default:(C=tL.luaT_gettmbyobj(e,R,tL.TMS.TM_LEN)).ttisnil()&&tw.luaG_typeerror(e,R,eb("get length of",!0))}tL.luaT_callTM(e,C,R,R,n,1)},tT=Math.imul||function(e,n){let R=65535&e,C=65535&n;return R*C+((e>>>16&65535)*C+R*(n>>>16&65535)<<16>>>0)|0},ct=function(e,n,R){return 0===R&&tw.luaG_runerror(e,eb("attempt to divide by zero")),0|Math.floor(n/R)},at=function(e,n,R){return 0===R&&tw.luaG_runerror(e,eb("attempt to perform 'n%%0'")),n-Math.floor(n/R)*R|0},_t=function(e,n){return n<0?n<=-32?0:e>>>-n:n>=32?0:e<<n},Bt=function(e,n,R,C){let et=e.cache;if(null!==et){let ei=e.upvalues,eo=ei.length;for(let e=0;e<eo;e++){let eo=ei[e].instack?R[C+ei[e].idx]:n[ei[e].idx];if(et.upvals[e]!==eo)return null}}return et},gt=function(e,n,R,C,et){let ei=n.upvalues.length,eo=n.upvalues,el=new tg.LClosure(e,ei);el.p=n,e.stack[et].setclLvalue(el);for(let n=0;n<ei;n++)eo[n].instack?el.upvals[n]=tm.luaF_findupval(e,C+eo[n].idx):el.upvals[n]=R[eo[n].idx];n.cache=el},Ot=function(e){return e.ttisnumber()},At=function(e){return e.ttisstring()},Ct=function(e,n){let R=e.stack[n];return!!R.ttisstring()||!!Ot(R)&&(tg.luaO_tostring(e,R),!0)},Mt=function(e){return e.ttisstring()&&0===e.vslen()},Zt=function(e,n,R,C){let et=0;do{let ei=e.stack[n-R],eo=ei.vslen(),el=ei.svalue();C.set(el,et),et+=eo}while(--R>0)},Dt=function(e,n){td(n>=2);do{let R=e.top,C=2;if((e.stack[R-2].ttisstring()||Ot(e.stack[R-2]))&&Ct(e,R-1)){if(Mt(e.stack[R-1]))Ct(e,R-2);else if(Mt(e.stack[R-2]))tg.setobjs2s(e,R-2,R-1);else{let et=e.stack[R-1].vslen();for(C=1;C<n&&Ct(e,R-C-1);C++)et+=e.stack[R-C-1].vslen();let ei=new Uint8Array(et);Zt(e,R,C,ei);let eo=ty(e,ei);tg.setsvalue2s(e,R-C,eo)}}else tL.luaT_trybinTM(e,e.stack[R-2],e.stack[R-1],e.stack[R-2],tL.TMS.TM_CONCAT);for(n-=C-1;e.top>R-(C-1);)delete e.stack[--e.top]}while(n>1)},qt=function(e,n,R,C){for(let et=0;et<2e3;et++){let et;if(n.ttistable()){let ei=tx.luaH_get(e,n.value,R);if(!ei.ttisnil())return void tg.setobj2s(e,C,ei);if(null===(et=tL.fasttm(e,n.value.metatable,tL.TMS.TM_INDEX)))return void e.stack[C].setnilvalue()}else(et=tL.luaT_gettmbyobj(e,n,tL.TMS.TM_INDEX)).ttisnil()&&tw.luaG_typeerror(e,n,eb("index",!0));if(et.ttisfunction())return void tL.luaT_callTM(e,et,n,R,e.stack[C],1);n=et}tw.luaG_runerror(e,eb("'__index' chain too long; possible loop",!0))},$t=function(e,n,R,C){for(let et=0;et<2e3;et++){let et;if(n.ttistable()){let ei=n.value;if(!tx.luaH_get(e,ei,R).ttisnil()||null===(et=tL.fasttm(e,ei.metatable,tL.TMS.TM_NEWINDEX)))return tx.luaH_setfrom(e,ei,R,C),void tx.invalidateTMcache(ei)}else(et=tL.luaT_gettmbyobj(e,n,tL.TMS.TM_NEWINDEX)).ttisnil()&&tw.luaG_typeerror(e,n,eb("index",!0));if(et.ttisfunction())return void tL.luaT_callTM(e,et,n,R,C,0);n=et}tw.luaG_runerror(e,eb("'__newindex' chain too long; possible loop",!0))};e.exports.cvt2str=Ot,e.exports.cvt2num=At,e.exports.luaV_gettable=qt,e.exports.luaV_concat=Dt,e.exports.luaV_div=ct,e.exports.luaV_equalobj=Qe,e.exports.luaV_execute=function(e){let n=e.ci;for(n.callstatus|=tb.CIST_FRESH;;){td(n===e.ci);let R=n.func.value,eo=R.p.k,el=n.l_base,eu=n.l_code[n.l_savedpc++];e.hookmask&(C|et)&&tw.luaG_traceexec(e);let ec=c(0,el,eu);switch(eu.opcode){case eq:tg.setobjs2s(e,ec,T(0,el,eu));break;case ej:{let n=eo[eu.Bx];tg.setobj2s(e,ec,n);break}case ez:{td(n.l_code[n.l_savedpc].opcode===eU);let R=eo[n.l_code[n.l_savedpc++].Ax];tg.setobj2s(e,ec,R);break}case eF:e.stack[ec].setbvalue(0!==eu.B),0!==eu.C&&n.l_savedpc++;break;case eH:for(let n=0;n<=eu.B;n++)e.stack[ec+n].setnilvalue();break;case eD:{let n=eu.B;tg.setobj2s(e,ec,R.upvals[n]);break}case eP:{let n=R.upvals[eu.B],C=x(e,el,eo,eu);qt(e,n,C,ec);break}case eM:{let n=e.stack[T(0,el,eu)],R=x(e,el,eo,eu);qt(e,n,R,ec);break}case e3:{let n=R.upvals[eu.A],C=p(e,el,eo,eu),et=x(e,el,eo,eu);$t(e,n,C,et);break}case e5:R.upvals[eu.B].setfrom(e.stack[ec]);break;case e2:{let n=e.stack[ec],R=p(e,el,eo,eu),C=x(e,el,eo,eu);$t(e,n,R,C);break}case eZ:e.stack[ec].sethvalue(tx.luaH_new(e));break;case e0:{let n=T(0,el,eu),R=x(e,el,eo,eu);tg.setobjs2s(e,ec+1,n),qt(e,e.stack[n],R,ec);break}case eA:{let n,R,C=p(e,el,eo,eu),et=x(e,el,eo,eu);C.ttisinteger()&&et.ttisinteger()?e.stack[ec].setivalue(C.value+et.value|0):!1!==(n=ke(C))&&!1!==(R=ke(et))?e.stack[ec].setfltvalue(n+R):tL.luaT_trybinTM(e,C,et,e.stack[ec],tL.TMS.TM_ADD);break}case e6:{let n,R,C=p(e,el,eo,eu),et=x(e,el,eo,eu);C.ttisinteger()&&et.ttisinteger()?e.stack[ec].setivalue(C.value-et.value|0):!1!==(n=ke(C))&&!1!==(R=ke(et))?e.stack[ec].setfltvalue(n-R):tL.luaT_trybinTM(e,C,et,e.stack[ec],tL.TMS.TM_SUB);break}case eW:{let n,R,C=p(e,el,eo,eu),et=x(e,el,eo,eu);C.ttisinteger()&&et.ttisinteger()?e.stack[ec].setivalue(tT(C.value,et.value)):!1!==(n=ke(C))&&!1!==(R=ke(et))?e.stack[ec].setfltvalue(n*R):tL.luaT_trybinTM(e,C,et,e.stack[ec],tL.TMS.TM_MUL);break}case eX:{let n,R,C=p(e,el,eo,eu),et=x(e,el,eo,eu);C.ttisinteger()&&et.ttisinteger()?e.stack[ec].setivalue(at(e,C.value,et.value)):!1!==(n=ke(C))&&!1!==(R=ke(et))?e.stack[ec].setfltvalue(t_(e,n,R)):tL.luaT_trybinTM(e,C,et,e.stack[ec],tL.TMS.TM_MOD);break}case eJ:{let n,R,C=p(e,el,eo,eu),et=x(e,el,eo,eu);!1!==(n=ke(C))&&!1!==(R=ke(et))?e.stack[ec].setfltvalue(Math.pow(n,R)):tL.luaT_trybinTM(e,C,et,e.stack[ec],tL.TMS.TM_POW);break}case eN:{let n,R,C=p(e,el,eo,eu),et=x(e,el,eo,eu);!1!==(n=ke(C))&&!1!==(R=ke(et))?e.stack[ec].setfltvalue(n/R):tL.luaT_trybinTM(e,C,et,e.stack[ec],tL.TMS.TM_DIV);break}case eB:{let n,R,C=p(e,el,eo,eu),et=x(e,el,eo,eu);C.ttisinteger()&&et.ttisinteger()?e.stack[ec].setivalue(ct(e,C.value,et.value)):!1!==(n=ke(C))&&!1!==(R=ke(et))?e.stack[ec].setfltvalue(Math.floor(n/R)):tL.luaT_trybinTM(e,C,et,e.stack[ec],tL.TMS.TM_IDIV);break}case eL:{let n,R,C=p(e,el,eo,eu),et=x(e,el,eo,eu);!1!==(n=Z(C))&&!1!==(R=Z(et))?e.stack[ec].setivalue(n&R):tL.luaT_trybinTM(e,C,et,e.stack[ec],tL.TMS.TM_BAND);break}case ew:{let n,R,C=p(e,el,eo,eu),et=x(e,el,eo,eu);!1!==(n=Z(C))&&!1!==(R=Z(et))?e.stack[ec].setivalue(n|R):tL.luaT_trybinTM(e,C,et,e.stack[ec],tL.TMS.TM_BOR);break}case eT:{let n,R,C=p(e,el,eo,eu),et=x(e,el,eo,eu);!1!==(n=Z(C))&&!1!==(R=Z(et))?e.stack[ec].setivalue(n^R):tL.luaT_trybinTM(e,C,et,e.stack[ec],tL.TMS.TM_BXOR);break}case e4:{let n,R,C=p(e,el,eo,eu),et=x(e,el,eo,eu);!1!==(n=Z(C))&&!1!==(R=Z(et))?e.stack[ec].setivalue(_t(n,R)):tL.luaT_trybinTM(e,C,et,e.stack[ec],tL.TMS.TM_SHL);break}case e8:{let n,R,C=p(e,el,eo,eu),et=x(e,el,eo,eu);!1!==(n=Z(C))&&!1!==(R=Z(et))?e.stack[ec].setivalue(_t(n,-R)):tL.luaT_trybinTM(e,C,et,e.stack[ec],tL.TMS.TM_SHR);break}case tu:{let n,R=e.stack[T(0,el,eu)];R.ttisinteger()?e.stack[ec].setivalue(0|-R.value):!1!==(n=ke(R))?e.stack[ec].setfltvalue(-n):tL.luaT_trybinTM(e,R,R,e.stack[ec],tL.TMS.TM_UNM);break}case ex:{let n=e.stack[T(0,el,eu)];n.ttisinteger()?e.stack[ec].setivalue(~n.value):tL.luaT_trybinTM(e,n,n,e.stack[ec],tL.TMS.TM_BNOT);break}case eY:{let n=e.stack[T(0,el,eu)];e.stack[ec].setbvalue(n.l_isfalse());break}case eV:Me(e,e.stack[ec],e.stack[T(0,el,eu)]);break;case eS:{let R=eu.B,C=eu.C;e.top=el+C+1,Dt(e,C-R+1);let et=el+R;tg.setobjs2s(e,ec,et),tA.adjust_top(e,n.top);break}case eK:$(e,n,eu,0);break;case eI:Qe(e,p(e,el,eo,eu),x(e,el,eo,eu))!==eu.A?n.l_savedpc++:U(e,n);break;case e$:pe(e,p(e,el,eo,eu),x(e,el,eo,eu))!==eu.A?n.l_savedpc++:U(e,n);break;case eG:He(e,p(e,el,eo,eu),x(e,el,eo,eu))!==eu.A?n.l_savedpc++:U(e,n);break;case e7:(eu.C?e.stack[ec].l_isfalse():!e.stack[ec].l_isfalse())?n.l_savedpc++:U(e,n);break;case ts:{let R=T(0,el,eu),C=e.stack[R];(eu.C?C.l_isfalse():!C.l_isfalse())?n.l_savedpc++:(tg.setobjs2s(e,ec,R),U(e,n));break}case eO:{let R=eu.B,C=eu.C-1;if(0!==R&&tA.adjust_top(e,ec+R),!tA.luaD_precall(e,ec,C)){n=e.ci;continue}C>=0&&tA.adjust_top(e,n.top);break}case e9:{let C=eu.B;if(0!==C&&tA.adjust_top(e,ec+C),!tA.luaD_precall(e,ec,ei)){let C=e.ci,et=C.previous,ei=C.func,eo=C.funcOff,el=et.funcOff,eu=C.l_base+ei.value.p.numparams;R.p.p.length>0&&tm.luaF_close(e,et.l_base);for(let n=0;eo+n<eu;n++)tg.setobjs2s(e,el+n,eo+n);et.l_base=el+(C.l_base-eo),et.top=el+(e.top-eo),tA.adjust_top(e,et.top),et.l_code=C.l_code,et.l_savedpc=C.l_savedpc,et.callstatus|=tb.CIST_TAIL,et.next=null,n=e.ci=et,td(e.top===et.l_base+e.stack[el].value.p.maxstacksize);continue}break}case eQ:{R.p.p.length>0&&tm.luaF_close(e,el);let C=tA.luaD_poscall(e,n,ec,0!==eu.B?eu.B-1:e.top-ec);if(n.callstatus&tb.CIST_FRESH)return;n=e.ci,C&&tA.adjust_top(e,n.top),td(n.callstatus&tb.CIST_LUA),td(n.l_code[n.l_savedpc-1].opcode===eO);continue}case eR:if(e.stack[ec].ttisinteger()){let R=e.stack[ec+2].value,C=e.stack[ec].value+R|0,et=e.stack[ec+1].value;(0<R?C<=et:et<=C)&&(n.l_savedpc+=eu.sBx,e.stack[ec].chgivalue(C),e.stack[ec+3].setivalue(C))}else{let R=e.stack[ec+2].value,C=e.stack[ec].value+R,et=e.stack[ec+1].value;(0<R?C<=et:et<=C)&&(n.l_savedpc+=eu.sBx,e.stack[ec].chgfltvalue(C),e.stack[ec+3].setfltvalue(C))}break;case eC:{let R,C=e.stack[ec],et=e.stack[ec+1],ei=e.stack[ec+2];if(C.ttisinteger()&&ei.ttisinteger()&&(R=kt(et,ei.value))){let e=R.stopnow?0:C.value;et.value=R.ilimit,C.value=e-ei.value|0}else{let n,R,eo;!1===(n=ke(et))&&tw.luaG_runerror(e,eb("'for' limit must be a number",!0)),e.stack[ec+1].setfltvalue(n),!1===(R=ke(ei))&&tw.luaG_runerror(e,eb("'for' step must be a number",!0)),e.stack[ec+2].setfltvalue(R),!1===(eo=ke(C))&&tw.luaG_runerror(e,eb("'for' initial value must be a number",!0)),e.stack[ec].setfltvalue(eo-R)}n.l_savedpc+=eu.sBx;break}case to:{let R=ec+3;tg.setobjs2s(e,R+2,ec+2),tg.setobjs2s(e,R+1,ec+1),tg.setobjs2s(e,R,ec),tA.adjust_top(e,R+3),tA.luaD_call(e,R,eu.C),tA.adjust_top(e,n.top),ec=c(0,el,eu=n.l_code[n.l_savedpc++]),td(eu.opcode===tl)}case tl:e.stack[ec+1].ttisnil()||(tg.setobjs2s(e,ec,ec+1),n.l_savedpc+=eu.sBx);break;case e1:{let R=eu.B,C=eu.C;0===R&&(R=e.top-ec-1),0===C&&(td(n.l_code[n.l_savedpc].opcode===eU),C=n.l_code[n.l_savedpc++].Ax);let et=e.stack[ec].value,ei=(C-1)*ek+R;for(;R>0;R--)tx.luaH_setint(et,ei--,e.stack[ec+R]);tA.adjust_top(e,n.top);break}case eE:{let n=R.p.p[eu.Bx],C=Bt(n,R.upvals,e.stack,el);null===C?gt(e,n,R.upvals,el,ec):e.stack[ec].setclLvalue(C);break}case tc:{let C,et=eu.B-1,ei=el-n.funcOff-R.p.numparams-1;for(ei<0&&(ei=0),et<0&&(et=ei,tA.luaD_checkstack(e,ei),tA.adjust_top(e,ec+ei)),C=0;C<et&&C<ei;C++)tg.setobjs2s(e,ec+C,el-ei+C);for(;C<et;C++)e.stack[ec+C].setnilvalue();break}case eU:throw Error("invalid opcode")}}},e.exports.luaV_finishOp=function(e){let n=e.ci,R=n.l_base,C=n.l_code[n.l_savedpc-1],et=C.opcode;switch(et){case eA:case e6:case eW:case eN:case eB:case eL:case ew:case eT:case e4:case e8:case eX:case eJ:case tu:case ex:case eV:case eP:case eM:case e0:tg.setobjs2s(e,R+C.A,e.top-1),delete e.stack[--e.top];break;case eG:case e$:case eI:{let R=!e.stack[e.top-1].l_isfalse();delete e.stack[--e.top],n.callstatus&tb.CIST_LEQ&&(td(et===eG),n.callstatus^=tb.CIST_LEQ,R=!R),td(n.l_code[n.l_savedpc].opcode===eK),!!C.A!==R&&n.l_savedpc++;break}case eS:{let et=e.top-1,ei=et-1-(R+C.B);tg.setobjs2s(e,et-2,et),ei>1&&(e.top=et-1,Dt(e,ei)),tg.setobjs2s(e,n.l_base+C.A,e.top-1),tA.adjust_top(e,n.top);break}case to:td(n.l_code[n.l_savedpc].opcode===tl),tA.adjust_top(e,n.top);break;case eO:C.C-1>=0&&tA.adjust_top(e,n.top)}},e.exports.luaV_imul=tT,e.exports.luaV_lessequal=He,e.exports.luaV_lessthan=pe,e.exports.luaV_mod=at,e.exports.luaV_objlen=Me,e.exports.luaV_rawequalobj=function(e,n){return Qe(null,e,n)},e.exports.luaV_shiftl=_t,e.exports.luaV_tointeger=J,e.exports.settable=$t,e.exports.tointeger=Z,e.exports.tonumber=ke},function(e,n,R){let C=[96,113,65,84,80,80,92,108,60,16,60,84,108,124,124,124,124,124,124,124,124,124,124,124,124,96,96,96,96,104,34,188,188,188,132,228,84,84,16,98,98,4,98,20,81,80,23],s=function(e,n){return~(-1<<e)<<n},a=function(e,n){return~s(e,n)},i=function(e,n,R,C){return e.code=e.code&a(C,R)|n<<R&s(C,R),u(e)},l=function(e,n){return i(e,n,14,18)},u=function(e){if("number"==typeof e)return{code:e,opcode:e>>0&s(6,0),A:e>>6&s(8,0),B:e>>23&s(9,0),C:e>>14&s(9,0),Bx:e>>14&s(18,0),Ax:e>>6&s(26,0),sBx:(e>>14&s(18,0))-131071};{let n=e.code;return e.opcode=n>>0&s(6,0),e.A=n>>6&s(8,0),e.B=n>>23&s(9,0),e.C=n>>14&s(9,0),e.Bx=n>>14&s(18,0),e.Ax=n>>6&s(26,0),e.sBx=(n>>14&s(18,0))-131071,e}};e.exports.BITRK=256,e.exports.CREATE_ABC=function(e,n,R,C){return u(e<<0|n<<6|R<<23|C<<14)},e.exports.CREATE_ABx=function(e,n,R){return u(e<<0|n<<6|R<<14)},e.exports.CREATE_Ax=function(e,n){return u(e<<0|n<<6)},e.exports.GET_OPCODE=function(e){return e.opcode},e.exports.GETARG_A=function(e){return e.A},e.exports.GETARG_B=function(e){return e.B},e.exports.GETARG_C=function(e){return e.C},e.exports.GETARG_Bx=function(e){return e.Bx},e.exports.GETARG_Ax=function(e){return e.Ax},e.exports.GETARG_sBx=function(e){return e.sBx},e.exports.INDEXK=function(e){return -257&e},e.exports.ISK=function(e){return 256&e},e.exports.LFIELDS_PER_FLUSH=50,e.exports.MAXARG_A=255,e.exports.MAXARG_Ax=67108863,e.exports.MAXARG_B=511,e.exports.MAXARG_Bx=262143,e.exports.MAXARG_C=511,e.exports.MAXARG_sBx=131071,e.exports.MAXINDEXRK=255,e.exports.NO_REG=255,e.exports.OpArgK=3,e.exports.OpArgN=0,e.exports.OpArgR=2,e.exports.OpArgU=1,e.exports.OpCodes=["MOVE","LOADK","LOADKX","LOADBOOL","LOADNIL","GETUPVAL","GETTABUP","GETTABLE","SETTABUP","SETUPVAL","SETTABLE","NEWTABLE","SELF","ADD","SUB","MUL","MOD","POW","DIV","IDIV","BAND","BOR","BXOR","SHL","SHR","UNM","BNOT","NOT","LEN","CONCAT","JMP","EQ","LT","LE","TEST","TESTSET","CALL","TAILCALL","RETURN","FORLOOP","FORPREP","TFORCALL","TFORLOOP","SETLIST","CLOSURE","VARARG","EXTRAARG"],e.exports.OpCodesI={OP_MOVE:0,OP_LOADK:1,OP_LOADKX:2,OP_LOADBOOL:3,OP_LOADNIL:4,OP_GETUPVAL:5,OP_GETTABUP:6,OP_GETTABLE:7,OP_SETTABUP:8,OP_SETUPVAL:9,OP_SETTABLE:10,OP_NEWTABLE:11,OP_SELF:12,OP_ADD:13,OP_SUB:14,OP_MUL:15,OP_MOD:16,OP_POW:17,OP_DIV:18,OP_IDIV:19,OP_BAND:20,OP_BOR:21,OP_BXOR:22,OP_SHL:23,OP_SHR:24,OP_UNM:25,OP_BNOT:26,OP_NOT:27,OP_LEN:28,OP_CONCAT:29,OP_JMP:30,OP_EQ:31,OP_LT:32,OP_LE:33,OP_TEST:34,OP_TESTSET:35,OP_CALL:36,OP_TAILCALL:37,OP_RETURN:38,OP_FORLOOP:39,OP_FORPREP:40,OP_TFORCALL:41,OP_TFORLOOP:42,OP_SETLIST:43,OP_CLOSURE:44,OP_VARARG:45,OP_EXTRAARG:46},e.exports.POS_A=6,e.exports.POS_Ax=6,e.exports.POS_B=23,e.exports.POS_Bx=14,e.exports.POS_C=14,e.exports.POS_OP=0,e.exports.RKASK=function(e){return 256|e},e.exports.SETARG_A=function(e,n){return i(e,n,6,8)},e.exports.SETARG_Ax=function(e,n){return i(e,n,6,26)},e.exports.SETARG_B=function(e,n){return i(e,n,23,9)},e.exports.SETARG_Bx=l,e.exports.SETARG_C=function(e,n){return i(e,n,14,9)},e.exports.SETARG_sBx=function(e,n){return l(e,n+131071)},e.exports.SET_OPCODE=function(e,n){return e.code=e.code&a(6,0)|n<<0&s(6,0),u(e)},e.exports.SIZE_A=8,e.exports.SIZE_Ax=26,e.exports.SIZE_B=9,e.exports.SIZE_Bx=18,e.exports.SIZE_C=9,e.exports.SIZE_OP=6,e.exports.fullins=u,e.exports.getBMode=function(e){return C[e]>>4&3},e.exports.getCMode=function(e){return C[e]>>2&3},e.exports.getOpMode=function(e){return 3&C[e]},e.exports.iABC=0,e.exports.iABx=1,e.exports.iAsBx=2,e.exports.iAx=3,e.exports.testAMode=function(e){return 64&C[e]},e.exports.testTMode=function(e){return 128&C[e]}},function(e,n,R){let{LUA_VERSION_MAJOR:C,LUA_VERSION_MINOR:et}=R(2);e.exports.LUA_VERSUFFIX="_"+C+"_"+et,e.exports.lua_assert=function(e){},e.exports.luaopen_base=R(24).luaopen_base,e.exports.LUA_COLIBNAME="coroutine",e.exports.luaopen_coroutine=R(25).luaopen_coroutine,e.exports.LUA_TABLIBNAME="table",e.exports.luaopen_table=R(26).luaopen_table,e.exports.LUA_OSLIBNAME="os",e.exports.luaopen_os=R(27).luaopen_os,e.exports.LUA_STRLIBNAME="string",e.exports.luaopen_string=R(28).luaopen_string,e.exports.LUA_UTF8LIBNAME="utf8",e.exports.luaopen_utf8=R(29).luaopen_utf8,e.exports.LUA_BITLIBNAME="bit32",e.exports.LUA_MATHLIBNAME="math",e.exports.luaopen_math=R(30).luaopen_math,e.exports.LUA_DBLIBNAME="debug",e.exports.luaopen_debug=R(31).luaopen_debug,e.exports.LUA_LOADLIBNAME="package",e.exports.luaopen_package=R(32).luaopen_package,e.exports.LUA_FENGARILIBNAME="fengari",e.exports.luaopen_fengari=R(33).luaopen_fengari;let ei=R(39);e.exports.luaL_openlibs=ei.luaL_openlibs},function(e,n,R){let{LUA_MULTRET:C,LUA_OPBNOT:et,LUA_OPEQ:ei,LUA_OPLE:eo,LUA_OPLT:el,LUA_OPUNM:eu,LUA_REGISTRYINDEX:ec,LUA_RIDX_GLOBALS:ef,LUA_VERSION_NUM:eh,constant_types:{LUA_NUMTAGS:ep,LUA_TBOOLEAN:ed,LUA_TCCL:e_,LUA_TFUNCTION:eg,LUA_TLCF:em,LUA_TLCL:eb,LUA_TLIGHTUSERDATA:ey,LUA_TLNGSTR:ev,LUA_TNIL:ek,LUA_TNONE:eA,LUA_TNUMFLT:eL,LUA_TNUMINT:ex,LUA_TSHRSTR:ew,LUA_TTABLE:eT,LUA_TTHREAD:eO,LUA_TUSERDATA:eE},thread_status:{LUA_OK:eS},from_userstring:eN,to_luastring:eI}=R(1),{api_check:eU}=R(4),eR=R(11),eC=R(8),{luaU_dump:eM}=R(37),eP=R(13),eD=R(6),eB=R(12),{luaS_bless:eK,luaS_new:eG,luaS_newliteral:eV}=R(10),eF=R(14),{LUAI_MAXSTACK:ej}=R(3),ez=R(15),eH=R(9),{ZIO:e$}=R(19),eX=eD.TValue,eq=eD.CClosure,Te=function(e){e.top++,eU(e,e.top<=e.ci.top,"stack overflow")},ze=function(e,n){eU(e,n<e.top-e.ci.funcOff,"not enough elements in the stack")},g=function(e){if(!e)throw TypeError("invalid argument")},ge=function(e){g("number"==typeof e&&(0|e)===e)},te=function(e){return e!==eD.luaO_nilobject},w=function(e,n){let R=e.ci;if(n>0){let C=R.funcOff+n;return eU(e,n<=R.top-(R.funcOff+1),"unacceptable index"),C>=e.top?eD.luaO_nilobject:e.stack[C]}return n>ec?(eU(e,0!==n&&-n<=e.top,"invalid index"),e.stack[e.top+n]):n===ec?e.l_G.l_registry:(eU(e,(n=ec-n)<=eP.MAXUPVAL+1,"upvalue index too large"),R.func.ttislcf()?eD.luaO_nilobject:n<=R.func.value.nupvalues?R.func.value.upvalue[n-1]:eD.luaO_nilobject)},S=function(e,n){let R=e.ci;if(n>0){let C=R.funcOff+n;return eU(e,n<=R.top-(R.funcOff+1),"unacceptable index"),C>=e.top?null:C}if(n>ec)return eU(e,0!==n&&-n<=e.top,"invalid index"),e.top+n;throw Error("attempt to use pseudo-index")},v=function(e,n){let R,C=e.ci.funcOff;n>=0?(eU(e,n<=e.stack_last-(C+1),"new top too large"),R=C+1+n):(eU(e,-(n+1)<=e.top-(C+1),"invalid new top"),R=e.top+n+1),eC.adjust_top(e,R)},q=function(e,n){v(e,-n-1)},oe=function(e,n,R){for(;n<R;n++,R--){let C=e.stack[n],et=new eX(C.type,C.value);eD.setobjs2s(e,n,R),eD.setobj2s(e,R,et)}},O=function(e,n,R){let C=e.top-1,et=S(e,n),ei=e.stack[et];eU(e,te(ei)&&n>ec,"index not in the stack"),eU(e,(R>=0?R:-R)<=C-et+1,"invalid 'n'");let eo=R>=0?C-R:et-R-1;oe(e,et,eo),oe(e,eo+1,e.top-1),oe(e,et,e.top-1)},ee=function(e,n,R){let C=w(e,n);w(e,R).setfrom(C)},ce=function(e,n,R){if(g("function"==typeof n),ge(R),0===R)e.stack[e.top]=new eX(em,n);else{ze(e,R),eU(e,R<=eP.MAXUPVAL,"upvalue index too large");let C=new eq(e,n,R);for(let n=0;n<R;n++)C.upvalue[n].setfrom(e.stack[e.top-R+n]);for(let n=1;n<R;n++)delete e.stack[--e.top];R>0&&--e.top,e.stack[e.top].setclCvalue(C)}Te(e)},Ke=function(e,n){ce(e,n,0)},dt=function(e,n,R){let C=eG(e,eN(R));ze(e,1),eD.pushsvalue2s(e,C),eU(e,e.top<=e.ci.top,"stack overflow"),ez.settable(e,n,e.stack[e.top-1],e.stack[e.top-2]),delete e.stack[--e.top],delete e.stack[--e.top]},Et=function(e,n){dt(e,eH.luaH_getint(e.l_G.l_registry.value,ef),n)},St=function(e,n,R){let C=eG(e,eN(R));return eD.pushsvalue2s(e,C),eU(e,e.top<=e.ci.top,"stack overflow"),ez.luaV_gettable(e,n,e.stack[e.top-1],e.top-1),e.stack[e.top-1].ttnov()},Nt=function(e,n,R){let C=w(e,n);return ge(R),eU(e,C.ttistable(),"table expected"),eD.pushobj2s(e,eH.luaH_getint(C.value,R)),eU(e,e.top<=e.ci.top,"stack overflow"),e.stack[e.top-1].ttnov()},D=function(e,n,R){let C=new eD.TValue(eT,eH.luaH_new(e));e.stack[e.top]=C,Te(e)},Ce=function(e,n,R){switch(ge(R),n.ttype()){case e_:{let e=n.value;return 1<=R&&R<=e.nupvalues?{name:eI("",!0),val:e.upvalue[R-1]}:null}case eb:{let e=n.value,C=e.p;if(!(1<=R&&R<=C.upvalues.length))return null;let et=C.upvalues[R-1].name;return{name:et?et.getstr():eI("(*no name)",!0),val:e.upvals[R-1]}}default:return null}},De=function(e,n){let R=w(e,n);if(!R.ttisstring()){if(!ez.cvt2str(R))return null;eD.luaO_tostring(e,R)}return R.svalue()},Se=function(e,n){return ez.tointeger(w(e,n))},je=function(e,n){return ez.tonumber(w(e,n))},eW=new WeakMap,bt=function(e,n){eC.luaD_callnoyield(e,n.funcOff,n.nresults)},vt=function(e,n){let R=w(e,n);return te(R)?R.ttnov():eA},eZ=eI("?"),Rt=function(e,n,R){eU(e,R===C||e.ci.top-e.top>=R-n,"results from function overflow current stack size")},lt=function(e,n,R,et,ei){eU(e,null===ei||!(e.ci.callstatus&eB.CIST_LUA),"cannot use continuations inside hooks"),ze(e,n+1),eU(e,e.status===eS,"cannot do calls on non-normal thread"),Rt(e,n,R);let eo=e.top-(n+1);null!==ei&&0===e.nny?(e.ci.c_k=ei,e.ci.c_ctx=et,eC.luaD_call(e,eo,R)):eC.luaD_callnoyield(e,eo,R),R===C&&e.ci.top<e.top&&(e.ci.top=e.top)},pt=function(e,n,R,et,ei,eo){let el,eu;eU(e,null===eo||!(e.ci.callstatus&eB.CIST_LUA),"cannot use continuations inside hooks"),ze(e,n+1),eU(e,e.status===eS,"cannot do calls on non-normal thread"),Rt(e,n,R),eu=0===et?0:S(e,et);let ec=e.top-(n+1);if(null===eo||e.nny>0)el=eC.luaD_pcall(e,bt,{funcOff:ec,nresults:R},ec,eu);else{let n=e.ci;n.c_k=eo,n.c_ctx=ei,n.extra=ec,n.c_old_errfunc=e.errfunc,e.errfunc=eu,n.callstatus&=~eB.CIST_OAH|e.allowhook,n.callstatus|=eB.CIST_YPCALL,eC.luaD_call(e,ec,R),n.callstatus&=~eB.CIST_YPCALL,e.errfunc=n.c_old_errfunc,el=eS}return R===C&&e.ci.top<e.top&&(e.ci.top=e.top),el},wt=function(e,n,R){let C=w(e,n);eU(e,C.ttisLclosure(),"Lua function expected");let et=C.value;return ge(R),eU(e,1<=R&&R<=et.p.upvalues.length,"invalid upvalue index"),{f:et,i:R-1}};e.exports.api_incr_top=Te,e.exports.api_checknelems=ze,e.exports.lua_absindex=function(e,n){return n>0||n<=ec?n:e.top-e.ci.funcOff+n},e.exports.lua_arith=function(e,n){n!==eu&&n!==et?ze(e,2):(ze(e,1),eD.pushobj2s(e,e.stack[e.top-1]),eU(e,e.top<=e.ci.top,"stack overflow")),eD.luaO_arith(e,n,e.stack[e.top-2],e.stack[e.top-1],e.stack[e.top-2]),delete e.stack[--e.top]},e.exports.lua_atpanic=function(e,n){let R=e.l_G.panic;return e.l_G.panic=n,R},e.exports.lua_atnativeerror=function(e,n){let R=e.l_G.atnativeerror;return e.l_G.atnativeerror=n,R},e.exports.lua_call=function(e,n,R){lt(e,n,R,0,null)},e.exports.lua_callk=lt,e.exports.lua_checkstack=function(e,n){let R,C=e.ci;return eU(e,n>=0,"negative 'n'"),e.stack_last-e.top>n?R=!0:e.top+eB.EXTRA_STACK>ej-n?R=!1:(eC.luaD_growstack(e,n),R=!0),R&&C.top<e.top+n&&(C.top=e.top+n),R},e.exports.lua_compare=function(e,n,R,C){let et=w(e,n),eu=w(e,R),ec=0;if(te(et)&&te(eu))switch(C){case ei:ec=ez.luaV_equalobj(e,et,eu);break;case el:ec=ez.luaV_lessthan(e,et,eu);break;case eo:ec=ez.luaV_lessequal(e,et,eu);break;default:eU(e,!1,"invalid option")}return ec},e.exports.lua_concat=function(e,n){ze(e,n),n>=2?ez.luaV_concat(e,n):0===n&&(eD.pushsvalue2s(e,eK(e,eI("",!0))),eU(e,e.top<=e.ci.top,"stack overflow"))},e.exports.lua_copy=ee,e.exports.lua_createtable=D,e.exports.lua_dump=function(e,n,R,C){ze(e,1);let et=e.stack[e.top-1];return et.ttisLclosure()?eM(e,et.value.p,n,R,C):1},e.exports.lua_error=function(e){ze(e,1),eR.luaG_errormsg(e)},e.exports.lua_gc=function(){},e.exports.lua_getallocf=function(){return console.warn("lua_getallocf is not available"),0},e.exports.lua_getextraspace=function(){return console.warn("lua_getextraspace is not available"),0},e.exports.lua_getfield=function(e,n,R){return St(e,w(e,n),R)},e.exports.lua_getglobal=function(e,n){return St(e,eH.luaH_getint(e.l_G.l_registry.value,ef),n)},e.exports.lua_geti=function(e,n,R){let C=w(e,n);return ge(R),e.stack[e.top]=new eX(ex,R),Te(e),ez.luaV_gettable(e,C,e.stack[e.top-1],e.top-1),e.stack[e.top-1].ttnov()},e.exports.lua_getmetatable=function(e,n){let R,C=w(e,n),et=!1;switch(C.ttnov()){case eT:case eE:R=C.value.metatable;break;default:R=e.l_G.mt[C.ttnov()]}return null!=R&&(e.stack[e.top]=new eX(eT,R),Te(e),et=!0),et},e.exports.lua_gettable=function(e,n){let R=w(e,n);return ez.luaV_gettable(e,R,e.stack[e.top-1],e.top-1),e.stack[e.top-1].ttnov()},e.exports.lua_gettop=function(e){return e.top-(e.ci.funcOff+1)},e.exports.lua_getupvalue=function(e,n,R){let C=Ce(0,w(e,n),R);if(C){let n=C.name,R=C.val;return eD.pushobj2s(e,R),eU(e,e.top<=e.ci.top,"stack overflow"),n}return null},e.exports.lua_getuservalue=function(e,n){let R=w(e,n);eU(e,R.ttisfulluserdata(),"full userdata expected");let C=R.value.uservalue;return e.stack[e.top]=new eX(C.type,C.value),Te(e),e.stack[e.top-1].ttnov()},e.exports.lua_insert=function(e,n){O(e,n,1)},e.exports.lua_isboolean=function(e,n){return vt(e,n)===ed},e.exports.lua_iscfunction=function(e,n){let R=w(e,n);return R.ttislcf(R)||R.ttisCclosure()},e.exports.lua_isfunction=function(e,n){return vt(e,n)===eg},e.exports.lua_isinteger=function(e,n){return w(e,n).ttisinteger()},e.exports.lua_islightuserdata=function(e,n){return vt(e,n)===ey},e.exports.lua_isnil=function(e,n){return vt(e,n)===ek},e.exports.lua_isnone=function(e,n){return vt(e,n)===eA},e.exports.lua_isnoneornil=function(e,n){return 0>=vt(e,n)},e.exports.lua_isnumber=function(e,n){return!1!==ez.tonumber(w(e,n))},e.exports.lua_isproxy=function(e,n){let R=eW.get(e);return!!R&&(null===n||n.l_G===R)},e.exports.lua_isstring=function(e,n){let R=w(e,n);return R.ttisstring()||ez.cvt2str(R)},e.exports.lua_istable=function(e,n){return w(e,n).ttistable()},e.exports.lua_isthread=function(e,n){return vt(e,n)===eO},e.exports.lua_isuserdata=function(e,n){let R=w(e,n);return R.ttisfulluserdata(R)||R.ttislightuserdata()},e.exports.lua_len=function(e,n){let R=w(e,n),C=new eX;ez.luaV_objlen(e,C,R),e.stack[e.top]=C,Te(e)},e.exports.lua_load=function(e,n,R,C,et){C=C?eN(C):eZ,null!==et&&(et=eN(et));let ei=new e$(e,n,R),eo=eC.luaD_protectedparser(e,ei,C,et);if(eo===eS){let n=e.stack[e.top-1].value;if(n.nupvalues>=1){let R=eH.luaH_getint(e.l_G.l_registry.value,ef);n.upvals[0].setfrom(R)}}return eo},e.exports.lua_newtable=function(e){D(e)},e.exports.lua_newuserdata=function(e,n){let R=new eD.Udata(e,n);return e.stack[e.top]=new eD.TValue(eE,R),Te(e),R.data},e.exports.lua_next=function(e,n){let R=w(e,n);return eU(e,R.ttistable(),"table expected"),e.stack[e.top]=new eX,eH.luaH_next(e,R.value,e.top-1)?(Te(e),1):(delete e.stack[e.top],delete e.stack[--e.top],0)},e.exports.lua_pcall=function(e,n,R,C){return pt(e,n,R,C,0,null)},e.exports.lua_pcallk=pt,e.exports.lua_pop=q,e.exports.lua_pushboolean=function(e,n){e.stack[e.top]=new eX(ed,!!n),Te(e)},e.exports.lua_pushcclosure=ce,e.exports.lua_pushcfunction=Ke,e.exports.lua_pushfstring=function(e,n,...R){return n=eN(n),eD.luaO_pushvfstring(e,n,R)},e.exports.lua_pushglobaltable=function(e){Nt(e,ec,ef)},e.exports.lua_pushinteger=function(e,n){ge(n),e.stack[e.top]=new eX(ex,n),Te(e)},e.exports.lua_pushjsclosure=ce,e.exports.lua_pushjsfunction=Ke,e.exports.lua_pushlightuserdata=function(e,n){e.stack[e.top]=new eX(ey,n),Te(e)},e.exports.lua_pushliteral=function(e,n){if(null==n)e.stack[e.top]=new eX(ek,null),e.top++;else{g("string"==typeof n);let R=eV(e,n);eD.pushsvalue2s(e,R),n=R.getstr()}return eU(e,e.top<=e.ci.top,"stack overflow"),n},e.exports.lua_pushlstring=function(e,n,R){let C;return ge(R),0===R?C=eK(e,n=eI("",!0)):(eU(e,(n=eN(n)).length>=R,"invalid length to lua_pushlstring"),C=eG(e,n.subarray(0,R))),eD.pushsvalue2s(e,C),eU(e,e.top<=e.ci.top,"stack overflow"),C.value},e.exports.lua_pushnil=function(e){e.stack[e.top]=new eX(ek,null),Te(e)},e.exports.lua_pushnumber=function(e,n){g("number"==typeof n),e.stack[e.top]=new eX(eL,n),Te(e)},e.exports.lua_pushstring=function(e,n){if(null==n)e.stack[e.top]=new eX(ek,null),e.top++;else{let R=eG(e,eN(n));eD.pushsvalue2s(e,R),n=R.getstr()}return eU(e,e.top<=e.ci.top,"stack overflow"),n},e.exports.lua_pushthread=function(e){return e.stack[e.top]=new eX(eO,e),Te(e),e.l_G.mainthread===e},e.exports.lua_pushvalue=function(e,n){eD.pushobj2s(e,w(e,n)),eU(e,e.top<=e.ci.top,"stack overflow")},e.exports.lua_pushvfstring=function(e,n,R){return n=eN(n),eD.luaO_pushvfstring(e,n,R)},e.exports.lua_rawequal=function(e,n,R){let C=w(e,n),et=w(e,R);return te(C)&&te(et)?ez.luaV_equalobj(null,C,et):0},e.exports.lua_rawget=function(e,n){let R=w(e,n);return eU(e,R.ttistable(R),"table expected"),eD.setobj2s(e,e.top-1,eH.luaH_get(e,R.value,e.stack[e.top-1])),e.stack[e.top-1].ttnov()},e.exports.lua_rawgeti=Nt,e.exports.lua_rawgetp=function(e,n,R){let C=w(e,n);eU(e,C.ttistable(),"table expected");let et=new eX(ey,R);return eD.pushobj2s(e,eH.luaH_get(e,C.value,et)),eU(e,e.top<=e.ci.top,"stack overflow"),e.stack[e.top-1].ttnov()},e.exports.lua_rawlen=function(e,n){let R=w(e,n);switch(R.ttype()){case ew:case ev:return R.vslen();case eE:return R.value.len;case eT:return eH.luaH_getn(R.value);default:return 0}},e.exports.lua_rawset=function(e,n){ze(e,2);let R=w(e,n);eU(e,R.ttistable(),"table expected");let C=e.stack[e.top-2],et=e.stack[e.top-1];eH.luaH_setfrom(e,R.value,C,et),eH.invalidateTMcache(R.value),delete e.stack[--e.top],delete e.stack[--e.top]},e.exports.lua_rawseti=function(e,n,R){ge(R),ze(e,1);let C=w(e,n);eU(e,C.ttistable(),"table expected"),eH.luaH_setint(C.value,R,e.stack[e.top-1]),delete e.stack[--e.top]},e.exports.lua_rawsetp=function(e,n,R){ze(e,1);let C=w(e,n);eU(e,C.ttistable(),"table expected");let et=new eX(ey,R),ei=e.stack[e.top-1];eH.luaH_setfrom(e,C.value,et,ei),delete e.stack[--e.top]},e.exports.lua_register=function(e,n,R){Ke(e,R),Et(e,n)},e.exports.lua_remove=function(e,n){O(e,n,-1),q(e,1)},e.exports.lua_replace=function(e,n){ee(e,-1,n),q(e,1)},e.exports.lua_rotate=O,e.exports.lua_setallocf=function(){return console.warn("lua_setallocf is not available"),0},e.exports.lua_setfield=function(e,n,R){dt(e,w(e,n),R)},e.exports.lua_setglobal=Et,e.exports.lua_seti=function(e,n,R){ge(R),ze(e,1);let C=w(e,n);e.stack[e.top]=new eX(ex,R),Te(e),ez.settable(e,C,e.stack[e.top-1],e.stack[e.top-2]),delete e.stack[--e.top],delete e.stack[--e.top]},e.exports.lua_setmetatable=function(e,n){let R;ze(e,1);let C=w(e,n);switch(e.stack[e.top-1].ttisnil()?R=null:(eU(e,e.stack[e.top-1].ttistable(),"table expected"),R=e.stack[e.top-1].value),C.ttnov()){case eE:case eT:C.value.metatable=R;break;default:e.l_G.mt[C.ttnov()]=R}return delete e.stack[--e.top],!0},e.exports.lua_settable=function(e,n){ze(e,2);let R=w(e,n);ez.settable(e,R,e.stack[e.top-2],e.stack[e.top-1]),delete e.stack[--e.top],delete e.stack[--e.top]},e.exports.lua_settop=v,e.exports.lua_setupvalue=function(e,n,R){let C=w(e,n);ze(e,1);let et=Ce(0,C,R);if(et){let n=et.name;return et.val.setfrom(e.stack[e.top-1]),delete e.stack[--e.top],n}return null},e.exports.lua_setuservalue=function(e,n){ze(e,1);let R=w(e,n);eU(e,R.ttisfulluserdata(),"full userdata expected"),R.value.uservalue.setfrom(e.stack[e.top-1]),delete e.stack[--e.top]},e.exports.lua_status=function(e){return e.status},e.exports.lua_stringtonumber=function(e,n){let R=new eX,C=eD.luaO_str2num(n,R);return 0!==C&&(e.stack[e.top]=R,Te(e)),C},e.exports.lua_toboolean=function(e,n){return!w(e,n).l_isfalse()},e.exports.lua_tocfunction=function(e,n){let R=w(e,n);return R.ttislcf()||R.ttisCclosure()?R.value:null},e.exports.lua_todataview=function(e,n){let R=De(e,n);return new DataView(R.buffer,R.byteOffset,R.byteLength)},e.exports.lua_tointeger=function(e,n){let R=Se(e,n);return!1===R?0:R},e.exports.lua_tointegerx=Se,e.exports.lua_tojsstring=function(e,n){let R=w(e,n);if(!R.ttisstring()){if(!ez.cvt2str(R))return null;eD.luaO_tostring(e,R)}return R.jsstring()},e.exports.lua_tolstring=De,e.exports.lua_tonumber=function(e,n){let R=je(e,n);return!1===R?0:R},e.exports.lua_tonumberx=je,e.exports.lua_topointer=function(e,n){let R=w(e,n);switch(R.ttype()){case eT:case eb:case e_:case em:case eO:case eE:case ey:return R.value;default:return null}},e.exports.lua_toproxy=function(e,n){var R,C,et;let ei,eo=w(e,n);return R=e.l_G,C=eo.type,et=eo.value,ei=function(e){eU(e,e instanceof eB.lua_State&&R===e.l_G,"must be from same global state"),e.stack[e.top]=new eX(C,et),Te(e)},eW.set(ei,R),ei},e.exports.lua_tostring=De,e.exports.lua_tothread=function(e,n){let R=w(e,n);return R.ttisthread()?R.value:null},e.exports.lua_touserdata=function(e,n){let R=w(e,n);switch(R.ttnov()){case eE:return R.value.data;case ey:return R.value;default:return null}},e.exports.lua_type=vt,e.exports.lua_typename=function(e,n){return eU(e,eA<=n&&n<ep,"invalid tag"),eF.ttypename(n)},e.exports.lua_upvalueid=function(e,n,R){let C=w(e,n);switch(C.ttype()){case eb:{let C=wt(e,n,R);return C.f.upvals[C.i]}case e_:{let n=C.value;return eU(e,(0|R)===R&&R>0&&R<=n.nupvalues,"invalid upvalue index"),n.upvalue[R-1]}default:return eU(e,!1,"closure expected"),null}},e.exports.lua_upvaluejoin=function(e,n,R,C,et){let ei=wt(e,n,R),eo=wt(e,C,et),el=eo.f.upvals[eo.i];ei.f.upvals[ei.i]=el},e.exports.lua_version=function(e){return null===e?eh:e.l_G.version},e.exports.lua_xmove=function(e,n,R){if(e!==n){ze(e,R),eU(e,e.l_G===n.l_G,"moving among independent states"),eU(e,n.ci.top-n.top>=R,"stack overflow"),e.top-=R;for(let C=0;C<R;C++)n.stack[n.top]=new eD.TValue,eD.setobj2s(n,n.top,e.stack[e.top+C]),delete e.stack[e.top+C],n.top++}}},function(e,n,R){let{lua_assert:C}=R(4),s=function(e){let n=e.reader(e.L,e.data);if(null===n)return -1;C(n instanceof Uint8Array,"Should only load binary of array of bytes");let R=n.length;return 0===R?-1:(e.buffer=n,e.off=0,e.n=R-1,e.buffer[e.off++])};e.exports.EOZ=-1,e.exports.luaZ_buffer=function(e){return e.buffer.subarray(0,e.n)},e.exports.luaZ_buffremove=function(e,n){e.n-=n},e.exports.luaZ_fill=s,e.exports.luaZ_read=function(e,n,R,C){for(;C;){if(0===e.n){if(-1===s(e))return C;e.n++,e.off--}let et=C<=e.n?C:e.n;for(let C=0;C<et;C++)n[R++]=e.buffer[e.off++];e.n-=et,0===e.n&&(e.buffer=null),C-=et}return 0},e.exports.luaZ_resetbuffer=function(e){e.n=0},e.exports.luaZ_resizebuffer=function(e,n,R){let C=new Uint8Array(R);n.buffer&&C.set(n.buffer),n.buffer=C},e.exports.MBuffer=class{constructor(){this.buffer=null,this.n=0}},e.exports.ZIO=class{constructor(e,n,R){this.L=e,C("function"==typeof n,"ZIO requires a reader"),this.reader=n,this.data=R,this.n=0,this.buffer=null,this.off=0}zgetc(){return this.n-- >0?this.buffer[this.off++]:s(this)}}},function(e,n,R){let{constant_types:{LUA_TBOOLEAN:C,LUA_TLNGSTR:et},thread_status:{LUA_ERRSYNTAX:ei},to_luastring:eo}=R(1),{LUA_MINBUFFER:el,MAX_INT:eu,lua_assert:ec}=R(4),ef=R(11),eh=R(8),{lisdigit:ep,lislalnum:ed,lislalpha:e_,lisspace:eg,lisxdigit:em}=R(22),eb=R(6),{luaS_bless:ey,luaS_hash:ev,luaS_hashlongstr:ek,luaS_new:eA}=R(10),eL=R(9),{EOZ:ex,luaZ_buffer:ew,luaZ_buffremove:eT,luaZ_resetbuffer:eO,luaZ_resizebuffer:eE}=R(19),eS=eo("_ENV",!0),eN=["and","break","do","else","elseif","end","false","for","function","goto","if","in","local","nil","not","or","repeat","return","then","true","until","while","//","..","...","==",">=","<=","~=","<<",">>","::","<eof>","<number>","<integer>","<name>","<string>"].map((e,n)=>eo(e));let Y=class Y{constructor(){this.r=NaN,this.i=NaN,this.ts=null}};let de=class de{constructor(){this.token=NaN,this.seminfo=new Y}};let _e=function(e,n){let R=e.buff;if(R.n+1>R.buffer.length){R.buffer.length>=eu/2&&Ze(e,eo("lexical element too long",!0),0);let n=2*R.buffer.length;eE(e.L,R,n)}R.buffer[R.n++]=n<0?255+n+1:n},me=function(e,n){if(n<257)return eb.luaO_pushfstring(e.L,eo("'%c'",!0),n);{let R=eN[n-257];return n<289?eb.luaO_pushfstring(e.L,eo("'%s'",!0),R):R}},ve=function(e){return 10===e.current||13===e.current},G=function(e){e.current=e.z.zgetc()},I=function(e){_e(e,e.current),G(e)},eI=new eb.TValue(C,!0),ye=function(e,n){let R=e.L,C=eA(R,n),ei=e.h.strong.get(ek(C));if(ei)C=ei.key.tsvalue();else{let n=new eb.TValue(et,C);eL.luaH_setfrom(R,e.h,n,eI)}return C},be=function(e){let n=e.current;ec(ve(e)),G(e),ve(e)&&e.current!==n&&G(e),++e.linenumber>=eu&&Ze(e,eo("chunk has too many lines",!0),0)},Ue=function(e,n){return e.current===n&&(G(e),!0)},Xe=function(e,n){return(e.current===n[0].charCodeAt(0)||e.current===n[1].charCodeAt(0))&&(I(e),!0)},st=function(e,n){let R="Ee",C=e.current;for(ec(ep(e.current)),I(e),48===C&&Xe(e,"xX")&&(R="Pp");;)if(Xe(e,R)&&Xe(e,"-+"),em(e.current))I(e);else{if(46!==e.current)break;I(e)}let et=new eb.TValue;return 0===eb.luaO_str2num(ew(e.buff),et)&&Ze(e,eo("malformed number",!0),290),et.ttisinteger()?(n.i=et.value,291):(ec(et.ttisfloat()),n.r=et.value,290)},Ze=function(e,n,R){n=ef.luaG_addinfo(e.L,n,e.source,e.linenumber),R&&eb.luaO_pushfstring(e.L,eo("%s near %s"),n,function(e,n){switch(n){case 292:case 293:case 290:case 291:return eb.luaO_pushfstring(e.L,eo("'%s'",!0),ew(e.buff));default:return me(e,n)}}(e,R)),eh.luaD_throw(e.L,ei)},ae=function(e){let n=0,R=e.current;for(ec(91===R||93===R),I(e);61===e.current;)I(e),n++;return e.current===R?n:-n-1},le=function(e,n,R){let C=e.linenumber;I(e),ve(e)&&be(e);let et=!1;for(;!et;)switch(e.current){case ex:Ze(e,eo(`unfinished long ${n?"string":"comment"} (starting at line ${C})`),289);break;case 93:ae(e)===R&&(I(e),et=!0);break;case 10:case 13:_e(e,10),be(e),n||eO(e.buff);break;default:n?I(e):G(e)}n&&(n.ts=ye(e,e.buff.buffer.subarray(2+R,e.buff.n-(2+R))))},Pe=function(e,n,R){n||(e.current!==ex&&I(e),Ze(e,R,293))},Te=function(e){return I(e),Pe(e,em(e.current),eo("hexadecimal digit expected",!0)),eb.luaO_hexavalue(e.current)},ze=function(e){let n=Te(e);return n=(n<<4)+Te(e),eT(e.buff,2),n},g=function(e){let n=new Uint8Array(eb.UTF8BUFFSZ),R=eb.luaO_utf8esc(n,function(e){let n=4;I(e),Pe(e,123===e.current,eo("missing '{'",!0));let R=Te(e);for(I(e);em(e.current);)n++,R=(R<<4)+eb.luaO_hexavalue(e.current),Pe(e,R<=1114111,eo("UTF-8 value too large",!0)),I(e);return Pe(e,125===e.current,eo("missing '}'",!0)),G(e),eT(e.buff,n),R}(e));for(;R>0;R--)_e(e,n[eb.UTF8BUFFSZ-R])},ge=function(e){let n,R=0;for(n=0;n<3&&ep(e.current);n++)R=10*R+e.current-48,I(e);return Pe(e,R<=255,eo("decimal escape too large",!0)),eT(e.buff,n),R},te=function(e,n,R){for(I(e);e.current!==n;)switch(e.current){case ex:Ze(e,eo("unfinished string",!0),289);break;case 10:case 13:Ze(e,eo("unfinished string",!0),293);break;case 92:{let n,R;switch(I(e),e.current){case 97:R=7,n="read_save";break;case 98:R=8,n="read_save";break;case 102:R=12,n="read_save";break;case 110:R=10,n="read_save";break;case 114:R=13,n="read_save";break;case 116:R=9,n="read_save";break;case 118:R=11,n="read_save";break;case 120:R=ze(e),n="read_save";break;case 117:g(e),n="no_save";break;case 10:case 13:be(e),R=10,n="only_save";break;case 92:case 34:case 39:R=e.current,n="read_save";break;case ex:n="no_save";break;case 122:for(eT(e.buff,1),G(e);eg(e.current);)ve(e)?be(e):G(e);n="no_save";break;default:Pe(e,ep(e.current),eo("invalid escape sequence",!0)),R=ge(e),n="only_save"}"read_save"===n&&G(e),"read_save"!==n&&"only_save"!==n||(eT(e.buff,1),_e(e,R));break}default:I(e)}I(e),R.ts=ye(e,e.buff.buffer.subarray(1,e.buff.n-1))},eU=Object.create(null);eN.forEach((e,n)=>eU[ev(e)]=n);let S=function(e,n){for(eO(e.buff);;)switch(ec("number"==typeof e.current),e.current){case 10:case 13:be(e);break;case 32:case 12:case 9:case 11:G(e);break;case 45:if(G(e),45!==e.current)return 45;if(G(e),91===e.current){let n=ae(e);if(eO(e.buff),n>=0){le(e,null,n),eO(e.buff);break}}for(;!ve(e)&&e.current!==ex;)G(e);break;case 91:{let R=ae(e);return R>=0?(le(e,n,R),293):(-1!==R&&Ze(e,eo("invalid long string delimiter",!0),293),91)}case 61:return G(e),Ue(e,61)?282:61;case 60:return G(e),Ue(e,61)?284:Ue(e,60)?286:60;case 62:return G(e),Ue(e,61)?283:Ue(e,62)?287:62;case 47:return G(e),Ue(e,47)?279:47;case 126:return G(e),Ue(e,61)?285:126;case 58:return G(e),Ue(e,58)?288:58;case 34:case 39:return te(e,e.current,n),293;case 46:return I(e),Ue(e,46)?Ue(e,46)?281:280:ep(e.current)?st(e,n):46;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return st(e,n);case ex:return 289;default:if(e_(e.current)){do I(e);while(ed(e.current));let R=ye(e,ew(e.buff));n.ts=R;let C=eU[ek(R)];return void 0!==C&&C<=22?C+257:292}{let n=e.current;return G(e),n}}};e.exports.FIRST_RESERVED=257,e.exports.LUA_ENV=eS,e.exports.LexState=class{constructor(){this.current=NaN,this.linenumber=NaN,this.lastline=NaN,this.t=new de,this.lookahead=new de,this.fs=null,this.L=null,this.z=null,this.buff=null,this.h=null,this.dyd=null,this.source=null,this.envn=null}},e.exports.RESERVED={TK_AND:257,TK_BREAK:258,TK_DO:259,TK_ELSE:260,TK_ELSEIF:261,TK_END:262,TK_FALSE:263,TK_FOR:264,TK_FUNCTION:265,TK_GOTO:266,TK_IF:267,TK_IN:268,TK_LOCAL:269,TK_NIL:270,TK_NOT:271,TK_OR:272,TK_REPEAT:273,TK_RETURN:274,TK_THEN:275,TK_TRUE:276,TK_UNTIL:277,TK_WHILE:278,TK_IDIV:279,TK_CONCAT:280,TK_DOTS:281,TK_EQ:282,TK_GE:283,TK_LE:284,TK_NE:285,TK_SHL:286,TK_SHR:287,TK_DBCOLON:288,TK_EOS:289,TK_FLT:290,TK_INT:291,TK_NAME:292,TK_STRING:293},e.exports.isreserved=function(e){let n=eU[ek(e)];return void 0!==n&&n<=22},e.exports.luaX_lookahead=function(e){return ec(289===e.lookahead.token),e.lookahead.token=S(e,e.lookahead.seminfo),e.lookahead.token},e.exports.luaX_newstring=ye,e.exports.luaX_next=function(e){e.lastline=e.linenumber,289!==e.lookahead.token?(e.t.token=e.lookahead.token,e.t.seminfo.i=e.lookahead.seminfo.i,e.t.seminfo.r=e.lookahead.seminfo.r,e.t.seminfo.ts=e.lookahead.seminfo.ts,e.lookahead.token=289):e.t.token=S(e,e.t.seminfo)},e.exports.luaX_setinput=function(e,n,R,C,et){n.t={token:0,seminfo:new Y},n.L=e,n.current=et,n.lookahead={token:289,seminfo:new Y},n.z=R,n.fs=null,n.linenumber=1,n.lastline=1,n.source=C,n.envn=ey(e,eS),eE(e,n.buff,el)},e.exports.luaX_syntaxerror=function(e,n){Ze(e,n,e.t.token)},e.exports.luaX_token2str=me,e.exports.luaX_tokens=eN},function(e,n,R){let C,et,ei;let{lua:eo,lauxlib:el,lualib:eu,to_luastring:ec}=R(0),{LUA_MULTRET:ef,LUA_OK:eh,LUA_REGISTRYINDEX:ep,LUA_RIDX_MAINTHREAD:ed,LUA_TBOOLEAN:e_,LUA_TFUNCTION:eg,LUA_TLIGHTUSERDATA:em,LUA_TNIL:eb,LUA_TNONE:ey,LUA_TNUMBER:ev,LUA_TSTRING:ek,LUA_TTABLE:eA,LUA_TTHREAD:eL,LUA_TUSERDATA:ex,lua_atnativeerror:ew,lua_call:eT,lua_getfield:eO,lua_gettable:eE,lua_gettop:eS,lua_isnil:eN,lua_isproxy:eI,lua_newuserdata:eU,lua_pcall:eR,lua_pop:eC,lua_pushboolean:eM,lua_pushcfunction:eP,lua_pushinteger:eD,lua_pushlightuserdata:eB,lua_pushliteral:eK,lua_pushnil:eG,lua_pushnumber:eV,lua_pushstring:eF,lua_pushvalue:ej,lua_rawgeti:ez,lua_rawgetp:eH,lua_rawsetp:e$,lua_rotate:eX,lua_setfield:eq,lua_settable:eW,lua_settop:eZ,lua_toboolean:eY,lua_tojsstring:eJ,lua_tonumber:eQ,lua_toproxy:e0,lua_tothread:e1,lua_touserdata:e2,lua_type:e3}=eo,{luaL_argerror:e5,luaL_checkany:e4,luaL_checkoption:e8,luaL_checkstack:e6,luaL_checkudata:e9,luaL_error:e7,luaL_getmetafield:ts,luaL_newlib:to,luaL_newmetatable:tl,luaL_requiref:tu,luaL_setfuncs:tc,luaL_setmetatable:tf,luaL_testudata:th,luaL_tolstring:tp}=el,{luaopen_base:td}=eu,t_="u">typeof window?window:"u">typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:(0,eval)("this");if("u">typeof Reflect)C=Reflect.apply,et=Reflect.construct,ei=Reflect.deleteProperty;else{let e=Function.apply,n=Function.bind;C=function(n,R,C){return e.call(n,R,C)},et=function(e,R){switch(R.length){case 0:return new e;case 1:return new e(R[0]);case 2:return new e(R[0],R[1]);case 3:return new e(R[0],R[1],R[2]);case 4:return new e(R[0],R[1],R[2],R[3])}let C=[null];return C.push.apply(C,R),new(n.apply(e,C))},ei=Function("t","k","delete t[k]")}let tg=String.prototype.concat.bind(""),We=function(e){return"object"==typeof e?null!==e:"function"==typeof e},tm=ec("js object"),vt=function(e,n){let R=th(e,n,tm);return R?R.data:void 0},yt=function(e,n){return e9(e,n,tm).data},Rt=function(e,n){eU(e).data=n,tf(e,tm)},lt=function(e){ez(e,ep,ed);let n=e1(e,-1);return eC(e,1),n},tb=new WeakMap,wt=function(e,n){switch(typeof n){case"undefined":eG(e);break;case"number":eV(e,n);break;case"string":eF(e,ec(n));break;case"boolean":eM(e,n);break;case"symbol":eB(e,n);break;case"function":if(eI(n,e)){n(e);break}case"object":if(null===n){if(eH(e,ep,null)!==ex)throw Error("js library not loaded into lua_State");break}default:{let R=tb.get(lt(e));if(!R)throw Error("js library not loaded into lua_State");let C=R.get(n);C?C(e):(Rt(e,n),C=e0(e,-1),R.set(n,C))}}},o=function(e){let n=e2(e,1);return wt(e,n),1},c=function(e,n){switch(e3(e,n)){case ey:case eb:return;case e_:return eY(e,n);case em:return e2(e,n);case ev:return eQ(e,n);case ek:return eJ(e,n);case ex:{let R=vt(e,n);if(void 0!==R)return R}default:return J(e,e0(e,n))}},T=function(e,n){let R=eR(e,n,1,0),C=c(e,-1);if(eC(e,1),R===eh)return C;throw C},p=function(e,n,R,C,et){if(!We(C))throw TypeError("`args` argument must be an object");let ei=+C.length;ei>=0||(ei=0),e6(e,2+ei,null);let eo=eS(e);n(e),wt(e,R);for(let n=0;n<ei;n++)wt(e,C[n]);if(eR(e,1+ei,et,0)===eh){let n=eS(e)-eo,R=Array(n);for(let C=0;C<n;C++)R[C]=c(e,eo+C+1);return eZ(e,eo),R}{let n=c(e,-1);throw eZ(e,eo),n}},x=function(e){return eE(e,1),1},$=function(e,n,R){return e6(e,3,null),eP(e,x),n(e),wt(e,R),T(e,2)},U=function(e,n,R){if(e6(e,3,null),eP(e,x),n(e),wt(e,R),eR(e,2,1,0)===eh){let n=eN(e,-1);return eC(e,1),!n}{let n=c(e,-1);throw eC(e,1),n}},pe=function(e,n,R,C){if(e6(e,4,null),eP(e,function(e){return eW(e,1),0}),n(e),wt(e,R),wt(e,C),eR(e,3,0,0)!==eh){let n=c(e,-1);throw eC(e,1),n}},He=function(e,n,R){if(e6(e,4,null),eP(e,function(e){return eW(e,1),0}),n(e),wt(e,R),eG(e),eR(e,3,0,0)!==eh){let n=c(e,-1);throw eC(e,1),n}},Qe=function(e,n){return e6(e,2,null),eP(e,function(e){return tp(e,1),1}),n(e),T(e,1)},kt=function(){let e=this.L;e6(e,3,null);let n=eS(e);if(this.iter(e),this.state(e),this.last(e),eR(e,2,ef,0)===eh){let R;if(this.last=e0(e,n+1),eN(e,-1))R={done:!0,value:void 0};else{let C=eS(e)-n,et=Array(C);for(let R=0;R<C;R++)et[R]=c(e,n+R+1);R={done:!1,value:et}}return eZ(e,n),R}{let n=c(e,-1);throw eC(e,1),n}},J=function(e,n){let R=lt(e),Me=function(){return p(R,n,this,arguments,1)[0]};Me.apply=function(e,C){return p(R,n,e,C,1)[0]},Me.invoke=function(e,C){return p(R,n,e,C,ef)},Me.get=function(e){return $(R,n,e)},Me.has=function(e){return U(R,n,e)},Me.set=function(e,C){return pe(R,n,e,C)},Me.delete=function(e){return He(R,n,e)},Me.toString=function(){return Qe(R,n)},"function"==typeof Symbol&&(Me[Symbol.toStringTag]="Fengari object",Me[Symbol.iterator]=function(){return function(e,n){if(e6(e,1,null),eP(e,function(e){return tu(e,ec("_G"),td,0),eO(e,-1,ec("pairs")),n(e),eT(e,1,3),3}),eR(e,0,3,0)===eh){let n=e0(e,-3),R=e0(e,-2),C=e0(e,-1);return eC(e,3),{L:e,iter:n,state:R,last:C,next:kt}}{let n=c(e,-1);throw eC(e,1),n}}(R,n)},Symbol.toPrimitive&&(Me[Symbol.toPrimitive]=function(e){if("string"===e)return Qe(R,n)}));let C=tb.get(R);if(!C)throw Error("js library not loaded into lua_State");return C.set(Me,n),Me},ty={new:function(e){let n=c(e,1),R=eS(e)-1,C=Array(R);for(let n=0;n<R;n++)C[n]=c(e,n+2);return wt(e,et(n,C)),1},tonumber:function(e){let n=c(e,1);return eV(e,+n),1},tostring:function(e){let n=c(e,1);return eK(e,tg(n)),1},instanceof:function(e){let n=c(e,1),R=c(e,2);return eM(e,n instanceof R),1},typeof:function(e){let n=c(e,1);return eK(e,typeof n),1}};if("function"==typeof Symbol&&Symbol.iterator){let V=function(e,n){let R=yt(e,n),et=R[Symbol.iterator];et||e5(e,n,ec("object not iterable"));let ei=C(et,R,[]);return We(ei)||e5(e,n,ec("Result of the Symbol.iterator method is not an object")),ei},xe=function(e){let n=c(e,1).next();return n.done?0:(wt(e,n.value),1)};ty.of=function(e){let n=V(e,1);return eP(e,xe),wt(e,n),2}}if("function"==typeof Proxy&&"function"==typeof Symbol){let e=Symbol("lua_State"),n=Symbol("fengari-proxy"),R={apply:function(R,C,et){return p(R[e],R[n],C,et,1)[0]},construct:function(R,C){let et=R[e],ei=R[n],eo=C.length;e6(et,2+eo,null),ei(et);let el=eS(et);if(ts(et,el,ec("construct"))===eb)throw eC(et,1),TypeError("not a constructor");eX(et,el,1);for(let e=0;e<eo;e++)wt(et,C[e]);return T(et,1+eo)},defineProperty:function(R,C,et){let ei=R[e],eo=R[n];return e6(ei,4,null),eo(ei),ts(ei,-1,ec("defineProperty"))===eb?(eC(ei,1),!1):(eX(ei,-2,1),wt(ei,C),wt(ei,et),T(ei,3))},deleteProperty:function(R,C){return He(R[e],R[n],C)},get:function(R,C){return $(R[e],R[n],C)},getOwnPropertyDescriptor:function(R,C){let et=R[e],ei=R[n];if(e6(et,3,null),ei(et),ts(et,-1,ec("getOwnPropertyDescriptor"))!==eb)return eX(et,-2,1),wt(et,C),T(et,2);eC(et,1)},getPrototypeOf:function(R){let C=R[e],et=R[n];return e6(C,2,null),et(C),ts(C,-1,ec("getPrototypeOf"))===eb?(eC(C,1),null):(eX(C,-2,1),T(C,1))},has:function(R,C){return U(R[e],R[n],C)},ownKeys:function(R){let C=R[e],et=R[n];if(e6(C,2,null),et(C),ts(C,-1,ec("ownKeys"))===eb)throw eC(C,1),Error("ownKeys unknown for fengari object");return eX(C,-2,1),T(C,1)},set:function(R,C,et){return pe(R[e],R[n],C,et),!0},setPrototypeOf:function(R,C){let et=R[e],ei=R[n];return e6(et,3,null),ei(et),ts(et,-1,ec("setPrototypeOf"))===eb?(eC(et,1),!1):(eX(et,-2,1),wt(et,C),T(et,2))}},Me=function(){let e=(function(){}).bind();return delete e.length,delete e.name,e},C=Function("return ()=>void 0;"),ct=function(){let e=C();return delete e.length,delete e.name,e},at=function(C,et,ei){let eo;let el=lt(C);switch(ei){case"function":eo=Me();break;case"arrow_function":eo=ct();break;case"object":eo={};break;default:throw TypeError("invalid type to createproxy")}return eo[n]=et,eo[e]=el,new Proxy(eo,R)},et=["function","arrow_function","object"],ei=et.map(e=>ec(e));ty.createproxy=function(e){e4(e,1);let n=et[e8(e,2,ei[0],ei)],R=at(e,e0(e,1),n);return wt(e,R),1}}let tv={__index:function(e){let n=yt(e,1),R=c(e,2);return wt(e,n[R]),1},__newindex:function(e){let n=yt(e,1),R=c(e,2),C=c(e,3);return void 0===C?ei(n,R):n[R]=C,0},__tostring:function(e){let n=tg(yt(e,1));return eF(e,ec(n)),1},__call:function(e){let n,R=yt(e,1),et=eS(e)-1,ei=Array(Math.max(0,et-1));if(et>0&&(n=c(e,2),et-- >0))for(let n=0;n<et;n++)ei[n]=c(e,n+3);return wt(e,C(R,n,ei)),1},__pairs:function(e){let n,R,et,ei,eo=yt(e,1);if("function"!=typeof Symbol||void 0===(n=eo[Symbol.for("__pairs")]))R=function(e){if(this.index>=this.keys.length)return;let n=this.keys[this.index++];return[n,this.object[n]]},et={object:eo,keys:Object.keys(eo),index:0};else{let el=C(n,eo,[]);void 0===el&&e7(e,ec("bad '__pairs' result (object with keys 'iter', 'state', 'first' expected)")),void 0===(R=el.iter)&&e7(e,ec("bad '__pairs' result (object.iter is missing)")),et=el.state,ei=el.first}return eP(e,function(){let n=c(e,1),et=c(e,2),ei=C(R,n,[et]);if(void 0===ei)return 0;Array.isArray(ei)||e7(e,ec("bad iterator result (Array or undefined expected)")),e6(e,ei.length,null);for(let n=0;n<ei.length;n++)wt(e,ei[n]);return ei.length}),wt(e,et),wt(e,ei),3},__len:function(e){let n,R=yt(e,1);return wt(e,"function"!=typeof Symbol||void 0===(n=R[Symbol.for("__len")])?R.length:C(n,R,[])),1}};e.exports.FENGARI_INTEROP_VERSION="0.1",e.exports.FENGARI_INTEROP_VERSION_NUM=1,e.exports.FENGARI_INTEROP_RELEASE="0.1.2",e.exports.checkjs=yt,e.exports.testjs=vt,e.exports.pushjs=Rt,e.exports.push=wt,e.exports.tojs=c,e.exports.luaopen_js=function(e){return tb.set(lt(e),new WeakMap),ew(e,o),to(e,ty),eK(e,"0.1"),eq(e,-2,ec("_VERSION")),eD(e,1),eq(e,-2,ec("_VERSION_NUM")),eK(e,"0.1.2"),eq(e,-2,ec("_RELEASE")),tl(e,tm),tc(e,tv,0),eC(e,1),Rt(e,null),ej(e,-1),e$(e,ep,null),eq(e,-2,ec("null")),wt(e,t_),eq(e,-2,ec("global")),1}},function(e,n,R){let{luastring_of:C}=R(1),et=C(0,0,0,0,0,0,0,0,0,0,8,8,8,8,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,22,22,22,22,22,22,22,22,22,22,4,4,4,4,4,4,4,21,21,21,21,21,21,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,4,4,4,5,4,21,21,21,21,21,21,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);e.exports.lisdigit=function(e){return(2&et[e+1])!=0},e.exports.lislalnum=function(e){return(3&et[e+1])!=0},e.exports.lislalpha=function(e){return(1&et[e+1])!=0},e.exports.lisprint=function(e){return(4&et[e+1])!=0},e.exports.lisspace=function(e){return(8&et[e+1])!=0},e.exports.lisxdigit=function(e){return(16&et[e+1])!=0}},function(e,n,R){let{LUA_MULTRET:C,to_luastring:et}=R(1),{BinOpr:{OPR_ADD:ei,OPR_AND:eo,OPR_BAND:el,OPR_BOR:eu,OPR_BXOR:ec,OPR_CONCAT:ef,OPR_DIV:eh,OPR_EQ:ep,OPR_GE:ed,OPR_GT:e_,OPR_IDIV:eg,OPR_LE:em,OPR_LT:eb,OPR_MOD:ey,OPR_MUL:ev,OPR_NE:ek,OPR_NOBINOPR:eA,OPR_OR:eL,OPR_POW:ex,OPR_SHL:ew,OPR_SHR:eT,OPR_SUB:eO},UnOpr:{OPR_BNOT:eE,OPR_LEN:eS,OPR_MINUS:eN,OPR_NOT:eI,OPR_NOUNOPR:eU},NO_JUMP:eR,getinstruction:eC,luaK_checkstack:eM,luaK_codeABC:eP,luaK_codeABx:eD,luaK_codeAsBx:eB,luaK_codek:eK,luaK_concat:eG,luaK_dischargevars:eV,luaK_exp2RK:eF,luaK_exp2anyreg:ej,luaK_exp2anyregup:ez,luaK_exp2nextreg:eH,luaK_exp2val:e$,luaK_fixline:eX,luaK_getlabel:eq,luaK_goiffalse:eW,luaK_goiftrue:eZ,luaK_indexed:eY,luaK_infix:eJ,luaK_intK:eQ,luaK_jump:e0,luaK_jumpto:e1,luaK_nil:e2,luaK_patchclose:e3,luaK_patchlist:e5,luaK_patchtohere:e4,luaK_posfix:e8,luaK_prefix:e6,luaK_reserveregs:e9,luaK_ret:e7,luaK_self:ts,luaK_setlist:to,luaK_setmultret:tl,luaK_setoneret:tu,luaK_setreturns:tc,luaK_storevar:tf,luaK_stringK:th}=R(35),tp=R(8),td=R(13),t_=R(20),{LUAI_MAXCCALLS:tg,MAX_INT:tm,lua_assert:tb}=R(4),ty=R(6),{OpCodesI:{OP_CALL:tv,OP_CLOSURE:tk,OP_FORLOOP:tA,OP_FORPREP:tL,OP_GETUPVAL:tx,OP_MOVE:tw,OP_NEWTABLE:tT,OP_SETTABLE:tO,OP_TAILCALL:tE,OP_TFORCALL:tS,OP_TFORLOOP:tN,OP_VARARG:tI},LFIELDS_PER_FLUSH:tU,SETARG_B:tR,SETARG_C:tC,SET_OPCODE:tM}=R(16),{luaS_eqlngstr:tP,luaS_new:tD,luaS_newliteral:tB}=R(10),tK=R(9),tG=td.Proto,tV=t_.RESERVED,Me=function(e){return e===tF.VCALL||e===tF.VVARARG},tt=function(e,n){return tP(e,n)};let ct=class ct{constructor(){this.previous=null,this.firstlabel=NaN,this.firstgoto=NaN,this.nactvar=NaN,this.upval=NaN,this.isloop=NaN}};let tF={VVOID:0,VNIL:1,VTRUE:2,VFALSE:3,VK:4,VKFLT:5,VKINT:6,VNONRELOC:7,VLOCAL:8,VUPVAL:9,VINDEXED:10,VJMP:11,VRELOCABLE:12,VCALL:13,VVARARG:14};let _t=class _t{constructor(){this.k=NaN,this.u={ival:NaN,nval:NaN,info:NaN,ind:{idx:NaN,t:NaN,vt:NaN}},this.t=NaN,this.f=NaN}to(e){this.k=e.k,this.u=e.u,this.t=e.t,this.f=e.f}};let Bt=class Bt{constructor(){this.f=null,this.prev=null,this.ls=null,this.bl=null,this.pc=NaN,this.lasttarget=NaN,this.jpc=NaN,this.nk=NaN,this.np=NaN,this.firstlocal=NaN,this.nlocvars=NaN,this.nactvar=NaN,this.nups=NaN,this.freereg=NaN}};let gt=class gt{constructor(){this.arr=[],this.n=NaN,this.size=NaN}};let Ot=function(e,n){e.t.token=0,t_.luaX_syntaxerror(e,n)},At=function(e,n){t_.luaX_syntaxerror(e,ty.luaO_pushfstring(e.L,et("%s expected",!0),t_.luaX_token2str(e,n)))},Ct=function(e,n,R,C){let ei,eo,el,eu;n>R&&(ei=e.ls.L,el=0===(eo=e.f.linedefined)?et("main function",!0):ty.luaO_pushfstring(ei,et("function at line %d",!0),eo),eu=ty.luaO_pushfstring(ei,et("too many %s (limit is %d) in %s",!0),C,R,el),t_.luaX_syntaxerror(e.ls,eu))},Mt=function(e,n){return e.t.token===n&&(t_.luaX_next(e),!0)},Zt=function(e,n){e.t.token!==n&&At(e,n)},Dt=function(e,n){Zt(e,n),t_.luaX_next(e)},qt=function(e,n,R){n||t_.luaX_syntaxerror(e,R)},$t=function(e,n,R,C){Mt(e,n)||(C===e.linenumber?At(e,n):t_.luaX_syntaxerror(e,ty.luaO_pushfstring(e.L,et("%s expected (to close %s at line %d)"),t_.luaX_token2str(e,n),t_.luaX_token2str(e,R),C)))},j=function(e){Zt(e,tV.TK_NAME);let n=e.t.seminfo.ts;return t_.luaX_next(e),n},Le=function(e,n,R){e.f=e.t=eR,e.k=n,e.u.info=R},Ye=function(e,n,R){Le(n,tF.VK,th(e.fs,R))},Je=function(e,n){Ye(e,n,j(e))},ot=function(e,n){let R,C;let ei=e.fs,eo=e.dyd,el=((C=(R=e.fs).f).locvars[R.nlocvars]=new ty.LocVar,C.locvars[R.nlocvars].varname=n,R.nlocvars++);Ct(ei,eo.actvar.n+1-ei.firstlocal,200,et("local variables",!0)),eo.actvar.arr[eo.actvar.n]=new class{constructor(){this.idx=NaN}},eo.actvar.arr[eo.actvar.n].idx=el,eo.actvar.n++},$e=function(e,n){ot(e,t_.luaX_newstring(e,et(n,!0)))},qe=function(e,n){let R=e.ls.dyd.actvar.arr[e.firstlocal+n].idx;return tb(R<e.nlocvars),e.f.locvars[R]},Ve=function(e,n){let R=e.fs;for(R.nactvar=R.nactvar+n;n;n--)qe(R,R.nactvar-n).startpc=R.pc},rt=function(e,n,R){let C=e.f;return Ct(e,e.nups+1,td.MAXUPVAL,et("upvalues",!0)),C.upvalues[e.nups]={instack:R.k===tF.VLOCAL,idx:R.u.info,name:n},e.nups++},ht=function(e,n,R,C){if(null===e)Le(R,tF.VVOID,0);else{let et=function(e,n){for(let R=e.nactvar-1;R>=0;R--)if(tt(n,qe(e,R).varname))return R;return -1}(e,n);if(et>=0)Le(R,tF.VLOCAL,et),C||function(e,n){let R=e.bl;for(;R.nactvar>n;)R=R.previous;R.upval=1}(e,et);else{let C=function(e,n){let R=e.f.upvalues;for(let C=0;C<e.nups;C++)if(tt(R[C].name,n))return C;return -1}(e,n);if(C<0){if(ht(e.prev,n,R,0),R.k===tF.VVOID)return;C=rt(e,n,R)}Le(R,tF.VUPVAL,C)}}},k=function(e,n){let R=j(e),C=e.fs;if(ht(C,R,n,1),n.k===tF.VVOID){let et=new _t;ht(C,e.envn,n,1),tb(n.k!==tF.VVOID),Ye(e,et,R),eY(C,n,et)}},se=function(e,n,R,C){let et=e.fs,ei=n-R;if(Me(C.k))++ei<0&&(ei=0),tc(et,C,ei),ei>1&&e9(et,ei-1);else if(C.k!==tF.VVOID&&eH(et,C),ei>0){let e=et.freereg;e9(et,ei),e2(et,e,ei)}R>n&&(e.fs.freereg-=R-n)},re=function(e){let n=e.L;++n.nCcalls,Ct(e.fs,n.nCcalls,tg,et("JS levels",!0))},Ee=function(e){return e.L.nCcalls--},we=function(e,n,R){let C=e.fs,ei=e.dyd.gt,eo=ei.arr[n];if(tb(tt(eo.name,R.name)),eo.nactvar<R.nactvar){let n=qe(C,eo.nactvar).varname,R=ty.luaO_pushfstring(e.L,et("<goto %s> at line %d jumps into the scope of local '%s'"),eo.name.getstr(),eo.line,n.getstr());Ot(e,R)}e5(C,eo.pc,R.pc);for(let e=n;e<ei.n-1;e++)ei.arr[e]=ei.arr[e+1];ei.n--},Ae=function(e,n){let R=e.fs.bl,C=e.dyd,et=C.gt.arr[n];for(let ei=R.firstlabel;ei<C.label.n;ei++){let eo=C.label.arr[ei];if(tt(eo.name,et.name))return et.nactvar>eo.nactvar&&(R.upval||C.label.n>R.firstlabel)&&e3(e.fs,et.pc,eo.nactvar),we(e,n,eo),!0}return!1},ft=function(e,n,R,C,et){let ei=n.n;return n.arr[ei]=new class{constructor(){this.name=null,this.pc=NaN,this.line=NaN,this.nactvar=NaN}},n.arr[ei].name=R,n.arr[ei].line=C,n.arr[ei].nactvar=e.fs.nactvar,n.arr[ei].pc=et,n.n=ei+1,ei},mt=function(e,n){let R=e.dyd.gt,C=e.fs.bl.firstgoto;for(;C<R.n;)tt(R.arr[C].name,n.name)?we(e,C,n):C++},Lt=function(e,n,R){n.isloop=R,n.nactvar=e.nactvar,n.firstlabel=e.ls.dyd.label.n,n.firstgoto=e.ls.dyd.gt.n,n.upval=0,n.previous=e.bl,e.bl=n,tb(e.freereg===e.nactvar)},It=function(e,n,R){n.prev=e.fs,n.ls=e,e.fs=n,n.pc=0,n.lasttarget=0,n.jpc=eR,n.freereg=0,n.nk=0,n.np=0,n.nups=0,n.nlocvars=0,n.nactvar=0,n.firstlocal=e.dyd.actvar.n,n.bl=null;let C=n.f;C.source=e.source,C.maxstacksize=2,Lt(n,R,!1)},P=function(e){var n;let R,C,ei,eo=e.bl,el=e.ls;if(eo.previous&&eo.upval){let n=e0(e);e3(e,n,eo.nactvar),e4(e,n)}eo.isloop&&(R=tB(el.L,"break"),C=ft(el,el.dyd.label,R,0,el.fs.pc),mt(el,el.dyd.label.arr[C])),e.bl=eo.previous,function(e,n){for(e.ls.dyd.actvar.n-=e.nactvar-n;e.nactvar>n;)qe(e,--e.nactvar).endpc=e.pc}(e,eo.nactvar),tb(eo.nactvar===e.nactvar),e.freereg=e.nactvar,el.dyd.label.n=eo.firstlabel,eo.previous?function(e,n){let R=n.firstgoto,C=e.ls.dyd.gt;for(;R<C.n;){let et=C.arr[R];et.nactvar>n.nactvar&&(n.upval&&e3(e,et.pc,n.nactvar),et.nactvar=n.nactvar),Ae(e.ls,R)||R++}}(e,eo):eo.firstgoto<el.dyd.gt.n&&(n=el.dyd.gt.arr[eo.firstgoto],ei=t_.isreserved(n.name)?"<%s> at line %d not inside a loop":"no visible label '%s' for <goto> at line %d",ei=ty.luaO_pushfstring(el.L,et(ei),n.name.getstr(),n.line),Ot(el,ei))},ne=function(e){let n=e.fs;e7(n,0,0),P(n),tb(null===n.bl),e.fs=n.prev},Ne=function(e,n){switch(e.t.token){case tV.TK_ELSE:case tV.TK_ELSEIF:case tV.TK_END:case tV.TK_EOS:return!0;case tV.TK_UNTIL:return n;default:return!1}},it=function(e){for(;!Ne(e,1);){if(e.t.token===tV.TK_RETURN)return void Br(e);Br(e)}},xt=function(e,n){let R=e.fs,C=new _t;ez(R,n),t_.luaX_next(e),Je(e,C),eY(R,n,C)},jt=function(e,n){t_.luaX_next(e),cn(e,n),e$(e.fs,n),Dt(e,93)},Xt=function(e,n){let R=e.fs,C=e.fs.freereg,ei=new _t,eo=new _t;e.t.token===tV.TK_NAME?(Ct(R,n.nh,tm,et("items in a constructor",!0)),Je(e,ei)):jt(e,ei),n.nh++,Dt(e,61);let el=eF(R,ei);cn(e,eo),eP(R,tO,n.t.u.info,el,eF(R,eo)),R.freereg=C},pn=function(e,n){n.v.k!==tF.VVOID&&(eH(e,n.v),n.v.k=tF.VVOID,n.tostore===tU&&(to(e,n.t.u.info,n.na,n.tostore),n.tostore=0))},bn=function(e,n){cn(e,n.v),Ct(e.fs,n.na,tm,et("items in a constructor",!0)),n.na++,n.tostore++},vn=function(e,n){switch(e.t.token){case tV.TK_NAME:61!==t_.luaX_lookahead(e)?bn(e,n):Xt(e,n);break;case 91:Xt(e,n);break;default:bn(e,n)}},ln=function(e,n){let R=e.fs,et=e.linenumber,ei=eP(R,tT,0,0,0),eo=new class{constructor(){this.v=new _t,this.t=new _t,this.nh=NaN,this.na=NaN,this.tostore=NaN}};eo.na=eo.nh=eo.tostore=0,eo.t=n,Le(n,tF.VRELOCABLE,ei),Le(eo.v,tF.VVOID,0),eH(e.fs,n),Dt(e,123);do{if(tb(eo.v.k===tF.VVOID||eo.tostore>0),125===e.t.token)break;pn(R,eo),vn(e,eo)}while(Mt(e,44)||Mt(e,59));$t(e,125,123,et),0!==eo.tostore&&(Me(eo.v.k)?(tl(R,eo.v),to(R,eo.t.u.info,eo.na,C),eo.na--):(eo.v.k!==tF.VVOID&&eH(R,eo.v),to(R,eo.t.u.info,eo.na,eo.tostore))),tR(R.f.code[ei],ty.luaO_int2fb(eo.na)),tC(R.f.code[ei],ty.luaO_int2fb(eo.nh))},zt=function(e,n,R,C){let ei,eo,el,eu,ec=new Bt,ef=new ct;ec.f=(ei=e.L,eo=new tG(ei),(el=e.fs).f.p[el.np++]=eo,eo),ec.f.linedefined=C,It(e,ec,ef),Dt(e,40),R&&($e(e,"self"),Ve(e,1)),function(e){let n=e.fs,R=n.f,C=0;if(R.is_vararg=!1,41!==e.t.token)do switch(e.t.token){case tV.TK_NAME:ot(e,j(e)),C++;break;case tV.TK_DOTS:t_.luaX_next(e),R.is_vararg=!0;break;default:t_.luaX_syntaxerror(e,et("<name> or '...' expected",!0))}while(!R.is_vararg&&Mt(e,44));Ve(e,C),R.numparams=n.nactvar,e9(n,n.nactvar)}(e),Dt(e,41),it(e),ec.f.lastlinedefined=e.linenumber,$t(e,tV.TK_END,tV.TK_FUNCTION,C),eu=e.fs.prev,Le(n,tF.VRELOCABLE,eD(eu,tk,0,eu.np-1)),eH(eu,n),ne(e)},un=function(e,n){let R=1;for(cn(e,n);Mt(e,44);)eH(e.fs,n),cn(e,n),R++;return R},bs=function(e,n,R){let ei,eo=e.fs,el=new _t;switch(e.t.token){case 40:t_.luaX_next(e),41===e.t.token?el.k=tF.VVOID:(un(e,el),tl(eo,el)),$t(e,41,40,R);break;case 123:ln(e,el);break;case tV.TK_STRING:Ye(e,el,e.t.seminfo.ts),t_.luaX_next(e);break;default:t_.luaX_syntaxerror(e,et("function arguments expected",!0))}tb(n.k===tF.VNONRELOC);let eu=n.u.info;Me(el.k)?ei=C:(el.k!==tF.VVOID&&eH(eo,el),ei=eo.freereg-(eu+1)),Le(n,tF.VCALL,eP(eo,tv,eu,ei+1,2)),eX(eo,R),eo.freereg=eu+1},Ur=function(e,n){let R=e.fs,C=e.linenumber;for(!function(e,n){switch(e.t.token){case 40:{let R=e.linenumber;return t_.luaX_next(e),cn(e,n),$t(e,41,40,R),void eV(e.fs,n)}case tV.TK_NAME:return void k(e,n);default:t_.luaX_syntaxerror(e,et("unexpected symbol",!0))}}(e,n);;)switch(e.t.token){case 46:xt(e,n);break;case 91:{let C=new _t;ez(R,n),jt(e,C),eY(R,n,C);break}case 58:{let et=new _t;t_.luaX_next(e),Je(e,et),ts(R,n,et),bs(e,n,C);break}case 40:case tV.TK_STRING:case 123:eH(R,n),bs(e,n,C);break;default:return}},tj=[{left:10,right:10},{left:10,right:10},{left:11,right:11},{left:11,right:11},{left:14,right:13},{left:11,right:11},{left:11,right:11},{left:6,right:6},{left:4,right:4},{left:5,right:5},{left:7,right:7},{left:7,right:7},{left:9,right:8},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:3,right:3},{left:2,right:2},{left:1,right:1}],Ir=function(e,n,R){re(e);let C=function(e){switch(e){case tV.TK_NOT:return eI;case 45:return eN;case 126:return eE;case 35:return eS;default:return eU}}(e.t.token);if(C!==eU){let R=e.linenumber;t_.luaX_next(e),Ir(e,n,12),e6(e.fs,C,n,R)}else!function(e,n){switch(e.t.token){case tV.TK_FLT:Le(n,tF.VKFLT,0),n.u.nval=e.t.seminfo.r;break;case tV.TK_INT:Le(n,tF.VKINT,0),n.u.ival=e.t.seminfo.i;break;case tV.TK_STRING:Ye(e,n,e.t.seminfo.ts);break;case tV.TK_NIL:Le(n,tF.VNIL,0);break;case tV.TK_TRUE:Le(n,tF.VTRUE,0);break;case tV.TK_FALSE:Le(n,tF.VFALSE,0);break;case tV.TK_DOTS:{let R=e.fs;qt(e,R.f.is_vararg,et("cannot use '...' outside a vararg function",!0)),Le(n,tF.VVARARG,eP(R,tI,0,1,0));break}case 123:return void ln(e,n);case tV.TK_FUNCTION:return t_.luaX_next(e),void zt(e,n,0,e.linenumber);default:return void Ur(e,n)}t_.luaX_next(e)}(e,n);let eR=function(e){switch(e){case 43:return ei;case 45:return eO;case 42:return ev;case 37:return ey;case 94:return ex;case 47:return eh;case tV.TK_IDIV:return eg;case 38:return el;case 124:return eu;case 126:return ec;case tV.TK_SHL:return ew;case tV.TK_SHR:return eT;case tV.TK_CONCAT:return ef;case tV.TK_NE:return ek;case tV.TK_EQ:return ep;case 60:return eb;case tV.TK_LE:return em;case 62:return e_;case tV.TK_GE:return ed;case tV.TK_AND:return eo;case tV.TK_OR:return eL;default:return eA}}(e.t.token);for(;eR!==eA&&tj[eR].left>R;){let R=new _t,C=e.linenumber;t_.luaX_next(e),eJ(e.fs,eR,n);let et=Ir(e,R,tj[eR].right);e8(e.fs,eR,n,R,C),eR=et}return Ee(e),eR},cn=function(e,n){Ir(e,n,0)},er=function(e){let n=e.fs;Lt(n,new ct,0),it(e),P(n)};let ys=class ys{constructor(){this.prev=null,this.v=new _t}};let ks=function(e,n,R){var C;let ei=new _t;if(qt(e,(C=n.v.k,tF.VLOCAL<=C&&C<=tF.VINDEXED),et("syntax error",!0)),Mt(e,44)){let C=new ys;C.prev=n,Ur(e,C.v),C.v.k!==tF.VINDEXED&&function(e,n,R){let C=e.fs,et=C.freereg,ei=!1;for(;n;n=n.prev)n.v.k===tF.VINDEXED&&(n.v.u.ind.vt===R.k&&n.v.u.ind.t===R.u.info&&(ei=!0,n.v.u.ind.vt=tF.VLOCAL,n.v.u.ind.t=et),R.k===tF.VLOCAL&&n.v.u.ind.idx===R.u.info&&(ei=!0,n.v.u.ind.idx=et));ei&&(eP(C,R.k===tF.VLOCAL?tw:tx,et,R.u.info,0),e9(C,1))}(e,n,C.v),Ct(e.fs,R+e.L.nCcalls,tg,et("JS levels",!0)),ks(e,C,R+1)}else{Dt(e,61);let C=un(e,ei);if(C===R)return tu(e.fs,ei),void tf(e.fs,n.v,ei);se(e,R,C,ei)}Le(ei,tF.VNONRELOC,e.fs.freereg-1),tf(e.fs,n.v,ei)},Ls=function(e){let n=new _t;return cn(e,n),n.k===tF.VNIL&&(n.k=tF.VFALSE),eZ(e.fs,n),n.f},ws=function(e,n){let R,C=e.linenumber;Mt(e,tV.TK_GOTO)?R=j(e):(t_.luaX_next(e),R=tB(e.L,"break"));let et=ft(e,e.dyd.gt,R,C,n);Ae(e,et)},Ka=function(e,n,R){let C,ei=e.fs,eo=e.dyd.label;(function(e,n,R){for(let C=e.bl.firstlabel;C<n.n;C++)if(tt(R,n.arr[C].name)){let ei=ty.luaO_pushfstring(e.ls.L,et("label '%s' already defined on line %d",!0),R.getstr(),n.arr[C].line);Ot(e.ls,ei)}})(ei,eo,n),Dt(e,tV.TK_DBCOLON),C=ft(e,eo,n,R,eq(ei)),function(e){for(;59===e.t.token||e.t.token===tV.TK_DBCOLON;)Br(e)}(e),Ne(e,0)&&(eo.arr[C].nactvar=ei.bl.nactvar),mt(e,eo.arr[C])},Pr=function(e){let n=new _t;return cn(e,n),eH(e.fs,n),tb(n.k===tF.VNONRELOC),n.u.info},As=function(e,n,R,C,et){let ei,eo=new ct,el=e.fs;Ve(e,3),Dt(e,tV.TK_DO);let eu=et?eB(el,tL,n,eR):e0(el);Lt(el,eo,0),Ve(e,C),e9(el,C),er(e),P(el),e4(el,eu),et?ei=eB(el,tA,n,eR):(eP(el,tS,n,0,C),eX(el,R),ei=eB(el,tN,n+2,eR)),e5(el,ei,eu+1),eX(el,R)},$a=function(e,n){let R=e.fs;Lt(R,new ct,1),t_.luaX_next(e);let C=j(e);switch(e.t.token){case 61:let ei,eo;eo=(ei=e.fs).freereg,$e(e,"(for index)"),$e(e,"(for limit)"),$e(e,"(for step)"),ot(e,C),Dt(e,61),Pr(e),Dt(e,44),Pr(e),Mt(e,44)?Pr(e):(eK(ei,ei.freereg,eQ(ei,1)),e9(ei,1)),As(e,eo,n,1,1);break;case 44:case tV.TK_IN:!function(e,n){let R=e.fs,C=new _t,et=4,ei=R.freereg;for($e(e,"(for generator)"),$e(e,"(for state)"),$e(e,"(for control)"),ot(e,n);Mt(e,44);)ot(e,j(e)),et++;Dt(e,tV.TK_IN);let eo=e.linenumber;se(e,3,un(e,C),C),eM(R,3),As(e,ei,eo,et-3,0)}(e,C);break;default:t_.luaX_syntaxerror(e,et("'=' or 'in' expected",!0))}$t(e,tV.TK_END,tV.TK_FOR,n),P(R)},xs=function(e,n){let R,C=new ct,et=e.fs,ei=new _t;if(t_.luaX_next(e),cn(e,ei),Dt(e,tV.TK_THEN),e.t.token===tV.TK_GOTO||e.t.token===tV.TK_BREAK){for(eW(e.fs,ei),Lt(et,C,!1),ws(e,ei.t);Mt(e,59););if(Ne(e,0))return P(et),n;R=e0(et)}else eZ(e.fs,ei),Lt(et,C,!1),R=ei.f;return it(e),P(et),e.t.token!==tV.TK_ELSE&&e.t.token!==tV.TK_ELSEIF||(n=eG(et,n,e0(et))),e4(et,R),n},Xa=function(e,n){let R=new _t,C=new _t;t_.luaX_next(e);let et=function(e,n){let R=0;for(k(e,n);46===e.t.token;)xt(e,n);return 58===e.t.token&&(R=1,xt(e,n)),R}(e,R);zt(e,C,et,n),tf(e.fs,R,C),eX(e.fs,n)},Br=function(e){let n=e.linenumber;switch(re(e),e.t.token){case 59:t_.luaX_next(e);break;case tV.TK_IF:!function(e,n){let R=e.fs,C=eR;for(C=xs(e,C);e.t.token===tV.TK_ELSEIF;)C=xs(e,C);Mt(e,tV.TK_ELSE)&&er(e),$t(e,tV.TK_END,tV.TK_IF,n),e4(R,C)}(e,n);break;case tV.TK_WHILE:let R,ei,eo,el;R=e.fs,ei=new ct,t_.luaX_next(e),eo=eq(R),el=Ls(e),Lt(R,ei,1),Dt(e,tV.TK_DO),er(e),e1(R,eo),$t(e,tV.TK_END,tV.TK_WHILE,n),P(R),e4(R,el);break;case tV.TK_DO:t_.luaX_next(e),er(e),$t(e,tV.TK_END,tV.TK_DO,n);break;case tV.TK_FOR:$a(e,n);break;case tV.TK_REPEAT:let eu,ec,ef,eh,ep;ec=eq(eu=e.fs),ef=new ct,eh=new ct,Lt(eu,ef,1),Lt(eu,eh,0),t_.luaX_next(e),it(e),$t(e,tV.TK_UNTIL,tV.TK_REPEAT,n),ep=Ls(e),eh.upval&&e3(eu,ep,eh.nactvar),P(eu),e5(eu,ep,ec),P(eu);break;case tV.TK_FUNCTION:Xa(e,n);break;case tV.TK_LOCAL:let ed,e_;t_.luaX_next(e),Mt(e,tV.TK_FUNCTION)?(ed=new _t,e_=e.fs,ot(e,j(e)),Ve(e,1),zt(e,ed,0,e.linenumber),qe(e_,ed.u.info).startpc=e_.pc):function(e){let n,R=0,C=new _t;do ot(e,j(e)),R++;while(Mt(e,44));Mt(e,61)?n=un(e,C):(C.k=tF.VVOID,n=0),se(e,R,n,C),Ve(e,R)}(e);break;case tV.TK_DBCOLON:t_.luaX_next(e),Ka(e,j(e),n);break;case tV.TK_RETURN:let eg,em,eb,ey;t_.luaX_next(e),eb=e.fs,ey=new _t,Ne(e,1)||59===e.t.token?eg=em=0:(em=un(e,ey),Me(ey.k)?(tl(eb,ey),ey.k===tF.VCALL&&1===em&&(tM(eC(eb,ey),tE),tb(eC(eb,ey).A===eb.nactvar)),eg=eb.nactvar,em=C):1===em?eg=ej(eb,ey):(eH(eb,ey),eg=eb.nactvar,tb(em===eb.freereg-eg))),e7(eb,eg,em),Mt(e,59);break;case tV.TK_BREAK:case tV.TK_GOTO:ws(e,e0(e.fs));break;default:let ev,ek;ev=e.fs,Ur(e,(ek=new ys).v),61===e.t.token||44===e.t.token?(ek.prev=null,ks(e,ek,1)):(qt(e,ek.v.k===tF.VCALL,et("syntax error",!0)),tC(eC(ev,ek.v),1))}tb(e.fs.f.maxstacksize>=e.fs.freereg&&e.fs.freereg>=e.fs.nactvar),e.fs.freereg=e.fs.nactvar,Ee(e)};e.exports.Dyndata=class{constructor(){this.actvar={arr:[],n:NaN,size:NaN},this.gt=new gt,this.label=new gt}},e.exports.expkind=tF,e.exports.expdesc=_t,e.exports.luaY_parser=function(e,n,R,C,et,ei){let eo,el,eu=new t_.LexState,ec=new Bt,ef=td.luaF_newLclosure(e,1);return tp.luaD_inctop(e),e.stack[e.top-1].setclLvalue(ef),eu.h=tK.luaH_new(e),tp.luaD_inctop(e),e.stack[e.top-1].sethvalue(eu.h),ec.f=ef.p=new tG(e),ec.f.source=tD(e,et),eu.buff=R,eu.dyd=C,C.actvar.n=C.gt.n=C.label.n=0,t_.luaX_setinput(e,eu,n,ec.f.source,ei),eo=new ct,el=new _t,It(eu,ec,eo),ec.f.is_vararg=!0,Le(el,tF.VLOCAL,0),rt(ec,eu.envn,el),t_.luaX_next(eu),it(eu),Zt(eu,tV.TK_EOS),ne(eu),tb(!ec.prev&&1===ec.nups&&!eu.fs),tb(0===C.actvar.n&&0===C.gt.n&&0===C.label.n),delete e.stack[--e.top],ef},e.exports.vkisinreg=function(e){return e===tF.VNONRELOC||e===tF.VLOCAL}},function(e,n,R){let C,et;let{LUA_MULTRET:ei,LUA_OK:eo,LUA_TFUNCTION:el,LUA_TNIL:eu,LUA_TNONE:ec,LUA_TNUMBER:ef,LUA_TSTRING:eh,LUA_TTABLE:ep,LUA_VERSION:ed,LUA_YIELD:e_,lua_call:eg,lua_callk:em,lua_concat:eb,lua_error:ey,lua_getglobal:ev,lua_geti:ek,lua_getmetatable:eA,lua_gettop:eL,lua_insert:ex,lua_isnil:ew,lua_isnone:eT,lua_isstring:eO,lua_load:eE,lua_next:eS,lua_pcallk:eN,lua_pop:eI,lua_pushboolean:eU,lua_pushcfunction:eR,lua_pushglobaltable:eC,lua_pushinteger:eM,lua_pushliteral:eP,lua_pushnil:eD,lua_pushstring:eB,lua_pushvalue:eK,lua_rawequal:eG,lua_rawget:eV,lua_rawlen:eF,lua_rawset:ej,lua_remove:ez,lua_replace:eH,lua_rotate:e$,lua_setfield:eX,lua_setmetatable:eq,lua_settop:eW,lua_setupvalue:eZ,lua_stringtonumber:eY,lua_toboolean:eJ,lua_tolstring:eQ,lua_tostring:e0,lua_type:e1,lua_typename:e2}=R(2),{luaL_argcheck:e3,luaL_checkany:e5,luaL_checkinteger:e4,luaL_checkoption:e8,luaL_checkstack:e6,luaL_checktype:e9,luaL_error:e7,luaL_getmetafield:ts,luaL_loadbufferx:to,luaL_loadfile:tl,luaL_loadfilex:tu,luaL_optinteger:tc,luaL_optstring:tf,luaL_setfuncs:th,luaL_tolstring:tp,luaL_where:td}=R(7),{to_jsstring:t_,to_luastring:tg}=R(5);if("function"==typeof TextDecoder){let e="",n=new TextDecoder("utf-8");C=function(R){e+=n.decode(R,{stream:!0})};let R=new Uint8Array(0);et=function(){console.log(e+=n.decode(R)),e=""}}else{let e=[];C=function(n){try{n=t_(n)}catch{let e=new Uint8Array(n.length);e.set(n),n=e}e.push(n)},et=function(){console.log.apply(console.log,e),e=[]}}let tm=["stop","restart","collect","count","step","setpause","setstepmul","isrunning"].map(e=>tg(e)),bt=function(e){return e9(e,1,ep),eW(e,2),eS(e,1)?2:(eD(e),1)},vt=function(e){let n=e4(e,2)+1;return eM(e,n),ek(e,1,n)===eu?1:2},yt=function(e){let n=tc(e,2,1);return eW(e,1),e1(e,1)===eh&&n>0&&(td(e,n),eK(e,1),eb(e,2)),ey(e)},Rt=function(e,n,R){return n!==eo&&n!==e_?(eU(e,0),eK(e,-2),2):eL(e)-R},lt=function(e,n,R){return n===eo?(0!==R&&(eK(e,R),eZ(e,-2,1)||eI(e,1)),1):(eD(e),ex(e,-2),2)},pt=function(e,n){return e6(e,2,"too many nested functions"),eK(e,1),eg(e,0,1),ew(e,-1)?(eI(e,1),null):(eO(e,-1)||e7(e,tg("reader function must return a string")),eH(e,5),e0(e,5))},wt=function(e,n,R){return eL(e)-1},tb={assert:function(e){return eJ(e,1)?eL(e):(e5(e,1),ez(e,1),eP(e,"assertion failed!"),eW(e,1),yt(e))},collectgarbage:function(e){e8(e,1,"collect",tm),tc(e,2,0),e7(e,tg("lua_gc not implemented"))},dofile:function(e){let n=tf(e,1,null);return eW(e,1),tl(e,n)!==eo?ey(e):(em(e,0,ei,0,wt),wt(e))},error:yt,getmetatable:function(e){return e5(e,1),eA(e,1)?ts(e,1,tg("__metatable",!0)):eD(e),1},ipairs:function(e){return e5(e,1),eR(e,vt),eK(e,1),eM(e,0),3},load:function(e){let n,R=e0(e,1),C=tf(e,3,"bt"),et=eT(e,4)?0:4;if(null!==R){let et=tf(e,2,R);n=to(e,R,R.length,et,C)}else{let R=tf(e,2,"=(load)");e9(e,1,el),eW(e,5),n=eE(e,pt,null,R,C)}return lt(e,n,et)},loadfile:function(e){let n=tf(e,1,null),R=tf(e,2,null),C=eT(e,3)?0:3,et=tu(e,n,R);return lt(e,et,C)},next:bt,pairs:function(e){var n;return n=tg("__pairs",!0),e5(e,1),ts(e,1,n)===eu?(eR(e,bt),eK(e,1),eD(e)):(eK(e,1),eg(e,1,3)),3},pcall:function(e){e5(e,1),eU(e,1),ex(e,1);let n=eN(e,eL(e)-2,ei,0,0,Rt);return Rt(e,n,0)},print:function(e){let n=eL(e);ev(e,tg("tostring",!0));for(let R=1;R<=n;R++){eK(e,-1),eK(e,R),eg(e,1,1);let n=eQ(e,-1);if(null===n)return e7(e,tg("'tostring' must return a string to 'print'"));R>1&&C(tg("	")),C(n),eI(e,1)}return et(),0},rawequal:function(e){return e5(e,1),e5(e,2),eU(e,eG(e,1,2)),1},rawget:function(e){return e9(e,1,ep),e5(e,2),eW(e,2),eV(e,1),1},rawlen:function(e){let n=e1(e,1);return e3(e,n===ep||n===eh,1,"table or string expected"),eM(e,eF(e,1)),1},rawset:function(e){return e9(e,1,ep),e5(e,2),e5(e,3),eW(e,3),ej(e,1),1},select:function(e){let n=eL(e);if(e1(e,1)===eh&&35===e0(e,1)[0])return eM(e,n-1),1;{let R=e4(e,1);return R<0?R=n+R:R>n&&(R=n),e3(e,1<=R,1,"index out of range"),n-R}},setmetatable:function(e){let n=e1(e,2);return e9(e,1,ep),e3(e,n===eu||n===ep,2,"nil or table expected"),ts(e,1,tg("__metatable",!0))!==eu?e7(e,tg("cannot change a protected metatable")):(eW(e,2),eq(e,1),1)},tonumber:function(e){if(0>=e1(e,2)){if(e5(e,1),e1(e,1)===ef)return eW(e,1),1;{let n=e0(e,1);if(null!==n&&eY(e,n)===n.length+1)return 1}}else{let n=e4(e,2);e9(e,1,eh);let R=e0(e,1);e3(e,2<=n&&n<=36,2,"base out of range");let C=function(e,n){try{e=t_(e)}catch{return null}let R=/^[\t\v\f \n\r]*([+-]?)0*([0-9A-Za-z]+)[\t\v\f \n\r]*$/.exec(e);if(!R)return null;let C=parseInt(R[1]+R[2],n);return isNaN(C)?null:0|C}(R,n);if(null!==C)return eM(e,C),1}return eD(e),1},tostring:function(e){return e5(e,1),tp(e,1),1},type:function(e){let n=e1(e,1);return e3(e,n!==ec,1,"value expected"),eB(e,e2(e,n)),1},xpcall:function(e){let n=eL(e);e9(e,2,el),eU(e,1),eK(e,1),e$(e,3,2);let R=eN(e,n-2,ei,2,2,Rt);return Rt(e,R,2)}};e.exports.luaopen_base=function(e){return eC(e),th(e,tb,0),eK(e,-1),eX(e,-2,tg("_G")),eP(e,ed),eX(e,-2,tg("_VERSION")),1}},function(e,n,R){let{LUA_OK:C,LUA_TFUNCTION:et,LUA_TSTRING:ei,LUA_YIELD:eo,lua_Debug:el,lua_checkstack:eu,lua_concat:ec,lua_error:ef,lua_getstack:eh,lua_gettop:ep,lua_insert:ed,lua_isyieldable:e_,lua_newthread:eg,lua_pop:em,lua_pushboolean:eb,lua_pushcclosure:ey,lua_pushliteral:ev,lua_pushthread:ek,lua_pushvalue:eA,lua_resume:eL,lua_status:ex,lua_tothread:ew,lua_type:eT,lua_upvalueindex:eO,lua_xmove:eE,lua_yield:eS}=R(2),{luaL_argcheck:eN,luaL_checktype:eI,luaL_newlib:eU,luaL_where:eR}=R(7),_e=function(e){let n=ew(e,1);return eN(e,n,1,"thread expected"),n},me=function(e,n,R){if(!eu(n,R))return ev(e,"too many arguments to resume"),-1;if(ex(n)===C&&0===ep(n))return ev(e,"cannot resume dead coroutine"),-1;eE(e,n,R);let et=eL(n,e,R);if(et===C||et===eo){let R=ep(n);return eu(e,R+1)?(eE(n,e,R),R):(em(n,R),ev(e,"too many results to resume"),-1)}return eE(n,e,1),-1},ve=function(e){let n=ew(e,eO(1)),R=me(e,n,ep(e));return R<0?(eT(e,-1)===ei&&(eR(e,1),ed(e,-2),ec(e,2)),ef(e)):R},G=function(e){eI(e,1,et);let n=eg(e);return eA(e,1),eE(e,n,1),1},eC={create:G,isyieldable:function(e){return eb(e,e_(e)),1},resume:function(e){let n=_e(e),R=me(e,n,ep(e)-1);return R<0?(eb(e,0),ed(e,-2),2):(eb(e,1),ed(e,-(R+1)),R+1)},running:function(e){return eb(e,ek(e)),2},status:function(e){let n=_e(e);if(e===n)ev(e,"running");else switch(ex(n)){case eo:ev(e,"suspended");break;case C:eh(n,0,new el)>0?ev(e,"normal"):0===ep(n)?ev(e,"dead"):ev(e,"suspended");break;default:ev(e,"dead")}return 1},wrap:function(e){return G(e),ey(e,ve,1),1},yield:function(e){return eS(e,ep(e))}};e.exports.luaopen_coroutine=function(e){return eU(e,eC),1}},function(e,n,R){let{LUA_MAXINTEGER:C}=R(3),{LUA_OPEQ:et,LUA_OPLT:ei,LUA_TFUNCTION:eo,LUA_TNIL:el,LUA_TTABLE:eu,lua_call:ec,lua_checkstack:ef,lua_compare:eh,lua_createtable:ep,lua_geti:ed,lua_getmetatable:e_,lua_gettop:eg,lua_insert:em,lua_isnil:eb,lua_isnoneornil:ey,lua_isstring:ev,lua_pop:ek,lua_pushinteger:eA,lua_pushnil:eL,lua_pushstring:ex,lua_pushvalue:ew,lua_rawget:eT,lua_setfield:eO,lua_seti:eE,lua_settop:eS,lua_toboolean:eN,lua_type:eI}=R(2),{luaL_Buffer:eU,luaL_addlstring:eR,luaL_addvalue:eC,luaL_argcheck:eM,luaL_buffinit:eP,luaL_checkinteger:eD,luaL_checktype:eB,luaL_error:eK,luaL_len:eG,luaL_newlib:eV,luaL_opt:eF,luaL_optinteger:ej,luaL_optlstring:ez,luaL_pushresult:eH,luaL_typename:e$}=R(7),eX=R(17),{to_luastring:eq}=R(5),Te=function(e,n,R){return ex(e,n),eT(e,-R)!==el},ze=function(e,n,R){if(eI(e,n)!==eu){let C=1;e_(e,n)&&(!(1&R)||Te(e,eq("__index",!0),++C))&&(!(2&R)||Te(e,eq("__newindex",!0),++C))&&(!(4&R)||Te(e,eq("__len",!0),++C))?ek(e,C):eB(e,n,eu)}},g=function(e,n,R){return ze(e,n,4|R),eG(e,n)},ge=function(e,n,R){ed(e,1,R),ev(e,-1)||eK(e,eq("invalid value (%s) at index %d in table for 'concat'"),e$(e,-1),R),eC(n)},te=function(e,n,R){eE(e,1,n),eE(e,1,R)},w=function(e,n,R){if(eb(e,2))return eh(e,n,R,ei);{ew(e,2),ew(e,n-1),ew(e,R-2),ec(e,2,1);let C=eN(e,-1);return ek(e,1),C}},S=function(e,n,R){let C=n,et=R-1;for(;;){for(;ed(e,1,++C),w(e,-1,-2);)C==R-1&&eK(e,eq("invalid order function for sorting")),ek(e,1);for(;ed(e,1,--et),w(e,-3,-1);)et<C&&eK(e,eq("invalid order function for sorting")),ek(e,1);if(et<C)return ek(e,1),te(e,R-1,C),C;te(e,C,et)}},v=function(e,n,R){let C=Math.floor((n-e)/4),et=R%(2*C)+(e+C);return eX.lua_assert(e+C<=et&&et<=n-C),et},q=function(e,n,R,C){for(;n<R;){let et,ei;if(ed(e,1,n),ed(e,1,R),w(e,-1,-2)?te(e,n,R):ek(e,2),R-n==1||(ed(e,1,et=R-n<100||0===C?Math.floor((n+R)/2):v(n,R,C)),ed(e,1,n),w(e,-2,-1)?te(e,et,n):(ek(e,1),ed(e,1,R),w(e,-1,-2)?te(e,et,R):ek(e,2)),R-n==2))return;ed(e,1,et),ew(e,-1),ed(e,1,R-1),te(e,et,R-1),(et=S(e,n,R))-n<R-et?(q(e,n,et-1,C),ei=et-n,n=et+1):(q(e,et+1,R,C),ei=R-et,R=et-1),(R-n)/128>ei&&(C=Math.floor(4294967296*Math.random()))}},eW={concat:function(e){let n=g(e,1,1),R=ez(e,2,""),C=R.length,et=ej(e,3,1);n=ej(e,4,n);let ei=new eU;for(eP(e,ei);et<n;et++)ge(e,ei,et),eR(ei,R,C);return et===n&&ge(e,ei,et),eH(ei),1},insert:function(e){let n,R=g(e,1,3)+1;switch(eg(e)){case 2:n=R;break;case 3:n=eD(e,2),eM(e,1<=n&&n<=R,2,"position out of bounds");for(let C=R;C>n;C--)ed(e,1,C-1),eE(e,1,C);break;default:return eK(e,"wrong number of arguments to 'insert'")}return eE(e,1,n),0},move:function(e){let n=eD(e,2),R=eD(e,3),ei=eD(e,4),eo=ey(e,5)?1:5;if(ze(e,1,1),ze(e,eo,2),R>=n){eM(e,n>0||R<C+n,3,"too many elements to move");let el=R-n+1;if(eM(e,ei<=C-el+1,4,"destination wrap around"),ei>R||ei<=n||1!==eo&&1!==eh(e,1,eo,et))for(let R=0;R<el;R++)ed(e,1,n+R),eE(e,eo,ei+R);else for(let R=el-1;R>=0;R--)ed(e,1,n+R),eE(e,eo,ei+R)}return ew(e,eo),1},pack:function(e){let n=eg(e);ep(e,n,1),em(e,1);for(let R=n;R>=1;R--)eE(e,1,R);return eA(e,n),eO(e,1,eq("n")),1},remove:function(e){let n=g(e,1,3),R=ej(e,2,n);for(R!==n&&eM(e,1<=R&&R<=n+1,1,"position out of bounds"),ed(e,1,R);R<n;R++)ed(e,1,R+1),eE(e,1,R);return eL(e),eE(e,1,R),1},sort:function(e){let n=g(e,1,3);return n>1&&(eM(e,n<C,1,"array too big"),ey(e,2)||eB(e,2,eo),eS(e,2),q(e,1,n,0)),0},unpack:function(e){let n=ej(e,2,1),R=eF(e,eD,3,eG(e,1));if(n>R)return 0;let C=R-n;if(C>=Number.MAX_SAFE_INTEGER||!ef(e,++C))return eK(e,eq("too many results to unpack"));for(;n<R;n++)ed(e,1,n);return ed(e,1,R),C}};e.exports.luaopen_table=function(e){return eV(e,eW),1}},function(e,n,R){let{LUA_TNIL:C,LUA_TTABLE:et,lua_close:ei,lua_createtable:eo,lua_getfield:el,lua_isboolean:eu,lua_isnoneornil:ec,lua_pop:ef,lua_pushboolean:eh,lua_pushfstring:ep,lua_pushinteger:ed,lua_pushliteral:e_,lua_pushnil:eg,lua_pushnumber:em,lua_pushstring:eb,lua_setfield:ey,lua_settop:ev,lua_toboolean:ek,lua_tointegerx:eA}=R(2),{luaL_Buffer:eL,luaL_addchar:ex,luaL_addstring:ew,luaL_argerror:eT,luaL_buffinit:eO,luaL_checkinteger:eE,luaL_checkstring:eS,luaL_checktype:eN,luaL_error:eI,luaL_execresult:eU,luaL_fileresult:eR,luaL_newlib:eC,luaL_optinteger:eM,luaL_optlstring:eP,luaL_optstring:eD,luaL_pushresult:eB}=R(7),{luastring_eq:eK,to_jsstring:eG,to_luastring:eV}=R(5),eF=eV("aAbBcCdDeFhHIjklmMnpPrRStTuUwWxXyYzZ%"),Xe=function(e,n,R){ed(e,R),ey(e,-2,eV(n,!0))},st=function(e,n,R){Xe(e,"sec",R?n.getUTCSeconds():n.getSeconds()),Xe(e,"min",R?n.getUTCMinutes():n.getMinutes()),Xe(e,"hour",R?n.getUTCHours():n.getHours()),Xe(e,"day",R?n.getUTCDate():n.getDate()),Xe(e,"month",(R?n.getUTCMonth():n.getMonth())+1),Xe(e,"year",R?n.getUTCFullYear():n.getFullYear()),Xe(e,"wday",(R?n.getUTCDay():n.getDay())+1),Xe(e,"yday",Math.floor((n-new Date(n.getFullYear(),0,0))/864e5))},ej=Number.MAX_SAFE_INTEGER/2,ae=function(e,n,R,et){let ei=el(e,-1,eV(n,!0)),eo=eA(e,-1);if(!1===eo){if(ei!==C)return eI(e,eV("field '%s' is not an integer"),n);if(R<0)return eI(e,eV("field '%s' missing in date table"),n);eo=R}else{if(!(-ej<=eo&&eo<=ej))return eI(e,eV("field '%s' is out-of-bound"),n);eo-=et}return ef(e,1),eo},ez={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map(e=>eV(e)),shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>eV(e)),months:["January","February","March","April","May","June","July","August","September","October","November","December"].map(e=>eV(e)),shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map(e=>eV(e)),AM:eV("AM"),PM:eV("PM"),am:eV("am"),pm:eV("pm"),formats:{c:eV("%a %b %e %H:%M:%S %Y"),D:eV("%m/%d/%y"),F:eV("%Y-%m-%d"),R:eV("%H:%M"),r:eV("%I:%M:%S %p"),T:eV("%H:%M:%S"),X:eV("%T"),x:eV("%D")}},Pe=function(e,n){let R=e.getDay();return"monday"===n&&(0===R?R=6:R--),Math.floor(((e-new Date(e.getFullYear(),0,1))/864e5+7-R)/7)},Te=function(e,n,R){n<10&&ex(e,R),ew(e,eV(String(n)))},ze=function(e,n,R,C){let et=0;for(;et<R.length;)if(37!==R[et])ex(n,R[et++]);else{let ei=g(e,R,++et);switch(R[et]){case 37:ex(n,37);break;case 65:ew(n,ez.days[C.getDay()]);break;case 66:ew(n,ez.months[C.getMonth()]);break;case 67:Te(n,Math.floor(C.getFullYear()/100),48);break;case 68:ze(e,n,ez.formats.D,C);break;case 70:ze(e,n,ez.formats.F,C);break;case 72:Te(n,C.getHours(),48);break;case 73:Te(n,(C.getHours()+11)%12+1,48);break;case 77:Te(n,C.getMinutes(),48);break;case 80:ew(n,12>C.getHours()?ez.am:ez.pm);break;case 82:ze(e,n,ez.formats.R,C);break;case 83:Te(n,C.getSeconds(),48);break;case 84:ze(e,n,ez.formats.T,C);break;case 85:Te(n,Pe(C,"sunday"),48);break;case 87:Te(n,Pe(C,"monday"),48);break;case 88:ze(e,n,ez.formats.X,C);break;case 89:ew(n,eV(String(C.getFullYear())));break;case 90:{let e=C.toString().match(/\(([\w\s]+)\)/);e&&ew(n,eV(e[1]));break}case 97:ew(n,ez.shortDays[C.getDay()]);break;case 98:case 104:ew(n,ez.shortMonths[C.getMonth()]);break;case 99:ze(e,n,ez.formats.c,C);break;case 100:Te(n,C.getDate(),48);break;case 101:Te(n,C.getDate(),32);break;case 106:{let e=Math.floor((C-new Date(C.getFullYear(),0,1))/864e5);e<100&&(e<10&&ex(n,48),ex(n,48)),ew(n,eV(String(e)));break}case 107:Te(n,C.getHours(),32);break;case 108:Te(n,(C.getHours()+11)%12+1,32);break;case 109:Te(n,C.getMonth()+1,48);break;case 110:ex(n,10);break;case 112:ew(n,12>C.getHours()?ez.AM:ez.PM);break;case 114:ze(e,n,ez.formats.r,C);break;case 115:ew(n,eV(String(Math.floor(C/1e3))));break;case 116:ex(n,8);break;case 117:{let e=C.getDay();ew(n,eV(String(0===e?7:e)));break}case 119:ew(n,eV(String(C.getDay())));break;case 120:ze(e,n,ez.formats.x,C);break;case 121:Te(n,C.getFullYear()%100,48);break;case 122:{let e=C.getTimezoneOffset();e>0?ex(n,45):(e=-e,ex(n,43)),Te(n,Math.floor(e/60),48),Te(n,e%60,48)}}et+=ei}},g=function(e,n,R){let C=0,et=1;for(;C<eF.length&&et<=n.length-R;C+=et)if(124===eF[C])et++;else if(eK(n.subarray(R,R+et),eF.subarray(C,C+et)))return et;eT(e,1,ep(e,eV("invalid conversion specifier '%%%s'"),n))},ge=function(e,n){return eE(e,n)},eH={date:function(e){let n=eP(e,1,"%c"),R=ec(e,2)?new Date:new Date(1e3*ge(e,2)),C=!1,et=0;if(33===n[0]&&(C=!0,et++),42===n[et]&&116===n[et+1])eo(e,0,9),st(e,R,C);else{new Uint8Array(4)[0]=37;let C=new eL;eO(e,C),ze(e,C,n,R),eB(C)}return 1},difftime:function(e){let n=ge(e,1),R=ge(e,2);return em(e,n-R),1},time:function(e){let n;return ec(e,1)?n=new Date:(eN(e,1,et),ev(e,1),n=new Date(ae(e,"year",-1,0),ae(e,"month",-1,1),ae(e,"day",-1,0),ae(e,"hour",12,0),ae(e,"min",0,0),ae(e,"sec",0,0)),st(e,n)),ed(e,Math.floor(n/1e3)),1},clock:function(e){return em(e,performance.now()/1e3),1}};e.exports.luaopen_os=function(e){return eC(e,eH),1}},function(e,n,R){let{sprintf:C}=R(38),{LUA_INTEGER_FMT:et,LUA_INTEGER_FRMLEN:ei,LUA_MININTEGER:eo,LUA_NUMBER_FMT:el,LUA_NUMBER_FRMLEN:eu,frexp:ec,lua_getlocaledecpoint:ef}=R(3),{LUA_TBOOLEAN:eh,LUA_TFUNCTION:ep,LUA_TNIL:ed,LUA_TNUMBER:e_,LUA_TSTRING:eg,LUA_TTABLE:em,lua_call:eb,lua_createtable:ey,lua_dump:ev,lua_gettable:ek,lua_gettop:eA,lua_isinteger:eL,lua_isstring:ex,lua_pop:ew,lua_pushcclosure:eT,lua_pushinteger:eO,lua_pushlightuserdata:eE,lua_pushliteral:eS,lua_pushlstring:eN,lua_pushnil:eI,lua_pushnumber:eU,lua_pushstring:eR,lua_pushvalue:eC,lua_remove:eM,lua_setfield:eP,lua_setmetatable:eD,lua_settop:eB,lua_toboolean:eK,lua_tointeger:eG,lua_tonumber:eV,lua_tostring:eF,lua_touserdata:ej,lua_type:ez,lua_upvalueindex:eH}=R(2),{luaL_Buffer:e$,luaL_addchar:eX,luaL_addlstring:eq,luaL_addsize:eW,luaL_addstring:eZ,luaL_addvalue:eY,luaL_argcheck:eJ,luaL_argerror:eQ,luaL_buffinit:e0,luaL_buffinitsize:e1,luaL_checkinteger:e2,luaL_checknumber:e3,luaL_checkstack:e5,luaL_checkstring:e4,luaL_checktype:e8,luaL_error:e6,luaL_newlib:e9,luaL_optinteger:e7,luaL_optstring:ts,luaL_prepbuffsize:to,luaL_pushresult:tl,luaL_pushresultsize:tu,luaL_tolstring:tc,luaL_typename:tf}=R(7),th=R(17),{luastring_eq:tp,luastring_indexOf:td,to_jsstring:t_,to_luastring:tg}=R(5),bt=function(e){let n=td(e,0);return n>-1?n:e.length},vt=function(e,n){return e>=0?e:0-e>n?0:n+e+1},yt=function(e,n,R,C){return eq(C,n,R),0},tm=eu.length+1,lt=function(e,n,R){let et=function(e){if(Object.is(e,1/0))return tg("inf");if(Object.is(e,-1/0))return tg("-inf");if(Number.isNaN(e))return tg("nan");if(0===e){let n=C(el+"x0p+0",e);return Object.is(e,-0)&&(n="-"+n),tg(n)}{let n="",R=ec(e),et=R[0],ei=R[1];return et<0&&(n+="-",et=-et),tg(n+="0x"+(2*et).toString(16)+C("p%+d",ei-=1))}}(R);if(65===n[tm])for(let e=0;e<et.length;e++){let n=et[e];n>=97&&(et[e]=223&n)}else 97!==n[tm]&&e6(e,tg("modifiers for format '%%a'/'%%A' not implemented"));return et},tb=tg("-+ #0"),wt=e=>97<=e&&e<=122||65<=e&&e<=90,o=e=>48<=e&&e<=57,c=e=>0<=e&&e<=31||127===e,T=e=>33<=e&&e<=126,p=e=>97<=e&&e<=122,x=e=>65<=e&&e<=90,$=e=>97<=e&&e<=122||65<=e&&e<=90||48<=e&&e<=57,U=e=>T(e)&&!$(e),pe=e=>32===e||e>=9&&e<=13,He=e=>48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102,Qe=function(e,n,R){switch(ez(e,R)){case eg:{let C=eF(e,R);!function(e,n,R){eX(e,34);let C=0;for(;R--;){if(34===n[C]||92===n[C]||10===n[C])eX(e,92),eX(e,n[C]);else if(c(n[C])){let R=""+n[C];o(n[C+1])&&(R="0".repeat(3-R.length)+R),eZ(e,tg("\\"+R))}else eX(e,n[C]);C++}eX(e,34)}(n,C,C.length);break}case e_:{let el;if(eL(e,R)){let n=eG(e,R);el=tg(C(n===eo?"0x%"+ei+"x":et,n))}else{let n=eV(e,R);!function(e){if(0>td(e,46)){let n=td(e,ef());n&&(e[n]=46)}}(el=lt(e,tg(`%${ei}a`),n))}eZ(n,el);break}case ed:case eh:tc(e,R),eY(n);break;default:eQ(e,R,tg("value has no literal form"))}},kt=function(e,n,R,C){let et=R;for(;0!==n[et]&&td(tb,n[et])>=0;)et++;et-R>=tb.length&&e6(e,tg("invalid format (repeated flags)")),o(n[et])&&et++,o(n[et])&&et++,46===n[et]&&(o(n[++et])&&et++,o(n[et])&&et++),o(n[et])&&e6(e,tg("invalid format (width or precision too long)")),C[0]=37;for(let e=0;e<et-R+1;e++)C[e+1]=n[R+e];return et},J=function(e,n){let R=e.length,C=n.length,et=e[R-1];for(let et=0;et<C;et++)e[et+R-1]=n[et];e[R+C-1]=et};let Z=class Z{constructor(e){this.L=e,this.islittle=!0,this.maxalign=1}};let V=function(e,n){if(e.off>=e.s.length||!o(e.s[e.off]))return n;{let n=0;do n=10*n+(e.s[e.off++]-48);while(e.off<e.s.length&&o(e.s[e.off])&&n<=214748363.8);return n}},xe=function(e,n,R){let C=V(n,R);return(C>16||C<=0)&&e6(e.L,tg("integral size (%d) out of limits [1,%d]"),C,16),C},fe=function(e,n){let R={opt:n.s[n.off++],size:0};switch(R.opt){case 98:return R.size=1,R.opt=0,R;case 66:return R.size=1,R.opt=1,R;case 104:return R.size=2,R.opt=0,R;case 72:return R.size=2,R.opt=1,R;case 108:case 106:return R.size=4,R.opt=0,R;case 76:case 74:case 84:return R.size=4,R.opt=1,R;case 102:return R.size=4,R.opt=2,R;case 100:case 110:return R.size=8,R.opt=2,R;case 105:return R.size=xe(e,n,4),R.opt=0,R;case 73:return R.size=xe(e,n,4),R.opt=1,R;case 115:return R.size=xe(e,n,4),R.opt=4,R;case 99:return R.size=V(n,-1),-1===R.size&&e6(e.L,tg("missing size for format option 'c'")),R.opt=3,R;case 122:return R.opt=5,R;case 120:return R.size=1,R.opt=6,R;case 88:return R.opt=7,R;case 32:break;case 60:case 61:e.islittle=!0;break;case 62:e.islittle=!1;break;case 33:e.maxalign=xe(e,n,8);break;default:e6(e.L,tg("invalid format option '%c'"),R.opt)}return R.opt=8,R},Me=function(e,n,R){let C={opt:NaN,size:NaN,ntoalign:NaN},et=fe(e,R);C.size=et.size,C.opt=et.opt;let ei=C.size;if(7===C.opt){if(R.off>=R.s.length||0===R.s[R.off])eQ(e.L,1,tg("invalid next option for option 'X'"));else{let n=fe(e,R);ei=n.size,3!==(n=n.opt)&&0!==ei||eQ(e.L,1,tg("invalid next option for option 'X'"))}}return ei<=1||3===C.opt?C.ntoalign=0:(ei>e.maxalign&&(ei=e.maxalign),ei&ei-1&&eQ(e.L,1,tg("format asks for alignment not power of 2")),C.ntoalign=ei-(n&ei-1)&ei-1),C},tt=function(e,n,R,C,et){let ei=to(e,C);ei[R?0:C-1]=255&n;for(let e=1;e<C;e++)n>>=8,ei[R?e:C-1-e]=255&n;if(et&&C>4)for(let e=4;e<C;e++)ei[R?e:C-1-e]=255;eW(e,C)},ct=function(e,n,R,C,et){let ei=0,eo=C<=4?C:4;for(let e=eo-1;e>=0;e--)ei<<=8,ei|=n[R?e:C-1-e];if(C<4){if(et){let e=1<<8*C-1;ei=(ei^e)-e}}else if(C>4){let el=!et||ei>=0?0:255;for(let et=eo;et<C;et++)n[R?et:C-1-et]!==el&&e6(e,tg("%d-byte integer does not fit into Lua Integer"),C)}return ei},at=function(e,n,R,C){th.lua_assert(n.length>=C);let et=new DataView(new ArrayBuffer(C));for(let e=0;e<C;e++)et.setUint8(e,n[e],R);return 4==C?et.getFloat32(0,R):et.getFloat64(0,R)},ty=tg("^$*+?.([%-");let Bt=class Bt{constructor(e){this.src=null,this.src_init=null,this.src_end=null,this.p=null,this.p_end=null,this.L=e,this.matchdepth=NaN,this.level=NaN,this.capture=[]}};let gt=function(e,n){switch(e.p[n++]){case 37:return n===e.p_end&&e6(e.L,tg("malformed pattern (ends with '%%')")),n+1;case 91:94===e.p[n]&&n++;do n===e.p_end&&e6(e.L,tg("malformed pattern (missing ']')")),37===e.p[n++]&&n<e.p_end&&n++;while(93!==e.p[n]);return n+1;default:return n}},Ot=function(e,n){switch(n){case 97:return wt(e);case 65:return!wt(e);case 99:return c(e);case 67:return!c(e);case 100:return o(e);case 68:return!o(e);case 103:return T(e);case 71:return!T(e);case 108:return p(e);case 76:return!p(e);case 112:return U(e);case 80:return!U(e);case 115:return pe(e);case 83:return!pe(e);case 117:return x(e);case 85:return!x(e);case 119:return $(e);case 87:return!$(e);case 120:return He(e);case 88:return!He(e);case 122:return 0===e;case 90:return 0!==e;default:return n===e}},At=function(e,n,R,C){let et=!0;for(94===e.p[R+1]&&(et=!1,R++);++R<C;)if(37===e.p[R]){if(R++,Ot(n,e.p[R]))return et}else if(45===e.p[R+1]&&R+2<C){if(R+=2,e.p[R-2]<=n&&n<=e.p[R])return et}else if(e.p[R]===n)return et;return!et},Ct=function(e,n,R,C){if(n>=e.src_end)return!1;{let et=e.src[n];switch(e.p[R]){case 46:return!0;case 37:return Ot(et,e.p[R+1]);case 91:return At(e,et,R,C-1);default:return e.p[R]===et}}},Mt=function(e,n,R){if(R>=e.p_end-1&&e6(e.L,tg("malformed pattern (missing arguments to '%%b'")),e.src[n]!==e.p[R])return null;{let C=e.p[R],et=e.p[R+1],ei=1;for(;++n<e.src_end;)if(e.src[n]===et){if(0==--ei)return n+1}else e.src[n]===C&&ei++}return null},Zt=function(e,n,R,C){let et=0;for(;Ct(e,n+et,R,C);)et++;for(;et>=0;){let R=Le(e,n+et,C+1);if(R)return R;et--}return null},Dt=function(e,n,R,C){for(;;){let et=Le(e,n,C+1);if(null!==et)return et;if(!Ct(e,n,R,C))return null;n++}},qt=function(e,n,R,C){let et,ei=e.level;return ei>=32&&e6(e.L,tg("too many captures")),e.capture[ei]=e.capture[ei]?e.capture[ei]:{},e.capture[ei].init=n,e.capture[ei].len=C,e.level=ei+1,null===(et=Le(e,n,R))&&e.level--,et},$t=function(e,n,R){let C,et=function(e){let n=e.level;for(n--;n>=0;n--)if(-1===e.capture[n].len)return n;return e6(e.L,tg("invalid pattern capture"))}(e);return e.capture[et].len=n-e.capture[et].init,null===(C=Le(e,n,R))&&(e.capture[et].len=-1),C},j=function(e,n,R){var C,et,ei,eo;R=(C=R-49)<0||C>=e.level||-1===e.capture[C].len?e6(e.L,tg("invalid capture index %%%d"),C+1):C;let el=e.capture[R].len;return e.src_end-n>=el&&(et=e.src,ei=e.capture[R].init,eo=e.src,tp(et.subarray(ei,ei+el),eo.subarray(n,n+el)))?n+el:null},Le=function(e,n,R){let C=!1,et=!0;for(0==e.matchdepth--&&e6(e.L,tg("pattern too complex"));et||C;)if(et=!1,R!==e.p_end)switch(C?void 0:e.p[R]){case 40:n=41===e.p[R+1]?qt(e,n,R+2,-2):qt(e,n,R+1,-1);break;case 41:n=$t(e,n,R+1);break;case 36:if(R+1!==e.p_end){C=!0;break}n=e.src.length-n==0?n:null;break;case 37:switch(e.p[R+1]){case 98:null!==(n=Mt(e,n,R+2))&&(R+=4,et=!0);break;case 102:{R+=2,91!==e.p[R]&&e6(e.L,tg("missing '[' after '%%f' in pattern"));let C=gt(e,R),ei=n===e.src_init?0:e.src[n-1];if(!At(e,ei,R,C-1)&&At(e,n===e.src_end?0:e.src[n],R,C-1)){R=C,et=!0;break}n=null;break}case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:null!==(n=j(e,n,e.p[R+1]))&&(R+=2,et=!0);break;default:C=!0}break;default:{C=!1;let ei=gt(e,R);if(Ct(e,n,R,ei))switch(e.p[ei]){case 63:{let C;null!==(C=Le(e,n+1,ei+1))?n=C:(R=ei+1,et=!0);break}case 43:n++;case 42:n=Zt(e,n,R,ei);break;case 45:n=Dt(e,n,R,ei);break;default:n++,R=ei,et=!0}else{if(42===e.p[ei]||63===e.p[ei]||45===e.p[ei]){R=ei+1,et=!0;break}n=null}}}return e.matchdepth++,n},Ye=function(e,n,R,C){if(n>=e.level)0===n?eN(e.L,e.src.subarray(R,C),C-R):e6(e.L,tg("invalid capture index %%%d"),n+1);else{let R=e.capture[n].len;-1===R&&e6(e.L,tg("unfinished capture")),-2===R?eO(e.L,e.capture[n].init-e.src_init+1):eN(e.L,e.src.subarray(e.capture[n].init),R)}},Je=function(e,n,R){let C=0===e.level&&e.src.subarray(n)?1:e.level;e5(e.L,C,"too many captures");for(let et=0;et<C;et++)Ye(e,et,n,R);return C},ot=function(e,n,R,C,et,ei){e.L=n,e.matchdepth=200,e.src=R,e.src_init=0,e.src_end=C,e.p=et,e.p_end=ei},$e=function(e){e.level=0,th.lua_assert(200===e.matchdepth)},qe=function(e,n){let R=e4(e,1),C=e4(e,2),et=R.length,ei=C.length,eo=vt(e7(e,3,1),et);if(eo<1)eo=1;else if(eo>et+1)return eI(e),1;if(n&&(eK(e,4)||function(e,n){for(let R=0;R<n;R++)if(-1!==td(ty,e[R]))return!1;return!0}(C,ei))){let n=function(e,n,R){var C=0,et=n.length;if(0===et)return C;for(;-1!==(C=e.indexOf(n[0],C));C++)if(tp(e.subarray(C,C+et),n))return C;return -1}(R.subarray(eo-1),C,0);if(n>-1)return eO(e,eo+n),eO(e,eo+n+ei-1),2}else{let el=new Bt(e),eu=eo-1,ec=94===C[0];ec&&(C=C.subarray(1),ei--),ot(el,e,R,et,C,ei);do{let R;if($e(el),null!==(R=Le(el,eu,0)))return n?(eO(e,eu+1),eO(e,R),Je(el,null,0)+2):Je(el,eu,R)}while(eu++<el.src_end&&!ec)}return eI(e),1},Ve=function(e){let n=ej(e,eH(3));n.ms.L=e;for(let e=n.src;e<=n.ms.src_end;e++){let R;if($e(n.ms),null!==(R=Le(n.ms,e,n.p))&&R!==n.lastmatch)return n.src=n.lastmatch=R,Je(n.ms,e,R)}return 0},rt=function(e,n,R,C,et){let ei=e.L;switch(et){case ep:eC(ei,3),eb(ei,Je(e,R,C),1);break;case em:Ye(e,0,R,C),ek(ei,3);break;default:return void function(e,n,R,C){let et=e.L,ei=eF(et,3),eo=ei.length;for(let el=0;el<eo;el++)37!==ei[el]?eX(n,ei[el]):o(ei[++el])?48===ei[el]?eq(n,e.src.subarray(R,C),C-R):(Ye(e,ei[el]-49,R,C),tc(et,-1),eM(et,-2),eY(n)):(37!==ei[el]&&e6(et,tg("invalid use of '%c' in replacement string"),37),eX(n,ei[el]))}(e,n,R,C)}eK(ei,-1)?ex(ei,-1)||e6(ei,tg("invalid replacement value (a %s)"),tf(ei,-1)):(ew(ei,1),eN(ei,e.src.subarray(R,C),C-R)),eY(n)},tv={byte:function(e){let n=e4(e,1),R=n.length,C=vt(e7(e,2,1),R),et=vt(e7(e,3,C),R);if(C<1&&(C=1),et>R&&(et=R),C>et)return 0;if(et-C>=Number.MAX_SAFE_INTEGER)return e6(e,"string slice too long");let ei=et-C+1;e5(e,ei,"string slice too long");for(let R=0;R<ei;R++)eO(e,n[C+R-1]);return ei},char:function(e){let n=eA(e),R=new e$,C=e1(e,R,n);for(let R=1;R<=n;R++){let n=e2(e,R);eJ(e,n>=0&&n<=255,"value out of range"),C[R-1]=n}return tu(R,n),1},dump:function(e){let n=new e$,R=eK(e,2);return e8(e,1,ep),eB(e,1),e0(e,n),0!==ev(e,yt,n,R)?e6(e,tg("unable to dump given function")):(tl(n),1)},find:function(e){return qe(e,1)},format:function(e){let n=eA(e),R=1,et=e4(e,1),eo=0,el=new e$;for(e0(e,el);eo<et.length;)if(37!==et[eo])eX(el,et[eo++]);else if(37===et[++eo])eX(el,et[eo++]);else{let eu=[];switch(++R>n&&eQ(e,R,tg("no value")),eo=kt(e,et,eo,eu),String.fromCharCode(et[eo++])){case"c":eX(el,e2(e,R));break;case"d":case"i":case"o":case"u":case"x":case"X":{let n=e2(e,R);J(eu,tg(ei,!0)),eZ(el,tg(C(String.fromCharCode(...eu),n)));break}case"a":case"A":J(eu,tg(ei,!0)),eZ(el,lt(e,eu,e3(e,R)));break;case"e":case"E":case"f":case"g":case"G":{let n=e3(e,R);J(eu,tg(ei,!0)),eZ(el,tg(C(String.fromCharCode(...eu),n)));break}case"q":Qe(e,el,R);break;case"s":{let n=tc(e,R);eu.length<=2||0===eu[2]?eY(el):(eJ(e,n.length===bt(n),R,"string contains zeros"),0>td(eu,46)&&n.length>=100?eY(el):(eZ(el,tg(C(String.fromCharCode(...eu),t_(n)))),ew(e,1)));break}default:return e6(e,tg("invalid option '%%%c' to 'format'"),et[eo-1])}}return tl(el),1},gmatch:function(e){let n=e4(e,1),R=e4(e,2),C=n.length,et=R.length;eB(e,2);let ei=new class{constructor(){this.src=NaN,this.p=NaN,this.lastmatch=NaN,this.ms=new Bt}};return eE(e,ei),ot(ei.ms,e,n,C,R,et),ei.src=0,ei.p=0,ei.lastmatch=null,eT(e,Ve,3),1},gsub:function(e){let n=e4(e,1),R=n.length,C=e4(e,2),et=C.length,ei=null,eo=ez(e,3),el=e7(e,4,R+1),eu=94===C[0],ec=0,ef=new Bt(e),eh=new e$;for(eJ(e,eo===e_||eo===eg||eo===ep||eo===em,3,"string/function/table expected"),e0(e,eh),eu&&(C=C.subarray(1),et--),ot(ef,e,n,R,C,et),n=0,C=0;ec<el;){let e;if($e(ef),null!==(e=Le(ef,n,C))&&e!==ei)ec++,rt(ef,eh,n,e,eo),n=ei=e;else{if(!(n<ef.src_end))break;eX(eh,ef.src[n++])}if(eu)break}return eq(eh,ef.src.subarray(n,ef.src_end),ef.src_end-n),tl(eh),eO(e,ec),2},len:function(e){return eO(e,e4(e,1).length),1},lower:function(e){let n=e4(e,1),R=n.length,C=new Uint8Array(R);for(let e=0;e<R;e++){let R=n[e];x(R)&&(R|=32),C[e]=R}return eR(e,C),1},match:function(e){return qe(e,0)},pack:function(e){let n=new e$,R=new Z(e),C={s:e4(e,1),off:0},et=1,ei=0;for(eI(e),e0(e,n);C.off<C.s.length;){let eo=Me(R,ei,C),el=eo.opt,eu=eo.size,ec=eo.ntoalign;for(ei+=ec+eu;ec-- >0;)eX(n,0);switch(et++,el){case 0:{let C=e2(e,et);if(eu<4){let n=1<<8*eu-1;eJ(e,-n<=C&&C<n,et,"integer overflow")}tt(n,C,R.islittle,eu,C<0);break}case 1:{let C=e2(e,et);eu<4&&eJ(e,C>>>0<1<<8*eu,et,"unsigned overflow"),tt(n,C>>>0,R.islittle,eu,!1);break}case 2:{let C=to(n,eu),ei=e3(e,et),eo=new DataView(C.buffer,C.byteOffset,C.byteLength);4===eu?eo.setFloat32(0,ei,R.islittle):eo.setFloat64(0,ei,R.islittle),eW(n,eu);break}case 3:{let R=e4(e,et),C=R.length;for(eJ(e,C<=eu,et,"string longer than given size"),eq(n,R,C);C++<eu;)eX(n,0);break}case 4:{let C=e4(e,et),eo=C.length;eJ(e,eu>=4||eo<1<<8*eu,et,"string length does not fit in given size"),tt(n,eo,R.islittle,eu,0),eq(n,C,eo),ei+=eo;break}case 5:{let R=e4(e,et),C=R.length;eJ(e,0>td(R,0),et,"strings contains zeros"),eq(n,R,C),eX(n,0),ei+=C+1;break}case 6:eX(n,0);case 7:case 8:et--}}return tl(n),1},packsize:function(e){let n=new Z(e),R={s:e4(e,1),off:0},C=0;for(;R.off<R.s.length;){let et=Me(n,C,R),ei=et.opt,eo=et.size;switch(eJ(e,C<=2147483647-(eo+=et.ntoalign),1,"format result too large"),C+=eo,ei){case 4:case 5:eQ(e,1,"variable-length format")}}return eO(e,C),1},rep:function(e){let n=e4(e,1),R=n.length,C=e2(e,2),et=ts(e,3,""),ei=et.length;if(C<=0)eS(e,"");else{if(R+ei<R||R+ei>2147483647/C)return e6(e,tg("resulting string too large"));{let eo=C*R+(C-1)*ei,el=new e$,eu=e1(e,el,eo),ec=0;for(;C-- >1;)eu.set(n,ec),ec+=R,ei>0&&(eu.set(et,ec),ec+=ei);eu.set(n,ec),tu(el,eo)}}return 1},reverse:function(e){let n=e4(e,1),R=n.length,C=new Uint8Array(R);for(let e=0;e<R;e++)C[e]=n[R-1-e];return eR(e,C),1},sub:function(e){let n=e4(e,1),R=n.length,C=vt(e2(e,2),R),et=vt(e7(e,3,-1),R);return C<1&&(C=1),et>R&&(et=R),C<=et?eR(e,n.subarray(C-1,C-1+(et-C+1))):eS(e,""),1},unpack:function(e){let n=new Z(e),R={s:e4(e,1),off:0},C=e4(e,2),et=C.length,ei=vt(e7(e,3,1),et)-1,eo=0;for(eJ(e,ei<=et&&ei>=0,3,"initial position out of string");R.off<R.s.length;){let el=Me(n,ei,R),eu=el.opt,ec=el.size,ef=el.ntoalign;switch(ei+ef+ec>et&&eQ(e,2,tg("data string too short")),ei+=ef,e5(e,2,"too many results"),eo++,eu){case 0:case 1:{let R=ct(e,C.subarray(ei),n.islittle,ec,0===eu);eO(e,R);break}case 2:eU(e,at(0,C.subarray(ei),n.islittle,ec));break;case 3:eR(e,C.subarray(ei,ei+ec));break;case 4:{let R=ct(e,C.subarray(ei),n.islittle,ec,0);eJ(e,ei+R+ec<=et,2,"data string too short"),eR(e,C.subarray(ei+ec,ei+ec+R)),ei+=R;break}case 5:{let n=td(C,0,ei);-1===n&&(n=C.length-ei),eR(e,C.subarray(ei,n)),ei=n+1;break}case 7:case 6:case 8:eo--}ei+=ec}return eO(e,ei+1),eo+1},upper:function(e){let n=e4(e,1),R=n.length,C=new Uint8Array(R);for(let e=0;e<R;e++){let R=n[e];p(R)&&(R&=223),C[e]=R}return eR(e,C),1}};e.exports.luaopen_string=function(e){return e9(e,tv),ey(e,0,1),eS(e,""),eC(e,-2),eD(e,-2),ew(e,1),eC(e,-2),eP(e,-2,tg("__index",!0)),ew(e,1),1}},function(e,n,R){let{lua_gettop:C,lua_pushcfunction:et,lua_pushfstring:ei,lua_pushinteger:eo,lua_pushnil:el,lua_pushstring:eu,lua_pushvalue:ec,lua_setfield:ef,lua_tointeger:eh}=R(2),{luaL_Buffer:ep,luaL_addvalue:ed,luaL_argcheck:e_,luaL_buffinit:eg,luaL_checkinteger:em,luaL_checkstack:eb,luaL_checkstring:ey,luaL_error:ev,luaL_newlib:ek,luaL_optinteger:eA,luaL_pushresult:eL}=R(7),{luastring_of:ex,to_luastring:ew}=R(5),K=function(e){return(192&e)==128},Q=function(e,n){return e>=0?e:0-e>n?0:n+e+1},eT=[255,127,2047,65535],F=function(e,n){let R=e[n],C=0;if(R<128)C=R;else{let et=0;for(;64&R;){let ei=e[n+ ++et];if((192&ei)!=128)return null;C=C<<6|63&ei,R<<=1}if(C|=(127&R)<<5*et,et>3||C>1114111||C<=eT[et])return null;n+=et}return{code:C,pos:n+1}},eO=ew("%U"),y=function(e,n){let R=em(e,n);e_(e,0<=R&&R<=1114111,n,"value out of range"),ei(e,eO,R)},Y=function(e){let n=ey(e,1),R=n.length,C=eh(e,2)-1;if(C<0)C=0;else if(C<R)for(C++;K(n[C]);)C++;if(C>=R)return 0;{let R=F(n,C);return null===R||K(n[R.pos])?ev(e,ew("invalid UTF-8 code")):(eo(e,C+1),eo(e,R.code),2)}},eE={char:function(e){let n=C(e);if(1===n)y(e,1);else{let R=new ep;eg(e,R);for(let C=1;C<=n;C++)y(e,C),ed(R);eL(R)}return 1},codepoint:function(e){let n=ey(e,1),R=Q(eA(e,2,1),n.length),C=Q(eA(e,3,R),n.length);if(e_(e,R>=1,2,"out of range"),e_(e,C<=n.length,3,"out of range"),R>C)return 0;if(C-R>=Number.MAX_SAFE_INTEGER)return ev(e,"string slice too long");let et=C-R+1;for(eb(e,et,"string slice too long"),et=0,R-=1;R<C;){let C=F(n,R);if(null===C)return ev(e,"invalid UTF-8 code");eo(e,C.code),R=C.pos,et++}return et},codes:function(e){return ey(e,1),et(e,Y),ec(e,1),eo(e,0),3},len:function(e){let n=0,R=ey(e,1),C=R.length,et=Q(eA(e,2,1),C),ei=Q(eA(e,3,-1),C);for(e_(e,1<=et&&--et<=C,2,"initial position out of string"),e_(e,--ei<C,3,"final position out of string");et<=ei;){let C=F(R,et);if(null===C)return el(e),eo(e,et+1),2;et=C.pos,n++}return eo(e,n),1},offset:function(e){let n=ey(e,1),R=em(e,2),C=R>=0?1:n.length+1;if(C=Q(eA(e,3,C),n.length),e_(e,1<=C&&--C<=n.length,3,"position out of range"),0===R)for(;C>0&&K(n[C]);)C--;else if(K(n[C])&&ev(e,"initial position is a continuation byte"),R<0)for(;R<0&&C>0;){do C--;while(C>0&&K(n[C]));R++}else for(R--;R>0&&C<n.length;){do C++;while(K(n[C]));R--}return 0===R?eo(e,C+1):el(e),1}},eS=ex(91,0,45,127,194,45,244,93,91,128,45,191,93,42);e.exports.luaopen_utf8=function(e){return ek(e,eE),eu(e,eS),ef(e,-2,ew("charpattern",!0)),1}},function(e,n,R){let C;let{LUA_OPLT:et,LUA_TNUMBER:ei,lua_compare:eo,lua_gettop:el,lua_isinteger:eu,lua_isnoneornil:ec,lua_pushboolean:ef,lua_pushinteger:eh,lua_pushliteral:ep,lua_pushnil:ed,lua_pushnumber:e_,lua_pushvalue:eg,lua_setfield:em,lua_settop:eb,lua_tointeger:ey,lua_tointegerx:ev,lua_type:ek}=R(2),{luaL_argcheck:eA,luaL_argerror:eL,luaL_checkany:ex,luaL_checkinteger:ew,luaL_checknumber:eT,luaL_error:eO,luaL_newlib:eE,luaL_optnumber:eS}=R(7),{LUA_MAXINTEGER:eN,LUA_MININTEGER:eI,lua_numbertointeger:eU}=R(3),{to_luastring:eR}=R(5),_e=function(){return C=1103515245*C+12345&2147483647},me=function(e,n){let R=eU(n);!1!==R?eh(e,R):e_(e,n)},eC={abs:function(e){if(eu(e,1)){let n=ey(e,1);n<0&&(n=0|-n),eh(e,n)}else e_(e,Math.abs(eT(e,1)));return 1},acos:function(e){return e_(e,Math.acos(eT(e,1))),1},asin:function(e){return e_(e,Math.asin(eT(e,1))),1},atan:function(e){let n=eT(e,1),R=eS(e,2,1);return e_(e,Math.atan2(n,R)),1},ceil:function(e){return eu(e,1)?eb(e,1):me(e,Math.ceil(eT(e,1))),1},cos:function(e){return e_(e,Math.cos(eT(e,1))),1},deg:function(e){return e_(e,eT(e,1)*(180/Math.PI)),1},exp:function(e){return e_(e,Math.exp(eT(e,1))),1},floor:function(e){return eu(e,1)?eb(e,1):me(e,Math.floor(eT(e,1))),1},fmod:function(e){if(eu(e,1)&&eu(e,2)){let n=ey(e,2);0===n?eL(e,2,"zero"):eh(e,ey(e,1)%n|0)}else{let n=eT(e,1),R=eT(e,2);e_(e,n%R)}return 1},log:function(e){let n,R=eT(e,1);if(ec(e,2))n=Math.log(R);else{let C=eT(e,2);n=2===C?Math.log2(R):10===C?Math.log10(R):Math.log(R)/Math.log(C)}return e_(e,n),1},max:function(e){let n=el(e),R=1;eA(e,n>=1,1,"value expected");for(let C=2;C<=n;C++)eo(e,R,C,et)&&(R=C);return eg(e,R),1},min:function(e){let n=el(e),R=1;eA(e,n>=1,1,"value expected");for(let C=2;C<=n;C++)eo(e,C,R,et)&&(R=C);return eg(e,R),1},modf:function(e){if(eu(e,1))eb(e,1),e_(e,0);else{let n=eT(e,1),R=n<0?Math.ceil(n):Math.floor(n);me(e,R),e_(e,n===R?0:n-R)}return 2},rad:function(e){return e_(e,eT(e,1)*(Math.PI/180)),1},random:function(e){let n,R,et=void 0===C?Math.random():_e()/2147483648;switch(el(e)){case 0:return e_(e,et),1;case 1:n=1,R=ew(e,1);break;case 2:n=ew(e,1),R=ew(e,2);break;default:return eO(e,"wrong number of arguments")}return eA(e,n<=R,1,"interval is empty"),eA(e,n>=0||R<=eN+n,1,"interval too large"),eh(e,Math.floor(et*=R-n+1)+n),1},randomseed:function(e){return 0==(C=0|eT(e,1))&&(C=1),_e(),0},sin:function(e){return e_(e,Math.sin(eT(e,1))),1},sqrt:function(e){return e_(e,Math.sqrt(eT(e,1))),1},tan:function(e){return e_(e,Math.tan(eT(e,1))),1},tointeger:function(e){let n=ev(e,1);return!1!==n?eh(e,n):(ex(e,1),ed(e)),1},type:function(e){return ek(e,1)===ei?eu(e,1)?ep(e,"integer"):ep(e,"float"):(ex(e,1),ed(e)),1},ult:function(e){let n=ew(e,1),R=ew(e,2);return ef(e,n>=0?R<0||n<R:R<0&&n<R),1}};e.exports.luaopen_math=function(e){return eE(e,eC),e_(e,Math.PI),em(e,-2,eR("pi",!0)),e_(e,1/0),em(e,-2,eR("huge",!0)),eh(e,eN),em(e,-2,eR("maxinteger",!0)),eh(e,eI),em(e,-2,eR("mininteger",!0)),1}},function(e,n,R){let C;let{LUA_MASKCALL:et,LUA_MASKCOUNT:ei,LUA_MASKLINE:eo,LUA_MASKRET:el,LUA_REGISTRYINDEX:eu,LUA_TFUNCTION:ec,LUA_TNIL:ef,LUA_TTABLE:eh,LUA_TUSERDATA:ep,lua_Debug:ed,lua_call:e_,lua_checkstack:eg,lua_gethook:em,lua_gethookcount:eb,lua_gethookmask:ey,lua_getinfo:ev,lua_getlocal:ek,lua_getmetatable:eA,lua_getstack:eL,lua_getupvalue:ex,lua_getuservalue:ew,lua_insert:eT,lua_iscfunction:eO,lua_isfunction:eE,lua_isnoneornil:eS,lua_isthread:eN,lua_newtable:eI,lua_pcall:eU,lua_pop:eR,lua_pushboolean:eC,lua_pushfstring:eM,lua_pushinteger:eP,lua_pushlightuserdata:eD,lua_pushliteral:eB,lua_pushnil:eK,lua_pushstring:eG,lua_pushvalue:eV,lua_rawgetp:eF,lua_rawsetp:ej,lua_rotate:ez,lua_setfield:eH,lua_sethook:e$,lua_setlocal:eX,lua_setmetatable:eq,lua_settop:eW,lua_setupvalue:eZ,lua_setuservalue:eY,lua_tojsstring:eJ,lua_toproxy:eQ,lua_tostring:e0,lua_tothread:e1,lua_touserdata:e2,lua_type:e3,lua_upvalueid:e5,lua_upvaluejoin:e4,lua_xmove:e8}=R(2),{luaL_argcheck:e6,luaL_argerror:e9,luaL_checkany:e7,luaL_checkinteger:ts,luaL_checkstring:to,luaL_checktype:tl,luaL_error:tu,luaL_loadbuffer:tc,luaL_newlib:tf,luaL_optinteger:th,luaL_optstring:tp,luaL_traceback:td,lua_writestringerror:t_}=R(7),tg=R(17),{luastring_indexOf:tm,to_luastring:tb}=R(5),bt=function(e,n,R){e===n||eg(n,R)||tu(e,tb("stack overflow",!0))},vt=function(e){return eN(e,1)?{arg:1,thread:e1(e,1)}:{arg:0,thread:e}},yt=function(e,n,R){eG(e,R),eH(e,-2,n)},Rt=function(e,n,R){eP(e,R),eH(e,-2,n)},lt=function(e,n,R){eC(e,R),eH(e,-2,n)},pt=function(e,n,R){e==n?ez(e,-2,1):e8(n,e,1),eH(e,-2,R)},wt=function(e,n){let R=ts(e,2);tl(e,1,ec);let C=n?ex(e,1,R):eZ(e,1,R);return null===C?0:(eG(e,C),eT(e,-(n+1)),n+1)},o=function(e,n,R){let C=ts(e,R);return tl(e,n,ec),e6(e,null!==ex(e,n,C),R,"invalid upvalue index"),C},ty=tb("__hooks__",!0),tv=["call","return","line","count","tail call"].map(e=>tb(e)),p=function(e,n){eF(e,eu,ty);let R=e2(e,-1).get(e);R&&(R(e),eG(e,tv[n.event]),n.currentline>=0?eP(e,n.currentline):eK(e),tg.lua_assert(ev(e,tb("lS"),n)),e_(e,2,0))},tk={gethook:function(e){let n,R=vt(e).thread,C=new Uint8Array(5),ei=ey(R),ec=em(R);return null===ec?eK(e):ec!==p?eB(e,"external hook"):(eF(e,eu,ty),e2(e,-1).get(R)(e)),eG(e,(n=0,ei&et&&(C[n++]=99),ei&el&&(C[n++]=114),ei&eo&&(C[n++]=108),C.subarray(0,n))),eP(e,eb(R)),3},getinfo:function(e){let n=new ed,R=vt(e),C=R.arg,et=R.thread,ei=tp(e,C+2,"flnStu");if(bt(e,et,3),eE(e,C+1))ei=eM(e,tb(">%s"),ei),eV(e,C+1),e8(e,et,1);else if(!eL(et,ts(e,C+1),n))return eK(e),1;return ev(et,ei,n)||e9(e,C+2,"invalid option"),eI(e),tm(ei,83)>-1&&(yt(e,tb("source",!0),n.source),yt(e,tb("short_src",!0),n.short_src),Rt(e,tb("linedefined",!0),n.linedefined),Rt(e,tb("lastlinedefined",!0),n.lastlinedefined),yt(e,tb("what",!0),n.what)),tm(ei,108)>-1&&Rt(e,tb("currentline",!0),n.currentline),tm(ei,117)>-1&&(Rt(e,tb("nups",!0),n.nups),Rt(e,tb("nparams",!0),n.nparams),lt(e,tb("isvararg",!0),n.isvararg)),tm(ei,110)>-1&&(yt(e,tb("name",!0),n.name),yt(e,tb("namewhat",!0),n.namewhat)),tm(ei,116)>-1&&lt(e,tb("istailcall",!0),n.istailcall),tm(ei,76)>-1&&pt(e,et,tb("activelines",!0)),tm(ei,102)>-1&&pt(e,et,tb("func",!0)),1},getlocal:function(e){let n=vt(e),R=n.thread,C=n.arg,et=new ed,ei=ts(e,C+2);if(eE(e,C+1))return eV(e,C+1),eG(e,ek(e,null,ei)),1;{if(!eL(R,ts(e,C+1),et))return e9(e,C+1,"level out of range");bt(e,R,1);let n=ek(R,et,ei);return n?(e8(R,e,1),eG(e,n),ez(e,-2,1),2):(eK(e),1)}},getmetatable:function(e){return e7(e,1),eA(e,1)||eK(e),1},getregistry:function(e){return eV(e,eu),1},getupvalue:function(e){return wt(e,1)},getuservalue:function(e){return e3(e,1)!==ep?eK(e):ew(e,1),1},sethook:function(e){let n,R,C,eh,ep=vt(e),ed=ep.thread,e_=ep.arg;if(eS(e,e_+1))eW(e,e_+1),C=null,n=0,R=0;else{var eg;let eu;let ef=to(e,e_+2);tl(e,e_+1,ec),R=th(e,e_+3,0),C=p,eg=R,eu=0,tm(ef,99)>-1&&(eu|=et),tm(ef,114)>-1&&(eu|=el),tm(ef,108)>-1&&(eu|=eo),eg>0&&(eu|=ei),n=eu}eF(e,eu,ty)===ef?(eD(e,eh=new WeakMap),ej(e,eu,ty)):eh=e2(e,-1);let em=eQ(e,e_+1);return eh.set(ed,em),e$(ed,C,n,R),0},setlocal:function(e){let n=vt(e),R=n.thread,C=n.arg,et=new ed,ei=ts(e,C+1),eo=ts(e,C+2);if(!eL(R,ei,et))return e9(e,C+1,"level out of range");e7(e,C+3),eW(e,C+3),bt(e,R,1),e8(e,R,1);let el=eX(R,et,eo);return null===el&&eR(R,1),eG(e,el),1},setmetatable:function(e){let n=e3(e,2);return e6(e,n==ef||n==eh,2,"nil or table expected"),eW(e,2),eq(e,1),1},setupvalue:function(e){return e7(e,3),wt(e,0)},setuservalue:function(e){return tl(e,1,ep),e7(e,2),eW(e,2),eY(e,1),1},traceback:function(e){let n=vt(e),R=n.thread,C=n.arg,et=e0(e,C+1);if(null!==et||eS(e,C+1)){let n=th(e,C+2,e===R?1:0);td(e,R,et,n)}else eV(e,C+1);return 1},upvalueid:function(e){let n=o(e,1,2);return eD(e,e5(e,1,n)),1},upvaluejoin:function(e){let n=o(e,1,2),R=o(e,3,4);return e6(e,!eO(e,1),1,"Lua function expected"),e6(e,!eO(e,3),3,"Lua function expected"),e4(e,1,n,3,R),0}};"u">typeof window&&(C=function(){let e=prompt("lua_debug>","");return null!==e?e:""}),C&&(tk.debug=function(e){for(;;){let n=C();if("cont"===n)return 0;if(0===n.length)continue;let R=tb(n);(tc(e,R,R.length,tb("=(debug command)",!0))||eU(e,0,0,0))&&t_(eJ(e,-1),`
`),eW(e,0)}}),e.exports.luaopen_debug=function(e){return tf(e,tk),1}},function(e,n,R){let C,et;let{LUA_DIRSEP:ei,LUA_EXEC_DIR:eo,LUA_JSPATH_DEFAULT:el,LUA_PATH_DEFAULT:eu,LUA_PATH_MARK:ec,LUA_PATH_SEP:ef}=R(3),{LUA_OK:eh,LUA_REGISTRYINDEX:ep,LUA_TNIL:ed,LUA_TTABLE:e_,lua_callk:eg,lua_createtable:em,lua_getfield:eb,lua_insert:ey,lua_isfunction:ev,lua_isnil:ek,lua_isstring:eA,lua_newtable:eL,lua_pop:ex,lua_pushboolean:ew,lua_pushcclosure:eT,lua_pushcfunction:eO,lua_pushfstring:eE,lua_pushglobaltable:eS,lua_pushlightuserdata:eN,lua_pushliteral:eI,lua_pushlstring:eU,lua_pushnil:eR,lua_pushstring:eC,lua_pushvalue:eM,lua_rawgeti:eP,lua_rawgetp:eD,lua_rawseti:eB,lua_rawsetp:eK,lua_remove:eG,lua_setfield:eV,lua_setmetatable:eF,lua_settop:ej,lua_toboolean:ez,lua_tostring:eH,lua_touserdata:e$,lua_upvalueindex:eX}=R(2),{LUA_LOADED_TABLE:eq,LUA_PRELOAD_TABLE:eW,luaL_Buffer:eZ,luaL_addvalue:eY,luaL_buffinit:eJ,luaL_checkstring:eQ,luaL_error:e0,luaL_getsubtable:e1,luaL_gsub:e2,luaL_len:e3,luaL_loadfile:e5,luaL_newlib:e4,luaL_optstring:e8,luaL_pushresult:e6,luaL_setfuncs:e9}=R(7),e7=R(17),{luastring_indexOf:ts,to_jsstring:to,to_luastring:tl,to_uristring:tu}=R(5),tc=R(0),tf="u">typeof window?window:"u">typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:(0,eval)("this"),th=tl("__JSLIBS__"),tp=tl("luaopen_"),td=tl("_"),t_=tl("\x01");C=function(e,n,R){n=tu(n);let C=new XMLHttpRequest;if(C.open("GET",n,!1),C.send(),C.status<200||C.status>=300)return eC(e,tl(`${C.status}: ${C.statusText}`)),null;let et,ei=C.response;/\/\/[#@] sourceURL=/.test(ei)||(ei+=" //# sourceURL="+n);try{et=Function("fengari",ei)}catch(n){return eC(e,tl(`${n.name}: ${n.message}`)),null}let eo=et(tc);return"function"==typeof eo||"object"==typeof eo&&null!==eo?eo:void 0===eo?tf:(eC(e,tl(`library returned unexpected type (${typeof eo})`)),null)},et=function(e){e=tu(e);let n=new XMLHttpRequest;return n.open("GET",e,!1),n.send(),n.status>=200&&n.status<=299};let bt=function(e,n,R){let et=Rt(e,n);if(null===et){if(null===(et=C(e,n,42===R[0])))return 1;lt(e,n,et)}if(42===R[0])return ew(e,1),0;{let n;let C=(n=et[to(R)])&&"function"==typeof n?n:(eE(e,tl("undefined symbol: %s"),R),null);return null===C?2:(eO(e,C),0)}},yt=function(e,n,R,C){let et,ei=`${R}${e7.LUA_VERSUFFIX}`;eC(e,tl(ei));let eo=tf[ei];void 0===eo&&(eo=tf[R]),void 0===eo||(eb(e,ep,tl("LUA_NOENV")),et=ez(e,-1),ex(e,1),et)?eC(e,C):(eo=e2(e,tl(eo),tl(ef+ef,!0),tl(ef+to(t_)+ef,!0)),e2(e,eo,t_,C),eG(e,-2)),eV(e,-3,n),ex(e,1)},Rt=function(e,n){eD(e,ep,th),eb(e,-1,n);let R=e$(e,-1);return ex(e,2),R},lt=function(e,n,R){eD(e,ep,th),eN(e,R),eM(e,-1),eV(e,-3,n),eB(e,-2,e3(e,-2)+1),ex(e,1)},pt=function(e,n){for(;n[0]===ef.charCodeAt(0);)n=n.subarray(1);if(0===n.length)return null;let R=ts(n,ef.charCodeAt(0));return R<0&&(R=n.length),eU(e,n,R),n.subarray(R)},wt=function(e,n,R,C,ei){let eo=new eZ;for(eJ(e,eo),0!==C[0]&&(n=e2(e,n,C,ei));null!==(R=pt(e,R));){let R=e2(e,eH(e,-1),tl(ec,!0),n);if(eG(e,-2),et(R))return R;eE(e,tl(`
	no file '%s'`),R),eG(e,-2),eY(eo)}return e6(eo),null},o=function(e,n,R,C){eb(e,eX(1),R);let et=eH(e,-1);return null===et&&e0(e,tl("'package.%s' must be a string"),R),wt(e,n,et,tl("."),C)},c=function(e,n,R){return n?(eC(e,R),2):e0(e,tl(`error loading module '%s' from file '%s':
	%s`),eH(e,1),R,eH(e,-1))},T=function(e){let n=eQ(e,1),R=o(e,n,tl("path",!0),tl(ei,!0));return null===R?1:c(e,e5(e,R)===eh,R)},p=function(e,n,R){let C;let et=ts(R=e2(e,R,tl("."),td),45);if(et>=0){C=eU(e,R,et),C=eE(e,tl("%s%s"),tp,C);let ei=bt(e,n,C);if(2!==ei)return ei;R=et+1}return C=eE(e,tl("%s%s"),tp,R),bt(e,n,C)},x=function(e){let n=eQ(e,1),R=o(e,n,tl("jspath",!0),tl(ei,!0));return null===R?1:c(e,0===p(e,R,n),R)},$=function(e){let n,R=eQ(e,1),C=ts(R,46);if(C<0)return 0;eU(e,R,C);let et=o(e,eH(e,-1),tl("jspath",!0),tl(ei,!0));return null===et?1:0!==(n=p(e,et,R))?2!=n?c(e,0,et):(eC(e,tl(`
	no module '%s' in file '%s'`),R,et),1):(eC(e,et),2)},U=function(e){let n=eQ(e,1);return eb(e,ep,eW),eb(e,-1,n)===ed&&eE(e,tl(`
	no field package.preload['%s']`),n),1},pe=function(e,n,R){for(;n===eh?(eP(e,3,R.i)===ed&&(ex(e,1),e6(R.msg),e0(e,tl("module '%s' not found:%s"),R.name,eH(e,-1))),eC(e,R.name),eg(e,1,2,R,pe)):n=eh,!ev(e,-2);R.i++)eA(e,-2)?(ex(e,1),eY(R.msg)):ex(e,2);return R.k(e,eh,R.ctx)},He=function(e,n,R){return eC(e,R),ey(e,-2),eg(e,2,1,R,Qe),Qe(e,eh,R)},Qe=function(e,n,R){return ek(e,-1)||eV(e,2,R),eb(e,2,R)==ed&&(ew(e,1),eM(e,-1),eV(e,2,R)),1},tg={loadlib:function(e){let n=eQ(e,1),R=eQ(e,2),C=bt(e,n,R);return 0===C?1:(eR(e),ey(e,-2),eI(e,1===C?"open":"init"),3)},searchpath:function(e){return null!==wt(e,eQ(e,1),eQ(e,2),e8(e,3,"."),e8(e,4,ei))?1:(eR(e),ey(e,-2),2)}},tm={require:function(e){let n,R=eQ(e,1);return ej(e,1),eb(e,ep,eq),eb(e,2,R),ez(e,-1)?1:(ex(e,1),eJ(e,n=new eZ),eb(e,eX(1),tl("searchers",!0))!==e_&&e0(e,tl("'package.searchers' must be a table")),pe(e,eh,{name:R,i:1,msg:n,ctx:R,k:He}))}};e.exports.luaopen_package=function(e){return eL(e),em(e,0,1),eF(e,-2),eK(e,ep,th),e4(e,tg),function(e){let n=[U,T,x,$,null];em(e);for(let R=0;n[R];R++)eM(e,-2),eT(e,n[R],1),eB(e,-2,R+1);eV(e,-2,tl("searchers",!0))}(e),yt(e,tl("path",!0),"LUA_PATH",eu),yt(e,tl("jspath",!0),"LUA_JSPATH",el),eI(e,ei+`
`+ef+`
`+ec+`
`+eo+`
-
`),eV(e,-2,tl("config",!0)),e1(e,ep,eq),eV(e,-2,tl("loaded",!0)),e1(e,ep,eW),eV(e,-2,tl("preload",!0)),eS(e),eM(e,-2),e9(e,tm,1),ex(e,1),1}},function(e,n,R){let{lua_pushinteger:C,lua_pushliteral:et,lua_setfield:ei}=R(2),{luaL_newlib:eo}=R(7),{FENGARI_AUTHORS:el,FENGARI_COPYRIGHT:eu,FENGARI_RELEASE:ec,FENGARI_VERSION:ef,FENGARI_VERSION_MAJOR:eh,FENGARI_VERSION_MINOR:ep,FENGARI_VERSION_NUM:ed,FENGARI_VERSION_RELEASE:e_,to_luastring:eg}=R(5);e.exports.luaopen_fengari=function(e){return eo(e,{}),et(e,el),ei(e,-2,eg("AUTHORS")),et(e,eu),ei(e,-2,eg("COPYRIGHT")),et(e,ec),ei(e,-2,eg("RELEASE")),et(e,ef),ei(e,-2,eg("VERSION")),et(e,eh),ei(e,-2,eg("VERSION_MAJOR")),et(e,ep),ei(e,-2,eg("VERSION_MINOR")),C(e,ed),ei(e,-2,eg("VERSION_NUM")),et(e,e_),ei(e,-2,eg("VERSION_RELEASE")),1}},function(e,n,R){R.r(n),R.d(n,"L",function(){return eN}),R.d(n,"load",function(){return y});var C=R(0);R.d(n,"FENGARI_AUTHORS",function(){return C.FENGARI_AUTHORS}),R.d(n,"FENGARI_COPYRIGHT",function(){return C.FENGARI_COPYRIGHT}),R.d(n,"FENGARI_RELEASE",function(){return C.FENGARI_RELEASE}),R.d(n,"FENGARI_VERSION",function(){return C.FENGARI_VERSION}),R.d(n,"FENGARI_VERSION_MAJOR",function(){return C.FENGARI_VERSION_MAJOR}),R.d(n,"FENGARI_VERSION_MINOR",function(){return C.FENGARI_VERSION_MINOR}),R.d(n,"FENGARI_VERSION_NUM",function(){return C.FENGARI_VERSION_NUM}),R.d(n,"FENGARI_VERSION_RELEASE",function(){return C.FENGARI_VERSION_RELEASE}),R.d(n,"luastring_eq",function(){return C.luastring_eq}),R.d(n,"luastring_indexOf",function(){return C.luastring_indexOf}),R.d(n,"luastring_of",function(){return C.luastring_of}),R.d(n,"to_jsstring",function(){return C.to_jsstring}),R.d(n,"to_luastring",function(){return C.to_luastring}),R.d(n,"to_uristring",function(){return C.to_uristring}),R.d(n,"lua",function(){return C.lua}),R.d(n,"lauxlib",function(){return C.lauxlib}),R.d(n,"lualib",function(){return C.lualib});var et=R(21);R.d(n,"interop",function(){return et});let{LUA_ERRRUN:ei,LUA_ERRSYNTAX:eo,LUA_OK:el,LUA_VERSION_MAJOR:eu,LUA_VERSION_MINOR:ec,lua_Debug:ef,lua_getinfo:eh,lua_getstack:ep,lua_gettop:ed,lua_insert:e_,lua_pcall:eg,lua_pop:em,lua_pushcfunction:eb,lua_pushstring:ey,lua_remove:ev,lua_setglobal:ek,lua_tojsstring:eA}=C.lua,{luaL_loadbuffer:eL,luaL_newstate:ex,luaL_requiref:ew}=C.lauxlib,{checkjs:eT,luaopen_js:eO,push:eE,tojs:eS}=et,eN=ex();function y(e,n){if("string"==typeof e)e=Object(C.to_luastring)(e);else if(!(e instanceof Uint8Array))throw TypeError("expects an array of bytes or javascript string");let R,et=eL(eN,e,null,n=n?Object(C.to_luastring)(n):null);if(R=et===eo?SyntaxError(eA(eN,-1)):eS(eN,-1),em(eN,1),et!==el)throw R;return R}if(C.lualib.luaL_openlibs(eN),ew(eN,Object(C.to_luastring)("js"),eO,1),em(eN,1),ey(eN,Object(C.to_luastring)(C.FENGARI_COPYRIGHT)),ek(eN,Object(C.to_luastring)("_COPYRIGHT")),"u">typeof document&&document instanceof HTMLDocument){let Y=function(e){switch(e){case"anonymous":return"omit";case"use-credentials":return"include";default:return"same-origin"}},de=function(e){let n=new ef;return ep(e,2,n)&&eh(e,Object(C.to_luastring)("Sl"),n),eE(e,new ErrorEvent("error",{bubbles:!0,cancelable:!0,message:eA(e,1),error:eS(e,1),filename:n.short_src?Object(C.to_jsstring)(n.short_src):void 0,lineno:n.currentline>0?n.currentline:void 0})),1},_e=function(e,n,R){let C,et=eL(eN,n,null,R);if(et===eo){let n=eA(eN,-1),R=e.src?e.src:document.location,et,ei=SyntaxError(n,R,et);C=new ErrorEvent("error",{message:n,error:ei,filename:R,lineno:et})}else if(et===el){let n=ed(eN);eb(eN,de),e_(eN,n),Object.defineProperty(document,"currentScript",{value:e,configurable:!0}),et=eg(eN,0,0,n),delete document.currentScript,ev(eN,n),et===ei&&(C=eT(eN,-1))}et!==el&&(void 0===C&&(C=new ErrorEvent("error",{message:eA(eN,-1),error:eS(eN,-1)})),em(eN,1),window.dispatchEvent(C)&&console.error("uncaught exception",C.error))},me=function(e,n,R){if(e.status>=200&&e.status<300){let et=e.response;_e(n,et="string"==typeof et?Object(C.to_luastring)(e.response):new Uint8Array(et),R)}else n.dispatchEvent(new Event("error"))},ve=function(e){if(e.src){let n=Object(C.to_luastring)("@"+e.src);if("complete"===document.readyState||e.async){if("function"==typeof fetch)fetch(e.src,{method:"GET",credentials:Y(e.crossorigin),redirect:"follow",integrity:e.integrity}).then(function(e){if(e.ok)return e.arrayBuffer();throw Error("unable to fetch")}).then(function(R){_e(e,new Uint8Array(R),n)}).catch(function(n){e.dispatchEvent(new Event("error"))});else{let R=new XMLHttpRequest;R.open("GET",e.src,!0),R.responseType="arraybuffer",R.onreadystatechange=function(){4===R.readyState&&me(R,e,n)},R.send()}}else{let R=new XMLHttpRequest;R.open("GET",e.src,!1),R.send(),me(R,e,n)}}else{let n=Object(C.to_luastring)(e.innerHTML),R=e.id?Object(C.to_luastring)("="+e.id):n;_e(e,n,R)}},e=/^(.*?\/.*?)([\t ]*;.*)?$/,n=/^(\d+)\.(\d+)$/,B=function(R){if("SCRIPT"!==R.tagName)return;let C=e.exec(R.type);if(!C)return;let et=C[1];if("application/lua"===et||"text/lua"===et){if(R.hasAttribute("lua-version")){let e=n.exec(R.getAttribute("lua-version"));if(!e||e[1]!==eu||e[2]!==ec)return}ve(R)}};"u">typeof MutationObserver?new MutationObserver(function(e,n){for(let n=0;n<e.length;n++){let R=e[n];for(let e=0;e<R.addedNodes.length;e++)B(R.addedNodes[e])}}).observe(document,{childList:!0,subtree:!0}):console.warn&&console.warn("fengari-web: MutationObserver not found; lua script tags will not be run when inserted"),Array.prototype.forEach.call(document.querySelectorAll('script[type^="application/lua"], script[type^="text/lua"]'),B)}},function(e,n,R){let{LUA_MULTRET:C,LUA_OPADD:et,LUA_OPBAND:ei,LUA_OPBNOT:eo,LUA_OPBOR:el,LUA_OPBXOR:eu,LUA_OPDIV:ec,LUA_OPIDIV:ef,LUA_OPMOD:eh,LUA_OPSHL:ep,LUA_OPSHR:ed,LUA_OPUNM:e_,constant_types:{LUA_TBOOLEAN:eg,LUA_TLIGHTUSERDATA:em,LUA_TLNGSTR:eb,LUA_TNIL:ey,LUA_TNUMFLT:ev,LUA_TNUMINT:ek,LUA_TTABLE:eA},to_luastring:eL}=R(1),{lua_assert:ex}=R(4),ew=R(20),eT=R(6),eO=R(16),eE=R(23),eS=R(9),eN=R(15),eI=eO.OpCodesI,eU=eT.TValue,eR={OPR_ADD:0,OPR_SUB:1,OPR_MUL:2,OPR_MOD:3,OPR_POW:4,OPR_DIV:5,OPR_IDIV:6,OPR_BAND:7,OPR_BOR:8,OPR_BXOR:9,OPR_SHL:10,OPR_SHR:11,OPR_CONCAT:12,OPR_EQ:13,OPR_LT:14,OPR_LE:15,OPR_NE:16,OPR_GT:17,OPR_GE:18,OPR_AND:19,OPR_OR:20,OPR_NOBINOPR:21},eC={OPR_MINUS:0,OPR_BNOT:1,OPR_NOT:2,OPR_LEN:3,OPR_NOUNOPR:4},me=function(e){return e.t!==e.f},ve=function(e,n){let R=eE.expkind;if(me(e))return!1;switch(e.k){case R.VKINT:return!n||new eU(ek,e.u.ival);case R.VKFLT:return!n||new eU(ev,e.u.nval);default:return!1}},G=function(e,n,R){let C,et=n+R-1;if(e.pc>e.lasttarget&&(C=e.f.code[e.pc-1]).opcode===eI.OP_LOADNIL){let e=C.A,R=e+C.B;if(e<=n&&n<=R+1||n<=e&&e<=et+1)return e<n&&(n=e),R>et&&(et=R),eO.SETARG_A(C,n),void eO.SETARG_B(C,et-n)}te(e,eI.OP_LOADNIL,n,R-1,0)},I=function(e,n){return e.f.code[n.u.info]},B=function(e,n){let R=e.f.code[n].sBx;return -1===R?-1:n+1+R},ye=function(e,n,R){let C=e.f.code[n],et=R-(n+1);ex(-1!==R),Math.abs(et)>eO.MAXARG_sBx&&ew.luaX_syntaxerror(e.ls,eL("control structure too long",!0)),eO.SETARG_sBx(C,et)},be=function(e,n,R){if(-1===R)return n;if(-1===n)n=R;else{let C=n,et=B(e,C);for(;-1!==et;)et=B(e,C=et);ye(e,C,R)}return n},Ue=function(e){let n=e.jpc;e.jpc=-1;let R=S(e,eI.OP_JMP,0,-1);return be(e,R,n)},Xe=function(e,n,R,C,et){return te(e,n,R,C,et),Ue(e)},st=function(e){return e.lasttarget=e.pc,e.pc},Ze=function(e,n){return n>=1&&eO.testTMode(e.f.code[n-1].opcode)?n-1:n},ae=function(e,n){return e.f.code[Ze(e,n)]},le=function(e,n,R){let C=Ze(e,n),et=e.f.code[C];return et.opcode===eI.OP_TESTSET&&(R!==eO.NO_REG&&R!==et.B?eO.SETARG_A(et,R):e.f.code[C]=eO.CREATE_ABC(eI.OP_TEST,et.B,0,et.C),!0)},Pe=function(e,n){for(;-1!==n;n=B(e,n))le(e,n,eO.NO_REG)},Te=function(e,n,R,C,et){for(;-1!==n;){let ei=B(e,n);le(e,n,C)?ye(e,n,R):ye(e,n,et),n=ei}},ze=function(e,n){st(e),e.jpc=be(e,e.jpc,n)},g=function(e,n,R){R===e.pc?ze(e,n):(ex(R<e.pc),Te(e,n,R,eO.NO_REG,R))},ge=function(e,n){let R=e.f;return Te(e,e.jpc,e.pc,eO.NO_REG,e.pc),e.jpc=-1,R.code[e.pc]=n,R.lineinfo[e.pc]=e.ls.lastline,e.pc++},te=function(e,n,R,C,et){return ex(eO.getOpMode(n)===eO.iABC),ex(eO.getBMode(n)!==eO.OpArgN||0===C),ex(eO.getCMode(n)!==eO.OpArgN||0===et),ex(R<=eO.MAXARG_A&&C<=eO.MAXARG_B&&et<=eO.MAXARG_C),ge(e,eO.CREATE_ABC(n,R,C,et))},w=function(e,n,R,C){return ex(eO.getOpMode(n)===eO.iABx||eO.getOpMode(n)===eO.iAsBx),ex(eO.getCMode(n)===eO.OpArgN),ex(R<=eO.MAXARG_A&&C<=eO.MAXARG_Bx),ge(e,eO.CREATE_ABx(n,R,C))},S=function(e,n,R,C){return w(e,n,R,C+eO.MAXARG_sBx)},v=function(e,n){return ex(n<=eO.MAXARG_Ax),ge(e,eO.CREATE_Ax(eI.OP_EXTRAARG,n))},q=function(e,n,R){if(R<=eO.MAXARG_Bx)return w(e,eI.OP_LOADK,n,R);{let C=w(e,eI.OP_LOADKX,n,0);return v(e,R),C}},oe=function(e,n){let R=e.freereg+n;R>e.f.maxstacksize&&(R>=255&&ew.luaX_syntaxerror(e.ls,eL("function or expression needs too many registers",!0)),e.f.maxstacksize=R)},O=function(e,n){oe(e,n),e.freereg+=n},ee=function(e,n){!eO.ISK(n)&&n>=e.nactvar&&(e.freereg--,ex(n===e.freereg))},ce=function(e,n){n.k===eE.expkind.VNONRELOC&&ee(e,n.u.info)},Re=function(e,n,R){let C=n.k===eE.expkind.VNONRELOC?n.u.info:-1,et=R.k===eE.expkind.VNONRELOC?R.u.info:-1;C>et?(ee(e,C),ee(e,et)):(ee(e,et),ee(e,C))},Ke=function(e,n,R){let C=e.f,et=eS.luaH_get(e.L,e.ls.h,n);if(et.ttisinteger()){let n=et.value;if(n<e.nk&&C.k[n].ttype()===R.ttype()&&C.k[n].value===R.value)return n}let ei=e.nk;return eS.luaH_setfrom(e.L,e.ls.h,n,new eT.TValue(ek,ei)),C.k[ei]=R,e.nk++,ei},nt=function(e,n){return Ke(e,new eU(em,n),new eU(ek,n))},dt=function(e,n){let R=new eU(ev,n);return Ke(e,R,R)},Et=function(e,n){let R=new eU(eg,n);return Ke(e,R,R)},St=function(e,n,R){let et=eE.expkind;if(n.k===et.VCALL)eO.SETARG_C(I(e,n),R+1);else if(n.k===et.VVARARG){let C=I(e,n);eO.SETARG_B(C,R+1),eO.SETARG_A(C,e.freereg),O(e,1)}else ex(R===C)},Nt=function(e,n){let R=eE.expkind;n.k===R.VCALL?(ex(2===I(e,n).C),n.k=R.VNONRELOC,n.u.info=I(e,n).A):n.k===R.VVARARG&&(eO.SETARG_B(I(e,n),2),n.k=R.VRELOCABLE)},D=function(e,n){let R=eE.expkind;switch(n.k){case R.VLOCAL:n.k=R.VNONRELOC;break;case R.VUPVAL:n.u.info=te(e,eI.OP_GETUPVAL,0,n.u.info,0),n.k=R.VRELOCABLE;break;case R.VINDEXED:{let C;ee(e,n.u.ind.idx),n.u.ind.vt===R.VLOCAL?(ee(e,n.u.ind.t),C=eI.OP_GETTABLE):(ex(n.u.ind.vt===R.VUPVAL),C=eI.OP_GETTABUP),n.u.info=te(e,C,0,n.u.ind.t,n.u.ind.idx),n.k=R.VRELOCABLE;break}case R.VVARARG:case R.VCALL:Nt(e,n)}},Ce=function(e,n,R,C){return st(e),te(e,eI.OP_LOADBOOL,n,R,C)},De=function(e,n,R){let C=eE.expkind;switch(D(e,n),n.k){case C.VNIL:G(e,R,1);break;case C.VFALSE:case C.VTRUE:te(e,eI.OP_LOADBOOL,R,n.k===C.VTRUE,0);break;case C.VK:q(e,R,n.u.info);break;case C.VKFLT:q(e,R,dt(e,n.u.nval));break;case C.VKINT:q(e,R,nt(e,n.u.ival));break;case C.VRELOCABLE:{let C=I(e,n);eO.SETARG_A(C,R);break}case C.VNONRELOC:R!==n.u.info&&te(e,eI.OP_MOVE,R,n.u.info,0);break;default:return void ex(n.k===C.VJMP)}n.u.info=R,n.k=C.VNONRELOC},Fe=function(e,n){n.k!==eE.expkind.VNONRELOC&&(O(e,1),De(e,n,e.freereg-1))},Se=function(e,n){for(;-1!==n;n=B(e,n))if(ae(e,n).opcode!==eI.OP_TESTSET)return!0;return!1},je=function(e,n,R){let C=eE.expkind;if(De(e,n,R),n.k===C.VJMP&&(n.t=be(e,n.t,n.u.info)),me(n)){let et,ei=-1,eo=-1;if(Se(e,n.t)||Se(e,n.f)){let et=n.k===C.VJMP?-1:Ue(e);ei=Ce(e,R,0,1),eo=Ce(e,R,1,0),ze(e,et)}et=st(e),Te(e,n.f,et,R,ei),Te(e,n.t,et,R,eo)}n.f=n.t=-1,n.u.info=R,n.k=C.VNONRELOC},We=function(e,n){D(e,n),ce(e,n),O(e,1),je(e,n,e.freereg-1)},bt=function(e,n){if(D(e,n),n.k===eE.expkind.VNONRELOC){if(!me(n))return n.u.info;if(n.u.info>=e.nactvar)return je(e,n,n.u.info),n.u.info}return We(e,n),n.u.info},vt=function(e,n){me(n)?bt(e,n):D(e,n)},yt=function(e,n){let R=eE.expkind,C=!1;switch(vt(e,n),n.k){case R.VTRUE:n.u.info=Et(e,!0),C=!0;break;case R.VFALSE:n.u.info=Et(e,!1),C=!0;break;case R.VNIL:let et,ei;n.u.info=(et=new eU(ey,null),ei=new eU(eA,e.ls.h),Ke(e,ei,et)),C=!0;break;case R.VKINT:n.u.info=nt(e,n.u.ival),C=!0;break;case R.VKFLT:n.u.info=dt(e,n.u.nval),C=!0;break;case R.VK:C=!0}return C&&(n.k=R.VK,n.u.info<=eO.MAXINDEXRK)?eO.RKASK(n.u.info):bt(e,n)},Rt=function(e,n){let R=ae(e,n.u.info);ex(eO.testTMode(R.opcode)&&R.opcode!==eI.OP_TESTSET&&R.opcode!==eI.OP_TEST),eO.SETARG_A(R,!R.A)},lt=function(e,n,R){if(n.k===eE.expkind.VRELOCABLE){let C=I(e,n);if(C.opcode===eI.OP_NOT)return e.pc--,Xe(e,eI.OP_TEST,C.B,0,!R)}return Fe(e,n),ce(e,n),Xe(e,eI.OP_TESTSET,eO.NO_REG,n.u.info,R)},pt=function(e,n){let R,C=eE.expkind;switch(D(e,n),n.k){case C.VJMP:Rt(e,n),R=n.u.info;break;case C.VK:case C.VKFLT:case C.VKINT:case C.VTRUE:R=-1;break;default:R=lt(e,n,0)}n.f=be(e,n.f,R),ze(e,n.t),n.t=-1},wt=function(e,n){let R,C=eE.expkind;switch(D(e,n),n.k){case C.VJMP:R=n.u.info;break;case C.VNIL:case C.VFALSE:R=-1;break;default:R=lt(e,n,1)}n.t=be(e,n.t,R),ze(e,n.f),n.f=-1},o=function(e,n,R){let C,et,e_=eE.expkind;if(!(C=ve(n,!0))||!(et=ve(R,!0))||!function(e,n,R){switch(e){case ei:case el:case eu:case ep:case ed:case eo:return!1!==eN.tointeger(n)&&!1!==eN.tointeger(R);case ec:case ef:case eh:return 0!==R.value;default:return 1}}(e,C,et))return 0;let eg=new eU;if(eT.luaO_arith(null,e,C,et,eg),eg.ttisinteger())n.k=e_.VKINT,n.u.ival=eg.value;else{let e=eg.value;if(isNaN(e)||0===e)return!1;n.k=e_.VKFLT,n.u.nval=e}return!0},c=function(e,n,R,C,et){let ei=yt(e,C),eo=yt(e,R);Re(e,R,C),R.u.info=te(e,n,0,eo,ei),R.k=eE.expkind.VRELOCABLE,T(e,et)},T=function(e,n){e.f.lineinfo[e.pc-1]=n};e.exports.BinOpr=eR,e.exports.NO_JUMP=-1,e.exports.UnOpr=eC,e.exports.getinstruction=I,e.exports.luaK_checkstack=oe,e.exports.luaK_code=ge,e.exports.luaK_codeABC=te,e.exports.luaK_codeABx=w,e.exports.luaK_codeAsBx=S,e.exports.luaK_codek=q,e.exports.luaK_concat=be,e.exports.luaK_dischargevars=D,e.exports.luaK_exp2RK=yt,e.exports.luaK_exp2anyreg=bt,e.exports.luaK_exp2anyregup=function(e,n){(n.k!==eE.expkind.VUPVAL||me(n))&&bt(e,n)},e.exports.luaK_exp2nextreg=We,e.exports.luaK_exp2val=vt,e.exports.luaK_fixline=T,e.exports.luaK_getlabel=st,e.exports.luaK_goiffalse=wt,e.exports.luaK_goiftrue=pt,e.exports.luaK_indexed=function(e,n,R){let C=eE.expkind;ex(!me(n)&&(eE.vkisinreg(n.k)||n.k===C.VUPVAL)),n.u.ind.t=n.u.info,n.u.ind.idx=yt(e,R),n.u.ind.vt=n.k===C.VUPVAL?C.VUPVAL:C.VLOCAL,n.k=C.VINDEXED},e.exports.luaK_infix=function(e,n,R){switch(n){case eR.OPR_AND:pt(e,R);break;case eR.OPR_OR:wt(e,R);break;case eR.OPR_CONCAT:We(e,R);break;case eR.OPR_ADD:case eR.OPR_SUB:case eR.OPR_MUL:case eR.OPR_DIV:case eR.OPR_IDIV:case eR.OPR_MOD:case eR.OPR_POW:case eR.OPR_BAND:case eR.OPR_BOR:case eR.OPR_BXOR:case eR.OPR_SHL:case eR.OPR_SHR:ve(R,!1)||yt(e,R);break;default:yt(e,R)}},e.exports.luaK_intK=nt,e.exports.luaK_jump=Ue,e.exports.luaK_jumpto=function(e,n){return g(e,Ue(e),n)},e.exports.luaK_nil=G,e.exports.luaK_numberK=dt,e.exports.luaK_patchclose=function(e,n,R){for(R++;-1!==n;n=B(e,n)){let C=e.f.code[n];ex(C.opcode===eI.OP_JMP&&(0===C.A||C.A>=R)),eO.SETARG_A(C,R)}},e.exports.luaK_patchlist=g,e.exports.luaK_patchtohere=ze,e.exports.luaK_posfix=function(e,n,R,C,ei){let eo=eE.expkind;switch(n){case eR.OPR_AND:ex(-1===R.t),D(e,C),C.f=be(e,C.f,R.f),R.to(C);break;case eR.OPR_OR:ex(-1===R.f),D(e,C),C.t=be(e,C.t,R.t),R.to(C);break;case eR.OPR_CONCAT:{vt(e,C);let n=I(e,C);C.k===eo.VRELOCABLE&&n.opcode===eI.OP_CONCAT?(ex(R.u.info===n.B-1),ce(e,R),eO.SETARG_B(n,R.u.info),R.k=eo.VRELOCABLE,R.u.info=C.u.info):(We(e,C),c(e,eI.OP_CONCAT,R,C,ei));break}case eR.OPR_ADD:case eR.OPR_SUB:case eR.OPR_MUL:case eR.OPR_DIV:case eR.OPR_IDIV:case eR.OPR_MOD:case eR.OPR_POW:case eR.OPR_BAND:case eR.OPR_BOR:case eR.OPR_BXOR:case eR.OPR_SHL:case eR.OPR_SHR:o(n+et,R,C)||c(e,n+eI.OP_ADD,R,C,ei);break;case eR.OPR_EQ:case eR.OPR_LT:case eR.OPR_LE:case eR.OPR_NE:case eR.OPR_GT:case eR.OPR_GE:(function(e,n,R,C){let et,ei=eE.expkind;R.k===ei.VK?et=eO.RKASK(R.u.info):(ex(R.k===ei.VNONRELOC),et=R.u.info);let eo=yt(e,C);switch(Re(e,R,C),n){case eR.OPR_NE:R.u.info=Xe(e,eI.OP_EQ,0,et,eo);break;case eR.OPR_GT:case eR.OPR_GE:{let C=n-eR.OPR_NE+eI.OP_EQ;R.u.info=Xe(e,C,1,eo,et);break}default:{let C=n-eR.OPR_EQ+eI.OP_EQ;R.u.info=Xe(e,C,1,et,eo)}}R.k=ei.VJMP})(e,n,R,C)}return R},e.exports.luaK_prefix=function(e,n,R,C){let et=new eE.expdesc;switch(et.k=eE.expkind.VKINT,et.u.ival=et.u.nval=et.u.info=0,et.t=-1,et.f=-1,n){case eC.OPR_MINUS:case eC.OPR_BNOT:if(o(n+e_,R,et))break;case eC.OPR_LEN:var ei;let eo;ei=n+eI.OP_UNM,eo=bt(e,R),ce(e,R),R.u.info=te(e,ei,0,eo,0),R.k=eE.expkind.VRELOCABLE,T(e,C);break;case eC.OPR_NOT:(function(e,n){let R=eE.expkind;switch(D(e,n),n.k){case R.VNIL:case R.VFALSE:n.k=R.VTRUE;break;case R.VK:case R.VKFLT:case R.VKINT:case R.VTRUE:n.k=R.VFALSE;break;case R.VJMP:Rt(e,n);break;case R.VRELOCABLE:case R.VNONRELOC:Fe(e,n),ce(e,n),n.u.info=te(e,eI.OP_NOT,0,n.u.info,0),n.k=R.VRELOCABLE}{let e=n.f;n.f=n.t,n.t=e}Pe(e,n.f),Pe(e,n.t)})(e,R)}},e.exports.luaK_reserveregs=O,e.exports.luaK_ret=function(e,n,R){te(e,eI.OP_RETURN,n,R+1,0)},e.exports.luaK_self=function(e,n,R){bt(e,n);let C=n.u.info;ce(e,n),n.u.info=e.freereg,n.k=eE.expkind.VNONRELOC,O(e,2),te(e,eI.OP_SELF,n.u.info,C,yt(e,R)),ce(e,R)},e.exports.luaK_setlist=function(e,n,R,et){let ei=(R-1)/eO.LFIELDS_PER_FLUSH+1,eo=et===C?0:et;ex(0!==et&&et<=eO.LFIELDS_PER_FLUSH),ei<=eO.MAXARG_C?te(e,eI.OP_SETLIST,n,eo,ei):ei<=eO.MAXARG_Ax?(te(e,eI.OP_SETLIST,n,eo,0),v(e,ei)):ew.luaX_syntaxerror(e.ls,eL("constructor too long",!0)),e.freereg=n+1},e.exports.luaK_setmultret=function(e,n){St(e,n,C)},e.exports.luaK_setoneret=Nt,e.exports.luaK_setreturns=St,e.exports.luaK_storevar=function(e,n,R){let C=eE.expkind;switch(n.k){case C.VLOCAL:return ce(e,R),void je(e,R,n.u.info);case C.VUPVAL:{let C=bt(e,R);te(e,eI.OP_SETUPVAL,C,n.u.info,0);break}case C.VINDEXED:{let et=n.u.ind.vt===C.VLOCAL?eI.OP_SETTABLE:eI.OP_SETTABUP,ei=yt(e,R);te(e,et,n.u.ind.t,n.u.ind.idx,ei)}}ce(e,R)},e.exports.luaK_stringK=function(e,n){let R=new eU(eb,n);return Ke(e,R,R)}},function(e,n,R){let{LUA_SIGNATURE:C,constant_types:{LUA_TBOOLEAN:et,LUA_TLNGSTR:ei,LUA_TNIL:eo,LUA_TNUMFLT:el,LUA_TNUMINT:eu,LUA_TSHRSTR:ec},thread_status:{LUA_ERRSYNTAX:ef},is_luastring:eh,luastring_eq:ep,to_luastring:ed}=R(1),e_=R(8),eg=R(13),em=R(6),{MAXARG_sBx:eb,POS_A:ey,POS_Ax:ev,POS_B:ek,POS_Bx:eA,POS_C:eL,POS_OP:ex,SIZE_A:ew,SIZE_Ax:eT,SIZE_B:eO,SIZE_Bx:eE,SIZE_C:eS,SIZE_OP:eN}=R(16),{lua_assert:eI}=R(4),{luaS_bless:eU}=R(10),{luaZ_read:eR,ZIO:eC}=R(19),eM=[25,147,13,10,26,10];let ve=class ve{constructor(e,n,R){this.intSize=4,this.size_tSize=4,this.instructionSize=4,this.integerSize=4,this.numberSize=8,eI(n instanceof eC,"BytecodeParser only operates on a ZIO"),eI(eh(R)),64===R[0]||61===R[0]?this.name=R.subarray(1):R[0]==C[0]?this.name=ed("binary string",!0):this.name=R,this.L=e,this.Z=n,this.arraybuffer=new ArrayBuffer(Math.max(this.intSize,this.size_tSize,this.instructionSize,this.integerSize,this.numberSize)),this.dv=new DataView(this.arraybuffer),this.u8=new Uint8Array(this.arraybuffer)}read(e){let n=new Uint8Array(e);return 0!==eR(this.Z,n,0,e)&&this.error("truncated"),n}LoadByte(){return 0!==eR(this.Z,this.u8,0,1)&&this.error("truncated"),this.u8[0]}LoadInt(){return 0!==eR(this.Z,this.u8,0,this.intSize)&&this.error("truncated"),this.dv.getInt32(0,!0)}LoadNumber(){return 0!==eR(this.Z,this.u8,0,this.numberSize)&&this.error("truncated"),this.dv.getFloat64(0,!0)}LoadInteger(){return 0!==eR(this.Z,this.u8,0,this.integerSize)&&this.error("truncated"),this.dv.getInt32(0,!0)}LoadSize_t(){return this.LoadInteger()}LoadString(){let e=this.LoadByte();return 255===e&&(e=this.LoadSize_t()),0===e?null:eU(this.L,this.read(e-1))}static MASK1(e,n){return~(-1<<e)<<n}LoadCode(e){let n=this.LoadInt();for(let R=0;R<n;R++){0!==eR(this.Z,this.u8,0,this.instructionSize)&&this.error("truncated");let n=this.dv.getUint32(0,!0);e.code[R]={code:n,opcode:n>>ex&ve.MASK1(eN,0),A:n>>ey&ve.MASK1(ew,0),B:n>>ek&ve.MASK1(eO,0),C:n>>eL&ve.MASK1(eS,0),Bx:n>>eA&ve.MASK1(eE,0),Ax:n>>ev&ve.MASK1(eT,0),sBx:(n>>eA&ve.MASK1(eE,0))-eb}}}LoadConstants(e){let n=this.LoadInt();for(let R=0;R<n;R++){let n=this.LoadByte();switch(n){case eo:e.k.push(new em.TValue(eo,null));break;case et:e.k.push(new em.TValue(et,0!==this.LoadByte()));break;case el:e.k.push(new em.TValue(el,this.LoadNumber()));break;case eu:e.k.push(new em.TValue(eu,this.LoadInteger()));break;case ec:case ei:e.k.push(new em.TValue(ei,this.LoadString()));break;default:this.error(`unrecognized constant '${n}'`)}}}LoadProtos(e){let n=this.LoadInt();for(let R=0;R<n;R++)e.p[R]=new eg.Proto(this.L),this.LoadFunction(e.p[R],e.source)}LoadUpvalues(e){let n=this.LoadInt();for(let R=0;R<n;R++)e.upvalues[R]={name:null,instack:this.LoadByte(),idx:this.LoadByte()}}LoadDebug(e){let n=this.LoadInt();for(let R=0;R<n;R++)e.lineinfo[R]=this.LoadInt();n=this.LoadInt();for(let R=0;R<n;R++)e.locvars[R]={varname:this.LoadString(),startpc:this.LoadInt(),endpc:this.LoadInt()};n=this.LoadInt();for(let R=0;R<n;R++)e.upvalues[R].name=this.LoadString()}LoadFunction(e,n){e.source=this.LoadString(),null===e.source&&(e.source=n),e.linedefined=this.LoadInt(),e.lastlinedefined=this.LoadInt(),e.numparams=this.LoadByte(),e.is_vararg=0!==this.LoadByte(),e.maxstacksize=this.LoadByte(),this.LoadCode(e),this.LoadConstants(e),this.LoadUpvalues(e),this.LoadProtos(e),this.LoadDebug(e)}checkliteral(e,n){ep(this.read(e.length),e)||this.error(n)}checkHeader(){this.checkliteral(C.subarray(1),"not a"),83!==this.LoadByte()&&this.error("version mismatch in"),0!==this.LoadByte()&&this.error("format mismatch in"),this.checkliteral(eM,"corrupted"),this.intSize=this.LoadByte(),this.size_tSize=this.LoadByte(),this.instructionSize=this.LoadByte(),this.integerSize=this.LoadByte(),this.numberSize=this.LoadByte(),this.checksize(this.intSize,4,"int"),this.checksize(this.size_tSize,4,"size_t"),this.checksize(this.instructionSize,4,"instruction"),this.checksize(this.integerSize,4,"integer"),this.checksize(this.numberSize,8,"number"),22136!==this.LoadInteger()&&this.error("endianness mismatch in"),370.5!==this.LoadNumber()&&this.error("float format mismatch in")}error(e){em.luaO_pushfstring(this.L,ed("%s: %s precompiled chunk"),this.name,ed(e)),e_.luaD_throw(this.L,ef)}checksize(e,n,R){e!==n&&this.error(`${R} size mismatch in`)}};e.exports.luaU_undump=function(e,n,R){let C=new ve(e,n,R);C.checkHeader();let et=eg.luaF_newLclosure(e,C.LoadByte());return e_.luaD_inctop(e),e.stack[e.top-1].setclLvalue(et),et.p=new eg.Proto(e),C.LoadFunction(et.p,null),eI(et.nupvalues===et.p.upvalues.length),et}},function(e,n,R){let{LUA_SIGNATURE:C,LUA_VERSION_MAJOR:et,LUA_VERSION_MINOR:ei,constant_types:{LUA_TBOOLEAN:eo,LUA_TLNGSTR:el,LUA_TNIL:eu,LUA_TNUMFLT:ec,LUA_TNUMINT:ef,LUA_TSHRSTR:eh},luastring_of:ep}=R(1),ed=ep(25,147,13,10,26,10),e_=16*Number(et)+Number(ei),f=function(e,n,R){0===R.status&&n>0&&(R.status=R.writer(R.L,e,n,R.data))},m=function(e,n){f(ep(e),1,n)},b=function(e,n){let R=new ArrayBuffer(4);new DataView(R).setInt32(0,e,!0),f(new Uint8Array(R),4,n)},N=function(e,n){let R=new ArrayBuffer(4);new DataView(R).setInt32(0,e,!0),f(new Uint8Array(R),4,n)},M=function(e,n){let R=new ArrayBuffer(8);new DataView(R).setFloat64(0,e,!0),f(new Uint8Array(R),8,n)},H=function(e,n){if(null===e)m(0,n);else{let R=e.tsslen()+1,C=e.getstr();R<255?m(R,n):(m(255,n),N(R,n)),f(C,R-1,n)}},z=function(e,n,R){R.strip||e.source===n?H(null,R):H(e.source,R),b(e.linedefined,R),b(e.lastlinedefined,R),m(e.numparams,R),m(e.is_vararg?1:0,R),m(e.maxstacksize,R),function(e,n){let R=e.code.map(e=>e.code);b(R.length,n);for(let e=0;e<R.length;e++)b(R[e],n)}(e,R),function(e,n){let R=e.k.length;b(R,n);for(let C=0;C<R;C++){let R=e.k[C];switch(m(R.ttype(),n),R.ttype()){case eu:break;case eo:m(R.value?1:0,n);break;case ec:M(R.value,n);break;case ef:N(R.value,n);break;case eh:case el:H(R.tsvalue(),n)}}}(e,R),function(e,n){let R=e.upvalues.length;b(R,n);for(let C=0;C<R;C++)m(e.upvalues[C].instack?1:0,n),m(e.upvalues[C].idx,n)}(e,R),function(e,n){let R=e.p.length;b(R,n);for(let C=0;C<R;C++)z(e.p[C],e.source,n)}(e,R),function(e,n){let R=n.strip?0:e.lineinfo.length;b(R,n);for(let C=0;C<R;C++)b(e.lineinfo[C],n);b(R=n.strip?0:e.locvars.length,n);for(let C=0;C<R;C++)H(e.locvars[C].varname,n),b(e.locvars[C].startpc,n),b(e.locvars[C].endpc,n);b(R=n.strip?0:e.upvalues.length,n);for(let C=0;C<R;C++)H(e.upvalues[C].name,n)}(e,R)};e.exports.luaU_dump=function(e,n,R,et,ei){let eo=new class{constructor(){this.L=null,this.write=null,this.data=null,this.strip=NaN,this.status=NaN}};return eo.L=e,eo.writer=R,eo.data=et,eo.strip=ei,eo.status=0,f(C,C.length,eo),m(e_,eo),m(0,eo),f(ed,ed.length,eo),m(4,eo),m(4,eo),m(4,eo),m(4,eo),m(8,eo),N(22136,eo),M(370.5,eo),m(n.upvalues.length,eo),z(n,null,eo),eo.status}},function(e,n,R){var C;!function(){var et={not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};function a(e){return function(e,n){var R,C,ei,eo,el,eu,ec,ef,eh,ep=1,ed=e.length,e_="";for(C=0;C<ed;C++)if("string"==typeof e[C])e_+=e[C];else if(Array.isArray(e[C])){if((eo=e[C])[2])for(R=n[ep],ei=0;ei<eo[2].length;ei++){if(!R.hasOwnProperty(eo[2][ei]))throw Error(a('[sprintf] property "%s" does not exist',eo[2][ei]));R=R[eo[2][ei]]}else R=eo[1]?n[eo[1]]:n[ep++];if(et.not_type.test(eo[8])&&et.not_primitive.test(eo[8])&&R instanceof Function&&(R=R()),et.numeric_arg.test(eo[8])&&"number"!=typeof R&&isNaN(R))throw TypeError(a("[sprintf] expecting number but found %T",R));switch(et.number.test(eo[8])&&(ef=R>=0),eo[8]){case"b":R=parseInt(R,10).toString(2);break;case"c":R=String.fromCharCode(parseInt(R,10));break;case"d":case"i":R=parseInt(R,10);break;case"j":R=JSON.stringify(R,null,eo[6]?parseInt(eo[6]):0);break;case"e":R=eo[7]?parseFloat(R).toExponential(eo[7]):parseFloat(R).toExponential();break;case"f":R=eo[7]?parseFloat(R).toFixed(eo[7]):parseFloat(R);break;case"g":R=eo[7]?String(Number(R.toPrecision(eo[7]))):parseFloat(R);break;case"o":R=(parseInt(R,10)>>>0).toString(8);break;case"s":R=String(R),R=eo[7]?R.substring(0,eo[7]):R;break;case"t":R=String(!!R),R=eo[7]?R.substring(0,eo[7]):R;break;case"T":R=Object.prototype.toString.call(R).slice(8,-1).toLowerCase(),R=eo[7]?R.substring(0,eo[7]):R;break;case"u":R=parseInt(R,10)>>>0;break;case"v":R=R.valueOf(),R=eo[7]?R.substring(0,eo[7]):R;break;case"x":R=(parseInt(R,10)>>>0).toString(16);break;case"X":R=(parseInt(R,10)>>>0).toString(16).toUpperCase()}et.json.test(eo[8])?e_+=R:(et.number.test(eo[8])&&(!ef||eo[3])?(eh=ef?"+":"-",R=R.toString().replace(et.sign,"")):eh="",eu=eo[4]?"0"===eo[4]?"0":eo[4].charAt(1):" ",ec=eo[6]-(eh+R).length,el=eo[6]&&ec>0?eu.repeat(ec):"",e_+=eo[5]?eh+R+el:"0"===eu?eh+el+R:el+eh+R)}return e_}(function(e){if(ei[e])return ei[e];for(var n,R=e,C=[],eo=0;R;){if(null!==(n=et.text.exec(R)))C.push(n[0]);else if(null!==(n=et.modulo.exec(R)))C.push("%");else{if(null===(n=et.placeholder.exec(R)))throw SyntaxError("[sprintf] unexpected placeholder");if(n[2]){eo|=1;var el=[],eu=n[2],ec=[];if(null===(ec=et.key.exec(eu)))throw SyntaxError("[sprintf] failed to parse named argument key");for(el.push(ec[1]);""!==(eu=eu.substring(ec[0].length));)if(null!==(ec=et.key_access.exec(eu)))el.push(ec[1]);else{if(null===(ec=et.index_access.exec(eu)))throw SyntaxError("[sprintf] failed to parse named argument key");el.push(ec[1])}n[2]=el}else eo|=2;if(3===eo)throw Error("[sprintf] mixing positional and named placeholders is not (yet) supported");C.push(n)}R=R.substring(n[0].length)}return ei[e]=C}(e),arguments)}function i(e,n){return a.apply(null,[e].concat(n||[]))}var ei=Object.create(null);n.sprintf=a,n.vsprintf=i,"u">typeof window&&(window.sprintf=a,window.vsprintf=i,void 0===(C=(function(){return{sprintf:a,vsprintf:i}}).call(n,R,n,e))||(e.exports=C))}()},function(e,n,R){let{lua_pop:C}=R(2),{luaL_requiref:et}=R(7),{to_luastring:ei}=R(5),eo={};e.exports.luaL_openlibs=function(e){for(let n in eo)et(e,ei(n),eo[n],1),C(e,1)};let el=R(17),{luaopen_base:eu}=R(24),{luaopen_coroutine:ec}=R(25),{luaopen_debug:ef}=R(31),{luaopen_math:eh}=R(30),{luaopen_package:ep}=R(32),{luaopen_os:ed}=R(27),{luaopen_string:e_}=R(28),{luaopen_table:eg}=R(26),{luaopen_utf8:em}=R(29);eo._G=eu,eo[el.LUA_LOADLIBNAME]=ep,eo[el.LUA_COLIBNAME]=ec,eo[el.LUA_TABLIBNAME]=eg,eo[el.LUA_OSLIBNAME]=ed,eo[el.LUA_STRLIBNAME]=e_,eo[el.LUA_MATHLIBNAME]=eh,eo[el.LUA_UTF8LIBNAME]=em,eo[el.LUA_DBLIBNAME]=ef;let{luaopen_fengari:eb}=R(33);eo[el.LUA_FENGARILIBNAME]=eb}]);function gr(e,n){if("boolean"==typeof n)e_.lua.lua_pushboolean(e,n);else if("number"==typeof n)e_.lua.lua_pushnumber(e,n);else if("string"==typeof n)e_.lua.lua_pushstring(e,e_.to_luastring(n));else if(Array.isArray(n))e_.lua.lua_newtable(e),n.forEach((n,R)=>{gr(e,n),e_.lua.lua_rawseti(e,-2,R+1)});else if("object"==typeof n)e_.lua.lua_newtable(e),Object.entries(n).forEach(([n,R])=>{gr(e,R),e_.lua.lua_setfield(e,-2,n)});else throw`unknown type ${typeof n}`}function Qr(e,n){return e_.lua.lua_tojsstring(e,n)}function Ss(e,n){e_.lua.lua_pushnil(e);let R={};for(;0!=e_.lua.lua_next(e,-2);)R[Qr(e,-2)]=es(e,-1),e_.lua.lua_pop(e,1);return R}function Ns(e){let n=es(e,-1);return e_.lua.lua_pop(e,1),n}function es(e,n){if(!e_.lua.lua_isnil(e,n)){if(e_.lua.lua_isboolean(e,n))return e_.lua.lua_toboolean(e,n);if(e_.lua.lua_isnumber(e,n))return e_.lua.lua_tonumber(e,n);if(e_.lua.lua_isstring(e,n))return Qr(e,n);if(e_.lua.lua_istable(e,n))return function(e,n){let R=e_.lua.lua_rawlen(e,n);if(0===R)return Ss(e);let C=[];for(let n=0;n<R;++n){if(e_.lua.lua_rawgeti(e,-1,n+1),e_.lua.lua_isnil(e,-1))return e_.lua.lua_pop(e,1),Ss(e);C.push(es(e,-1)),e_.lua.lua_pop(e,1)}return C}(e,n);throw`unknown type ${e_.lua.lua_typename(e,e_.lua.lua_type(e,n))}`}}function Cr(e,n,...R){if(e_.lua.lua_getglobal(e,e_.to_luastring(n,!0)),R.forEach(n=>{gr(e,n)}),e_.lua.lua_call(e,R.length,1)!==e_.lua.LUA_OK){let n=Qr(e,-1);if(n)throw Error(n)}}let fi=class fi{get luaState(){return this._luaState}constructor(e){this._luaState=e}};let di=class di{get luaState(){return this._instance.luaState}constructor(e){this._instance=e}get label(){return"unknown"}saveState(){return Cr(this.luaState,"saveState"),Ns(this.luaState)}loadState(e){Cr(this.luaState,"loadState",e)}inputs(e){return Cr(this.luaState,"inputs",e),Ns(this.luaState)}};let eg={javascript:{extensions:[".js"],main:"agent.js",init(e){let{api:n,script:R}=e,C={},et={exports:C,require:n.require.bind(n)},ei=Object.keys(et),eo=Function(...ei,`${R}
; ${ed.map(e=>`if (typeof ${e} !== "undefined") exports.${e} = ${e}`).join(";")}`);return eo(...ei.map(e=>et[e])),new ti(eo,C)}},lua:{extensions:[".lua"],main:"agent.lua",init(e){let n=function(e){let n=e_.lauxlib.luaL_newstate(),t=function(e,R){gr(n,R),e_.lua.lua_setglobal(n,e_.to_luastring(e))};!function(e){let n={_G:e_.lualib.luaopen_base,package:e_.lualib.luaopen_package,coroutine:e_.lualib.luaopen_coroutine,debug:e_.lualib.luaopen_debug,math:e_.lualib.luaopen_math,string:e_.lualib.luaopen_string,table:e_.lualib.luaopen_table};for(let R in n)e_.lauxlib.luaL_requiref(e,e_.to_luastring(R,!0),n[R],1)}(n);let R=e.path??"./";if(R.endsWith("/")||(R+="/"),e_.lua.lua_getglobal(n,"package"),e_.lua.lua_pushstring(n,e_.to_luastring(`${R}?.lua`,!0)),e_.lua.lua_setfield(n,-2,e_.to_luastring("path")),e_.lua.lua_pop(n,1),void 0!==e.globals&&Object.entries(e.globals).forEach(([e,n])=>{console.log("register Lua global",e),t(e,n)}),void 0!==e.api&&Object.entries(e.api).forEach(([e,R])=>{console.log("register Lua api",e),e_.lua.lua_register(n,e,n=>{try{return R(n)}catch(n){throw Error(`error in ${e} implementation: ${n}`)}})}),void 0!==e.script&&e_.lauxlib.luaL_dostring(n,e_.to_luastring(e.script))!=e_.lua.LUA_OK){console.error(e_.to_jsstring(e_.lua.lua_tostring(n,-1)));return}return new fi(n)}({path:e.baseUrl,script:e.script});return void 0!==n?new di(n):void 0}}},em="PixiMoroxel8AI",eb="Moroxel8AI",ey=Symbol.for("yaml.alias"),ev=Symbol.for("yaml.document"),ek=Symbol.for("yaml.map"),eA=Symbol.for("yaml.pair"),eL=Symbol.for("yaml.scalar"),ex=Symbol.for("yaml.seq"),ew=Symbol.for("yaml.node.type"),wn=e=>!!e&&"object"==typeof e&&e[ew]===ey,Bn=e=>!!e&&"object"==typeof e&&e[ew]===ev,Cn=e=>!!e&&"object"==typeof e&&e[ew]===ek,Gt=e=>!!e&&"object"==typeof e&&e[ew]===eA,Vt=e=>!!e&&"object"==typeof e&&e[ew]===eL,Mn=e=>!!e&&"object"==typeof e&&e[ew]===ex;function Ht(e){if(e&&"object"==typeof e)switch(e[ew]){case ek:case ex:return!0}return!1}function Kt(e){if(e&&"object"==typeof e)switch(e[ew]){case ey:case ek:case eL:case ex:return!0}return!1}let Ai=e=>(Vt(e)||Ht(e))&&!!e.anchor,eT=Symbol("break visit"),eO=Symbol("skip children"),eE=Symbol("remove node");function gn(e,n){let R=Qs(n);Bn(e)?Tn(null,e.contents,R,Object.freeze([e]))===eE&&(e.contents=null):Tn(null,e,R,Object.freeze([]))}function Tn(e,n,R,C){let et=ea(e,n,R,C);if(Kt(et)||Gt(et))return ta(e,C,et),Tn(e,et,R,C);if("symbol"!=typeof et){if(Ht(n)){C=Object.freeze(C.concat(n));for(let e=0;e<n.items.length;++e){let et=Tn(e,n.items[e],R,C);if("number"==typeof et)e=et-1;else{if(et===eT)return eT;et===eE&&(n.items.splice(e,1),e-=1)}}}else if(Gt(n)){C=Object.freeze(C.concat(n));let e=Tn("key",n.key,R,C);if(e===eT)return eT;e===eE&&(n.key=null);let et=Tn("value",n.value,R,C);if(et===eT)return eT;et===eE&&(n.value=null)}}return et}async function mr(e,n){let R=Qs(n);Bn(e)?await En(null,e.contents,R,Object.freeze([e]))===eE&&(e.contents=null):await En(null,e,R,Object.freeze([]))}async function En(e,n,R,C){let et=await ea(e,n,R,C);if(Kt(et)||Gt(et))return ta(e,C,et),En(e,et,R,C);if("symbol"!=typeof et){if(Ht(n)){C=Object.freeze(C.concat(n));for(let e=0;e<n.items.length;++e){let et=await En(e,n.items[e],R,C);if("number"==typeof et)e=et-1;else{if(et===eT)return eT;et===eE&&(n.items.splice(e,1),e-=1)}}}else if(Gt(n)){C=Object.freeze(C.concat(n));let e=await En("key",n.key,R,C);if(e===eT)return eT;e===eE&&(n.key=null);let et=await En("value",n.value,R,C);if(et===eT)return eT;et===eE&&(n.value=null)}}return et}function Qs(e){return"object"==typeof e&&(e.Collection||e.Node||e.Value)?Object.assign({Alias:e.Node,Map:e.Node,Scalar:e.Node,Seq:e.Node},e.Value&&{Map:e.Value,Scalar:e.Value,Seq:e.Value},e.Collection&&{Map:e.Collection,Seq:e.Collection},e):e}function ea(e,n,R,C){var et,ei,eo,el,eu;return"function"==typeof R?R(e,n,C):Cn(n)?null==(et=R.Map)?void 0:et.call(R,e,n,C):Mn(n)?null==(ei=R.Seq)?void 0:ei.call(R,e,n,C):Gt(n)?null==(eo=R.Pair)?void 0:eo.call(R,e,n,C):Vt(n)?null==(el=R.Scalar)?void 0:el.call(R,e,n,C):wn(n)?null==(eu=R.Alias)?void 0:eu.call(R,e,n,C):void 0}function ta(e,n,R){let C=n[n.length-1];if(Ht(C))C.items[e]=R;else if(Gt(C))"key"===e?C.key=R:C.value=R;else if(Bn(C))C.contents=R;else{let e=wn(C)?"alias":"scalar";throw Error(`Cannot replace node with ${e} parent`)}}gn.BREAK=eT,gn.SKIP=eO,gn.REMOVE=eE,mr.BREAK=eT,mr.SKIP=eO,mr.REMOVE=eE;let eS={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},Ti=e=>e.replace(/[!,[\]{}]/g,e=>eS[e]);let Wt=class Wt{constructor(e,n){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},Wt.defaultYaml,e),this.tags=Object.assign({},Wt.defaultTags,n)}clone(){let e=new Wt(this.yaml,this.tags);return e.docStart=this.docStart,e}atDocument(){let e=new Wt(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:Wt.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},Wt.defaultTags)}return e}add(e,n){this.atNextDocument&&(this.yaml={explicit:Wt.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},Wt.defaultTags),this.atNextDocument=!1);let R=e.trim().split(/[ \t]+/),C=R.shift();switch(C){case"%TAG":{if(2!==R.length&&(n(0,"%TAG directive should contain exactly two parts"),R.length<2))return!1;let[e,C]=R;return this.tags[e]=C,!0}case"%YAML":{if(this.yaml.explicit=!0,1!==R.length)return n(0,"%YAML directive should contain exactly one part"),!1;let[e]=R;if("1.1"===e||"1.2"===e)return this.yaml.version=e,!0;{let R=/^\d+\.\d+$/.test(e);return n(6,`Unsupported YAML version ${e}`,R),!1}}default:return n(0,`Unknown directive ${C}`,!0),!1}}tagName(e,n){if("!"===e)return"!";if("!"!==e[0])return n(`Not a valid tag: ${e}`),null;if("<"===e[1]){let R=e.slice(2,-1);return"!"===R||"!!"===R?(n(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(">"!==e[e.length-1]&&n("Verbatim tags must end with a >"),R)}let[,R,C]=e.match(/^(.*!)([^!]*)$/);C||n(`The ${e} tag has no suffix`);let et=this.tags[R];if(et)try{return et+decodeURIComponent(C)}catch(e){return n(String(e)),null}return"!"===R?e:(n(`Could not resolve tag: ${e}`),null)}tagString(e){for(let[n,R]of Object.entries(this.tags))if(e.startsWith(R))return n+Ti(e.substring(R.length));return"!"===e[0]?e:`!<${e}>`}toString(e){let n;let R=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],C=Object.entries(this.tags);if(e&&C.length>0&&Kt(e.contents)){let R={};gn(e.contents,(e,n)=>{Kt(n)&&n.tag&&(R[n.tag]=!0)}),n=Object.keys(R)}else n=[];for(let[et,ei]of C)"!!"===et&&"tag:yaml.org,2002:"===ei||(!e||n.some(e=>e.startsWith(ei)))&&R.push(`%TAG ${et} ${ei}`);return R.join(`
`)}};function na(e){if(/[\x00-\x19\s,[\]{}]/.test(e)){let n=`Anchor must not contain whitespace or control characters: ${JSON.stringify(e)}`;throw Error(n)}return!0}function ra(e){let n=new Set;return gn(e,{Value(e,R){R.anchor&&n.add(R.anchor)}}),n}function sa(e,n){for(let R=1;;++R){let C=`${e}${R}`;if(!n.has(C))return C}}function On(e,n,R,C){if(C&&"object"==typeof C){if(Array.isArray(C))for(let n=0,R=C.length;n<R;++n){let R=C[n],et=On(e,C,String(n),R);void 0===et?delete C[n]:et!==R&&(C[n]=et)}else if(C instanceof Map)for(let n of Array.from(C.keys())){let R=C.get(n),et=On(e,C,n,R);void 0===et?C.delete(n):et!==R&&C.set(n,et)}else if(C instanceof Set)for(let n of Array.from(C)){let R=On(e,C,n,n);void 0===R?C.delete(n):R!==n&&(C.delete(n),C.add(R))}else for(let[n,R]of Object.entries(C)){let et=On(e,C,n,R);void 0===et?delete C[n]:et!==R&&(C[n]=et)}}return e.call(n,R,C)}function nn(e,n,R){if(Array.isArray(e))return e.map((e,n)=>nn(e,String(n),R));if(e&&"function"==typeof e.toJSON){if(!R||!Ai(e))return e.toJSON(n,R);let C={aliasCount:0,count:1,res:void 0};R.anchors.set(e,C),R.onCreate=e=>{C.res=e,delete R.onCreate};let et=e.toJSON(n,R);return R.onCreate&&R.onCreate(et),et}return"bigint"!=typeof e||null!=R&&R.keep?e:Number(e)}Wt.defaultYaml={explicit:!1,version:"1.2"},Wt.defaultTags={"!!":"tag:yaml.org,2002:"};let rs=class rs{constructor(e){Object.defineProperty(this,ew,{value:e})}clone(){let e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}toJS(e,{mapAsMap:n,maxAliasCount:R,onAnchor:C,reviver:et}={}){if(!Bn(e))throw TypeError("A document argument is required");let ei={anchors:new Map,doc:e,keep:!0,mapAsMap:!0===n,mapKeyWarned:!1,maxAliasCount:"number"==typeof R?R:100},eo=nn(this,"",ei);if("function"==typeof C)for(let{count:e,res:n}of ei.anchors.values())C(n,e);return"function"==typeof et?On(et,{"":eo},"",eo):eo}};let br=class br extends rs{constructor(e){super(ey),this.source=e,Object.defineProperty(this,"tag",{set(){throw Error("Alias nodes cannot have tags")}})}resolve(e){let n;return gn(e,{Node:(e,R)=>{if(R===this)return gn.BREAK;R.anchor===this.source&&(n=R)}}),n}toJSON(e,n){if(!n)return{source:this.source};let{anchors:R,doc:C,maxAliasCount:et}=n,ei=this.resolve(C);if(!ei){let e=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw ReferenceError(e)}let eo=R.get(ei);if(eo||(nn(ei,null,n),eo=R.get(ei)),!eo||void 0===eo.res)throw ReferenceError("This should not happen: Alias anchor was not resolved?");if(et>=0&&(eo.count+=1,0===eo.aliasCount&&(eo.aliasCount=function lr(e,n,R){if(wn(n)){let C=n.resolve(e),et=R&&C&&R.get(C);return et?et.count*et.aliasCount:0}if(Ht(n)){let C=0;for(let et of n.items){let n=lr(e,et,R);n>C&&(C=n)}return C}if(Gt(n)){let C=lr(e,n.key,R),et=lr(e,n.value,R);return Math.max(C,et)}return 1}(C,ei,R)),eo.count*eo.aliasCount>et))throw ReferenceError("Excessive alias count indicates a resource exhaustion attack");return eo.res}toString(e,n,R){let C=`*${this.source}`;if(e){if(na(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){let e=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw Error(e)}if(e.implicitKey)return`${C} `}return C}};let aa=e=>!e||"function"!=typeof e&&"object"!=typeof e;let Pt=class Pt extends rs{constructor(e){super(eL),this.value=e}toJSON(e,n){return null!=n&&n.keep?this.value:nn(this.value,e,n)}toString(){return String(this.value)}};function Yn(e,n,R){var C,et,ei;let eo;if(Bn(e)&&(e=e.contents),Kt(e))return e;if(Gt(e)){let n=null==(et=(C=R.schema[ek]).createNode)?void 0:et.call(C,R.schema,null,R);return n.items.push(e),n}(e instanceof String||e instanceof Number||e instanceof Boolean||"u">typeof BigInt&&e instanceof BigInt)&&(e=e.valueOf());let{aliasDuplicateObjects:el,onAnchor:eu,onTagObj:ec,schema:ef,sourceObjects:eh}=R;if(el&&e&&"object"==typeof e){if(eo=eh.get(e))return eo.anchor||(eo.anchor=eu(e)),new br(eo.anchor);eo={anchor:null,node:null},eh.set(e,eo)}null!=n&&n.startsWith("!!")&&(n="tag:yaml.org,2002:"+n.slice(2));let ep=function(e,n,R){if(n){let e=R.filter(e=>e.tag===n),C=e.find(e=>!e.format)??e[0];if(!C)throw Error(`Tag ${n} not found`);return C}return R.find(n=>{var R;return(null==(R=n.identify)?void 0:R.call(n,e))&&!n.format})}(e,n,ef.tags);if(!ep){if(e&&"function"==typeof e.toJSON&&(e=e.toJSON()),!e||"object"!=typeof e){let n=new Pt(e);return eo&&(eo.node=n),n}ep=e instanceof Map?ef[ek]:Symbol.iterator in Object(e)?ef[ex]:ef[ek]}ec&&(ec(ep),delete R.onTagObj);let ed=null!=ep&&ep.createNode?ep.createNode(R.schema,e,R):"function"==typeof(null==(ei=null==ep?void 0:ep.nodeClass)?void 0:ei.from)?ep.nodeClass.from(R.schema,e,R):new Pt(e);return n?ed.tag=n:ep.default||(ed.tag=ep.tag),eo&&(eo.node=ed),ed}function hr(e,n,R){let C=R;for(let e=n.length-1;e>=0;--e){let R=n[e];if("number"==typeof R&&Number.isInteger(R)&&R>=0){let e=[];e[R]=C,C=e}else C=new Map([[R,C]])}return Yn(C,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw Error("This should not happen, please report a bug.")},schema:e,sourceObjects:new Map})}Pt.BLOCK_FOLDED="BLOCK_FOLDED",Pt.BLOCK_LITERAL="BLOCK_LITERAL",Pt.PLAIN="PLAIN",Pt.QUOTE_DOUBLE="QUOTE_DOUBLE",Pt.QUOTE_SINGLE="QUOTE_SINGLE";let Kn=e=>null==e||"object"==typeof e&&!!e[Symbol.iterator]().next().done;let vr=class vr extends rs{constructor(e,n){super(e),Object.defineProperty(this,"schema",{value:n,configurable:!0,enumerable:!1,writable:!0})}clone(e){let n=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(n.schema=e),n.items=n.items.map(n=>Kt(n)||Gt(n)?n.clone(e):n),this.range&&(n.range=this.range.slice()),n}addIn(e,n){if(Kn(e))this.add(n);else{let[R,...C]=e,et=this.get(R,!0);if(Ht(et))et.addIn(C,n);else if(void 0===et&&this.schema)this.set(R,hr(this.schema,C,n));else throw Error(`Expected YAML collection at ${R}. Remaining path: ${C}`)}}deleteIn(e){let[n,...R]=e;if(0===R.length)return this.delete(n);let C=this.get(n,!0);if(Ht(C))return C.deleteIn(R);throw Error(`Expected YAML collection at ${n}. Remaining path: ${R}`)}getIn(e,n){let[R,...C]=e,et=this.get(R,!0);return 0===C.length?!n&&Vt(et)?et.value:et:Ht(et)?et.getIn(C,n):void 0}hasAllNullValues(e){return this.items.every(n=>{if(!Gt(n))return!1;let R=n.value;return null==R||e&&Vt(R)&&null==R.value&&!R.commentBefore&&!R.comment&&!R.tag})}hasIn(e){let[n,...R]=e;if(0===R.length)return this.has(n);let C=this.get(n,!0);return!!Ht(C)&&C.hasIn(R)}setIn(e,n){let[R,...C]=e;if(0===C.length)this.set(R,n);else{let e=this.get(R,!0);if(Ht(e))e.setIn(C,n);else if(void 0===e&&this.schema)this.set(R,hr(this.schema,C,n));else throw Error(`Expected YAML collection at ${R}. Remaining path: ${C}`)}}};vr.maxFlowStringSingleLineLength=60;let Ni=e=>e.replace(/^(?!$)(?: $)?/gm,"#");function fn(e,n){return/^\n+$/.test(e)?e.substring(1):n?e.replace(/^(?! *$)/gm,n):e}let dn=(e,n,R)=>e.endsWith(`
`)?fn(R,n):R.includes(`
`)?`
`+fn(R,n):(e.endsWith(" ")?"":" ")+R,eN="flow",eI="block",eU="quoted";function yr(e,n,R="flow",{indentAtStart:C,lineWidth:et=80,minContentWidth:ei=20,onFold:eo,onOverflow:el}={}){if(!et||et<0)return e;let eu=Math.max(1+ei,1+et-n.length);if(e.length<=eu)return e;let ec=[],ef={},eh=et-n.length;"number"==typeof C&&(C>et-Math.max(2,ei)?ec.push(0):eh=et-C);let ep,ed,e_=!1,eg=-1,em=-1,eb=-1;R===eI&&-1!==(eg=Ps(e,eg))&&(eh=eg+eu);for(let n;n=e[eg+=1];){if(R===eU&&"\\"===n){switch(em=eg,e[eg+1]){case"x":eg+=3;break;case"u":eg+=5;break;case"U":eg+=9;break;default:eg+=1}eb=eg}if(n===`
`)R===eI&&(eg=Ps(e,eg)),eh=eg+eu,ep=void 0;else{if(" "===n&&ed&&" "!==ed&&ed!==`
`&&"	"!==ed){let n=e[eg+1];n&&" "!==n&&n!==`
`&&"	"!==n&&(ep=eg)}if(eg>=eh){if(ep)ec.push(ep),eh=ep+eu,ep=void 0;else if(R===eU){for(;" "===ed||"	"===ed;)ed=n,n=e[eg+=1],e_=!0;let R=eg>eb+1?eg-2:em-1;if(ef[R])return e;ec.push(R),ef[R]=!0,eh=R+eu,ep=void 0}else e_=!0}}ed=n}if(e_&&el&&el(),0===ec.length)return e;eo&&eo();let ey=e.slice(0,ec[0]);for(let C=0;C<ec.length;++C){let et=ec[C],ei=ec[C+1]||e.length;0===et?ey=`
${n}${e.slice(0,ei)}`:(R===eU&&ef[et]&&(ey+=`${e[et]}\\`),ey+=`
${n}${e.slice(et+1,ei)}`)}return ey}function Ps(e,n){let R=e[n+1];for(;" "===R||"	"===R;){do R=e[n+=1];while(R&&R!==`
`);R=e[n+1]}return n}let kr=(e,n)=>({indentAtStart:n?e.indent.length:e.indentAtStart,lineWidth:e.options.lineWidth,minContentWidth:e.options.minContentWidth}),Lr=e=>/^(%|---|\.\.\.)/m.test(e);function $n(e,n){let R=JSON.stringify(e);if(n.options.doubleQuotedAsJSON)return R;let{implicitKey:C}=n,et=n.options.doubleQuotedMinMultiLineLength,ei=n.indent||(Lr(e)?"  ":""),eo="",el=0;for(let e=0,n=R[e];n;n=R[++e])if(" "===n&&"\\"===R[e+1]&&"n"===R[e+2]&&(eo+=R.slice(el,e)+"\\ ",e+=1,el=e,n="\\"),"\\"===n)switch(R[e+1]){case"u":{eo+=R.slice(el,e);let n=R.substr(e+2,4);switch(n){case"0000":eo+="\\0";break;case"0007":eo+="\\a";break;case"000b":eo+="\\v";break;case"001b":eo+="\\e";break;case"0085":eo+="\\N";break;case"00a0":eo+="\\_";break;case"2028":eo+="\\L";break;case"2029":eo+="\\P";break;default:"00"===n.substr(0,2)?eo+="\\x"+n.substr(2):eo+=R.substr(e,6)}e+=5,el=e+1}break;case"n":if(C||'"'===R[e+2]||R.length<et)e+=1;else{for(eo+=R.slice(el,e)+`

`;"\\"===R[e+2]&&"n"===R[e+3]&&'"'!==R[e+4];)eo+=`
`,e+=2;eo+=ei," "===R[e+2]&&(eo+="\\"),e+=1,el=e+1}break;default:e+=1}return eo=el?eo+R.slice(el):R,C?eo:yr(eo,ei,eU,kr(n,!1))}function Yr(e,n){if(!1===n.options.singleQuote||n.implicitKey&&e.includes(`
`)||/[ \t]\n|\n[ \t]/.test(e))return $n(e,n);let R=n.indent||(Lr(e)?"  ":""),C="'"+e.replace(/'/g,"''").replace(/\n+/g,`$&
${R}`)+"'";return n.implicitKey?C:yr(C,R,eN,kr(n,!1))}function Sn(e,n){let R;let{singleQuote:C}=n.options;if(!1===C)R=$n;else{let n=e.includes('"'),et=e.includes("'");R=n&&!et?Yr:et&&!n?$n:C?Yr:$n}return R(e,n)}try{C=RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{C=/\n+(?!\n|$)/g}function cr({comment:e,type:n,value:R},et,ei,eo){let el,eu;let{blockQuote:ec,commentString:ef,lineWidth:eh}=et.options;if(!ec||/\n[\t ]+$/.test(R)||/^\s*$/.test(R))return Sn(R,et);let ep=et.indent||(et.forceBlockIndent||Lr(R)?"  ":""),ed="literal"===ec||"folded"!==ec&&n!==Pt.BLOCK_FOLDED&&(n===Pt.BLOCK_LITERAL||!function(e,n,R){if(!n||n<0)return!1;let C=n-R,et=e.length;if(et<=C)return!1;for(let n=0,R=0;n<et;++n)if(e[n]===`
`){if(n-R>C)return!0;if(et-(R=n+1)<=C)return!1}return!0}(R,eh,ep.length));if(!R)return ed?`|
`:`>
`;for(eu=R.length;eu>0;--eu){let e=R[eu-1];if(e!==`
`&&"	"!==e&&" "!==e)break}let e_=R.substring(eu),eg=e_.indexOf(`
`);-1===eg?el="-":R===e_||eg!==e_.length-1?(el="+",eo&&eo()):el="",e_&&(R=R.slice(0,-e_.length),e_[e_.length-1]===`
`&&(e_=e_.slice(0,-1)),e_=e_.replace(C,`$&${ep}`));let em=!1,eb,ey=-1;for(eb=0;eb<R.length;++eb){let e=R[eb];if(" "===e)em=!0;else if(e===`
`)ey=eb;else break}let ev=R.substring(0,ey<eb?ey+1:eb);ev&&(R=R.substring(ev.length),ev=ev.replace(/\n+/g,`$&${ep}`));let ek=(ed?"|":">")+(em?ep?"2":"1":"")+el;if(e&&(ek+=" "+ef(e.replace(/ ?[\r\n]+/g," ")),ei&&ei()),ed)return R=R.replace(/\n+/g,`$&${ep}`),`${ek}
${ep}${ev}${R}${e_}`;R=R.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${ep}`);let eA=yr(`${ev}${R}${e_}`,ep,eI,kr(et,!0));return`${ek}
${ep}${eA}`}function Wn(e,n,R,C){let{implicitKey:et,inFlow:ei}=n,eo="string"==typeof e.value?e:Object.assign({},e,{value:String(e.value)}),{type:el}=e;el!==Pt.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(eo.value)&&(el=Pt.QUOTE_DOUBLE);let u=e=>{switch(e){case Pt.BLOCK_FOLDED:case Pt.BLOCK_LITERAL:return et||ei?Sn(eo.value,n):cr(eo,n,R,C);case Pt.QUOTE_DOUBLE:return $n(eo.value,n);case Pt.QUOTE_SINGLE:return Yr(eo.value,n);case Pt.PLAIN:return function(e,n,R,C){let{type:et,value:ei}=e,{actualString:eo,implicitKey:el,indent:eu,indentStep:ec,inFlow:ef}=n;if(el&&ei.includes(`
`)||ef&&/[[\]{},]/.test(ei))return Sn(ei,n);if(!ei||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(ei))return el||ef||!ei.includes(`
`)?Sn(ei,n):cr(e,n,R,C);if(!el&&!ef&&et!==Pt.PLAIN&&ei.includes(`
`))return cr(e,n,R,C);if(Lr(ei)){if(""===eu)return n.forceBlockIndent=!0,cr(e,n,R,C);if(el&&eu===ec)return Sn(ei,n)}let eh=ei.replace(/\n+/g,`$&
${eu}`);if(eo){let L=e=>{var n;return e.default&&"tag:yaml.org,2002:str"!==e.tag&&(null==(n=e.test)?void 0:n.test(eh))},{compat:e,tags:R}=n.doc.schema;if(R.some(L)||null!=e&&e.some(L))return Sn(ei,n)}return el?eh:yr(eh,eu,eN,kr(n,!1))}(eo,n,R,C);default:return null}},eu=u(el);if(null===eu){let{defaultKeyType:e,defaultStringType:R}=n.options,C=et&&e||R;if(null===(eu=u(C)))throw Error(`Unsupported default string type ${C}`)}return eu}function oa(e,n){let R;let C=Object.assign({blockQuote:!0,commentString:Ni,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},e.schema.toStringOptions,n);switch(C.collectionStyle){case"block":R=!1;break;case"flow":R=!0;break;default:R=null}return{anchors:new Set,doc:e,flowCollectionPadding:C.flowCollectionPadding?" ":"",indent:"",indentStep:"number"==typeof C.indent?" ".repeat(C.indent):"  ",inFlow:R,options:C}}function Un(e,n,R,C){var et;let ei;if(Gt(e))return e.toString(n,R,C);if(wn(e)){if(n.doc.directives)return e.toString(n);if(null!=(et=n.resolvedAliases)&&et.has(e))throw TypeError("Cannot stringify circular structure without alias nodes");n.resolvedAliases?n.resolvedAliases.add(e):n.resolvedAliases=new Set([e]),e=e.resolve(n.doc)}let eo=Kt(e)?e:n.doc.createNode(e,{onTagObj:e=>ei=e});ei||(ei=function(e,n){var R;let C,et;if(n.tag){let R=e.filter(e=>e.tag===n.tag);if(R.length>0)return R.find(e=>e.format===n.format)??R[0]}if(Vt(n)){et=n.value;let R=e.filter(e=>{var n;return null==(n=e.identify)?void 0:n.call(e,et)});C=R.find(e=>e.format===n.format)??R.find(e=>!e.format)}else et=n,C=e.find(e=>e.nodeClass&&et instanceof e.nodeClass);if(!C){let e=(null==(R=null==et?void 0:et.constructor)?void 0:R.name)??typeof et;throw Error(`Tag not resolved for ${e} value`)}return C}(n.doc.schema.tags,eo));let el=function(e,n,{anchors:R,doc:C}){if(!C.directives)return"";let et=[],ei=(Vt(e)||Ht(e))&&e.anchor;ei&&na(ei)&&(R.add(ei),et.push(`&${ei}`));let eo=e.tag?e.tag:n.default?null:n.tag;return eo&&et.push(C.directives.tagString(eo)),et.join(" ")}(eo,ei,n);el.length>0&&(n.indentAtStart=(n.indentAtStart??0)+el.length+1);let eu="function"==typeof ei.stringify?ei.stringify(eo,n,R,C):Vt(eo)?Wn(eo,n,R,C):eo.toString(n,R,C);return el?Vt(eo)||"{"===eu[0]||"["===eu[0]?`${el} ${eu}`:`${el}
${n.indent}${eu}`:eu}function la(e,n){("debug"===e||"warn"===e)&&("u">typeof eu&&eu.emitWarning?eu.emitWarning(n):console.warn(n))}function ua(e,n,{key:R,value:C}){if(null!=e&&e.doc.schema.merge&&Ci(R)){if(Mn(C=wn(C)?C.resolve(e.doc):C))for(let R of C.items)Mr(e,n,R);else if(Array.isArray(C))for(let R of C)Mr(e,n,R);else Mr(e,n,C)}else{let et=nn(R,"",e);if(n instanceof Map)n.set(et,nn(C,et,e));else if(n instanceof Set)n.add(et);else{let ei=function(e,n,R){if(null===n)return"";if("object"!=typeof n)return String(n);if(Kt(e)&&null!=R&&R.doc){let n=oa(R.doc,{});for(let e of(n.anchors=new Set,R.anchors.keys()))n.anchors.add(e.anchor);n.inFlow=!0,n.inStringifyKey=!0;let C=e.toString(n);if(!R.mapKeyWarned){let e=JSON.stringify(C);e.length>40&&(e=e.substring(0,36)+'..."'),la(R.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${e}. Set mapAsMap: true to use object keys.`),R.mapKeyWarned=!0}return C}return JSON.stringify(n)}(R,et,e),eo=nn(C,ei,e);ei in n?Object.defineProperty(n,ei,{value:eo,writable:!0,enumerable:!0,configurable:!0}):n[ei]=eo}}return n}let Ci=e=>"<<"===e||Vt(e)&&"<<"===e.value&&(!e.type||e.type===Pt.PLAIN);function Mr(e,n,R){let C=e&&wn(R)?R.resolve(e.doc):R;if(!Cn(C))throw Error("Merge sources must be maps or map aliases");let et=C.toJSON(null,e,Map);for(let[e,R]of et)n instanceof Map?n.has(e)||n.set(e,R):n instanceof Set?n.add(e):Object.prototype.hasOwnProperty.call(n,e)||Object.defineProperty(n,e,{value:R,writable:!0,enumerable:!0,configurable:!0});return n}function ss(e,n,R){let C=Yn(e,void 0,R),et=Yn(n,void 0,R);return new Yt(C,et)}let Yt=class Yt{constructor(e,n=null){Object.defineProperty(this,ew,{value:eA}),this.key=e,this.value=n}clone(e){let{key:n,value:R}=this;return Kt(n)&&(n=n.clone(e)),Kt(R)&&(R=R.clone(e)),new Yt(n,R)}toJSON(e,n){let R=null!=n&&n.mapAsMap?new Map:{};return ua(n,R,this)}toString(e,n,R){return null!=e&&e.doc?function({key:e,value:n},R,C,et){let ei,eo,el;let{allNullValues:eu,doc:ec,indent:ef,indentStep:eh,options:{commentString:ep,indentSeq:ed,simpleKeys:e_}}=R,eg=Kt(e)&&e.comment||null;if(e_){if(eg)throw Error("With simple keys, key nodes cannot have comments");if(Ht(e))throw Error("With simple keys, collection cannot be used as a key value")}let em=!e_&&(!e||eg&&null==n&&!R.inFlow||Ht(e)||(Vt(e)?e.type===Pt.BLOCK_FOLDED||e.type===Pt.BLOCK_LITERAL:"object"==typeof e));R=Object.assign({},R,{allNullValues:!1,implicitKey:!em&&(e_||!eu),indent:ef+eh});let eb=!1,ey=!1,ev=Un(e,R,()=>eb=!0,()=>ey=!0);if(!em&&!R.inFlow&&ev.length>1024){if(e_)throw Error("With simple keys, single line scalar must not span more than 1024 characters");em=!0}if(R.inFlow){if(eu||null==n)return eb&&C&&C(),""===ev?"?":em?`? ${ev}`:ev}else if(eu&&!e_||null==n&&em)return ev=`? ${ev}`,eg&&!eb?ev+=dn(ev,R.indent,ep(eg)):ey&&et&&et(),ev;eb&&(eg=null),em?(eg&&(ev+=dn(ev,R.indent,ep(eg))),ev=`? ${ev}
${ef}:`):(ev=`${ev}:`,eg&&(ev+=dn(ev,R.indent,ep(eg)))),Kt(n)?(ei=!!n.spaceBefore,eo=n.commentBefore,el=n.comment):(ei=!1,eo=null,el=null,n&&"object"==typeof n&&(n=ec.createNode(n))),R.implicitKey=!1,!em&&!eg&&Vt(n)&&(R.indentAtStart=ev.length+1),ey=!1,!(!ed&&eh.length>=2&&!R.inFlow&&!em&&Mn(n))||n.flow||n.tag||n.anchor||(R.indent=R.indent.substring(2));let ek=!1,eA=Un(n,R,()=>ek=!0,()=>ey=!0),eL=" ";if(eg||ei||eo){if(eL=ei?`
`:"",eo){let e=ep(eo);eL+=`
${fn(e,R.indent)}`}""!==eA||R.inFlow?eL+=`
${R.indent}`:eL===`
`&&(eL=`

`)}else if(!em&&Ht(n)){let e=eA[0],C=eA.indexOf(`
`),et=-1!==C,ei=R.inFlow??n.flow??0===n.items.length;if(et||!ei){let n=!1;if(et&&("&"===e||"!"===e)){let R=eA.indexOf(" ");"&"===e&&-1!==R&&R<C&&"!"===eA[R+1]&&(R=eA.indexOf(" ",R+1)),(-1===R||C<R)&&(n=!0)}n||(eL=`
${R.indent}`)}}else(""===eA||eA[0]===`
`)&&(eL="");return ev+=eL+eA,R.inFlow?ek&&C&&C():el&&!ek?ev+=dn(ev,R.indent,ep(el)):ey&&et&&et(),ev}(this,e,n,R):JSON.stringify(this)}};function ca(e,n,R){return(n.inFlow??e.flow?function({comment:e,items:n},R,{flowChars:C,itemIndent:et,onComment:ei}){let eo;let{indent:el,indentStep:eu,flowCollectionPadding:ec,options:{commentString:ef}}=R;et+=eu;let eh=Object.assign({},R,{indent:et,inFlow:!0,type:null}),ep=!1,ed=0,e_=[];for(let e=0;e<n.length;++e){let C=n[e],ei=null;if(Kt(C))C.spaceBefore&&e_.push(""),pr(R,e_,C.commentBefore,!1),C.comment&&(ei=C.comment);else if(Gt(C)){let e=Kt(C.key)?C.key:null;e&&(e.spaceBefore&&e_.push(""),pr(R,e_,e.commentBefore,!1),e.comment&&(ep=!0));let n=Kt(C.value)?C.value:null;n?(n.comment&&(ei=n.comment),n.commentBefore&&(ep=!0)):null==C.value&&null!=e&&e.comment&&(ei=e.comment)}ei&&(ep=!0);let eo=Un(C,eh,()=>ei=null);e<n.length-1&&(eo+=","),ei&&(eo+=dn(eo,et,ef(ei))),!ep&&(e_.length>ed||eo.includes(`
`))&&(ep=!0),e_.push(eo),ed=e_.length}let{start:eg,end:em}=C;if(0===e_.length)eo=eg+em;else if(ep||(ep=e_.reduce((e,n)=>e+n.length+2,2)>vr.maxFlowStringSingleLineLength),ep){for(let e of(eo=eg,e_))eo+=e?`
${eu}${el}${e}`:`
`;eo+=`
${el}${em}`}else eo=`${eg}${ec}${e_.join(" ")}${ec}${em}`;return e&&(eo+=dn(eo,el,ef(e)),ei&&ei()),eo}:function({comment:e,items:n},R,{blockItemPrefix:C,flowChars:et,itemIndent:ei,onChompKeep:eo,onComment:el}){let eu;let{indent:ec,options:{commentString:ef}}=R,eh=Object.assign({},R,{indent:ei,type:null}),ep=!1,ed=[];for(let e=0;e<n.length;++e){let et=n[e],eo=null;if(Kt(et))!ep&&et.spaceBefore&&ed.push(""),pr(R,ed,et.commentBefore,ep),et.comment&&(eo=et.comment);else if(Gt(et)){let e=Kt(et.key)?et.key:null;e&&(!ep&&e.spaceBefore&&ed.push(""),pr(R,ed,e.commentBefore,ep))}ep=!1;let el=Un(et,eh,()=>eo=null,()=>ep=!0);eo&&(el+=dn(el,ei,ef(eo))),ep&&eo&&(ep=!1),ed.push(C+el)}if(0===ed.length)eu=et.start+et.end;else{eu=ed[0];for(let e=1;e<ed.length;++e){let n=ed[e];eu+=n?`
${ec}${n}`:`
`}}return e?(eu+=`
`+fn(ef(e),ec),el&&el()):ep&&eo&&eo(),eu})(e,n,R)}function pr({indent:e,options:{commentString:n}},R,C,et){if(C&&et&&(C=C.replace(/^\n+/,"")),C){let et=fn(n(C),e);R.push(et.trimStart())}}function yn(e,n){let R=Vt(n)?n.value:n;for(let C of e)if(Gt(C)&&(C.key===n||C.key===R||Vt(C.key)&&C.key.value===R))return C}let en=class en extends vr{static get tagName(){return"tag:yaml.org,2002:map"}constructor(e){super(ek,e),this.items=[]}static from(e,n,R){let{keepUndefined:C,replacer:et}=R,ei=new this(e),l=(e,eo)=>{if("function"==typeof et)eo=et.call(n,e,eo);else if(Array.isArray(et)&&!et.includes(e))return;(void 0!==eo||C)&&ei.items.push(ss(e,eo,R))};if(n instanceof Map)for(let[e,R]of n)l(e,R);else if(n&&"object"==typeof n)for(let e of Object.keys(n))l(e,n[e]);return"function"==typeof e.sortMapEntries&&ei.items.sort(e.sortMapEntries),ei}add(e,n){var R;let C;C=Gt(e)?e:e&&"object"==typeof e&&"key"in e?new Yt(e.key,e.value):new Yt(e,null==e?void 0:e.value);let et=yn(this.items,C.key),ei=null==(R=this.schema)?void 0:R.sortMapEntries;if(et){if(!n)throw Error(`Key ${C.key} already set`);Vt(et.value)&&aa(C.value)?et.value.value=C.value:et.value=C.value}else if(ei){let e=this.items.findIndex(e=>0>ei(C,e));-1===e?this.items.push(C):this.items.splice(e,0,C)}else this.items.push(C)}delete(e){let n=yn(this.items,e);return!!n&&this.items.splice(this.items.indexOf(n),1).length>0}get(e,n){let R=yn(this.items,e),C=null==R?void 0:R.value;return(!n&&Vt(C)?C.value:C)??void 0}has(e){return!!yn(this.items,e)}set(e,n){this.add(new Yt(e,n),!0)}toJSON(e,n,R){let C=R?new R:null!=n&&n.mapAsMap?new Map:{};for(let e of(null!=n&&n.onCreate&&n.onCreate(C),this.items))ua(n,C,e);return C}toString(e,n,R){if(!e)return JSON.stringify(this);for(let e of this.items)if(!Gt(e))throw Error(`Map items must all be pairs; found ${JSON.stringify(e)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),ca(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:R,onComment:n})}};let eR={collection:"map",default:!0,nodeClass:en,tag:"tag:yaml.org,2002:map",resolve:(e,n)=>(Cn(e)||n("Expected a mapping for this tag"),e),createNode:(e,n,R)=>en.from(e,n,R)};let mn=class mn extends vr{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(e){super(ex,e),this.items=[]}add(e){this.items.push(e)}delete(e){let n=tr(e);return"number"==typeof n&&this.items.splice(n,1).length>0}get(e,n){let R=tr(e);if("number"!=typeof R)return;let C=this.items[R];return!n&&Vt(C)?C.value:C}has(e){let n=tr(e);return"number"==typeof n&&n<this.items.length}set(e,n){let R=tr(e);if("number"!=typeof R)throw Error(`Expected a valid index, not ${e}.`);let C=this.items[R];Vt(C)&&aa(n)?C.value=n:this.items[R]=n}toJSON(e,n){let R=[];null!=n&&n.onCreate&&n.onCreate(R);let C=0;for(let e of this.items)R.push(nn(e,String(C++),n));return R}toString(e,n,R){return e?ca(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:R,onComment:n}):JSON.stringify(this)}static from(e,n,R){let{replacer:C}=R,et=new this(e);if(n&&Symbol.iterator in Object(n)){let e=0;for(let ei of n){if("function"==typeof C){let R=n instanceof Set?ei:String(e++);ei=C.call(n,R,ei)}et.items.push(Yn(ei,void 0,R))}}return et}};function tr(e){let n=Vt(e)?e.value:e;return n&&"string"==typeof n&&(n=Number(n)),"number"==typeof n&&Number.isInteger(n)&&n>=0?n:null}let eC={collection:"seq",default:!0,nodeClass:mn,tag:"tag:yaml.org,2002:seq",resolve:(e,n)=>(Mn(e)||n("Expected a sequence for this tag"),e),createNode:(e,n,R)=>mn.from(e,n,R)},eM={identify:e=>"string"==typeof e,default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify:(e,n,R,C)=>Wn(e,n=Object.assign({actualString:!0},n),R,C)},eP={identify:e=>null==e,createNode:()=>new Pt(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new Pt(null),stringify:({source:e},n)=>"string"==typeof e&&eP.test.test(e)?e:n.options.nullStr},eD={identify:e=>"boolean"==typeof e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:e=>new Pt("t"===e[0]||"T"===e[0]),stringify({source:e,value:n},R){if(e&&eD.test.test(e)){let R="t"===e[0]||"T"===e[0];if(n===R)return e}return n?R.options.trueStr:R.options.falseStr}};function an({format:e,minFractionDigits:n,tag:R,value:C}){if("bigint"==typeof C)return String(C);let et="number"==typeof C?C:Number(C);if(!isFinite(et))return isNaN(et)?".nan":et<0?"-.inf":".inf";let ei=JSON.stringify(C);if(!e&&n&&(!R||"tag:yaml.org,2002:float"===R)&&/^\d/.test(ei)){let e=ei.indexOf(".");e<0&&(e=ei.length,ei+=".");let R=n-(ei.length-e-1);for(;R-- >0;)ei+="0"}return ei}let eB={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN))$/,resolve:e=>"nan"===e.slice(-3).toLowerCase()?NaN:"-"===e[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:an},eK={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e),stringify(e){let n=Number(e.value);return isFinite(n)?n.toExponential():an(e)}},eG={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(e){let n=new Pt(parseFloat(e)),R=e.indexOf(".");return -1!==R&&"0"===e[e.length-1]&&(n.minFractionDigits=e.length-R-1),n},stringify:an},xr=e=>"bigint"==typeof e||Number.isInteger(e),is=(e,n,R,{intAsBigInt:C})=>C?BigInt(e):parseInt(e.substring(n),R);function da(e,n,R){let{value:C}=e;return xr(C)&&C>=0?R+C.toString(n):an(e)}let eV={identify:e=>xr(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(e,n,R)=>is(e,2,8,R),stringify:e=>da(e,8,"0o")},eF={identify:xr,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(e,n,R)=>is(e,0,10,R),stringify:an},ej={identify:e=>xr(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(e,n,R)=>is(e,2,16,R),stringify:e=>da(e,16,"0x")},ez=[eR,eC,eM,eP,eD,eV,eF,ej,eB,eK,eG];function Cs(e){return"bigint"==typeof e||Number.isInteger(e)}let nr=({value:e})=>JSON.stringify(e),eH=[{identify:e=>"string"==typeof e,default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify:nr},{identify:e=>null==e,createNode:()=>new Pt(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:nr},{identify:e=>"boolean"==typeof e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:e=>"true"===e,stringify:nr},{identify:Cs,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(e,n,{intAsBigInt:R})=>R?BigInt(e):parseInt(e,10),stringify:({value:e})=>Cs(e)?e.toString():JSON.stringify(e)},{identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:e=>parseFloat(e),stringify:nr}],e$=[eR,eC].concat(eH,{default:!0,tag:"",test:/^/,resolve:(e,n)=>(n(`Unresolved plain scalar ${JSON.stringify(e)}`),e)}),eX={identify:e=>e instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(e,n){if("function"==typeof ec)return ec.from(e,"base64");if("function"!=typeof atob)return n("This environment does not support reading binary tags; either Buffer or atob is required"),e;{let n=atob(e.replace(/[\n\r]/g,"")),R=new Uint8Array(n.length);for(let e=0;e<n.length;++e)R[e]=n.charCodeAt(e);return R}},stringify({comment:e,type:n,value:R},C,et,ei){let eo;if("function"==typeof ec)eo=R instanceof ec?R.toString("base64"):ec.from(R.buffer).toString("base64");else if("function"==typeof btoa){let e="";for(let n=0;n<R.length;++n)e+=String.fromCharCode(R[n]);eo=btoa(e)}else throw Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(n||(n=Pt.BLOCK_LITERAL),n!==Pt.QUOTE_DOUBLE){let e=Math.max(C.options.lineWidth-C.indent.length,C.options.minContentWidth),R=Math.ceil(eo.length/e),et=Array(R);for(let n=0,C=0;n<R;++n,C+=e)et[n]=eo.substr(C,e);eo=et.join(n===Pt.BLOCK_LITERAL?`
`:" ")}return Wn({comment:e,type:n,value:eo},C,et,ei)}};function ba(e,n){if(Mn(e))for(let R=0;R<e.items.length;++R){let C=e.items[R];if(!Gt(C)){if(Cn(C)){C.items.length>1&&n("Each pair must have its own sequence indicator");let e=C.items[0]||new Yt(new Pt(null));if(C.commentBefore&&(e.key.commentBefore=e.key.commentBefore?`${C.commentBefore}
${e.key.commentBefore}`:C.commentBefore),C.comment){let n=e.value??e.key;n.comment=n.comment?`${C.comment}
${n.comment}`:C.comment}C=e}e.items[R]=Gt(C)?C:new Yt(C)}}else n("Expected a sequence for this tag");return e}function va(e,n,R){let{replacer:C}=R,et=new mn(e);et.tag="tag:yaml.org,2002:pairs";let ei=0;if(n&&Symbol.iterator in Object(n))for(let e of n){let eo,el;if("function"==typeof C&&(e=C.call(n,String(ei++),e)),Array.isArray(e)){if(2===e.length)eo=e[0],el=e[1];else throw TypeError(`Expected [key, value] tuple: ${e}`)}else if(e&&e instanceof Object){let n=Object.keys(e);if(1===n.length)el=e[eo=n[0]];else throw TypeError(`Expected tuple with one key, not ${n.length} keys`)}else eo=e;et.items.push(ss(eo,el,R))}return et}let eq={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:ba,createNode:va};let Nn=class Nn extends mn{constructor(){super(),this.add=en.prototype.add.bind(this),this.delete=en.prototype.delete.bind(this),this.get=en.prototype.get.bind(this),this.has=en.prototype.has.bind(this),this.set=en.prototype.set.bind(this),this.tag=Nn.tag}toJSON(e,n){if(!n)return super.toJSON(e);let R=new Map;for(let e of(null!=n&&n.onCreate&&n.onCreate(R),this.items)){let C,et;if(Gt(e)?(C=nn(e.key,"",n),et=nn(e.value,C,n)):C=nn(e,"",n),R.has(C))throw Error("Ordered maps must not include duplicate keys");R.set(C,et)}return R}static from(e,n,R){let C=va(e,n,R),et=new this;return et.items=C.items,et}};Nn.tag="tag:yaml.org,2002:omap";let eW={collection:"seq",identify:e=>e instanceof Map,nodeClass:Nn,default:!1,tag:"tag:yaml.org,2002:omap",resolve(e,n){let R=ba(e,n),C=[];for(let{key:e}of R.items)Vt(e)&&(C.includes(e.value)?n(`Ordered maps must not include duplicate keys: ${e.value}`):C.push(e.value));return Object.assign(new Nn,R)},createNode:(e,n,R)=>Nn.from(e,n,R)};function ya({value:e,source:n},R){return n&&(e?eZ:eY).test.test(n)?n:e?R.options.trueStr:R.options.falseStr}let eZ={identify:e=>!0===e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new Pt(!0),stringify:ya},eY={identify:e=>!1===e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/i,resolve:()=>new Pt(!1),stringify:ya},Jn=e=>"bigint"==typeof e||Number.isInteger(e);function Tr(e,n,R,{intAsBigInt:C}){let et=e[0];if(("-"===et||"+"===et)&&(n+=1),e=e.substring(n).replace(/_/g,""),C){switch(R){case 2:e=`0b${e}`;break;case 8:e=`0o${e}`;break;case 16:e=`0x${e}`}let n=BigInt(e);return"-"===et?BigInt(-1)*n:n}let ei=parseInt(e,R);return"-"===et?-1*ei:ei}function cs(e,n,R){let{value:C}=e;if(Jn(C)){let e=C.toString(n);return C<0?"-"+R+e.substr(1):R+e}return an(e)}let Rn=class Rn extends en{constructor(e){super(e),this.tag=Rn.tag}add(e){let n;n=Gt(e)?e:e&&"object"==typeof e&&"key"in e&&"value"in e&&null===e.value?new Yt(e.key,null):new Yt(e,null),yn(this.items,n.key)||this.items.push(n)}get(e,n){let R=yn(this.items,e);return!n&&Gt(R)?Vt(R.key)?R.key.value:R.key:R}set(e,n){if("boolean"!=typeof n)throw Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof n}`);let R=yn(this.items,e);R&&!n?this.items.splice(this.items.indexOf(R),1):!R&&n&&this.items.push(new Yt(e))}toJSON(e,n){return super.toJSON(e,n,Set)}toString(e,n,R){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),n,R);throw Error("Set items must all have null values")}static from(e,n,R){let{replacer:C}=R,et=new this(e);if(n&&Symbol.iterator in Object(n))for(let e of n)"function"==typeof C&&(e=C.call(n,e,e)),et.items.push(ss(e,null,R));return et}};Rn.tag="tag:yaml.org,2002:set";let eJ={collection:"map",identify:e=>e instanceof Set,nodeClass:Rn,default:!1,tag:"tag:yaml.org,2002:set",createNode:(e,n,R)=>Rn.from(e,n,R),resolve(e,n){if(Cn(e)){if(e.hasAllNullValues(!0))return Object.assign(new Rn,e);n("Set items must all have null values")}else n("Expected a mapping for this tag");return e}};function hs(e,n){let R=e[0],C="-"===R||"+"===R?e.substring(1):e,s=e=>n?BigInt(e):Number(e),et=C.replace(/_/g,"").split(":").reduce((e,n)=>e*s(60)+s(n),s(0));return"-"===R?s(-1)*et:et}function wa(e){let{value:n}=e,t=e=>e;if("bigint"==typeof n)t=e=>BigInt(e);else if(isNaN(n)||!isFinite(n))return an(e);let R="";n<0&&(R="-",n*=t(-1));let C=t(60),et=[n%C];return n<60?et.unshift(0):(n=(n-et[0])/C,et.unshift(n%C),n>=60&&(n=(n-et[0])/C,et.unshift(n))),R+et.map(e=>String(e).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}let eQ={identify:e=>"bigint"==typeof e||Number.isInteger(e),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(e,n,{intAsBigInt:R})=>hs(e,R),stringify:wa},e0={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:e=>hs(e,!1),stringify:wa},e1={identify:e=>e instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(e){let n=e.match(e1.test);if(!n)throw Error("!!timestamp expects a date, starting with yyyy-mm-dd");let[,R,C,et,ei,eo,el]=n.map(Number),eu=n[7]?Number((n[7]+"00").substr(1,3)):0,ec=Date.UTC(R,C-1,et,ei||0,eo||0,el||0,eu),ef=n[8];if(ef&&"Z"!==ef){let e=hs(ef,!1);30>Math.abs(e)&&(e*=60),ec-=6e4*e}return new Date(ec)},stringify:({value:e})=>e.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")},e2=[eR,eC,eM,eP,eZ,eY,{identify:Jn,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(e,n,R)=>Tr(e,2,2,R),stringify:e=>cs(e,2,"0b")},{identify:Jn,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(e,n,R)=>Tr(e,1,8,R),stringify:e=>cs(e,8,"0")},{identify:Jn,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(e,n,R)=>Tr(e,0,10,R),stringify:an},{identify:Jn,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(e,n,R)=>Tr(e,2,16,R),stringify:e=>cs(e,16,"0x")},{identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN)$/,resolve:e=>"nan"===e.slice(-3).toLowerCase()?NaN:"-"===e[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:an},{identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e.replace(/_/g,"")),stringify(e){let n=Number(e.value);return isFinite(n)?n.toExponential():an(e)}},{identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(e){let n=new Pt(parseFloat(e.replace(/_/g,""))),R=e.indexOf(".");if(-1!==R){let C=e.substring(R+1).replace(/_/g,"");"0"===C[C.length-1]&&(n.minFractionDigits=C.length)}return n},stringify:an},eX,eW,eq,eJ,eQ,e0,e1],e3=new Map([["core",ez],["failsafe",[eR,eC,eM]],["json",e$],["yaml11",e2],["yaml-1.1",e2]]),e5={binary:eX,bool:eD,float:eG,floatExp:eK,floatNaN:eB,floatTime:e0,int:eF,intHex:ej,intOct:eV,intTime:eQ,map:eR,null:eP,omap:eW,pairs:eq,seq:eC,set:eJ,timestamp:e1},e4={"tag:yaml.org,2002:binary":eX,"tag:yaml.org,2002:omap":eW,"tag:yaml.org,2002:pairs":eq,"tag:yaml.org,2002:set":eJ,"tag:yaml.org,2002:timestamp":e1};function jr(e,n){let R=e3.get(n);if(!R){if(Array.isArray(e))R=[];else{let e=Array.from(e3.keys()).filter(e=>"yaml11"!==e).map(e=>JSON.stringify(e)).join(", ");throw Error(`Unknown schema "${n}"; use one of ${e} or define customTags array`)}}if(Array.isArray(e))for(let n of e)R=R.concat(n);else"function"==typeof e&&(R=e(R.slice()));return R.map(e=>{if("string"!=typeof e)return e;let n=e5[e];if(n)return n;let R=Object.keys(e5).map(e=>JSON.stringify(e)).join(", ");throw Error(`Unknown custom tag "${e}"; use one of ${R}`)})}let Ji=(e,n)=>e.key<n.key?-1:e.key>n.key?1:0;let Or=class Or{constructor({compat:e,customTags:n,merge:R,resolveKnownTags:C,schema:et,sortMapEntries:ei,toStringDefaults:eo}){this.compat=Array.isArray(e)?jr(e,"compat"):e?jr(null,e):null,this.merge=!!R,this.name="string"==typeof et&&et||"core",this.knownTags=C?e4:{},this.tags=jr(n,this.name),this.toStringOptions=eo??null,Object.defineProperty(this,ek,{value:eR}),Object.defineProperty(this,eL,{value:eM}),Object.defineProperty(this,ex,{value:eC}),this.sortMapEntries="function"==typeof ei?ei:!0===ei?Ji:null}clone(){let e=Object.create(Or.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}};let Dn=class Dn{constructor(e,n,R){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,ew,{value:ev});let C=null;"function"==typeof n||Array.isArray(n)?C=n:void 0===R&&n&&(R=n,n=void 0);let et=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,uniqueKeys:!0,version:"1.2"},R);this.options=et;let{version:ei}=et;null!=R&&R._directives?(this.directives=R._directives.atDocument(),this.directives.yaml.explicit&&(ei=this.directives.yaml.version)):this.directives=new Wt({version:ei}),this.setSchema(ei,R),this.contents=void 0===e?null:this.createNode(e,C,R)}clone(){let e=Object.create(Dn.prototype,{[ew]:{value:ev}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),this.directives&&(e.directives=this.directives.clone()),e.schema=this.schema.clone(),e.contents=Kt(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){An(this.contents)&&this.contents.add(e)}addIn(e,n){An(this.contents)&&this.contents.addIn(e,n)}createAlias(e,n){if(!e.anchor){let R=ra(this);e.anchor=!n||R.has(n)?sa(n||"a",R):n}return new br(e.anchor)}createNode(e,n,R){let C;if("function"==typeof n)e=n.call({"":e},"",e),C=n;else if(Array.isArray(n)){let e=n.filter(e=>"number"==typeof e||e instanceof String||e instanceof Number).map(String);e.length>0&&(n=n.concat(e)),C=n}else void 0===R&&n&&(R=n,n=void 0);let{aliasDuplicateObjects:et,anchorPrefix:ei,flow:eo,keepUndefined:el,onTagObj:eu,tag:ec}=R??{},{onAnchor:ef,setAnchors:eh,sourceObjects:ep}=function(e,n){let R=[],C=new Map,et=null;return{onAnchor:C=>{R.push(C),et||(et=ra(e));let ei=sa(n,et);return et.add(ei),ei},setAnchors:()=>{for(let e of R){let n=C.get(e);if("object"==typeof n&&n.anchor&&(Vt(n.node)||Ht(n.node)))n.node.anchor=n.anchor;else{let n=Error("Failed to resolve repeated object (this should not happen)");throw n.source=e,n}}},sourceObjects:C}}(this,ei||"a"),ed={aliasDuplicateObjects:et??!0,keepUndefined:el??!1,onAnchor:ef,onTagObj:eu,replacer:C,schema:this.schema,sourceObjects:ep},e_=Yn(e,ec,ed);return eo&&Ht(e_)&&(e_.flow=!0),eh(),e_}createPair(e,n,R={}){let C=this.createNode(e,null,R),et=this.createNode(n,null,R);return new Yt(C,et)}delete(e){return!!An(this.contents)&&this.contents.delete(e)}deleteIn(e){return Kn(e)?null!=this.contents&&(this.contents=null,!0):!!An(this.contents)&&this.contents.deleteIn(e)}get(e,n){return Ht(this.contents)?this.contents.get(e,n):void 0}getIn(e,n){return Kn(e)?!n&&Vt(this.contents)?this.contents.value:this.contents:Ht(this.contents)?this.contents.getIn(e,n):void 0}has(e){return!!Ht(this.contents)&&this.contents.has(e)}hasIn(e){return Kn(e)?void 0!==this.contents:!!Ht(this.contents)&&this.contents.hasIn(e)}set(e,n){null==this.contents?this.contents=hr(this.schema,[e],n):An(this.contents)&&this.contents.set(e,n)}setIn(e,n){Kn(e)?this.contents=n:null==this.contents?this.contents=hr(this.schema,Array.from(e),n):An(this.contents)&&this.contents.setIn(e,n)}setSchema(e,n={}){let R;switch("number"==typeof e&&(e=String(e)),e){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new Wt({version:"1.1"}),R={merge:!0,resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=e:this.directives=new Wt({version:e}),R={merge:!1,resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,R=null;break;default:{let n=JSON.stringify(e);throw Error(`Expected '1.1', '1.2' or null as first argument, but found: ${n}`)}}if(n.schema instanceof Object)this.schema=n.schema;else if(R)this.schema=new Or(Object.assign(R,n));else throw Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:e,jsonArg:n,mapAsMap:R,maxAliasCount:C,onAnchor:et,reviver:ei}={}){let eo={anchors:new Map,doc:this,keep:!e,mapAsMap:!0===R,mapKeyWarned:!1,maxAliasCount:"number"==typeof C?C:100},el=nn(this.contents,n??"",eo);if("function"==typeof et)for(let{count:e,res:n}of eo.anchors.values())et(n,e);return"function"==typeof ei?On(ei,{"":el},"",el):el}toJSON(e,n){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:n})}toString(e={}){if(this.errors.length>0)throw Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||0>=Number(e.indent))){let n=JSON.stringify(e.indent);throw Error(`"indent" option must be a positive integer, not ${n}`)}return function(e,n){var R;let C=[],et=!0===n.directives;if(!1!==n.directives&&e.directives){let n=e.directives.toString(e);n?(C.push(n),et=!0):e.directives.docStart&&(et=!0)}et&&C.push("---");let ei=oa(e,n),{commentString:eo}=ei.options;if(e.commentBefore){1!==C.length&&C.unshift("");let n=eo(e.commentBefore);C.unshift(fn(n,""))}let el=!1,eu=null;if(e.contents){if(Kt(e.contents)){if(e.contents.spaceBefore&&et&&C.push(""),e.contents.commentBefore){let n=eo(e.contents.commentBefore);C.push(fn(n,""))}ei.forceBlockIndent=!!e.comment,eu=e.contents.comment}let n=eu?void 0:()=>el=!0,R=Un(e.contents,ei,()=>eu=null,n);eu&&(R+=dn(R,"",eo(eu))),("|"===R[0]||">"===R[0])&&"---"===C[C.length-1]?C[C.length-1]=`--- ${R}`:C.push(R)}else C.push(Un(e.contents,ei));if(null!=(R=e.directives)&&R.docEnd){if(e.comment){let n=eo(e.comment);n.includes(`
`)?(C.push("..."),C.push(fn(n,""))):C.push(`... ${n}`)}else C.push("...")}else{let n=e.comment;n&&el&&(n=n.replace(/^\n+/,"")),n&&((!el||eu)&&""!==C[C.length-1]&&C.push(""),C.push(fn(eo(n),"")))}return C.join(`
`)+`
`}(this,e)}};function An(e){if(Ht(e))return!0;throw Error("Expected a YAML collection as document contents")}let ps=class ps extends Error{constructor(e,n,R,C){super(),this.name=e,this.code=R,this.message=C,this.pos=n}};let kn=class kn extends ps{constructor(e,n,R){super("YAMLParseError",e,n,R)}};let Ta=class Ta extends ps{constructor(e,n,R){super("YAMLWarning",e,n,R)}};let dr=(e,n)=>R=>{if(-1===R.pos[0])return;R.linePos=R.pos.map(e=>n.linePos(e));let{line:C,col:et}=R.linePos[0];R.message+=` at line ${C}, column ${et}`;let ei=et-1,eo=e.substring(n.lineStarts[C-1],n.lineStarts[C]).replace(/[\n\r]+$/,"");if(ei>=60&&eo.length>80){let e=Math.min(ei-39,eo.length-79);eo="…"+eo.substring(e),ei-=e-1}if(eo.length>80&&(eo=eo.substring(0,79)+"…"),C>1&&/^ *$/.test(eo.substring(0,ei))){let R=e.substring(n.lineStarts[C-2],n.lineStarts[C-1]);R.length>80&&(R=R.substring(0,79)+`…
`),eo=R+eo}if(/[^ ]/.test(eo)){let e=1,n=R.linePos[1];n&&n.line===C&&n.col>et&&(e=Math.max(1,Math.min(n.col-et,80-ei)));let el=" ".repeat(ei)+"^".repeat(e);R.message+=`:

${eo}
${el}
`}};function In(e,{flow:n,indicator:R,next:C,offset:et,onError:ei,startOnNewline:eo}){let el=!1,eu=eo,ec=eo,ef="",eh="",ep=!1,ed=!1,e_=!1,eg=null,em=null,eb=null,ey=null,ev=null;for(let C of e)switch(e_&&("space"!==C.type&&"newline"!==C.type&&"comma"!==C.type&&ei(C.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),e_=!1),C.type){case"space":!n&&eu&&"doc-start"!==R&&"	"===C.source[0]&&ei(C,"TAB_AS_INDENT","Tabs are not allowed as indentation"),ec=!0;break;case"comment":{ec||ei(C,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");let e=C.source.substring(1)||" ";ef?ef+=eh+e:ef=e,eh="",eu=!1;break}case"newline":eu?ef?ef+=C.source:el=!0:eh+=C.source,eu=!0,ep=!0,(eg||em)&&(ed=!0),ec=!0;break;case"anchor":eg&&ei(C,"MULTIPLE_ANCHORS","A node can have at most one anchor"),C.source.endsWith(":")&&ei(C.offset+C.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),eg=C,null===ev&&(ev=C.offset),eu=!1,ec=!1,e_=!0;break;case"tag":em&&ei(C,"MULTIPLE_TAGS","A node can have at most one tag"),em=C,null===ev&&(ev=C.offset),eu=!1,ec=!1,e_=!0;break;case R:(eg||em)&&ei(C,"BAD_PROP_ORDER",`Anchors and tags must be after the ${C.source} indicator`),ey&&ei(C,"UNEXPECTED_TOKEN",`Unexpected ${C.source} in ${n??"collection"}`),ey=C,eu=!1,ec=!1;break;case"comma":if(n){eb&&ei(C,"UNEXPECTED_TOKEN",`Unexpected , in ${n}`),eb=C,eu=!1,ec=!1;break}default:ei(C,"UNEXPECTED_TOKEN",`Unexpected ${C.type} token`),eu=!1,ec=!1}let ek=e[e.length-1],eA=ek?ek.offset+ek.source.length:et;return e_&&C&&"space"!==C.type&&"newline"!==C.type&&"comma"!==C.type&&("scalar"!==C.type||""!==C.source)&&ei(C.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),{comma:eb,found:ey,spaceBefore:el,comment:ef,hasNewline:ep,hasNewlineAfterProp:ed,anchor:eg,tag:em,end:eA,start:ev??eA}}function Zn(e){if(!e)return null;switch(e.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(e.source.includes(`
`))return!0;if(e.end){for(let n of e.end)if("newline"===n.type)return!0}return!1;case"flow-collection":for(let n of e.items){for(let e of n.start)if("newline"===e.type)return!0;if(n.sep){for(let e of n.sep)if("newline"===e.type)return!0}if(Zn(n.key)||Zn(n.value))return!0}return!1;default:return!0}}function qr(e,n,R){if((null==n?void 0:n.type)==="flow-collection"){let C=n.end[0];C.indent===e&&("]"===C.source||"}"===C.source)&&Zn(n)&&R(C,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}function Ea(e,n,R){let{uniqueKeys:C}=e.options;if(!1===C)return!1;let et="function"==typeof C?C:(n,R)=>n===R||Vt(n)&&Vt(R)&&n.value===R.value&&!("<<"===n.value&&e.schema.merge);return n.some(e=>et(e.key,R))}let e8="All mapping items must start at the same column";function Qn(e,n,R,C){let et="";if(e){let ei=!1,eo="";for(let el of e){let{source:e,type:eu}=el;switch(eu){case"space":ei=!0;break;case"comment":{R&&!ei&&C(el,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");let n=e.substring(1)||" ";et?et+=eo+n:et=n,eo="";break}case"newline":et&&(eo+=e),ei=!0;break;default:C(el,"UNEXPECTED_TOKEN",`Unexpected ${eu} at node end`)}n+=e.length}}return{comment:et,offset:n}}let e6="Block collections are not allowed within flow collections",Dr=e=>e&&("block-map"===e.type||"block-seq"===e.type);function Vr(e,n,R,C,et,ei){let eo="block-map"===R.type?function({composeNode:e,composeEmptyNode:n},R,C,et,ei){var eo;let el=(null==ei?void 0:ei.nodeClass)??en,eu=new el(R.schema);R.atRoot&&(R.atRoot=!1);let ec=C.offset,ef=null;for(let ei of C.items){let{start:el,key:eh,sep:ep,value:ed}=ei,e_=In(el,{indicator:"explicit-key-ind",next:eh??(null==ep?void 0:ep[0]),offset:ec,onError:et,startOnNewline:!0}),eg=!e_.found;if(eg){if(eh&&("block-seq"===eh.type?et(ec,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in eh&&eh.indent!==C.indent&&et(ec,"BAD_INDENT",e8)),!e_.anchor&&!e_.tag&&!ep){ef=e_.end,e_.comment&&(eu.comment?eu.comment+=`
`+e_.comment:eu.comment=e_.comment);continue}(e_.hasNewlineAfterProp||Zn(eh))&&et(eh??el[el.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else(null==(eo=e_.found)?void 0:eo.indent)!==C.indent&&et(ec,"BAD_INDENT",e8);let em=e_.end,eb=eh?e(R,eh,e_,et):n(R,em,el,null,e_,et);R.schema.compat&&qr(C.indent,eh,et),Ea(R,eu.items,eb)&&et(em,"DUPLICATE_KEY","Map keys must be unique");let ey=In(ep??[],{indicator:"map-value-ind",next:ed,offset:eb.range[2],onError:et,startOnNewline:!eh||"block-scalar"===eh.type});if(ec=ey.end,ey.found){eg&&((null==ed?void 0:ed.type)!=="block-map"||ey.hasNewline||et(ec,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),R.options.strict&&e_.start<ey.found.offset-1024&&et(eb.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));let eo=ed?e(R,ed,ey,et):n(R,ec,ep,null,ey,et);R.schema.compat&&qr(C.indent,ed,et),ec=eo.range[2];let el=new Yt(eb,eo);R.options.keepSourceTokens&&(el.srcToken=ei),eu.items.push(el)}else{eg&&et(eb.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),ey.comment&&(eb.comment?eb.comment+=`
`+ey.comment:eb.comment=ey.comment);let e=new Yt(eb);R.options.keepSourceTokens&&(e.srcToken=ei),eu.items.push(e)}}return ef&&ef<ec&&et(ef,"IMPOSSIBLE","Map comment with trailing content"),eu.range=[C.offset,ec,ef??ec],eu}(e,n,R,C,ei):"block-seq"===R.type?function({composeNode:e,composeEmptyNode:n},R,C,et,ei){let eo=(null==ei?void 0:ei.nodeClass)??mn,el=new eo(R.schema);R.atRoot&&(R.atRoot=!1);let eu=C.offset,ec=null;for(let{start:ei,value:eo}of C.items){let ef=In(ei,{indicator:"seq-item-ind",next:eo,offset:eu,onError:et,startOnNewline:!0});if(!ef.found){if(ef.anchor||ef.tag||eo)eo&&"block-seq"===eo.type?et(ef.end,"BAD_INDENT","All sequence items must start at the same column"):et(eu,"MISSING_CHAR","Sequence item without - indicator");else{ec=ef.end,ef.comment&&(el.comment=ef.comment);continue}}let eh=eo?e(R,eo,ef,et):n(R,ef.end,ei,null,ef,et);R.schema.compat&&qr(C.indent,eo,et),eu=eh.range[2],el.items.push(eh)}return el.range=[C.offset,eu,ec??eu],el}(e,n,R,C,ei):function({composeNode:e,composeEmptyNode:n},R,C,et,ei){let eo="{"===C.start.source,el=eo?"flow map":"flow sequence",eu=(null==ei?void 0:ei.nodeClass)??(eo?en:mn),ec=new eu(R.schema);ec.flow=!0;let ef=R.atRoot;ef&&(R.atRoot=!1);let eh=C.offset+C.start.source.length;for(let ei=0;ei<C.items.length;++ei){let eu=C.items[ei],{start:ef,key:ep,sep:ed,value:e_}=eu,eg=In(ef,{flow:el,indicator:"explicit-key-ind",next:ep??(null==ed?void 0:ed[0]),offset:eh,onError:et,startOnNewline:!1});if(!eg.found){if(!eg.anchor&&!eg.tag&&!ed&&!e_){0===ei&&eg.comma?et(eg.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${el}`):ei<C.items.length-1&&et(eg.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${el}`),eg.comment&&(ec.comment?ec.comment+=`
`+eg.comment:ec.comment=eg.comment),eh=eg.end;continue}!eo&&R.options.strict&&Zn(ep)&&et(ep,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(0===ei)eg.comma&&et(eg.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${el}`);else if(eg.comma||et(eg.start,"MISSING_CHAR",`Missing , between ${el} items`),eg.comment){let e="";e:for(let n of ef)switch(n.type){case"comma":case"space":break;case"comment":e=n.source.substring(1);break e;default:break e}if(e){let n=ec.items[ec.items.length-1];Gt(n)&&(n=n.value??n.key),n.comment?n.comment+=`
`+e:n.comment=e,eg.comment=eg.comment.substring(e.length+1)}}if(eo||ed||eg.found){let C=eg.end,ei=ep?e(R,ep,eg,et):n(R,C,ef,null,eg,et);Dr(ep)&&et(ei.range,"BLOCK_IN_FLOW",e6);let em=In(ed??[],{flow:el,indicator:"map-value-ind",next:e_,offset:ei.range[2],onError:et,startOnNewline:!1});if(em.found){if(!eo&&!eg.found&&R.options.strict){if(ed)for(let e of ed){if(e===em.found)break;if("newline"===e.type){et(e,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}eg.start<em.found.offset-1024&&et(em.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else e_&&("source"in e_&&e_.source&&":"===e_.source[0]?et(e_,"MISSING_CHAR",`Missing space after : in ${el}`):et(em.start,"MISSING_CHAR",`Missing , or : between ${el} items`));let eb=e_?e(R,e_,em,et):em.found?n(R,em.end,ed,null,em,et):null;eb?Dr(e_)&&et(eb.range,"BLOCK_IN_FLOW",e6):em.comment&&(ei.comment?ei.comment+=`
`+em.comment:ei.comment=em.comment);let ey=new Yt(ei,eb);if(R.options.keepSourceTokens&&(ey.srcToken=eu),eo)Ea(R,ec.items,ei)&&et(C,"DUPLICATE_KEY","Map keys must be unique"),ec.items.push(ey);else{let e=new en(R.schema);e.flow=!0,e.items.push(ey),ec.items.push(e)}eh=eb?eb.range[2]:em.end}else{let C=e_?e(R,e_,eg,et):n(R,eg.end,ed,null,eg,et);ec.items.push(C),eh=C.range[2],Dr(e_)&&et(C.range,"BLOCK_IN_FLOW",e6)}}let ep=eo?"}":"]",[ed,...e_]=C.end,eg=eh;if(ed&&ed.source===ep)eg=ed.offset+ed.source.length;else{let e=el[0].toUpperCase()+el.substring(1),n=ef?`${e} must end with a ${ep}`:`${e} in block collection must be sufficiently indented and end with a ${ep}`;et(eh,ef?"MISSING_CHAR":"BAD_INDENT",n),ed&&1!==ed.source.length&&e_.unshift(ed)}if(e_.length>0){let e=Qn(e_,eg,R.options.strict,et);e.comment&&(ec.comment?ec.comment+=`
`+e.comment:ec.comment=e.comment),ec.range=[C.offset,eg,e.offset]}else ec.range=[C.offset,eg,eg];return ec}(e,n,R,C,ei),el=eo.constructor;return"!"===et||et===el.tagName?eo.tag=el.tagName:et&&(eo.tag=et),eo}function Oa(e,n,R){let C=e.offset,et=function({offset:e,props:n},R,C){if("block-scalar-header"!==n[0].type)return C(n[0],"IMPOSSIBLE","Block scalar header not found"),null;let{source:et}=n[0],ei=et[0],eo=0,el="",eu=-1;for(let n=1;n<et.length;++n){let R=et[n];if(el||"-"!==R&&"+"!==R){let C=Number(R);!eo&&C?eo=C:-1===eu&&(eu=e+n)}else el=R}-1!==eu&&C(eu,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${et}`);let ec=!1,ef="",eh=et.length;for(let e=1;e<n.length;++e){let et=n[e];switch(et.type){case"space":ec=!0;case"newline":eh+=et.source.length;break;case"comment":R&&!ec&&C(et,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),eh+=et.source.length,ef=et.source.substring(1);break;case"error":C(et,"UNEXPECTED_TOKEN",et.message),eh+=et.source.length;break;default:{let e=`Unexpected token in block scalar header: ${et.type}`;C(et,"UNEXPECTED_TOKEN",e);let n=et.source;n&&"string"==typeof n&&(eh+=n.length)}}}return{mode:ei,indent:eo,chomp:el,comment:ef,length:eh}}(e,n,R);if(!et)return{value:"",type:null,comment:"",range:[C,C,C]};let ei=">"===et.mode?Pt.BLOCK_FOLDED:Pt.BLOCK_LITERAL,eo=e.source?function(e){let n=e.split(/\n( *)/),R=n[0],C=R.match(/^( *)/),et=[null!=C&&C[1]?[C[1],R.slice(C[1].length)]:["",R]];for(let e=1;e<n.length;e+=2)et.push([n[e],n[e+1]]);return et}(e.source):[],el=eo.length;for(let e=eo.length-1;e>=0;--e){let n=eo[e][1];if(""===n||"\r"===n)el=e;else break}if(0===el){let n="+"===et.chomp&&eo.length>0?`
`.repeat(Math.max(1,eo.length-1)):"",R=C+et.length;return e.source&&(R+=e.source.length),{value:n,type:ei,comment:et.comment,range:[C,R,R]}}let eu=e.indent+et.indent,ec=e.offset+et.length,ef=0;for(let e=0;e<el;++e){let[n,C]=eo[e];if(""===C||"\r"===C)0===et.indent&&n.length>eu&&(eu=n.length);else{n.length<eu&&R(ec+n.length,"MISSING_CHAR","Block scalars with more-indented leading empty lines must use an explicit indentation indicator"),0===et.indent&&(eu=n.length),ef=e;break}ec+=n.length+C.length+1}for(let e=eo.length-1;e>=el;--e)eo[e][0].length>eu&&(el=e+1);let eh="",ep="",ed=!1;for(let e=0;e<ef;++e)eh+=eo[e][0].slice(eu)+`
`;for(let e=ef;e<el;++e){let[n,C]=eo[e];ec+=n.length+C.length+1;let el="\r"===C[C.length-1];if(el&&(C=C.slice(0,-1)),C&&n.length<eu){let e=`Block scalar lines must not be less indented than their ${et.indent?"explicit indentation indicator":"first line"}`;R(ec-C.length-(el?2:1),"BAD_INDENT",e),n=""}ei===Pt.BLOCK_LITERAL?(eh+=ep+n.slice(eu)+C,ep=`
`):n.length>eu||"	"===C[0]?(" "===ep?ep=`
`:ed||ep!==`
`||(ep=`

`),eh+=ep+n.slice(eu)+C,ep=`
`,ed=!0):""===C?ep===`
`?eh+=`
`:ep=`
`:(eh+=ep+C,ep=" ",ed=!1)}switch(et.chomp){case"-":break;case"+":for(let e=el;e<eo.length;++e)eh+=`
`+eo[e][0].slice(eu);eh[eh.length-1]!==`
`&&(eh+=`
`);break;default:eh+=`
`}let e_=C+et.length+e.source.length;return{value:eh,type:ei,comment:et.comment,range:[C,e_,e_]}}function Sa(e,n,R){let C,et;let{offset:ei,type:eo,source:el,end:eu}=e,h=(e,n,C)=>R(ei+e,n,C);switch(eo){case"scalar":C=Pt.PLAIN,et=function(e,n){let R="";switch(e[0]){case"	":R="a tab character";break;case",":R="flow indicator character ,";break;case"%":R="directive indicator character %";break;case"|":case">":R=`block scalar indicator ${e[0]}`;break;case"@":case"`":R=`reserved character ${e[0]}`}return R&&n(0,"BAD_SCALAR_START",`Plain value cannot start with ${R}`),Na(e)}(el,h);break;case"single-quoted-scalar":C=Pt.QUOTE_SINGLE,("'"!==el[el.length-1]||1===el.length)&&h(el.length,"MISSING_CHAR","Missing closing 'quote"),et=Na(el.slice(1,-1)).replace(/''/g,"'");break;case"double-quoted-scalar":C=Pt.QUOTE_DOUBLE,et=function(e,n){let R="";for(let C=1;C<e.length-1;++C){let et=e[C];if(!("\r"===et&&e[C+1]===`
`)){if(et===`
`){let{fold:n,offset:et}=function(e,n){let R="",C=e[n+1];for(;(" "===C||"	"===C||C===`
`||"\r"===C)&&!("\r"===C&&e[n+2]!==`
`);)C===`
`&&(R+=`
`),n+=1,C=e[n+1];return R||(R=" "),{fold:R,offset:n}}(e,C);R+=n,C=et}else if("\\"===et){let et=e[++C],ei=e9[et];if(ei)R+=ei;else if(et===`
`)for(et=e[C+1];" "===et||"	"===et;)et=e[++C+1];else if("\r"===et&&e[C+1]===`
`)for(et=e[++C+1];" "===et||"	"===et;)et=e[++C+1];else if("x"===et||"u"===et||"U"===et){let ei={x:2,u:4,U:8}[et];R+=function(e,n,R,C){let et=e.substr(n,R),ei=et.length===R&&/^[0-9a-fA-F]+$/.test(et)?parseInt(et,16):NaN;if(isNaN(ei)){let et=e.substr(n-2,R+2);return C(n-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${et}`),et}return String.fromCodePoint(ei)}(e,C+1,ei,n),C+=ei}else{let et=e.substr(C-1,2);n(C-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${et}`),R+=et}}else if(" "===et||"	"===et){let n=C,ei=e[C+1];for(;" "===ei||"	"===ei;)ei=e[++C+1];ei===`
`||"\r"===ei&&e[C+2]===`
`||(R+=C>n?e.slice(n,C+1):et)}else R+=et}}return('"'!==e[e.length-1]||1===e.length)&&n(e.length,"MISSING_CHAR",'Missing closing "quote'),R}(el,h);break;default:return R(e,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${eo}`),{value:"",type:null,comment:"",range:[ei,ei+el.length,ei+el.length]}}let ec=ei+el.length,ef=Qn(eu,ec,n,R);return{value:et,type:C,comment:ef.comment,range:[ei,ec,ef.offset]}}function Na(e){let n,R;try{n=RegExp(`(.*?)(?<![ 	])[ 	]*\r?
`,"sy"),R=RegExp(`[ 	]*(.*?)(?:(?<![ 	])[ 	]*)?\r?
`,"sy")}catch{n=/(.*?)[ \t]*\r?\n/sy,R=/[ \t]*(.*?)[ \t]*\r?\n/sy}let C=n.exec(e);if(!C)return e;let et=C[1],ei=" ",eo=n.lastIndex;for(R.lastIndex=eo;C=R.exec(e);)""===C[1]?ei===`
`?et+=ei:ei=`
`:(et+=ei+C[1],ei=" "),eo=R.lastIndex;let el=/[ \t]*(.*)/sy;return el.lastIndex=eo,et+ei+((null==(C=el.exec(e))?void 0:C[1])??"")}let e9={0:"\x00",a:"\x07",b:"\b",e:"\x1b",f:"\f",n:`
`,r:"\r",t:"	",v:"\v",N:"\x85",_:"\xa0",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","	":"	"};function Ra(e,n,R,C){let et;let{value:ei,type:eo,comment:el,range:eu}="block-scalar"===n.type?Oa(n,e.options.strict,C):Sa(n,e.options.strict,C),ec=R?e.directives.tagName(R.source,e=>C(R,"TAG_RESOLVE_FAILED",e)):null,ef=R&&ec?function(e,n,R,C,et){var ei;if("!"===R)return e[eL];let eo=[];for(let n of e.tags)if(!n.collection&&n.tag===R){if(!n.default||!n.test)return n;eo.push(n)}for(let e of eo)if(null!=(ei=e.test)&&ei.test(n))return e;let el=e.knownTags[R];return el&&!el.collection?(e.tags.push(Object.assign({},el,{default:!1,test:void 0})),el):(et(C,"TAG_RESOLVE_FAILED",`Unresolved tag: ${R}`,"tag:yaml.org,2002:str"!==R),e[eL])}(e.schema,ei,ec,R,C):"scalar"===n.type?function({directives:e,schema:n},R,C,et){let ei=n.tags.find(e=>{var n;return e.default&&(null==(n=e.test)?void 0:n.test(R))})||n[eL];if(n.compat){let eo=n.compat.find(e=>{var n;return e.default&&(null==(n=e.test)?void 0:n.test(R))})??n[eL];if(ei.tag!==eo.tag){let n=e.tagString(ei.tag),R=e.tagString(eo.tag),el=`Value may be parsed as either ${n} or ${R}`;et(C,"TAG_RESOLVE_FAILED",el,!0)}}return ei}(e,ei,n,C):e.schema[eL];try{let eo=ef.resolve(ei,e=>C(R??n,"TAG_RESOLVE_FAILED",e),e.options);et=Vt(eo)?eo:new Pt(eo)}catch(eo){let e=eo instanceof Error?eo.message:String(eo);C(R??n,"TAG_RESOLVE_FAILED",e),et=new Pt(ei)}return et.range=eu,et.source=ei,eo&&(et.type=eo),ec&&(et.tag=ec),ef.format&&(et.format=ef.format),el&&(et.comment=el),et}let e7={composeNode:Ua,composeEmptyNode:ds};function Ua(e,n,R,C){let{spaceBefore:et,comment:ei,anchor:eo,tag:el}=R,eu,ec=!0;switch(n.type){case"alias":eu=function({options:e},{offset:n,source:R,end:C},et){let ei=new br(R.substring(1));""===ei.source&&et(n,"BAD_ALIAS","Alias cannot be an empty string"),ei.source.endsWith(":")&&et(n+R.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);let eo=n+R.length,el=Qn(C,eo,e.strict,et);return ei.range=[n,eo,el.offset],el.comment&&(ei.comment=el.comment),ei}(e,n,C),(eo||el)&&C(n,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":eu=Ra(e,n,el,C),eo&&(eu.anchor=eo.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":eu=function(e,n,R,C,et){var ei;let eo=C?n.directives.tagName(C.source,e=>et(C,"TAG_RESOLVE_FAILED",e)):null,el="block-map"===R.type?"map":"block-seq"===R.type?"seq":"{"===R.start.source?"map":"seq";if(!C||!eo||"!"===eo||eo===en.tagName&&"map"===el||eo===mn.tagName&&"seq"===el||!el)return Vr(e,n,R,et,eo);let eu=n.schema.tags.find(e=>e.tag===eo&&e.collection===el);if(!eu){let ei=n.schema.knownTags[eo];if(!ei||ei.collection!==el)return null!=ei&&ei.collection?et(C,"BAD_COLLECTION_TYPE",`${ei.tag} used for ${el} collection, but expects ${ei.collection}`,!0):et(C,"TAG_RESOLVE_FAILED",`Unresolved tag: ${eo}`,!0),Vr(e,n,R,et,eo);n.schema.tags.push(Object.assign({},ei,{default:!1})),eu=ei}let ec=Vr(e,n,R,et,eo,eu),ef=(null==(ei=eu.resolve)?void 0:ei.call(eu,ec,e=>et(C,"TAG_RESOLVE_FAILED",e),n.options))??ec,eh=Kt(ef)?ef:new Pt(ef);return eh.range=ec.range,eh.tag=eo,null!=eu&&eu.format&&(eh.format=eu.format),eh}(e7,e,n,el,C),eo&&(eu.anchor=eo.source.substring(1));break;default:{let et="error"===n.type?n.message:`Unsupported token (type: ${n.type})`;C(n,"UNEXPECTED_TOKEN",et),eu=ds(e,n.offset,void 0,null,R,C),ec=!1}}return eo&&""===eu.anchor&&C(eo,"BAD_ALIAS","Anchor cannot be an empty string"),et&&(eu.spaceBefore=!0),ei&&("scalar"===n.type&&""===n.source?eu.comment=ei:eu.commentBefore=ei),e.options.keepSourceTokens&&ec&&(eu.srcToken=n),eu}function ds(e,n,R,C,{spaceBefore:et,comment:ei,anchor:eo,tag:el,end:eu},ec){let ef={type:"scalar",offset:function(e,n,R){if(n){null===R&&(R=n.length);for(let C=R-1;C>=0;--C){let R=n[C];switch(R.type){case"space":case"comment":case"newline":e-=R.source.length;continue}for(R=n[++C];(null==R?void 0:R.type)==="space";)e+=R.source.length,R=n[++C];break}}return e}(n,R,C),indent:-1,source:""},eh=Ra(e,ef,el,ec);return eo&&(eh.anchor=eo.source.substring(1),""===eh.anchor&&ec(eo,"BAD_ALIAS","Anchor cannot be an empty string")),et&&(eh.spaceBefore=!0),ei&&(eh.comment=ei,eh.range[2]=eu),eh}function Hn(e){if("number"==typeof e)return[e,e+1];if(Array.isArray(e))return 2===e.length?e:[e[0],e[1]];let{offset:n,source:R}=e;return[n,n+("string"==typeof R?R.length:1)]}function Vs(e){var n;let R="",C=!1,et=!1;for(let ei=0;ei<e.length;++ei){let eo=e[ei];switch(eo[0]){case"#":R+=(""===R?"":et?`

`:`
`)+(eo.substring(1)||" "),C=!0,et=!1;break;case"%":(null==(n=e[ei+1])?void 0:n[0])!=="#"&&(ei+=1),C=!1;break;default:C||(et=!0),C=!1}}return{comment:R,afterEmptyLine:et}}let _s=class _s{constructor(e={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(e,n,R,C)=>{let et=Hn(e);C?this.warnings.push(new Ta(et,n,R)):this.errors.push(new kn(et,n,R))},this.directives=new Wt({version:e.version||"1.2"}),this.options=e}decorate(e,n){let{comment:R,afterEmptyLine:C}=Vs(this.prelude);if(R){let et=e.contents;if(n)e.comment=e.comment?`${e.comment}
${R}`:R;else if(C||e.directives.docStart||!et)e.commentBefore=R;else if(Ht(et)&&!et.flow&&et.items.length>0){let e=et.items[0];Gt(e)&&(e=e.key);let n=e.commentBefore;e.commentBefore=n?`${R}
${n}`:R}else{let e=et.commentBefore;et.commentBefore=e?`${R}
${e}`:R}}n?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:Vs(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(e,n=!1,R=-1){for(let n of e)yield*this.next(n);yield*this.end(n,R)}*next(e){switch(e.type){case"directive":this.directives.add(e.source,(n,R,C)=>{let et=Hn(e);et[0]+=n,this.onError(et,"BAD_DIRECTIVE",R,C)}),this.prelude.push(e.source),this.atDirectives=!0;break;case"document":{let n=function(e,n,{offset:R,start:C,value:et,end:ei},eo){let el=Object.assign({_directives:n},e),eu=new Dn(void 0,el),ec={atRoot:!0,directives:eu.directives,options:eu.options,schema:eu.schema},ef=In(C,{indicator:"doc-start",next:et??(null==ei?void 0:ei[0]),offset:R,onError:eo,startOnNewline:!0});ef.found&&(eu.directives.docStart=!0,et&&("block-map"===et.type||"block-seq"===et.type)&&!ef.hasNewline&&eo(ef.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),eu.contents=et?Ua(ec,et,ef,eo):ds(ec,ef.end,C,null,ef,eo);let eh=eu.contents.range[2],ep=Qn(ei,eh,!1,eo);return ep.comment&&(eu.comment=ep.comment),eu.range=[R,eh,ep.offset],eu}(this.options,this.directives,e,this.onError);this.atDirectives&&!n.directives.docStart&&this.onError(e,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(n,!1),this.doc&&(yield this.doc),this.doc=n,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(e.source);break;case"error":{let n=e.source?`${e.message}: ${JSON.stringify(e.source)}`:e.message,R=new kn(Hn(e),"UNEXPECTED_TOKEN",n);this.atDirectives||!this.doc?this.errors.push(R):this.doc.errors.push(R);break}case"doc-end":{if(!this.doc){this.errors.push(new kn(Hn(e),"UNEXPECTED_TOKEN","Unexpected doc-end without preceding document"));break}this.doc.directives.docEnd=!0;let n=Qn(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),n.comment){let e=this.doc.comment;this.doc.comment=e?`${e}
${n.comment}`:n.comment}this.doc.range[2]=n.offset;break}default:this.errors.push(new kn(Hn(e),"UNEXPECTED_TOKEN",`Unsupported token ${e.type}`))}}*end(e=!1,n=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(e){let e=Object.assign({_directives:this.directives},this.options),R=new Dn(void 0,e);this.atDirectives&&this.onError(n,"MISSING_CHAR","Missing directives-end indicator line"),R.range=[0,n,n],this.decorate(R,!1),yield R}}};function Ia(e,n){if(n)for(let R of n)switch(R.type){case"space":case"comment":e.push(R);break;case"newline":return e.push(R),!0}return!1}function Gr(e,n,R){switch(e.type){case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":e.type=R,e.source=n;break;case"block-scalar":{let C=e.props.slice(1),et=n.length;for(let n of("block-scalar-header"===e.props[0].type&&(et-=e.props[0].source.length),C))n.offset+=et;delete e.props,Object.assign(e,{type:R,source:n,end:C});break}case"block-map":case"block-seq":{let C={type:"newline",offset:e.offset+n.length,indent:e.indent,source:`
`};delete e.items,Object.assign(e,{type:R,source:n,end:[C]});break}default:{let C="indent"in e?e.indent:-1,et="end"in e&&Array.isArray(e.end)?e.end.filter(e=>"space"===e.type||"comment"===e.type||"newline"===e.type):[];for(let n of Object.keys(e))"type"!==n&&"offset"!==n&&delete e[n];Object.assign(e,{type:R,indent:C,source:n,end:et})}}}function _r(e){switch(e.type){case"block-scalar":{let n="";for(let R of e.props)n+=_r(R);return n+e.source}case"block-map":case"block-seq":{let n="";for(let R of e.items)n+=fr(R);return n}case"flow-collection":{let n=e.start.source;for(let R of e.items)n+=fr(R);for(let R of e.end)n+=R.source;return n}case"document":{let n=fr(e);if(e.end)for(let R of e.end)n+=R.source;return n}default:{let n=e.source;if("end"in e&&e.end)for(let R of e.end)n+=R.source;return n}}}function fr({start:e,key:n,sep:R,value:C}){let et="";for(let n of e)et+=n.source;if(n&&(et+=_r(n)),R)for(let e of R)et+=e.source;return C&&(et+=_r(C)),et}let ts=Symbol("break visit"),to=Symbol("skip children"),tl=Symbol("remove item");function Ln(e,n){"type"in e&&"document"===e.type&&(e={start:e.start,value:e.value}),function Ba(e,n,R){let C=R(n,e);if("symbol"==typeof C)return C;for(let et of["key","value"]){let ei=n[et];if(ei&&"items"in ei){for(let n=0;n<ei.items.length;++n){let C=Ba(Object.freeze(e.concat([[et,n]])),ei.items[n],R);if("number"==typeof C)n=C-1;else{if(C===ts)return ts;C===tl&&(ei.items.splice(n,1),n-=1)}}"function"==typeof C&&"key"===et&&(C=C(n,e))}}return"function"==typeof C?C(n,e):C}(Object.freeze([]),e,n)}function Ca(e){switch(e){case"\uFEFF":return"byte-order-mark";case"\x02":return"doc-mode";case"\x18":return"flow-error-end";case"\x1f":return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case`
`:case`\r
`:return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(e[0]){case" ":case"	":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}Ln.BREAK=ts,Ln.SKIP=to,Ln.REMOVE=tl,Ln.itemAtPath=(e,n)=>{let R=e;for(let[e,C]of n){let n=null==R?void 0:R[e];if(!n||!("items"in n))return;R=n.items[C]}return R},Ln.parentCollection=(e,n)=>{let R=Ln.itemAtPath(e,n.slice(0,-1)),C=n[n.length-1][0],et=null==R?void 0:R[C];if(et&&"items"in et)return et;throw Error("Parent collection not found")};let tu=Object.freeze(Object.defineProperty({__proto__:null,BOM:"\uFEFF",DOCUMENT:"\x02",FLOW_END:"\x18",SCALAR:"\x1f",createScalarToken:function(e,n){let{implicitKey:R=!1,indent:C,inFlow:et=!1,offset:ei=-1,type:eo="PLAIN"}=n,el=Wn({type:eo,value:e},{implicitKey:R,indent:C>0?" ".repeat(C):"",inFlow:et,options:{blockQuote:!0,lineWidth:-1}}),eu=n.end??[{type:"newline",offset:-1,indent:C,source:`
`}];switch(el[0]){case"|":case">":{let e=el.indexOf(`
`),n=el.substring(0,e),R=el.substring(e+1)+`
`,et=[{type:"block-scalar-header",offset:ei,indent:C,source:n}];return Ia(et,eu)||et.push({type:"newline",offset:-1,indent:C,source:`
`}),{type:"block-scalar",offset:ei,indent:C,props:et,source:R}}case'"':return{type:"double-quoted-scalar",offset:ei,indent:C,source:el,end:eu};case"'":return{type:"single-quoted-scalar",offset:ei,indent:C,source:el,end:eu};default:return{type:"scalar",offset:ei,indent:C,source:el,end:eu}}},isCollection:e=>!!e&&"items"in e,isScalar:e=>!!e&&("scalar"===e.type||"single-quoted-scalar"===e.type||"double-quoted-scalar"===e.type||"block-scalar"===e.type),prettyToken:function(e){switch(e){case"\uFEFF":return"<BOM>";case"\x02":return"<DOC>";case"\x18":return"<FLOW_END>";case"\x1f":return"<SCALAR>";default:return JSON.stringify(e)}},resolveAsScalar:function(e,n=!0,R){if(e){let r=(e,n,C)=>{let et="number"==typeof e?e:Array.isArray(e)?e[0]:e.offset;if(R)R(et,n,C);else throw new kn([et,et+1],n,C)};switch(e.type){case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return Sa(e,n,r);case"block-scalar":return Oa(e,n,r)}}return null},setScalarValue:function(e,n,R={}){let{afterKey:C=!1,implicitKey:et=!1,inFlow:ei=!1,type:eo}=R,el="indent"in e?e.indent:null;if(C&&"number"==typeof el&&(el+=2),!eo)switch(e.type){case"single-quoted-scalar":eo="QUOTE_SINGLE";break;case"double-quoted-scalar":eo="QUOTE_DOUBLE";break;case"block-scalar":{let n=e.props[0];if("block-scalar-header"!==n.type)throw Error("Invalid block scalar header");eo=">"===n.source[0]?"BLOCK_FOLDED":"BLOCK_LITERAL";break}default:eo="PLAIN"}let eu=Wn({type:eo,value:n},{implicitKey:et||null===el,indent:null!==el&&el>0?" ".repeat(el):"",inFlow:ei,options:{blockQuote:!0,lineWidth:-1}});switch(eu[0]){case"|":case">":!function(e,n){let R=n.indexOf(`
`),C=n.substring(0,R),et=n.substring(R+1)+`
`;if("block-scalar"===e.type){let n=e.props[0];if("block-scalar-header"!==n.type)throw Error("Invalid block scalar header");n.source=C,e.source=et}else{let{offset:n}=e,R="indent"in e?e.indent:-1,ei=[{type:"block-scalar-header",offset:n,indent:R,source:C}];for(let n of(Ia(ei,"end"in e?e.end:void 0)||ei.push({type:"newline",offset:-1,indent:R,source:`
`}),Object.keys(e)))"type"!==n&&"offset"!==n&&delete e[n];Object.assign(e,{type:"block-scalar",indent:R,props:ei,source:et})}}(e,eu);break;case'"':Gr(e,eu,"double-quoted-scalar");break;case"'":Gr(e,eu,"single-quoted-scalar");break;default:Gr(e,eu,"scalar")}},stringify:e=>"type"in e?_r(e):fr(e),tokenType:Ca,visit:Ln},Symbol.toStringTag,{value:"Module"}));function tn(e){switch(e){case void 0:case" ":case`
`:case"\r":case"	":return!0;default:return!1}}let tc="0123456789ABCDEFabcdef".split(""),tf="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()".split(""),th=",[]{}".split(""),tp=` ,[]{}
\r	`.split(""),Hr=e=>!e||tp.includes(e);let Ma=class Ma{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(e,n=!1){e&&(this.buffer=this.buffer?this.buffer+e:e,this.lineEndPos=null),this.atEnd=!n;let R=this.next??"stream";for(;R&&(n||this.hasChars(1));)R=yield*this.parseNext(R)}atLineEnd(){let e=this.pos,n=this.buffer[e];for(;" "===n||"	"===n;)n=this.buffer[++e];return!n||"#"===n||n===`
`||"\r"===n&&this.buffer[e+1]===`
`}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let n=this.buffer[e];if(this.indentNext>0){let R=0;for(;" "===n;)n=this.buffer[++R+e];if("\r"===n){let n=this.buffer[R+e+1];if(n===`
`||!n&&!this.atEnd)return e+R+1}return n!==`
`&&!(R>=this.indentNext)&&(n||this.atEnd)?-1:e+R}if("-"===n||"."===n){let n=this.buffer.substr(e,3);if(("---"===n||"..."===n)&&tn(this.buffer[e+3]))return -1}return e}getLine(){let e=this.lineEndPos;return("number"!=typeof e||-1!==e&&e<this.pos)&&(e=this.buffer.indexOf(`
`,this.pos),this.lineEndPos=e),-1===e?this.atEnd?this.buffer.substring(this.pos):null:("\r"===this.buffer[e-1]&&(e-=1),this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}*parseNext(e){switch(e){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let e=this.getLine();if(null===e)return this.setNext("stream");if("\uFEFF"===e[0]&&(yield*this.pushCount(1),e=e.substring(1)),"%"===e[0]){let n=e.length,R=e.indexOf("#");if(-1!==R){let C=e[R-1];(" "===C||"	"===C)&&(n=R-1)}for(;;){let R=e[n-1];if(" "===R||"	"===R)n-=1;else break}let C=(yield*this.pushCount(n))+(yield*this.pushSpaces(!0));return yield*this.pushCount(e.length-C),this.pushNewline(),"stream"}if(this.atLineEnd()){let n=yield*this.pushSpaces(!0);return yield*this.pushCount(e.length-n),yield*this.pushNewline(),"stream"}return yield"\x02",yield*this.parseLineStart()}*parseLineStart(){let e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext("line-start");if("-"===e||"."===e){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");let e=this.peek(3);if("---"===e&&tn(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,"doc";if("..."===e&&tn(this.charAt(3)))return yield*this.pushCount(3),"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!tn(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){let[e,n]=this.peek(2);if(!n&&!this.atEnd)return this.setNext("block-start");if(("-"===e||"?"===e||":"===e)&&tn(n)){let e=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=e,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);let e=this.getLine();if(null===e)return this.setNext("doc");let n=yield*this.pushIndicators();switch(e[n]){case"#":yield*this.pushCount(e.length-n);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(Hr),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return n+=(yield*this.parseBlockScalarHeader())+(yield*this.pushSpaces(!0)),yield*this.pushCount(e.length-n),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let e,n,R=-1;do(e=yield*this.pushNewline())>0?(n=yield*this.pushSpaces(!1),this.indentValue=R=n):n=0,n+=yield*this.pushSpaces(!0);while(e+n>0);let C=this.getLine();if(null===C)return this.setNext("flow");if((-1!==R&&R<this.indentNext&&"#"!==C[0]||0===R&&(C.startsWith("---")||C.startsWith("..."))&&tn(C[3]))&&!(R===this.indentNext-1&&1===this.flowLevel&&("]"===C[0]||"}"===C[0])))return this.flowLevel=0,yield"\x18",yield*this.parseLineStart();let et=0;for(;","===C[et];)et+=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0)),this.flowKey=!1;switch(C[et+=yield*this.pushIndicators()]){case void 0:return"flow";case"#":return yield*this.pushCount(C.length-et),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(Hr),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{let e=this.charAt(1);if(this.flowKey||tn(e)||","===e)return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){let e=this.charAt(0),n=this.buffer.indexOf(e,this.pos+1);if("'"===e)for(;-1!==n&&"'"===this.buffer[n+1];)n=this.buffer.indexOf("'",n+2);else for(;-1!==n;){let e=0;for(;"\\"===this.buffer[n-1-e];)e+=1;if(e%2==0)break;n=this.buffer.indexOf('"',n+1)}let R=this.buffer.substring(0,n),C=R.indexOf(`
`,this.pos);if(-1!==C){for(;-1!==C;){let e=this.continueScalar(C+1);if(-1===e)break;C=R.indexOf(`
`,e)}-1!==C&&(n=C-("\r"===R[C-1]?2:1))}if(-1===n){if(!this.atEnd)return this.setNext("quoted-scalar");n=this.buffer.length}return yield*this.pushToIndex(n+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){let n=this.buffer[++e];if("+"===n)this.blockScalarKeep=!0;else if(n>"0"&&n<="9")this.blockScalarIndent=Number(n)-1;else if("-"!==n)break}return yield*this.pushUntil(e=>tn(e)||"#"===e)}*parseBlockScalar(){let e=this.pos-1,n=0,R;e:for(let C=this.pos;R=this.buffer[C];++C)switch(R){case" ":n+=1;break;case`
`:e=C,n=0;break;case"\r":{let e=this.buffer[C+1];if(!e&&!this.atEnd)return this.setNext("block-scalar");if(e===`
`)break}default:break e}if(!R&&!this.atEnd)return this.setNext("block-scalar");if(n>=this.indentNext){-1===this.blockScalarIndent?this.indentNext=n:this.indentNext+=this.blockScalarIndent;do{let n=this.continueScalar(e+1);if(-1===n)break;e=this.buffer.indexOf(`
`,n)}while(-1!==e);if(-1===e){if(!this.atEnd)return this.setNext("block-scalar");e=this.buffer.length}}if(!this.blockScalarKeep)for(;;){let R=e-1,C=this.buffer[R];"\r"===C&&(C=this.buffer[--R]);let et=R;for(;" "===C||"	"===C;)C=this.buffer[--R];if(C===`
`&&R>=this.pos&&R+1+n>et)e=R;else break}return yield"\x1f",yield*this.pushToIndex(e+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){let e=this.flowLevel>0,n=this.pos-1,R=this.pos-1,C;for(;C=this.buffer[++R];)if(":"===C){let C=this.buffer[R+1];if(tn(C)||e&&","===C)break;n=R}else if(tn(C)){let et=this.buffer[R+1];if("\r"===C&&(et===`
`?(R+=1,C=`
`,et=this.buffer[R+1]):n=R),"#"===et||e&&th.includes(et))break;if(C===`
`){let e=this.continueScalar(R+1);if(-1===e)break;R=Math.max(R,e-2)}}else{if(e&&th.includes(C))break;n=R}return C||this.atEnd?(yield"\x1f",yield*this.pushToIndex(n+1,!0),e?"flow":"doc"):this.setNext("plain-scalar")}*pushCount(e){return e>0?(yield this.buffer.substr(this.pos,e),this.pos+=e,e):0}*pushToIndex(e,n){let R=this.buffer.slice(this.pos,e);return R?(yield R,this.pos+=R.length,R.length):(n&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(Hr))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{let e=this.flowLevel>0,n=this.charAt(1);if(tn(n)||e&&th.includes(n))return e?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if("<"===this.charAt(1)){let e=this.pos+2,n=this.buffer[e];for(;!tn(n)&&">"!==n;)n=this.buffer[++e];return yield*this.pushToIndex(">"===n?e+1:e,!1)}{let e=this.pos+1,n=this.buffer[e];for(;n;)if(tf.includes(n))n=this.buffer[++e];else if("%"===n&&tc.includes(this.buffer[e+1])&&tc.includes(this.buffer[e+2]))n=this.buffer[e+=3];else break;return yield*this.pushToIndex(e,!1)}}*pushNewline(){let e=this.buffer[this.pos];return e===`
`?yield*this.pushCount(1):"\r"===e&&this.charAt(1)===`
`?yield*this.pushCount(2):0}*pushSpaces(e){let n=this.pos-1,R;do R=this.buffer[++n];while(" "===R||e&&"	"===R);let C=n-this.pos;return C>0&&(yield this.buffer.substr(this.pos,C),this.pos=n),C}*pushUntil(e){let n=this.pos,R=this.buffer[n];for(;!e(R);)R=this.buffer[++n];return yield*this.pushToIndex(n,!1)}};let ja=class ja{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let n=0,R=this.lineStarts.length;for(;n<R;){let C=n+R>>1;this.lineStarts[C]<e?n=C+1:R=C}if(this.lineStarts[n]===e)return{line:n+1,col:1};if(0===n)return{line:0,col:e};let C=this.lineStarts[n-1];return{line:n,col:e-C+1}}}};function sn(e,n){for(let R=0;R<e.length;++R)if(e[R].type===n)return!0;return!1}function zs(e){for(let n=0;n<e.length;++n)switch(e[n].type){case"space":case"comment":case"newline":break;default:return n}return -1}function Fa(e){switch(null==e?void 0:e.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function rr(e){switch(e.type){case"document":return e.start;case"block-map":{let n=e.items[e.items.length-1];return n.sep??n.start}case"block-seq":return e.items[e.items.length-1].start;default:return[]}}function xn(e){var n;if(0===e.length)return[];let R=e.length;e:for(;--R>=0;)switch(e[R].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;(null==(n=e[++R])?void 0:n.type)==="space";);return e.splice(R,e.length)}function Hs(e){if("flow-seq-start"===e.start.type)for(let n of e.items)!n.sep||n.value||sn(n.start,"explicit-key-ind")||sn(n.sep,"map-value-ind")||(n.key&&(n.value=n.key),delete n.key,Fa(n.value)?n.value.end?Array.prototype.push.apply(n.value.end,n.sep):n.value.end=n.sep:Array.prototype.push.apply(n.start,n.sep),delete n.sep)}let gs=class gs{constructor(e){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new Ma,this.onNewLine=e}*parse(e,n=!1){for(let R of(this.onNewLine&&0===this.offset&&this.onNewLine(0),this.lexer.lex(e,n)))yield*this.next(R);n||(yield*this.end())}*next(e){if(this.source=e,this.atScalar){this.atScalar=!1,yield*this.step(),this.offset+=e.length;return}let n=Ca(e);if(n){if("scalar"===n)this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=n,yield*this.step(),n){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case"space":this.atNewLine&&" "===e[0]&&(this.indent+=e.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=e.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=e.length}}else{let n=`Not a YAML token: ${e}`;yield*this.pop({type:"error",offset:this.offset,message:n,source:e}),this.offset+=e.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){let e=this.peek(1);if("doc-end"===this.type&&(!e||"doc-end"!==e.type)){for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!e)return yield*this.stream();switch(e.type){case"document":return yield*this.document(e);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(e);case"block-scalar":return yield*this.blockScalar(e);case"block-map":return yield*this.blockMap(e);case"block-seq":return yield*this.blockSequence(e);case"flow-collection":return yield*this.flowCollection(e);case"doc-end":return yield*this.documentEnd(e)}yield*this.pop()}peek(e){return this.stack[this.stack.length-e]}*pop(e){let n=e??this.stack.pop();if(n){if(0===this.stack.length)yield n;else{let e=this.peek(1);switch("block-scalar"===n.type?n.indent="indent"in e?e.indent:0:"flow-collection"===n.type&&"document"===e.type&&(n.indent=0),"flow-collection"===n.type&&Hs(n),e.type){case"document":e.value=n;break;case"block-scalar":e.props.push(n);break;case"block-map":{let R=e.items[e.items.length-1];if(R.value){e.items.push({start:[],key:n,sep:[]}),this.onKeyLine=!0;return}if(R.sep)R.value=n;else{Object.assign(R,{key:n,sep:[]}),this.onKeyLine=!sn(R.start,"explicit-key-ind");return}break}case"block-seq":{let R=e.items[e.items.length-1];R.value?e.items.push({start:[],value:n}):R.value=n;break}case"flow-collection":{let R=e.items[e.items.length-1];!R||R.value?e.items.push({start:[],key:n,sep:[]}):R.sep?R.value=n:Object.assign(R,{key:n,sep:[]});return}default:yield*this.pop(),yield*this.pop(n)}if(("document"===e.type||"block-map"===e.type||"block-seq"===e.type)&&("block-map"===n.type||"block-seq"===n.type)){let R=n.items[n.items.length-1];R&&!R.sep&&!R.value&&R.start.length>0&&-1===zs(R.start)&&(0===n.indent||R.start.every(e=>"comment"!==e.type||e.indent<n.indent))&&("document"===e.type?e.end=R.start:e.items.push({start:R.start}),n.items.splice(-1,1))}}}else yield{type:"error",offset:this.offset,source:"",message:"Tried to pop an empty stack"}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{let e={type:"document",offset:this.offset,start:[]};"doc-start"===this.type&&e.start.push(this.sourceToken),this.stack.push(e);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(e){if(e.value)return yield*this.lineEnd(e);switch(this.type){case"doc-start":-1!==zs(e.start)?(yield*this.pop(),yield*this.step()):e.start.push(this.sourceToken);return;case"anchor":case"tag":case"space":case"comment":case"newline":e.start.push(this.sourceToken);return}let n=this.startBlockValue(e);n?this.stack.push(n):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(e){if("map-value-ind"===this.type){let n;let R=rr(this.peek(2)),C=xn(R);e.end?((n=e.end).push(this.sourceToken),delete e.end):n=[this.sourceToken];let et={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:C,key:e,sep:n}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=et}else yield*this.lineEnd(e)}*blockScalar(e){switch(this.type){case"space":case"comment":case"newline":e.props.push(this.sourceToken);return;case"scalar":if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let e=this.source.indexOf(`
`)+1;for(;0!==e;)this.onNewLine(this.offset+e),e=this.source.indexOf(`
`,e)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(e){var n;let R=e.items[e.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,R.value){let n="end"in R.value?R.value.end:void 0,C=Array.isArray(n)?n[n.length-1]:void 0;(null==C?void 0:C.type)==="comment"?null==n||n.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else R.sep?R.sep.push(this.sourceToken):R.start.push(this.sourceToken);return;case"space":case"comment":if(R.value)e.items.push({start:[this.sourceToken]});else if(R.sep)R.sep.push(this.sourceToken);else{if(this.atIndentedComment(R.start,e.indent)){let C=e.items[e.items.length-2],et=null==(n=null==C?void 0:C.value)?void 0:n.end;if(Array.isArray(et)){Array.prototype.push.apply(et,R.start),et.push(this.sourceToken),e.items.pop();return}}R.start.push(this.sourceToken)}return}if(this.indent>=e.indent){let n=!this.onKeyLine&&this.indent===e.indent&&R.sep,C=[];if(n&&R.sep&&!R.value){let n=[];for(let C=0;C<R.sep.length;++C){let et=R.sep[C];switch(et.type){case"newline":n.push(C);break;case"space":break;case"comment":et.indent>e.indent&&(n.length=0);break;default:n.length=0}}n.length>=2&&(C=R.sep.splice(n[1]))}switch(this.type){case"anchor":case"tag":n||R.value?(C.push(this.sourceToken),e.items.push({start:C}),this.onKeyLine=!0):R.sep?R.sep.push(this.sourceToken):R.start.push(this.sourceToken);return;case"explicit-key-ind":R.sep||sn(R.start,"explicit-key-ind")?n||R.value?(C.push(this.sourceToken),e.items.push({start:C})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]}):R.start.push(this.sourceToken),this.onKeyLine=!0;return;case"map-value-ind":if(sn(R.start,"explicit-key-ind")){if(R.sep){if(R.value)e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(sn(R.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:C,key:null,sep:[this.sourceToken]}]});else if(Fa(R.key)&&!sn(R.sep,"newline")){let e=xn(R.start),n=R.key,C=R.sep;C.push(this.sourceToken),delete R.key,delete R.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:e,key:n,sep:C}]})}else C.length>0?R.sep=R.sep.concat(C,this.sourceToken):R.sep.push(this.sourceToken)}else if(sn(R.start,"newline"))Object.assign(R,{key:null,sep:[this.sourceToken]});else{let e=xn(R.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:e,key:null,sep:[this.sourceToken]}]})}}else R.sep?R.value||n?e.items.push({start:C,key:null,sep:[this.sourceToken]}):sn(R.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):R.sep.push(this.sourceToken):Object.assign(R,{key:null,sep:[this.sourceToken]});this.onKeyLine=!0;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{let et=this.flowScalar(this.type);n||R.value?(e.items.push({start:C,key:et,sep:[]}),this.onKeyLine=!0):R.sep?this.stack.push(et):(Object.assign(R,{key:et,sep:[]}),this.onKeyLine=!0);return}default:{let et=this.startBlockValue(e);if(et){n&&"block-seq"!==et.type&&sn(R.start,"explicit-key-ind")&&e.items.push({start:C}),this.stack.push(et);return}}}}yield*this.pop(),yield*this.step()}*blockSequence(e){var n;let R=e.items[e.items.length-1];switch(this.type){case"newline":if(R.value){let n="end"in R.value?R.value.end:void 0,C=Array.isArray(n)?n[n.length-1]:void 0;(null==C?void 0:C.type)==="comment"?null==n||n.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else R.start.push(this.sourceToken);return;case"space":case"comment":if(R.value)e.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(R.start,e.indent)){let C=e.items[e.items.length-2],et=null==(n=null==C?void 0:C.value)?void 0:n.end;if(Array.isArray(et)){Array.prototype.push.apply(et,R.start),et.push(this.sourceToken),e.items.pop();return}}R.start.push(this.sourceToken)}return;case"anchor":case"tag":if(R.value||this.indent<=e.indent)break;R.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==e.indent)break;R.value||sn(R.start,"seq-item-ind")?e.items.push({start:[this.sourceToken]}):R.start.push(this.sourceToken);return}if(this.indent>e.indent){let n=this.startBlockValue(e);if(n){this.stack.push(n);return}}yield*this.pop(),yield*this.step()}*flowCollection(e){let n=e.items[e.items.length-1];if("flow-error-end"===this.type){let e;do yield*this.pop(),e=this.peek(1);while(e&&"flow-collection"===e.type)}else if(0===e.end.length){switch(this.type){case"comma":case"explicit-key-ind":!n||n.sep?e.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return;case"map-value-ind":!n||n.value?e.items.push({start:[],key:null,sep:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):Object.assign(n,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":!n||n.value?e.items.push({start:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{let R=this.flowScalar(this.type);!n||n.value?e.items.push({start:[],key:R,sep:[]}):n.sep?this.stack.push(R):Object.assign(n,{key:R,sep:[]});return}case"flow-map-end":case"flow-seq-end":e.end.push(this.sourceToken);return}let R=this.startBlockValue(e);R?this.stack.push(R):(yield*this.pop(),yield*this.step())}else{let n=this.peek(2);if("block-map"!==n.type||("map-value-ind"!==this.type||n.indent!==e.indent)&&("newline"!==this.type||n.items[n.items.length-1].sep)){if("map-value-ind"===this.type&&"flow-collection"!==n.type){let R=rr(n),C=xn(R);Hs(e);let et=e.end.splice(1,e.end.length);et.push(this.sourceToken);let ei={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:C,key:e,sep:et}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=ei}else yield*this.lineEnd(e)}else yield*this.pop(),yield*this.step()}}flowScalar(e){if(this.onNewLine){let e=this.source.indexOf(`
`)+1;for(;0!==e;)this.onNewLine(this.offset+e),e=this.source.indexOf(`
`,e)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;let n=rr(e),R=xn(n);return R.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:R}]}}case"map-value-ind":{this.onKeyLine=!0;let n=rr(e),R=xn(n);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:R,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(e,n){return"comment"===this.type&&!(this.indent<=n)&&e.every(e=>"newline"===e.type||"space"===e.type)}*documentEnd(e){"doc-mode"!==this.type&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],"newline"===this.type&&(yield*this.pop()))}*lineEnd(e){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],"newline"===this.type&&(yield*this.pop())}}};function Da(e){let n=!1!==e.prettyErrors;return{lineCounter:e.lineCounter||n&&new ja||null,prettyErrors:n}}function Va(e,n={}){let{lineCounter:R,prettyErrors:C}=Da(n),et=new gs(null==R?void 0:R.addNewLine),ei=new _s(n),eo=null;for(let n of ei.compose(et.parse(e),!0,e.length))if(eo){if("silent"!==eo.options.logLevel){eo.errors.push(new kn(n.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}}else eo=n;return C&&R&&(eo.errors.forEach(dr(e,R)),eo.warnings.forEach(dr(e,R))),eo}let td=Object.freeze(Object.defineProperty({__proto__:null,Alias:br,CST:tu,Composer:_s,Document:Dn,Lexer:Ma,LineCounter:ja,Pair:Yt,Parser:gs,Scalar:Pt,Schema:Or,YAMLError:ps,YAMLMap:en,YAMLParseError:kn,YAMLSeq:mn,YAMLWarning:Ta,isAlias:wn,isCollection:Ht,isDocument:Bn,isMap:Cn,isNode:Kt,isPair:Gt,isScalar:Vt,isSeq:Mn,parse:function(e,n,R){let C;"function"==typeof n?C=n:void 0===R&&n&&"object"==typeof n&&(R=n);let et=Va(e,R);if(!et)return null;if(et.warnings.forEach(e=>la(et.options.logLevel,e)),et.errors.length>0){if("silent"!==et.options.logLevel)throw et.errors[0];et.errors=[]}return et.toJS(Object.assign({reviver:C},R))},parseAllDocuments:function(e,n={}){let{lineCounter:R,prettyErrors:C}=Da(n),et=new gs(null==R?void 0:R.addNewLine),ei=new _s(n),eo=Array.from(ei.compose(et.parse(e)));if(C&&R)for(let n of eo)n.errors.forEach(dr(e,R)),n.warnings.forEach(dr(e,R));return eo.length>0?eo:Object.assign([],{empty:!0},ei.streamInfo())},parseDocument:Va,stringify:function(e,n,R){let C=null;if("function"==typeof n||Array.isArray(n)?C=n:void 0===R&&n&&(R=n),"string"==typeof R&&(R=R.length),"number"==typeof R){let e=Math.round(R);R=e<1?void 0:e>8?{indent:8}:{indent:e}}if(void 0===e){let{keepUndefined:e}=R??n??{};if(!e)return}return new Dn(e,C,R).toString(R)},visit:gn,visitAsync:mr},Symbol.toStringTag,{value:"Module"}));function Ks(e){let n={},R={exports:{boot:void 0}},C={context:Function("exports","module","define",e)(n,R,void 0)};return void 0!==n.boot?C.boot=n.boot:void 0!==R.exports.boot?C.boot=R.exports.boot:"object"===C.context&&void 0!==C.context.boot&&(C.boot=C.context.boot),C}function Bo(e){return new Promise(async(n,R)=>{if(void 0!==e.header)return n(e.header);if(void 0===e.url)return R("failed to get header");let C=e.url.split("/").slice(-1)[0];C.endsWith(".yml")||C.endsWith(".yaml")||(C="header.yml"),console.log(`load header ${C}...`);let et=await e.gameServer.get(C);return e.header=td.parse(et),n(e.header)})}function Co(e){return new Promise(async n=>{if(void 0===e.boot)throw"no boot specified";if("function"==typeof e.boot)return n(e.boot);if("object"==typeof e.boot)return n(e.boot.boot);if(!e.boot.endsWith(".js")&&!e.boot.endsWith(".ts")){let R=e.boot===em||e.boot===eb,C=!0,et=window[e.boot];if(void 0===et){if(R&&(e.boot===em?e.boot="https://cdn.jsdelivr.net/npm/piximoroxel8ai/lib/umd/piximoroxel8ai.min.js":e.boot===eb&&(e.boot="https://cdn.jsdelivr.net/npm/moroxel8ai/lib/umd/moroxel8ai.min.js"),C=!1),C)throw`boot module ${e.boot} not found`}else if(void 0!==et.boot)return n(et.boot);if(C)throw`no boot function found in module ${e.boot}`}if(e.boot.startsWith("http")){let R=await fetch(e.boot);if(!R.ok)throw R.statusText;let C=await R.text(),et=Ks(C);if(void 0===et.boot)throw`no boot function found in ${e.boot}`;return e.context=et.context,n(et.boot)}let R=await e.gameServer.get(e.boot),C=Ks(R);if(void 0===C.boot)throw`no boot function found in ${e.boot}`;return e.context=C.context,n(C.boot)})}function Mo(e){return new Promise(async n=>{var R,C;if(void 0!==e.agent)return n(e.agent);let et=e.language,ei=e.script;if(void 0===ei){if(void 0===e.fileServer)throw"can't load agent without a file server";let n=e.fileServer.filename;if(void 0===n||n.endsWith(".zip")?n=eg[et="javascript"].main:void 0===et&&(et=function(e){let n=Object.entries(eg);for(let R=0;R<n.length;++R)if(n[R][1].extensions.some(n=>e.endsWith(n)))return n[R][0]}(n)),void 0===et)throw`unknown agent language for ${n}`;ei=await e.fileServer.get(n)}else void 0===et&&(et="javascript");let eo=eg[(C={baseUrl:(null==(R=e.fileServer)?void 0:R.baseUrl)??"",language:et,script:ei,api:e.api}).language].init(C);return n(eo)})}(et=eo||(eo={})).defaultPlugin=e=>({name:"default",loadHeader:Bo,loadBoot:Co,loadAgent:Mo}),et.injectHeader=e=>({name:"injectHeader",loadHeader:n=>new Promise((R,C)=>(n.header={...n.header??{},...e??{}},R(n.header)))});let $s=class $s{constructor(e){this._id=e.id,this._inputDevice=e.inputDevice,this._agent=e.agent}get id(){return this._id}get label(){return void 0!==this._agent?this._agent.label:void 0!==this._inputDevice?"human":"<>"}get isBound(){return void 0!==this._inputDevice}get isAgent(){return void 0!==this._agent}get isPlayer(){return this.isBound&&!this.isAgent}set agent(e){this._agent=e}get agent(){return this._agent}inputs(e){return void 0!==this._agent?this._agent.inputs(e):void 0!==this._inputDevice?this._inputDevice.inputs:{}}saveState(){var e;return(null==(e=this._agent)?void 0:e.saveState())??{}}loadState(e){var n;null==(n=this._agent)||n.loadState(e)}};let jo=class jo{constructor(e){this._controllers=new Map,this._controllersArray=[...e.controllers],this._controllersArray.forEach(e=>{this._controllers.set(e.id,e)})}get ids(){return[...this._controllers.keys()]}get controllers(){return this._controllers}get(e){return this._controllers.get(e)}inputs(e){return this._controllersArray.map(n=>({label:n.label,isBound:n.isBound,isPlayer:n.isPlayer,isAgent:n.isAgent,inputs:n.inputs(e)}))}saveState(){return this._controllersArray.map(e=>e.saveState())}loadState(e){e.forEach((e,n)=>{this._controllersArray[n].loadState(e)})}};let sr=class sr{constructor(e,n){this._el=document.createElement("div"),this._el.style.boxSizing="border-box",this._el.style.display="block",this._el.style.position="absolute",this._el.style.width="32px",this._el.style.height="32px",this._el.style.margin="4px",this._el.style.border="4px solid #fff",this._el.style.borderRadius="50%",this._el.style.animation="moroboxai-spinner-rotate 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite",this._el.style.borderColor="#fff transparent transparent transparent",void 0!==n&&(this._el.style.animationDelay=`-${n}s`),e.appendChild(this._el)}};let Fo=class Fo{constructor(e){this._el=document.createElement("div"),this._el.style.display="inline-block",this._el.style.position="relative",this._el.style.width="40px",this._el.style.height="40px",new sr(this._el,.45),new sr(this._el,.3),new sr(this._el,.15),new sr(this._el),e.appendChild(this._el);let n=document.getElementById("moroboxai-dynamic-style");n||((n=document.createElement("style")).id="moroboxai-dynamic-style",document.body.appendChild(n)),n.innerHTML=`@keyframes moroboxai-spinner-rotate {
   0% {
      transform: rotate(0deg);
   }
   100% {
      transform: rotate(360deg);
   }
}`}remove(){this._el.remove()}};let ms=class ms{get style(){return this.el.style}constructor(e){this.el=document.createElement("div"),this.el.style.width="100%",this.el.style.height="100%",this.el.style.position="absolute",this.el.style.left="0",this.el.style.top="0",this.el.style.display="flex",this.el.style.flexDirection="column",this.el.style.justifyContent="center",this.el.style.alignItems="center",e.appendChild(this.el)}show(){this.el.style.display="flex"}hide(){this.el.style.display="none"}remove(){this.el.remove()}};let Do=class Do{constructor(e){this._overlay=new ms(e),this._input=document.createElement("input"),this._input.type="button",this._input.value="Play",this._input.onclick=()=>{this.onPlay&&this.onPlay()},this._overlay.el.appendChild(this._input),e.appendChild(this._overlay.el)}show(){this._overlay.show()}hide(){this._overlay.hide()}mouseEnter(){}mouseMove(){}mouseLeave(){}remove(){this._overlay.remove()}};let Vo=class Vo{constructor(e){this._overlay=new ms(e),this._overlay.style.backgroundColor="black",new Fo(this._overlay.el),e.appendChild(this._overlay.el)}show(){this._overlay.show()}hide(){this._overlay.hide()}mouseEnter(){}mouseMove(){}mouseLeave(){}remove(){this._overlay.remove()}};let Go=class Go{constructor(e){this._overlay=new ms(e),this._speed1=document.createElement("input"),this._speed1.type="button",this._speed1.value="x1",this._speed1.onclick=()=>{this.onSpeed&&this.onSpeed(1)},this._speed2=document.createElement("input"),this._speed2.type="button",this._speed2.value="x2",this._speed2.onclick=()=>{this.onSpeed&&this.onSpeed(2)},this._speed4=document.createElement("input"),this._speed4.type="button",this._speed4.value="x4",this._speed4.onclick=()=>{this.onSpeed&&this.onSpeed(4)},this._overlay.el.appendChild(this._speed1),this._overlay.el.appendChild(this._speed2),this._overlay.el.appendChild(this._speed4),this._overlay.hide(),e.appendChild(this._overlay.el)}playing(){}paused(){}show(){this._overlay.show()}hide(){this._overlay.hide()}mouseEnter(){this.show()}mouseMove(){}mouseLeave(){this.hide()}remove(){this._overlay.remove()}};let zo=class zo{constructor(e){this._root=e,this._playOverlay=new Do(e),this._selectedOverlay=this._playOverlay,this._playOverlay.onPlay=()=>{this.onPlay&&this.onPlay()},this._loadingOverlay=new Vo(this._root),this._loadingOverlay.hide(),this._settingsOverlay=new Go(this._root),this._settingsOverlay.hide(),this._settingsOverlay.onSpeed=e=>{this.onSpeed&&this.onSpeed(e)}}stopped(){this._selectedOverlay.hide(),this._selectedOverlay=this._playOverlay,this._playOverlay.show()}loading(){this._playOverlay.hide(),this._selectedOverlay=this._loadingOverlay,this._loadingOverlay.show()}playing(){this._loadingOverlay.hide(),this._selectedOverlay=this._settingsOverlay,this._settingsOverlay.hide(),this._settingsOverlay.playing()}paused(){this._settingsOverlay.paused()}show(){}hide(){}mouseEnter(){this._selectedOverlay.mouseEnter()}mouseMove(){this._selectedOverlay.mouseMove()}mouseLeave(){this._selectedOverlay.mouseLeave()}remove(){this._playOverlay.remove(),this._loadingOverlay.remove(),this._settingsOverlay.remove()}};let Ho=class Ho{constructor(e){this._options=e;{let e=document.createElement("div");this._wrapper=e,e.addEventListener("mouseenter",()=>this._onMouseEnter()),e.addEventListener("mousemove",()=>this._onMouseMove()),e.addEventListener("mouseleave",()=>this._onMouseLeave()),"fill"===this._options.stretchMode&&(e.style.width="100%"),e.style.height="100%",e.style.position="relative",e.style.backgroundPosition="center",e.style.backgroundSize="cover",e.style.backgroundColor="black",this._options.element.appendChild(e)}{let e=document.createElement("div");this.gameRoot=e,e.style.width="100%",e.style.height="100%",e.style.position="absolute",e.style.left="0",e.style.top="0",e.style.display="flex",e.style.flexDirection="row",e.style.justifyContent="center",this._wrapper.appendChild(e)}this._overlay=new zo(this._wrapper),this._overlay.onPlay=()=>this._options.onPlay(),this._overlay.onSpeed=e=>this._options.onSpeedSelected(e)}get width(){return this._wrapper.clientWidth}get height(){return this._wrapper.clientHeight}set backgroundImage(e){this._wrapper.style.backgroundImage=e??""}_onMouseEnter(){this._overlay&&this._overlay.mouseEnter()}_onMouseMove(){this._overlay&&this._overlay.mouseMove()}_onMouseLeave(){this._overlay&&this._overlay.mouseLeave()}playing(){this._overlay.playing()}paused(){this._overlay.paused()}stopped(){this._overlay.stopped()}loading(){this._overlay.loading()}resize(e){let{width:n,height:R,aspectRatio:C}=e;this._wrapper.style.aspectRatio=C;let et=this._options.element;"number"==typeof n?et.style.width=`${Math.round(n)}px`:"string"==typeof n&&(et.style.width=n),"number"==typeof R?et.style.height=`${Math.round(R)}px`:"string"==typeof R&&(et.style.height=R)}remove(){this._overlay.remove(),this._wrapper.remove()}};let Ko=class Ko{constructor(e){this._server=e}get url(){return this._server.url}get baseUrl(){return this._server.baseUrl}get filename(){return this._server.filename}href(e){return this._server.href(e)}get(e){return this._server.get(e)}ready(e){this._server.ready(e)}close(e){this._server.close(e)}};let Yo=class Yo{constructor(e){this._isDone=!1,this._cancelRequested=!1,this.options=e}loadHeader(){return new Promise(async e=>{var n,R;console.log("start game server..."),this.gameServer=await (n=this.options.sdkConfig,R=this.options.url,new Promise(e=>{let C=n.fileServerFactory(R),et=new Ko(C);et.ready(()=>e(et))})),console.log("game server started"),console.log("load game header...");let C=await this.options.pluginDriver.hookReduceArg0("loadHeader",[{url:this.options.url,gameServer:this.gameServer}],(e,n,R)=>(null!==n&&(e.header=n),e));if(this.header=C.header,void 0===this.header)throw"could not load game header";return console.log("game header loaded",this.header),e()}).then(()=>{if(this._isDone=!0,this._cancelRequested){this.cancel();return}void 0!==this.options.onHeaderLoaded&&this.options.onHeaderLoaded(this)}).catch(e=>{this._isDone=!0,this.error=e,this.cancel(),void 0!==this.options.onHeaderError&&this.options.onHeaderError(this)})}loadGame(){return new Promise(async e=>{if(void 0===this.gameServer||void 0===this.header)throw"no game server or header";let n=this.options.boot??this.header.boot;if(void 0===n)throw"missing boot parameter in game header";console.log("load game boot...");let R={boot:n,gameServer:this.gameServer},C=await this.options.pluginDriver.hookReduceArg0("loadBoot",[R],(e,n,R)=>(null!==n&&(e.boot=n),e));if(!C||void 0===C.boot||"function"!=typeof C.boot)throw"could not load game boot";return console.log("game boot loaded",C.boot),this.context=C.context,this.boot=C.boot,console.log("boot the game..."),this.game=await C.boot({vm:this.options.vm}),console.log("game booted"),e()}).then(()=>{if(this._isDone=!0,this._cancelRequested){this.cancel();return}void 0!==this.options.onGameLoaded&&this.options.onGameLoaded(this)}).catch(e=>{this._isDone=!0,this.error=e,this.cancel(),void 0!==this.options.onGameError&&this.options.onGameError(this)})}cancel(){if(!this._isDone){this._cancelRequested=!0;return}void 0!==this.gameServer&&(this.gameServer.close(),this.gameServer=void 0)}};function Xs(e){return void 0!==e.url||void 0!==e.script}let Zo=class Zo{constructor(e){this._isDone=!1,this._cancelRequested=!1,this.options=e}loadAgent(){return new Promise(e=>{if(!Xs(this.options.options)||null==this.options.options.url)return e();console.log("start file server for agent..."),this.fileServer=this.options.sdkConfig.fileServerFactory(this.options.options.url),this.fileServer.ready(()=>e())}).then(async()=>{if(!Xs(this.options.options)){this.agent=this.options.options;return}console.log("file server for agent started"),console.log("load agent...");let e=await this.options.pluginDriver.hookReduceArg0("loadAgent",[{fileServer:this.fileServer,language:this.options.options.language,script:this.options.options.script,api:this.options.api}],(e,n,R)=>(null!==n&&(e.agent=n),e));if(this.agent=e.agent,void 0===this.agent)throw"could not load agent"}).then(()=>{if(console.log("agent loaded",this.agent),this._isDone=!0,this._cancelRequested){this.cancel();return}void 0!==this.options.onAgentLoaded&&this.options.onAgentLoaded(this)}).catch(e=>{this._isDone=!0,this.error=e,this.cancel(),void 0!==this.options.onAgentError&&this.options.onAgentError(this)})}cancel(){if(!this._isDone){this._cancelRequested=!0;return}void 0!==this.fileServer&&(this.fileServer.close(),this.fileServer=void 0)}};let Jo=class Jo{require(e){throw Error("Method not implemented.")}};let Qo=class Qo{constructor(e,n,R){if(this._state=0,this._loadAgentTask=new Map,this._speed=1,this._physicsAccumulator=0,this._frame=0,this._time=0,this._sdkConfig=e,this._options=R,this._pluginDriver=new Wa({player:this,vm:this},[eo.defaultPlugin(),...void 0!==this._options.plugins?this._options.plugins:[]]),this._agentApi=new Jo,this._controllerBus=new jo({controllers:[new $s({id:0,inputDevice:e.inputDeviceFactory()}),new $s({id:1})]}),void 0!==R.agents){Array.isArray(R.agents)||(R.agents=[R.agents]);let e=Array.from(this._controllerBus.controllers.values()),n=0;for(let C=0;C<e.length;++C)this.loadAgent(e[C].id,R.agents[n]),n=Math.min(n+1,R.agents.length-1)}this._tickFromGame=this._tickFromGame.bind(this),void 0!==this._options.onReady&&(this._readyCallback=this._options.onReady),"dataset"in n&&(this._options={...R},void 0===this._options.url&&void 0!==n.dataset.url&&(this._options.url=n.dataset.url),this._attachUi(n),this.play({url:this._options.url}))}get isLoading(){return 1==this._state}get isPlaying(){return 3==this._state}get isPaused(){return 4==this._state}_attachUi(e){this._ui=new Ho({element:e,stretchMode:this._options.stretchMode,onPlay:()=>this.play(),onSpeedSelected:e=>{this.speed=e}}),this.resize(),this._resizeListener=()=>this._onResize(),window.addEventListener("resize",this._resizeListener)}_notifyReady(){void 0!==this._readyCallback&&this._readyCallback()}_loadHeader(e){var n,R;this._options.url=e.url,null==(n=this._loadGameTask)||n.cancel(),this.stop(),this._state=1,null==(R=this._ui)||R.loading(),this._loadGameTask=new Yo({url:this.url,boot:this._options.boot,sdkConfig:this._sdkConfig,pluginDriver:this._pluginDriver,vm:this,onHeaderLoaded:n=>{var R;this._gameServer=n.gameServer,this._header=n.header,this.resize(),void 0!==this._ui&&(this._ui.backgroundImage=void 0!==this._header.previewUrl?`url('${this._gameServer.href(this._header.previewUrl)}')`:""),(e.autoPlay??this._options.autoPlay)===!0?this._play():(this._state=0,null==(R=this._ui)||R.stopped())},onHeaderError:e=>{void 0!==e.error&&console.error(e.error)},onGameLoaded:e=>{this._game=e.game,this._game.ticker=this._tickFromGame,this.resize(),this._ready()},onGameError:e=>{void 0!==e.error&&console.error(e.error)}}),this._loadGameTask.loadHeader()}_play(){var e;if(4===this._state){this._state=3,null==(e=this._ui)||e.playing(),void 0!==this._game&&this._game.play();return}if(void 0===this._loadGameTask)throw"player not ready for play";if(this._state=1,this._startLoadingDate=new Date,void 0===this._ui)throw"no player UI";this._ui.loading(),this._ui.backgroundImage=void 0,this._loadGameTask.loadGame()}get player(){return this}get vm(){return this}get root(){return this._ui.gameRoot}get gameServer(){var e;return null==(e=this._loadGameTask)?void 0:e.gameServer}_nativeGameSize(){var e,n,R;let C=null==(e=this._header)?void 0:e.width,et=null==(n=this._header)?void 0:n.height;if(void 0!==C&&void 0!==et)return{width:C,height:et};let ei=(null==(R=this.header)?void 0:R.aspectRatio)??"1/1",[eo,el]=ei.split("/").map(e=>parseInt(e));return void 0!==C?{width:C,height:C*el/eo}:void 0!==et?{width:et*eo/el,height:et}:{width:256,height:256}}_optimalPlayerSize(){let e=this._nativeGameSize(),n=this.scale/this.gameScale;return{width:e.width*n,height:e.height*n}}resize(e,n){var R;if(void 0!==e){"object"==typeof e?(this._options.width=e.width,this._options.height=e.height):(this._options.width=e,this._options.height=n),this.resize();return}let C=this._optimalPlayerSize(),et="fixed"===this.stretchMode,ei=this._options.width??(et?C.width:void 0),eo=this._options.height??(et?C.height:void 0);null==(R=this._ui)||R.resize({width:ei,height:eo,aspectRatio:`${C.width}/${C.height}`}),this._onResize()}_onResize(){void 0!==this._game&&this._game.resize()}get onReady(){return this._readyCallback}set onReady(e){this._readyCallback=e,this.isPlaying&&this._notifyReady()}_ready(){if(1!=this._state)return;this._state=2;let e=1e3-(+new Date-+this._startLoadingDate);if(e>0){setTimeout(()=>this._ready_after_loading(),e);return}this._ready_after_loading()}_ready_after_loading(){var e;2===this._state&&(this._state=3,void 0!==this._game&&(this.scale=this._options.scale??1),null==(e=this._ui)||e.playing(),this._game&&this._game.play(),this._notifyReady())}getController(e){return this._controllerBus.get(e)}loadAgent(e,n){var R;null==(R=this._loadAgentTask.get(e))||R.cancel();let C=new Zo({options:n,sdkConfig:this._sdkConfig,pluginDriver:this._pluginDriver,api:this._agentApi,onAgentLoaded:n=>{let R=this.getController(e);void 0!==R&&(R.agent=n.agent)},onAgentError:e=>{void 0!==e.error&&console.error(e.error)}});return this._loadAgentTask.set(e,C),C.loadAgent()}unloadAgent(e){let n=this.getController(e);void 0!==n&&(n.agent=void 0)}get width(){var e;return(null==(e=this._ui)?void 0:e.width)??0}set width(e){this.resize({width:e})}get height(){var e;return(null==(e=this._ui)?void 0:e.height)??0}set height(e){this.resize({height:e})}get scale(){return this._options.scale??1}set scale(e){this._options.scale=e,this.resize()}get stretchMode(){return this._options.stretchMode??"fixed"}set stretchMode(e){this._options.stretchMode=e,this.resize()}get gameWidth(){return this._nativeGameSize().width}get gameHeight(){return this._nativeGameSize().height}get gameScale(){var e;return(null==(e=this._header)?void 0:e.scale)??1}get gameAspectRatio(){var e;return(null==(e=this._header)?void 0:e.aspectRatio)??"1/1"}get resizable(){return!0===this._options.resizable}set resizable(e){this._options.resizable=e}get speed(){return this._speed}set speed(e){this._speed=e}get url(){return this._options.url}set url(e){this._loadHeader({url:e})}get boot(){return this._options.boot}set boot(e){this._options.boot=e}get header(){var e;return null==(e=this._loadGameTask)?void 0:e.header}get autoPlay(){return!0===this._options.autoPlay}set autoPlay(e){this._options.autoPlay=e}get simulated(){return!0===this._options.simulated}set simulated(e){this._options.simulated=e}get frame(){return this._frame}get time(){return this._time}play(e){if("object"==typeof e){this._loadHeader({url:e.url,autoPlay:e.autoPlay});return}if(void 0!==e){this._loadHeader({url:e});return}this._play()}pause(){var e;this.isPlaying&&(void 0!==this._game&&this._game.pause(),null==(e=this._ui)||e.paused(),this._state=4)}stop(){var e;void 0!==this._game&&(this._game.stop(),this._game=void 0),null==(e=this._ui)||e.stopped(),void 0!==this._gameServer&&(this._gameServer.close(),this._gameServer=void 0),this._loadGameTask=void 0,this._speed=1,this._state=0}reload(){this.stop(),this.play()}remove(){this.stop(),void 0!==this._resizeListener&&window.removeEventListener("resize",this._resizeListener),void 0!==this._ui&&(this._ui.remove(),this._ui=void 0)}saveState(){var e;return{isGameOver:!1,physicsAccumulator:this._physicsAccumulator,game:null==(e=this._game)?void 0:e.saveState(),controllers:this._controllerBus.saveState()}}loadState(e){var n;this._physicsAccumulator=(null==e?void 0:e.physicsAccumulator)??0,null==(n=this._game)||n.loadState(null==e?void 0:e.game),this._controllerBus.loadState((null==e?void 0:e.controllers)??[{},{}])}_tickFromGame(e){if(void 0!==this.ticker){this.ticker(e);return}this.simulated||this.tick(e)}tick(e){if(void 0!==this._game){for(this._physicsAccumulator+=e*this.speed;this._physicsAccumulator>.01;)this._tickOneFrame(.01,!1),this._physicsAccumulator-=.01;this._tickOneFrame(.01,!0),this._game.saveState().isGameOver&&this._game.loadState()}}_tickOneFrame(e,n){if(void 0===this._game)return;this._time+=e,this._frame++;let R=this._game.getStateForAgent();this._game.tick(this._controllerBus.inputs(R),e,n)}};function Ga(e){return"length"in e}let rl=class rl{constructor(){this._inputs={left:!1,right:!1,up:!1,down:!1},this._keyDownListener=e=>this._onKey(e,!0),this._keyUpListener=e=>this._onKey(e,!1),document.addEventListener("keydown",this._keyDownListener,!1),document.addEventListener("keyup",this._keyUpListener,!1)}_onKey(e,n){"ArrowDown"===e.code||"KeyS"===e.code?("ArrowDown"===e.code&&e.preventDefault(),this._inputs.down=n):"ArrowUp"===e.code||"KeyW"===e.code?("ArrowUp"===e.code&&e.preventDefault(),this._inputs.up=n):"ArrowLeft"===e.code||"KeyA"===e.code?("ArrowLeft"===e.code&&e.preventDefault(),this._inputs.left=n):("ArrowRight"===e.code||"KeyD"===e.code)&&("ArrowRight"===e.code&&e.preventDefault(),this._inputs.right=n)}remove(){document.removeEventListener("keydown",this._keyDownListener),document.removeEventListener("keyup",this._keyUpListener)}get inputs(){return this._inputs}};var t_="u">typeof globalThis?globalThis:"u">typeof window?window:"u">typeof R.g?R.g:"u">typeof self?self:{};function or(e){throw Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var tg={exports:{}};tg.exports=(function t(e,n,R){function i(et,ei){if(!n[et]){if(!e[et]){if(!ei&&or)return or(et,!0);if(C)return C(et,!0);var eo=Error("Cannot find module '"+et+"'");throw eo.code="MODULE_NOT_FOUND",eo}var el=n[et]={exports:{}};e[et][0].call(el.exports,function(n){return i(e[et][1][n]||n)},el,el.exports,t,e,n,R)}return n[et].exports}for(var C=or,et=0;et<R.length;et++)i(R[et]);return i})({1:[function(e,n,R){var C=e("./utils"),et=e("./support"),ei="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";R.encode=function(e){for(var n,R,et,eo,el,eu,ec,ef=[],eh=0,ep=e.length,ed=ep,e_="string"!==C.getTypeOf(e);eh<e.length;)ed=ep-eh,et=e_?(n=e[eh++],R=eh<ep?e[eh++]:0,eh<ep?e[eh++]:0):(n=e.charCodeAt(eh++),R=eh<ep?e.charCodeAt(eh++):0,eh<ep?e.charCodeAt(eh++):0),eo=n>>2,el=(3&n)<<4|R>>4,eu=1<ed?(15&R)<<2|et>>6:64,ec=2<ed?63&et:64,ef.push(ei.charAt(eo)+ei.charAt(el)+ei.charAt(eu)+ei.charAt(ec));return ef.join("")},R.decode=function(e){var n,R,C,eo,el,eu,ec=0,ef=0,eh="data:";if(e.substr(0,eh.length)===eh)throw Error("Invalid base64 input, it looks like a data url.");var ep,ed=3*(e=e.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(e.charAt(e.length-1)===ei.charAt(64)&&ed--,e.charAt(e.length-2)===ei.charAt(64)&&ed--,ed%1!=0)throw Error("Invalid base64 input, bad content length.");for(ep=et.uint8array?new Uint8Array(0|ed):Array(0|ed);ec<e.length;)n=ei.indexOf(e.charAt(ec++))<<2|(eo=ei.indexOf(e.charAt(ec++)))>>4,R=(15&eo)<<4|(el=ei.indexOf(e.charAt(ec++)))>>2,C=(3&el)<<6|(eu=ei.indexOf(e.charAt(ec++))),ep[ef++]=n,64!==el&&(ep[ef++]=R),64!==eu&&(ep[ef++]=C);return ep}},{"./support":30,"./utils":32}],2:[function(e,n,R){var C=e("./external"),et=e("./stream/DataWorker"),ei=e("./stream/Crc32Probe"),eo=e("./stream/DataLengthProbe");function h(e,n,R,C,et){this.compressedSize=e,this.uncompressedSize=n,this.crc32=R,this.compression=C,this.compressedContent=et}h.prototype={getContentWorker:function(){var e=new et(C.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new eo("data_length")),n=this;return e.on("end",function(){if(this.streamInfo.data_length!==n.uncompressedSize)throw Error("Bug : uncompressed data size mismatch")}),e},getCompressedWorker:function(){return new et(C.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},h.createWorkerFrom=function(e,n,R){return e.pipe(new ei).pipe(new eo("uncompressedSize")).pipe(n.compressWorker(R)).pipe(new eo("compressedSize")).withStreamInfo("compression",n)},n.exports=h},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,n,R){var C=e("./stream/GenericWorker");R.STORE={magic:"\x00\x00",compressWorker:function(){return new C("STORE compression")},uncompressWorker:function(){return new C("STORE decompression")}},R.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,n,R){var C=e("./utils"),et=function(){for(var e,n=[],R=0;R<256;R++){e=R;for(var C=0;C<8;C++)e=1&e?3988292384^e>>>1:e>>>1;n[R]=e}return n}();n.exports=function(e,n){return void 0!==e&&e.length?"string"!==C.getTypeOf(e)?function(e,n,R,C){var ei=C+R;e^=-1;for(var eo=C;eo<ei;eo++)e=e>>>8^et[255&(e^n[eo])];return -1^e}(0|n,e,e.length,0):function(e,n,R,C){var ei=C+R;e^=-1;for(var eo=C;eo<ei;eo++)e=e>>>8^et[255&(e^n.charCodeAt(eo))];return -1^e}(0|n,e,e.length,0):0}},{"./utils":32}],5:[function(e,n,R){R.base64=!1,R.binary=!1,R.dir=!1,R.createFolders=!0,R.date=null,R.compression=null,R.compressionOptions=null,R.comment=null,R.unixPermissions=null,R.dosPermissions=null},{}],6:[function(e,n,R){var C=null;C="u">typeof Promise?Promise:e("lie"),n.exports={Promise:C}},{lie:37}],7:[function(e,n,R){var C="u">typeof Uint8Array&&"u">typeof Uint16Array&&"u">typeof Uint32Array,et=e("pako"),ei=e("./utils"),eo=e("./stream/GenericWorker"),el=C?"uint8array":"array";function A(e,n){eo.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=n,this.meta={}}R.magic="\b\x00",ei.inherits(A,eo),A.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(ei.transformTo(el,e.data),!1)},A.prototype.flush=function(){eo.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},A.prototype.cleanUp=function(){eo.prototype.cleanUp.call(this),this._pako=null},A.prototype._createPako=function(){this._pako=new et[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(n){e.push({data:n,meta:e.meta})}},R.compressWorker=function(e){return new A("Deflate",e)},R.uncompressWorker=function(){return new A("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,n,R){function a(e,n){var R,C="";for(R=0;R<n;R++)C+=String.fromCharCode(255&e),e>>>=8;return C}function i(e,n,R,et,eu,ec){var ef,eh,ep,ed,e_=e.file,eg=e.compression,em=ec!==ei.utf8encode,eb=C.transformTo("string",ec(e_.name)),ey=C.transformTo("string",ei.utf8encode(e_.name)),ev=e_.comment,ek=C.transformTo("string",ec(ev)),eA=C.transformTo("string",ei.utf8encode(ev)),eL=ey.length!==e_.name.length,ex=eA.length!==ev.length,ew="",eT="",eO="",eE=e_.dir,eS=e_.date,eN={crc32:0,compressedSize:0,uncompressedSize:0};n&&!R||(eN.crc32=e.crc32,eN.compressedSize=e.compressedSize,eN.uncompressedSize=e.uncompressedSize);var eI=0;n&&(eI|=8),!em&&(eL||ex)&&(eI|=2048);var eU=0,eR=0;eE&&(eU|=16),"UNIX"===eu?(eR=798,eU|=(eh=ef=e_.unixPermissions,ef||(eh=eE?16893:33204),(65535&eh)<<16)):(eR=20,eU|=63&(e_.dosPermissions||0)),ep=(eS.getUTCHours()<<6|eS.getUTCMinutes())<<5|eS.getUTCSeconds()/2,ed=(eS.getUTCFullYear()-1980<<4|eS.getUTCMonth()+1)<<5|eS.getUTCDate(),eL&&(eT=a(1,1)+a(eo(eb),4)+ey,ew+="up"+a(eT.length,2)+eT),ex&&(eO=a(1,1)+a(eo(ek),4)+eA,ew+="uc"+a(eO.length,2)+eO);var eC="";return eC+=`
\0`+a(eI,2)+eg.magic+a(ep,2)+a(ed,2)+a(eN.crc32,4)+a(eN.compressedSize,4)+a(eN.uncompressedSize,4)+a(eb.length,2)+a(ew.length,2),{fileRecord:el.LOCAL_FILE_HEADER+eC+eb+ew,dirRecord:el.CENTRAL_FILE_HEADER+a(eR,2)+eC+a(ek.length,2)+"\x00\x00\x00\x00"+a(eU,4)+a(et,4)+eb+ew+ek}}var C=e("../utils"),et=e("../stream/GenericWorker"),ei=e("../utf8"),eo=e("../crc32"),el=e("../signature");function L(e,n,R,C){et.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=n,this.zipPlatform=R,this.encodeFileName=C,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}C.inherits(L,et),L.prototype.push=function(e){var n=e.meta.percent||0,R=this.entriesCount,C=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,et.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:R?(n+100*(R-C-1))/R:100}}))},L.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var n=this.streamFiles&&!e.file.dir;if(n){var R=i(e,n,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:R.fileRecord,meta:{percent:0}})}else this.accumulate=!0},L.prototype.closedSource=function(e){this.accumulate=!1;var n=this.streamFiles&&!e.file.dir,R=i(e,n,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(R.dirRecord),n)this.push({data:el.DATA_DESCRIPTOR+a(e.crc32,4)+a(e.compressedSize,4)+a(e.uncompressedSize,4),meta:{percent:100}});else for(this.push({data:R.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},L.prototype.flush=function(){for(var e,n,R,et,ei=this.bytesWritten,eo=0;eo<this.dirRecords.length;eo++)this.push({data:this.dirRecords[eo],meta:{percent:100}});var eu=this.bytesWritten-ei,ec=(e=this.dirRecords.length,n=this.zipComment,R=this.encodeFileName,et=C.transformTo("string",R(n)),el.CENTRAL_DIRECTORY_END+"\x00\x00\x00\x00"+a(e,2)+a(e,2)+a(eu,4)+a(ei,4)+a(et.length,2)+et);this.push({data:ec,meta:{percent:100}})},L.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},L.prototype.registerPrevious=function(e){this._sources.push(e);var n=this;return e.on("data",function(e){n.processChunk(e)}),e.on("end",function(){n.closedSource(n.previous.streamInfo),n._sources.length?n.prepareNextSource():n.end()}),e.on("error",function(e){n.error(e)}),this},L.prototype.resume=function(){return!!et.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},L.prototype.error=function(e){var n=this._sources;if(!et.prototype.error.call(this,e))return!1;for(var R=0;R<n.length;R++)try{n[R].error(e)}catch{}return!0},L.prototype.lock=function(){et.prototype.lock.call(this);for(var e=this._sources,n=0;n<e.length;n++)e[n].lock()},n.exports=L},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,n,R){var C=e("../compressions"),et=e("./ZipFileWorker");R.generateWorker=function(e,n,R){var ei=new et(n.streamFiles,R,n.platform,n.encodeFileName),eo=0;try{e.forEach(function(e,R){eo++;var et=function(e,n){var R=e||n,et=C[R];if(!et)throw Error(R+" is not a valid compression method !");return et}(R.options.compression,n.compression),el=R.options.compressionOptions||n.compressionOptions||{},eu=R.dir,ec=R.date;R._compressWorker(et,el).withStreamInfo("file",{name:e,dir:eu,date:ec,comment:R.comment||"",unixPermissions:R.unixPermissions,dosPermissions:R.dosPermissions}).pipe(ei)}),ei.entriesCount=eo}catch(e){ei.error(e)}return ei}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,n,R){function a(){if(!(this instanceof a))return new a;if(arguments.length)throw Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new a;for(var n in this)"function"!=typeof this[n]&&(e[n]=this[n]);return e}}(a.prototype=e("./object")).loadAsync=e("./load"),a.support=e("./support"),a.defaults=e("./defaults"),a.version="3.10.1",a.loadAsync=function(e,n){return new a().loadAsync(e,n)},a.external=e("./external"),n.exports=a},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,n,R){var C=e("./utils"),et=e("./external"),ei=e("./utf8"),eo=e("./zipEntries"),el=e("./stream/Crc32Probe"),eu=e("./nodejsUtils");n.exports=function(e,n){var R=this;return n=C.extend(n||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:ei.utf8decode}),eu.isNode&&eu.isStream(e)?et.Promise.reject(Error("JSZip can't accept a stream when loading a zip file.")):C.prepareContent("the loaded zip file",e,!0,n.optimizedBinaryString,n.base64).then(function(e){var R=new eo(n);return R.load(e),R}).then(function(e){var R=[et.Promise.resolve(e)],C=e.files;if(n.checkCRC32)for(var ei=0;ei<C.length;ei++)R.push(function(e){return new et.Promise(function(n,R){var C=e.decompressed.getContentWorker().pipe(new el);C.on("error",function(e){R(e)}).on("end",function(){C.streamInfo.crc32!==e.decompressed.crc32?R(Error("Corrupted zip : CRC32 mismatch")):n()}).resume()})}(C[ei]));return et.Promise.all(R)}).then(function(e){for(var et=e.shift(),ei=et.files,eo=0;eo<ei.length;eo++){var el=ei[eo],eu=el.fileNameStr,ec=C.resolve(el.fileNameStr);R.file(ec,el.decompressed,{binary:!0,optimizedBinaryString:!0,date:el.date,dir:el.dir,comment:el.fileCommentStr.length?el.fileCommentStr:null,unixPermissions:el.unixPermissions,dosPermissions:el.dosPermissions,createFolders:n.createFolders}),el.dir||(R.file(ec).unsafeOriginalName=eu)}return et.zipComment.length&&(R.comment=et.zipComment),R})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,n,R){var C=e("../utils"),et=e("../stream/GenericWorker");function l(e,n){et.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(n)}C.inherits(l,et),l.prototype._bindStream=function(e){var n=this;(this._stream=e).pause(),e.on("data",function(e){n.push({data:e,meta:{percent:0}})}).on("error",function(e){n.isPaused?this.generatedError=e:n.error(e)}).on("end",function(){n.isPaused?n._upstreamEnded=!0:n.end()})},l.prototype.pause=function(){return!!et.prototype.pause.call(this)&&(this._stream.pause(),!0)},l.prototype.resume=function(){return!!et.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=l},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,n,R){var C=e("readable-stream").Readable;function i(e,n,R){C.call(this,n),this._helper=e;var et=this;e.on("data",function(e,n){et.push(e)||et._helper.pause(),R&&R(n)}).on("error",function(e){et.emit("error",e)}).on("end",function(){et.push(null)})}e("../utils").inherits(i,C),i.prototype._read=function(){this._helper.resume()},n.exports=i},{"../utils":32,"readable-stream":16}],14:[function(e,n,R){n.exports={isNode:"u">typeof ec,newBufferFrom:function(e,n){if(ec.from&&ec.from!==Uint8Array.from)return ec.from(e,n);if("number"==typeof e)throw Error('The "data" argument must not be a number');return new ec(e,n)},allocBuffer:function(e){if(ec.alloc)return ec.alloc(e);var n=new ec(e);return n.fill(0),n},isBuffer:function(e){return ec.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,n,R){function a(e,n,R){var C,eo=et.getTypeOf(n),ef=et.extend(R||{},el);ef.date=ef.date||new Date,null!==ef.compression&&(ef.compression=ef.compression.toUpperCase()),"string"==typeof ef.unixPermissions&&(ef.unixPermissions=parseInt(ef.unixPermissions,8)),ef.unixPermissions&&16384&ef.unixPermissions&&(ef.dir=!0),ef.dosPermissions&&16&ef.dosPermissions&&(ef.dir=!0),ef.dir&&(e=b(e)),ef.createFolders&&(C=m(e))&&N.call(this,C,!0);var ed="string"===eo&&!1===ef.binary&&!1===ef.base64;R&&void 0!==R.binary||(ef.binary=!ed),(n instanceof eu&&0===n.uncompressedSize||ef.dir||!n||0===n.length)&&(ef.base64=!1,ef.binary=!0,n="",ef.compression="STORE",eo="string");var e_=null;e_=n instanceof eu||n instanceof ei?n:eh.isNode&&eh.isStream(n)?new ep(e,n):et.prepareContent(e,n,ef.binary,ef.optimizedBinaryString,ef.base64);var eg=new ec(e,e_,ef);this.files[e]=eg}var C=e("./utf8"),et=e("./utils"),ei=e("./stream/GenericWorker"),eo=e("./stream/StreamHelper"),el=e("./defaults"),eu=e("./compressedObject"),ec=e("./zipObject"),ef=e("./generate"),eh=e("./nodejsUtils"),ep=e("./nodejs/NodejsStreamInputAdapter"),m=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var n=e.lastIndexOf("/");return 0<n?e.substring(0,n):""},b=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},N=function(e,n){return n=void 0!==n?n:el.createFolders,e=b(e),this.files[e]||a.call(this,e,null,{dir:!0,createFolders:n}),this.files[e]};function M(e){return"[object RegExp]"===Object.prototype.toString.call(e)}n.exports={load:function(){throw Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var n,R,C;for(n in this.files)C=this.files[n],(R=n.slice(this.root.length,n.length))&&n.slice(0,this.root.length)===this.root&&e(R,C)},filter:function(e){var n=[];return this.forEach(function(R,C){e(R,C)&&n.push(C)}),n},file:function(e,n,R){if(1!=arguments.length)return e=this.root+e,a.call(this,e,n,R),this;if(M(e)){var C=e;return this.filter(function(e,n){return!n.dir&&C.test(e)})}var et=this.files[this.root+e];return et&&!et.dir?et:null},folder:function(e){if(!e)return this;if(M(e))return this.filter(function(n,R){return R.dir&&e.test(n)});var n=this.root+e,R=N.call(this,n),C=this.clone();return C.root=R.name,C},remove:function(e){e=this.root+e;var n=this.files[e];if(n||("/"!==e.slice(-1)&&(e+="/"),n=this.files[e]),n&&!n.dir)delete this.files[e];else for(var R=this.filter(function(n,R){return R.name.slice(0,e.length)===e}),C=0;C<R.length;C++)delete this.files[R[C].name];return this},generate:function(){throw Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var n,R={};try{if((R=et.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:C.utf8encode})).type=R.type.toLowerCase(),R.compression=R.compression.toUpperCase(),"binarystring"===R.type&&(R.type="string"),!R.type)throw Error("No output type specified.");et.checkSupport(R.type),"darwin"!==R.platform&&"freebsd"!==R.platform&&"linux"!==R.platform&&"sunos"!==R.platform||(R.platform="UNIX"),"win32"===R.platform&&(R.platform="DOS");var el=R.comment||this.comment||"";n=ef.generateWorker(this,R,el)}catch(e){(n=new ei("error")).error(e)}return new eo(n,R.type||"string",R.mimeType)},generateAsync:function(e,n){return this.generateInternalStream(e).accumulate(n)},generateNodeStream:function(e,n){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(n)}}},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,n,R){n.exports=e("stream")},{stream:void 0}],17:[function(e,n,R){var C=e("./DataReader");function i(e){C.call(this,e);for(var n=0;n<this.data.length;n++)e[n]=255&e[n]}e("../utils").inherits(i,C),i.prototype.byteAt=function(e){return this.data[this.zero+e]},i.prototype.lastIndexOfSignature=function(e){for(var n=e.charCodeAt(0),R=e.charCodeAt(1),C=e.charCodeAt(2),et=e.charCodeAt(3),ei=this.length-4;0<=ei;--ei)if(this.data[ei]===n&&this.data[ei+1]===R&&this.data[ei+2]===C&&this.data[ei+3]===et)return ei-this.zero;return -1},i.prototype.readAndCheckSignature=function(e){var n=e.charCodeAt(0),R=e.charCodeAt(1),C=e.charCodeAt(2),et=e.charCodeAt(3),ei=this.readData(4);return n===ei[0]&&R===ei[1]&&C===ei[2]&&et===ei[3]},i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var n=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,n},n.exports=i},{"../utils":32,"./DataReader":18}],18:[function(e,n,R){var C=e("../utils");function i(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var n,R=0;for(this.checkOffset(e),n=this.index+e-1;n>=this.index;n--)R=(R<<8)+this.byteAt(n);return this.index+=e,R},readString:function(e){return C.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},n.exports=i},{"../utils":32}],19:[function(e,n,R){var C=e("./Uint8ArrayReader");function i(e){C.call(this,e)}e("../utils").inherits(i,C),i.prototype.readData=function(e){this.checkOffset(e);var n=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,n},n.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,n,R){var C=e("./DataReader");function i(e){C.call(this,e)}e("../utils").inherits(i,C),i.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},i.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},i.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},i.prototype.readData=function(e){this.checkOffset(e);var n=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,n},n.exports=i},{"../utils":32,"./DataReader":18}],21:[function(e,n,R){var C=e("./ArrayReader");function i(e){C.call(this,e)}e("../utils").inherits(i,C),i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var n=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,n},n.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(e,n,R){var C=e("../utils"),et=e("../support"),ei=e("./ArrayReader"),eo=e("./StringReader"),el=e("./NodeBufferReader"),eu=e("./Uint8ArrayReader");n.exports=function(e){var n=C.getTypeOf(e);return C.checkSupport(n),"string"!==n||et.uint8array?"nodebuffer"===n?new el(e):et.uint8array?new eu(C.transformTo("uint8array",e)):new ei(C.transformTo("array",e)):new eo(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,n,R){R.LOCAL_FILE_HEADER="PK\x03\x04",R.CENTRAL_FILE_HEADER="PK\x01\x02",R.CENTRAL_DIRECTORY_END="PK\x05\x06",R.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",R.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",R.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,n,R){var C=e("./GenericWorker"),et=e("../utils");function l(e){C.call(this,"ConvertWorker to "+e),this.destType=e}et.inherits(l,C),l.prototype.processChunk=function(e){this.push({data:et.transformTo(this.destType,e.data),meta:e.meta})},n.exports=l},{"../utils":32,"./GenericWorker":28}],25:[function(e,n,R){var C=e("./GenericWorker"),et=e("../crc32");function l(){C.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(l,C),l.prototype.processChunk=function(e){this.streamInfo.crc32=et(e.data,this.streamInfo.crc32||0),this.push(e)},n.exports=l},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,n,R){var C=e("../utils"),et=e("./GenericWorker");function l(e){et.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}C.inherits(l,et),l.prototype.processChunk=function(e){if(e){var n=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=n+e.data.length}et.prototype.processChunk.call(this,e)},n.exports=l},{"../utils":32,"./GenericWorker":28}],27:[function(e,n,R){var C=e("../utils"),et=e("./GenericWorker");function l(e){et.call(this,"DataWorker");var n=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then(function(e){n.dataIsReady=!0,n.data=e,n.max=e&&e.length||0,n.type=C.getTypeOf(e),n.isPaused||n._tickAndRepeat()},function(e){n.error(e)})}C.inherits(l,et),l.prototype.cleanUp=function(){et.prototype.cleanUp.call(this),this.data=null},l.prototype.resume=function(){return!!et.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,C.delay(this._tickAndRepeat,[],this)),!0)},l.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(C.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},l.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,n=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,n);break;case"uint8array":e=this.data.subarray(this.index,n);break;case"array":case"nodebuffer":e=this.data.slice(this.index,n)}return this.index=n,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=l},{"../utils":32,"./GenericWorker":28}],28:[function(e,n,R){function a(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}a.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,n){return this._listeners[e].push(n),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,n){if(this._listeners[e])for(var R=0;R<this._listeners[e].length;R++)this._listeners[e][R].call(this,n)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var n=this;return e.on("data",function(e){n.processChunk(e)}),e.on("end",function(){n.end()}),e.on("error",function(e){n.error(e)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,n){return this.extraStreamInfo[e]=n,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},n.exports=a},{}],29:[function(e,n,R){var C=e("../utils"),et=e("./ConvertWorker"),ei=e("./GenericWorker"),eo=e("../base64"),el=e("../support"),eu=e("../external"),ef=null;if(el.nodestream)try{ef=e("../nodejs/NodejsStreamOutputAdapter")}catch{}function _(e,n,R){var eo=n;switch(n){case"blob":case"arraybuffer":eo="uint8array";break;case"base64":eo="string"}try{this._internalType=eo,this._outputType=n,this._mimeType=R,C.checkSupport(eo),this._worker=e.pipe(new et(eo)),e.lock()}catch(e){this._worker=new ei("error"),this._worker.error(e)}}_.prototype={accumulate:function(e){var n;return n=this,new eu.Promise(function(R,et){var ei=[],el=n._internalType,eu=n._outputType,ef=n._mimeType;n.on("data",function(n,R){ei.push(n),e&&e(R)}).on("error",function(e){ei=[],et(e)}).on("end",function(){try{var e=function(e,n,R){switch(e){case"blob":return C.newBlob(C.transformTo("arraybuffer",n),R);case"base64":return eo.encode(n);default:return C.transformTo(e,n)}}(eu,function(e,n){var R,C=0,et=null,ei=0;for(R=0;R<n.length;R++)ei+=n[R].length;switch(e){case"string":return n.join("");case"array":return Array.prototype.concat.apply([],n);case"uint8array":for(et=new Uint8Array(ei),R=0;R<n.length;R++)et.set(n[R],C),C+=n[R].length;return et;case"nodebuffer":return ec.concat(n);default:throw Error("concat : unsupported type '"+e+"'")}}(el,ei),ef);R(e)}catch(e){et(e)}ei=[]}).resume()})},on:function(e,n){var R=this;return"data"===e?this._worker.on(e,function(e){n.call(R,e.data,e.meta)}):this._worker.on(e,function(){C.delay(n,arguments,R)}),this},resume:function(){return C.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(C.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw Error(this._outputType+" is not supported by this method");return new ef(this,{objectMode:"nodebuffer"!==this._outputType},e)}},n.exports=_},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,n,R){if(R.base64=!0,R.array=!0,R.string=!0,R.arraybuffer="u">typeof ArrayBuffer&&"u">typeof Uint8Array,R.nodebuffer="u">typeof ec,R.uint8array="u">typeof Uint8Array,typeof ArrayBuffer>"u")R.blob=!1;else{var C=new ArrayBuffer(0);try{R.blob=0===new Blob([C],{type:"application/zip"}).size}catch{try{var et=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);et.append(C),R.blob=0===et.getBlob("application/zip").size}catch{R.blob=!1}}}try{R.nodestream=!!e("readable-stream").Readable}catch{R.nodestream=!1}},{"readable-stream":16}],31:[function(e,n,R){for(var C=e("./utils"),et=e("./support"),ei=e("./nodejsUtils"),eo=e("./stream/GenericWorker"),el=Array(256),eu=0;eu<256;eu++)el[eu]=252<=eu?6:248<=eu?5:240<=eu?4:224<=eu?3:192<=eu?2:1;function d(){eo.call(this,"utf-8 decode"),this.leftOver=null}function L(){eo.call(this,"utf-8 encode")}el[254]=el[254]=1,R.utf8encode=function(e){return et.nodebuffer?ei.newBufferFrom(e,"utf-8"):function(e){var n,R,C,ei,eo,el=e.length,eu=0;for(ei=0;ei<el;ei++)(64512&(R=e.charCodeAt(ei)))==55296&&ei+1<el&&(64512&(C=e.charCodeAt(ei+1)))==56320&&(R=65536+(R-55296<<10)+(C-56320),ei++),eu+=R<128?1:R<2048?2:R<65536?3:4;for(n=et.uint8array?new Uint8Array(eu):Array(eu),ei=eo=0;eo<eu;ei++)(64512&(R=e.charCodeAt(ei)))==55296&&ei+1<el&&(64512&(C=e.charCodeAt(ei+1)))==56320&&(R=65536+(R-55296<<10)+(C-56320),ei++),R<128?n[eo++]=R:(R<2048?n[eo++]=192|R>>>6:(R<65536?n[eo++]=224|R>>>12:(n[eo++]=240|R>>>18,n[eo++]=128|R>>>12&63),n[eo++]=128|R>>>6&63),n[eo++]=128|63&R);return n}(e)},R.utf8decode=function(e){return et.nodebuffer?C.transformTo("nodebuffer",e).toString("utf-8"):function(e){var n,R,et,ei,eo=e.length,eu=Array(2*eo);for(n=R=0;n<eo;)if((et=e[n++])<128)eu[R++]=et;else if(4<(ei=el[et]))eu[R++]=65533,n+=ei-1;else{for(et&=2===ei?31:3===ei?15:7;1<ei&&n<eo;)et=et<<6|63&e[n++],ei--;1<ei?eu[R++]=65533:et<65536?eu[R++]=et:(et-=65536,eu[R++]=55296|et>>10&1023,eu[R++]=56320|1023&et)}return eu.length!==R&&(eu.subarray?eu=eu.subarray(0,R):eu.length=R),C.applyFromCharCode(eu)}(e=C.transformTo(et.uint8array?"uint8array":"array",e))},C.inherits(d,eo),d.prototype.processChunk=function(e){var n=C.transformTo(et.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(et.uint8array){var ei=n;(n=new Uint8Array(ei.length+this.leftOver.length)).set(this.leftOver,0),n.set(ei,this.leftOver.length)}else n=this.leftOver.concat(n);this.leftOver=null}var eo=function(e,n){var R;for((n=n||e.length)>e.length&&(n=e.length),R=n-1;0<=R&&(192&e[R])==128;)R--;return R<0||0===R?n:R+el[e[R]]>n?R:n}(n),eu=n;eo!==n.length&&(et.uint8array?(eu=n.subarray(0,eo),this.leftOver=n.subarray(eo,n.length)):(eu=n.slice(0,eo),this.leftOver=n.slice(eo,n.length))),this.push({data:R.utf8decode(eu),meta:e.meta})},d.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:R.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},R.Utf8DecodeWorker=d,C.inherits(L,eo),L.prototype.processChunk=function(e){this.push({data:R.utf8encode(e.data),meta:e.meta})},R.Utf8EncodeWorker=L},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,n,R){var C=e("./support"),et=e("./base64"),ei=e("./nodejsUtils"),eo=e("./external");function h(e){return e}function A(e,n){for(var R=0;R<e.length;++R)n[R]=255&e.charCodeAt(R);return n}e("setimmediate"),R.newBlob=function(e,n){R.checkSupport("blob");try{return new Blob([e],{type:n})}catch{try{var C=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return C.append(e),C.getBlob(n)}catch{throw Error("Bug : can't construct the Blob.")}}};var el={stringifyByChunk:function(e,n,R){var C=[],et=0,ei=e.length;if(ei<=R)return String.fromCharCode.apply(null,e);for(;et<ei;)"array"===n||"nodebuffer"===n?C.push(String.fromCharCode.apply(null,e.slice(et,Math.min(et+R,ei)))):C.push(String.fromCharCode.apply(null,e.subarray(et,Math.min(et+R,ei)))),et+=R;return C.join("")},stringifyByChar:function(e){for(var n="",R=0;R<e.length;R++)n+=String.fromCharCode(e[R]);return n},applyCanBeUsed:{uint8array:function(){try{return C.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch{return!1}}(),nodebuffer:function(){try{return C.nodebuffer&&1===String.fromCharCode.apply(null,ei.allocBuffer(1)).length}catch{return!1}}()}};function L(e){var n=65536,C=R.getTypeOf(e),et=!0;if("uint8array"===C?et=el.applyCanBeUsed.uint8array:"nodebuffer"===C&&(et=el.applyCanBeUsed.nodebuffer),et)for(;1<n;)try{return el.stringifyByChunk(e,C,n)}catch{n=Math.floor(n/2)}return el.stringifyByChar(e)}function _(e,n){for(var R=0;R<e.length;R++)n[R]=e[R];return n}R.applyFromCharCode=L;var eu={};eu.string={string:h,array:function(e){return A(e,Array(e.length))},arraybuffer:function(e){return eu.string.uint8array(e).buffer},uint8array:function(e){return A(e,new Uint8Array(e.length))},nodebuffer:function(e){return A(e,ei.allocBuffer(e.length))}},eu.array={string:L,array:h,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return ei.newBufferFrom(e)}},eu.arraybuffer={string:function(e){return L(new Uint8Array(e))},array:function(e){return _(new Uint8Array(e),Array(e.byteLength))},arraybuffer:h,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return ei.newBufferFrom(new Uint8Array(e))}},eu.uint8array={string:L,array:function(e){return _(e,Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:h,nodebuffer:function(e){return ei.newBufferFrom(e)}},eu.nodebuffer={string:L,array:function(e){return _(e,Array(e.length))},arraybuffer:function(e){return eu.nodebuffer.uint8array(e).buffer},uint8array:function(e){return _(e,new Uint8Array(e.length))},nodebuffer:h},R.transformTo=function(e,n){return(n=n||"",e)?(R.checkSupport(e),eu[R.getTypeOf(n)][e](n)):n},R.resolve=function(e){for(var n=e.split("/"),R=[],C=0;C<n.length;C++){var et=n[C];"."===et||""===et&&0!==C&&C!==n.length-1||(".."===et?R.pop():R.push(et))}return R.join("/")},R.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":C.nodebuffer&&ei.isBuffer(e)?"nodebuffer":C.uint8array&&e instanceof Uint8Array?"uint8array":C.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},R.checkSupport=function(e){if(!C[e.toLowerCase()])throw Error(e+" is not supported by this platform")},R.MAX_VALUE_16BITS=65535,R.MAX_VALUE_32BITS=-1,R.pretty=function(e){var n,R,C="";for(R=0;R<(e||"").length;R++)C+="\\x"+((n=e.charCodeAt(R))<16?"0":"")+n.toString(16).toUpperCase();return C},R.delay=function(e,n,R){setImmediate(function(){e.apply(R||null,n||[])})},R.inherits=function(e,n){function b(){}b.prototype=n.prototype,e.prototype=new b},R.extend=function(){var e,n,R={};for(e=0;e<arguments.length;e++)for(n in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],n)&&void 0===R[n]&&(R[n]=arguments[e][n]);return R},R.prepareContent=function(e,n,ei,el,eu){return eo.Promise.resolve(n).then(function(e){return C.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"u">typeof FileReader?new eo.Promise(function(n,R){var C=new FileReader;C.onload=function(e){n(e.target.result)},C.onerror=function(e){R(e.target.error)},C.readAsArrayBuffer(e)}):e}).then(function(n){var ec,ef=R.getTypeOf(n);return ef?("arraybuffer"===ef?n=R.transformTo("uint8array",n):"string"===ef&&(eu?n=et.decode(n):ei&&!0!==el&&(n=A(ec=n,C.uint8array?new Uint8Array(ec.length):Array(ec.length)))),n):eo.Promise.reject(Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,n,R){var C=e("./reader/readerFor"),et=e("./utils"),ei=e("./signature"),eo=e("./zipEntry"),el=e("./support");function A(e){this.files=[],this.loadOptions=e}A.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var n=this.reader.readString(4);throw Error("Corrupted zip or bug: unexpected signature ("+et.pretty(n)+", expected "+et.pretty(e)+")")}},isSignature:function(e,n){var R=this.reader.index;this.reader.setIndex(e);var C=this.reader.readString(4)===n;return this.reader.setIndex(R),C},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),n=el.uint8array?"uint8array":"array",R=et.transformTo(n,e);this.zipComment=this.loadOptions.decodeFileName(R)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,n,R,C=this.zip64EndOfCentralSize-44;0<C;)e=this.reader.readInt(2),n=this.reader.readInt(4),R=this.reader.readData(n),this.zip64ExtensibleData[e]={id:e,length:n,value:R}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,n;for(e=0;e<this.files.length;e++)n=this.files[e],this.reader.setIndex(n.localHeaderOffset),this.checkSignature(ei.LOCAL_FILE_HEADER),n.readLocalPart(this.reader),n.handleUTF8(),n.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(ei.CENTRAL_FILE_HEADER);)(e=new eo({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(ei.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,ei.LOCAL_FILE_HEADER)?Error("Corrupted zip: can't find end of central directory"):Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var n=e;if(this.checkSignature(ei.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===et.MAX_VALUE_16BITS||this.diskWithCentralDirStart===et.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===et.MAX_VALUE_16BITS||this.centralDirRecords===et.MAX_VALUE_16BITS||this.centralDirSize===et.MAX_VALUE_32BITS||this.centralDirOffset===et.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(ei.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(ei.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,ei.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(ei.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(ei.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var R=this.centralDirOffset+this.centralDirSize;this.zip64&&(R+=20+(12+this.zip64EndOfCentralSize));var C=n-R;if(0<C)this.isSignature(n,ei.CENTRAL_FILE_HEADER)||(this.reader.zero=C);else if(C<0)throw Error("Corrupted zip: missing "+Math.abs(C)+" bytes.")},prepareReader:function(e){this.reader=C(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=A},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,n,R){var C=e("./reader/readerFor"),et=e("./utils"),ei=e("./compressedObject"),eo=e("./crc32"),el=e("./utf8"),eu=e("./compressions"),ec=e("./support");function L(e,n){this.options=e,this.loadOptions=n}L.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(e){var n,R;if(e.skip(22),this.fileNameLength=e.readInt(2),R=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(R),-1===this.compressedSize||-1===this.uncompressedSize)throw Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(n=function(e){for(var n in eu)if(Object.prototype.hasOwnProperty.call(eu,n)&&eu[n].magic===e)return eu[n];return null}(this.compressionMethod)))throw Error("Corrupted zip : compression "+et.pretty(this.compressionMethod)+" unknown (inner file : "+et.transformTo("string",this.fileName)+")");this.decompressed=new ei(this.compressedSize,this.uncompressedSize,this.crc32,n,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var n=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw Error("Encrypted zip are not supported");e.skip(n),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=C(this.extraFields[1].value);this.uncompressedSize===et.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===et.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===et.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===et.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var n,R,C,et=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<et;)n=e.readInt(2),R=e.readInt(2),C=e.readData(R),this.extraFields[n]={id:n,length:R,value:C};e.setIndex(et)},handleUTF8:function(){var e=ec.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=el.utf8decode(this.fileName),this.fileCommentStr=el.utf8decode(this.fileComment);else{var n=this.findExtraFieldUnicodePath();if(null!==n)this.fileNameStr=n;else{var R=et.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(R)}var C=this.findExtraFieldUnicodeComment();if(null!==C)this.fileCommentStr=C;else{var ei=et.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(ei)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var n=C(e.value);return 1!==n.readInt(1)||eo(this.fileName)!==n.readInt(4)?null:el.utf8decode(n.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var n=C(e.value);return 1!==n.readInt(1)||eo(this.fileComment)!==n.readInt(4)?null:el.utf8decode(n.readData(e.length-5))}return null}},n.exports=L},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,n,R){function a(e,n,R){this.name=e,this.dir=R.dir,this.date=R.date,this.comment=R.comment,this.unixPermissions=R.unixPermissions,this.dosPermissions=R.dosPermissions,this._data=n,this._dataBinary=R.binary,this.options={compression:R.compression,compressionOptions:R.compressionOptions}}var C=e("./stream/StreamHelper"),et=e("./stream/DataWorker"),ei=e("./utf8"),eo=e("./compressedObject"),el=e("./stream/GenericWorker");a.prototype={internalStream:function(e){var n=null,R="string";try{if(!e)throw Error("No output type specified.");var et="string"===(R=e.toLowerCase())||"text"===R;"binarystring"!==R&&"text"!==R||(R="string"),n=this._decompressWorker();var eo=!this._dataBinary;eo&&!et&&(n=n.pipe(new ei.Utf8EncodeWorker)),!eo&&et&&(n=n.pipe(new ei.Utf8DecodeWorker))}catch(e){(n=new el("error")).error(e)}return new C(n,R,"")},async:function(e,n){return this.internalStream(e).accumulate(n)},nodeStream:function(e,n){return this.internalStream(e||"nodebuffer").toNodejsStream(n)},_compressWorker:function(e,n){if(this._data instanceof eo&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var R=this._decompressWorker();return this._dataBinary||(R=R.pipe(new ei.Utf8EncodeWorker)),eo.createWorkerFrom(R,e,n)},_decompressWorker:function(){return this._data instanceof eo?this._data.getContentWorker():this._data instanceof el?this._data:new et(this._data)}};for(var eu=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],L=function(){throw Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},ec=0;ec<eu.length;ec++)a.prototype[eu[ec]]=L;n.exports=a},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,n,R){(function(e){var R,C,et=e.MutationObserver||e.WebKitMutationObserver;if(et){var ei=0,eo=new et(E),el=e.document.createTextNode("");eo.observe(el,{characterData:!0}),R=function(){el.data=ei=++ei%2}}else if(e.setImmediate||void 0===e.MessageChannel)R="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var n=e.document.createElement("script");n.onreadystatechange=function(){E(),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},e.document.documentElement.appendChild(n)}:function(){setTimeout(E,0)};else{var eu=new e.MessageChannel;eu.port1.onmessage=E,R=function(){eu.port2.postMessage(0)}}var ec=[];function E(){var e,n;C=!0;for(var R=ec.length;R;){for(n=ec,ec=[],e=-1;++e<R;)n[e]();R=ec.length}C=!1}n.exports=function(e){1!==ec.push(e)||C||R()}}).call(this,"u">typeof t_?t_:"u">typeof self?self:"u">typeof window?window:{})},{}],37:[function(e,n,R){var C=e("immediate");function i(){}var et={},ei=["REJECTED"],eo=["FULFILLED"],el=["PENDING"];function d(e){if("function"!=typeof e)throw TypeError("resolver must be a function");this.state=el,this.queue=[],this.outcome=void 0,e!==i&&f(this,e)}function L(e,n,R){this.promise=e,"function"==typeof n&&(this.onFulfilled=n,this.callFulfilled=this.otherCallFulfilled),"function"==typeof R&&(this.onRejected=R,this.callRejected=this.otherCallRejected)}function _(e,n,R){C(function(){var C;try{C=n(R)}catch(n){return et.reject(e,n)}C===e?et.reject(e,TypeError("Cannot resolve promise with itself")):et.resolve(e,C)})}function E(e){var n=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof n)return function(){n.apply(e,arguments)}}function f(e,n){var R=!1;function H(n){R||(R=!0,et.reject(e,n))}function z(n){R||(R=!0,et.resolve(e,n))}var C=m(function(){n(z,H)});"error"===C.status&&H(C.value)}function m(e,n){var R={};try{R.value=e(n),R.status="success"}catch(e){R.status="error",R.value=e}return R}(n.exports=d).prototype.finally=function(e){if("function"!=typeof e)return this;var n=this.constructor;return this.then(function(R){return n.resolve(e()).then(function(){return R})},function(R){return n.resolve(e()).then(function(){throw R})})},d.prototype.catch=function(e){return this.then(null,e)},d.prototype.then=function(e,n){if("function"!=typeof e&&this.state===eo||"function"!=typeof n&&this.state===ei)return this;var R=new this.constructor(i);return this.state!==el?_(R,this.state===eo?e:n,this.outcome):this.queue.push(new L(R,e,n)),R},L.prototype.callFulfilled=function(e){et.resolve(this.promise,e)},L.prototype.otherCallFulfilled=function(e){_(this.promise,this.onFulfilled,e)},L.prototype.callRejected=function(e){et.reject(this.promise,e)},L.prototype.otherCallRejected=function(e){_(this.promise,this.onRejected,e)},et.resolve=function(e,n){var R=m(E,n);if("error"===R.status)return et.reject(e,R.value);var C=R.value;if(C)f(e,C);else{e.state=eo,e.outcome=n;for(var ei=-1,el=e.queue.length;++ei<el;)e.queue[ei].callFulfilled(n)}return e},et.reject=function(e,n){e.state=ei,e.outcome=n;for(var R=-1,C=e.queue.length;++R<C;)e.queue[R].callRejected(n);return e},d.resolve=function(e){return e instanceof this?e:et.resolve(new this(i),e)},d.reject=function(e){var n=new this(i);return et.reject(n,e)},d.all=function(e){var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(TypeError("must be an array"));var R=e.length,C=!1;if(!R)return this.resolve([]);for(var ei=Array(R),eo=0,el=-1,eu=new this(i);++el<R;)(function(e,el){n.resolve(e).then(function(e){ei[el]=e,++eo!==R||C||(C=!0,et.resolve(eu,ei))},function(e){C||(C=!0,et.reject(eu,e))})})(e[el],el);return eu},d.race=function(e){if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(TypeError("must be an array"));var n,R=e.length,C=!1;if(!R)return this.resolve([]);for(var ei=-1,eo=new this(i);++ei<R;)n=e[ei],this.resolve(n).then(function(e){C||(C=!0,et.resolve(eo,e))},function(e){C||(C=!0,et.reject(eo,e))});return eo}},{immediate:36}],38:[function(e,n,R){var C={};(0,e("./lib/utils/common").assign)(C,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),n.exports=C},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,n,R){var C=e("./zlib/deflate"),et=e("./utils/common"),ei=e("./utils/strings"),eo=e("./zlib/messages"),el=e("./zlib/zstream"),eu=Object.prototype.toString;function f(e){if(!(this instanceof f))return new f(e);this.options=et.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});var n,R=this.options;R.raw&&0<R.windowBits?R.windowBits=-R.windowBits:R.gzip&&0<R.windowBits&&R.windowBits<16&&(R.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new el,this.strm.avail_out=0;var ec=C.deflateInit2(this.strm,R.level,R.method,R.windowBits,R.memLevel,R.strategy);if(0!==ec)throw Error(eo[ec]);if(R.header&&C.deflateSetHeader(this.strm,R.header),R.dictionary){if(n="string"==typeof R.dictionary?ei.string2buf(R.dictionary):"[object ArrayBuffer]"===eu.call(R.dictionary)?new Uint8Array(R.dictionary):R.dictionary,0!==(ec=C.deflateSetDictionary(this.strm,n)))throw Error(eo[ec]);this._dict_set=!0}}function m(e,n){var R=new f(n);if(R.push(e,!0),R.err)throw R.msg||eo[R.err];return R.result}f.prototype.push=function(e,n){var R,eo,el=this.strm,ec=this.options.chunkSize;if(this.ended)return!1;eo=n===~~n?n:!0===n?4:0,"string"==typeof e?el.input=ei.string2buf(e):"[object ArrayBuffer]"===eu.call(e)?el.input=new Uint8Array(e):el.input=e,el.next_in=0,el.avail_in=el.input.length;do{if(0===el.avail_out&&(el.output=new et.Buf8(ec),el.next_out=0,el.avail_out=ec),1!==(R=C.deflate(el,eo))&&0!==R)return this.onEnd(R),this.ended=!0,!1;0!==el.avail_out&&(0!==el.avail_in||4!==eo&&2!==eo)||("string"===this.options.to?this.onData(ei.buf2binstring(et.shrinkBuf(el.output,el.next_out))):this.onData(et.shrinkBuf(el.output,el.next_out)))}while((0<el.avail_in||0===el.avail_out)&&1!==R);return 4===eo?(R=C.deflateEnd(this.strm),this.onEnd(R),this.ended=!0,0===R):2!==eo||(this.onEnd(0),el.avail_out=0,!0)},f.prototype.onData=function(e){this.chunks.push(e)},f.prototype.onEnd=function(e){0===e&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=et.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},R.Deflate=f,R.deflate=m,R.deflateRaw=function(e,n){return(n=n||{}).raw=!0,m(e,n)},R.gzip=function(e,n){return(n=n||{}).gzip=!0,m(e,n)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,n,R){var C=e("./zlib/inflate"),et=e("./utils/common"),ei=e("./utils/strings"),eo=e("./zlib/constants"),el=e("./zlib/messages"),eu=e("./zlib/zstream"),ec=e("./zlib/gzheader"),ef=Object.prototype.toString;function _(e){if(!(this instanceof _))return new _(e);this.options=et.assign({chunkSize:16384,windowBits:0,to:""},e||{});var n=this.options;n.raw&&0<=n.windowBits&&n.windowBits<16&&(n.windowBits=-n.windowBits,0===n.windowBits&&(n.windowBits=-15)),!(0<=n.windowBits&&n.windowBits<16)||e&&e.windowBits||(n.windowBits+=32),15<n.windowBits&&n.windowBits<48&&!(15&n.windowBits)&&(n.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new eu,this.strm.avail_out=0;var R=C.inflateInit2(this.strm,n.windowBits);if(R!==eo.Z_OK)throw Error(el[R]);this.header=new ec,C.inflateGetHeader(this.strm,this.header)}function E(e,n){var R=new _(n);if(R.push(e,!0),R.err)throw R.msg||el[R.err];return R.result}_.prototype.push=function(e,n){var R,el,eu,ec,eh,ep,ed=this.strm,e_=this.options.chunkSize,eg=this.options.dictionary,em=!1;if(this.ended)return!1;el=n===~~n?n:!0===n?eo.Z_FINISH:eo.Z_NO_FLUSH,"string"==typeof e?ed.input=ei.binstring2buf(e):"[object ArrayBuffer]"===ef.call(e)?ed.input=new Uint8Array(e):ed.input=e,ed.next_in=0,ed.avail_in=ed.input.length;do{if(0===ed.avail_out&&(ed.output=new et.Buf8(e_),ed.next_out=0,ed.avail_out=e_),(R=C.inflate(ed,eo.Z_NO_FLUSH))===eo.Z_NEED_DICT&&eg&&(ep="string"==typeof eg?ei.string2buf(eg):"[object ArrayBuffer]"===ef.call(eg)?new Uint8Array(eg):eg,R=C.inflateSetDictionary(this.strm,ep)),R===eo.Z_BUF_ERROR&&!0===em&&(R=eo.Z_OK,em=!1),R!==eo.Z_STREAM_END&&R!==eo.Z_OK)return this.onEnd(R),this.ended=!0,!1;ed.next_out&&(0!==ed.avail_out&&R!==eo.Z_STREAM_END&&(0!==ed.avail_in||el!==eo.Z_FINISH&&el!==eo.Z_SYNC_FLUSH)||("string"===this.options.to?(eu=ei.utf8border(ed.output,ed.next_out),ec=ed.next_out-eu,eh=ei.buf2string(ed.output,eu),ed.next_out=ec,ed.avail_out=e_-ec,ec&&et.arraySet(ed.output,ed.output,eu,ec,0),this.onData(eh)):this.onData(et.shrinkBuf(ed.output,ed.next_out)))),0===ed.avail_in&&0===ed.avail_out&&(em=!0)}while((0<ed.avail_in||0===ed.avail_out)&&R!==eo.Z_STREAM_END);return R===eo.Z_STREAM_END&&(el=eo.Z_FINISH),el===eo.Z_FINISH?(R=C.inflateEnd(this.strm),this.onEnd(R),this.ended=!0,R===eo.Z_OK):el!==eo.Z_SYNC_FLUSH||(this.onEnd(eo.Z_OK),ed.avail_out=0,!0)},_.prototype.onData=function(e){this.chunks.push(e)},_.prototype.onEnd=function(e){e===eo.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=et.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},R.Inflate=_,R.inflate=E,R.inflateRaw=function(e,n){return(n=n||{}).raw=!0,E(e,n)},R.ungzip=E},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,n,R){var C="u">typeof Uint8Array&&"u">typeof Uint16Array&&"u">typeof Int32Array;R.assign=function(e){for(var n=Array.prototype.slice.call(arguments,1);n.length;){var R=n.shift();if(R){if("object"!=typeof R)throw TypeError(R+"must be non-object");for(var C in R)R.hasOwnProperty(C)&&(e[C]=R[C])}}return e},R.shrinkBuf=function(e,n){return e.length===n?e:e.subarray?e.subarray(0,n):(e.length=n,e)};var et={arraySet:function(e,n,R,C,et){if(n.subarray&&e.subarray)e.set(n.subarray(R,R+C),et);else for(var ei=0;ei<C;ei++)e[et+ei]=n[R+ei]},flattenChunks:function(e){var n,R,C,et,ei,eo;for(n=C=0,R=e.length;n<R;n++)C+=e[n].length;for(eo=new Uint8Array(C),n=et=0,R=e.length;n<R;n++)ei=e[n],eo.set(ei,et),et+=ei.length;return eo}},ei={arraySet:function(e,n,R,C,et){for(var ei=0;ei<C;ei++)e[et+ei]=n[R+ei]},flattenChunks:function(e){return[].concat.apply([],e)}};R.setTyped=function(e){e?(R.Buf8=Uint8Array,R.Buf16=Uint16Array,R.Buf32=Int32Array,R.assign(R,et)):(R.Buf8=Array,R.Buf16=Array,R.Buf32=Array,R.assign(R,ei))},R.setTyped(C)},{}],42:[function(e,n,R){var C=e("./common"),et=!0,ei=!0;try{String.fromCharCode.apply(null,[0])}catch{et=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{ei=!1}for(var eo=new C.Buf8(256),el=0;el<256;el++)eo[el]=252<=el?6:248<=el?5:240<=el?4:224<=el?3:192<=el?2:1;function A(e,n){if(n<65537&&(e.subarray&&ei||!e.subarray&&et))return String.fromCharCode.apply(null,C.shrinkBuf(e,n));for(var R="",eo=0;eo<n;eo++)R+=String.fromCharCode(e[eo]);return R}eo[254]=eo[254]=1,R.string2buf=function(e){var n,R,et,ei,eo,el=e.length,eu=0;for(ei=0;ei<el;ei++)(64512&(R=e.charCodeAt(ei)))==55296&&ei+1<el&&(64512&(et=e.charCodeAt(ei+1)))==56320&&(R=65536+(R-55296<<10)+(et-56320),ei++),eu+=R<128?1:R<2048?2:R<65536?3:4;for(n=new C.Buf8(eu),ei=eo=0;eo<eu;ei++)(64512&(R=e.charCodeAt(ei)))==55296&&ei+1<el&&(64512&(et=e.charCodeAt(ei+1)))==56320&&(R=65536+(R-55296<<10)+(et-56320),ei++),R<128?n[eo++]=R:(R<2048?n[eo++]=192|R>>>6:(R<65536?n[eo++]=224|R>>>12:(n[eo++]=240|R>>>18,n[eo++]=128|R>>>12&63),n[eo++]=128|R>>>6&63),n[eo++]=128|63&R);return n},R.buf2binstring=function(e){return A(e,e.length)},R.binstring2buf=function(e){for(var n=new C.Buf8(e.length),R=0,et=n.length;R<et;R++)n[R]=e.charCodeAt(R);return n},R.buf2string=function(e,n){var R,C,et,ei,el=n||e.length,eu=Array(2*el);for(R=C=0;R<el;)if((et=e[R++])<128)eu[C++]=et;else if(4<(ei=eo[et]))eu[C++]=65533,R+=ei-1;else{for(et&=2===ei?31:3===ei?15:7;1<ei&&R<el;)et=et<<6|63&e[R++],ei--;1<ei?eu[C++]=65533:et<65536?eu[C++]=et:(et-=65536,eu[C++]=55296|et>>10&1023,eu[C++]=56320|1023&et)}return A(eu,C)},R.utf8border=function(e,n){var R;for((n=n||e.length)>e.length&&(n=e.length),R=n-1;0<=R&&(192&e[R])==128;)R--;return R<0||0===R?n:R+eo[e[R]]>n?R:n}},{"./common":41}],43:[function(e,n,R){n.exports=function(e,n,R,C){for(var et=65535&e|0,ei=e>>>16&65535|0,eo=0;0!==R;){for(R-=eo=2e3<R?2e3:R;ei=ei+(et=et+n[C++]|0)|0,--eo;);et%=65521,ei%=65521}return et|ei<<16|0}},{}],44:[function(e,n,R){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,n,R){var C=function(){for(var e,n=[],R=0;R<256;R++){e=R;for(var C=0;C<8;C++)e=1&e?3988292384^e>>>1:e>>>1;n[R]=e}return n}();n.exports=function(e,n,R,et){var ei=et+R;e^=-1;for(var eo=et;eo<ei;eo++)e=e>>>8^C[255&(e^n[eo])];return -1^e}},{}],46:[function(e,n,R){var C,et=e("../utils/common"),ei=e("./trees"),eo=e("./adler32"),el=e("./crc32"),eu=e("./messages");function me(e,n){return e.msg=eu[n],n}function ve(e){return(e<<1)-(4<e?9:0)}function G(e){for(var n=e.length;0<=--n;)e[n]=0}function I(e){var n=e.state,R=n.pending;R>e.avail_out&&(R=e.avail_out),0!==R&&(et.arraySet(e.output,n.pending_buf,n.pending_out,R,e.next_out),e.next_out+=R,n.pending_out+=R,e.total_out+=R,e.avail_out-=R,n.pending-=R,0===n.pending&&(n.pending_out=0))}function B(e,n){ei._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,n),e.block_start=e.strstart,I(e.strm)}function ye(e,n){e.pending_buf[e.pending++]=n}function be(e,n){e.pending_buf[e.pending++]=n>>>8&255,e.pending_buf[e.pending++]=255&n}function Ue(e,n){var R,C,et=e.max_chain_length,ei=e.strstart,eo=e.prev_length,el=e.nice_match,eu=e.strstart>e.w_size-262?e.strstart-(e.w_size-262):0,ec=e.window,ef=e.w_mask,eh=e.prev,ep=e.strstart+258,ed=ec[ei+eo-1],e_=ec[ei+eo];e.prev_length>=e.good_match&&(et>>=2),el>e.lookahead&&(el=e.lookahead);do if(ec[(R=n)+eo]===e_&&ec[R+eo-1]===ed&&ec[R]===ec[ei]&&ec[++R]===ec[ei+1]){ei+=2,R++;do;while(ec[++ei]===ec[++R]&&ec[++ei]===ec[++R]&&ec[++ei]===ec[++R]&&ec[++ei]===ec[++R]&&ec[++ei]===ec[++R]&&ec[++ei]===ec[++R]&&ec[++ei]===ec[++R]&&ec[++ei]===ec[++R]&&ei<ep);if(C=258-(ep-ei),ei=ep-258,eo<C){if(e.match_start=n,el<=(eo=C))break;ed=ec[ei+eo-1],e_=ec[ei+eo]}}while((n=eh[n&ef])>eu&&0!=--et);return eo<=e.lookahead?eo:e.lookahead}function Xe(e){var n,R,C,ei,eu,ec,ef,eh,ep,ed,e_=e.w_size;do{if(ei=e.window_size-e.lookahead-e.strstart,e.strstart>=e_+(e_-262)){for(et.arraySet(e.window,e.window,e_,e_,0),e.match_start-=e_,e.strstart-=e_,e.block_start-=e_,n=R=e.hash_size;C=e.head[--n],e.head[n]=e_<=C?C-e_:0,--R;);for(n=R=e_;C=e.prev[--n],e.prev[n]=e_<=C?C-e_:0,--R;);ei+=e_}if(0===e.strm.avail_in)break;if(ec=e.strm,ef=e.window,eh=e.strstart+e.lookahead,ed=void 0,(ep=ei)<(ed=ec.avail_in)&&(ed=ep),R=0===ed?0:(ec.avail_in-=ed,et.arraySet(ef,ec.input,ec.next_in,ed,eh),1===ec.state.wrap?ec.adler=eo(ec.adler,ef,ed,eh):2===ec.state.wrap&&(ec.adler=el(ec.adler,ef,ed,eh)),ec.next_in+=ed,ec.total_in+=ed,ed),e.lookahead+=R,e.lookahead+e.insert>=3)for(eu=e.strstart-e.insert,e.ins_h=e.window[eu],e.ins_h=(e.ins_h<<e.hash_shift^e.window[eu+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[eu+3-1])&e.hash_mask,e.prev[eu&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=eu,eu++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<262&&0!==e.strm.avail_in)}function st(e,n){for(var R,C;;){if(e.lookahead<262){if(Xe(e),e.lookahead<262&&0===n)return 1;if(0===e.lookahead)break}if(R=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,R=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==R&&e.strstart-R<=e.w_size-262&&(e.match_length=Ue(e,R)),e.match_length>=3){if(C=ei._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,R=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask}else C=ei._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(C&&(B(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===n?(B(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(B(e,!1),0===e.strm.avail_out)?1:2}function Ze(e,n){for(var R,C,et;;){if(e.lookahead<262){if(Xe(e),e.lookahead<262&&0===n)return 1;if(0===e.lookahead)break}if(R=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,R=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==R&&e.prev_length<e.max_lazy_match&&e.strstart-R<=e.w_size-262&&(e.match_length=Ue(e,R),e.match_length<=5&&(1===e.strategy||3===e.match_length&&4096<e.strstart-e.match_start)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){for(et=e.strstart+e.lookahead-3,C=ei._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=et&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,R=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=2,e.strstart++,C&&(B(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((C=ei._tr_tally(e,0,e.window[e.strstart-1]))&&B(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(C=ei._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===n?(B(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(B(e,!1),0===e.strm.avail_out)?1:2}function ae(e,n,R,C,et){this.good_length=e,this.max_lazy=n,this.nice_length=R,this.max_chain=C,this.func=et}function le(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new et.Buf16(1146),this.dyn_dtree=new et.Buf16(122),this.bl_tree=new et.Buf16(78),G(this.dyn_ltree),G(this.dyn_dtree),G(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new et.Buf16(16),this.heap=new et.Buf16(573),G(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new et.Buf16(573),G(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Pe(e){var n;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(n=e.state).pending=0,n.pending_out=0,n.wrap<0&&(n.wrap=-n.wrap),n.status=n.wrap?42:113,e.adler=2===n.wrap?0:1,n.last_flush=0,ei._tr_init(n),0):me(e,-2)}function Te(e){var n,R=Pe(e);return 0===R&&((n=e.state).window_size=2*n.w_size,G(n.head),n.max_lazy_match=C[n.level].max_lazy,n.good_match=C[n.level].good_length,n.nice_match=C[n.level].nice_length,n.max_chain_length=C[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),R}function ze(e,n,R,C,ei,eo){if(!e)return -2;var el=1;if(-1===n&&(n=6),C<0?(el=0,C=-C):15<C&&(el=2,C-=16),ei<1||9<ei||8!==R||C<8||15<C||n<0||9<n||eo<0||4<eo)return me(e,-2);8===C&&(C=9);var eu=new le;return(e.state=eu).strm=e,eu.wrap=el,eu.gzhead=null,eu.w_bits=C,eu.w_size=1<<eu.w_bits,eu.w_mask=eu.w_size-1,eu.hash_bits=ei+7,eu.hash_size=1<<eu.hash_bits,eu.hash_mask=eu.hash_size-1,eu.hash_shift=~~((eu.hash_bits+3-1)/3),eu.window=new et.Buf8(2*eu.w_size),eu.head=new et.Buf16(eu.hash_size),eu.prev=new et.Buf16(eu.w_size),eu.lit_bufsize=1<<ei+6,eu.pending_buf_size=4*eu.lit_bufsize,eu.pending_buf=new et.Buf8(eu.pending_buf_size),eu.d_buf=1*eu.lit_bufsize,eu.l_buf=3*eu.lit_bufsize,eu.level=n,eu.strategy=eo,eu.method=R,Te(e)}C=[new ae(0,0,0,0,function(e,n){var R=65535;for(65535>e.pending_buf_size-5&&(R=e.pending_buf_size-5);;){if(e.lookahead<=1){if(Xe(e),0===e.lookahead&&0===n)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var C=e.block_start+R;if((0===e.strstart||e.strstart>=C)&&(e.lookahead=e.strstart-C,e.strstart=C,B(e,!1),0===e.strm.avail_out)||e.strstart-e.block_start>=e.w_size-262&&(B(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===n?(B(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(B(e,!1),e.strm.avail_out),1)}),new ae(4,4,8,4,st),new ae(4,5,16,8,st),new ae(4,6,32,32,st),new ae(4,4,16,16,Ze),new ae(8,16,32,32,Ze),new ae(8,16,128,128,Ze),new ae(8,32,128,256,Ze),new ae(32,128,258,1024,Ze),new ae(32,258,258,4096,Ze)],R.deflateInit=function(e,n){return ze(e,n,8,15,8,0)},R.deflateInit2=ze,R.deflateReset=Te,R.deflateResetKeep=Pe,R.deflateSetHeader=function(e,n){return e&&e.state?2!==e.state.wrap?-2:(e.state.gzhead=n,0):-2},R.deflate=function(e,n){var R,et,eo,eu;if(!e||!e.state||5<n||n<0)return e?me(e,-2):-2;if(et=e.state,!e.output||!e.input&&0!==e.avail_in||666===et.status&&4!==n)return me(e,0===e.avail_out?-5:-2);if(et.strm=e,R=et.last_flush,et.last_flush=n,42===et.status){if(2===et.wrap)e.adler=0,ye(et,31),ye(et,139),ye(et,8),et.gzhead?(ye(et,(et.gzhead.text?1:0)+(et.gzhead.hcrc?2:0)+(et.gzhead.extra?4:0)+(et.gzhead.name?8:0)+(et.gzhead.comment?16:0)),ye(et,255&et.gzhead.time),ye(et,et.gzhead.time>>8&255),ye(et,et.gzhead.time>>16&255),ye(et,et.gzhead.time>>24&255),ye(et,9===et.level?2:2<=et.strategy||et.level<2?4:0),ye(et,255&et.gzhead.os),et.gzhead.extra&&et.gzhead.extra.length&&(ye(et,255&et.gzhead.extra.length),ye(et,et.gzhead.extra.length>>8&255)),et.gzhead.hcrc&&(e.adler=el(e.adler,et.pending_buf,et.pending,0)),et.gzindex=0,et.status=69):(ye(et,0),ye(et,0),ye(et,0),ye(et,0),ye(et,0),ye(et,9===et.level?2:2<=et.strategy||et.level<2?4:0),ye(et,3),et.status=113);else{var ec=8+(et.w_bits-8<<4)<<8;ec|=(2<=et.strategy||et.level<2?0:et.level<6?1:6===et.level?2:3)<<6,0!==et.strstart&&(ec|=32),ec+=31-ec%31,et.status=113,be(et,ec),0!==et.strstart&&(be(et,e.adler>>>16),be(et,65535&e.adler)),e.adler=1}}if(69===et.status){if(et.gzhead.extra){for(eo=et.pending;et.gzindex<(65535&et.gzhead.extra.length)&&(et.pending!==et.pending_buf_size||(et.gzhead.hcrc&&et.pending>eo&&(e.adler=el(e.adler,et.pending_buf,et.pending-eo,eo)),I(e),eo=et.pending,et.pending!==et.pending_buf_size));)ye(et,255&et.gzhead.extra[et.gzindex]),et.gzindex++;et.gzhead.hcrc&&et.pending>eo&&(e.adler=el(e.adler,et.pending_buf,et.pending-eo,eo)),et.gzindex===et.gzhead.extra.length&&(et.gzindex=0,et.status=73)}else et.status=73}if(73===et.status){if(et.gzhead.name){eo=et.pending;do{if(et.pending===et.pending_buf_size&&(et.gzhead.hcrc&&et.pending>eo&&(e.adler=el(e.adler,et.pending_buf,et.pending-eo,eo)),I(e),eo=et.pending,et.pending===et.pending_buf_size)){eu=1;break}eu=et.gzindex<et.gzhead.name.length?255&et.gzhead.name.charCodeAt(et.gzindex++):0,ye(et,eu)}while(0!==eu);et.gzhead.hcrc&&et.pending>eo&&(e.adler=el(e.adler,et.pending_buf,et.pending-eo,eo)),0===eu&&(et.gzindex=0,et.status=91)}else et.status=91}if(91===et.status){if(et.gzhead.comment){eo=et.pending;do{if(et.pending===et.pending_buf_size&&(et.gzhead.hcrc&&et.pending>eo&&(e.adler=el(e.adler,et.pending_buf,et.pending-eo,eo)),I(e),eo=et.pending,et.pending===et.pending_buf_size)){eu=1;break}eu=et.gzindex<et.gzhead.comment.length?255&et.gzhead.comment.charCodeAt(et.gzindex++):0,ye(et,eu)}while(0!==eu);et.gzhead.hcrc&&et.pending>eo&&(e.adler=el(e.adler,et.pending_buf,et.pending-eo,eo)),0===eu&&(et.status=103)}else et.status=103}if(103===et.status&&(et.gzhead.hcrc?(et.pending+2>et.pending_buf_size&&I(e),et.pending+2<=et.pending_buf_size&&(ye(et,255&e.adler),ye(et,e.adler>>8&255),e.adler=0,et.status=113)):et.status=113),0!==et.pending){if(I(e),0===e.avail_out)return et.last_flush=-1,0}else if(0===e.avail_in&&ve(n)<=ve(R)&&4!==n)return me(e,-5);if(666===et.status&&0!==e.avail_in)return me(e,-5);if(0!==e.avail_in||0!==et.lookahead||0!==n&&666!==et.status){var ef=2===et.strategy?function(e,n){for(var R;;){if(0===e.lookahead&&(Xe(e),0===e.lookahead)){if(0===n)return 1;break}if(e.match_length=0,R=ei._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,R&&(B(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===n?(B(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(B(e,!1),0===e.strm.avail_out)?1:2}(et,n):3===et.strategy?function(e,n){for(var R,C,et,eo,el=e.window;;){if(e.lookahead<=258){if(Xe(e),e.lookahead<=258&&0===n)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&0<e.strstart&&(C=el[et=e.strstart-1])===el[++et]&&C===el[++et]&&C===el[++et]){eo=e.strstart+258;do;while(C===el[++et]&&C===el[++et]&&C===el[++et]&&C===el[++et]&&C===el[++et]&&C===el[++et]&&C===el[++et]&&C===el[++et]&&et<eo);e.match_length=258-(eo-et),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(R=ei._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(R=ei._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),R&&(B(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===n?(B(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(B(e,!1),0===e.strm.avail_out)?1:2}(et,n):C[et.level].func(et,n);if(3!==ef&&4!==ef||(et.status=666),1===ef||3===ef)return 0===e.avail_out&&(et.last_flush=-1),0;if(2===ef&&(1===n?ei._tr_align(et):5!==n&&(ei._tr_stored_block(et,0,0,!1),3===n&&(G(et.head),0===et.lookahead&&(et.strstart=0,et.block_start=0,et.insert=0))),I(e),0===e.avail_out))return et.last_flush=-1,0}return 4!==n?0:et.wrap<=0?1:(2===et.wrap?(ye(et,255&e.adler),ye(et,e.adler>>8&255),ye(et,e.adler>>16&255),ye(et,e.adler>>24&255),ye(et,255&e.total_in),ye(et,e.total_in>>8&255),ye(et,e.total_in>>16&255),ye(et,e.total_in>>24&255)):(be(et,e.adler>>>16),be(et,65535&e.adler)),I(e),0<et.wrap&&(et.wrap=-et.wrap),0!==et.pending?0:1)},R.deflateEnd=function(e){var n;return e&&e.state?42!==(n=e.state.status)&&69!==n&&73!==n&&91!==n&&103!==n&&113!==n&&666!==n?me(e,-2):(e.state=null,113===n?me(e,-3):0):-2},R.deflateSetDictionary=function(e,n){var R,C,ei,el,eu,ec,ef,eh,ep=n.length;if(!e||!e.state||2===(el=(R=e.state).wrap)||1===el&&42!==R.status||R.lookahead)return -2;for(1===el&&(e.adler=eo(e.adler,n,ep,0)),R.wrap=0,ep>=R.w_size&&(0===el&&(G(R.head),R.strstart=0,R.block_start=0,R.insert=0),eh=new et.Buf8(R.w_size),et.arraySet(eh,n,ep-R.w_size,R.w_size,0),n=eh,ep=R.w_size),eu=e.avail_in,ec=e.next_in,ef=e.input,e.avail_in=ep,e.next_in=0,e.input=n,Xe(R);R.lookahead>=3;){for(C=R.strstart,ei=R.lookahead-2;R.ins_h=(R.ins_h<<R.hash_shift^R.window[C+3-1])&R.hash_mask,R.prev[C&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=C,C++,--ei;);R.strstart=C,R.lookahead=2,Xe(R)}return R.strstart+=R.lookahead,R.block_start=R.strstart,R.insert=R.lookahead,R.lookahead=0,R.match_length=R.prev_length=2,R.match_available=0,e.next_in=ec,e.input=ef,e.avail_in=eu,R.wrap=el,0},R.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,n,R){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,n,R){n.exports=function(e,n){var R,C,et,ei,eo,el,eu,ec,ef,eh,ep,ed,e_,eg,em,eb,ey,ev,ek,eA,eL,ex,ew,eT,eO;R=e.state,C=e.next_in,eT=e.input,et=C+(e.avail_in-5),ei=e.next_out,eO=e.output,eo=ei-(n-e.avail_out),el=ei+(e.avail_out-257),eu=R.dmax,ec=R.wsize,ef=R.whave,eh=R.wnext,ep=R.window,ed=R.hold,e_=R.bits,eg=R.lencode,em=R.distcode,eb=(1<<R.lenbits)-1,ey=(1<<R.distbits)-1;e:do for(e_<15&&(ed+=eT[C++]<<e_,e_+=8,ed+=eT[C++]<<e_,e_+=8),ev=eg[ed&eb];;){if(ed>>>=ek=ev>>>24,e_-=ek,0==(ek=ev>>>16&255))eO[ei++]=65535&ev;else{if(!(16&ek)){if(!(64&ek)){ev=eg[(65535&ev)+(ed&(1<<ek)-1)];continue}if(32&ek){R.mode=12;break e}e.msg="invalid literal/length code",R.mode=30;break e}for(eA=65535&ev,(ek&=15)&&(e_<ek&&(ed+=eT[C++]<<e_,e_+=8),eA+=ed&(1<<ek)-1,ed>>>=ek,e_-=ek),e_<15&&(ed+=eT[C++]<<e_,e_+=8,ed+=eT[C++]<<e_,e_+=8),ev=em[ed&ey];;){if(ed>>>=ek=ev>>>24,e_-=ek,!(16&(ek=ev>>>16&255))){if(!(64&ek)){ev=em[(65535&ev)+(ed&(1<<ek)-1)];continue}e.msg="invalid distance code",R.mode=30;break e}if(eL=65535&ev,e_<(ek&=15)&&(ed+=eT[C++]<<e_,(e_+=8)<ek&&(ed+=eT[C++]<<e_,e_+=8)),eu<(eL+=ed&(1<<ek)-1)){e.msg="invalid distance too far back",R.mode=30;break e}if(ed>>>=ek,e_-=ek,(ek=ei-eo)<eL){if(ef<(ek=eL-ek)&&R.sane){e.msg="invalid distance too far back",R.mode=30;break e}if(ew=ep,(ex=0)===eh){if(ex+=ec-ek,ek<eA){for(eA-=ek;eO[ei++]=ep[ex++],--ek;);ex=ei-eL,ew=eO}}else if(eh<ek){if(ex+=ec+eh-ek,(ek-=eh)<eA){for(eA-=ek;eO[ei++]=ep[ex++],--ek;);if(ex=0,eh<eA){for(eA-=ek=eh;eO[ei++]=ep[ex++],--ek;);ex=ei-eL,ew=eO}}}else if(ex+=eh-ek,ek<eA){for(eA-=ek;eO[ei++]=ep[ex++],--ek;);ex=ei-eL,ew=eO}for(;2<eA;)eO[ei++]=ew[ex++],eO[ei++]=ew[ex++],eO[ei++]=ew[ex++],eA-=3;eA&&(eO[ei++]=ew[ex++],1<eA&&(eO[ei++]=ew[ex++]))}else{for(ex=ei-eL;eO[ei++]=eO[ex++],eO[ei++]=eO[ex++],eO[ei++]=eO[ex++],2<(eA-=3););eA&&(eO[ei++]=eO[ex++],1<eA&&(eO[ei++]=eO[ex++]))}break}}break}while(C<et&&ei<el);C-=eA=e_>>3,ed&=(1<<(e_-=eA<<3))-1,e.next_in=C,e.next_out=ei,e.avail_in=C<et?et-C+5:5-(C-et),e.avail_out=ei<el?el-ei+257:257-(ei-el),R.hold=ed,R.bits=e_}},{}],49:[function(e,n,R){var C=e("../utils/common"),et=e("./adler32"),ei=e("./crc32"),eo=e("./inffast"),el=e("./inftrees");function b(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function N(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new C.Buf16(320),this.work=new C.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function M(e){var n;return e&&e.state?(n=e.state,e.total_in=e.total_out=n.total=0,e.msg="",n.wrap&&(e.adler=1&n.wrap),n.mode=1,n.last=0,n.havedict=0,n.dmax=32768,n.head=null,n.hold=0,n.bits=0,n.lencode=n.lendyn=new C.Buf32(852),n.distcode=n.distdyn=new C.Buf32(592),n.sane=1,n.back=-1,0):-2}function H(e){var n;return e&&e.state?((n=e.state).wsize=0,n.whave=0,n.wnext=0,M(e)):-2}function z(e,n){var R,C;return e&&e.state?(C=e.state,n<0?(R=0,n=-n):(R=1+(n>>4),n<48&&(n&=15)),n&&(n<8||15<n)?-2:(null!==C.window&&C.wbits!==n&&(C.window=null),C.wrap=R,C.wbits=n,H(e))):-2}function W(e,n){var R,C;return e?(C=new N,(e.state=C).window=null,0!==(R=z(e,n))&&(e.state=null),R):-2}var eu,ec,ef=!0;function he(e,n,R,et){var ei,eo=e.state;return null===eo.window&&(eo.wsize=1<<eo.wbits,eo.wnext=0,eo.whave=0,eo.window=new C.Buf8(eo.wsize)),et>=eo.wsize?(C.arraySet(eo.window,n,R-eo.wsize,eo.wsize,0),eo.wnext=0,eo.whave=eo.wsize):(et<(ei=eo.wsize-eo.wnext)&&(ei=et),C.arraySet(eo.window,n,R-et,ei,eo.wnext),(et-=ei)?(C.arraySet(eo.window,n,R-et,et,0),eo.wnext=et,eo.whave=eo.wsize):(eo.wnext+=ei,eo.wnext===eo.wsize&&(eo.wnext=0),eo.whave<eo.wsize&&(eo.whave+=ei))),0}R.inflateReset=H,R.inflateReset2=z,R.inflateResetKeep=M,R.inflateInit=function(e){return W(e,15)},R.inflateInit2=W,R.inflate=function(e,n){var R,eh,ep,ed,e_,eg,em,eb,ey,ev,ek,eA,eL,ex,ew,eT,eO,eE,eS,eN,eI,eU,eR,eC,eM=0,eP=new C.Buf8(4),eD=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return -2;12===(R=e.state).mode&&(R.mode=13),e_=e.next_out,ep=e.output,em=e.avail_out,ed=e.next_in,eh=e.input,eg=e.avail_in,eb=R.hold,ey=R.bits,ev=eg,ek=em,eU=0;e:for(;;)switch(R.mode){case 1:if(0===R.wrap){R.mode=13;break}for(;ey<16;){if(0===eg)break e;eg--,eb+=eh[ed++]<<ey,ey+=8}if(2&R.wrap&&35615===eb){eP[R.check=0]=255&eb,eP[1]=eb>>>8&255,R.check=ei(R.check,eP,2,0),ey=eb=0,R.mode=2;break}if(R.flags=0,R.head&&(R.head.done=!1),!(1&R.wrap)||(((255&eb)<<8)+(eb>>8))%31){e.msg="incorrect header check",R.mode=30;break}if((15&eb)!=8){e.msg="unknown compression method",R.mode=30;break}if(ey-=4,eI=8+(15&(eb>>>=4)),0===R.wbits)R.wbits=eI;else if(eI>R.wbits){e.msg="invalid window size",R.mode=30;break}R.dmax=1<<eI,e.adler=R.check=1,R.mode=512&eb?10:12,ey=eb=0;break;case 2:for(;ey<16;){if(0===eg)break e;eg--,eb+=eh[ed++]<<ey,ey+=8}if(R.flags=eb,(255&R.flags)!=8){e.msg="unknown compression method",R.mode=30;break}if(57344&R.flags){e.msg="unknown header flags set",R.mode=30;break}R.head&&(R.head.text=eb>>8&1),512&R.flags&&(eP[0]=255&eb,eP[1]=eb>>>8&255,R.check=ei(R.check,eP,2,0)),ey=eb=0,R.mode=3;case 3:for(;ey<32;){if(0===eg)break e;eg--,eb+=eh[ed++]<<ey,ey+=8}R.head&&(R.head.time=eb),512&R.flags&&(eP[0]=255&eb,eP[1]=eb>>>8&255,eP[2]=eb>>>16&255,eP[3]=eb>>>24&255,R.check=ei(R.check,eP,4,0)),ey=eb=0,R.mode=4;case 4:for(;ey<16;){if(0===eg)break e;eg--,eb+=eh[ed++]<<ey,ey+=8}R.head&&(R.head.xflags=255&eb,R.head.os=eb>>8),512&R.flags&&(eP[0]=255&eb,eP[1]=eb>>>8&255,R.check=ei(R.check,eP,2,0)),ey=eb=0,R.mode=5;case 5:if(1024&R.flags){for(;ey<16;){if(0===eg)break e;eg--,eb+=eh[ed++]<<ey,ey+=8}R.length=eb,R.head&&(R.head.extra_len=eb),512&R.flags&&(eP[0]=255&eb,eP[1]=eb>>>8&255,R.check=ei(R.check,eP,2,0)),ey=eb=0}else R.head&&(R.head.extra=null);R.mode=6;case 6:if(1024&R.flags&&(eg<(eA=R.length)&&(eA=eg),eA&&(R.head&&(eI=R.head.extra_len-R.length,R.head.extra||(R.head.extra=Array(R.head.extra_len)),C.arraySet(R.head.extra,eh,ed,eA,eI)),512&R.flags&&(R.check=ei(R.check,eh,eA,ed)),eg-=eA,ed+=eA,R.length-=eA),R.length))break e;R.length=0,R.mode=7;case 7:if(2048&R.flags){if(0===eg)break e;for(eA=0;eI=eh[ed+eA++],R.head&&eI&&R.length<65536&&(R.head.name+=String.fromCharCode(eI)),eI&&eA<eg;);if(512&R.flags&&(R.check=ei(R.check,eh,eA,ed)),eg-=eA,ed+=eA,eI)break e}else R.head&&(R.head.name=null);R.length=0,R.mode=8;case 8:if(4096&R.flags){if(0===eg)break e;for(eA=0;eI=eh[ed+eA++],R.head&&eI&&R.length<65536&&(R.head.comment+=String.fromCharCode(eI)),eI&&eA<eg;);if(512&R.flags&&(R.check=ei(R.check,eh,eA,ed)),eg-=eA,ed+=eA,eI)break e}else R.head&&(R.head.comment=null);R.mode=9;case 9:if(512&R.flags){for(;ey<16;){if(0===eg)break e;eg--,eb+=eh[ed++]<<ey,ey+=8}if(eb!==(65535&R.check)){e.msg="header crc mismatch",R.mode=30;break}ey=eb=0}R.head&&(R.head.hcrc=R.flags>>9&1,R.head.done=!0),e.adler=R.check=0,R.mode=12;break;case 10:for(;ey<32;){if(0===eg)break e;eg--,eb+=eh[ed++]<<ey,ey+=8}e.adler=R.check=b(eb),ey=eb=0,R.mode=11;case 11:if(0===R.havedict)return e.next_out=e_,e.avail_out=em,e.next_in=ed,e.avail_in=eg,R.hold=eb,R.bits=ey,2;e.adler=R.check=1,R.mode=12;case 12:if(5===n||6===n)break e;case 13:if(R.last){eb>>>=7&ey,ey-=7&ey,R.mode=27;break}for(;ey<3;){if(0===eg)break e;eg--,eb+=eh[ed++]<<ey,ey+=8}switch(R.last=1&eb,ey-=1,3&(eb>>>=1)){case 0:R.mode=14;break;case 1:if(function(e){if(ef){var n;for(eu=new C.Buf32(512),ec=new C.Buf32(32),n=0;n<144;)e.lens[n++]=8;for(;n<256;)e.lens[n++]=9;for(;n<280;)e.lens[n++]=7;for(;n<288;)e.lens[n++]=8;for(el(1,e.lens,0,288,eu,0,e.work,{bits:9}),n=0;n<32;)e.lens[n++]=5;el(2,e.lens,0,32,ec,0,e.work,{bits:5}),ef=!1}e.lencode=eu,e.lenbits=9,e.distcode=ec,e.distbits=5}(R),R.mode=20,6!==n)break;eb>>>=2,ey-=2;break e;case 2:R.mode=17;break;case 3:e.msg="invalid block type",R.mode=30}eb>>>=2,ey-=2;break;case 14:for(eb>>>=7&ey,ey-=7&ey;ey<32;){if(0===eg)break e;eg--,eb+=eh[ed++]<<ey,ey+=8}if((65535&eb)!=(eb>>>16^65535)){e.msg="invalid stored block lengths",R.mode=30;break}if(R.length=65535&eb,ey=eb=0,R.mode=15,6===n)break e;case 15:R.mode=16;case 16:if(eA=R.length){if(eg<eA&&(eA=eg),em<eA&&(eA=em),0===eA)break e;C.arraySet(ep,eh,ed,eA,e_),eg-=eA,ed+=eA,em-=eA,e_+=eA,R.length-=eA;break}R.mode=12;break;case 17:for(;ey<14;){if(0===eg)break e;eg--,eb+=eh[ed++]<<ey,ey+=8}if(R.nlen=257+(31&eb),eb>>>=5,ey-=5,R.ndist=1+(31&eb),eb>>>=5,ey-=5,R.ncode=4+(15&eb),eb>>>=4,ey-=4,286<R.nlen||30<R.ndist){e.msg="too many length or distance symbols",R.mode=30;break}R.have=0,R.mode=18;case 18:for(;R.have<R.ncode;){for(;ey<3;){if(0===eg)break e;eg--,eb+=eh[ed++]<<ey,ey+=8}R.lens[eD[R.have++]]=7&eb,eb>>>=3,ey-=3}for(;R.have<19;)R.lens[eD[R.have++]]=0;if(R.lencode=R.lendyn,R.lenbits=7,eR={bits:R.lenbits},eU=el(0,R.lens,0,19,R.lencode,0,R.work,eR),R.lenbits=eR.bits,eU){e.msg="invalid code lengths set",R.mode=30;break}R.have=0,R.mode=19;case 19:for(;R.have<R.nlen+R.ndist;){for(;eT=(eM=R.lencode[eb&(1<<R.lenbits)-1])>>>16&255,eO=65535&eM,!((ew=eM>>>24)<=ey);){if(0===eg)break e;eg--,eb+=eh[ed++]<<ey,ey+=8}if(eO<16)eb>>>=ew,ey-=ew,R.lens[R.have++]=eO;else{if(16===eO){for(eC=ew+2;ey<eC;){if(0===eg)break e;eg--,eb+=eh[ed++]<<ey,ey+=8}if(eb>>>=ew,ey-=ew,0===R.have){e.msg="invalid bit length repeat",R.mode=30;break}eI=R.lens[R.have-1],eA=3+(3&eb),eb>>>=2,ey-=2}else if(17===eO){for(eC=ew+3;ey<eC;){if(0===eg)break e;eg--,eb+=eh[ed++]<<ey,ey+=8}ey-=ew,eI=0,eA=3+(7&(eb>>>=ew)),eb>>>=3,ey-=3}else{for(eC=ew+7;ey<eC;){if(0===eg)break e;eg--,eb+=eh[ed++]<<ey,ey+=8}ey-=ew,eI=0,eA=11+(127&(eb>>>=ew)),eb>>>=7,ey-=7}if(R.have+eA>R.nlen+R.ndist){e.msg="invalid bit length repeat",R.mode=30;break}for(;eA--;)R.lens[R.have++]=eI}}if(30===R.mode)break;if(0===R.lens[256]){e.msg="invalid code -- missing end-of-block",R.mode=30;break}if(R.lenbits=9,eR={bits:R.lenbits},eU=el(1,R.lens,0,R.nlen,R.lencode,0,R.work,eR),R.lenbits=eR.bits,eU){e.msg="invalid literal/lengths set",R.mode=30;break}if(R.distbits=6,R.distcode=R.distdyn,eR={bits:R.distbits},eU=el(2,R.lens,R.nlen,R.ndist,R.distcode,0,R.work,eR),R.distbits=eR.bits,eU){e.msg="invalid distances set",R.mode=30;break}if(R.mode=20,6===n)break e;case 20:R.mode=21;case 21:if(6<=eg&&258<=em){e.next_out=e_,e.avail_out=em,e.next_in=ed,e.avail_in=eg,R.hold=eb,R.bits=ey,eo(e,ek),e_=e.next_out,ep=e.output,em=e.avail_out,ed=e.next_in,eh=e.input,eg=e.avail_in,eb=R.hold,ey=R.bits,12===R.mode&&(R.back=-1);break}for(R.back=0;eT=(eM=R.lencode[eb&(1<<R.lenbits)-1])>>>16&255,eO=65535&eM,!((ew=eM>>>24)<=ey);){if(0===eg)break e;eg--,eb+=eh[ed++]<<ey,ey+=8}if(eT&&!(240&eT)){for(eE=ew,eS=eT,eN=eO;eT=(eM=R.lencode[eN+((eb&(1<<eE+eS)-1)>>eE)])>>>16&255,eO=65535&eM,!(eE+(ew=eM>>>24)<=ey);){if(0===eg)break e;eg--,eb+=eh[ed++]<<ey,ey+=8}eb>>>=eE,ey-=eE,R.back+=eE}if(eb>>>=ew,ey-=ew,R.back+=ew,R.length=eO,0===eT){R.mode=26;break}if(32&eT){R.back=-1,R.mode=12;break}if(64&eT){e.msg="invalid literal/length code",R.mode=30;break}R.extra=15&eT,R.mode=22;case 22:if(R.extra){for(eC=R.extra;ey<eC;){if(0===eg)break e;eg--,eb+=eh[ed++]<<ey,ey+=8}R.length+=eb&(1<<R.extra)-1,eb>>>=R.extra,ey-=R.extra,R.back+=R.extra}R.was=R.length,R.mode=23;case 23:for(;eT=(eM=R.distcode[eb&(1<<R.distbits)-1])>>>16&255,eO=65535&eM,!((ew=eM>>>24)<=ey);){if(0===eg)break e;eg--,eb+=eh[ed++]<<ey,ey+=8}if(!(240&eT)){for(eE=ew,eS=eT,eN=eO;eT=(eM=R.distcode[eN+((eb&(1<<eE+eS)-1)>>eE)])>>>16&255,eO=65535&eM,!(eE+(ew=eM>>>24)<=ey);){if(0===eg)break e;eg--,eb+=eh[ed++]<<ey,ey+=8}eb>>>=eE,ey-=eE,R.back+=eE}if(eb>>>=ew,ey-=ew,R.back+=ew,64&eT){e.msg="invalid distance code",R.mode=30;break}R.offset=eO,R.extra=15&eT,R.mode=24;case 24:if(R.extra){for(eC=R.extra;ey<eC;){if(0===eg)break e;eg--,eb+=eh[ed++]<<ey,ey+=8}R.offset+=eb&(1<<R.extra)-1,eb>>>=R.extra,ey-=R.extra,R.back+=R.extra}if(R.offset>R.dmax){e.msg="invalid distance too far back",R.mode=30;break}R.mode=25;case 25:if(0===em)break e;if(eA=ek-em,R.offset>eA){if((eA=R.offset-eA)>R.whave&&R.sane){e.msg="invalid distance too far back",R.mode=30;break}eL=eA>R.wnext?(eA-=R.wnext,R.wsize-eA):R.wnext-eA,eA>R.length&&(eA=R.length),ex=R.window}else ex=ep,eL=e_-R.offset,eA=R.length;for(em<eA&&(eA=em),em-=eA,R.length-=eA;ep[e_++]=ex[eL++],--eA;);0===R.length&&(R.mode=21);break;case 26:if(0===em)break e;ep[e_++]=R.length,em--,R.mode=21;break;case 27:if(R.wrap){for(;ey<32;){if(0===eg)break e;eg--,eb|=eh[ed++]<<ey,ey+=8}if(ek-=em,e.total_out+=ek,R.total+=ek,ek&&(e.adler=R.check=R.flags?ei(R.check,ep,ek,e_-ek):et(R.check,ep,ek,e_-ek)),ek=em,(R.flags?eb:b(eb))!==R.check){e.msg="incorrect data check",R.mode=30;break}ey=eb=0}R.mode=28;case 28:if(R.wrap&&R.flags){for(;ey<32;){if(0===eg)break e;eg--,eb+=eh[ed++]<<ey,ey+=8}if(eb!==(4294967295&R.total)){e.msg="incorrect length check",R.mode=30;break}ey=eb=0}R.mode=29;case 29:eU=1;break e;case 30:eU=-3;break e;case 31:return -4;default:return -2}return e.next_out=e_,e.avail_out=em,e.next_in=ed,e.avail_in=eg,R.hold=eb,R.bits=ey,(R.wsize||ek!==e.avail_out&&R.mode<30&&(R.mode<27||4!==n))&&he(e,e.output,e.next_out,ek-e.avail_out)?(R.mode=31,-4):(ev-=e.avail_in,ek-=e.avail_out,e.total_in+=ev,e.total_out+=ek,R.total+=ek,R.wrap&&ek&&(e.adler=R.check=R.flags?ei(R.check,ep,ek,e.next_out-ek):et(R.check,ep,ek,e.next_out-ek)),e.data_type=R.bits+(R.last?64:0)+(12===R.mode?128:0)+(20===R.mode||15===R.mode?256:0),(0==ev&&0===ek||4===n)&&0===eU&&(eU=-5),eU)},R.inflateEnd=function(e){if(!e||!e.state)return -2;var n=e.state;return n.window&&(n.window=null),e.state=null,0},R.inflateGetHeader=function(e,n){var R;return e&&e.state&&2&(R=e.state).wrap?((R.head=n).done=!1,0):-2},R.inflateSetDictionary=function(e,n){var R,C=n.length;return e&&e.state?0!==(R=e.state).wrap&&11!==R.mode?-2:11===R.mode&&et(1,n,C,0)!==R.check?-3:he(e,n,C,C)?(R.mode=31,-4):(R.havedict=1,0):-2},R.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,n,R){var C=e("../utils/common"),et=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],ei=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],eo=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],el=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(e,n,R,eu,ec,ef,eh,ep){var ed,e_,eg,em,eb,ey,ev,ek,eA,eL=ep.bits,ex=0,ew=0,eT=0,eO=0,eE=0,eS=0,eN=0,eI=0,eU=0,eR=0,eC=null,eM=0,eP=new C.Buf16(16),eD=new C.Buf16(16),eB=null,eK=0;for(ex=0;ex<=15;ex++)eP[ex]=0;for(ew=0;ew<eu;ew++)eP[n[R+ew]]++;for(eE=eL,eO=15;1<=eO&&0===eP[eO];eO--);if(eO<eE&&(eE=eO),0===eO)return ec[ef++]=20971520,ec[ef++]=20971520,ep.bits=1,0;for(eT=1;eT<eO&&0===eP[eT];eT++);for(eE<eT&&(eE=eT),ex=eI=1;ex<=15;ex++)if(eI<<=1,(eI-=eP[ex])<0)return -1;if(0<eI&&(0===e||1!==eO))return -1;for(eD[1]=0,ex=1;ex<15;ex++)eD[ex+1]=eD[ex]+eP[ex];for(ew=0;ew<eu;ew++)0!==n[R+ew]&&(eh[eD[n[R+ew]]++]=ew);if(ey=0===e?(eC=eB=eh,19):1===e?(eC=et,eM-=257,eB=ei,eK-=257,256):(eC=eo,eB=el,-1),ex=eT,eb=ef,eN=ew=eR=0,eg=-1,em=(eU=1<<(eS=eE))-1,1===e&&852<eU||2===e&&592<eU)return 1;for(;;){for(ev=ex-eN,eA=eh[ew]<ey?(ek=0,eh[ew]):eh[ew]>ey?(ek=eB[eK+eh[ew]],eC[eM+eh[ew]]):(ek=96,0),ed=1<<ex-eN,eT=e_=1<<eS;ec[eb+(eR>>eN)+(e_-=ed)]=ev<<24|ek<<16|eA|0,0!==e_;);for(ed=1<<ex-1;eR&ed;)ed>>=1;if(0!==ed?(eR&=ed-1,eR+=ed):eR=0,ew++,0==--eP[ex]){if(ex===eO)break;ex=n[R+eh[ew]]}if(eE<ex&&(eR&em)!==eg){for(0===eN&&(eN=eE),eb+=eT,eI=1<<(eS=ex-eN);eS+eN<eO&&!((eI-=eP[eS+eN])<=0);)eS++,eI<<=1;if(eU+=1<<eS,1===e&&852<eU||2===e&&592<eU)return 1;ec[eg=eR&em]=eE<<24|eS<<16|eb-ef|0}}return 0!==eR&&(ec[eb+eR]=ex-eN<<24|4194304),ep.bits=eE,0}},{"../utils/common":41}],51:[function(e,n,R){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,n,R){var C=e("../utils/common");function u(e){for(var n=e.length;0<=--n;)e[n]=0}var et=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ei=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],eo=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],el=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],eu=Array(576);u(eu);var ec=Array(60);u(ec);var ef=Array(512);u(ef);var eh=Array(256);u(eh);var ep=Array(29);u(ep);var ed,e_,eg,em=Array(30);function G(e,n,R,C,et){this.static_tree=e,this.extra_bits=n,this.extra_base=R,this.elems=C,this.max_length=et,this.has_stree=e&&e.length}function I(e,n){this.dyn_tree=e,this.max_code=0,this.stat_desc=n}function B(e){return e<256?ef[e]:ef[256+(e>>>7)]}function ye(e,n){e.pending_buf[e.pending++]=255&n,e.pending_buf[e.pending++]=n>>>8&255}function be(e,n,R){e.bi_valid>16-R?(e.bi_buf|=n<<e.bi_valid&65535,ye(e,e.bi_buf),e.bi_buf=n>>16-e.bi_valid,e.bi_valid+=R-16):(e.bi_buf|=n<<e.bi_valid&65535,e.bi_valid+=R)}function Ue(e,n,R){be(e,R[2*n],R[2*n+1])}function Xe(e,n){for(var R=0;R|=1&e,e>>>=1,R<<=1,0<--n;);return R>>>1}function st(e,n,R){var C,et,ei=Array(16),eo=0;for(C=1;C<=15;C++)ei[C]=eo=eo+R[C-1]<<1;for(et=0;et<=n;et++){var el=e[2*et+1];0!==el&&(e[2*et]=Xe(ei[el]++,el))}}function Ze(e){var n;for(n=0;n<286;n++)e.dyn_ltree[2*n]=0;for(n=0;n<30;n++)e.dyn_dtree[2*n]=0;for(n=0;n<19;n++)e.bl_tree[2*n]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function ae(e){8<e.bi_valid?ye(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function le(e,n,R,C){var et=2*n,ei=2*R;return e[et]<e[ei]||e[et]===e[ei]&&C[n]<=C[R]}function Pe(e,n,R){for(var C=e.heap[R],et=R<<1;et<=e.heap_len&&(et<e.heap_len&&le(n,e.heap[et+1],e.heap[et],e.depth)&&et++,!le(n,C,e.heap[et],e.depth));)e.heap[R]=e.heap[et],R=et,et<<=1;e.heap[R]=C}function Te(e,n,R){var C,eo,el,eu,ec=0;if(0!==e.last_lit)for(;C=e.pending_buf[e.d_buf+2*ec]<<8|e.pending_buf[e.d_buf+2*ec+1],eo=e.pending_buf[e.l_buf+ec],ec++,0===C?Ue(e,eo,n):(Ue(e,(el=eh[eo])+256+1,n),0!==(eu=et[el])&&be(e,eo-=ep[el],eu),Ue(e,el=B(--C),R),0!==(eu=ei[el])&&be(e,C-=em[el],eu)),ec<e.last_lit;);Ue(e,256,n)}function ze(e,n){var R,C,et,ei=n.dyn_tree,eo=n.stat_desc.static_tree,el=n.stat_desc.has_stree,eu=n.stat_desc.elems,ec=-1;for(e.heap_len=0,e.heap_max=573,R=0;R<eu;R++)0!==ei[2*R]?(e.heap[++e.heap_len]=ec=R,e.depth[R]=0):ei[2*R+1]=0;for(;e.heap_len<2;)ei[2*(et=e.heap[++e.heap_len]=ec<2?++ec:0)]=1,e.depth[et]=0,e.opt_len--,el&&(e.static_len-=eo[2*et+1]);for(n.max_code=ec,R=e.heap_len>>1;1<=R;R--)Pe(e,ei,R);for(et=eu;R=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Pe(e,ei,1),C=e.heap[1],e.heap[--e.heap_max]=R,e.heap[--e.heap_max]=C,ei[2*et]=ei[2*R]+ei[2*C],e.depth[et]=(e.depth[R]>=e.depth[C]?e.depth[R]:e.depth[C])+1,ei[2*R+1]=ei[2*C+1]=et,e.heap[1]=et++,Pe(e,ei,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,n){var R,C,et,ei,eo,el,eu=n.dyn_tree,ec=n.max_code,ef=n.stat_desc.static_tree,eh=n.stat_desc.has_stree,ep=n.stat_desc.extra_bits,ed=n.stat_desc.extra_base,e_=n.stat_desc.max_length,eg=0;for(ei=0;ei<=15;ei++)e.bl_count[ei]=0;for(eu[2*e.heap[e.heap_max]+1]=0,R=e.heap_max+1;R<573;R++)e_<(ei=eu[2*eu[2*(C=e.heap[R])+1]+1]+1)&&(ei=e_,eg++),eu[2*C+1]=ei,ec<C||(e.bl_count[ei]++,eo=0,ed<=C&&(eo=ep[C-ed]),el=eu[2*C],e.opt_len+=el*(ei+eo),eh&&(e.static_len+=el*(ef[2*C+1]+eo)));if(0!==eg){do{for(ei=e_-1;0===e.bl_count[ei];)ei--;e.bl_count[ei]--,e.bl_count[ei+1]+=2,e.bl_count[e_]--,eg-=2}while(0<eg);for(ei=e_;0!==ei;ei--)for(C=e.bl_count[ei];0!==C;)ec<(et=e.heap[--R])||(eu[2*et+1]!==ei&&(e.opt_len+=(ei-eu[2*et+1])*eu[2*et],eu[2*et+1]=ei),C--)}}(e,n),st(ei,ec,e.bl_count)}function g(e,n,R){var C,et,ei=-1,eo=n[1],el=0,eu=7,ec=4;for(0===eo&&(eu=138,ec=3),n[2*(R+1)+1]=65535,C=0;C<=R;C++)et=eo,eo=n[2*(C+1)+1],++el<eu&&et===eo||(el<ec?e.bl_tree[2*et]+=el:0!==et?(et!==ei&&e.bl_tree[2*et]++,e.bl_tree[32]++):el<=10?e.bl_tree[34]++:e.bl_tree[36]++,ei=et,ec=(el=0)===eo?(eu=138,3):et===eo?(eu=6,3):(eu=7,4))}function ge(e,n,R){var C,et,ei=-1,eo=n[1],el=0,eu=7,ec=4;for(0===eo&&(eu=138,ec=3),C=0;C<=R;C++)if(et=eo,eo=n[2*(C+1)+1],!(++el<eu&&et===eo)){if(el<ec)for(;Ue(e,et,e.bl_tree),0!=--el;);else 0!==et?(et!==ei&&(Ue(e,et,e.bl_tree),el--),Ue(e,16,e.bl_tree),be(e,el-3,2)):el<=10?(Ue(e,17,e.bl_tree),be(e,el-3,3)):(Ue(e,18,e.bl_tree),be(e,el-11,7));ei=et,ec=(el=0)===eo?(eu=138,3):et===eo?(eu=6,3):(eu=7,4)}}u(em);var eb=!1;function w(e,n,R,et){be(e,0+(et?1:0),3),ae(e),ye(e,R),ye(e,~R),C.arraySet(e.pending_buf,e.window,n,R,e.pending),e.pending+=R}R._tr_init=function(e){eb||(function(){var e,n,R,C,el,eb=Array(16);for(C=R=0;C<28;C++)for(ep[C]=R,e=0;e<1<<et[C];e++)eh[R++]=C;for(eh[R-1]=C,C=el=0;C<16;C++)for(em[C]=el,e=0;e<1<<ei[C];e++)ef[el++]=C;for(el>>=7;C<30;C++)for(em[C]=el<<7,e=0;e<1<<ei[C]-7;e++)ef[256+el++]=C;for(n=0;n<=15;n++)eb[n]=0;for(e=0;e<=143;)eu[2*e+1]=8,e++,eb[8]++;for(;e<=255;)eu[2*e+1]=9,e++,eb[9]++;for(;e<=279;)eu[2*e+1]=7,e++,eb[7]++;for(;e<=287;)eu[2*e+1]=8,e++,eb[8]++;for(st(eu,287,eb),e=0;e<30;e++)ec[2*e+1]=5,ec[2*e]=Xe(e,5);ed=new G(eu,et,257,286,15),e_=new G(ec,ei,0,30,15),eg=new G([],eo,0,19,7)}(),eb=!0),e.l_desc=new I(e.dyn_ltree,ed),e.d_desc=new I(e.dyn_dtree,e_),e.bl_desc=new I(e.bl_tree,eg),e.bi_buf=0,e.bi_valid=0,Ze(e)},R._tr_stored_block=w,R._tr_flush_block=function(e,n,R,C){var et,ei,eo=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var n,R=4093624447;for(n=0;n<=31;n++,R>>>=1)if(1&R&&0!==e.dyn_ltree[2*n])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(n=32;n<256;n++)if(0!==e.dyn_ltree[2*n])return 1;return 0}(e)),ze(e,e.l_desc),ze(e,e.d_desc),eo=function(e){var n;for(g(e,e.dyn_ltree,e.l_desc.max_code),g(e,e.dyn_dtree,e.d_desc.max_code),ze(e,e.bl_desc),n=18;3<=n&&0===e.bl_tree[2*el[n]+1];n--);return e.opt_len+=3*(n+1)+5+5+4,n}(e),et=e.opt_len+3+7>>>3,(ei=e.static_len+3+7>>>3)<=et&&(et=ei)):et=ei=R+5,R+4<=et&&-1!==n?w(e,n,R,C):4===e.strategy||ei===et?(be(e,2+(C?1:0),3),Te(e,eu,ec)):(be(e,4+(C?1:0),3),function(e,n,R,C){var et;for(be(e,n-257,5),be(e,R-1,5),be(e,C-4,4),et=0;et<C;et++)be(e,e.bl_tree[2*el[et]+1],3);ge(e,e.dyn_ltree,n-1),ge(e,e.dyn_dtree,R-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,eo+1),Te(e,e.dyn_ltree,e.dyn_dtree)),Ze(e),C&&ae(e)},R._tr_tally=function(e,n,R){return e.pending_buf[e.d_buf+2*e.last_lit]=n>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&n,e.pending_buf[e.l_buf+e.last_lit]=255&R,e.last_lit++,0===n?e.dyn_ltree[2*R]++:(e.matches++,n--,e.dyn_ltree[2*(eh[R]+256+1)]++,e.dyn_dtree[2*B(n)]++),e.last_lit===e.lit_bufsize-1},R._tr_align=function(e){be(e,2,3),Ue(e,256,eu),16===e.bi_valid?(ye(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}},{"../utils/common":41}],53:[function(e,n,R){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,n,R){(function(e){!function(e,n){if(!e.setImmediate){var R,C,et,ei,eo=1,el={},ec=!1,ef=e.document,eh=Object.getPrototypeOf&&Object.getPrototypeOf(e);eh=eh&&eh.setTimeout?eh:e,R="[object process]"===({}).toString.call(e.process)?function(e){eu.nextTick(function(){N(e)})}:!function(){if(e.postMessage&&!e.importScripts){var n=!0,R=e.onmessage;return e.onmessage=function(){n=!1},e.postMessage("","*"),e.onmessage=R,n}}()?e.MessageChannel?((et=new MessageChannel).port1.onmessage=function(e){N(e.data)},function(e){et.port2.postMessage(e)}):ef&&"onreadystatechange"in ef.createElement("script")?(C=ef.documentElement,function(e){var n=ef.createElement("script");n.onreadystatechange=function(){N(e),n.onreadystatechange=null,C.removeChild(n),n=null},C.appendChild(n)}):function(e){setTimeout(N,0,e)}:(ei="setImmediate$"+Math.random()+"$",e.addEventListener?e.addEventListener("message",M,!1):e.attachEvent("onmessage",M),function(n){e.postMessage(ei+n,"*")}),eh.setImmediate=function(e){"function"!=typeof e&&(e=Function(""+e));for(var n=Array(arguments.length-1),C=0;C<n.length;C++)n[C]=arguments[C+1];var et={callback:e,args:n};return el[eo]=et,R(eo),eo++},eh.clearImmediate=b}function b(e){delete el[e]}function N(e){if(ec)setTimeout(N,0,e);else{var n=el[e];if(n){ec=!0;try{!function(e){var n=e.callback,R=e.args;switch(R.length){case 0:n();break;case 1:n(R[0]);break;case 2:n(R[0],R[1]);break;case 3:n(R[0],R[1],R[2]);break;default:n.apply(void 0,R)}}(n)}finally{b(e),ec=!1}}}}function M(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(ei)&&N(+n.data.slice(ei.length))}}(typeof self>"u"?void 0===e?this:e:self)}).call(this,"u">typeof t_?t_:"u">typeof self?self:"u">typeof window?window:{})},{}]},{},[10])(10);var tm=tg.exports;let tb=tm&&tm.__esModule&&Object.prototype.hasOwnProperty.call(tm,"default")?tm.default:tm;function Ha(e){return fetch(e).then(e=>e.ok?e.blob():Promise.reject(e.status)).then(e=>e.text())}let ol=class ol{constructor(e){this._url=e;let n=e.lastIndexOf("/");-1!==e.indexOf(".",n)?(-1===n?this._baseUrl="":this._baseUrl=e.substring(0,n),this._filename=e.substring(n+1)):this._baseUrl=e,this._baseUrl.endsWith("/")||(this._baseUrl=this._baseUrl+"/")}get url(){return this._url}get baseUrl(){return this._baseUrl}get filename(){return this._filename}href(e){return`${this.baseUrl}${e}`}get(e){return Ha(this.href(e))}ready(e){e&&e()}close(e){e&&e(null)}};let ll=class ll{ready(e){throw Error("Method not implemented.")}close(e){throw Error("Method not implemented.")}};let ul=class ul extends ll{constructor(e){super(),this._zip=void 0,this._isClosed=!1,this._url=e,this._baseUrl=e.substring(0,e.lastIndexOf("/")),this._task=Ha(e).then(tb.loadAsync).then(e=>{this._isClosed||(this._zip=e,this._task=void 0,this._notifyReady())})}get url(){return this._url}get baseUrl(){return this._baseUrl}href(e){return e}get(e){return new Promise((n,R)=>{if(void 0===this._zip){R(void 0);return}let C=this._zip.file(e);if(!C){R(void 0);return}C.async("string").then(e=>{n(e)}).catch(R)})}ready(e){this._readyCallback=e,void 0===this._task&&this._notifyReady()}_notifyReady(){void 0!==this._readyCallback&&this._readyCallback()}close(e){this._isClosed=!0,this._task=void 0,this._zip=void 0,void 0!==e&&e(null)}};let ty={inputDeviceFactory:()=>new rl,fileServerFactory:e=>e.endsWith(".zip")?new ul(e):new ol(e)},tv=class extends el.Component{componentDidMount(){var e,n,R,C;let et,ei;void 0===this._player&&(this._player=(e={element:this.props._ref.current,url:this.props.url,boot:this.props.boot,splashart:this.props.splashart,width:this.props.width,height:this.props.height,scale:this.props.scale,resizable:this.props.resizable,autoPlay:this.props.autoPlay,speed:this.props.speed,onReady:this.props.onReady},n=void 0,ei={url:"",resizable:!0,speed:1},void 0===e||Ga(e)||"className"in e?et=e:n=e,void 0!==n&&(ei={...ei,...n}),null==et&&(et=void 0!==ei.element?ei.element:document.getElementsByClassName("moroboxai-player")),Ga(et)?Array.prototype.map.call(et,e=>{var n;return n=ei,new Qo(ty,e,n)}):(R=et,C=ei,new Qo(ty,R,C))),void 0!==this.props.onMount&&this.props.onMount(this._player))}componentDidUpdate(e){void 0!==this._player&&(void 0!==this.props.width&&this.props.width!=e.width&&this._player.resize({width:this.props.width,height:this._player.height}),void 0!==this.props.height&&this.props.height!=e.height&&this._player.resize({width:this._player.width,height:this.props.height}),void 0!==this.props.scale&&this.props.scale!=e.scale&&(this._player.scale=this.props.scale),void 0!==this.props.speed&&this.props.speed!=e.speed&&(this._player.speed=this.props.speed),void 0!==this.props.resizable&&this.props.resizable!=e.resizable&&(this._player.resizable=this.props.resizable),void 0!==this.props.boot&&this.props.boot!=e.boot&&(this._player.boot=this.props.boot),void 0!==this.props.autoPlay&&this.props.autoPlay!=e.autoPlay&&(this._player.autoPlay=this.props.autoPlay),void 0!==this.props.url&&this.props.url!=e.url&&this._player.play({url:this.props.url}))}componentWillUnmount(){if(void 0!==this._player){console.log("unmount player from",this);let e=this._player;this._player.remove(),this._player=void 0,void 0!==this.props.onUnmount&&this.props.onUnmount(e)}}getModel(){return this._player}render(){let e={style:{backgroundSize:"cover"}};return void 0!==this.props.url&&(e["data-url"]=this.props.url),void 0!==this.props.splashart&&(e.style.backgroundImage=`url('${this.props.splashart}')`),ep.jsx("div",{className:this.props.className??"",ref:this.props._ref,...e})}},tk=(0,el.memo)(tv);let dl=class dl extends el.Component{constructor(e){super(e),this._refContainer=el.createRef()}render(){return ep.jsx(tk,{_ref:this._refContainer,...this.props})}};let tA=(0,el.memo)(dl)}}]);